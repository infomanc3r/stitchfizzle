var K3=Object.defineProperty;var Z3=(n,e,t)=>e in n?K3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Qh=(n,e,t)=>Z3(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var qr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ug(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Cb={exports:{}},ep={},Tb={exports:{}},$r={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jh=Symbol.for("react.element"),J3=Symbol.for("react.portal"),Q3=Symbol.for("react.fragment"),t4=Symbol.for("react.strict_mode"),e4=Symbol.for("react.profiler"),r4=Symbol.for("react.provider"),n4=Symbol.for("react.context"),i4=Symbol.for("react.forward_ref"),s4=Symbol.for("react.suspense"),o4=Symbol.for("react.memo"),a4=Symbol.for("react.lazy"),e2=Symbol.iterator;function l4(n){return n===null||typeof n!="object"?null:(n=e2&&n[e2]||n["@@iterator"],typeof n=="function"?n:null)}var Ab={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Eb=Object.assign,jb={};function hc(n,e,t){this.props=n,this.context=e,this.refs=jb,this.updater=t||Ab}hc.prototype.isReactComponent={};hc.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};hc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Mb(){}Mb.prototype=hc.prototype;function cg(n,e,t){this.props=n,this.context=e,this.refs=jb,this.updater=t||Ab}var hg=cg.prototype=new Mb;hg.constructor=cg;Eb(hg,hc.prototype);hg.isPureReactComponent=!0;var r2=Array.isArray,Nb=Object.prototype.hasOwnProperty,fg={current:null},Ob={key:!0,ref:!0,__self:!0,__source:!0};function Pb(n,e,t){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Nb.call(e,r)&&!Ob.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=t;else if(1<u){for(var l=Array(u),a=0;a<u;a++)l[a]=arguments[a+2];s.children=l}if(n&&n.defaultProps)for(r in u=n.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:jh,type:n,key:i,ref:o,props:s,_owner:fg.current}}function u4(n,e){return{$$typeof:jh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function dg(n){return typeof n=="object"&&n!==null&&n.$$typeof===jh}function c4(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var n2=/\/+/g;function Xp(n,e){return typeof n=="object"&&n!==null&&n.key!=null?c4(""+n.key):e.toString(36)}function Yf(n,e,t,r,s){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case jh:case J3:o=!0}}if(o)return o=n,s=s(o),n=r===""?"."+Xp(o,0):r,r2(s)?(t="",n!=null&&(t=n.replace(n2,"$&/")+"/"),Yf(s,e,t,"",function(a){return a})):s!=null&&(dg(s)&&(s=u4(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(n2,"$&/")+"/")+n)),e.push(s)),1;if(o=0,r=r===""?".":r+":",r2(n))for(var u=0;u<n.length;u++){i=n[u];var l=r+Xp(i,u);o+=Yf(i,e,t,l,s)}else if(l=l4(n),typeof l=="function")for(n=l.call(n),u=0;!(i=n.next()).done;)i=i.value,l=r+Xp(i,u++),o+=Yf(i,e,t,l,s);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function tf(n,e,t){if(n==null)return n;var r=[],s=0;return Yf(n,r,"","",function(i){return e.call(t,i,s++)}),r}function h4(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ts={current:null},Gf={transition:null},f4={ReactCurrentDispatcher:ts,ReactCurrentBatchConfig:Gf,ReactCurrentOwner:fg};function Lb(){throw Error("act(...) is not supported in production builds of React.")}$r.Children={map:tf,forEach:function(n,e,t){tf(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return tf(n,function(){e++}),e},toArray:function(n){return tf(n,function(e){return e})||[]},only:function(n){if(!dg(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};$r.Component=hc;$r.Fragment=Q3;$r.Profiler=e4;$r.PureComponent=cg;$r.StrictMode=t4;$r.Suspense=s4;$r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f4;$r.act=Lb;$r.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=Eb({},n.props),s=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=fg.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var u=n.type.defaultProps;for(l in e)Nb.call(e,l)&&!Ob.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&u!==void 0?u[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){u=Array(l);for(var a=0;a<l;a++)u[a]=arguments[a+2];r.children=u}return{$$typeof:jh,type:n.type,key:s,ref:i,props:r,_owner:o}};$r.createContext=function(n){return n={$$typeof:n4,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:r4,_context:n},n.Consumer=n};$r.createElement=Pb;$r.createFactory=function(n){var e=Pb.bind(null,n);return e.type=n,e};$r.createRef=function(){return{current:null}};$r.forwardRef=function(n){return{$$typeof:i4,render:n}};$r.isValidElement=dg;$r.lazy=function(n){return{$$typeof:a4,_payload:{_status:-1,_result:n},_init:h4}};$r.memo=function(n,e){return{$$typeof:o4,type:n,compare:e===void 0?null:e}};$r.startTransition=function(n){var e=Gf.transition;Gf.transition={};try{n()}finally{Gf.transition=e}};$r.unstable_act=Lb;$r.useCallback=function(n,e){return ts.current.useCallback(n,e)};$r.useContext=function(n){return ts.current.useContext(n)};$r.useDebugValue=function(){};$r.useDeferredValue=function(n){return ts.current.useDeferredValue(n)};$r.useEffect=function(n,e){return ts.current.useEffect(n,e)};$r.useId=function(){return ts.current.useId()};$r.useImperativeHandle=function(n,e,t){return ts.current.useImperativeHandle(n,e,t)};$r.useInsertionEffect=function(n,e){return ts.current.useInsertionEffect(n,e)};$r.useLayoutEffect=function(n,e){return ts.current.useLayoutEffect(n,e)};$r.useMemo=function(n,e){return ts.current.useMemo(n,e)};$r.useReducer=function(n,e,t){return ts.current.useReducer(n,e,t)};$r.useRef=function(n){return ts.current.useRef(n)};$r.useState=function(n){return ts.current.useState(n)};$r.useSyncExternalStore=function(n,e,t){return ts.current.useSyncExternalStore(n,e,t)};$r.useTransition=function(){return ts.current.useTransition()};$r.version="18.3.1";Tb.exports=$r;var Xe=Tb.exports;const fa=ug(Xe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d4=Xe,p4=Symbol.for("react.element"),m4=Symbol.for("react.fragment"),g4=Object.prototype.hasOwnProperty,y4=d4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,b4={key:!0,ref:!0,__self:!0,__source:!0};function Rb(n,e,t){var r,s={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)g4.call(e,r)&&!b4.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:p4,type:n,key:i,ref:o,props:s,_owner:y4.current}}ep.Fragment=m4;ep.jsx=Rb;ep.jsxs=Rb;Cb.exports=ep;var tt=Cb.exports,Db={exports:{}},Ms={},Ib={exports:{}},Fb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(x,S){var A=x.length;x.push(S);t:for(;0<A;){var B=A-1>>>1,E=x[B];if(0<s(E,S))x[B]=S,x[A]=E,A=B;else break t}}function t(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var S=x[0],A=x.pop();if(A!==S){x[0]=A;t:for(var B=0,E=x.length,V=E>>>1;B<V;){var X=2*(B+1)-1,Q=x[X],D=X+1,Z=x[D];if(0>s(Q,A))D<E&&0>s(Z,Q)?(x[B]=Z,x[D]=A,B=D):(x[B]=Q,x[X]=A,B=X);else if(D<E&&0>s(Z,A))x[B]=Z,x[D]=A,B=D;else break t}}return S}function s(x,S){var A=x.sortIndex-S.sortIndex;return A!==0?A:x.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();n.unstable_now=function(){return o.now()-u}}var l=[],a=[],c=1,d=null,f=3,h=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(x){for(var S=t(a);S!==null;){if(S.callback===null)r(a);else if(S.startTime<=x)r(a),S.sortIndex=S.expirationTime,e(l,S);else break;S=t(a)}}function k(x){if(g=!1,v(x),!p)if(t(l)!==null)p=!0,w(j);else{var S=t(a);S!==null&&_(k,S.startTime-x)}}function j(x,S){p=!1,g&&(g=!1,y(P),P=-1),h=!0;var A=f;try{for(v(S),d=t(l);d!==null&&(!(d.expirationTime>S)||x&&!$());){var B=d.callback;if(typeof B=="function"){d.callback=null,f=d.priorityLevel;var E=B(d.expirationTime<=S);S=n.unstable_now(),typeof E=="function"?d.callback=E:d===t(l)&&r(l),v(S)}else r(l);d=t(l)}if(d!==null)var V=!0;else{var X=t(a);X!==null&&_(k,X.startTime-S),V=!1}return V}finally{d=null,f=A,h=!1}}var I=!1,U=null,P=-1,z=5,q=-1;function $(){return!(n.unstable_now()-q<z)}function F(){if(U!==null){var x=n.unstable_now();q=x;var S=!0;try{S=U(!0,x)}finally{S?T():(I=!1,U=null)}}else I=!1}var T;if(typeof b=="function")T=function(){b(F)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,C=N.port2;N.port1.onmessage=F,T=function(){C.postMessage(null)}}else T=function(){m(F,0)};function w(x){U=x,I||(I=!0,T())}function _(x,S){P=m(function(){x(n.unstable_now())},S)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(x){x.callback=null},n.unstable_continueExecution=function(){p||h||(p=!0,w(j))},n.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<x?Math.floor(1e3/x):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(x){switch(f){case 1:case 2:case 3:var S=3;break;default:S=f}var A=f;f=S;try{return x()}finally{f=A}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(x,S){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var A=f;f=x;try{return S()}finally{f=A}},n.unstable_scheduleCallback=function(x,S,A){var B=n.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?B+A:B):A=B,x){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=A+E,x={id:c++,callback:S,priorityLevel:x,startTime:A,expirationTime:E,sortIndex:-1},A>B?(x.sortIndex=A,e(a,x),t(l)===null&&x===t(a)&&(g?(y(P),P=-1):g=!0,_(k,A-B))):(x.sortIndex=E,e(l,x),p||h||(p=!0,w(j))),x},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(x){var S=f;return function(){var A=f;f=S;try{return x.apply(this,arguments)}finally{f=A}}}})(Fb);Ib.exports=Fb;var v4=Ib.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w4=Xe,js=v4;function Le(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bb=new Set,sh={};function su(n,e){rc(n,e),rc(n+"Capture",e)}function rc(n,e){for(sh[n]=e,n=0;n<e.length;n++)Bb.add(e[n])}var xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$0=Object.prototype.hasOwnProperty,x4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,i2={},s2={};function _4(n){return $0.call(s2,n)?!0:$0.call(i2,n)?!1:x4.test(n)?s2[n]=!0:(i2[n]=!0,!1)}function S4(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function k4(n,e,t,r){if(e===null||typeof e>"u"||S4(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function es(n,e,t,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ai={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ai[n]=new es(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ai[e]=new es(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ai[n]=new es(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ai[n]=new es(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ai[n]=new es(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ai[n]=new es(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ai[n]=new es(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ai[n]=new es(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ai[n]=new es(n,5,!1,n.toLowerCase(),null,!1,!1)});var pg=/[\-:]([a-z])/g;function mg(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(pg,mg);Ai[e]=new es(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(pg,mg);Ai[e]=new es(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(pg,mg);Ai[e]=new es(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ai[n]=new es(n,1,!1,n.toLowerCase(),null,!1,!1)});Ai.xlinkHref=new es("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ai[n]=new es(n,1,!1,n.toLowerCase(),null,!0,!0)});function gg(n,e,t,r){var s=Ai.hasOwnProperty(e)?Ai[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(k4(e,t,s,r)&&(t=null),r||s===null?_4(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ja=w4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ef=Symbol.for("react.element"),Tu=Symbol.for("react.portal"),Au=Symbol.for("react.fragment"),yg=Symbol.for("react.strict_mode"),V0=Symbol.for("react.profiler"),zb=Symbol.for("react.provider"),Ub=Symbol.for("react.context"),bg=Symbol.for("react.forward_ref"),W0=Symbol.for("react.suspense"),X0=Symbol.for("react.suspense_list"),vg=Symbol.for("react.memo"),rl=Symbol.for("react.lazy"),qb=Symbol.for("react.offscreen"),o2=Symbol.iterator;function Ec(n){return n===null||typeof n!="object"?null:(n=o2&&n[o2]||n["@@iterator"],typeof n=="function"?n:null)}var On=Object.assign,Yp;function zc(n){if(Yp===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Yp=e&&e[1]||""}return`
`+Yp+n}var Gp=!1;function Kp(n,e){if(!n||Gp)return"";Gp=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(a){var r=a}Reflect.construct(n,[],e)}else{try{e.call()}catch(a){r=a}n.call(e.prototype)}else{try{throw Error()}catch(a){r=a}n()}}catch(a){if(a&&r&&typeof a.stack=="string"){for(var s=a.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var l=`
`+s[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=u);break}}}finally{Gp=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?zc(n):""}function C4(n){switch(n.tag){case 5:return zc(n.type);case 16:return zc("Lazy");case 13:return zc("Suspense");case 19:return zc("SuspenseList");case 0:case 2:case 15:return n=Kp(n.type,!1),n;case 11:return n=Kp(n.type.render,!1),n;case 1:return n=Kp(n.type,!0),n;default:return""}}function Y0(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Au:return"Fragment";case Tu:return"Portal";case V0:return"Profiler";case yg:return"StrictMode";case W0:return"Suspense";case X0:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Ub:return(n.displayName||"Context")+".Consumer";case zb:return(n._context.displayName||"Context")+".Provider";case bg:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case vg:return e=n.displayName||null,e!==null?e:Y0(n.type)||"Memo";case rl:e=n._payload,n=n._init;try{return Y0(n(e))}catch{}}return null}function T4(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Y0(e);case 8:return e===yg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Hb(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function A4(n){var e=Hb(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function rf(n){n._valueTracker||(n._valueTracker=A4(n))}function $b(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Hb(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function md(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function G0(n,e){var t=e.checked;return On({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function a2(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=yl(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vb(n,e){e=e.checked,e!=null&&gg(n,"checked",e,!1)}function K0(n,e){Vb(n,e);var t=yl(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Z0(n,e.type,t):e.hasOwnProperty("defaultValue")&&Z0(n,e.type,yl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function l2(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Z0(n,e,t){(e!=="number"||md(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Uc=Array.isArray;function qu(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+yl(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function J0(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Le(91));return On({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function u2(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Le(92));if(Uc(t)){if(1<t.length)throw Error(Le(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:yl(t)}}function Wb(n,e){var t=yl(e.value),r=yl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function c2(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Xb(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Q0(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Xb(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var nf,Yb=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(nf=nf||document.createElement("div"),nf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nf.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function oh(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Vc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E4=["Webkit","ms","Moz","O"];Object.keys(Vc).forEach(function(n){E4.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Vc[e]=Vc[n]})});function Gb(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Vc.hasOwnProperty(n)&&Vc[n]?(""+e).trim():e+"px"}function Kb(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=Gb(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var j4=On({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tm(n,e){if(e){if(j4[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Le(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Le(62))}}function em(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rm=null;function wg(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var nm=null,Hu=null,$u=null;function h2(n){if(n=Oh(n)){if(typeof nm!="function")throw Error(Le(280));var e=n.stateNode;e&&(e=op(e),nm(n.stateNode,n.type,e))}}function Zb(n){Hu?$u?$u.push(n):$u=[n]:Hu=n}function Jb(){if(Hu){var n=Hu,e=$u;if($u=Hu=null,h2(n),e)for(n=0;n<e.length;n++)h2(e[n])}}function Qb(n,e){return n(e)}function tv(){}var Zp=!1;function ev(n,e,t){if(Zp)return n(e,t);Zp=!0;try{return Qb(n,e,t)}finally{Zp=!1,(Hu!==null||$u!==null)&&(tv(),Jb())}}function ah(n,e){var t=n.stateNode;if(t===null)return null;var r=op(t);if(r===null)return null;t=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break t;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Le(231,e,typeof t));return t}var im=!1;if(xa)try{var jc={};Object.defineProperty(jc,"passive",{get:function(){im=!0}}),window.addEventListener("test",jc,jc),window.removeEventListener("test",jc,jc)}catch{im=!1}function M4(n,e,t,r,s,i,o,u,l){var a=Array.prototype.slice.call(arguments,3);try{e.apply(t,a)}catch(c){this.onError(c)}}var Wc=!1,gd=null,yd=!1,sm=null,N4={onError:function(n){Wc=!0,gd=n}};function O4(n,e,t,r,s,i,o,u,l){Wc=!1,gd=null,M4.apply(N4,arguments)}function P4(n,e,t,r,s,i,o,u,l){if(O4.apply(this,arguments),Wc){if(Wc){var a=gd;Wc=!1,gd=null}else throw Error(Le(198));yd||(yd=!0,sm=a)}}function ou(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function rv(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function f2(n){if(ou(n)!==n)throw Error(Le(188))}function L4(n){var e=n.alternate;if(!e){if(e=ou(n),e===null)throw Error(Le(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return f2(s),n;if(i===r)return f2(s),e;i=i.sibling}throw Error(Le(188))}if(t.return!==r.return)t=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===t){o=!0,t=s,r=i;break}if(u===r){o=!0,r=s,t=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===t){o=!0,t=i,r=s;break}if(u===r){o=!0,r=i,t=s;break}u=u.sibling}if(!o)throw Error(Le(189))}}if(t.alternate!==r)throw Error(Le(190))}if(t.tag!==3)throw Error(Le(188));return t.stateNode.current===t?n:e}function nv(n){return n=L4(n),n!==null?iv(n):null}function iv(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=iv(n);if(e!==null)return e;n=n.sibling}return null}var sv=js.unstable_scheduleCallback,d2=js.unstable_cancelCallback,R4=js.unstable_shouldYield,D4=js.unstable_requestPaint,Hn=js.unstable_now,I4=js.unstable_getCurrentPriorityLevel,xg=js.unstable_ImmediatePriority,ov=js.unstable_UserBlockingPriority,bd=js.unstable_NormalPriority,F4=js.unstable_LowPriority,av=js.unstable_IdlePriority,rp=null,Uo=null;function B4(n){if(Uo&&typeof Uo.onCommitFiberRoot=="function")try{Uo.onCommitFiberRoot(rp,n,void 0,(n.current.flags&128)===128)}catch{}}var So=Math.clz32?Math.clz32:q4,z4=Math.log,U4=Math.LN2;function q4(n){return n>>>=0,n===0?32:31-(z4(n)/U4|0)|0}var sf=64,of=4194304;function qc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function vd(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var u=o&~s;u!==0?r=qc(u):(i&=o,i!==0&&(r=qc(i)))}else o=t&~s,o!==0?r=qc(o):i!==0&&(r=qc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-So(e),s=1<<t,r|=n[t],e&=~s;return r}function H4(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $4(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-So(i),u=1<<o,l=s[o];l===-1?(!(u&t)||u&r)&&(s[o]=H4(u,e)):l<=e&&(n.expiredLanes|=u),i&=~u}}function om(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function lv(){var n=sf;return sf<<=1,!(sf&4194240)&&(sf=64),n}function Jp(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Mh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-So(e),n[e]=t}function V4(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-So(t),i=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~i}}function _g(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-So(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var un=0;function uv(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var cv,Sg,hv,fv,dv,am=!1,af=[],ul=null,cl=null,hl=null,lh=new Map,uh=new Map,il=[],W4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function p2(n,e){switch(n){case"focusin":case"focusout":ul=null;break;case"dragenter":case"dragleave":cl=null;break;case"mouseover":case"mouseout":hl=null;break;case"pointerover":case"pointerout":lh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":uh.delete(e.pointerId)}}function Mc(n,e,t,r,s,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Oh(e),e!==null&&Sg(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function X4(n,e,t,r,s){switch(e){case"focusin":return ul=Mc(ul,n,e,t,r,s),!0;case"dragenter":return cl=Mc(cl,n,e,t,r,s),!0;case"mouseover":return hl=Mc(hl,n,e,t,r,s),!0;case"pointerover":var i=s.pointerId;return lh.set(i,Mc(lh.get(i)||null,n,e,t,r,s)),!0;case"gotpointercapture":return i=s.pointerId,uh.set(i,Mc(uh.get(i)||null,n,e,t,r,s)),!0}return!1}function pv(n){var e=ql(n.target);if(e!==null){var t=ou(e);if(t!==null){if(e=t.tag,e===13){if(e=rv(t),e!==null){n.blockedOn=e,dv(n.priority,function(){hv(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Kf(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=lm(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);rm=r,t.target.dispatchEvent(r),rm=null}else return e=Oh(t),e!==null&&Sg(e),n.blockedOn=t,!1;e.shift()}return!0}function m2(n,e,t){Kf(n)&&t.delete(e)}function Y4(){am=!1,ul!==null&&Kf(ul)&&(ul=null),cl!==null&&Kf(cl)&&(cl=null),hl!==null&&Kf(hl)&&(hl=null),lh.forEach(m2),uh.forEach(m2)}function Nc(n,e){n.blockedOn===e&&(n.blockedOn=null,am||(am=!0,js.unstable_scheduleCallback(js.unstable_NormalPriority,Y4)))}function ch(n){function e(s){return Nc(s,n)}if(0<af.length){Nc(af[0],n);for(var t=1;t<af.length;t++){var r=af[t];r.blockedOn===n&&(r.blockedOn=null)}}for(ul!==null&&Nc(ul,n),cl!==null&&Nc(cl,n),hl!==null&&Nc(hl,n),lh.forEach(e),uh.forEach(e),t=0;t<il.length;t++)r=il[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<il.length&&(t=il[0],t.blockedOn===null);)pv(t),t.blockedOn===null&&il.shift()}var Vu=ja.ReactCurrentBatchConfig,wd=!0;function G4(n,e,t,r){var s=un,i=Vu.transition;Vu.transition=null;try{un=1,kg(n,e,t,r)}finally{un=s,Vu.transition=i}}function K4(n,e,t,r){var s=un,i=Vu.transition;Vu.transition=null;try{un=4,kg(n,e,t,r)}finally{un=s,Vu.transition=i}}function kg(n,e,t,r){if(wd){var s=lm(n,e,t,r);if(s===null)l0(n,e,r,xd,t),p2(n,r);else if(X4(s,n,e,t,r))r.stopPropagation();else if(p2(n,r),e&4&&-1<W4.indexOf(n)){for(;s!==null;){var i=Oh(s);if(i!==null&&cv(i),i=lm(n,e,t,r),i===null&&l0(n,e,r,xd,t),i===s)break;s=i}s!==null&&r.stopPropagation()}else l0(n,e,r,null,t)}}var xd=null;function lm(n,e,t,r){if(xd=null,n=wg(r),n=ql(n),n!==null)if(e=ou(n),e===null)n=null;else if(t=e.tag,t===13){if(n=rv(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return xd=n,null}function mv(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(I4()){case xg:return 1;case ov:return 4;case bd:case F4:return 16;case av:return 536870912;default:return 16}default:return 16}}var ol=null,Cg=null,Zf=null;function gv(){if(Zf)return Zf;var n,e=Cg,t=e.length,r,s="value"in ol?ol.value:ol.textContent,i=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===s[i-r];r++);return Zf=s.slice(n,1<r?1-r:void 0)}function Jf(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function lf(){return!0}function g2(){return!1}function Ns(n){function e(t,r,s,i,o){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in n)n.hasOwnProperty(u)&&(t=n[u],this[u]=t?t(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?lf:g2,this.isPropagationStopped=g2,this}return On(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=lf)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=lf)},persist:function(){},isPersistent:lf}),e}var fc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tg=Ns(fc),Nh=On({},fc,{view:0,detail:0}),Z4=Ns(Nh),Qp,t0,Oc,np=On({},Nh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ag,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Oc&&(Oc&&n.type==="mousemove"?(Qp=n.screenX-Oc.screenX,t0=n.screenY-Oc.screenY):t0=Qp=0,Oc=n),Qp)},movementY:function(n){return"movementY"in n?n.movementY:t0}}),y2=Ns(np),J4=On({},np,{dataTransfer:0}),Q4=Ns(J4),tx=On({},Nh,{relatedTarget:0}),e0=Ns(tx),ex=On({},fc,{animationName:0,elapsedTime:0,pseudoElement:0}),rx=Ns(ex),nx=On({},fc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ix=Ns(nx),sx=On({},fc,{data:0}),b2=Ns(sx),ox={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ax={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ux(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=lx[n])?!!e[n]:!1}function Ag(){return ux}var cx=On({},Nh,{key:function(n){if(n.key){var e=ox[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Jf(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ax[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ag,charCode:function(n){return n.type==="keypress"?Jf(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Jf(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),hx=Ns(cx),fx=On({},np,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v2=Ns(fx),dx=On({},Nh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ag}),px=Ns(dx),mx=On({},fc,{propertyName:0,elapsedTime:0,pseudoElement:0}),gx=Ns(mx),yx=On({},np,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),bx=Ns(yx),vx=[9,13,27,32],Eg=xa&&"CompositionEvent"in window,Xc=null;xa&&"documentMode"in document&&(Xc=document.documentMode);var wx=xa&&"TextEvent"in window&&!Xc,yv=xa&&(!Eg||Xc&&8<Xc&&11>=Xc),w2=" ",x2=!1;function bv(n,e){switch(n){case"keyup":return vx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vv(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Eu=!1;function xx(n,e){switch(n){case"compositionend":return vv(e);case"keypress":return e.which!==32?null:(x2=!0,w2);case"textInput":return n=e.data,n===w2&&x2?null:n;default:return null}}function _x(n,e){if(Eu)return n==="compositionend"||!Eg&&bv(n,e)?(n=gv(),Zf=Cg=ol=null,Eu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yv&&e.locale!=="ko"?null:e.data;default:return null}}var Sx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _2(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Sx[n.type]:e==="textarea"}function wv(n,e,t,r){Zb(r),e=_d(e,"onChange"),0<e.length&&(t=new Tg("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Yc=null,hh=null;function kx(n){Nv(n,0)}function ip(n){var e=Nu(n);if($b(e))return n}function Cx(n,e){if(n==="change")return e}var xv=!1;if(xa){var r0;if(xa){var n0="oninput"in document;if(!n0){var S2=document.createElement("div");S2.setAttribute("oninput","return;"),n0=typeof S2.oninput=="function"}r0=n0}else r0=!1;xv=r0&&(!document.documentMode||9<document.documentMode)}function k2(){Yc&&(Yc.detachEvent("onpropertychange",_v),hh=Yc=null)}function _v(n){if(n.propertyName==="value"&&ip(hh)){var e=[];wv(e,hh,n,wg(n)),ev(kx,e)}}function Tx(n,e,t){n==="focusin"?(k2(),Yc=e,hh=t,Yc.attachEvent("onpropertychange",_v)):n==="focusout"&&k2()}function Ax(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ip(hh)}function Ex(n,e){if(n==="click")return ip(e)}function jx(n,e){if(n==="input"||n==="change")return ip(e)}function Mx(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var To=typeof Object.is=="function"?Object.is:Mx;function fh(n,e){if(To(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!$0.call(e,s)||!To(n[s],e[s]))return!1}return!0}function C2(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function T2(n,e){var t=C2(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}t:{for(;t;){if(t.nextSibling){t=t.nextSibling;break t}t=t.parentNode}t=void 0}t=C2(t)}}function Sv(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Sv(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function kv(){for(var n=window,e=md();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=md(n.document)}return e}function jg(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Nx(n){var e=kv(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Sv(t.ownerDocument.documentElement,t)){if(r!==null&&jg(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!n.extend&&i>r&&(s=r,r=i,i=s),s=T2(t,i);var o=T2(t,r);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Ox=xa&&"documentMode"in document&&11>=document.documentMode,ju=null,um=null,Gc=null,cm=!1;function A2(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;cm||ju==null||ju!==md(r)||(r=ju,"selectionStart"in r&&jg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gc&&fh(Gc,r)||(Gc=r,r=_d(um,"onSelect"),0<r.length&&(e=new Tg("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=ju)))}function uf(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Mu={animationend:uf("Animation","AnimationEnd"),animationiteration:uf("Animation","AnimationIteration"),animationstart:uf("Animation","AnimationStart"),transitionend:uf("Transition","TransitionEnd")},i0={},Cv={};xa&&(Cv=document.createElement("div").style,"AnimationEvent"in window||(delete Mu.animationend.animation,delete Mu.animationiteration.animation,delete Mu.animationstart.animation),"TransitionEvent"in window||delete Mu.transitionend.transition);function sp(n){if(i0[n])return i0[n];if(!Mu[n])return n;var e=Mu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Cv)return i0[n]=e[t];return n}var Tv=sp("animationend"),Av=sp("animationiteration"),Ev=sp("animationstart"),jv=sp("transitionend"),Mv=new Map,E2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sl(n,e){Mv.set(n,e),su(e,[n])}for(var s0=0;s0<E2.length;s0++){var o0=E2[s0],Px=o0.toLowerCase(),Lx=o0[0].toUpperCase()+o0.slice(1);Sl(Px,"on"+Lx)}Sl(Tv,"onAnimationEnd");Sl(Av,"onAnimationIteration");Sl(Ev,"onAnimationStart");Sl("dblclick","onDoubleClick");Sl("focusin","onFocus");Sl("focusout","onBlur");Sl(jv,"onTransitionEnd");rc("onMouseEnter",["mouseout","mouseover"]);rc("onMouseLeave",["mouseout","mouseover"]);rc("onPointerEnter",["pointerout","pointerover"]);rc("onPointerLeave",["pointerout","pointerover"]);su("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));su("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));su("onBeforeInput",["compositionend","keypress","textInput","paste"]);su("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));su("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));su("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hc));function j2(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,P4(r,e,void 0,n),n.currentTarget=null}function Nv(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;t:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],l=u.instance,a=u.currentTarget;if(u=u.listener,l!==i&&s.isPropagationStopped())break t;j2(s,u,a),i=l}else for(o=0;o<r.length;o++){if(u=r[o],l=u.instance,a=u.currentTarget,u=u.listener,l!==i&&s.isPropagationStopped())break t;j2(s,u,a),i=l}}}if(yd)throw n=sm,yd=!1,sm=null,n}function _n(n,e){var t=e[mm];t===void 0&&(t=e[mm]=new Set);var r=n+"__bubble";t.has(r)||(Ov(e,n,2,!1),t.add(r))}function a0(n,e,t){var r=0;e&&(r|=4),Ov(t,n,r,e)}var cf="_reactListening"+Math.random().toString(36).slice(2);function dh(n){if(!n[cf]){n[cf]=!0,Bb.forEach(function(t){t!=="selectionchange"&&(Rx.has(t)||a0(t,!1,n),a0(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[cf]||(e[cf]=!0,a0("selectionchange",!1,e))}}function Ov(n,e,t,r){switch(mv(e)){case 1:var s=G4;break;case 4:s=K4;break;default:s=kg}t=s.bind(null,e,t,n),s=void 0,!im||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function l0(n,e,t,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)t:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;u!==null;){if(o=ql(u),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue t}u=u.parentNode}}r=r.return}ev(function(){var a=i,c=wg(t),d=[];t:{var f=Mv.get(n);if(f!==void 0){var h=Tg,p=n;switch(n){case"keypress":if(Jf(t)===0)break t;case"keydown":case"keyup":h=hx;break;case"focusin":p="focus",h=e0;break;case"focusout":p="blur",h=e0;break;case"beforeblur":case"afterblur":h=e0;break;case"click":if(t.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=y2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Q4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=px;break;case Tv:case Av:case Ev:h=rx;break;case jv:h=gx;break;case"scroll":h=Z4;break;case"wheel":h=bx;break;case"copy":case"cut":case"paste":h=ix;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=v2}var g=(e&4)!==0,m=!g&&n==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var b=a,v;b!==null;){v=b;var k=v.stateNode;if(v.tag===5&&k!==null&&(v=k,y!==null&&(k=ah(b,y),k!=null&&g.push(ph(b,k,v)))),m)break;b=b.return}0<g.length&&(f=new h(f,p,null,t,c),d.push({event:f,listeners:g}))}}if(!(e&7)){t:{if(f=n==="mouseover"||n==="pointerover",h=n==="mouseout"||n==="pointerout",f&&t!==rm&&(p=t.relatedTarget||t.fromElement)&&(ql(p)||p[_a]))break t;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=t.relatedTarget||t.toElement,h=a,p=p?ql(p):null,p!==null&&(m=ou(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=a),h!==p)){if(g=y2,k="onMouseLeave",y="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(g=v2,k="onPointerLeave",y="onPointerEnter",b="pointer"),m=h==null?f:Nu(h),v=p==null?f:Nu(p),f=new g(k,b+"leave",h,t,c),f.target=m,f.relatedTarget=v,k=null,ql(c)===a&&(g=new g(y,b+"enter",p,t,c),g.target=v,g.relatedTarget=m,k=g),m=k,h&&p)e:{for(g=h,y=p,b=0,v=g;v;v=yu(v))b++;for(v=0,k=y;k;k=yu(k))v++;for(;0<b-v;)g=yu(g),b--;for(;0<v-b;)y=yu(y),v--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break e;g=yu(g),y=yu(y)}g=null}else g=null;h!==null&&M2(d,f,h,g,!1),p!==null&&m!==null&&M2(d,m,p,g,!0)}}t:{if(f=a?Nu(a):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var j=Cx;else if(_2(f))if(xv)j=jx;else{j=Ax;var I=Tx}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=Ex);if(j&&(j=j(n,a))){wv(d,j,t,c);break t}I&&I(n,f,a),n==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&Z0(f,"number",f.value)}switch(I=a?Nu(a):window,n){case"focusin":(_2(I)||I.contentEditable==="true")&&(ju=I,um=a,Gc=null);break;case"focusout":Gc=um=ju=null;break;case"mousedown":cm=!0;break;case"contextmenu":case"mouseup":case"dragend":cm=!1,A2(d,t,c);break;case"selectionchange":if(Ox)break;case"keydown":case"keyup":A2(d,t,c)}var U;if(Eg)t:{switch(n){case"compositionstart":var P="onCompositionStart";break t;case"compositionend":P="onCompositionEnd";break t;case"compositionupdate":P="onCompositionUpdate";break t}P=void 0}else Eu?bv(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(yv&&t.locale!=="ko"&&(Eu||P!=="onCompositionStart"?P==="onCompositionEnd"&&Eu&&(U=gv()):(ol=c,Cg="value"in ol?ol.value:ol.textContent,Eu=!0)),I=_d(a,P),0<I.length&&(P=new b2(P,n,null,t,c),d.push({event:P,listeners:I}),U?P.data=U:(U=vv(t),U!==null&&(P.data=U)))),(U=wx?xx(n,t):_x(n,t))&&(a=_d(a,"onBeforeInput"),0<a.length&&(c=new b2("onBeforeInput","beforeinput",null,t,c),d.push({event:c,listeners:a}),c.data=U))}Nv(d,e)})}function ph(n,e,t){return{instance:n,listener:e,currentTarget:t}}function _d(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ah(n,t),i!=null&&r.unshift(ph(n,i,s)),i=ah(n,e),i!=null&&r.push(ph(n,i,s))),n=n.return}return r}function yu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function M2(n,e,t,r,s){for(var i=e._reactName,o=[];t!==null&&t!==r;){var u=t,l=u.alternate,a=u.stateNode;if(l!==null&&l===r)break;u.tag===5&&a!==null&&(u=a,s?(l=ah(t,i),l!=null&&o.unshift(ph(t,l,u))):s||(l=ah(t,i),l!=null&&o.push(ph(t,l,u)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Dx=/\r\n?/g,Ix=/\u0000|\uFFFD/g;function N2(n){return(typeof n=="string"?n:""+n).replace(Dx,`
`).replace(Ix,"")}function hf(n,e,t){if(e=N2(e),N2(n)!==e&&t)throw Error(Le(425))}function Sd(){}var hm=null,fm=null;function dm(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pm=typeof setTimeout=="function"?setTimeout:void 0,Fx=typeof clearTimeout=="function"?clearTimeout:void 0,O2=typeof Promise=="function"?Promise:void 0,Bx=typeof queueMicrotask=="function"?queueMicrotask:typeof O2<"u"?function(n){return O2.resolve(null).then(n).catch(zx)}:pm;function zx(n){setTimeout(function(){throw n})}function u0(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),ch(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);ch(e)}function fl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function P2(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var dc=Math.random().toString(36).slice(2),Io="__reactFiber$"+dc,mh="__reactProps$"+dc,_a="__reactContainer$"+dc,mm="__reactEvents$"+dc,Ux="__reactListeners$"+dc,qx="__reactHandles$"+dc;function ql(n){var e=n[Io];if(e)return e;for(var t=n.parentNode;t;){if(e=t[_a]||t[Io]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=P2(n);n!==null;){if(t=n[Io])return t;n=P2(n)}return e}n=t,t=n.parentNode}return null}function Oh(n){return n=n[Io]||n[_a],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Nu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Le(33))}function op(n){return n[mh]||null}var gm=[],Ou=-1;function kl(n){return{current:n}}function kn(n){0>Ou||(n.current=gm[Ou],gm[Ou]=null,Ou--)}function wn(n,e){Ou++,gm[Ou]=n.current,n.current=e}var bl={},$i=kl(bl),hs=kl(!1),Jl=bl;function nc(n,e){var t=n.type.contextTypes;if(!t)return bl;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function fs(n){return n=n.childContextTypes,n!=null}function kd(){kn(hs),kn($i)}function L2(n,e,t){if($i.current!==bl)throw Error(Le(168));wn($i,e),wn(hs,t)}function Pv(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Le(108,T4(n)||"Unknown",s));return On({},t,r)}function Cd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||bl,Jl=$i.current,wn($i,n),wn(hs,hs.current),!0}function R2(n,e,t){var r=n.stateNode;if(!r)throw Error(Le(169));t?(n=Pv(n,e,Jl),r.__reactInternalMemoizedMergedChildContext=n,kn(hs),kn($i),wn($i,n)):kn(hs),wn(hs,t)}var ua=null,ap=!1,c0=!1;function Lv(n){ua===null?ua=[n]:ua.push(n)}function Hx(n){ap=!0,Lv(n)}function Cl(){if(!c0&&ua!==null){c0=!0;var n=0,e=un;try{var t=ua;for(un=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}ua=null,ap=!1}catch(s){throw ua!==null&&(ua=ua.slice(n+1)),sv(xg,Cl),s}finally{un=e,c0=!1}}return null}var Pu=[],Lu=0,Td=null,Ad=0,Ws=[],Xs=0,Ql=null,pa=1,ma="";function Il(n,e){Pu[Lu++]=Ad,Pu[Lu++]=Td,Td=n,Ad=e}function Rv(n,e,t){Ws[Xs++]=pa,Ws[Xs++]=ma,Ws[Xs++]=Ql,Ql=n;var r=pa;n=ma;var s=32-So(r)-1;r&=~(1<<s),t+=1;var i=32-So(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,pa=1<<32-So(e)+s|t<<s|r,ma=i+n}else pa=1<<i|t<<s|r,ma=n}function Mg(n){n.return!==null&&(Il(n,1),Rv(n,1,0))}function Ng(n){for(;n===Td;)Td=Pu[--Lu],Pu[Lu]=null,Ad=Pu[--Lu],Pu[Lu]=null;for(;n===Ql;)Ql=Ws[--Xs],Ws[Xs]=null,ma=Ws[--Xs],Ws[Xs]=null,pa=Ws[--Xs],Ws[Xs]=null}var Es=null,Ts=null,An=!1,vo=null;function Dv(n,e){var t=Gs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function D2(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Es=n,Ts=fl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Es=n,Ts=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ql!==null?{id:pa,overflow:ma}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Gs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Es=n,Ts=null,!0):!1;default:return!1}}function ym(n){return(n.mode&1)!==0&&(n.flags&128)===0}function bm(n){if(An){var e=Ts;if(e){var t=e;if(!D2(n,e)){if(ym(n))throw Error(Le(418));e=fl(t.nextSibling);var r=Es;e&&D2(n,e)?Dv(r,t):(n.flags=n.flags&-4097|2,An=!1,Es=n)}}else{if(ym(n))throw Error(Le(418));n.flags=n.flags&-4097|2,An=!1,Es=n}}}function I2(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Es=n}function ff(n){if(n!==Es)return!1;if(!An)return I2(n),An=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!dm(n.type,n.memoizedProps)),e&&(e=Ts)){if(ym(n))throw Iv(),Error(Le(418));for(;e;)Dv(n,e),e=fl(e.nextSibling)}if(I2(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Le(317));t:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Ts=fl(n.nextSibling);break t}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Ts=null}}else Ts=Es?fl(n.stateNode.nextSibling):null;return!0}function Iv(){for(var n=Ts;n;)n=fl(n.nextSibling)}function ic(){Ts=Es=null,An=!1}function Og(n){vo===null?vo=[n]:vo.push(n)}var $x=ja.ReactCurrentBatchConfig;function Pc(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Le(309));var r=t.stateNode}if(!r)throw Error(Le(147,n));var s=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(Le(284));if(!t._owner)throw Error(Le(290,n))}return n}function df(n,e){throw n=Object.prototype.toString.call(e),Error(Le(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function F2(n){var e=n._init;return e(n._payload)}function Fv(n){function e(y,b){if(n){var v=y.deletions;v===null?(y.deletions=[b],y.flags|=16):v.push(b)}}function t(y,b){if(!n)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=gl(y,b),y.index=0,y.sibling=null,y}function i(y,b,v){return y.index=v,n?(v=y.alternate,v!==null?(v=v.index,v<b?(y.flags|=2,b):v):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function u(y,b,v,k){return b===null||b.tag!==6?(b=y0(v,y.mode,k),b.return=y,b):(b=s(b,v),b.return=y,b)}function l(y,b,v,k){var j=v.type;return j===Au?c(y,b,v.props.children,k,v.key):b!==null&&(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===rl&&F2(j)===b.type)?(k=s(b,v.props),k.ref=Pc(y,b,v),k.return=y,k):(k=sd(v.type,v.key,v.props,null,y.mode,k),k.ref=Pc(y,b,v),k.return=y,k)}function a(y,b,v,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=b0(v,y.mode,k),b.return=y,b):(b=s(b,v.children||[]),b.return=y,b)}function c(y,b,v,k,j){return b===null||b.tag!==7?(b=Gl(v,y.mode,k,j),b.return=y,b):(b=s(b,v),b.return=y,b)}function d(y,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=y0(""+b,y.mode,v),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ef:return v=sd(b.type,b.key,b.props,null,y.mode,v),v.ref=Pc(y,null,b),v.return=y,v;case Tu:return b=b0(b,y.mode,v),b.return=y,b;case rl:var k=b._init;return d(y,k(b._payload),v)}if(Uc(b)||Ec(b))return b=Gl(b,y.mode,v,null),b.return=y,b;df(y,b)}return null}function f(y,b,v,k){var j=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return j!==null?null:u(y,b,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ef:return v.key===j?l(y,b,v,k):null;case Tu:return v.key===j?a(y,b,v,k):null;case rl:return j=v._init,f(y,b,j(v._payload),k)}if(Uc(v)||Ec(v))return j!==null?null:c(y,b,v,k,null);df(y,v)}return null}function h(y,b,v,k,j){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(v)||null,u(b,y,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ef:return y=y.get(k.key===null?v:k.key)||null,l(b,y,k,j);case Tu:return y=y.get(k.key===null?v:k.key)||null,a(b,y,k,j);case rl:var I=k._init;return h(y,b,v,I(k._payload),j)}if(Uc(k)||Ec(k))return y=y.get(v)||null,c(b,y,k,j,null);df(b,k)}return null}function p(y,b,v,k){for(var j=null,I=null,U=b,P=b=0,z=null;U!==null&&P<v.length;P++){U.index>P?(z=U,U=null):z=U.sibling;var q=f(y,U,v[P],k);if(q===null){U===null&&(U=z);break}n&&U&&q.alternate===null&&e(y,U),b=i(q,b,P),I===null?j=q:I.sibling=q,I=q,U=z}if(P===v.length)return t(y,U),An&&Il(y,P),j;if(U===null){for(;P<v.length;P++)U=d(y,v[P],k),U!==null&&(b=i(U,b,P),I===null?j=U:I.sibling=U,I=U);return An&&Il(y,P),j}for(U=r(y,U);P<v.length;P++)z=h(U,y,P,v[P],k),z!==null&&(n&&z.alternate!==null&&U.delete(z.key===null?P:z.key),b=i(z,b,P),I===null?j=z:I.sibling=z,I=z);return n&&U.forEach(function($){return e(y,$)}),An&&Il(y,P),j}function g(y,b,v,k){var j=Ec(v);if(typeof j!="function")throw Error(Le(150));if(v=j.call(v),v==null)throw Error(Le(151));for(var I=j=null,U=b,P=b=0,z=null,q=v.next();U!==null&&!q.done;P++,q=v.next()){U.index>P?(z=U,U=null):z=U.sibling;var $=f(y,U,q.value,k);if($===null){U===null&&(U=z);break}n&&U&&$.alternate===null&&e(y,U),b=i($,b,P),I===null?j=$:I.sibling=$,I=$,U=z}if(q.done)return t(y,U),An&&Il(y,P),j;if(U===null){for(;!q.done;P++,q=v.next())q=d(y,q.value,k),q!==null&&(b=i(q,b,P),I===null?j=q:I.sibling=q,I=q);return An&&Il(y,P),j}for(U=r(y,U);!q.done;P++,q=v.next())q=h(U,y,P,q.value,k),q!==null&&(n&&q.alternate!==null&&U.delete(q.key===null?P:q.key),b=i(q,b,P),I===null?j=q:I.sibling=q,I=q);return n&&U.forEach(function(F){return e(y,F)}),An&&Il(y,P),j}function m(y,b,v,k){if(typeof v=="object"&&v!==null&&v.type===Au&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ef:t:{for(var j=v.key,I=b;I!==null;){if(I.key===j){if(j=v.type,j===Au){if(I.tag===7){t(y,I.sibling),b=s(I,v.props.children),b.return=y,y=b;break t}}else if(I.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===rl&&F2(j)===I.type){t(y,I.sibling),b=s(I,v.props),b.ref=Pc(y,I,v),b.return=y,y=b;break t}t(y,I);break}else e(y,I);I=I.sibling}v.type===Au?(b=Gl(v.props.children,y.mode,k,v.key),b.return=y,y=b):(k=sd(v.type,v.key,v.props,null,y.mode,k),k.ref=Pc(y,b,v),k.return=y,y=k)}return o(y);case Tu:t:{for(I=v.key;b!==null;){if(b.key===I)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){t(y,b.sibling),b=s(b,v.children||[]),b.return=y,y=b;break t}else{t(y,b);break}else e(y,b);b=b.sibling}b=b0(v,y.mode,k),b.return=y,y=b}return o(y);case rl:return I=v._init,m(y,b,I(v._payload),k)}if(Uc(v))return p(y,b,v,k);if(Ec(v))return g(y,b,v,k);df(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(t(y,b.sibling),b=s(b,v),b.return=y,y=b):(t(y,b),b=y0(v,y.mode,k),b.return=y,y=b),o(y)):t(y,b)}return m}var sc=Fv(!0),Bv=Fv(!1),Ed=kl(null),jd=null,Ru=null,Pg=null;function Lg(){Pg=Ru=jd=null}function Rg(n){var e=Ed.current;kn(Ed),n._currentValue=e}function vm(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Wu(n,e){jd=n,Pg=Ru=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(cs=!0),n.firstContext=null)}function Zs(n){var e=n._currentValue;if(Pg!==n)if(n={context:n,memoizedValue:e,next:null},Ru===null){if(jd===null)throw Error(Le(308));Ru=n,jd.dependencies={lanes:0,firstContext:n}}else Ru=Ru.next=n;return e}var Hl=null;function Dg(n){Hl===null?Hl=[n]:Hl.push(n)}function zv(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,Dg(e)):(t.next=s.next,s.next=t),e.interleaved=t,Sa(n,r)}function Sa(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var nl=!1;function Ig(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uv(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ba(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function dl(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Kr&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Sa(n,t)}return s=r.interleaved,s===null?(e.next=e,Dg(r)):(e.next=s.next,s.next=e),r.interleaved=e,Sa(n,t)}function Qf(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,_g(n,t)}}function B2(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Md(n,e,t,r){var s=n.updateQueue;nl=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var l=u,a=l.next;l.next=null,o===null?i=a:o.next=a,o=l;var c=n.alternate;c!==null&&(c=c.updateQueue,u=c.lastBaseUpdate,u!==o&&(u===null?c.firstBaseUpdate=a:u.next=a,c.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,c=a=l=null,u=i;do{var f=u.lane,h=u.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});t:{var p=n,g=u;switch(f=e,h=t,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(h,d,f);break t}d=p;break t;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break t;d=On({},d,f);break t;case 2:nl=!0}}u.callback!==null&&u.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[u]:f.push(u))}else h={eventTime:h,lane:f,tag:u.tag,payload:u.payload,callback:u.callback,next:null},c===null?(a=c=h,l=d):c=c.next=h,o|=f;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;f=u,u=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(c===null&&(l=d),s.baseState=l,s.firstBaseUpdate=a,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);eu|=o,n.lanes=o,n.memoizedState=d}}function z2(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error(Le(191,s));s.call(r)}}}var Ph={},qo=kl(Ph),gh=kl(Ph),yh=kl(Ph);function $l(n){if(n===Ph)throw Error(Le(174));return n}function Fg(n,e){switch(wn(yh,e),wn(gh,n),wn(qo,Ph),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Q0(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Q0(e,n)}kn(qo),wn(qo,e)}function oc(){kn(qo),kn(gh),kn(yh)}function qv(n){$l(yh.current);var e=$l(qo.current),t=Q0(e,n.type);e!==t&&(wn(gh,n),wn(qo,t))}function Bg(n){gh.current===n&&(kn(qo),kn(gh))}var Mn=kl(0);function Nd(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var h0=[];function zg(){for(var n=0;n<h0.length;n++)h0[n]._workInProgressVersionPrimary=null;h0.length=0}var td=ja.ReactCurrentDispatcher,f0=ja.ReactCurrentBatchConfig,tu=0,Nn=null,ii=null,mi=null,Od=!1,Kc=!1,bh=0,Vx=0;function Ri(){throw Error(Le(321))}function Ug(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!To(n[t],e[t]))return!1;return!0}function qg(n,e,t,r,s,i){if(tu=i,Nn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,td.current=n===null||n.memoizedState===null?Gx:Kx,n=t(r,s),Kc){i=0;do{if(Kc=!1,bh=0,25<=i)throw Error(Le(301));i+=1,mi=ii=null,e.updateQueue=null,td.current=Zx,n=t(r,s)}while(Kc)}if(td.current=Pd,e=ii!==null&&ii.next!==null,tu=0,mi=ii=Nn=null,Od=!1,e)throw Error(Le(300));return n}function Hg(){var n=bh!==0;return bh=0,n}function Do(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mi===null?Nn.memoizedState=mi=n:mi=mi.next=n,mi}function Js(){if(ii===null){var n=Nn.alternate;n=n!==null?n.memoizedState:null}else n=ii.next;var e=mi===null?Nn.memoizedState:mi.next;if(e!==null)mi=e,ii=n;else{if(n===null)throw Error(Le(310));ii=n,n={memoizedState:ii.memoizedState,baseState:ii.baseState,baseQueue:ii.baseQueue,queue:ii.queue,next:null},mi===null?Nn.memoizedState=mi=n:mi=mi.next=n}return mi}function vh(n,e){return typeof e=="function"?e(n):e}function d0(n){var e=Js(),t=e.queue;if(t===null)throw Error(Le(311));t.lastRenderedReducer=n;var r=ii,s=r.baseQueue,i=t.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,l=null,a=i;do{var c=a.lane;if((tu&c)===c)l!==null&&(l=l.next={lane:0,action:a.action,hasEagerState:a.hasEagerState,eagerState:a.eagerState,next:null}),r=a.hasEagerState?a.eagerState:n(r,a.action);else{var d={lane:c,action:a.action,hasEagerState:a.hasEagerState,eagerState:a.eagerState,next:null};l===null?(u=l=d,o=r):l=l.next=d,Nn.lanes|=c,eu|=c}a=a.next}while(a!==null&&a!==i);l===null?o=r:l.next=u,To(r,e.memoizedState)||(cs=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do i=s.lane,Nn.lanes|=i,eu|=i,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function p0(n){var e=Js(),t=e.queue;if(t===null)throw Error(Le(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do i=n(i,o.action),o=o.next;while(o!==s);To(i,e.memoizedState)||(cs=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function Hv(){}function $v(n,e){var t=Nn,r=Js(),s=e(),i=!To(r.memoizedState,s);if(i&&(r.memoizedState=s,cs=!0),r=r.queue,$g(Xv.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||mi!==null&&mi.memoizedState.tag&1){if(t.flags|=2048,wh(9,Wv.bind(null,t,r,s,e),void 0,null),yi===null)throw Error(Le(349));tu&30||Vv(t,e,s)}return s}function Vv(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Nn.updateQueue,e===null?(e={lastEffect:null,stores:null},Nn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Wv(n,e,t,r){e.value=t,e.getSnapshot=r,Yv(e)&&Gv(n)}function Xv(n,e,t){return t(function(){Yv(e)&&Gv(n)})}function Yv(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!To(n,t)}catch{return!0}}function Gv(n){var e=Sa(n,1);e!==null&&ko(e,n,1,-1)}function U2(n){var e=Do();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vh,lastRenderedState:n},e.queue=n,n=n.dispatch=Yx.bind(null,Nn,n),[e.memoizedState,n]}function wh(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Nn.updateQueue,e===null?(e={lastEffect:null,stores:null},Nn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function Kv(){return Js().memoizedState}function ed(n,e,t,r){var s=Do();Nn.flags|=n,s.memoizedState=wh(1|e,t,void 0,r===void 0?null:r)}function lp(n,e,t,r){var s=Js();r=r===void 0?null:r;var i=void 0;if(ii!==null){var o=ii.memoizedState;if(i=o.destroy,r!==null&&Ug(r,o.deps)){s.memoizedState=wh(e,t,i,r);return}}Nn.flags|=n,s.memoizedState=wh(1|e,t,i,r)}function q2(n,e){return ed(8390656,8,n,e)}function $g(n,e){return lp(2048,8,n,e)}function Zv(n,e){return lp(4,2,n,e)}function Jv(n,e){return lp(4,4,n,e)}function Qv(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function t5(n,e,t){return t=t!=null?t.concat([n]):null,lp(4,4,Qv.bind(null,e,n),t)}function Vg(){}function e5(n,e){var t=Js();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Ug(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function r5(n,e){var t=Js();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Ug(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function n5(n,e,t){return tu&21?(To(t,e)||(t=lv(),Nn.lanes|=t,eu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,cs=!0),n.memoizedState=t)}function Wx(n,e){var t=un;un=t!==0&&4>t?t:4,n(!0);var r=f0.transition;f0.transition={};try{n(!1),e()}finally{un=t,f0.transition=r}}function i5(){return Js().memoizedState}function Xx(n,e,t){var r=ml(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},s5(n))o5(e,t);else if(t=zv(n,e,t,r),t!==null){var s=Ji();ko(t,n,r,s),a5(t,e,r)}}function Yx(n,e,t){var r=ml(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(s5(n))o5(e,s);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,t);if(s.hasEagerState=!0,s.eagerState=u,To(u,o)){var l=e.interleaved;l===null?(s.next=s,Dg(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=zv(n,e,s,r),t!==null&&(s=Ji(),ko(t,n,r,s),a5(t,e,r))}}function s5(n){var e=n.alternate;return n===Nn||e!==null&&e===Nn}function o5(n,e){Kc=Od=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function a5(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,_g(n,t)}}var Pd={readContext:Zs,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useInsertionEffect:Ri,useLayoutEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useMutableSource:Ri,useSyncExternalStore:Ri,useId:Ri,unstable_isNewReconciler:!1},Gx={readContext:Zs,useCallback:function(n,e){return Do().memoizedState=[n,e===void 0?null:e],n},useContext:Zs,useEffect:q2,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ed(4194308,4,Qv.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ed(4194308,4,n,e)},useInsertionEffect:function(n,e){return ed(4,2,n,e)},useMemo:function(n,e){var t=Do();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Do();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Xx.bind(null,Nn,n),[r.memoizedState,n]},useRef:function(n){var e=Do();return n={current:n},e.memoizedState=n},useState:U2,useDebugValue:Vg,useDeferredValue:function(n){return Do().memoizedState=n},useTransition:function(){var n=U2(!1),e=n[0];return n=Wx.bind(null,n[1]),Do().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Nn,s=Do();if(An){if(t===void 0)throw Error(Le(407));t=t()}else{if(t=e(),yi===null)throw Error(Le(349));tu&30||Vv(r,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,q2(Xv.bind(null,r,i,n),[n]),r.flags|=2048,wh(9,Wv.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=Do(),e=yi.identifierPrefix;if(An){var t=ma,r=pa;t=(r&~(1<<32-So(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=bh++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Vx++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Kx={readContext:Zs,useCallback:e5,useContext:Zs,useEffect:$g,useImperativeHandle:t5,useInsertionEffect:Zv,useLayoutEffect:Jv,useMemo:r5,useReducer:d0,useRef:Kv,useState:function(){return d0(vh)},useDebugValue:Vg,useDeferredValue:function(n){var e=Js();return n5(e,ii.memoizedState,n)},useTransition:function(){var n=d0(vh)[0],e=Js().memoizedState;return[n,e]},useMutableSource:Hv,useSyncExternalStore:$v,useId:i5,unstable_isNewReconciler:!1},Zx={readContext:Zs,useCallback:e5,useContext:Zs,useEffect:$g,useImperativeHandle:t5,useInsertionEffect:Zv,useLayoutEffect:Jv,useMemo:r5,useReducer:p0,useRef:Kv,useState:function(){return p0(vh)},useDebugValue:Vg,useDeferredValue:function(n){var e=Js();return ii===null?e.memoizedState=n:n5(e,ii.memoizedState,n)},useTransition:function(){var n=p0(vh)[0],e=Js().memoizedState;return[n,e]},useMutableSource:Hv,useSyncExternalStore:$v,useId:i5,unstable_isNewReconciler:!1};function mo(n,e){if(n&&n.defaultProps){e=On({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function wm(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:On({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var up={isMounted:function(n){return(n=n._reactInternals)?ou(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Ji(),s=ml(n),i=ba(r,s);i.payload=e,t!=null&&(i.callback=t),e=dl(n,i,s),e!==null&&(ko(e,n,s,r),Qf(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Ji(),s=ml(n),i=ba(r,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=dl(n,i,s),e!==null&&(ko(e,n,s,r),Qf(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ji(),r=ml(n),s=ba(t,r);s.tag=2,e!=null&&(s.callback=e),e=dl(n,s,r),e!==null&&(ko(e,n,r,t),Qf(e,n,r))}};function H2(n,e,t,r,s,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!fh(t,r)||!fh(s,i):!0}function l5(n,e,t){var r=!1,s=bl,i=e.contextType;return typeof i=="object"&&i!==null?i=Zs(i):(s=fs(e)?Jl:$i.current,r=e.contextTypes,i=(r=r!=null)?nc(n,s):bl),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=up,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=i),e}function $2(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&up.enqueueReplaceState(e,e.state,null)}function xm(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},Ig(n);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Zs(i):(i=fs(e)?Jl:$i.current,s.context=nc(n,i)),s.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(wm(n,e,i,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&up.enqueueReplaceState(s,s.state,null),Md(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function ac(n,e){try{var t="",r=e;do t+=C4(r),r=r.return;while(r);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:s,digest:null}}function m0(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function _m(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Jx=typeof WeakMap=="function"?WeakMap:Map;function u5(n,e,t){t=ba(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Rd||(Rd=!0,Om=r),_m(n,e)},t}function c5(n,e,t){t=ba(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){_m(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){_m(n,e),typeof r!="function"&&(pl===null?pl=new Set([this]):pl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function V2(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Jx;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=f6.bind(null,n,e,t),e.then(n,n))}function W2(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function X2(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ba(-1,1),e.tag=2,dl(t,e,1))),t.lanes|=1),n)}var Qx=ja.ReactCurrentOwner,cs=!1;function Gi(n,e,t,r){e.child=n===null?Bv(e,null,t,r):sc(e,n.child,t,r)}function Y2(n,e,t,r,s){t=t.render;var i=e.ref;return Wu(e,s),r=qg(n,e,t,r,i,s),t=Hg(),n!==null&&!cs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,ka(n,e,s)):(An&&t&&Mg(e),e.flags|=1,Gi(n,e,r,s),e.child)}function G2(n,e,t,r,s){if(n===null){var i=t.type;return typeof i=="function"&&!Qg(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,h5(n,e,i,r,s)):(n=sd(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&s)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:fh,t(o,r)&&n.ref===e.ref)return ka(n,e,s)}return e.flags|=1,n=gl(i,r),n.ref=e.ref,n.return=e,e.child=n}function h5(n,e,t,r,s){if(n!==null){var i=n.memoizedProps;if(fh(i,r)&&n.ref===e.ref)if(cs=!1,e.pendingProps=r=i,(n.lanes&s)!==0)n.flags&131072&&(cs=!0);else return e.lanes=n.lanes,ka(n,e,s)}return Sm(n,e,t,r,s)}function f5(n,e,t){var r=e.pendingProps,s=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},wn(Iu,Cs),Cs|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,wn(Iu,Cs),Cs|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,wn(Iu,Cs),Cs|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,wn(Iu,Cs),Cs|=r;return Gi(n,e,s,t),e.child}function d5(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Sm(n,e,t,r,s){var i=fs(t)?Jl:$i.current;return i=nc(e,i),Wu(e,s),t=qg(n,e,t,r,i,s),r=Hg(),n!==null&&!cs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,ka(n,e,s)):(An&&r&&Mg(e),e.flags|=1,Gi(n,e,t,s),e.child)}function K2(n,e,t,r,s){if(fs(t)){var i=!0;Cd(e)}else i=!1;if(Wu(e,s),e.stateNode===null)rd(n,e),l5(e,t,r),xm(e,t,r,s),r=!0;else if(n===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var l=o.context,a=t.contextType;typeof a=="object"&&a!==null?a=Zs(a):(a=fs(t)?Jl:$i.current,a=nc(e,a));var c=t.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||l!==a)&&$2(e,o,r,a),nl=!1;var f=e.memoizedState;o.state=f,Md(e,r,o,s),l=e.memoizedState,u!==r||f!==l||hs.current||nl?(typeof c=="function"&&(wm(e,t,c,r),l=e.memoizedState),(u=nl||H2(e,t,u,r,f,l,a))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=a,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Uv(n,e),u=e.memoizedProps,a=e.type===e.elementType?u:mo(e.type,u),o.props=a,d=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Zs(l):(l=fs(t)?Jl:$i.current,l=nc(e,l));var h=t.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==d||f!==l)&&$2(e,o,r,l),nl=!1,f=e.memoizedState,o.state=f,Md(e,r,o,s);var p=e.memoizedState;u!==d||f!==p||hs.current||nl?(typeof h=="function"&&(wm(e,t,h,r),p=e.memoizedState),(a=nl||H2(e,t,a,r,f,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=a):(typeof o.componentDidUpdate!="function"||u===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return km(n,e,t,r,i,s)}function km(n,e,t,r,s,i){d5(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&R2(e,t,!1),ka(n,e,i);r=e.stateNode,Qx.current=e;var u=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=sc(e,n.child,null,i),e.child=sc(e,null,u,i)):Gi(n,e,u,i),e.memoizedState=r.state,s&&R2(e,t,!0),e.child}function p5(n){var e=n.stateNode;e.pendingContext?L2(n,e.pendingContext,e.pendingContext!==e.context):e.context&&L2(n,e.context,!1),Fg(n,e.containerInfo)}function Z2(n,e,t,r,s){return ic(),Og(s),e.flags|=256,Gi(n,e,t,r),e.child}var Cm={dehydrated:null,treeContext:null,retryLane:0};function Tm(n){return{baseLanes:n,cachePool:null,transitions:null}}function m5(n,e,t){var r=e.pendingProps,s=Mn.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=n!==null&&n.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),wn(Mn,s&1),n===null)return bm(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=fp(o,r,0,null),n=Gl(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=Tm(t),e.memoizedState=Cm,n):Wg(e,o));if(s=n.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return t6(n,e,o,r,u,s,t);if(i){i=r.fallback,o=e.mode,s=n.child,u=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=gl(s,l),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=gl(u,i):(i=Gl(i,o,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=n.child.memoizedState,o=o===null?Tm(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=Cm,r}return i=n.child,n=i.sibling,r=gl(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Wg(n,e){return e=fp({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function pf(n,e,t,r){return r!==null&&Og(r),sc(e,n.child,null,t),n=Wg(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function t6(n,e,t,r,s,i,o){if(t)return e.flags&256?(e.flags&=-257,r=m0(Error(Le(422))),pf(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=fp({mode:"visible",children:r.children},s,0,null),i=Gl(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&sc(e,n.child,null,o),e.child.memoizedState=Tm(o),e.memoizedState=Cm,i);if(!(e.mode&1))return pf(n,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(Le(419)),r=m0(i,r,void 0),pf(n,e,o,r)}if(u=(o&n.childLanes)!==0,cs||u){if(r=yi,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Sa(n,s),ko(r,n,s,-1))}return Jg(),r=m0(Error(Le(421))),pf(n,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=d6.bind(null,n),s._reactRetry=e,null):(n=i.treeContext,Ts=fl(s.nextSibling),Es=e,An=!0,vo=null,n!==null&&(Ws[Xs++]=pa,Ws[Xs++]=ma,Ws[Xs++]=Ql,pa=n.id,ma=n.overflow,Ql=e),e=Wg(e,r.children),e.flags|=4096,e)}function J2(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),vm(n.return,e,t)}function g0(n,e,t,r,s){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=s)}function g5(n,e,t){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Gi(n,e,r.children,t),r=Mn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&J2(n,t,e);else if(n.tag===19)J2(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(wn(Mn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Nd(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),g0(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Nd(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}g0(e,!0,t,null,i);break;case"together":g0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rd(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ka(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),eu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Le(153));if(e.child!==null){for(n=e.child,t=gl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=gl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function e6(n,e,t){switch(e.tag){case 3:p5(e),ic();break;case 5:qv(e);break;case 1:fs(e.type)&&Cd(e);break;case 4:Fg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;wn(Ed,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(wn(Mn,Mn.current&1),e.flags|=128,null):t&e.child.childLanes?m5(n,e,t):(wn(Mn,Mn.current&1),n=ka(n,e,t),n!==null?n.sibling:null);wn(Mn,Mn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return g5(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),wn(Mn,Mn.current),r)break;return null;case 22:case 23:return e.lanes=0,f5(n,e,t)}return ka(n,e,t)}var y5,Am,b5,v5;y5=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Am=function(){};b5=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,$l(qo.current);var i=null;switch(t){case"input":s=G0(n,s),r=G0(n,r),i=[];break;case"select":s=On({},s,{value:void 0}),r=On({},r,{value:void 0}),i=[];break;case"textarea":s=J0(n,s),r=J0(n,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Sd)}tm(t,r);var o;t=null;for(a in s)if(!r.hasOwnProperty(a)&&s.hasOwnProperty(a)&&s[a]!=null)if(a==="style"){var u=s[a];for(o in u)u.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else a!=="dangerouslySetInnerHTML"&&a!=="children"&&a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(sh.hasOwnProperty(a)?i||(i=[]):(i=i||[]).push(a,null));for(a in r){var l=r[a];if(u=s!=null?s[a]:void 0,r.hasOwnProperty(a)&&l!==u&&(l!=null||u!=null))if(a==="style")if(u){for(o in u)!u.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&u[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(i||(i=[]),i.push(a,t)),t=l;else a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,u=u?u.__html:void 0,l!=null&&u!==l&&(i=i||[]).push(a,l)):a==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(a,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&(sh.hasOwnProperty(a)?(l!=null&&a==="onScroll"&&_n("scroll",n),i||u===l||(i=[])):(i=i||[]).push(a,l))}t&&(i=i||[]).push("style",t);var a=i;(e.updateQueue=a)&&(e.flags|=4)}};v5=function(n,e,t,r){t!==r&&(e.flags|=4)};function Lc(n,e){if(!An)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Di(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function r6(n,e,t){var r=e.pendingProps;switch(Ng(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Di(e),null;case 1:return fs(e.type)&&kd(),Di(e),null;case 3:return r=e.stateNode,oc(),kn(hs),kn($i),zg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(ff(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vo!==null&&(Rm(vo),vo=null))),Am(n,e),Di(e),null;case 5:Bg(e);var s=$l(yh.current);if(t=e.type,n!==null&&e.stateNode!=null)b5(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Le(166));return Di(e),null}if(n=$l(qo.current),ff(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[Io]=e,r[mh]=i,n=(e.mode&1)!==0,t){case"dialog":_n("cancel",r),_n("close",r);break;case"iframe":case"object":case"embed":_n("load",r);break;case"video":case"audio":for(s=0;s<Hc.length;s++)_n(Hc[s],r);break;case"source":_n("error",r);break;case"img":case"image":case"link":_n("error",r),_n("load",r);break;case"details":_n("toggle",r);break;case"input":a2(r,i),_n("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_n("invalid",r);break;case"textarea":u2(r,i),_n("invalid",r)}tm(t,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&hf(r.textContent,u,n),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&hf(r.textContent,u,n),s=["children",""+u]):sh.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&_n("scroll",r)}switch(t){case"input":rf(r),l2(r,i,!0);break;case"textarea":rf(r),c2(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Sd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Xb(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Io]=e,n[mh]=r,y5(n,e,!1,!1),e.stateNode=n;t:{switch(o=em(t,r),t){case"dialog":_n("cancel",n),_n("close",n),s=r;break;case"iframe":case"object":case"embed":_n("load",n),s=r;break;case"video":case"audio":for(s=0;s<Hc.length;s++)_n(Hc[s],n);s=r;break;case"source":_n("error",n),s=r;break;case"img":case"image":case"link":_n("error",n),_n("load",n),s=r;break;case"details":_n("toggle",n),s=r;break;case"input":a2(n,r),s=G0(n,r),_n("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=On({},r,{value:void 0}),_n("invalid",n);break;case"textarea":u2(n,r),s=J0(n,r),_n("invalid",n);break;default:s=r}tm(t,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var l=u[i];i==="style"?Kb(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Yb(n,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&oh(n,l):typeof l=="number"&&oh(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(sh.hasOwnProperty(i)?l!=null&&i==="onScroll"&&_n("scroll",n):l!=null&&gg(n,i,l,o))}switch(t){case"input":rf(n),l2(n,r,!1);break;case"textarea":rf(n),c2(n);break;case"option":r.value!=null&&n.setAttribute("value",""+yl(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?qu(n,!!r.multiple,i,!1):r.defaultValue!=null&&qu(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Sd)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Di(e),null;case 6:if(n&&e.stateNode!=null)v5(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Le(166));if(t=$l(yh.current),$l(qo.current),ff(e)){if(r=e.stateNode,t=e.memoizedProps,r[Io]=e,(i=r.nodeValue!==t)&&(n=Es,n!==null))switch(n.tag){case 3:hf(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&hf(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Io]=e,e.stateNode=r}return Di(e),null;case 13:if(kn(Mn),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(An&&Ts!==null&&e.mode&1&&!(e.flags&128))Iv(),ic(),e.flags|=98560,i=!1;else if(i=ff(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(Le(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Le(317));i[Io]=e}else ic(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Di(e),i=!1}else vo!==null&&(Rm(vo),vo=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Mn.current&1?si===0&&(si=3):Jg())),e.updateQueue!==null&&(e.flags|=4),Di(e),null);case 4:return oc(),Am(n,e),n===null&&dh(e.stateNode.containerInfo),Di(e),null;case 10:return Rg(e.type._context),Di(e),null;case 17:return fs(e.type)&&kd(),Di(e),null;case 19:if(kn(Mn),i=e.memoizedState,i===null)return Di(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Lc(i,!1);else{if(si!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Nd(n),o!==null){for(e.flags|=128,Lc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return wn(Mn,Mn.current&1|2),e.child}n=n.sibling}i.tail!==null&&Hn()>lc&&(e.flags|=128,r=!0,Lc(i,!1),e.lanes=4194304)}else{if(!r)if(n=Nd(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Lc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!An)return Di(e),null}else 2*Hn()-i.renderingStartTime>lc&&t!==1073741824&&(e.flags|=128,r=!0,Lc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Hn(),e.sibling=null,t=Mn.current,wn(Mn,r?t&1|2:t&1),e):(Di(e),null);case 22:case 23:return Zg(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Cs&1073741824&&(Di(e),e.subtreeFlags&6&&(e.flags|=8192)):Di(e),null;case 24:return null;case 25:return null}throw Error(Le(156,e.tag))}function n6(n,e){switch(Ng(e),e.tag){case 1:return fs(e.type)&&kd(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return oc(),kn(hs),kn($i),zg(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Bg(e),null;case 13:if(kn(Mn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Le(340));ic()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return kn(Mn),null;case 4:return oc(),null;case 10:return Rg(e.type._context),null;case 22:case 23:return Zg(),null;case 24:return null;default:return null}}var mf=!1,Ui=!1,i6=typeof WeakSet=="function"?WeakSet:Set,ir=null;function Du(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Bn(n,e,r)}else t.current=null}function Em(n,e,t){try{t()}catch(r){Bn(n,e,r)}}var Q2=!1;function s6(n,e){if(hm=wd,n=kv(),jg(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else t:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break t}var o=0,u=-1,l=-1,a=0,c=0,d=n,f=null;e:for(;;){for(var h;d!==t||s!==0&&d.nodeType!==3||(u=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===n)break e;if(f===t&&++a===s&&(u=o),f===i&&++c===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}t=u===-1||l===-1?null:{start:u,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(fm={focusedElem:n,selectionRange:t},wd=!1,ir=e;ir!==null;)if(e=ir,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ir=n;else for(;ir!==null;){e=ir;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,m=p.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:mo(e.type,g),m);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Le(163))}}catch(k){Bn(e,e.return,k)}if(n=e.sibling,n!==null){n.return=e.return,ir=n;break}ir=e.return}return p=Q2,Q2=!1,p}function Zc(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var i=s.destroy;s.destroy=void 0,i!==void 0&&Em(e,t,i)}s=s.next}while(s!==r)}}function cp(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function jm(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function w5(n){var e=n.alternate;e!==null&&(n.alternate=null,w5(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Io],delete e[mh],delete e[mm],delete e[Ux],delete e[qx])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function x5(n){return n.tag===5||n.tag===3||n.tag===4}function ty(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||x5(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Mm(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Sd));else if(r!==4&&(n=n.child,n!==null))for(Mm(n,e,t),n=n.sibling;n!==null;)Mm(n,e,t),n=n.sibling}function Nm(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Nm(n,e,t),n=n.sibling;n!==null;)Nm(n,e,t),n=n.sibling}var Si=null,yo=!1;function Ka(n,e,t){for(t=t.child;t!==null;)_5(n,e,t),t=t.sibling}function _5(n,e,t){if(Uo&&typeof Uo.onCommitFiberUnmount=="function")try{Uo.onCommitFiberUnmount(rp,t)}catch{}switch(t.tag){case 5:Ui||Du(t,e);case 6:var r=Si,s=yo;Si=null,Ka(n,e,t),Si=r,yo=s,Si!==null&&(yo?(n=Si,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Si.removeChild(t.stateNode));break;case 18:Si!==null&&(yo?(n=Si,t=t.stateNode,n.nodeType===8?u0(n.parentNode,t):n.nodeType===1&&u0(n,t),ch(n)):u0(Si,t.stateNode));break;case 4:r=Si,s=yo,Si=t.stateNode.containerInfo,yo=!0,Ka(n,e,t),Si=r,yo=s;break;case 0:case 11:case 14:case 15:if(!Ui&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Em(t,e,o),s=s.next}while(s!==r)}Ka(n,e,t);break;case 1:if(!Ui&&(Du(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(u){Bn(t,e,u)}Ka(n,e,t);break;case 21:Ka(n,e,t);break;case 22:t.mode&1?(Ui=(r=Ui)||t.memoizedState!==null,Ka(n,e,t),Ui=r):Ka(n,e,t);break;default:Ka(n,e,t)}}function ey(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new i6),e.forEach(function(r){var s=p6.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function uo(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var i=n,o=e,u=o;t:for(;u!==null;){switch(u.tag){case 5:Si=u.stateNode,yo=!1;break t;case 3:Si=u.stateNode.containerInfo,yo=!0;break t;case 4:Si=u.stateNode.containerInfo,yo=!0;break t}u=u.return}if(Si===null)throw Error(Le(160));_5(i,o,s),Si=null,yo=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(a){Bn(s,e,a)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)S5(e,n),e=e.sibling}function S5(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(uo(e,n),Lo(n),r&4){try{Zc(3,n,n.return),cp(3,n)}catch(g){Bn(n,n.return,g)}try{Zc(5,n,n.return)}catch(g){Bn(n,n.return,g)}}break;case 1:uo(e,n),Lo(n),r&512&&t!==null&&Du(t,t.return);break;case 5:if(uo(e,n),Lo(n),r&512&&t!==null&&Du(t,t.return),n.flags&32){var s=n.stateNode;try{oh(s,"")}catch(g){Bn(n,n.return,g)}}if(r&4&&(s=n.stateNode,s!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,u=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&Vb(s,i),em(u,o);var a=em(u,i);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?Kb(s,d):c==="dangerouslySetInnerHTML"?Yb(s,d):c==="children"?oh(s,d):gg(s,c,d,a)}switch(u){case"input":K0(s,i);break;case"textarea":Wb(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?qu(s,!!i.multiple,h,!1):f!==!!i.multiple&&(i.defaultValue!=null?qu(s,!!i.multiple,i.defaultValue,!0):qu(s,!!i.multiple,i.multiple?[]:"",!1))}s[mh]=i}catch(g){Bn(n,n.return,g)}}break;case 6:if(uo(e,n),Lo(n),r&4){if(n.stateNode===null)throw Error(Le(162));s=n.stateNode,i=n.memoizedProps;try{s.nodeValue=i}catch(g){Bn(n,n.return,g)}}break;case 3:if(uo(e,n),Lo(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{ch(e.containerInfo)}catch(g){Bn(n,n.return,g)}break;case 4:uo(e,n),Lo(n);break;case 13:uo(e,n),Lo(n),s=n.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Gg=Hn())),r&4&&ey(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(Ui=(a=Ui)||c,uo(e,n),Ui=a):uo(e,n),Lo(n),r&8192){if(a=n.memoizedState!==null,(n.stateNode.isHidden=a)&&!c&&n.mode&1)for(ir=n,c=n.child;c!==null;){for(d=ir=c;ir!==null;){switch(f=ir,h=f.child,f.tag){case 0:case 11:case 14:case 15:Zc(4,f,f.return);break;case 1:Du(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Bn(r,t,g)}}break;case 5:Du(f,f.return);break;case 22:if(f.memoizedState!==null){ny(d);continue}}h!==null?(h.return=f,ir=h):ny(d)}c=c.sibling}t:for(c=null,d=n;;){if(d.tag===5){if(c===null){c=d;try{s=d.stateNode,a?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,u.style.display=Gb("display",o))}catch(g){Bn(n,n.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=a?"":d.memoizedProps}catch(g){Bn(n,n.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break t;for(;d.sibling===null;){if(d.return===null||d.return===n)break t;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:uo(e,n),Lo(n),r&4&&ey(n);break;case 21:break;default:uo(e,n),Lo(n)}}function Lo(n){var e=n.flags;if(e&2){try{t:{for(var t=n.return;t!==null;){if(x5(t)){var r=t;break t}t=t.return}throw Error(Le(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(oh(s,""),r.flags&=-33);var i=ty(n);Nm(n,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=ty(n);Mm(n,u,o);break;default:throw Error(Le(161))}}catch(l){Bn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function o6(n,e,t){ir=n,k5(n)}function k5(n,e,t){for(var r=(n.mode&1)!==0;ir!==null;){var s=ir,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||mf;if(!o){var u=s.alternate,l=u!==null&&u.memoizedState!==null||Ui;u=mf;var a=Ui;if(mf=o,(Ui=l)&&!a)for(ir=s;ir!==null;)o=ir,l=o.child,o.tag===22&&o.memoizedState!==null?iy(s):l!==null?(l.return=o,ir=l):iy(s);for(;i!==null;)ir=i,k5(i),i=i.sibling;ir=s,mf=u,Ui=a}ry(n)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ir=i):ry(n)}}function ry(n){for(;ir!==null;){var e=ir;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ui||cp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ui)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:mo(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&z2(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}z2(e,o,t)}break;case 5:var u=e.stateNode;if(t===null&&e.flags&4){t=u;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var a=e.alternate;if(a!==null){var c=a.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&ch(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Le(163))}Ui||e.flags&512&&jm(e)}catch(f){Bn(e,e.return,f)}}if(e===n){ir=null;break}if(t=e.sibling,t!==null){t.return=e.return,ir=t;break}ir=e.return}}function ny(n){for(;ir!==null;){var e=ir;if(e===n){ir=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ir=t;break}ir=e.return}}function iy(n){for(;ir!==null;){var e=ir;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{cp(4,e)}catch(l){Bn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Bn(e,s,l)}}var i=e.return;try{jm(e)}catch(l){Bn(e,i,l)}break;case 5:var o=e.return;try{jm(e)}catch(l){Bn(e,o,l)}}}catch(l){Bn(e,e.return,l)}if(e===n){ir=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ir=u;break}ir=e.return}}var a6=Math.ceil,Ld=ja.ReactCurrentDispatcher,Xg=ja.ReactCurrentOwner,Ks=ja.ReactCurrentBatchConfig,Kr=0,yi=null,ti=null,Ti=0,Cs=0,Iu=kl(0),si=0,xh=null,eu=0,hp=0,Yg=0,Jc=null,ls=null,Gg=0,lc=1/0,la=null,Rd=!1,Om=null,pl=null,gf=!1,al=null,Dd=0,Qc=0,Pm=null,nd=-1,id=0;function Ji(){return Kr&6?Hn():nd!==-1?nd:nd=Hn()}function ml(n){return n.mode&1?Kr&2&&Ti!==0?Ti&-Ti:$x.transition!==null?(id===0&&(id=lv()),id):(n=un,n!==0||(n=window.event,n=n===void 0?16:mv(n.type)),n):1}function ko(n,e,t,r){if(50<Qc)throw Qc=0,Pm=null,Error(Le(185));Mh(n,t,r),(!(Kr&2)||n!==yi)&&(n===yi&&(!(Kr&2)&&(hp|=t),si===4&&sl(n,Ti)),ds(n,r),t===1&&Kr===0&&!(e.mode&1)&&(lc=Hn()+500,ap&&Cl()))}function ds(n,e){var t=n.callbackNode;$4(n,e);var r=vd(n,n===yi?Ti:0);if(r===0)t!==null&&d2(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&d2(t),e===1)n.tag===0?Hx(sy.bind(null,n)):Lv(sy.bind(null,n)),Bx(function(){!(Kr&6)&&Cl()}),t=null;else{switch(uv(r)){case 1:t=xg;break;case 4:t=ov;break;case 16:t=bd;break;case 536870912:t=av;break;default:t=bd}t=O5(t,C5.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function C5(n,e){if(nd=-1,id=0,Kr&6)throw Error(Le(327));var t=n.callbackNode;if(Xu()&&n.callbackNode!==t)return null;var r=vd(n,n===yi?Ti:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Id(n,r);else{e=r;var s=Kr;Kr|=2;var i=A5();(yi!==n||Ti!==e)&&(la=null,lc=Hn()+500,Yl(n,e));do try{c6();break}catch(u){T5(n,u)}while(!0);Lg(),Ld.current=i,Kr=s,ti!==null?e=0:(yi=null,Ti=0,e=si)}if(e!==0){if(e===2&&(s=om(n),s!==0&&(r=s,e=Lm(n,s))),e===1)throw t=xh,Yl(n,0),sl(n,r),ds(n,Hn()),t;if(e===6)sl(n,r);else{if(s=n.current.alternate,!(r&30)&&!l6(s)&&(e=Id(n,r),e===2&&(i=om(n),i!==0&&(r=i,e=Lm(n,i))),e===1))throw t=xh,Yl(n,0),sl(n,r),ds(n,Hn()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error(Le(345));case 2:Fl(n,ls,la);break;case 3:if(sl(n,r),(r&130023424)===r&&(e=Gg+500-Hn(),10<e)){if(vd(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){Ji(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=pm(Fl.bind(null,n,ls,la),e);break}Fl(n,ls,la);break;case 4:if(sl(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var o=31-So(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Hn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*a6(r/1960))-r,10<r){n.timeoutHandle=pm(Fl.bind(null,n,ls,la),r);break}Fl(n,ls,la);break;case 5:Fl(n,ls,la);break;default:throw Error(Le(329))}}}return ds(n,Hn()),n.callbackNode===t?C5.bind(null,n):null}function Lm(n,e){var t=Jc;return n.current.memoizedState.isDehydrated&&(Yl(n,e).flags|=256),n=Id(n,e),n!==2&&(e=ls,ls=t,e!==null&&Rm(e)),n}function Rm(n){ls===null?ls=n:ls.push.apply(ls,n)}function l6(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],i=s.getSnapshot;s=s.value;try{if(!To(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sl(n,e){for(e&=~Yg,e&=~hp,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-So(e),r=1<<t;n[t]=-1,e&=~r}}function sy(n){if(Kr&6)throw Error(Le(327));Xu();var e=vd(n,0);if(!(e&1))return ds(n,Hn()),null;var t=Id(n,e);if(n.tag!==0&&t===2){var r=om(n);r!==0&&(e=r,t=Lm(n,r))}if(t===1)throw t=xh,Yl(n,0),sl(n,e),ds(n,Hn()),t;if(t===6)throw Error(Le(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Fl(n,ls,la),ds(n,Hn()),null}function Kg(n,e){var t=Kr;Kr|=1;try{return n(e)}finally{Kr=t,Kr===0&&(lc=Hn()+500,ap&&Cl())}}function ru(n){al!==null&&al.tag===0&&!(Kr&6)&&Xu();var e=Kr;Kr|=1;var t=Ks.transition,r=un;try{if(Ks.transition=null,un=1,n)return n()}finally{un=r,Ks.transition=t,Kr=e,!(Kr&6)&&Cl()}}function Zg(){Cs=Iu.current,kn(Iu)}function Yl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Fx(t)),ti!==null)for(t=ti.return;t!==null;){var r=t;switch(Ng(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kd();break;case 3:oc(),kn(hs),kn($i),zg();break;case 5:Bg(r);break;case 4:oc();break;case 13:kn(Mn);break;case 19:kn(Mn);break;case 10:Rg(r.type._context);break;case 22:case 23:Zg()}t=t.return}if(yi=n,ti=n=gl(n.current,null),Ti=Cs=e,si=0,xh=null,Yg=hp=eu=0,ls=Jc=null,Hl!==null){for(e=0;e<Hl.length;e++)if(t=Hl[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,i=t.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}t.pending=r}Hl=null}return n}function T5(n,e){do{var t=ti;try{if(Lg(),td.current=Pd,Od){for(var r=Nn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Od=!1}if(tu=0,mi=ii=Nn=null,Kc=!1,bh=0,Xg.current=null,t===null||t.return===null){si=1,xh=e,ti=null;break}t:{var i=n,o=t.return,u=t,l=e;if(e=Ti,u.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var a=l,c=u,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=W2(o);if(h!==null){h.flags&=-257,X2(h,o,u,i,e),h.mode&1&&V2(i,a,e),e=h,l=a;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break t}else{if(!(e&1)){V2(i,a,e),Jg();break t}l=Error(Le(426))}}else if(An&&u.mode&1){var m=W2(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),X2(m,o,u,i,e),Og(ac(l,u));break t}}i=l=ac(l,u),si!==4&&(si=2),Jc===null?Jc=[i]:Jc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=u5(i,l,e);B2(i,y);break t;case 1:u=l;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(pl===null||!pl.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=c5(i,u,e);B2(i,k);break t}}i=i.return}while(i!==null)}j5(t)}catch(j){e=j,ti===t&&t!==null&&(ti=t=t.return);continue}break}while(!0)}function A5(){var n=Ld.current;return Ld.current=Pd,n===null?Pd:n}function Jg(){(si===0||si===3||si===2)&&(si=4),yi===null||!(eu&268435455)&&!(hp&268435455)||sl(yi,Ti)}function Id(n,e){var t=Kr;Kr|=2;var r=A5();(yi!==n||Ti!==e)&&(la=null,Yl(n,e));do try{u6();break}catch(s){T5(n,s)}while(!0);if(Lg(),Kr=t,Ld.current=r,ti!==null)throw Error(Le(261));return yi=null,Ti=0,si}function u6(){for(;ti!==null;)E5(ti)}function c6(){for(;ti!==null&&!R4();)E5(ti)}function E5(n){var e=N5(n.alternate,n,Cs);n.memoizedProps=n.pendingProps,e===null?j5(n):ti=e,Xg.current=null}function j5(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=n6(t,e),t!==null){t.flags&=32767,ti=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{si=6,ti=null;return}}else if(t=r6(t,e,Cs),t!==null){ti=t;return}if(e=e.sibling,e!==null){ti=e;return}ti=e=n}while(e!==null);si===0&&(si=5)}function Fl(n,e,t){var r=un,s=Ks.transition;try{Ks.transition=null,un=1,h6(n,e,t,r)}finally{Ks.transition=s,un=r}return null}function h6(n,e,t,r){do Xu();while(al!==null);if(Kr&6)throw Error(Le(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Le(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(V4(n,i),n===yi&&(ti=yi=null,Ti=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||gf||(gf=!0,O5(bd,function(){return Xu(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Ks.transition,Ks.transition=null;var o=un;un=1;var u=Kr;Kr|=4,Xg.current=null,s6(n,t),S5(t,n),Nx(fm),wd=!!hm,fm=hm=null,n.current=t,o6(t),D4(),Kr=u,un=o,Ks.transition=i}else n.current=t;if(gf&&(gf=!1,al=n,Dd=s),i=n.pendingLanes,i===0&&(pl=null),B4(t.stateNode),ds(n,Hn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if(Rd)throw Rd=!1,n=Om,Om=null,n;return Dd&1&&n.tag!==0&&Xu(),i=n.pendingLanes,i&1?n===Pm?Qc++:(Qc=0,Pm=n):Qc=0,Cl(),null}function Xu(){if(al!==null){var n=uv(Dd),e=Ks.transition,t=un;try{if(Ks.transition=null,un=16>n?16:n,al===null)var r=!1;else{if(n=al,al=null,Dd=0,Kr&6)throw Error(Le(331));var s=Kr;for(Kr|=4,ir=n.current;ir!==null;){var i=ir,o=i.child;if(ir.flags&16){var u=i.deletions;if(u!==null){for(var l=0;l<u.length;l++){var a=u[l];for(ir=a;ir!==null;){var c=ir;switch(c.tag){case 0:case 11:case 15:Zc(8,c,i)}var d=c.child;if(d!==null)d.return=c,ir=d;else for(;ir!==null;){c=ir;var f=c.sibling,h=c.return;if(w5(c),c===a){ir=null;break}if(f!==null){f.return=h,ir=f;break}ir=h}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}ir=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ir=o;else t:for(;ir!==null;){if(i=ir,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zc(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,ir=y;break t}ir=i.return}}var b=n.current;for(ir=b;ir!==null;){o=ir;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,ir=v;else t:for(o=b;ir!==null;){if(u=ir,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:cp(9,u)}}catch(j){Bn(u,u.return,j)}if(u===o){ir=null;break t}var k=u.sibling;if(k!==null){k.return=u.return,ir=k;break t}ir=u.return}}if(Kr=s,Cl(),Uo&&typeof Uo.onPostCommitFiberRoot=="function")try{Uo.onPostCommitFiberRoot(rp,n)}catch{}r=!0}return r}finally{un=t,Ks.transition=e}}return!1}function oy(n,e,t){e=ac(t,e),e=u5(n,e,1),n=dl(n,e,1),e=Ji(),n!==null&&(Mh(n,1,e),ds(n,e))}function Bn(n,e,t){if(n.tag===3)oy(n,n,t);else for(;e!==null;){if(e.tag===3){oy(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pl===null||!pl.has(r))){n=ac(t,n),n=c5(e,n,1),e=dl(e,n,1),n=Ji(),e!==null&&(Mh(e,1,n),ds(e,n));break}}e=e.return}}function f6(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Ji(),n.pingedLanes|=n.suspendedLanes&t,yi===n&&(Ti&t)===t&&(si===4||si===3&&(Ti&130023424)===Ti&&500>Hn()-Gg?Yl(n,0):Yg|=t),ds(n,e)}function M5(n,e){e===0&&(n.mode&1?(e=of,of<<=1,!(of&130023424)&&(of=4194304)):e=1);var t=Ji();n=Sa(n,e),n!==null&&(Mh(n,e,t),ds(n,t))}function d6(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),M5(n,t)}function p6(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Le(314))}r!==null&&r.delete(e),M5(n,t)}var N5;N5=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||hs.current)cs=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return cs=!1,e6(n,e,t);cs=!!(n.flags&131072)}else cs=!1,An&&e.flags&1048576&&Rv(e,Ad,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rd(n,e),n=e.pendingProps;var s=nc(e,$i.current);Wu(e,t),s=qg(null,e,r,n,s,t);var i=Hg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fs(r)?(i=!0,Cd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ig(e),s.updater=up,e.stateNode=s,s._reactInternals=e,xm(e,r,n,t),e=km(null,e,r,!0,i,t)):(e.tag=0,An&&i&&Mg(e),Gi(null,e,s,t),e=e.child),e;case 16:r=e.elementType;t:{switch(rd(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=g6(r),n=mo(r,n),s){case 0:e=Sm(null,e,r,n,t);break t;case 1:e=K2(null,e,r,n,t);break t;case 11:e=Y2(null,e,r,n,t);break t;case 14:e=G2(null,e,r,mo(r.type,n),t);break t}throw Error(Le(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mo(r,s),Sm(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mo(r,s),K2(n,e,r,s,t);case 3:t:{if(p5(e),n===null)throw Error(Le(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Uv(n,e),Md(e,r,null,t);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ac(Error(Le(423)),e),e=Z2(n,e,r,t,s);break t}else if(r!==s){s=ac(Error(Le(424)),e),e=Z2(n,e,r,t,s);break t}else for(Ts=fl(e.stateNode.containerInfo.firstChild),Es=e,An=!0,vo=null,t=Bv(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(ic(),r===s){e=ka(n,e,t);break t}Gi(n,e,r,t)}e=e.child}return e;case 5:return qv(e),n===null&&bm(e),r=e.type,s=e.pendingProps,i=n!==null?n.memoizedProps:null,o=s.children,dm(r,s)?o=null:i!==null&&dm(r,i)&&(e.flags|=32),d5(n,e),Gi(n,e,o,t),e.child;case 6:return n===null&&bm(e),null;case 13:return m5(n,e,t);case 4:return Fg(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=sc(e,null,r,t):Gi(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mo(r,s),Y2(n,e,r,s,t);case 7:return Gi(n,e,e.pendingProps,t),e.child;case 8:return Gi(n,e,e.pendingProps.children,t),e.child;case 12:return Gi(n,e,e.pendingProps.children,t),e.child;case 10:t:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,wn(Ed,r._currentValue),r._currentValue=o,i!==null)if(To(i.value,o)){if(i.children===s.children&&!hs.current){e=ka(n,e,t);break t}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var l=u.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ba(-1,t&-t),l.tag=2;var a=i.updateQueue;if(a!==null){a=a.shared;var c=a.pending;c===null?l.next=l:(l.next=c.next,c.next=l),a.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),vm(i.return,t,e),u.lanes|=t;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Le(341));o.lanes|=t,u=o.alternate,u!==null&&(u.lanes|=t),vm(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Gi(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Wu(e,t),s=Zs(s),r=r(s),e.flags|=1,Gi(n,e,r,t),e.child;case 14:return r=e.type,s=mo(r,e.pendingProps),s=mo(r.type,s),G2(n,e,r,s,t);case 15:return h5(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mo(r,s),rd(n,e),e.tag=1,fs(r)?(n=!0,Cd(e)):n=!1,Wu(e,t),l5(e,r,s),xm(e,r,s,t),km(null,e,r,!0,n,t);case 19:return g5(n,e,t);case 22:return f5(n,e,t)}throw Error(Le(156,e.tag))};function O5(n,e){return sv(n,e)}function m6(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gs(n,e,t,r){return new m6(n,e,t,r)}function Qg(n){return n=n.prototype,!(!n||!n.isReactComponent)}function g6(n){if(typeof n=="function")return Qg(n)?1:0;if(n!=null){if(n=n.$$typeof,n===bg)return 11;if(n===vg)return 14}return 2}function gl(n,e){var t=n.alternate;return t===null?(t=Gs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function sd(n,e,t,r,s,i){var o=2;if(r=n,typeof n=="function")Qg(n)&&(o=1);else if(typeof n=="string")o=5;else t:switch(n){case Au:return Gl(t.children,s,i,e);case yg:o=8,s|=8;break;case V0:return n=Gs(12,t,e,s|2),n.elementType=V0,n.lanes=i,n;case W0:return n=Gs(13,t,e,s),n.elementType=W0,n.lanes=i,n;case X0:return n=Gs(19,t,e,s),n.elementType=X0,n.lanes=i,n;case qb:return fp(t,s,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case zb:o=10;break t;case Ub:o=9;break t;case bg:o=11;break t;case vg:o=14;break t;case rl:o=16,r=null;break t}throw Error(Le(130,n==null?n:typeof n,""))}return e=Gs(o,t,e,s),e.elementType=n,e.type=r,e.lanes=i,e}function Gl(n,e,t,r){return n=Gs(7,n,r,e),n.lanes=t,n}function fp(n,e,t,r){return n=Gs(22,n,r,e),n.elementType=qb,n.lanes=t,n.stateNode={isHidden:!1},n}function y0(n,e,t){return n=Gs(6,n,null,e),n.lanes=t,n}function b0(n,e,t){return e=Gs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function y6(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jp(0),this.expirationTimes=Jp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function t1(n,e,t,r,s,i,o,u,l){return n=new y6(n,e,t,u,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Gs(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ig(i),n}function b6(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tu,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function P5(n){if(!n)return bl;n=n._reactInternals;t:{if(ou(n)!==n||n.tag!==1)throw Error(Le(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(fs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(e!==null);throw Error(Le(171))}if(n.tag===1){var t=n.type;if(fs(t))return Pv(n,t,e)}return e}function L5(n,e,t,r,s,i,o,u,l){return n=t1(t,r,!0,n,s,i,o,u,l),n.context=P5(null),t=n.current,r=Ji(),s=ml(t),i=ba(r,s),i.callback=e??null,dl(t,i,s),n.current.lanes=s,Mh(n,s,r),ds(n,r),n}function dp(n,e,t,r){var s=e.current,i=Ji(),o=ml(s);return t=P5(t),e.context===null?e.context=t:e.pendingContext=t,e=ba(i,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=dl(s,e,o),n!==null&&(ko(n,s,o,i),Qf(n,s,o)),o}function Fd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ay(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function e1(n,e){ay(n,e),(n=n.alternate)&&ay(n,e)}function v6(){return null}var R5=typeof reportError=="function"?reportError:function(n){console.error(n)};function r1(n){this._internalRoot=n}pp.prototype.render=r1.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Le(409));dp(n,e,null,null)};pp.prototype.unmount=r1.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;ru(function(){dp(null,n,null,null)}),e[_a]=null}};function pp(n){this._internalRoot=n}pp.prototype.unstable_scheduleHydration=function(n){if(n){var e=fv();n={blockedOn:null,target:n,priority:e};for(var t=0;t<il.length&&e!==0&&e<il[t].priority;t++);il.splice(t,0,n),t===0&&pv(n)}};function n1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function mp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ly(){}function w6(n,e,t,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var a=Fd(o);i.call(a)}}var o=L5(e,r,n,0,null,!1,!1,"",ly);return n._reactRootContainer=o,n[_a]=o.current,dh(n.nodeType===8?n.parentNode:n),ru(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var a=Fd(l);u.call(a)}}var l=t1(n,0,!1,null,null,!1,!1,"",ly);return n._reactRootContainer=l,n[_a]=l.current,dh(n.nodeType===8?n.parentNode:n),ru(function(){dp(e,l,t,r)}),l}function gp(n,e,t,r,s){var i=t._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var l=Fd(o);u.call(l)}}dp(e,o,n,s)}else o=w6(t,e,n,s,r);return Fd(o)}cv=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=qc(e.pendingLanes);t!==0&&(_g(e,t|1),ds(e,Hn()),!(Kr&6)&&(lc=Hn()+500,Cl()))}break;case 13:ru(function(){var r=Sa(n,1);if(r!==null){var s=Ji();ko(r,n,1,s)}}),e1(n,1)}};Sg=function(n){if(n.tag===13){var e=Sa(n,134217728);if(e!==null){var t=Ji();ko(e,n,134217728,t)}e1(n,134217728)}};hv=function(n){if(n.tag===13){var e=ml(n),t=Sa(n,e);if(t!==null){var r=Ji();ko(t,n,e,r)}e1(n,e)}};fv=function(){return un};dv=function(n,e){var t=un;try{return un=n,e()}finally{un=t}};nm=function(n,e,t){switch(e){case"input":if(K0(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=op(r);if(!s)throw Error(Le(90));$b(r),K0(r,s)}}}break;case"textarea":Wb(n,t);break;case"select":e=t.value,e!=null&&qu(n,!!t.multiple,e,!1)}};Qb=Kg;tv=ru;var x6={usingClientEntryPoint:!1,Events:[Oh,Nu,op,Zb,Jb,Kg]},Rc={findFiberByHostInstance:ql,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_6={bundleType:Rc.bundleType,version:Rc.version,rendererPackageName:Rc.rendererPackageName,rendererConfig:Rc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ja.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=nv(n),n===null?null:n.stateNode},findFiberByHostInstance:Rc.findFiberByHostInstance||v6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yf.isDisabled&&yf.supportsFiber)try{rp=yf.inject(_6),Uo=yf}catch{}}Ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x6;Ms.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!n1(e))throw Error(Le(200));return b6(n,e,null,t)};Ms.createRoot=function(n,e){if(!n1(n))throw Error(Le(299));var t=!1,r="",s=R5;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=t1(n,1,!1,null,null,t,!1,r,s),n[_a]=e.current,dh(n.nodeType===8?n.parentNode:n),new r1(e)};Ms.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Le(188)):(n=Object.keys(n).join(","),Error(Le(268,n)));return n=nv(e),n=n===null?null:n.stateNode,n};Ms.flushSync=function(n){return ru(n)};Ms.hydrate=function(n,e,t){if(!mp(e))throw Error(Le(200));return gp(null,n,e,!0,t)};Ms.hydrateRoot=function(n,e,t){if(!n1(n))throw Error(Le(405));var r=t!=null&&t.hydratedSources||null,s=!1,i="",o=R5;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=L5(e,null,n,1,t??null,s,!1,i,o),n[_a]=e.current,dh(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new pp(e)};Ms.render=function(n,e,t){if(!mp(e))throw Error(Le(200));return gp(null,n,e,!1,t)};Ms.unmountComponentAtNode=function(n){if(!mp(n))throw Error(Le(40));return n._reactRootContainer?(ru(function(){gp(null,null,n,!1,function(){n._reactRootContainer=null,n[_a]=null})}),!0):!1};Ms.unstable_batchedUpdates=Kg;Ms.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!mp(t))throw Error(Le(200));if(n==null||n._reactInternals===void 0)throw Error(Le(38));return gp(n,e,t,!1,r)};Ms.version="18.3.1-next-f1338f8080-20240426";function D5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D5)}catch(n){console.error(n)}}D5(),Db.exports=Ms;var S6=Db.exports,I5,uy=S6;I5=uy.createRoot,uy.hydrateRoot;const cy=n=>{let e;const t=new Set,r=(a,c)=>{const d=typeof a=="function"?a(e):a;if(!Object.is(d,e)){const f=e;e=c??(typeof d!="object"||d===null)?d:Object.assign({},e,d),t.forEach(h=>h(e,f))}},s=()=>e,u={setState:r,getState:s,getInitialState:()=>l,subscribe:a=>(t.add(a),()=>t.delete(a))},l=e=n(r,s,u);return u},k6=n=>n?cy(n):cy,C6=n=>n;function T6(n,e=C6){const t=fa.useSyncExternalStore(n.subscribe,fa.useCallback(()=>e(n.getState()),[n,e]),fa.useCallback(()=>e(n.getInitialState()),[n,e]));return fa.useDebugValue(t),t}const hy=n=>{const e=k6(n),t=r=>T6(e,r);return Object.assign(t,e),t},i1=n=>n?hy(n):hy,_i=[];for(let n=0;n<256;++n)_i.push((n+256).toString(16).slice(1));function A6(n,e=0){return(_i[n[e+0]]+_i[n[e+1]]+_i[n[e+2]]+_i[n[e+3]]+"-"+_i[n[e+4]]+_i[n[e+5]]+"-"+_i[n[e+6]]+_i[n[e+7]]+"-"+_i[n[e+8]]+_i[n[e+9]]+"-"+_i[n[e+10]]+_i[n[e+11]]+_i[n[e+12]]+_i[n[e+13]]+_i[n[e+14]]+_i[n[e+15]]).toLowerCase()}let v0;const E6=new Uint8Array(16);function j6(){if(!v0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");v0=crypto.getRandomValues.bind(crypto)}return v0(E6)}const M6=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),fy={randomUUID:M6};function Yu(n,e,t){var s;if(fy.randomUUID&&!n)return fy.randomUUID();n=n||{};const r=n.random??((s=n.rng)==null?void 0:s.call(n))??j6();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,A6(r)}const N6={show:!0,color:"#cccccc",thickness:1,highlight5:!0,highlight10:!0,highlight5Color:"#999999",highlight10Color:"#666666"},F5={width:50,height:50,gaugeH:1,gaugeV:1,gridLines:N6},w0={darkMode:!1,units:"metric",handedness:"right",defaultGridWidth:50,defaultGridHeight:50,defaultGaugeH:1,defaultGaugeV:1};function O6(n,e){const t=[];for(let r=0;r<e;r++){t[r]=[];for(let s=0;s<n;s++)t[r][s]={colorId:null,symbolId:null}}return{cells:t}}function P6(n,e,t,r=F5){const s=new Date,i={id:n,name:e,chartType:t,createdAt:s,updatedAt:s,settings:r,palette:[]};return t==="freeform"?i.freeform={layers:[{id:"layer-1",name:"Layer 1",visible:!0,locked:!1,symbols:[]}],activeLayerId:"layer-1"}:i.grid=O6(r.width,r.height),i}var B5={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(qr,function(){var t=function(R,W){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,rt){J.__proto__=rt}||function(J,rt){for(var it in rt)Object.prototype.hasOwnProperty.call(rt,it)&&(J[it]=rt[it])})(R,W)},r=function(){return(r=Object.assign||function(R){for(var W,J=1,rt=arguments.length;J<rt;J++)for(var it in W=arguments[J])Object.prototype.hasOwnProperty.call(W,it)&&(R[it]=W[it]);return R}).apply(this,arguments)};function s(R,W,J){for(var rt,it=0,ht=W.length;it<ht;it++)!rt&&it in W||((rt=rt||Array.prototype.slice.call(W,0,it))[it]=W[it]);return R.concat(rt||Array.prototype.slice.call(W))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:qr,o=Object.keys,u=Array.isArray;function l(R,W){return typeof W!="object"||o(W).forEach(function(J){R[J]=W[J]}),R}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var a=Object.getPrototypeOf,c={}.hasOwnProperty;function d(R,W){return c.call(R,W)}function f(R,W){typeof W=="function"&&(W=W(a(R))),(typeof Reflect>"u"?o:Reflect.ownKeys)(W).forEach(function(J){p(R,J,W[J])})}var h=Object.defineProperty;function p(R,W,J,rt){h(R,W,l(J&&d(J,"get")&&typeof J.get=="function"?{get:J.get,set:J.set,configurable:!0}:{value:J,configurable:!0,writable:!0},rt))}function g(R){return{from:function(W){return R.prototype=Object.create(W.prototype),p(R.prototype,"constructor",R),{extend:f.bind(null,R.prototype)}}}}var m=Object.getOwnPropertyDescriptor,y=[].slice;function b(R,W,J){return y.call(R,W,J)}function v(R,W){return W(R)}function k(R){if(!R)throw new Error("Assertion Failed")}function j(R){i.setImmediate?setImmediate(R):setTimeout(R,0)}function I(R,W){if(typeof W=="string"&&d(R,W))return R[W];if(!W)return R;if(typeof W!="string"){for(var J=[],rt=0,it=W.length;rt<it;++rt){var ht=I(R,W[rt]);J.push(ht)}return J}var wt=W.indexOf(".");if(wt!==-1){var At=R[W.substr(0,wt)];return At==null?void 0:I(At,W.substr(wt+1))}}function U(R,W,J){if(R&&W!==void 0&&!("isFrozen"in Object&&Object.isFrozen(R)))if(typeof W!="string"&&"length"in W){k(typeof J!="string"&&"length"in J);for(var rt=0,it=W.length;rt<it;++rt)U(R,W[rt],J[rt])}else{var ht,wt,At=W.indexOf(".");At!==-1?(ht=W.substr(0,At),(wt=W.substr(At+1))===""?J===void 0?u(R)&&!isNaN(parseInt(ht))?R.splice(ht,1):delete R[ht]:R[ht]=J:U(At=!(At=R[ht])||!d(R,ht)?R[ht]={}:At,wt,J)):J===void 0?u(R)&&!isNaN(parseInt(W))?R.splice(W,1):delete R[W]:R[W]=J}}function P(R){var W,J={};for(W in R)d(R,W)&&(J[W]=R[W]);return J}var z=[].concat;function q(R){return z.apply([],R)}var ue="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(q([8,16,32,64].map(function(R){return["Int","Uint","Float"].map(function(W){return W+R+"Array"})}))).filter(function(R){return i[R]}),$=new Set(ue.map(function(R){return i[R]})),F=null;function T(R){return F=new WeakMap,R=function W(J){if(!J||typeof J!="object")return J;var rt=F.get(J);if(rt)return rt;if(u(J)){rt=[],F.set(J,rt);for(var it=0,ht=J.length;it<ht;++it)rt.push(W(J[it]))}else if($.has(J.constructor))rt=J;else{var wt,At=a(J);for(wt in rt=At===Object.prototype?{}:Object.create(At),F.set(J,rt),J)d(J,wt)&&(rt[wt]=W(J[wt]))}return rt}(R),F=null,R}var N={}.toString;function C(R){return N.call(R).slice(8,-1)}var w=typeof Symbol<"u"?Symbol.iterator:"@@iterator",_=typeof w=="symbol"?function(R){var W;return R!=null&&(W=R[w])&&W.apply(R)}:function(){return null};function x(R,W){return W=R.indexOf(W),0<=W&&R.splice(W,1),0<=W}var S={};function A(R){var W,J,rt,it;if(arguments.length===1){if(u(R))return R.slice();if(this===S&&typeof R=="string")return[R];if(it=_(R)){for(J=[];!(rt=it.next()).done;)J.push(rt.value);return J}if(R==null)return[R];if(typeof(W=R.length)!="number")return[R];for(J=new Array(W);W--;)J[W]=R[W];return J}for(W=arguments.length,J=new Array(W);W--;)J[W]=arguments[W];return J}var B=typeof Symbol<"u"?function(R){return R[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},re=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],fi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(re),E={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function V(R,W){this.name=R,this.message=W}function X(R,W){return R+". Errors: "+Object.keys(W).map(function(J){return W[J].toString()}).filter(function(J,rt,it){return it.indexOf(J)===rt}).join(`
`)}function Q(R,W,J,rt){this.failures=W,this.failedKeys=rt,this.successCount=J,this.message=X(R,W)}function D(R,W){this.name="BulkError",this.failures=Object.keys(W).map(function(J){return W[J]}),this.failuresByPos=W,this.message=X(R,this.failures)}g(V).from(Error).extend({toString:function(){return this.name+": "+this.message}}),g(Q).from(V),g(D).from(V);var Z=fi.reduce(function(R,W){return R[W]=W+"Error",R},{}),L=V,O=fi.reduce(function(R,W){var J=W+"Error";function rt(it,ht){this.name=J,it?typeof it=="string"?(this.message="".concat(it).concat(ht?`
 `+ht:""),this.inner=ht||null):typeof it=="object"&&(this.message="".concat(it.name," ").concat(it.message),this.inner=it):(this.message=E[W]||J,this.inner=null)}return g(rt).from(L),R[W]=rt,R},{});O.Syntax=SyntaxError,O.Type=TypeError,O.Range=RangeError;var G=re.reduce(function(R,W){return R[W+"Error"]=O[W],R},{}),nt=fi.reduce(function(R,W){return["Syntax","Type","Range"].indexOf(W)===-1&&(R[W+"Error"]=O[W]),R},{});function ct(){}function ot(R){return R}function mt(R,W){return R==null||R===ot?W:function(J){return W(R(J))}}function pt(R,W){return function(){R.apply(this,arguments),W.apply(this,arguments)}}function st(R,W){return R===ct?W:function(){var J=R.apply(this,arguments);J!==void 0&&(arguments[0]=J);var rt=this.onsuccess,it=this.onerror;this.onsuccess=null,this.onerror=null;var ht=W.apply(this,arguments);return rt&&(this.onsuccess=this.onsuccess?pt(rt,this.onsuccess):rt),it&&(this.onerror=this.onerror?pt(it,this.onerror):it),ht!==void 0?ht:J}}function at(R,W){return R===ct?W:function(){R.apply(this,arguments);var J=this.onsuccess,rt=this.onerror;this.onsuccess=this.onerror=null,W.apply(this,arguments),J&&(this.onsuccess=this.onsuccess?pt(J,this.onsuccess):J),rt&&(this.onerror=this.onerror?pt(rt,this.onerror):rt)}}function vt(R,W){return R===ct?W:function(J){var rt=R.apply(this,arguments);l(J,rt);var it=this.onsuccess,ht=this.onerror;return this.onsuccess=null,this.onerror=null,J=W.apply(this,arguments),it&&(this.onsuccess=this.onsuccess?pt(it,this.onsuccess):it),ht&&(this.onerror=this.onerror?pt(ht,this.onerror):ht),rt===void 0?J===void 0?void 0:J:l(rt,J)}}function yt(R,W){return R===ct?W:function(){return W.apply(this,arguments)!==!1&&R.apply(this,arguments)}}function kt(R,W){return R===ct?W:function(){var J=R.apply(this,arguments);if(J&&typeof J.then=="function"){for(var rt=this,it=arguments.length,ht=new Array(it);it--;)ht[it]=arguments[it];return J.then(function(){return W.apply(rt,ht)})}return W.apply(this,arguments)}}nt.ModifyError=Q,nt.DexieError=V,nt.BulkError=D;var St=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Tt(R){St=R}var Lt={},Xt=100,ue=typeof Promise>"u"?[]:function(){var R=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[R,a(R),R];var W=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[W,a(W),R]}(),re=ue[0],fi=ue[1],ue=ue[2],fi=fi&&fi.then,ce=re&&re.constructor,de=!!ue,ve=function(R,W){Be.push([R,W]),ie&&(queueMicrotask(mr),ie=!1)},Te=!0,ie=!0,ze=[],me=[],ke=ot,we={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ct,pgp:!1,env:{},finalize:ct},ne=we,Be=[],$e=0,Or=[];function te(R){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var W=this._PSD=ne;if(typeof R!="function"){if(R!==Lt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ye(this,this._value))}this._state=null,this._value=null,++W.ref,function J(rt,it){try{it(function(ht){if(rt._state===null){if(ht===rt)throw new TypeError("A promise cannot be resolved with itself.");var wt=rt._lib&&jr();ht&&typeof ht.then=="function"?J(rt,function(At,Nt){ht instanceof te?ht._then(At,Nt):ht.then(At,Nt)}):(rt._state=!0,rt._value=ht,Ve(rt)),wt&&rr()}},Ye.bind(null,rt))}catch(ht){Ye(rt,ht)}}(this,R)}var Sr={get:function(){var R=ne,W=sr;function J(rt,it){var ht=this,wt=!R.global&&(R!==ne||W!==sr),At=wt&&!He(),Nt=new te(function(Mt,$t){er(ht,new br(en(rt,R,wt,At),en(it,R,wt,At),Mt,$t,R))});return this._consoleTask&&(Nt._consoleTask=this._consoleTask),Nt}return J.prototype=Lt,J},set:function(R){p(this,"then",R&&R.prototype===Lt?Sr:{get:function(){return R},set:Sr.set})}};function br(R,W,J,rt,it){this.onFulfilled=typeof R=="function"?R:null,this.onRejected=typeof W=="function"?W:null,this.resolve=J,this.reject=rt,this.psd=it}function Ye(R,W){var J,rt;me.push(W),R._state===null&&(J=R._lib&&jr(),W=ke(W),R._state=!1,R._value=W,rt=R,ze.some(function(it){return it._value===rt._value})||ze.push(rt),Ve(R),J&&rr())}function Ve(R){var W=R._listeners;R._listeners=[];for(var J=0,rt=W.length;J<rt;++J)er(R,W[J]);var it=R._PSD;--it.ref||it.finalize(),$e===0&&(++$e,ve(function(){--$e==0&&Fe()},[]))}function er(R,W){if(R._state!==null){var J=R._state?W.onFulfilled:W.onRejected;if(J===null)return(R._state?W.resolve:W.reject)(R._value);++W.psd.ref,++$e,ve(cr,[J,R,W])}else R._listeners.push(W)}function cr(R,W,J){try{var rt,it=W._value;!W._state&&me.length&&(me=[]),rt=St&&W._consoleTask?W._consoleTask.run(function(){return R(it)}):R(it),W._state||me.indexOf(it)!==-1||function(ht){for(var wt=ze.length;wt;)if(ze[--wt]._value===ht._value)return ze.splice(wt,1)}(W),J.resolve(rt)}catch(ht){J.reject(ht)}finally{--$e==0&&Fe(),--J.psd.ref||J.psd.finalize()}}function mr(){Rr(we,function(){jr()&&rr()})}function jr(){var R=Te;return ie=Te=!1,R}function rr(){var R,W,J;do for(;0<Be.length;)for(R=Be,Be=[],J=R.length,W=0;W<J;++W){var rt=R[W];rt[0].apply(null,rt[1])}while(0<Be.length);ie=Te=!0}function Fe(){var R=ze;ze=[],R.forEach(function(rt){rt._PSD.onunhandled.call(null,rt._value,rt)});for(var W=Or.slice(0),J=W.length;J;)W[--J]()}function Nr(R){return new te(Lt,!1,R)}function Ue(R,W){var J=ne;return function(){var rt=jr(),it=ne;try{return fr(J,!0),R.apply(this,arguments)}catch(ht){W&&W(ht)}finally{fr(it,!1),rt&&rr()}}}f(te.prototype,{then:Sr,_then:function(R,W){er(this,new br(null,null,R,W,ne))},catch:function(R){if(arguments.length===1)return this.then(null,R);var W=R,J=arguments[1];return typeof W=="function"?this.then(null,function(rt){return(rt instanceof W?J:Nr)(rt)}):this.then(null,function(rt){return(rt&&rt.name===W?J:Nr)(rt)})},finally:function(R){return this.then(function(W){return te.resolve(R()).then(function(){return W})},function(W){return te.resolve(R()).then(function(){return Nr(W)})})},timeout:function(R,W){var J=this;return R<1/0?new te(function(rt,it){var ht=setTimeout(function(){return it(new O.Timeout(W))},R);J.then(rt,it).finally(clearTimeout.bind(null,ht))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&p(te.prototype,Symbol.toStringTag,"Dexie.Promise"),we.env=Xr(),f(te,{all:function(){var R=A.apply(null,arguments).map(hr);return new te(function(W,J){R.length===0&&W([]);var rt=R.length;R.forEach(function(it,ht){return te.resolve(it).then(function(wt){R[ht]=wt,--rt||W(R)},J)})})},resolve:function(R){return R instanceof te?R:R&&typeof R.then=="function"?new te(function(W,J){R.then(W,J)}):new te(Lt,!0,R)},reject:Nr,race:function(){var R=A.apply(null,arguments).map(hr);return new te(function(W,J){R.map(function(rt){return te.resolve(rt).then(W,J)})})},PSD:{get:function(){return ne},set:function(R){return ne=R}},totalEchoes:{get:function(){return sr}},newPSD:Je,usePSD:Rr,scheduler:{get:function(){return ve},set:function(R){ve=R}},rejectionMapper:{get:function(){return ke},set:function(R){ke=R}},follow:function(R,W){return new te(function(J,rt){return Je(function(it,ht){var wt=ne;wt.unhandleds=[],wt.onunhandled=ht,wt.finalize=pt(function(){var At,Nt=this;At=function(){Nt.unhandleds.length===0?it():ht(Nt.unhandleds[0])},Or.push(function Mt(){At(),Or.splice(Or.indexOf(Mt),1)}),++$e,ve(function(){--$e==0&&Fe()},[])},wt.finalize),R()},W,J,rt)})}}),ce&&(ce.allSettled&&p(te,"allSettled",function(){var R=A.apply(null,arguments).map(hr);return new te(function(W){R.length===0&&W([]);var J=R.length,rt=new Array(J);R.forEach(function(it,ht){return te.resolve(it).then(function(wt){return rt[ht]={status:"fulfilled",value:wt}},function(wt){return rt[ht]={status:"rejected",reason:wt}}).then(function(){return--J||W(rt)})})})}),ce.any&&typeof AggregateError<"u"&&p(te,"any",function(){var R=A.apply(null,arguments).map(hr);return new te(function(W,J){R.length===0&&J(new AggregateError([]));var rt=R.length,it=new Array(rt);R.forEach(function(ht,wt){return te.resolve(ht).then(function(At){return W(At)},function(At){it[wt]=At,--rt||J(new AggregateError(it))})})})}),ce.withResolvers&&(te.withResolvers=ce.withResolvers));var Et={awaits:0,echoes:0,id:0},qt=0,ee=[],Ce=0,sr=0,Oe=0;function Je(R,W,J,rt){var it=ne,ht=Object.create(it);return ht.parent=it,ht.ref=0,ht.global=!1,ht.id=++Oe,we.env,ht.env=de?{Promise:te,PromiseProp:{value:te,configurable:!0,writable:!0},all:te.all,race:te.race,allSettled:te.allSettled,any:te.any,resolve:te.resolve,reject:te.reject}:{},W&&l(ht,W),++it.ref,ht.finalize=function(){--this.parent.ref||this.parent.finalize()},rt=Rr(ht,R,J,rt),ht.ref===0&&ht.finalize(),rt}function Ke(){return Et.id||(Et.id=++qt),++Et.awaits,Et.echoes+=Xt,Et.id}function He(){return!!Et.awaits&&(--Et.awaits==0&&(Et.id=0),Et.echoes=Et.awaits*Xt,!0)}function hr(R){return Et.echoes&&R&&R.constructor===ce?(Ke(),R.then(function(W){return He(),W},function(W){return He(),Lr(W)})):R}function lr(){var R=ee[ee.length-1];ee.pop(),fr(R,!1)}function fr(R,W){var J,rt=ne;(W?!Et.echoes||Ce++&&R===ne:!Ce||--Ce&&R===ne)||queueMicrotask(W?(function(it){++sr,Et.echoes&&--Et.echoes!=0||(Et.echoes=Et.awaits=Et.id=0),ee.push(ne),fr(it,!0)}).bind(null,R):lr),R!==ne&&(ne=R,rt===we&&(we.env=Xr()),de&&(J=we.env.Promise,W=R.env,(rt.global||R.global)&&(Object.defineProperty(i,"Promise",W.PromiseProp),J.all=W.all,J.race=W.race,J.resolve=W.resolve,J.reject=W.reject,W.allSettled&&(J.allSettled=W.allSettled),W.any&&(J.any=W.any))))}function Xr(){var R=i.Promise;return de?{Promise:R,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:R.all,race:R.race,allSettled:R.allSettled,any:R.any,resolve:R.resolve,reject:R.reject}:{}}function Rr(R,W,J,rt,it){var ht=ne;try{return fr(R,!0),W(J,rt,it)}finally{fr(ht,!1)}}function en(R,W,J,rt){return typeof R!="function"?R:function(){var it=ne;J&&Ke(),fr(W,!0);try{return R.apply(this,arguments)}finally{fr(it,!1),rt&&queueMicrotask(He)}}}function Qr(R){Promise===ce&&Et.echoes===0?Ce===0?R():enqueueNativeMicroTask(R):setTimeout(R,0)}(""+fi).indexOf("[native code]")===-1&&(Ke=He=ct);var Lr=te.reject,xt="",Yt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",he="String expected.",ge=[],Ze="__dbnames",je="readonly",Pe="readwrite";function Ar(R,W){return R?W?function(){return R.apply(this,arguments)&&W.apply(this,arguments)}:R:W}var wr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function kr(R){return typeof R!="string"||/\./.test(R)?function(W){return W}:function(W){return W[R]===void 0&&R in W&&delete(W=T(W))[R],W}}function ur(){throw O.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Qe(R,W){try{var J=gr(R),rt=gr(W);if(J!==rt)return J==="Array"?1:rt==="Array"?-1:J==="binary"?1:rt==="binary"?-1:J==="string"?1:rt==="string"?-1:J==="Date"?1:rt!=="Date"?NaN:-1;switch(J){case"number":case"Date":case"string":return W<R?1:R<W?-1:0;case"binary":return function(it,ht){for(var wt=it.length,At=ht.length,Nt=wt<At?wt:At,Mt=0;Mt<Nt;++Mt)if(it[Mt]!==ht[Mt])return it[Mt]<ht[Mt]?-1:1;return wt===At?0:wt<At?-1:1}(Hr(R),Hr(W));case"Array":return function(it,ht){for(var wt=it.length,At=ht.length,Nt=wt<At?wt:At,Mt=0;Mt<Nt;++Mt){var $t=Qe(it[Mt],ht[Mt]);if($t!==0)return $t}return wt===At?0:wt<At?-1:1}(R,W)}}catch{}return NaN}function gr(R){var W=typeof R;return W!="object"?W:ArrayBuffer.isView(R)?"binary":(R=C(R),R==="ArrayBuffer"?"binary":R)}function Hr(R){return R instanceof Uint8Array?R:ArrayBuffer.isView(R)?new Uint8Array(R.buffer,R.byteOffset,R.byteLength):new Uint8Array(R)}function Yr(R,W,J){var rt=R.schema.yProps;return rt?(W&&0<J.numFailures&&(W=W.filter(function(it,ht){return!J.failures[ht]})),Promise.all(rt.map(function(it){return it=it.updatesTable,W?R.db.table(it).where("k").anyOf(W).delete():R.db.table(it).clear()})).then(function(){return J})):J}var rn=(Tn.prototype.execute=function(R){var W=this["@@propmod"];if(W.add!==void 0){var J=W.add;if(u(J))return s(s([],u(R)?R:[],!0),J).sort();if(typeof J=="number")return(Number(R)||0)+J;if(typeof J=="bigint")try{return BigInt(R)+J}catch{return BigInt(0)+J}throw new TypeError("Invalid term ".concat(J))}if(W.remove!==void 0){var rt=W.remove;if(u(rt))return u(R)?R.filter(function(it){return!rt.includes(it)}).sort():[];if(typeof rt=="number")return Number(R)-rt;if(typeof rt=="bigint")try{return BigInt(R)-rt}catch{return BigInt(0)-rt}throw new TypeError("Invalid subtrahend ".concat(rt))}return J=(J=W.replacePrefix)===null||J===void 0?void 0:J[0],J&&typeof R=="string"&&R.startsWith(J)?W.replacePrefix[1]+R.substring(J.length):R},Tn);function Tn(R){this["@@propmod"]=R}function li(R,W){for(var J=o(W),rt=J.length,it=!1,ht=0;ht<rt;++ht){var wt=J[ht],At=W[wt],Nt=I(R,wt);At instanceof rn?(U(R,wt,At.execute(Nt)),it=!0):Nt!==At&&(U(R,wt,At),it=!0)}return it}var Pn=(zr.prototype._trans=function(R,W,J){var rt=this._tx||ne.trans,it=this.name,ht=St&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(R==="readonly"?"read":"write"," ").concat(this.name));function wt(Mt,$t,jt){if(!jt.schema[it])throw new O.NotFound("Table "+it+" not part of transaction");return W(jt.idbtrans,jt)}var At=jr();try{var Nt=rt&&rt.db._novip===this.db._novip?rt===ne.trans?rt._promise(R,wt,J):Je(function(){return rt._promise(R,wt,J)},{trans:rt,transless:ne.transless||ne}):function Mt($t,jt,Ht,Pt){if($t.idbdb&&($t._state.openComplete||ne.letThrough||$t._vip)){var zt=$t._createTransaction(jt,Ht,$t._dbSchema);try{zt.create(),$t._state.PR1398_maxLoop=3}catch(Bt){return Bt.name===Z.InvalidState&&$t.isOpen()&&0<--$t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),$t.close({disableAutoOpen:!1}),$t.open().then(function(){return Mt($t,jt,Ht,Pt)})):Lr(Bt)}return zt._promise(jt,function(Bt,Vt){return Je(function(){return ne.trans=zt,Pt(Bt,Vt,zt)})}).then(function(Bt){if(jt==="readwrite")try{zt.idbtrans.commit()}catch{}return jt==="readonly"?Bt:zt._completion.then(function(){return Bt})})}if($t._state.openComplete)return Lr(new O.DatabaseClosed($t._state.dbOpenError));if(!$t._state.isBeingOpened){if(!$t._state.autoOpen)return Lr(new O.DatabaseClosed);$t.open().catch(ct)}return $t._state.dbReadyPromise.then(function(){return Mt($t,jt,Ht,Pt)})}(this.db,R,[this.name],wt);return ht&&(Nt._consoleTask=ht,Nt=Nt.catch(function(Mt){return console.trace(Mt),Lr(Mt)})),Nt}finally{At&&rr()}},zr.prototype.get=function(R,W){var J=this;return R&&R.constructor===Object?this.where(R).first(W):R==null?Lr(new O.Type("Invalid argument to Table.get()")):this._trans("readonly",function(rt){return J.core.get({trans:rt,key:R}).then(function(it){return J.hook.reading.fire(it)})}).then(W)},zr.prototype.where=function(R){if(typeof R=="string")return new this.db.WhereClause(this,R);if(u(R))return new this.db.WhereClause(this,"[".concat(R.join("+"),"]"));var W=o(R);if(W.length===1)return this.where(W[0]).equals(R[W[0]]);var J=this.schema.indexes.concat(this.schema.primKey).filter(function(At){if(At.compound&&W.every(function(Mt){return 0<=At.keyPath.indexOf(Mt)})){for(var Nt=0;Nt<W.length;++Nt)if(W.indexOf(At.keyPath[Nt])===-1)return!1;return!0}return!1}).sort(function(At,Nt){return At.keyPath.length-Nt.keyPath.length})[0];if(J&&this.db._maxKey!==xt){var ht=J.keyPath.slice(0,W.length);return this.where(ht).equals(ht.map(function(Nt){return R[Nt]}))}!J&&St&&console.warn("The query ".concat(JSON.stringify(R)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(W.join("+"),"]"));var rt=this.schema.idxByName;function it(At,Nt){return Qe(At,Nt)===0}var wt=W.reduce(function(jt,Nt){var Mt=jt[0],$t=jt[1],jt=rt[Nt],Ht=R[Nt];return[Mt||jt,Mt||!jt?Ar($t,jt&&jt.multi?function(Pt){return Pt=I(Pt,Nt),u(Pt)&&Pt.some(function(zt){return it(Ht,zt)})}:function(Pt){return it(Ht,I(Pt,Nt))}):$t]},[null,null]),ht=wt[0],wt=wt[1];return ht?this.where(ht.name).equals(R[ht.keyPath]).filter(wt):J?this.filter(wt):this.where(W).equals("")},zr.prototype.filter=function(R){return this.toCollection().and(R)},zr.prototype.count=function(R){return this.toCollection().count(R)},zr.prototype.offset=function(R){return this.toCollection().offset(R)},zr.prototype.limit=function(R){return this.toCollection().limit(R)},zr.prototype.each=function(R){return this.toCollection().each(R)},zr.prototype.toArray=function(R){return this.toCollection().toArray(R)},zr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},zr.prototype.orderBy=function(R){return new this.db.Collection(new this.db.WhereClause(this,u(R)?"[".concat(R.join("+"),"]"):R))},zr.prototype.reverse=function(){return this.toCollection().reverse()},zr.prototype.mapToClass=function(R){var W,J=this.db,rt=this.name;function it(){return W!==null&&W.apply(this,arguments)||this}(this.schema.mappedClass=R).prototype instanceof ur&&(function(Nt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");function $t(){this.constructor=Nt}t(Nt,Mt),Nt.prototype=Mt===null?Object.create(Mt):($t.prototype=Mt.prototype,new $t)}(it,W=R),Object.defineProperty(it.prototype,"db",{get:function(){return J},enumerable:!1,configurable:!0}),it.prototype.table=function(){return rt},R=it);for(var ht=new Set,wt=R.prototype;wt;wt=a(wt))Object.getOwnPropertyNames(wt).forEach(function(Nt){return ht.add(Nt)});function At(Nt){if(!Nt)return Nt;var Mt,$t=Object.create(R.prototype);for(Mt in Nt)if(!ht.has(Mt))try{$t[Mt]=Nt[Mt]}catch{}return $t}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=At,this.hook("reading",At),R},zr.prototype.defineClass=function(){return this.mapToClass(function(R){l(this,R)})},zr.prototype.add=function(R,W){var J=this,rt=this.schema.primKey,it=rt.auto,ht=rt.keyPath,wt=R;return ht&&it&&(wt=kr(ht)(R)),this._trans("readwrite",function(At){return J.core.mutate({trans:At,type:"add",keys:W!=null?[W]:null,values:[wt]})}).then(function(At){return At.numFailures?te.reject(At.failures[0]):At.lastResult}).then(function(At){if(ht)try{U(R,ht,At)}catch{}return At})},zr.prototype.upsert=function(R,W){var J=this,rt=this.schema.primKey.keyPath;return this._trans("readwrite",function(it){return J.core.get({trans:it,key:R}).then(function(ht){var wt=ht??{};return li(wt,W),rt&&U(wt,rt,R),J.core.mutate({trans:it,type:"put",values:[wt],keys:[R],upsert:!0,updates:{keys:[R],changeSpecs:[W]}}).then(function(At){return At.numFailures?te.reject(At.failures[0]):!!ht})})})},zr.prototype.update=function(R,W){return typeof R!="object"||u(R)?this.where(":id").equals(R).modify(W):(R=I(R,this.schema.primKey.keyPath),R===void 0?Lr(new O.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(R).modify(W))},zr.prototype.put=function(R,W){var J=this,rt=this.schema.primKey,it=rt.auto,ht=rt.keyPath,wt=R;return ht&&it&&(wt=kr(ht)(R)),this._trans("readwrite",function(At){return J.core.mutate({trans:At,type:"put",values:[wt],keys:W!=null?[W]:null})}).then(function(At){return At.numFailures?te.reject(At.failures[0]):At.lastResult}).then(function(At){if(ht)try{U(R,ht,At)}catch{}return At})},zr.prototype.delete=function(R){var W=this;return this._trans("readwrite",function(J){return W.core.mutate({trans:J,type:"delete",keys:[R]}).then(function(rt){return Yr(W,[R],rt)}).then(function(rt){return rt.numFailures?te.reject(rt.failures[0]):void 0})})},zr.prototype.clear=function(){var R=this;return this._trans("readwrite",function(W){return R.core.mutate({trans:W,type:"deleteRange",range:wr}).then(function(J){return Yr(R,null,J)})}).then(function(W){return W.numFailures?te.reject(W.failures[0]):void 0})},zr.prototype.bulkGet=function(R){var W=this;return this._trans("readonly",function(J){return W.core.getMany({keys:R,trans:J}).then(function(rt){return rt.map(function(it){return W.hook.reading.fire(it)})})})},zr.prototype.bulkAdd=function(R,W,J){var rt=this,it=Array.isArray(W)?W:void 0,ht=(J=J||(it?void 0:W))?J.allKeys:void 0;return this._trans("readwrite",function(wt){var Mt=rt.schema.primKey,At=Mt.auto,Mt=Mt.keyPath;if(Mt&&it)throw new O.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(it&&it.length!==R.length)throw new O.InvalidArgument("Arguments objects and keys must have the same length");var Nt=R.length,Mt=Mt&&At?R.map(kr(Mt)):R;return rt.core.mutate({trans:wt,type:"add",keys:it,values:Mt,wantResults:ht}).then(function(zt){var jt=zt.numFailures,Ht=zt.results,Pt=zt.lastResult,zt=zt.failures;if(jt===0)return ht?Ht:Pt;throw new D("".concat(rt.name,".bulkAdd(): ").concat(jt," of ").concat(Nt," operations failed"),zt)})})},zr.prototype.bulkPut=function(R,W,J){var rt=this,it=Array.isArray(W)?W:void 0,ht=(J=J||(it?void 0:W))?J.allKeys:void 0;return this._trans("readwrite",function(wt){var Mt=rt.schema.primKey,At=Mt.auto,Mt=Mt.keyPath;if(Mt&&it)throw new O.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(it&&it.length!==R.length)throw new O.InvalidArgument("Arguments objects and keys must have the same length");var Nt=R.length,Mt=Mt&&At?R.map(kr(Mt)):R;return rt.core.mutate({trans:wt,type:"put",keys:it,values:Mt,wantResults:ht}).then(function(zt){var jt=zt.numFailures,Ht=zt.results,Pt=zt.lastResult,zt=zt.failures;if(jt===0)return ht?Ht:Pt;throw new D("".concat(rt.name,".bulkPut(): ").concat(jt," of ").concat(Nt," operations failed"),zt)})})},zr.prototype.bulkUpdate=function(R){var W=this,J=this.core,rt=R.map(function(wt){return wt.key}),it=R.map(function(wt){return wt.changes}),ht=[];return this._trans("readwrite",function(wt){return J.getMany({trans:wt,keys:rt,cache:"clone"}).then(function(At){var Nt=[],Mt=[];R.forEach(function(jt,Ht){var Pt=jt.key,zt=jt.changes,Bt=At[Ht];if(Bt){for(var Vt=0,Kt=Object.keys(zt);Vt<Kt.length;Vt++){var Qt=Kt[Vt],se=zt[Qt];if(Qt===W.schema.primKey.keyPath){if(Qe(se,Pt)!==0)throw new O.Constraint("Cannot update primary key in bulkUpdate()")}else U(Bt,Qt,se)}ht.push(Ht),Nt.push(Pt),Mt.push(Bt)}});var $t=Nt.length;return J.mutate({trans:wt,type:"put",keys:Nt,values:Mt,updates:{keys:rt,changeSpecs:it}}).then(function(jt){var Ht=jt.numFailures,Pt=jt.failures;if(Ht===0)return $t;for(var zt=0,Bt=Object.keys(Pt);zt<Bt.length;zt++){var Vt,Kt=Bt[zt],Qt=ht[Number(Kt)];Qt!=null&&(Vt=Pt[Kt],delete Pt[Kt],Pt[Qt]=Vt)}throw new D("".concat(W.name,".bulkUpdate(): ").concat(Ht," of ").concat($t," operations failed"),Pt)})})})},zr.prototype.bulkDelete=function(R){var W=this,J=R.length;return this._trans("readwrite",function(rt){return W.core.mutate({trans:rt,type:"delete",keys:R}).then(function(it){return Yr(W,R,it)})}).then(function(wt){var it=wt.numFailures,ht=wt.lastResult,wt=wt.failures;if(it===0)return ht;throw new D("".concat(W.name,".bulkDelete(): ").concat(it," of ").concat(J," operations failed"),wt)})},zr);function zr(){}function fn(R){function W(wt,At){if(At){for(var Nt=arguments.length,Mt=new Array(Nt-1);--Nt;)Mt[Nt-1]=arguments[Nt];return J[wt].subscribe.apply(null,Mt),R}if(typeof wt=="string")return J[wt]}var J={};W.addEventType=ht;for(var rt=1,it=arguments.length;rt<it;++rt)ht(arguments[rt]);return W;function ht(wt,At,Nt){if(typeof wt!="object"){var Mt;At=At||yt;var $t={subscribers:[],fire:Nt=Nt||ct,subscribe:function(jt){$t.subscribers.indexOf(jt)===-1&&($t.subscribers.push(jt),$t.fire=At($t.fire,jt))},unsubscribe:function(jt){$t.subscribers=$t.subscribers.filter(function(Ht){return Ht!==jt}),$t.fire=$t.subscribers.reduce(At,Nt)}};return J[wt]=W[wt]=$t}o(Mt=wt).forEach(function(jt){var Ht=Mt[jt];if(u(Ht))ht(jt,Mt[jt][0],Mt[jt][1]);else{if(Ht!=="asap")throw new O.InvalidArgument("Invalid event config");var Pt=ht(jt,ot,function(){for(var zt=arguments.length,Bt=new Array(zt);zt--;)Bt[zt]=arguments[zt];Pt.subscribers.forEach(function(Vt){j(function(){Vt.apply(null,Bt)})})})}})}}function ui(R,W){return g(W).from({prototype:R}),W}function Dr(R,W){return!(R.filter||R.algorithm||R.or)&&(W?R.justLimit:!R.replayFilter)}function Ir(R,W){R.filter=Ar(R.filter,W)}function bi(R,W,J){var rt=R.replayFilter;R.replayFilter=rt?function(){return Ar(rt(),W())}:W,R.justLimit=J&&!rt}function Ei(R,W){if(R.isPrimKey)return W.primaryKey;var J=W.getIndexByKeyPath(R.index);if(!J)throw new O.Schema("KeyPath "+R.index+" on object store "+W.name+" is not indexed");return J}function Os(R,W,J){var rt=Ei(R,W.schema);return W.openCursor({trans:J,values:!R.keysOnly,reverse:R.dir==="prev",unique:!!R.unique,query:{index:rt,range:R.range}})}function Ln(R,W,J,rt){var it=R.replayFilter?Ar(R.filter,R.replayFilter()):R.filter;if(R.or){var ht={},wt=function(At,Nt,Mt){var $t,jt;it&&!it(Nt,Mt,function(Ht){return Nt.stop(Ht)},function(Ht){return Nt.fail(Ht)})||((jt=""+($t=Nt.primaryKey))=="[object ArrayBuffer]"&&(jt=""+new Uint8Array($t)),d(ht,jt)||(ht[jt]=!0,W(At,Nt,Mt)))};return Promise.all([R.or._iterate(wt,J),ci(Os(R,rt,J),R.algorithm,wt,!R.keysOnly&&R.valueMapper)])}return ci(Os(R,rt,J),Ar(R.algorithm,it),W,!R.keysOnly&&R.valueMapper)}function ci(R,W,J,rt){var it=Ue(rt?function(ht,wt,At){return J(rt(ht),wt,At)}:J);return R.then(function(ht){if(ht)return ht.start(function(){var wt=function(){return ht.continue()};W&&!W(ht,function(At){return wt=At},function(At){ht.stop(At),wt=ct},function(At){ht.fail(At),wt=ct})||it(ht.value,ht,function(At){return wt=At}),wt()})})}var rs=(Fr.prototype._read=function(R,W){var J=this._ctx;return J.error?J.table._trans(null,Lr.bind(null,J.error)):J.table._trans("readonly",R).then(W)},Fr.prototype._write=function(R){var W=this._ctx;return W.error?W.table._trans(null,Lr.bind(null,W.error)):W.table._trans("readwrite",R,"locked")},Fr.prototype._addAlgorithm=function(R){var W=this._ctx;W.algorithm=Ar(W.algorithm,R)},Fr.prototype._iterate=function(R,W){return Ln(this._ctx,R,W,this._ctx.table.core)},Fr.prototype.clone=function(R){var W=Object.create(this.constructor.prototype),J=Object.create(this._ctx);return R&&l(J,R),W._ctx=J,W},Fr.prototype.raw=function(){return this._ctx.valueMapper=null,this},Fr.prototype.each=function(R){var W=this._ctx;return this._read(function(J){return Ln(W,R,J,W.table.core)})},Fr.prototype.count=function(R){var W=this;return this._read(function(J){var rt=W._ctx,it=rt.table.core;if(Dr(rt,!0))return it.count({trans:J,query:{index:Ei(rt,it.schema),range:rt.range}}).then(function(wt){return Math.min(wt,rt.limit)});var ht=0;return Ln(rt,function(){return++ht,!1},J,it).then(function(){return ht})}).then(R)},Fr.prototype.sortBy=function(R,W){var J=R.split(".").reverse(),rt=J[0],it=J.length-1;function ht(Nt,Mt){return Mt?ht(Nt[J[Mt]],Mt-1):Nt[rt]}var wt=this._ctx.dir==="next"?1:-1;function At(Nt,Mt){return Qe(ht(Nt,it),ht(Mt,it))*wt}return this.toArray(function(Nt){return Nt.sort(At)}).then(W)},Fr.prototype.toArray=function(R){var W=this;return this._read(function(J){var rt=W._ctx;if(rt.dir==="next"&&Dr(rt,!0)&&0<rt.limit){var it=rt.valueMapper,ht=Ei(rt,rt.table.core.schema);return rt.table.core.query({trans:J,limit:rt.limit,values:!0,query:{index:ht,range:rt.range}}).then(function(At){return At=At.result,it?At.map(it):At})}var wt=[];return Ln(rt,function(At){return wt.push(At)},J,rt.table.core).then(function(){return wt})},R)},Fr.prototype.offset=function(R){var W=this._ctx;return R<=0||(W.offset+=R,Dr(W)?bi(W,function(){var J=R;return function(rt,it){return J===0||(J===1?--J:it(function(){rt.advance(J),J=0}),!1)}}):bi(W,function(){var J=R;return function(){return--J<0}})),this},Fr.prototype.limit=function(R){return this._ctx.limit=Math.min(this._ctx.limit,R),bi(this._ctx,function(){var W=R;return function(J,rt,it){return--W<=0&&rt(it),0<=W}},!0),this},Fr.prototype.until=function(R,W){return Ir(this._ctx,function(J,rt,it){return!R(J.value)||(rt(it),W)}),this},Fr.prototype.first=function(R){return this.limit(1).toArray(function(W){return W[0]}).then(R)},Fr.prototype.last=function(R){return this.reverse().first(R)},Fr.prototype.filter=function(R){var W;return Ir(this._ctx,function(J){return R(J.value)}),(W=this._ctx).isMatch=Ar(W.isMatch,R),this},Fr.prototype.and=function(R){return this.filter(R)},Fr.prototype.or=function(R){return new this.db.WhereClause(this._ctx.table,R,this)},Fr.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Fr.prototype.desc=function(){return this.reverse()},Fr.prototype.eachKey=function(R){var W=this._ctx;return W.keysOnly=!W.isMatch,this.each(function(J,rt){R(rt.key,rt)})},Fr.prototype.eachUniqueKey=function(R){return this._ctx.unique="unique",this.eachKey(R)},Fr.prototype.eachPrimaryKey=function(R){var W=this._ctx;return W.keysOnly=!W.isMatch,this.each(function(J,rt){R(rt.primaryKey,rt)})},Fr.prototype.keys=function(R){var W=this._ctx;W.keysOnly=!W.isMatch;var J=[];return this.each(function(rt,it){J.push(it.key)}).then(function(){return J}).then(R)},Fr.prototype.primaryKeys=function(R){var W=this._ctx;if(W.dir==="next"&&Dr(W,!0)&&0<W.limit)return this._read(function(rt){var it=Ei(W,W.table.core.schema);return W.table.core.query({trans:rt,values:!1,limit:W.limit,query:{index:it,range:W.range}})}).then(function(rt){return rt.result}).then(R);W.keysOnly=!W.isMatch;var J=[];return this.each(function(rt,it){J.push(it.primaryKey)}).then(function(){return J}).then(R)},Fr.prototype.uniqueKeys=function(R){return this._ctx.unique="unique",this.keys(R)},Fr.prototype.firstKey=function(R){return this.limit(1).keys(function(W){return W[0]}).then(R)},Fr.prototype.lastKey=function(R){return this.reverse().firstKey(R)},Fr.prototype.distinct=function(){var R=this._ctx,R=R.index&&R.table.schema.idxByName[R.index];if(!R||!R.multi)return this;var W={};return Ir(this._ctx,function(it){var rt=it.primaryKey.toString(),it=d(W,rt);return W[rt]=!0,!it}),this},Fr.prototype.modify=function(R){var W=this,J=this._ctx;return this._write(function(rt){var it=typeof R=="function"?R:function(Bt){return li(Bt,R)},ht=J.table.core,Mt=ht.schema.primaryKey,wt=Mt.outbound,At=Mt.extractKey,Nt=200,Mt=W.db._options.modifyChunkSize;Mt&&(Nt=typeof Mt=="object"?Mt[ht.name]||Mt["*"]||200:Mt);function $t(Bt,Qt){var Kt=Qt.failures,Qt=Qt.numFailures;Ht+=Bt-Qt;for(var se=0,fe=o(Kt);se<fe.length;se++){var Me=fe[se];jt.push(Kt[Me])}}var jt=[],Ht=0,Pt=[],zt=R===eo;return W.clone().primaryKeys().then(function(Bt){function Vt(Qt){var se=Math.min(Nt,Bt.length-Qt),fe=Bt.slice(Qt,Qt+se);return(zt?Promise.resolve([]):ht.getMany({trans:rt,keys:fe,cache:"immutable"})).then(function(Me){var Ie=[],Ae=[],Ee=wt?[]:null,Re=zt?fe:[];if(!zt)for(var xe=0;xe<se;++xe){var Ne=Me[xe],or={value:T(Ne),primKey:Bt[Qt+xe]};it.call(or,or.value,or)!==!1&&(or.value==null?Re.push(Bt[Qt+xe]):wt||Qe(At(Ne),At(or.value))===0?(Ae.push(or.value),wt&&Ee.push(Bt[Qt+xe])):(Re.push(Bt[Qt+xe]),Ie.push(or.value)))}return Promise.resolve(0<Ie.length&&ht.mutate({trans:rt,type:"add",values:Ie}).then(function(dr){for(var Er in dr.failures)Re.splice(parseInt(Er),1);$t(Ie.length,dr)})).then(function(){return(0<Ae.length||Kt&&typeof R=="object")&&ht.mutate({trans:rt,type:"put",keys:Ee,values:Ae,criteria:Kt,changeSpec:typeof R!="function"&&R,isAdditionalChunk:0<Qt}).then(function(dr){return $t(Ae.length,dr)})}).then(function(){return(0<Re.length||Kt&&zt)&&ht.mutate({trans:rt,type:"delete",keys:Re,criteria:Kt,isAdditionalChunk:0<Qt}).then(function(dr){return Yr(J.table,Re,dr)}).then(function(dr){return $t(Re.length,dr)})}).then(function(){return Bt.length>Qt+se&&Vt(Qt+Nt)})})}var Kt=Dr(J)&&J.limit===1/0&&(typeof R!="function"||zt)&&{index:J.index,range:J.range};return Vt(0).then(function(){if(0<jt.length)throw new Q("Error modifying one or more objects",jt,Ht,Pt);return Bt.length})})})},Fr.prototype.delete=function(){var R=this._ctx,W=R.range;return!Dr(R)||R.table.schema.yProps||!R.isPrimKey&&W.type!==3?this.modify(eo):this._write(function(J){var rt=R.table.core.schema.primaryKey,it=W;return R.table.core.count({trans:J,query:{index:rt,range:it}}).then(function(ht){return R.table.core.mutate({trans:J,type:"deleteRange",range:it}).then(function(Nt){var At=Nt.failures,Nt=Nt.numFailures;if(Nt)throw new Q("Could not delete some values",Object.keys(At).map(function(Mt){return At[Mt]}),ht-Nt);return ht-Nt})})})},Fr);function Fr(){}var eo=function(R,W){return W.value=null};function hi(R,W){return R<W?-1:R===W?0:1}function vi(R,W){return W<R?-1:R===W?0:1}function En(R,W,J){return R=R instanceof vr?new R.Collection(R):R,R._ctx.error=new(J||TypeError)(W),R}function ji(R){return new R.Collection(R,function(){return Ps("")}).limit(0)}function xn(R,W,J,rt){var it,ht,wt,At,Nt,Mt,$t,jt=J.length;if(!J.every(function(zt){return typeof zt=="string"}))return En(R,he);function Ht(zt){it=zt==="next"?function(Vt){return Vt.toUpperCase()}:function(Vt){return Vt.toLowerCase()},ht=zt==="next"?function(Vt){return Vt.toLowerCase()}:function(Vt){return Vt.toUpperCase()},wt=zt==="next"?hi:vi;var Bt=J.map(function(Vt){return{lower:ht(Vt),upper:it(Vt)}}).sort(function(Vt,Kt){return wt(Vt.lower,Kt.lower)});At=Bt.map(function(Vt){return Vt.upper}),Nt=Bt.map(function(Vt){return Vt.lower}),$t=(Mt=zt)==="next"?"":rt}Ht("next"),R=new R.Collection(R,function(){return wi(At[0],Nt[jt-1]+rt)}),R._ondirectionchange=function(zt){Ht(zt)};var Pt=0;return R._addAlgorithm(function(zt,Bt,Vt){var Kt=zt.key;if(typeof Kt!="string")return!1;var Qt=ht(Kt);if(W(Qt,Nt,Pt))return!0;for(var se=null,fe=Pt;fe<jt;++fe){var Me=function(Ie,Ae,Ee,Re,xe,Ne){for(var or=Math.min(Ie.length,Re.length),dr=-1,Er=0;Er<or;++Er){var ni=Ae[Er];if(ni!==Re[Er])return xe(Ie[Er],Ee[Er])<0?Ie.substr(0,Er)+Ee[Er]+Ee.substr(Er+1):xe(Ie[Er],Re[Er])<0?Ie.substr(0,Er)+Re[Er]+Ee.substr(Er+1):0<=dr?Ie.substr(0,dr)+Ae[dr]+Ee.substr(dr+1):null;xe(Ie[Er],ni)<0&&(dr=Er)}return or<Re.length&&Ne==="next"?Ie+Ee.substr(Ie.length):or<Ie.length&&Ne==="prev"?Ie.substr(0,Ee.length):dr<0?null:Ie.substr(0,dr)+Re[dr]+Ee.substr(dr+1)}(Kt,Qt,At[fe],Nt[fe],wt,Mt);Me===null&&se===null?Pt=fe+1:(se===null||0<wt(se,Me))&&(se=Me)}return Bt(se!==null?function(){zt.continue(se+$t)}:Vt),!1}),R}function wi(R,W,J,rt){return{type:2,lower:R,upper:W,lowerOpen:J,upperOpen:rt}}function Ps(R){return{type:1,lower:R,upper:R}}var vr=(Object.defineProperty(dn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),dn.prototype.between=function(R,W,J,rt){J=J!==!1,rt=rt===!0;try{return 0<this._cmp(R,W)||this._cmp(R,W)===0&&(J||rt)&&(!J||!rt)?ji(this):new this.Collection(this,function(){return wi(R,W,!J,!rt)})}catch{return En(this,Yt)}},dn.prototype.equals=function(R){return R==null?En(this,Yt):new this.Collection(this,function(){return Ps(R)})},dn.prototype.above=function(R){return R==null?En(this,Yt):new this.Collection(this,function(){return wi(R,void 0,!0)})},dn.prototype.aboveOrEqual=function(R){return R==null?En(this,Yt):new this.Collection(this,function(){return wi(R,void 0,!1)})},dn.prototype.below=function(R){return R==null?En(this,Yt):new this.Collection(this,function(){return wi(void 0,R,!1,!0)})},dn.prototype.belowOrEqual=function(R){return R==null?En(this,Yt):new this.Collection(this,function(){return wi(void 0,R)})},dn.prototype.startsWith=function(R){return typeof R!="string"?En(this,he):this.between(R,R+xt,!0,!0)},dn.prototype.startsWithIgnoreCase=function(R){return R===""?this.startsWith(R):xn(this,function(W,J){return W.indexOf(J[0])===0},[R],xt)},dn.prototype.equalsIgnoreCase=function(R){return xn(this,function(W,J){return W===J[0]},[R],"")},dn.prototype.anyOfIgnoreCase=function(){var R=A.apply(S,arguments);return R.length===0?ji(this):xn(this,function(W,J){return J.indexOf(W)!==-1},R,"")},dn.prototype.startsWithAnyOfIgnoreCase=function(){var R=A.apply(S,arguments);return R.length===0?ji(this):xn(this,function(W,J){return J.some(function(rt){return W.indexOf(rt)===0})},R,xt)},dn.prototype.anyOf=function(){var R=this,W=A.apply(S,arguments),J=this._cmp;try{W.sort(J)}catch{return En(this,Yt)}if(W.length===0)return ji(this);var rt=new this.Collection(this,function(){return wi(W[0],W[W.length-1])});rt._ondirectionchange=function(ht){J=ht==="next"?R._ascending:R._descending,W.sort(J)};var it=0;return rt._addAlgorithm(function(ht,wt,At){for(var Nt=ht.key;0<J(Nt,W[it]);)if(++it===W.length)return wt(At),!1;return J(Nt,W[it])===0||(wt(function(){ht.continue(W[it])}),!1)}),rt},dn.prototype.notEqual=function(R){return this.inAnyRange([[-1/0,R],[R,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},dn.prototype.noneOf=function(){var R=A.apply(S,arguments);if(R.length===0)return new this.Collection(this);try{R.sort(this._ascending)}catch{return En(this,Yt)}var W=R.reduce(function(J,rt){return J?J.concat([[J[J.length-1][1],rt]]):[[-1/0,rt]]},null);return W.push([R[R.length-1],this.db._maxKey]),this.inAnyRange(W,{includeLowers:!1,includeUppers:!1})},dn.prototype.inAnyRange=function(Kt,W){var J=this,rt=this._cmp,it=this._ascending,ht=this._descending,wt=this._min,At=this._max;if(Kt.length===0)return ji(this);if(!Kt.every(function(Qt){return Qt[0]!==void 0&&Qt[1]!==void 0&&it(Qt[0],Qt[1])<=0}))return En(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",O.InvalidArgument);var Nt=!W||W.includeLowers!==!1,Mt=W&&W.includeUppers===!0,$t,jt=it;function Ht(Qt,se){return jt(Qt[0],se[0])}try{($t=Kt.reduce(function(Qt,se){for(var fe=0,Me=Qt.length;fe<Me;++fe){var Ie=Qt[fe];if(rt(se[0],Ie[1])<0&&0<rt(se[1],Ie[0])){Ie[0]=wt(Ie[0],se[0]),Ie[1]=At(Ie[1],se[1]);break}}return fe===Me&&Qt.push(se),Qt},[])).sort(Ht)}catch{return En(this,Yt)}var Pt=0,zt=Mt?function(Qt){return 0<it(Qt,$t[Pt][1])}:function(Qt){return 0<=it(Qt,$t[Pt][1])},Bt=Nt?function(Qt){return 0<ht(Qt,$t[Pt][0])}:function(Qt){return 0<=ht(Qt,$t[Pt][0])},Vt=zt,Kt=new this.Collection(this,function(){return wi($t[0][0],$t[$t.length-1][1],!Nt,!Mt)});return Kt._ondirectionchange=function(Qt){jt=Qt==="next"?(Vt=zt,it):(Vt=Bt,ht),$t.sort(Ht)},Kt._addAlgorithm(function(Qt,se,fe){for(var Me,Ie=Qt.key;Vt(Ie);)if(++Pt===$t.length)return se(fe),!1;return!zt(Me=Ie)&&!Bt(Me)||(J._cmp(Ie,$t[Pt][1])===0||J._cmp(Ie,$t[Pt][0])===0||se(function(){jt===it?Qt.continue($t[Pt][0]):Qt.continue($t[Pt][1])}),!1)}),Kt},dn.prototype.startsWithAnyOf=function(){var R=A.apply(S,arguments);return R.every(function(W){return typeof W=="string"})?R.length===0?ji(this):this.inAnyRange(R.map(function(W){return[W,W+xt]})):En(this,"startsWithAnyOf() only works with strings")},dn);function dn(){}function ei(R){return Ue(function(W){return Mi(W),R(W.target.error),!1})}function Mi(R){R.stopPropagation&&R.stopPropagation(),R.preventDefault&&R.preventDefault()}var jo="storagemutated",Oa="x-storagemutated-1",Vi=fn(null,jo),Al=(ns.prototype._lock=function(){return k(!ne.global),++this._reculock,this._reculock!==1||ne.global||(ne.lockOwnerFor=this),this},ns.prototype._unlock=function(){if(k(!ne.global),--this._reculock==0)for(ne.global||(ne.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var R=this._blockedFuncs.shift();try{Rr(R[1],R[0])}catch{}}return this},ns.prototype._locked=function(){return this._reculock&&ne.lockOwnerFor!==this},ns.prototype.create=function(R){var W=this;if(!this.mode)return this;var J=this.db.idbdb,rt=this.db._state.dbOpenError;if(k(!this.idbtrans),!R&&!J)switch(rt&&rt.name){case"DatabaseClosedError":throw new O.DatabaseClosed(rt);case"MissingAPIError":throw new O.MissingAPI(rt.message,rt);default:throw new O.OpenFailed(rt)}if(!this.active)throw new O.TransactionInactive;return k(this._completion._state===null),(R=this.idbtrans=R||(this.db.core||J).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ue(function(it){Mi(it),W._reject(R.error)}),R.onabort=Ue(function(it){Mi(it),W.active&&W._reject(new O.Abort(R.error)),W.active=!1,W.on("abort").fire(it)}),R.oncomplete=Ue(function(){W.active=!1,W._resolve(),"mutatedParts"in R&&Vi.storagemutated.fire(R.mutatedParts)}),this},ns.prototype._promise=function(R,W,J){var rt=this;if(R==="readwrite"&&this.mode!=="readwrite")return Lr(new O.ReadOnly("Transaction is readonly"));if(!this.active)return Lr(new O.TransactionInactive);if(this._locked())return new te(function(ht,wt){rt._blockedFuncs.push([function(){rt._promise(R,W,J).then(ht,wt)},ne])});if(J)return Je(function(){var ht=new te(function(wt,At){rt._lock();var Nt=W(wt,At,rt);Nt&&Nt.then&&Nt.then(wt,At)});return ht.finally(function(){return rt._unlock()}),ht._lib=!0,ht});var it=new te(function(ht,wt){var At=W(ht,wt,rt);At&&At.then&&At.then(ht,wt)});return it._lib=!0,it},ns.prototype._root=function(){return this.parent?this.parent._root():this},ns.prototype.waitFor=function(R){var W,J=this._root(),rt=te.resolve(R);J._waitingFor?J._waitingFor=J._waitingFor.then(function(){return rt}):(J._waitingFor=rt,J._waitingQueue=[],W=J.idbtrans.objectStore(J.storeNames[0]),function ht(){for(++J._spinCount;J._waitingQueue.length;)J._waitingQueue.shift()();J._waitingFor&&(W.get(-1/0).onsuccess=ht)}());var it=J._waitingFor;return new te(function(ht,wt){rt.then(function(At){return J._waitingQueue.push(Ue(ht.bind(null,At)))},function(At){return J._waitingQueue.push(Ue(wt.bind(null,At)))}).finally(function(){J._waitingFor===it&&(J._waitingFor=null)})})},ns.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new O.Abort))},ns.prototype.table=function(R){var W=this._memoizedTables||(this._memoizedTables={});if(d(W,R))return W[R];var J=this.schema[R];if(!J)throw new O.NotFound("Table "+R+" not part of transaction");return J=new this.db.Table(R,J,this),J.core=this.db.core.table(R),W[R]=J},ns);function ns(){}function El(R,W,J,rt,it,ht,wt,At){return{name:R,keyPath:W,unique:J,multi:rt,auto:it,compound:ht,src:(J&&!wt?"&":"")+(rt?"*":"")+(it?"++":"")+uu(W),type:At}}function uu(R){return typeof R=="string"?R:R?"["+[].join.call(R,"+")+"]":""}function Xo(R,W,J){return{name:R,primKey:W,indexes:J,mappedClass:null,idxByName:(rt=function(it){return[it.name,it]},J.reduce(function(it,ht,wt){return wt=rt(ht,wt),wt&&(it[wt[0]]=wt[1]),it},{}))};var rt}var vs=function(R){try{return R.only([[]]),vs=function(){return[[]]},[[]]}catch{return vs=function(){return xt},xt}};function Ls(R){return R==null?function(){}:typeof R=="string"?(W=R).split(".").length===1?function(J){return J[W]}:function(J){return I(J,W)}:function(J){return I(J,R)};var W}function cu(R){return[].slice.call(R)}var Yo=0;function ro(R){return R==null?":id":typeof R=="string"?R:"[".concat(R.join("+"),"]")}function Pa(R,W,Nt){function rt(Vt){if(Vt.type===3)return null;if(Vt.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Pt=Vt.lower,zt=Vt.upper,Bt=Vt.lowerOpen,Vt=Vt.upperOpen;return Pt===void 0?zt===void 0?null:W.upperBound(zt,!!Vt):zt===void 0?W.lowerBound(Pt,!!Bt):W.bound(Pt,zt,!!Bt,!!Vt)}function it(Ht){var Pt,zt=Ht.name;return{name:zt,schema:Ht,mutate:function(Bt){var Vt=Bt.trans,Kt=Bt.type,Qt=Bt.keys,se=Bt.values,fe=Bt.range;return new Promise(function(Me,Ie){Me=Ue(Me);var Ae=Vt.objectStore(zt),Ee=Ae.keyPath==null,Re=Kt==="put"||Kt==="add";if(!Re&&Kt!=="delete"&&Kt!=="deleteRange")throw new Error("Invalid operation type: "+Kt);var xe,Ne=(Qt||se||{length:1}).length;if(Qt&&se&&Qt.length!==se.length)throw new Error("Given keys array must have same length as given values array.");if(Ne===0)return Me({numFailures:0,failures:{},results:[],lastResult:void 0});function or(nn){++ni,Mi(nn)}var dr=[],Er=[],ni=0;if(Kt==="deleteRange"){if(fe.type===4)return Me({numFailures:ni,failures:Er,results:[],lastResult:void 0});fe.type===3?dr.push(xe=Ae.clear()):dr.push(xe=Ae.delete(rt(fe)))}else{var Ee=Re?Ee?[se,Qt]:[se,null]:[Qt,null],xr=Ee[0],Un=Ee[1];if(Re)for(var Gn=0;Gn<Ne;++Gn)dr.push(xe=Un&&Un[Gn]!==void 0?Ae[Kt](xr[Gn],Un[Gn]):Ae[Kt](xr[Gn])),xe.onerror=or;else for(Gn=0;Gn<Ne;++Gn)dr.push(xe=Ae[Kt](xr[Gn])),xe.onerror=or}function ra(nn){nn=nn.target.result,dr.forEach(function(Kn,qa){return Kn.error!=null&&(Er[qa]=Kn.error)}),Me({numFailures:ni,failures:Er,results:Kt==="delete"?Qt:dr.map(function(Kn){return Kn.result}),lastResult:nn})}xe.onerror=function(nn){or(nn),ra(nn)},xe.onsuccess=ra})},getMany:function(Bt){var Vt=Bt.trans,Kt=Bt.keys;return new Promise(function(Qt,se){Qt=Ue(Qt);for(var fe,Me=Vt.objectStore(zt),Ie=Kt.length,Ae=new Array(Ie),Ee=0,Re=0,xe=function(dr){dr=dr.target,Ae[dr._pos]=dr.result,++Re===Ee&&Qt(Ae)},Ne=ei(se),or=0;or<Ie;++or)Kt[or]!=null&&((fe=Me.get(Kt[or]))._pos=or,fe.onsuccess=xe,fe.onerror=Ne,++Ee);Ee===0&&Qt(Ae)})},get:function(Bt){var Vt=Bt.trans,Kt=Bt.key;return new Promise(function(Qt,se){Qt=Ue(Qt);var fe=Vt.objectStore(zt).get(Kt);fe.onsuccess=function(Me){return Qt(Me.target.result)},fe.onerror=ei(se)})},query:(Pt=Mt,function(Bt){return new Promise(function(Vt,Kt){Vt=Ue(Vt);var Qt,se,fe,Ee=Bt.trans,Me=Bt.values,Ie=Bt.limit,xe=Bt.query,Ae=Ie===1/0?void 0:Ie,Re=xe.index,xe=xe.range,Ee=Ee.objectStore(zt),Re=Re.isPrimaryKey?Ee:Ee.index(Re.name),xe=rt(xe);if(Ie===0)return Vt({result:[]});Pt?((Ae=Me?Re.getAll(xe,Ae):Re.getAllKeys(xe,Ae)).onsuccess=function(Ne){return Vt({result:Ne.target.result})},Ae.onerror=ei(Kt)):(Qt=0,se=!Me&&"openKeyCursor"in Re?Re.openKeyCursor(xe):Re.openCursor(xe),fe=[],se.onsuccess=function(Ne){var or=se.result;return or?(fe.push(Me?or.value:or.primaryKey),++Qt===Ie?Vt({result:fe}):void or.continue()):Vt({result:fe})},se.onerror=ei(Kt))})}),openCursor:function(Bt){var Vt=Bt.trans,Kt=Bt.values,Qt=Bt.query,se=Bt.reverse,fe=Bt.unique;return new Promise(function(Me,Ie){Me=Ue(Me);var Re=Qt.index,Ae=Qt.range,Ee=Vt.objectStore(zt),Ee=Re.isPrimaryKey?Ee:Ee.index(Re.name),Re=se?fe?"prevunique":"prev":fe?"nextunique":"next",xe=!Kt&&"openKeyCursor"in Ee?Ee.openKeyCursor(rt(Ae),Re):Ee.openCursor(rt(Ae),Re);xe.onerror=ei(Ie),xe.onsuccess=Ue(function(Ne){var or,dr,Er,ni,xr=xe.result;xr?(xr.___id=++Yo,xr.done=!1,or=xr.continue.bind(xr),dr=(dr=xr.continuePrimaryKey)&&dr.bind(xr),Er=xr.advance.bind(xr),ni=function(){throw new Error("Cursor not stopped")},xr.trans=Vt,xr.stop=xr.continue=xr.continuePrimaryKey=xr.advance=function(){throw new Error("Cursor not started")},xr.fail=Ue(Ie),xr.next=function(){var Un=this,Gn=1;return this.start(function(){return Gn--?Un.continue():Un.stop()}).then(function(){return Un})},xr.start=function(Un){function Gn(){if(xe.result)try{Un()}catch(nn){xr.fail(nn)}else xr.done=!0,xr.start=function(){throw new Error("Cursor behind last entry")},xr.stop()}var ra=new Promise(function(nn,Kn){nn=Ue(nn),xe.onerror=ei(Kn),xr.fail=Kn,xr.stop=function(qa){xr.stop=xr.continue=xr.continuePrimaryKey=xr.advance=ni,nn(qa)}});return xe.onsuccess=Ue(function(nn){xe.onsuccess=Gn,Gn()}),xr.continue=or,xr.continuePrimaryKey=dr,xr.advance=Er,Gn(),ra},Me(xr)):Me(null)},Ie)})},count:function(Bt){var Vt=Bt.query,Kt=Bt.trans,Qt=Vt.index,se=Vt.range;return new Promise(function(fe,Me){var Ie=Kt.objectStore(zt),Ae=Qt.isPrimaryKey?Ie:Ie.index(Qt.name),Ie=rt(se),Ae=Ie?Ae.count(Ie):Ae.count();Ae.onsuccess=Ue(function(Ee){return fe(Ee.target.result)}),Ae.onerror=ei(Me)})}}}var ht,wt,At,$t=(wt=Nt,At=cu((ht=R).objectStoreNames),{schema:{name:ht.name,tables:At.map(function(Ht){return wt.objectStore(Ht)}).map(function(Ht){var Pt=Ht.keyPath,Vt=Ht.autoIncrement,zt=u(Pt),Bt={},Vt={name:Ht.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Pt==null,compound:zt,keyPath:Pt,autoIncrement:Vt,unique:!0,extractKey:Ls(Pt)},indexes:cu(Ht.indexNames).map(function(Kt){return Ht.index(Kt)}).map(function(fe){var Qt=fe.name,se=fe.unique,Me=fe.multiEntry,fe=fe.keyPath,Me={name:Qt,compound:u(fe),keyPath:fe,unique:se,multiEntry:Me,extractKey:Ls(fe)};return Bt[ro(fe)]=Me}),getIndexByKeyPath:function(Kt){return Bt[ro(Kt)]}};return Bt[":id"]=Vt.primaryKey,Pt!=null&&(Bt[ro(Pt)]=Vt.primaryKey),Vt})},hasGetAll:0<At.length&&"getAll"in wt.objectStore(At[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Nt=$t.schema,Mt=$t.hasGetAll,$t=Nt.tables.map(it),jt={};return $t.forEach(function(Ht){return jt[Ht.name]=Ht}),{stack:"dbcore",transaction:R.transaction.bind(R),table:function(Ht){if(!jt[Ht])throw new Error("Table '".concat(Ht,"' not found"));return jt[Ht]},MIN_KEY:-1/0,MAX_KEY:vs(W),schema:Nt}}function hu(R,W,J,rt){var it=J.IDBKeyRange;return J.indexedDB,{dbcore:(rt=Pa(W,it,rt),R.dbcore.reduce(function(ht,wt){return wt=wt.create,r(r({},ht),wt(ht))},rt))}}function Go(R,rt){var J=rt.db,rt=hu(R._middlewares,J,R._deps,rt);R.core=rt.dbcore,R.tables.forEach(function(it){var ht=it.name;R.core.schema.tables.some(function(wt){return wt.name===ht})&&(it.core=R.core.table(ht),R[ht]instanceof R.Table&&(R[ht].core=it.core))})}function Ko(R,W,J,rt){J.forEach(function(it){var ht=rt[it];W.forEach(function(wt){var At=function Nt(Mt,$t){return m(Mt,$t)||(Mt=a(Mt))&&Nt(Mt,$t)}(wt,it);(!At||"value"in At&&At.value===void 0)&&(wt===R.Transaction.prototype||wt instanceof R.Transaction?p(wt,it,{get:function(){return this.table(it)},set:function(Nt){h(this,it,{value:Nt,writable:!0,configurable:!0,enumerable:!0})}}):wt[it]=new R.Table(it,ht))})})}function La(R,W){W.forEach(function(J){for(var rt in J)J[rt]instanceof R.Table&&delete J[rt]})}function Rs(R,W){return R._cfg.version-W._cfg.version}function no(R,W,J,rt){var it=R._dbSchema;J.objectStoreNames.contains("$meta")&&!it.$meta&&(it.$meta=Xo("$meta",fu("")[0],[]),R._storeNames.push("$meta"));var ht=R._createTransaction("readwrite",R._storeNames,it);ht.create(J),ht._completion.catch(rt);var wt=ht._reject.bind(ht),At=ne.transless||ne;Je(function(){return ne.trans=ht,ne.transless=At,W!==0?(Go(R,J),Mt=W,((Nt=ht).storeNames.includes("$meta")?Nt.table("$meta").get("version").then(function($t){return $t??Mt}):te.resolve(Mt)).then(function($t){return Ht=$t,Pt=ht,zt=J,Bt=[],$t=(jt=R)._versions,Vt=jt._dbSchema=Da(0,jt.idbdb,zt),($t=$t.filter(function(Kt){return Kt._cfg.version>=Ht})).length!==0?($t.forEach(function(Kt){Bt.push(function(){var Qt=Vt,se=Kt._cfg.dbschema;io(jt,Qt,zt),io(jt,se,zt),Vt=jt._dbSchema=se;var fe=Ds(Qt,se);fe.add.forEach(function(Re){Wi(zt,Re[0],Re[1].primKey,Re[1].indexes)}),fe.change.forEach(function(Re){if(Re.recreate)throw new O.Upgrade("Not yet support for changing primary key");var xe=zt.objectStore(Re.name);Re.add.forEach(function(Ne){return Is(xe,Ne)}),Re.change.forEach(function(Ne){xe.deleteIndex(Ne.name),Is(xe,Ne)}),Re.del.forEach(function(Ne){return xe.deleteIndex(Ne)})});var Me=Kt._cfg.contentUpgrade;if(Me&&Kt._cfg.version>Ht){Go(jt,zt),Pt._memoizedTables={};var Ie=P(se);fe.del.forEach(function(Re){Ie[Re]=Qt[Re]}),La(jt,[jt.Transaction.prototype]),Ko(jt,[jt.Transaction.prototype],o(Ie),Ie),Pt.schema=Ie;var Ae,Ee=B(Me);return Ee&&Ke(),fe=te.follow(function(){var Re;(Ae=Me(Pt))&&Ee&&(Re=He.bind(null,null),Ae.then(Re,Re))}),Ae&&typeof Ae.then=="function"?te.resolve(Ae):fe.then(function(){return Ae})}}),Bt.push(function(Qt){var se,fe,Me=Kt._cfg.dbschema;se=Me,fe=Qt,[].slice.call(fe.db.objectStoreNames).forEach(function(Ie){return se[Ie]==null&&fe.db.deleteObjectStore(Ie)}),La(jt,[jt.Transaction.prototype]),Ko(jt,[jt.Transaction.prototype],jt._storeNames,jt._dbSchema),Pt.schema=jt._dbSchema}),Bt.push(function(Qt){jt.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(jt.idbdb.version/10)===Kt._cfg.version?(jt.idbdb.deleteObjectStore("$meta"),delete jt._dbSchema.$meta,jt._storeNames=jt._storeNames.filter(function(se){return se!=="$meta"})):Qt.objectStore("$meta").put(Kt._cfg.version,"version"))})}),function Kt(){return Bt.length?te.resolve(Bt.shift()(Pt.idbtrans)).then(Kt):te.resolve()}().then(function(){Ra(Vt,zt)})):te.resolve();var jt,Ht,Pt,zt,Bt,Vt}).catch(wt)):(o(it).forEach(function($t){Wi(J,$t,it[$t].primKey,it[$t].indexes)}),Go(R,J),void te.follow(function(){return R.on.populate.fire(ht)}).catch(wt));var Nt,Mt})}function xc(R,W){Ra(R._dbSchema,W),W.db.version%10!=0||W.objectStoreNames.contains("$meta")||W.db.createObjectStore("$meta").add(Math.ceil(W.db.version/10-1),"version");var J=Da(0,R.idbdb,W);io(R,R._dbSchema,W);for(var rt=0,it=Ds(J,R._dbSchema).change;rt<it.length;rt++){var ht=function(wt){if(wt.change.length||wt.recreate)return console.warn("Unable to patch indexes of table ".concat(wt.name," because it has changes on the type of index or primary key.")),{value:void 0};var At=W.objectStore(wt.name);wt.add.forEach(function(Nt){St&&console.debug("Dexie upgrade patch: Creating missing index ".concat(wt.name,".").concat(Nt.src)),Is(At,Nt)})}(it[rt]);if(typeof ht=="object")return ht.value}}function Ds(R,W){var J,rt={del:[],add:[],change:[]};for(J in R)W[J]||rt.del.push(J);for(J in W){var it=R[J],ht=W[J];if(it){var wt={name:J,def:ht,recreate:!1,del:[],add:[],change:[]};if(""+(it.primKey.keyPath||"")!=""+(ht.primKey.keyPath||"")||it.primKey.auto!==ht.primKey.auto)wt.recreate=!0,rt.change.push(wt);else{var At=it.idxByName,Nt=ht.idxByName,Mt=void 0;for(Mt in At)Nt[Mt]||wt.del.push(Mt);for(Mt in Nt){var $t=At[Mt],jt=Nt[Mt];$t?$t.src!==jt.src&&wt.change.push(jt):wt.add.push(jt)}(0<wt.del.length||0<wt.add.length||0<wt.change.length)&&rt.change.push(wt)}}else rt.add.push([J,ht])}return rt}function Wi(R,W,J,rt){var it=R.db.createObjectStore(W,J.keyPath?{keyPath:J.keyPath,autoIncrement:J.auto}:{autoIncrement:J.auto});return rt.forEach(function(ht){return Is(it,ht)}),it}function Ra(R,W){o(R).forEach(function(J){W.db.objectStoreNames.contains(J)||(St&&console.debug("Dexie: Creating missing table",J),Wi(W,J,R[J].primKey,R[J].indexes))})}function Is(R,W){R.createIndex(W.name,W.keyPath,{unique:W.unique,multiEntry:W.multi})}function Da(R,W,J){var rt={};return b(W.objectStoreNames,0).forEach(function(it){for(var ht=J.objectStore(it),wt=El(uu(Mt=ht.keyPath),Mt||"",!0,!1,!!ht.autoIncrement,Mt&&typeof Mt!="string",!0),At=[],Nt=0;Nt<ht.indexNames.length;++Nt){var $t=ht.index(ht.indexNames[Nt]),Mt=$t.keyPath,$t=El($t.name,Mt,!!$t.unique,!!$t.multiEntry,!1,Mt&&typeof Mt!="string",!1);At.push($t)}rt[it]=Xo(it,wt,At)}),rt}function io(R,W,J){for(var rt=J.db.objectStoreNames,it=0;it<rt.length;++it){var ht=rt[it],wt=J.objectStore(ht);R._hasGetAll="getAll"in wt;for(var At=0;At<wt.indexNames.length;++At){var Nt=wt.indexNames[At],Mt=wt.index(Nt).keyPath,$t=typeof Mt=="string"?Mt:"["+b(Mt).join("+")+"]";!W[ht]||(Mt=W[ht].idxByName[$t])&&(Mt.name=Nt,delete W[ht].idxByName[$t],W[ht].idxByName[Nt]=Mt)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(R._hasGetAll=!1)}function fu(R){return R.split(",").map(function(W,J){var ht=W.split(":"),rt=(it=ht[1])===null||it===void 0?void 0:it.trim(),it=(W=ht[0].trim()).replace(/([&*]|\+\+)/g,""),ht=/^\[/.test(it)?it.match(/^\[(.*)\]$/)[1].split("+"):it;return El(it,ht||null,/\&/.test(W),/\*/.test(W),/\+\+/.test(W),u(ht),J===0,rt)})}var jl=(Fs.prototype._createTableSchema=Xo,Fs.prototype._parseIndexSyntax=fu,Fs.prototype._parseStoresSpec=function(R,W){var J=this;o(R).forEach(function(rt){if(R[rt]!==null){var it=J._parseIndexSyntax(R[rt]),ht=it.shift();if(!ht)throw new O.Schema("Invalid schema for table "+rt+": "+R[rt]);if(ht.unique=!0,ht.multi)throw new O.Schema("Primary key cannot be multiEntry*");it.forEach(function(wt){if(wt.auto)throw new O.Schema("Only primary key can be marked as autoIncrement (++)");if(!wt.keyPath)throw new O.Schema("Index must have a name and cannot be an empty string")}),it=J._createTableSchema(rt,ht,it),W[rt]=it}})},Fs.prototype.stores=function(J){var W=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,J):J;var J=W._versions,rt={},it={};return J.forEach(function(ht){l(rt,ht._cfg.storesSource),it=ht._cfg.dbschema={},ht._parseStoresSpec(rt,it)}),W._dbSchema=it,La(W,[W._allTables,W,W.Transaction.prototype]),Ko(W,[W._allTables,W,W.Transaction.prototype,this._cfg.tables],o(it),it),W._storeNames=o(it),this},Fs.prototype.upgrade=function(R){return this._cfg.contentUpgrade=kt(this._cfg.contentUpgrade||ct,R),this},Fs);function Fs(){}function Ia(R,W){var J=R._dbNamesDB;return J||(J=R._dbNamesDB=new Oi(Ze,{addons:[],indexedDB:R,IDBKeyRange:W})).version(1).stores({dbnames:"name"}),J.table("dbnames")}function Mo(R){return R&&typeof R.databases=="function"}function Zo(R){return Je(function(){return ne.letThrough=!0,R()})}function Jo(R){return!("from"in R)}var zn=function(R,W){if(!this){var J=new zn;return R&&"d"in R&&l(J,R),J}l(this,arguments.length?{d:1,from:R,to:1<arguments.length?W:R}:{d:0})};function Qo(R,W,J){var rt=Qe(W,J);if(!isNaN(rt)){if(0<rt)throw RangeError();if(Jo(R))return l(R,{from:W,to:J,d:1});var it=R.l,rt=R.r;if(Qe(J,R.from)<0)return it?Qo(it,W,J):R.l={from:W,to:J,d:1,l:null,r:null},so(R);if(0<Qe(W,R.to))return rt?Qo(rt,W,J):R.r={from:W,to:J,d:1,l:null,r:null},so(R);Qe(W,R.from)<0&&(R.from=W,R.l=null,R.d=rt?rt.d+1:1),0<Qe(J,R.to)&&(R.to=J,R.r=null,R.d=R.l?R.l.d+1:1),J=!R.r,it&&!R.l&&Bs(R,it),rt&&J&&Bs(R,rt)}}function Bs(R,W){Jo(W)||function J(rt,Nt){var ht=Nt.from,wt=Nt.to,At=Nt.l,Nt=Nt.r;Qo(rt,ht,wt),At&&J(rt,At),Nt&&J(rt,Nt)}(R,W)}function No(R,W){var J=Oo(W),rt=J.next();if(rt.done)return!1;for(var it=rt.value,ht=Oo(R),wt=ht.next(it.from),At=wt.value;!rt.done&&!wt.done;){if(Qe(At.from,it.to)<=0&&0<=Qe(At.to,it.from))return!0;Qe(it.from,At.from)<0?it=(rt=J.next(At.from)).value:At=(wt=ht.next(it.from)).value}return!1}function Oo(R){var W=Jo(R)?null:{s:0,n:R};return{next:function(J){for(var rt=0<arguments.length;W;)switch(W.s){case 0:if(W.s=1,rt)for(;W.n.l&&Qe(J,W.n.from)<0;)W={up:W,n:W.n.l,s:1};else for(;W.n.l;)W={up:W,n:W.n.l,s:1};case 1:if(W.s=2,!rt||Qe(J,W.n.to)<=0)return{value:W.n,done:!1};case 2:if(W.n.r){W.s=3,W={up:W,n:W.n.r,s:0};continue}case 3:W=W.up}return{done:!0}}}}function so(R){var W,J,rt=(((W=R.r)===null||W===void 0?void 0:W.d)||0)-(((J=R.l)===null||J===void 0?void 0:J.d)||0),it=1<rt?"r":rt<-1?"l":"";it&&(W=it=="r"?"l":"r",J=r({},R),rt=R[it],R.from=rt.from,R.to=rt.to,R[it]=rt[it],J[it]=rt[W],(R[W]=J).d=Fa(J)),R.d=Fa(R)}function Fa(J){var W=J.r,J=J.l;return(W?J?Math.max(W.d,J.d):W.d:J?J.d:0)+1}function Y(R,W){return o(W).forEach(function(J){R[J]?Bs(R[J],W[J]):R[J]=function rt(it){var ht,wt,At={};for(ht in it)d(it,ht)&&(wt=it[ht],At[ht]=!wt||typeof wt!="object"||$.has(wt.constructor)?wt:rt(wt));return At}(W[J])}),R}function lt(R,W){return R.all||W.all||Object.keys(R).some(function(J){return W[J]&&No(W[J],R[J])})}f(zn.prototype,((fi={add:function(R){return Bs(this,R),this},addKey:function(R){return Qo(this,R,R),this},addKeys:function(R){var W=this;return R.forEach(function(J){return Qo(W,J,J)}),this},hasKey:function(R){var W=Oo(this).next(R).value;return W&&Qe(W.from,R)<=0&&0<=Qe(W.to,R)}})[w]=function(){return Oo(this)},fi));var Ct={},Ot={},Gt=!1;function ae(R){Y(Ot,R),Gt||(Gt=!0,setTimeout(function(){Gt=!1,Se(Ot,!(Ot={}))},0))}function Se(R,W){W===void 0&&(W=!1);var J=new Set;if(R.all)for(var rt=0,it=Object.values(Ct);rt<it.length;rt++)Ge(wt=it[rt],R,J,W);else for(var ht in R){var wt,At=/^idb\:\/\/(.*)\/(.*)\//.exec(ht);At&&(ht=At[1],At=At[2],(wt=Ct["idb://".concat(ht,"/").concat(At)])&&Ge(wt,R,J,W))}J.forEach(function(Nt){return Nt()})}function Ge(R,W,J,rt){for(var it=[],ht=0,wt=Object.entries(R.queries.query);ht<wt.length;ht++){for(var At=wt[ht],Nt=At[0],Mt=[],$t=0,jt=At[1];$t<jt.length;$t++){var Ht=jt[$t];lt(W,Ht.obsSet)?Ht.subscribers.forEach(function(Vt){return J.add(Vt)}):rt&&Mt.push(Ht)}rt&&it.push([Nt,Mt])}if(rt)for(var Pt=0,zt=it;Pt<zt.length;Pt++){var Bt=zt[Pt],Nt=Bt[0],Mt=Bt[1];R.queries.query[Nt]=Mt}}function pr(R){var W=R._state,J=R._deps.indexedDB;if(W.isBeingOpened||R.idbdb)return W.dbReadyPromise.then(function(){return W.dbOpenError?Lr(W.dbOpenError):R});W.isBeingOpened=!0,W.dbOpenError=null,W.openComplete=!1;var rt=W.openCanceller,it=Math.round(10*R.verno),ht=!1;function wt(){if(W.openCanceller!==rt)throw new O.DatabaseClosed("db.open() was cancelled")}function At(){return new te(function(Ht,Pt){if(wt(),!J)throw new O.MissingAPI;var zt=R.name,Bt=W.autoSchema||!it?J.open(zt):J.open(zt,it);if(!Bt)throw new O.MissingAPI;Bt.onerror=ei(Pt),Bt.onblocked=Ue(R._fireOnBlocked),Bt.onupgradeneeded=Ue(function(Vt){var Kt;$t=Bt.transaction,W.autoSchema&&!R._options.allowEmptyDB?(Bt.onerror=Mi,$t.abort(),Bt.result.close(),(Kt=J.deleteDatabase(zt)).onsuccess=Kt.onerror=Ue(function(){Pt(new O.NoSuchDatabase("Database ".concat(zt," doesnt exist")))})):($t.onerror=ei(Pt),Vt=Vt.oldVersion>Math.pow(2,62)?0:Vt.oldVersion,jt=Vt<1,R.idbdb=Bt.result,ht&&xc(R,$t),no(R,Vt/10,$t,Pt))},Pt),Bt.onsuccess=Ue(function(){$t=null;var Vt,Kt,Qt,se,fe,Me=R.idbdb=Bt.result,Ie=b(Me.objectStoreNames);if(0<Ie.length)try{var Ae=Me.transaction((se=Ie).length===1?se[0]:se,"readonly");if(W.autoSchema)Kt=Me,Qt=Ae,(Vt=R).verno=Kt.version/10,Qt=Vt._dbSchema=Da(0,Kt,Qt),Vt._storeNames=b(Kt.objectStoreNames,0),Ko(Vt,[Vt._allTables],o(Qt),Qt);else if(io(R,R._dbSchema,Ae),((fe=Ds(Da(0,(fe=R).idbdb,Ae),fe._dbSchema)).add.length||fe.change.some(function(Ee){return Ee.add.length||Ee.change.length}))&&!ht)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Me.close(),it=Me.version+1,ht=!0,Ht(At());Go(R,Ae)}catch{}ge.push(R),Me.onversionchange=Ue(function(Ee){W.vcFired=!0,R.on("versionchange").fire(Ee)}),Me.onclose=Ue(function(){R.close({disableAutoOpen:!1})}),jt&&(fe=R._deps,Ae=zt,Me=fe.indexedDB,fe=fe.IDBKeyRange,Mo(Me)||Ae===Ze||Ia(Me,fe).put({name:Ae}).catch(ct)),Ht()},Pt)}).catch(function(Ht){switch(Ht==null?void 0:Ht.name){case"UnknownError":if(0<W.PR1398_maxLoop)return W.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),At();break;case"VersionError":if(0<it)return it=0,At()}return te.reject(Ht)})}var Nt,Mt=W.dbReadyResolve,$t=null,jt=!1;return te.race([rt,(typeof navigator>"u"?te.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Ht){function Pt(){return indexedDB.databases().finally(Ht)}Nt=setInterval(Pt,100),Pt()}).finally(function(){return clearInterval(Nt)}):Promise.resolve()).then(At)]).then(function(){return wt(),W.onReadyBeingFired=[],te.resolve(Zo(function(){return R.on.ready.fire(R.vip)})).then(function Ht(){if(0<W.onReadyBeingFired.length){var Pt=W.onReadyBeingFired.reduce(kt,ct);return W.onReadyBeingFired=[],te.resolve(Zo(function(){return Pt(R.vip)})).then(Ht)}})}).finally(function(){W.openCanceller===rt&&(W.onReadyBeingFired=null,W.isBeingOpened=!1)}).catch(function(Ht){W.dbOpenError=Ht;try{$t&&$t.abort()}catch{}return rt===W.openCanceller&&R._close(),Lr(Ht)}).finally(function(){W.openComplete=!0,Mt()}).then(function(){var Ht;return jt&&(Ht={},R.tables.forEach(function(Pt){Pt.schema.indexes.forEach(function(zt){zt.name&&(Ht["idb://".concat(R.name,"/").concat(Pt.name,"/").concat(zt.name)]=new zn(-1/0,[[[]]]))}),Ht["idb://".concat(R.name,"/").concat(Pt.name,"/")]=Ht["idb://".concat(R.name,"/").concat(Pt.name,"/:dels")]=new zn(-1/0,[[[]]])}),Vi(jo).fire(Ht),Se(Ht,!0)),R})}function Mr(R){function W(ht){return R.next(ht)}var J=it(W),rt=it(function(ht){return R.throw(ht)});function it(ht){return function(Nt){var At=ht(Nt),Nt=At.value;return At.done?Nt:Nt&&typeof Nt.then=="function"?Nt.then(J,rt):u(Nt)?Promise.all(Nt).then(J,rt):J(Nt)}}return it(W)()}function Cr(R,W,J){for(var rt=u(R)?R.slice():[R],it=0;it<J;++it)rt.push(W);return rt}var Vr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(R){return r(r({},R),{table:function(W){var J=R.table(W),rt=J.schema,it={},ht=[];function wt(jt,Ht,Pt){var zt=ro(jt),Bt=it[zt]=it[zt]||[],Vt=jt==null?0:typeof jt=="string"?1:jt.length,Kt=0<Ht,Kt=r(r({},Pt),{name:Kt?"".concat(zt,"(virtual-from:").concat(Pt.name,")"):Pt.name,lowLevelIndex:Pt,isVirtual:Kt,keyTail:Ht,keyLength:Vt,extractKey:Ls(jt),unique:!Kt&&Pt.unique});return Bt.push(Kt),Kt.isPrimaryKey||ht.push(Kt),1<Vt&&wt(Vt===2?jt[0]:jt.slice(0,Vt-1),Ht+1,Pt),Bt.sort(function(Qt,se){return Qt.keyTail-se.keyTail}),Kt}W=wt(rt.primaryKey.keyPath,0,rt.primaryKey),it[":id"]=[W];for(var At=0,Nt=rt.indexes;At<Nt.length;At++){var Mt=Nt[At];wt(Mt.keyPath,0,Mt)}function $t(jt){var Ht,Pt=jt.query.index;return Pt.isVirtual?r(r({},jt),{query:{index:Pt.lowLevelIndex,range:(Ht=jt.query.range,Pt=Pt.keyTail,{type:Ht.type===1?2:Ht.type,lower:Cr(Ht.lower,Ht.lowerOpen?R.MAX_KEY:R.MIN_KEY,Pt),lowerOpen:!0,upper:Cr(Ht.upper,Ht.upperOpen?R.MIN_KEY:R.MAX_KEY,Pt),upperOpen:!0})}}):jt}return r(r({},J),{schema:r(r({},rt),{primaryKey:W,indexes:ht,getIndexByKeyPath:function(jt){return(jt=it[ro(jt)])&&jt[0]}}),count:function(jt){return J.count($t(jt))},query:function(jt){return J.query($t(jt))},openCursor:function(jt){var Ht=jt.query.index,Pt=Ht.keyTail,zt=Ht.isVirtual,Bt=Ht.keyLength;return zt?J.openCursor($t(jt)).then(function(Kt){return Kt&&Vt(Kt)}):J.openCursor(jt);function Vt(Kt){return Object.create(Kt,{continue:{value:function(Qt){Qt!=null?Kt.continue(Cr(Qt,jt.reverse?R.MAX_KEY:R.MIN_KEY,Pt)):jt.unique?Kt.continue(Kt.key.slice(0,Bt).concat(jt.reverse?R.MIN_KEY:R.MAX_KEY,Pt)):Kt.continue()}},continuePrimaryKey:{value:function(Qt,se){Kt.continuePrimaryKey(Cr(Qt,R.MAX_KEY,Pt),se)}},primaryKey:{get:function(){return Kt.primaryKey}},key:{get:function(){var Qt=Kt.key;return Bt===1?Qt[0]:Qt.slice(0,Bt)}},value:{get:function(){return Kt.value}}})}}})}})}};function pn(R,W,J,rt){return J=J||{},rt=rt||"",o(R).forEach(function(it){var ht,wt,At;d(W,it)?(ht=R[it],wt=W[it],typeof ht=="object"&&typeof wt=="object"&&ht&&wt?(At=C(ht))!==C(wt)?J[rt+it]=W[it]:At==="Object"?pn(ht,wt,J,rt+it+"."):ht!==wt&&(J[rt+it]=W[it]):ht!==wt&&(J[rt+it]=W[it])):J[rt+it]=void 0}),o(W).forEach(function(it){d(R,it)||(J[rt+it]=W[it])}),J}function bn(R,W){return W.type==="delete"?W.keys:W.keys||W.values.map(R.extractKey)}var Rn={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(R){return r(r({},R),{table:function(W){var J=R.table(W),rt=J.schema.primaryKey;return r(r({},J),{mutate:function(it){var ht=ne.trans,wt=ht.table(W).hook,At=wt.deleting,Nt=wt.creating,Mt=wt.updating;switch(it.type){case"add":if(Nt.fire===ct)break;return ht._promise("readwrite",function(){return $t(it)},!0);case"put":if(Nt.fire===ct&&Mt.fire===ct)break;return ht._promise("readwrite",function(){return $t(it)},!0);case"delete":if(At.fire===ct)break;return ht._promise("readwrite",function(){return $t(it)},!0);case"deleteRange":if(At.fire===ct)break;return ht._promise("readwrite",function(){return function jt(Ht,Pt,zt){return J.query({trans:Ht,values:!1,query:{index:rt,range:Pt},limit:zt}).then(function(Bt){var Vt=Bt.result;return $t({type:"delete",keys:Vt,trans:Ht}).then(function(Kt){return 0<Kt.numFailures?Promise.reject(Kt.failures[0]):Vt.length<zt?{failures:[],numFailures:0,lastResult:void 0}:jt(Ht,r(r({},Pt),{lower:Vt[Vt.length-1],lowerOpen:!0}),zt)})})}(it.trans,it.range,1e4)},!0)}return J.mutate(it);function $t(jt){var Ht,Pt,zt,Bt=ne.trans,Vt=jt.keys||bn(rt,jt);if(!Vt)throw new Error("Keys missing");return(jt=jt.type==="add"||jt.type==="put"?r(r({},jt),{keys:Vt}):r({},jt)).type!=="delete"&&(jt.values=s([],jt.values)),jt.keys&&(jt.keys=s([],jt.keys)),Ht=J,zt=Vt,((Pt=jt).type==="add"?Promise.resolve([]):Ht.getMany({trans:Pt.trans,keys:zt,cache:"immutable"})).then(function(Kt){var Qt=Vt.map(function(se,fe){var Me,Ie,Ae,Ee=Kt[fe],Re={onerror:null,onsuccess:null};return jt.type==="delete"?At.fire.call(Re,se,Ee,Bt):jt.type==="add"||Ee===void 0?(Me=Nt.fire.call(Re,se,jt.values[fe],Bt),se==null&&Me!=null&&(jt.keys[fe]=se=Me,rt.outbound||U(jt.values[fe],rt.keyPath,se))):(Me=pn(Ee,jt.values[fe]),(Ie=Mt.fire.call(Re,Me,se,Ee,Bt))&&(Ae=jt.values[fe],Object.keys(Ie).forEach(function(xe){d(Ae,xe)?Ae[xe]=Ie[xe]:U(Ae,xe,Ie[xe])}))),Re});return J.mutate(jt).then(function(se){for(var fe=se.failures,Me=se.results,Ie=se.numFailures,se=se.lastResult,Ae=0;Ae<Vt.length;++Ae){var Ee=(Me||Vt)[Ae],Re=Qt[Ae];Ee==null?Re.onerror&&Re.onerror(fe[Ae]):Re.onsuccess&&Re.onsuccess(jt.type==="put"&&Kt[Ae]?jt.values[Ae]:Ee)}return{failures:fe,results:Me,numFailures:Ie,lastResult:se}}).catch(function(se){return Qt.forEach(function(fe){return fe.onerror&&fe.onerror(se)}),Promise.reject(se)})})}}})}})}};function ri(R,W,J){try{if(!W||W.keys.length<R.length)return null;for(var rt=[],it=0,ht=0;it<W.keys.length&&ht<R.length;++it)Qe(W.keys[it],R[ht])===0&&(rt.push(J?T(W.values[it]):W.values[it]),++ht);return rt.length===R.length?rt:null}catch{return null}}var Yn={stack:"dbcore",level:-1,create:function(R){return{table:function(W){var J=R.table(W);return r(r({},J),{getMany:function(rt){if(!rt.cache)return J.getMany(rt);var it=ri(rt.keys,rt.trans._cache,rt.cache==="clone");return it?te.resolve(it):J.getMany(rt).then(function(ht){return rt.trans._cache={keys:rt.keys,values:rt.cache==="clone"?T(ht):ht},ht})},mutate:function(rt){return rt.type!=="add"&&(rt.trans._cache=null),J.mutate(rt)}})}}}};function is(R,W){return R.trans.mode==="readonly"&&!!R.subscr&&!R.trans.explicit&&R.trans.db._options.cache!=="disabled"&&!W.schema.primaryKey.outbound}function Ni(R,W){switch(R){case"query":return W.values&&!W.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var zs={stack:"dbcore",level:0,name:"Observability",create:function(R){var W=R.schema.name,J=new zn(R.MIN_KEY,R.MAX_KEY);return r(r({},R),{transaction:function(rt,it,ht){if(ne.subscr&&it!=="readonly")throw new O.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ne.querier));return R.transaction(rt,it,ht)},table:function(rt){var it=R.table(rt),ht=it.schema,wt=ht.primaryKey,jt=ht.indexes,At=wt.extractKey,Nt=wt.outbound,Mt=wt.autoIncrement&&jt.filter(function(Pt){return Pt.compound&&Pt.keyPath.includes(wt.keyPath)}),$t=r(r({},it),{mutate:function(Pt){function zt(xe){return xe="idb://".concat(W,"/").concat(rt,"/").concat(xe),se[xe]||(se[xe]=new zn)}var Bt,Vt,Kt,Qt=Pt.trans,se=Pt.mutatedParts||(Pt.mutatedParts={}),fe=zt(""),Me=zt(":dels"),Ie=Pt.type,Re=Pt.type==="deleteRange"?[Pt.range]:Pt.type==="delete"?[Pt.keys]:Pt.values.length<50?[bn(wt,Pt).filter(function(xe){return xe}),Pt.values]:[],Ae=Re[0],Ee=Re[1],Re=Pt.trans._cache;return u(Ae)?(fe.addKeys(Ae),(Re=Ie==="delete"||Ae.length===Ee.length?ri(Ae,Re):null)||Me.addKeys(Ae),(Re||Ee)&&(Bt=zt,Vt=Re,Kt=Ee,ht.indexes.forEach(function(xe){var Ne=Bt(xe.name||"");function or(Er){return Er!=null?xe.extractKey(Er):null}function dr(Er){return xe.multiEntry&&u(Er)?Er.forEach(function(ni){return Ne.addKey(ni)}):Ne.addKey(Er)}(Vt||Kt).forEach(function(Er,Un){var xr=Vt&&or(Vt[Un]),Un=Kt&&or(Kt[Un]);Qe(xr,Un)!==0&&(xr!=null&&dr(xr),Un!=null&&dr(Un))})}))):Ae?(Ee={from:(Ee=Ae.lower)!==null&&Ee!==void 0?Ee:R.MIN_KEY,to:(Ee=Ae.upper)!==null&&Ee!==void 0?Ee:R.MAX_KEY},Me.add(Ee),fe.add(Ee)):(fe.add(J),Me.add(J),ht.indexes.forEach(function(xe){return zt(xe.name).add(J)})),it.mutate(Pt).then(function(xe){return!Ae||Pt.type!=="add"&&Pt.type!=="put"||(fe.addKeys(xe.results),Mt&&Mt.forEach(function(Ne){for(var or=Pt.values.map(function(xr){return Ne.extractKey(xr)}),dr=Ne.keyPath.findIndex(function(xr){return xr===wt.keyPath}),Er=0,ni=xe.results.length;Er<ni;++Er)or[Er][dr]=xe.results[Er];zt(Ne.name).addKeys(or)})),Qt.mutatedParts=Y(Qt.mutatedParts||{},se),xe})}}),jt=function(zt){var Bt=zt.query,zt=Bt.index,Bt=Bt.range;return[zt,new zn((zt=Bt.lower)!==null&&zt!==void 0?zt:R.MIN_KEY,(Bt=Bt.upper)!==null&&Bt!==void 0?Bt:R.MAX_KEY)]},Ht={get:function(Pt){return[wt,new zn(Pt.key)]},getMany:function(Pt){return[wt,new zn().addKeys(Pt.keys)]},count:jt,query:jt,openCursor:jt};return o(Ht).forEach(function(Pt){$t[Pt]=function(zt){var Bt=ne.subscr,Vt=!!Bt,Kt=is(ne,it)&&Ni(Pt,zt)?zt.obsSet={}:Bt;if(Vt){var Qt=function(Ee){return Ee="idb://".concat(W,"/").concat(rt,"/").concat(Ee),Kt[Ee]||(Kt[Ee]=new zn)},se=Qt(""),fe=Qt(":dels"),Bt=Ht[Pt](zt),Vt=Bt[0],Bt=Bt[1];if((Pt==="query"&&Vt.isPrimaryKey&&!zt.values?fe:Qt(Vt.name||"")).add(Bt),!Vt.isPrimaryKey){if(Pt!=="count"){var Me=Pt==="query"&&Nt&&zt.values&&it.query(r(r({},zt),{values:!1}));return it[Pt].apply(this,arguments).then(function(Ee){if(Pt==="query"){if(Nt&&zt.values)return Me.then(function(or){return or=or.result,se.addKeys(or),Ee});var Re=zt.values?Ee.result.map(At):Ee.result;(zt.values?se:fe).addKeys(Re)}else if(Pt==="openCursor"){var xe=Ee,Ne=zt.values;return xe&&Object.create(xe,{key:{get:function(){return fe.addKey(xe.primaryKey),xe.key}},primaryKey:{get:function(){var or=xe.primaryKey;return fe.addKey(or),or}},value:{get:function(){return Ne&&se.addKey(xe.primaryKey),xe.value}}})}return Ee})}fe.add(J)}}return it[Pt].apply(this,arguments)}}),$t}})}};function Ml(R,W,J){if(J.numFailures===0)return W;if(W.type==="deleteRange")return null;var rt=W.keys?W.keys.length:"values"in W&&W.values?W.values.length:1;return J.numFailures===rt?null:(W=r({},W),u(W.keys)&&(W.keys=W.keys.filter(function(it,ht){return!(ht in J.failures)})),"values"in W&&u(W.values)&&(W.values=W.values.filter(function(it,ht){return!(ht in J.failures)})),W)}function ta(R,W){return J=R,((rt=W).lower===void 0||(rt.lowerOpen?0<Qe(J,rt.lower):0<=Qe(J,rt.lower)))&&(R=R,(W=W).upper===void 0||(W.upperOpen?Qe(R,W.upper)<0:Qe(R,W.upper)<=0));var J,rt}function Ba(R,W,Ht,rt,it,ht){if(!Ht||Ht.length===0)return R;var wt=W.query.index,At=wt.multiEntry,Nt=W.query.range,Mt=rt.schema.primaryKey.extractKey,$t=wt.extractKey,jt=(wt.lowLevelIndex||wt).extractKey,Ht=Ht.reduce(function(Pt,zt){var Bt=Pt,Vt=[];if(zt.type==="add"||zt.type==="put")for(var Kt=new zn,Qt=zt.values.length-1;0<=Qt;--Qt){var se,fe=zt.values[Qt],Me=Mt(fe);Kt.hasKey(Me)||(se=$t(fe),(At&&u(se)?se.some(function(xe){return ta(xe,Nt)}):ta(se,Nt))&&(Kt.addKey(Me),Vt.push(fe)))}switch(zt.type){case"add":var Ie=new zn().addKeys(W.values?Pt.map(function(Ne){return Mt(Ne)}):Pt),Bt=Pt.concat(W.values?Vt.filter(function(Ne){return Ne=Mt(Ne),!Ie.hasKey(Ne)&&(Ie.addKey(Ne),!0)}):Vt.map(function(Ne){return Mt(Ne)}).filter(function(Ne){return!Ie.hasKey(Ne)&&(Ie.addKey(Ne),!0)}));break;case"put":var Ae=new zn().addKeys(zt.values.map(function(Ne){return Mt(Ne)}));Bt=Pt.filter(function(Ne){return!Ae.hasKey(W.values?Mt(Ne):Ne)}).concat(W.values?Vt:Vt.map(function(Ne){return Mt(Ne)}));break;case"delete":var Ee=new zn().addKeys(zt.keys);Bt=Pt.filter(function(Ne){return!Ee.hasKey(W.values?Mt(Ne):Ne)});break;case"deleteRange":var Re=zt.range;Bt=Pt.filter(function(Ne){return!ta(Mt(Ne),Re)})}return Bt},R);return Ht===R?R:(Ht.sort(function(Pt,zt){return Qe(jt(Pt),jt(zt))||Qe(Mt(Pt),Mt(zt))}),W.limit&&W.limit<1/0&&(Ht.length>W.limit?Ht.length=W.limit:R.length===W.limit&&Ht.length<W.limit&&(it.dirty=!0)),ht?Object.freeze(Ht):Ht)}function ea(R,W){return Qe(R.lower,W.lower)===0&&Qe(R.upper,W.upper)===0&&!!R.lowerOpen==!!W.lowerOpen&&!!R.upperOpen==!!W.upperOpen}function Nl(R,W){return function(J,rt,it,ht){if(J===void 0)return rt!==void 0?-1:0;if(rt===void 0)return 1;if((rt=Qe(J,rt))===0){if(it&&ht)return 0;if(it)return 1;if(ht)return-1}return rt}(R.lower,W.lower,R.lowerOpen,W.lowerOpen)<=0&&0<=function(J,rt,it,ht){if(J===void 0)return rt!==void 0?1:0;if(rt===void 0)return-1;if((rt=Qe(J,rt))===0){if(it&&ht)return 0;if(it)return-1;if(ht)return 1}return rt}(R.upper,W.upper,R.upperOpen,W.upperOpen)}function Ol(R,W,J,rt){R.subscribers.add(J),rt.addEventListener("abort",function(){var it,ht;R.subscribers.delete(J),R.subscribers.size===0&&(it=R,ht=W,setTimeout(function(){it.subscribers.size===0&&x(ht,it)},3e3))})}var za={stack:"dbcore",level:0,name:"Cache",create:function(R){var W=R.schema.name;return r(r({},R),{transaction:function(J,rt,it){var ht,wt,At=R.transaction(J,rt,it);return rt==="readwrite"&&(wt=(ht=new AbortController).signal,it=function(Nt){return function(){if(ht.abort(),rt==="readwrite"){for(var Mt=new Set,$t=0,jt=J;$t<jt.length;$t++){var Ht=jt[$t],Pt=Ct["idb://".concat(W,"/").concat(Ht)];if(Pt){var zt=R.table(Ht),Bt=Pt.optimisticOps.filter(function(Ne){return Ne.trans===At});if(At._explicit&&Nt&&At.mutatedParts)for(var Vt=0,Kt=Object.values(Pt.queries.query);Vt<Kt.length;Vt++)for(var Qt=0,se=(Ie=Kt[Vt]).slice();Qt<se.length;Qt++)lt((Ae=se[Qt]).obsSet,At.mutatedParts)&&(x(Ie,Ae),Ae.subscribers.forEach(function(Ne){return Mt.add(Ne)}));else if(0<Bt.length){Pt.optimisticOps=Pt.optimisticOps.filter(function(Ne){return Ne.trans!==At});for(var fe=0,Me=Object.values(Pt.queries.query);fe<Me.length;fe++)for(var Ie,Ae,Ee,Re=0,xe=(Ie=Me[fe]).slice();Re<xe.length;Re++)(Ae=xe[Re]).res!=null&&At.mutatedParts&&(Nt&&!Ae.dirty?(Ee=Object.isFrozen(Ae.res),Ee=Ba(Ae.res,Ae.req,Bt,zt,Ae,Ee),Ae.dirty?(x(Ie,Ae),Ae.subscribers.forEach(function(Ne){return Mt.add(Ne)})):Ee!==Ae.res&&(Ae.res=Ee,Ae.promise=te.resolve({result:Ee}))):(Ae.dirty&&x(Ie,Ae),Ae.subscribers.forEach(function(Ne){return Mt.add(Ne)})))}}}Mt.forEach(function(Ne){return Ne()})}}},At.addEventListener("abort",it(!1),{signal:wt}),At.addEventListener("error",it(!1),{signal:wt}),At.addEventListener("complete",it(!0),{signal:wt})),At},table:function(J){var rt=R.table(J),it=rt.schema.primaryKey;return r(r({},rt),{mutate:function(ht){var wt=ne.trans;if(it.outbound||wt.db._options.cache==="disabled"||wt.explicit||wt.idbtrans.mode!=="readwrite")return rt.mutate(ht);var At=Ct["idb://".concat(W,"/").concat(J)];return At?(wt=rt.mutate(ht),ht.type!=="add"&&ht.type!=="put"||!(50<=ht.values.length||bn(it,ht).some(function(Nt){return Nt==null}))?(At.optimisticOps.push(ht),ht.mutatedParts&&ae(ht.mutatedParts),wt.then(function(Nt){0<Nt.numFailures&&(x(At.optimisticOps,ht),(Nt=Ml(0,ht,Nt))&&At.optimisticOps.push(Nt),ht.mutatedParts&&ae(ht.mutatedParts))}),wt.catch(function(){x(At.optimisticOps,ht),ht.mutatedParts&&ae(ht.mutatedParts)})):wt.then(function(Nt){var Mt=Ml(0,r(r({},ht),{values:ht.values.map(function($t,jt){var Ht;return Nt.failures[jt]?$t:($t=(Ht=it.keyPath)!==null&&Ht!==void 0&&Ht.includes(".")?T($t):r({},$t),U($t,it.keyPath,Nt.results[jt]),$t)})}),Nt);At.optimisticOps.push(Mt),queueMicrotask(function(){return ht.mutatedParts&&ae(ht.mutatedParts)})}),wt):rt.mutate(ht)},query:function(ht){if(!is(ne,rt)||!Ni("query",ht))return rt.query(ht);var wt=((Mt=ne.trans)===null||Mt===void 0?void 0:Mt.db._options.cache)==="immutable",jt=ne,At=jt.requery,Nt=jt.signal,Mt=function(zt,Bt,Vt,Kt){var Qt=Ct["idb://".concat(zt,"/").concat(Bt)];if(!Qt)return[];if(!(Bt=Qt.queries[Vt]))return[null,!1,Qt,null];var se=Bt[(Kt.query?Kt.query.index.name:null)||""];if(!se)return[null,!1,Qt,null];switch(Vt){case"query":var fe=se.find(function(Me){return Me.req.limit===Kt.limit&&Me.req.values===Kt.values&&ea(Me.req.query.range,Kt.query.range)});return fe?[fe,!0,Qt,se]:[se.find(function(Me){return("limit"in Me.req?Me.req.limit:1/0)>=Kt.limit&&(!Kt.values||Me.req.values)&&Nl(Me.req.query.range,Kt.query.range)}),!1,Qt,se];case"count":return fe=se.find(function(Me){return ea(Me.req.query.range,Kt.query.range)}),[fe,!!fe,Qt,se]}}(W,J,"query",ht),$t=Mt[0],jt=Mt[1],Ht=Mt[2],Pt=Mt[3];return $t&&jt?$t.obsSet=ht.obsSet:(jt=rt.query(ht).then(function(zt){var Bt=zt.result;if($t&&($t.res=Bt),wt){for(var Vt=0,Kt=Bt.length;Vt<Kt;++Vt)Object.freeze(Bt[Vt]);Object.freeze(Bt)}else zt.result=T(Bt);return zt}).catch(function(zt){return Pt&&$t&&x(Pt,$t),Promise.reject(zt)}),$t={obsSet:ht.obsSet,promise:jt,subscribers:new Set,type:"query",req:ht,dirty:!1},Pt?Pt.push($t):(Pt=[$t],(Ht=Ht||(Ct["idb://".concat(W,"/").concat(J)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[ht.query.index.name||""]=Pt)),Ol($t,Pt,At,Nt),$t.promise.then(function(zt){return{result:Ba(zt.result,ht,Ht==null?void 0:Ht.optimisticOps,rt,$t,wt)}})}})}})}};function Dn(R,W){return new Proxy(R,{get:function(J,rt,it){return rt==="db"?W:Reflect.get(J,rt,it)}})}var Oi=(cn.prototype.version=function(R){if(isNaN(R)||R<.1)throw new O.Type("Given version is not a positive number");if(R=Math.round(10*R)/10,this.idbdb||this._state.isBeingOpened)throw new O.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,R);var W=this._versions,J=W.filter(function(rt){return rt._cfg.version===R})[0];return J||(J=new this.Version(R),W.push(J),W.sort(Rs),J.stores({}),this._state.autoSchema=!1,J)},cn.prototype._whenReady=function(R){var W=this;return this.idbdb&&(this._state.openComplete||ne.letThrough||this._vip)?R():new te(function(J,rt){if(W._state.openComplete)return rt(new O.DatabaseClosed(W._state.dbOpenError));if(!W._state.isBeingOpened){if(!W._state.autoOpen)return void rt(new O.DatabaseClosed);W.open().catch(ct)}W._state.dbReadyPromise.then(J,rt)}).then(R)},cn.prototype.use=function(R){var W=R.stack,J=R.create,rt=R.level,it=R.name;return it&&this.unuse({stack:W,name:it}),R=this._middlewares[W]||(this._middlewares[W]=[]),R.push({stack:W,create:J,level:rt??10,name:it}),R.sort(function(ht,wt){return ht.level-wt.level}),this},cn.prototype.unuse=function(R){var W=R.stack,J=R.name,rt=R.create;return W&&this._middlewares[W]&&(this._middlewares[W]=this._middlewares[W].filter(function(it){return rt?it.create!==rt:!!J&&it.name!==J})),this},cn.prototype.open=function(){var R=this;return Rr(we,function(){return pr(R)})},cn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var R=this._state,W=ge.indexOf(this);if(0<=W&&ge.splice(W,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}R.isBeingOpened||(R.dbReadyPromise=new te(function(J){R.dbReadyResolve=J}),R.openCanceller=new te(function(J,rt){R.cancelOpen=rt}))},cn.prototype.close=function(J){var W=(J===void 0?{disableAutoOpen:!0}:J).disableAutoOpen,J=this._state;W?(J.isBeingOpened&&J.cancelOpen(new O.DatabaseClosed),this._close(),J.autoOpen=!1,J.dbOpenError=new O.DatabaseClosed):(this._close(),J.autoOpen=this._options.autoOpen||J.isBeingOpened,J.openComplete=!1,J.dbOpenError=null)},cn.prototype.delete=function(R){var W=this;R===void 0&&(R={disableAutoOpen:!0});var J=0<arguments.length&&typeof arguments[0]!="object",rt=this._state;return new te(function(it,ht){function wt(){W.close(R);var At=W._deps.indexedDB.deleteDatabase(W.name);At.onsuccess=Ue(function(){var Nt,Mt,$t;Nt=W._deps,Mt=W.name,$t=Nt.indexedDB,Nt=Nt.IDBKeyRange,Mo($t)||Mt===Ze||Ia($t,Nt).delete(Mt).catch(ct),it()}),At.onerror=ei(ht),At.onblocked=W._fireOnBlocked}if(J)throw new O.InvalidArgument("Invalid closeOptions argument to db.delete()");rt.isBeingOpened?rt.dbReadyPromise.then(wt):wt()})},cn.prototype.backendDB=function(){return this.idbdb},cn.prototype.isOpen=function(){return this.idbdb!==null},cn.prototype.hasBeenClosed=function(){var R=this._state.dbOpenError;return R&&R.name==="DatabaseClosed"},cn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},cn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(cn.prototype,"tables",{get:function(){var R=this;return o(this._allTables).map(function(W){return R._allTables[W]})},enumerable:!1,configurable:!0}),cn.prototype.transaction=function(){var R=(function(W,J,rt){var it=arguments.length;if(it<2)throw new O.InvalidArgument("Too few arguments");for(var ht=new Array(it-1);--it;)ht[it-1]=arguments[it];return rt=ht.pop(),[W,q(ht),rt]}).apply(this,arguments);return this._transaction.apply(this,R)},cn.prototype._transaction=function(R,W,J){var rt=this,it=ne.trans;it&&it.db===this&&R.indexOf("!")===-1||(it=null);var ht,wt,At=R.indexOf("?")!==-1;R=R.replace("!","").replace("?","");try{if(wt=W.map(function(Mt){if(Mt=Mt instanceof rt.Table?Mt.name:Mt,typeof Mt!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Mt}),R=="r"||R===je)ht=je;else{if(R!="rw"&&R!=Pe)throw new O.InvalidArgument("Invalid transaction mode: "+R);ht=Pe}if(it){if(it.mode===je&&ht===Pe){if(!At)throw new O.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");it=null}it&&wt.forEach(function(Mt){if(it&&it.storeNames.indexOf(Mt)===-1){if(!At)throw new O.SubTransaction("Table "+Mt+" not included in parent transaction.");it=null}}),At&&it&&!it.active&&(it=null)}}catch(Mt){return it?it._promise(null,function($t,jt){jt(Mt)}):Lr(Mt)}var Nt=(function Mt($t,jt,Ht,Pt,zt){return te.resolve().then(function(){var Bt=ne.transless||ne,Vt=$t._createTransaction(jt,Ht,$t._dbSchema,Pt);if(Vt.explicit=!0,Bt={trans:Vt,transless:Bt},Pt)Vt.idbtrans=Pt.idbtrans;else try{Vt.create(),Vt.idbtrans._explicit=!0,$t._state.PR1398_maxLoop=3}catch(se){return se.name===Z.InvalidState&&$t.isOpen()&&0<--$t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),$t.close({disableAutoOpen:!1}),$t.open().then(function(){return Mt($t,jt,Ht,null,zt)})):Lr(se)}var Kt,Qt=B(zt);return Qt&&Ke(),Bt=te.follow(function(){var se;(Kt=zt.call(Vt,Vt))&&(Qt?(se=He.bind(null,null),Kt.then(se,se)):typeof Kt.next=="function"&&typeof Kt.throw=="function"&&(Kt=Mr(Kt)))},Bt),(Kt&&typeof Kt.then=="function"?te.resolve(Kt).then(function(se){return Vt.active?se:Lr(new O.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Bt.then(function(){return Kt})).then(function(se){return Pt&&Vt._resolve(),Vt._completion.then(function(){return se})}).catch(function(se){return Vt._reject(se),Lr(se)})})}).bind(null,this,ht,wt,it,J);return it?it._promise(ht,Nt,"lock"):ne.trans?Rr(ne.transless,function(){return rt._whenReady(Nt)}):this._whenReady(Nt)},cn.prototype.table=function(R){if(!d(this._allTables,R))throw new O.InvalidTable("Table ".concat(R," does not exist"));return this._allTables[R]},cn);function cn(R,W){var J=this;this._middlewares={},this.verno=0;var rt=cn.dependencies;this._options=W=r({addons:cn.addons,autoOpen:!0,indexedDB:rt.indexedDB,IDBKeyRange:rt.IDBKeyRange,cache:"cloned"},W),this._deps={indexedDB:W.indexedDB,IDBKeyRange:W.IDBKeyRange},rt=W.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var it,ht,wt,At,Nt,Mt={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ct,dbReadyPromise:null,cancelOpen:ct,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:W.autoOpen};Mt.dbReadyPromise=new te(function(jt){Mt.dbReadyResolve=jt}),Mt.openCanceller=new te(function(jt,Ht){Mt.cancelOpen=Ht}),this._state=Mt,this.name=R,this.on=fn(this,"populate","blocked","versionchange","close",{ready:[kt,ct]}),this.once=function(jt,Ht){var Pt=function(){for(var zt=[],Bt=0;Bt<arguments.length;Bt++)zt[Bt]=arguments[Bt];J.on(jt).unsubscribe(Pt),Ht.apply(J,zt)};return J.on(jt,Pt)},this.on.ready.subscribe=v(this.on.ready.subscribe,function(jt){return function(Ht,Pt){cn.vip(function(){var zt,Bt=J._state;Bt.openComplete?(Bt.dbOpenError||te.resolve().then(Ht),Pt&&jt(Ht)):Bt.onReadyBeingFired?(Bt.onReadyBeingFired.push(Ht),Pt&&jt(Ht)):(jt(Ht),zt=J,Pt||jt(function Vt(){zt.on.ready.unsubscribe(Ht),zt.on.ready.unsubscribe(Vt)}))})}}),this.Collection=(it=this,ui(rs.prototype,function(Kt,Vt){this.db=it;var Pt=wr,zt=null;if(Vt)try{Pt=Vt()}catch(Qt){zt=Qt}var Bt=Kt._ctx,Vt=Bt.table,Kt=Vt.hook.reading.fire;this._ctx={table:Vt,index:Bt.index,isPrimKey:!Bt.index||Vt.schema.primKey.keyPath&&Bt.index===Vt.schema.primKey.name,range:Pt,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:zt,or:Bt.or,valueMapper:Kt!==ot?Kt:null}})),this.Table=(ht=this,ui(Pn.prototype,function(jt,Ht,Pt){this.db=ht,this._tx=Pt,this.name=jt,this.schema=Ht,this.hook=ht._allTables[jt]?ht._allTables[jt].hook:fn(null,{creating:[st,ct],reading:[mt,ot],updating:[vt,ct],deleting:[at,ct]})})),this.Transaction=(wt=this,ui(Al.prototype,function(jt,Ht,Pt,zt,Bt){var Vt=this;jt!=="readonly"&&Ht.forEach(function(Kt){Kt=(Kt=Pt[Kt])===null||Kt===void 0?void 0:Kt.yProps,Kt&&(Ht=Ht.concat(Kt.map(function(Qt){return Qt.updatesTable})))}),this.db=wt,this.mode=jt,this.storeNames=Ht,this.schema=Pt,this.chromeTransactionDurability=zt,this.idbtrans=null,this.on=fn(this,"complete","error","abort"),this.parent=Bt||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new te(function(Kt,Qt){Vt._resolve=Kt,Vt._reject=Qt}),this._completion.then(function(){Vt.active=!1,Vt.on.complete.fire()},function(Kt){var Qt=Vt.active;return Vt.active=!1,Vt.on.error.fire(Kt),Vt.parent?Vt.parent._reject(Kt):Qt&&Vt.idbtrans&&Vt.idbtrans.abort(),Lr(Kt)})})),this.Version=(At=this,ui(jl.prototype,function(jt){this.db=At,this._cfg={version:jt,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Nt=this,ui(vr.prototype,function(jt,Ht,Pt){if(this.db=Nt,this._ctx={table:jt,index:Ht===":id"?null:Ht,or:Pt},this._cmp=this._ascending=Qe,this._descending=function(zt,Bt){return Qe(Bt,zt)},this._max=function(zt,Bt){return 0<Qe(zt,Bt)?zt:Bt},this._min=function(zt,Bt){return Qe(zt,Bt)<0?zt:Bt},this._IDBKeyRange=Nt._deps.IDBKeyRange,!this._IDBKeyRange)throw new O.MissingAPI})),this.on("versionchange",function(jt){0<jt.newVersion?console.warn("Another connection wants to upgrade database '".concat(J.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(J.name,"'. Closing db now to resume the delete request.")),J.close({disableAutoOpen:!1})}),this.on("blocked",function(jt){!jt.newVersion||jt.newVersion<jt.oldVersion?console.warn("Dexie.delete('".concat(J.name,"') was blocked")):console.warn("Upgrade '".concat(J.name,"' blocked by other connection holding version ").concat(jt.oldVersion/10))}),this._maxKey=vs(W.IDBKeyRange),this._createTransaction=function(jt,Ht,Pt,zt){return new J.Transaction(jt,Ht,Pt,J._options.chromeTransactionDurability,zt)},this._fireOnBlocked=function(jt){J.on("blocked").fire(jt),ge.filter(function(Ht){return Ht.name===J.name&&Ht!==J&&!Ht._state.vcFired}).map(function(Ht){return Ht.on("versionchange").fire(jt)})},this.use(Yn),this.use(za),this.use(zs),this.use(Vr),this.use(Rn);var $t=new Proxy(this,{get:function(jt,Ht,Pt){if(Ht==="_vip")return!0;if(Ht==="table")return function(Bt){return Dn(J.table(Bt),$t)};var zt=Reflect.get(jt,Ht,Pt);return zt instanceof Pn?Dn(zt,$t):Ht==="tables"?zt.map(function(Bt){return Dn(Bt,$t)}):Ht==="_createTransaction"?function(){return Dn(zt.apply(this,arguments),$t)}:zt}});this.vip=$t,rt.forEach(function(jt){return jt(J)})}var oo,fi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Pi=(Pl.prototype.subscribe=function(R,W,J){return this._subscribe(R&&typeof R!="function"?R:{next:R,error:W,complete:J})},Pl.prototype[fi]=function(){return this},Pl);function Pl(R){this._subscribe=R}try{oo={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{oo={indexedDB:null,IDBKeyRange:null}}function Ua(R){var W,J=!1,rt=new Pi(function(it){var ht=B(R),wt,At=!1,Nt={},Mt={},$t={get closed(){return At},unsubscribe:function(){At||(At=!0,wt&&wt.abort(),jt&&Vi.storagemutated.unsubscribe(Pt))}};it.start&&it.start($t);var jt=!1,Ht=function(){return Qr(zt)},Pt=function(Bt){Y(Nt,Bt),lt(Mt,Nt)&&Ht()},zt=function(){var Bt,Vt,Kt;!At&&oo.indexedDB&&(Nt={},Bt={},wt&&wt.abort(),wt=new AbortController,Kt=function(Qt){var se=jr();try{ht&&Ke();var fe=Je(R,Qt);return fe=ht?fe.finally(He):fe}finally{se&&rr()}}(Vt={subscr:Bt,signal:wt.signal,requery:Ht,querier:R,trans:null}),Promise.resolve(Kt).then(function(Qt){J=!0,W=Qt,At||Vt.signal.aborted||(Nt={},function(se){for(var fe in se)if(d(se,fe))return;return 1}(Mt=Bt)||jt||(Vi(jo,Pt),jt=!0),Qr(function(){return!At&&it.next&&it.next(Qt)}))},function(Qt){J=!1,["DatabaseClosedError","AbortError"].includes(Qt==null?void 0:Qt.name)||At||Qr(function(){At||it.error&&it.error(Qt)})}))};return setTimeout(Ht,0),$t});return rt.hasValue=function(){return J},rt.getValue=function(){return W},rt}var Us=Oi;function Li(R){var W=xs;try{xs=!0,Vi.storagemutated.fire(R),Se(R,!0)}finally{xs=W}}f(Us,r(r({},nt),{delete:function(R){return new Us(R,{addons:[]}).delete()},exists:function(R){return new Us(R,{addons:[]}).open().then(function(W){return W.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(R){try{return W=Us.dependencies,J=W.indexedDB,W=W.IDBKeyRange,(Mo(J)?Promise.resolve(J.databases()).then(function(rt){return rt.map(function(it){return it.name}).filter(function(it){return it!==Ze})}):Ia(J,W).toCollection().primaryKeys()).then(R)}catch{return Lr(new O.MissingAPI)}var W,J},defineClass:function(){return function(R){l(this,R)}},ignoreTransaction:function(R){return ne.trans?Rr(ne.transless,R):R()},vip:Zo,async:function(R){return function(){try{var W=Mr(R.apply(this,arguments));return W&&typeof W.then=="function"?W:te.resolve(W)}catch(J){return Lr(J)}}},spawn:function(R,W,J){try{var rt=Mr(R.apply(J,W||[]));return rt&&typeof rt.then=="function"?rt:te.resolve(rt)}catch(it){return Lr(it)}},currentTransaction:{get:function(){return ne.trans||null}},waitFor:function(R,W){return W=te.resolve(typeof R=="function"?Us.ignoreTransaction(R):R).timeout(W||6e4),ne.trans?ne.trans.waitFor(W):W},Promise:te,debug:{get:function(){return St},set:function(R){Tt(R)}},derive:g,extend:l,props:f,override:v,Events:fn,on:Vi,liveQuery:Ua,extendObservabilitySet:Y,getByKeyPath:I,setByKeyPath:U,delByKeyPath:function(R,W){typeof W=="string"?U(R,W,void 0):"length"in W&&[].map.call(W,function(J){U(R,J,void 0)})},shallowClone:P,deepClone:T,getObjectDiff:pn,cmp:Qe,asap:j,minKey:-1/0,addons:[],connections:ge,errnames:Z,dependencies:oo,cache:Ct,semVer:"4.2.1",version:"4.2.1".split(".").map(function(R){return parseInt(R)}).reduce(function(R,W,J){return R+W/Math.pow(10,2*J)})})),Us.maxKey=vs(Us.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Vi(jo,function(R){xs||(R=new CustomEvent(Oa,{detail:R}),xs=!0,dispatchEvent(R),xs=!1)}),addEventListener(Oa,function(R){R=R.detail,xs||Li(R)}));var ws,xs=!1,Ll=function(){};return typeof BroadcastChannel<"u"&&((Ll=function(){(ws=new BroadcastChannel(Oa)).onmessage=function(R){return R.data&&Li(R.data)}})(),typeof ws.unref=="function"&&ws.unref(),Vi(jo,function(R){xs||ws.postMessage(R)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(R){if(!Oi.disableBfCache&&R.persisted){St&&console.debug("Dexie: handling persisted pagehide"),ws!=null&&ws.close();for(var W=0,J=ge;W<J.length;W++)J[W].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(R){!Oi.disableBfCache&&R.persisted&&(St&&console.debug("Dexie: handling persisted pageshow"),Ll(),Li({all:new zn(-1/0,[[]])}))})),te.rejectionMapper=function(R,W){return!R||R instanceof V||R instanceof TypeError||R instanceof SyntaxError||!R.name||!G[R.name]?R:(W=new G[R.name](W||R.message,R),"stack"in R&&p(W,"stack",{get:function(){return this.inner.stack}}),W)},Tt(St),r(Oi,Object.freeze({__proto__:null,Dexie:Oi,liveQuery:Ua,Entity:ur,cmp:Qe,PropModification:rn,replacePrefix:function(R,W){return new rn({replacePrefix:[R,W]})},add:function(R){return new rn({add:R})},remove:function(R){return new rn({remove:R})},default:Oi,RangeSet:zn,mergeRanges:Bs,rangesOverlap:No}),{default:Oi}),Oi})})(B5);var L6=B5.exports;const Dm=ug(L6),dy=Symbol.for("Dexie"),Bd=globalThis[dy]||(globalThis[dy]=Dm);if(Dm.semVer!==Bd.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Dm.semVer} and ${Bd.semVer}`);const{liveQuery:R6,mergeRanges:Dk,rangesOverlap:Ik,RangeSet:Fk,cmp:Bk,Entity:zk,PropModification:Uk,replacePrefix:qk,add:Hk,remove:$k,DexieYProvider:Vk}=Bd;class D6 extends Bd{constructor(){super("stitchfizzle");Qh(this,"projects");Qh(this,"folders");Qh(this,"settings");this.version(1).stores({projects:"id, name, chartType, folderId, createdAt, updatedAt",folders:"id, name, parentId, createdAt",settings:"id"})}}const nu=new D6;async function I6(n){return nu.projects.get(n)}async function zd(n){return n.updatedAt=new Date,nu.projects.put(n)}async function F6(n){return nu.projects.delete(n)}const z5="app-settings";async function B6(){const n=await nu.settings.get(z5);if(n){const{id:e,...t}=n;return t}}async function py(n){await nu.settings.put({...n,id:z5})}const De=i1((n,e)=>({project:null,isDirty:!1,activeTool:"draw",activeColorId:null,selection:null,zoom:1,panOffset:{x:0,y:0},clipboard:null,undoStack:[],redoStack:[],createProject:(t,r,s=F5)=>{const i=Yu(),o=P6(i,t,r,s),u={id:Yu(),color:"#4A90D9",name:"Color 1",abbreviation:"C1"};return o.palette=[u],n({project:o,isDirty:!0,activeColorId:u.id,selection:null,zoom:1,panOffset:{x:0,y:0},undoStack:[],redoStack:[]}),zd(o),o},loadProject:async t=>{var s;const r=await I6(t);return r?(n({project:r,isDirty:!1,activeColorId:((s=r.palette[0])==null?void 0:s.id)||null,selection:null,zoom:1,panOffset:{x:0,y:0},undoStack:[],redoStack:[]}),!0):!1},saveCurrentProject:async()=>{const{project:t}=e();t&&(await zd(t),n({isDirty:!1}))},closeProject:()=>{n({project:null,isDirty:!1,activeColorId:null,selection:null,undoStack:[],redoStack:[]})},setCell:(t,r,s,i=null)=>{const{project:o}=e();if(!(o!=null&&o.grid))return;e().pushUndoState();const u=o.grid.cells.map((l,a)=>a===t?l.map((c,d)=>d===r?{colorId:s,symbolId:i??c.symbolId}:c):l);n({project:{...o,grid:{cells:u},updatedAt:new Date},isDirty:!0})},setCells:t=>{var i;const{project:r}=e();if(!(r!=null&&r.grid))return;e().pushUndoState();const s=r.grid.cells.map(o=>[...o]);for(const{row:o,col:u,colorId:l,symbolId:a}of t)(i=s[o])!=null&&i[u]&&(s[o][u]={colorId:l,symbolId:a??s[o][u].symbolId});n({project:{...r,grid:{cells:s},updatedAt:new Date},isDirty:!0})},fillSelection:t=>{const{project:r,selection:s}=e();if(!(r!=null&&r.grid)||!s)return;const i=[],o=Math.min(s.startRow,s.endRow),u=Math.max(s.startRow,s.endRow),l=Math.min(s.startCol,s.endCol),a=Math.max(s.startCol,s.endCol);for(let c=o;c<=u;c++)for(let d=l;d<=a;d++)i.push({row:c,col:d,colorId:t});e().setCells(i)},setSelection:t=>n({selection:t}),clearSelection:()=>n({selection:null}),copySelection:()=>{var d;const{project:t,selection:r}=e();if(!(t!=null&&t.grid)||!r)return;const s=Math.min(r.startRow,r.endRow),i=Math.max(r.startRow,r.endRow),o=Math.min(r.startCol,r.endCol),l=Math.max(r.startCol,r.endCol)-o+1,a=i-s+1,c=[];for(let f=0;f<a;f++){c[f]=[];for(let h=0;h<l;h++){const p=(d=t.grid.cells[s+f])==null?void 0:d[o+h];c[f][h]=p?{...p}:{colorId:null,symbolId:null}}}n({clipboard:{cells:c,width:l,height:a}})},pasteSelection:()=>{const{project:t,selection:r,clipboard:s}=e();if(!(t!=null&&t.grid)||!r||!s)return;e().pushUndoState();const i=Math.min(r.startRow,r.endRow),o=Math.min(r.startCol,r.endCol),u=t.grid.cells.map(l=>l.map(a=>({...a})));for(let l=0;l<s.height;l++)for(let a=0;a<s.width;a++){const c=i+l,d=o+a;c<t.settings.height&&d<t.settings.width&&(u[c][d]={...s.cells[l][a]})}n({project:{...t,grid:{cells:u},updatedAt:new Date},isDirty:!0})},mirrorSelectionH:()=>{const{project:t,selection:r}=e();if(!(t!=null&&t.grid)||!r)return;e().pushUndoState();const s=Math.min(r.startRow,r.endRow),i=Math.max(r.startRow,r.endRow),o=Math.min(r.startCol,r.endCol),u=Math.max(r.startCol,r.endCol),l=t.grid.cells.map(a=>a.map(c=>({...c})));for(let a=s;a<=i;a++)for(let c=o;c<=u;c++){const d=u-(c-o);l[a][c]={...t.grid.cells[a][d]}}n({project:{...t,grid:{cells:l},updatedAt:new Date},isDirty:!0})},mirrorSelectionV:()=>{const{project:t,selection:r}=e();if(!(t!=null&&t.grid)||!r)return;e().pushUndoState();const s=Math.min(r.startRow,r.endRow),i=Math.max(r.startRow,r.endRow),o=Math.min(r.startCol,r.endCol),u=Math.max(r.startCol,r.endCol),l=t.grid.cells.map(a=>a.map(c=>({...c})));for(let a=s;a<=i;a++)for(let c=o;c<=u;c++){const d=i-(a-s);l[a][c]={...t.grid.cells[d][c]}}n({project:{...t,grid:{cells:l},updatedAt:new Date},isDirty:!0})},addColor:(t,r)=>{const{project:s}=e();if(!s)throw new Error("No project loaded");const i={id:Yu(),color:t,name:r||`Color ${s.palette.length+1}`,abbreviation:`C${s.palette.length+1}`};return n({project:{...s,palette:[...s.palette,i],updatedAt:new Date},isDirty:!0}),i},updateColor:(t,r)=>{const{project:s}=e();s&&n({project:{...s,palette:s.palette.map(i=>i.id===t?{...i,...r}:i),updatedAt:new Date},isDirty:!0})},removeColor:t=>{var u;const{project:r,activeColorId:s}=e();if(!r)return;let i=r.grid;i&&(i={cells:i.cells.map(l=>l.map(a=>a.colorId===t?{...a,colorId:null}:a))});const o=r.palette.filter(l=>l.id!==t);n({project:{...r,palette:o,grid:i,updatedAt:new Date},isDirty:!0,activeColorId:s===t?((u=o[0])==null?void 0:u.id)||null:s})},setActiveColor:t=>n({activeColorId:t}),setActiveTool:t=>n({activeTool:t}),setZoom:t=>n({zoom:Math.max(.1,Math.min(10,t))}),setPanOffset:t=>n({panOffset:t}),pushUndoState:()=>{const{project:t,undoStack:r}=e();if(!t)return;const s=JSON.parse(JSON.stringify(t));n({undoStack:[...r.slice(-49),s],redoStack:[]})},undo:()=>{const{undoStack:t,project:r,redoStack:s}=e();if(t.length===0||!r)return;const i=t[t.length-1];n({project:i,undoStack:t.slice(0,-1),redoStack:[...s,JSON.parse(JSON.stringify(r))],isDirty:!0})},redo:()=>{const{redoStack:t,project:r,undoStack:s}=e();if(t.length===0||!r)return;const i=t[t.length-1];n({project:i,redoStack:t.slice(0,-1),undoStack:[...s,JSON.parse(JSON.stringify(r))],isDirty:!0})},insertRow:t=>{const{project:r}=e();if(!(r!=null&&r.grid))return;e().pushUndoState();const s=Array(r.settings.width).fill(null).map(()=>({colorId:null,symbolId:null})),i=[...r.grid.cells];i.splice(t,0,s),n({project:{...r,settings:{...r.settings,height:r.settings.height+1},grid:{cells:i},updatedAt:new Date},isDirty:!0})},deleteRow:t=>{const{project:r}=e();if(!(r!=null&&r.grid)||r.settings.height<=1)return;e().pushUndoState();const s=r.grid.cells.filter((i,o)=>o!==t);n({project:{...r,settings:{...r.settings,height:r.settings.height-1},grid:{cells:s},updatedAt:new Date},isDirty:!0})},insertColumn:t=>{const{project:r}=e();if(!(r!=null&&r.grid))return;e().pushUndoState();const s=r.grid.cells.map(i=>{const o=[...i];return o.splice(t,0,{colorId:null,symbolId:null}),o});n({project:{...r,settings:{...r.settings,width:r.settings.width+1},grid:{cells:s},updatedAt:new Date},isDirty:!0})},deleteColumn:t=>{const{project:r}=e();if(!(r!=null&&r.grid)||r.settings.width<=1)return;e().pushUndoState();const s=r.grid.cells.map(i=>i.filter((o,u)=>u!==t));n({project:{...r,settings:{...r.settings,width:r.settings.width-1},grid:{cells:s},updatedAt:new Date},isDirty:!0})},resizeGrid:(t,r)=>{var u;const{project:s}=e();if(!(s!=null&&s.grid))return;e().pushUndoState();const i=s.grid.cells,o=[];for(let l=0;l<r;l++){o[l]=[];for(let a=0;a<t;a++)(u=i[l])!=null&&u[a]?o[l][a]=i[l][a]:o[l][a]={colorId:null,symbolId:null}}n({project:{...s,settings:{...s.settings,width:t,height:r},grid:{cells:o},updatedAt:new Date},isDirty:!0})},floodFill:(t,r,s)=>{var h,p;const{project:i}=e();if(!(i!=null&&i.grid))return;const{cells:o}=i.grid,{width:u,height:l}=i.settings,a=((p=(h=o[t])==null?void 0:h[r])==null?void 0:p.colorId)??null;if(a===s)return;e().pushUndoState();const c=o.map(g=>g.map(m=>({...m}))),d=new Set,f=[[t,r]];for(;f.length>0;){const[g,m]=f.shift(),y=`${g},${m}`;d.has(y)||g<0||g>=l||m<0||m>=u||(c[g][m].colorId??null)!==a||(d.add(y),c[g][m]={...c[g][m],colorId:s},f.push([g-1,m],[g+1,m],[g,m-1],[g,m+1]))}n({project:{...i,grid:{cells:c},updatedAt:new Date},isDirty:!0})},initProgressTracker:()=>{const{project:t}=e();if(!t)return;n({project:{...t,progressTracker:{direction:"horizontal",currentRow:0,darkenMode:"done",brightness:50},updatedAt:new Date},isDirty:!0})},setProgressRow:t=>{const{project:r}=e();if(!(r!=null&&r.progressTracker))return;const s=r.settings.height-1,i=Math.max(0,Math.min(s,t));n({project:{...r,progressTracker:{...r.progressTracker,currentRow:i},updatedAt:new Date},isDirty:!0})},nextProgressRow:()=>{const{project:t,setProgressRow:r}=e();t!=null&&t.progressTracker&&r(t.progressTracker.currentRow+1)},prevProgressRow:()=>{const{project:t,setProgressRow:r}=e();t!=null&&t.progressTracker&&r(t.progressTracker.currentRow-1)},updateProgressSettings:t=>{const{project:r}=e();r!=null&&r.progressTracker&&n({project:{...r,progressTracker:{...r.progressTracker,...t},updatedAt:new Date},isDirty:!0})},clearProgressTracker:()=>{const{project:t}=e();t&&n({project:{...t,progressTracker:void 0,updatedAt:new Date},isDirty:!0})}})),yn=i1((n,e)=>({activeDialog:null,visiblePanels:new Set(["palette"]),sidebarOpen:!0,view:"projects",toasts:[],openDialog:t=>n({activeDialog:t}),closeDialog:()=>n({activeDialog:null}),togglePanel:t=>{const{visiblePanels:r}=e(),s=new Set(r);s.has(t)?s.delete(t):s.add(t),n({visiblePanels:s})},showPanel:t=>{const{visiblePanels:r}=e(),s=new Set(r);s.add(t),n({visiblePanels:s})},hidePanel:t=>{const{visiblePanels:r}=e(),s=new Set(r);s.delete(t),n({visiblePanels:s})},toggleSidebar:()=>n(t=>({sidebarOpen:!t.sidebarOpen})),setSidebarOpen:t=>n({sidebarOpen:t}),setView:t=>n({view:t}),addToast:(t,r="info")=>{const s=Date.now().toString();n(i=>({toasts:[...i.toasts,{id:s,message:t,type:r}]})),setTimeout(()=>{e().removeToast(s)},5e3)},removeToast:t=>{n(r=>({toasts:r.toasts.filter(s=>s.id!==t)}))}})),uc=i1((n,e)=>({settings:w0,loaded:!1,loadSettings:async()=>{const t=await B6();t?(n({settings:t,loaded:!0}),t.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")):n({loaded:!0})},updateSettings:async t=>{const{settings:r}=e(),s={...r,...t};n({settings:s}),await py(s),"darkMode"in t&&(t.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))},resetSettings:async()=>{n({settings:w0}),await py(w0),document.documentElement.classList.remove("dark")},isDarkMode:()=>e().settings.darkMode,toggleDarkMode:async()=>{const{settings:t,updateSettings:r}=e();await r({darkMode:!t.darkMode})}}));function z6(){const n=De(f=>f.project),e=De(f=>f.isDirty),t=De(f=>f.saveCurrentProject),r=De(f=>f.closeProject),s=yn(f=>f.view),i=yn(f=>f.setView),o=yn(f=>f.openDialog),u=yn(f=>f.toggleSidebar),l=uc(f=>f.toggleDarkMode),a=uc(f=>f.isDarkMode),c=async()=>{await t()},d=()=>{r(),i("projects")};return tt.jsxs("header",{className:"h-14 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between px-4 shrink-0",children:[tt.jsxs("div",{className:"flex items-center gap-4",children:[tt.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"Toggle sidebar",children:tt.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),tt.jsx("h1",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:s==="editor"&&n?tt.jsxs("span",{className:"flex items-center gap-2",children:[tt.jsx("button",{onClick:d,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:"Back to projects",children:tt.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.name,e&&tt.jsx("span",{className:"text-sm text-gray-400",children:"*"})]}):"StitchFizzle"})]}),tt.jsxs("div",{className:"flex items-center gap-2",children:[s==="editor"&&n&&tt.jsxs(tt.Fragment,{children:[tt.jsx("button",{onClick:c,disabled:!e,className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"}),tt.jsx("button",{onClick:()=>o("export"),className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"Export"})]}),tt.jsx("button",{onClick:()=>l(),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"Toggle dark mode",children:a()?tt.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:tt.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):tt.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:tt.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})}),tt.jsx("button",{onClick:()=>o("settings"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"Settings",children:tt.jsxs("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]})}function U6(){const n=yn(a=>a.sidebarOpen),e=yn(a=>a.view),t=De(a=>a.project),r=De(a=>a.activeTool),s=De(a=>a.setActiveTool),i=De(a=>a.undo),o=De(a=>a.redo),u=De(a=>a.undoStack),l=De(a=>a.redoStack);return n?e==="editor"&&t?tt.jsxs("aside",{className:"w-16 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col items-center py-4 gap-2 shrink-0",children:[tt.jsx(Dl,{icon:tt.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),active:r==="draw",onClick:()=>s("draw"),title:"Draw (D)"}),tt.jsx(Dl,{icon:tt.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),active:r==="erase",onClick:()=>s("erase"),title:"Erase (E)"}),tt.jsx(Dl,{icon:tt.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),active:r==="select",onClick:()=>s("select"),title:"Select (S)"}),tt.jsx(Dl,{icon:tt.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),active:r==="pan",onClick:()=>s("pan"),title:"Pan (Space)"}),tt.jsx(Dl,{icon:tt.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),active:r==="eyedropper",onClick:()=>s("eyedropper"),title:"Eyedropper (I)"}),tt.jsx("div",{className:"h-px w-8 bg-gray-200 dark:bg-gray-700 my-2"}),tt.jsx(Dl,{icon:tt.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),onClick:i,disabled:u.length===0,title:"Undo (Ctrl+Z)"}),tt.jsx(Dl,{icon:tt.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6"})}),onClick:o,disabled:l.length===0,title:"Redo (Ctrl+Y)"})]}):tt.jsxs("aside",{className:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col shrink-0",children:[tt.jsxs("nav",{className:"flex-1 p-4",children:[tt.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-4",children:"Navigation"}),tt.jsxs("ul",{className:"space-y-1",children:[tt.jsx("li",{children:tt.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2 text-left text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[tt.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),"My Charts"]})}),tt.jsx("li",{children:tt.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2 text-left text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg",children:[tt.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Recent"]})})]})]}),tt.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:tt.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"StitchFizzle v0.1.0"})})]}):null}function Dl({icon:n,active:e,disabled:t,onClick:r,title:s}){return tt.jsx("button",{onClick:r,disabled:t,title:s,className:`
        w-10 h-10 flex items-center justify-center rounded-lg transition-colors
        ${e?"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}
        ${t?"opacity-40 cursor-not-allowed":""}
      `,children:n})}function q6({children:n}){const e=yn(r=>r.toasts),t=yn(r=>r.removeToast);return tt.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-gray-900",children:[tt.jsx(z6,{}),tt.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[tt.jsx(U6,{}),tt.jsx("main",{className:"flex-1 overflow-auto",children:n})]}),tt.jsx("div",{className:"fixed bottom-4 right-4 flex flex-col gap-2 z-50",children:e.map(r=>tt.jsxs("div",{className:`
              px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 min-w-64
              ${r.type==="success"?"bg-green-500 text-white":r.type==="error"?"bg-red-500 text-white":"bg-gray-800 text-white"}
            `,children:[tt.jsx("span",{className:"flex-1",children:r.message}),tt.jsx("button",{onClick:()=>t(r.id),className:"p-1 hover:bg-white/20 rounded",children:tt.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},r.id))})]})}function H6(n,e,t){var r,s;typeof n=="function"?(r=e||[],s=t):(r=[],s=e);var i=fa.useRef({hasResult:!1,result:s,error:null}),o=fa.useReducer(function(a){return a+1},0);o[0];var u=o[1],l=fa.useMemo(function(){var a=typeof n=="function"?n():n;if(!a||typeof a.subscribe!="function")throw n===a?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!i.current.hasResult&&typeof window<"u"&&(typeof a.hasValue!="function"||a.hasValue()))if(typeof a.getValue=="function")i.current.result=a.getValue(),i.current.hasResult=!0;else{var c=a.subscribe(function(d){i.current.result=d,i.current.hasResult=!0});typeof c=="function"?c():c.unsubscribe()}return a},r);if(fa.useDebugValue(i.current.result),fa.useEffect(function(){var a=l.subscribe(function(c){var d=i.current;(d.error!==null||d.result!==c)&&(d.error=null,d.result=c,d.hasResult=!0,u())},function(c){var d=i.current;d.error!==c&&(d.error=c,u())});return typeof a=="function"?a:a.unsubscribe.bind(a)},r),i.current.error)throw i.current.error;return i.current.result}function $6(n,e,t){return H6(function(){return R6(n)},e||[],t)}const Za=150;function V6(n){var f;if(!n.grid||!n.palette.length)return null;const{cells:e}=n.grid,{width:t,height:r}=n.settings,s=document.createElement("canvas");s.width=Za,s.height=Za;const i=s.getContext("2d");if(!i)return null;i.fillStyle="#f3f4f6",i.fillRect(0,0,Za,Za);const o=Math.max(1,Math.min(Math.floor(Za/t),Math.floor(Za/r))),u=o*t,l=o*r,a=Math.floor((Za-u)/2),c=Math.floor((Za-l)/2),d=new Map(n.palette.map(h=>[h.id,h.color]));for(let h=0;h<r;h++)for(let p=0;p<t;p++){const g=(f=e[h])==null?void 0:f[p];if(g!=null&&g.colorId){const m=d.get(g.colorId);m&&(i.fillStyle=m,i.fillRect(a+p*o,c+h*o,o,o))}}if(o>=3){i.strokeStyle="rgba(0, 0, 0, 0.1)",i.lineWidth=.5;for(let h=0;h<=t;h++)i.beginPath(),i.moveTo(a+h*o,c),i.lineTo(a+h*o,c+l),i.stroke();for(let h=0;h<=r;h++)i.beginPath(),i.moveTo(a,c+h*o),i.lineTo(a+u,c+h*o),i.stroke()}return s.toDataURL("image/png")}const bu=new Map;function W6(n){const e=`${n.id}-${n.updatedAt.getTime()}`;if(bu.has(e))return bu.get(e);const t=V6(n);if(t&&(bu.set(e,t),bu.size>50)){const r=bu.keys().next().value;r&&bu.delete(r)}return t}const X6={c2c:"Corner to Corner (C2C)",colorwork:"Colorwork",filet:"Filet Crochet",mosaic:"Overlay Mosaic",freeform:"Freeform",tunisian:"Tunisian"},Y6={c2c:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300",colorwork:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",filet:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",mosaic:"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300",freeform:"bg-pink-100 text-pink-700 dark:bg-pink-900 dark:text-pink-300",tunisian:"bg-teal-100 text-teal-700 dark:bg-teal-900 dark:text-teal-300"};function G6(){const[n,e]=Xe.useState(""),t=De(c=>c.loadProject),r=yn(c=>c.setView),s=yn(c=>c.openDialog),i=yn(c=>c.addToast),o=$6(async()=>{if(n){const c=n.toLowerCase();return nu.projects.filter(d=>d.name.toLowerCase().includes(c)).reverse().sortBy("updatedAt")}return nu.projects.reverse().sortBy("updatedAt")},[n]),u=async c=>{await t(c.id)?r("editor"):i("Failed to open project","error")},l=async(c,d)=>{d.stopPropagation(),confirm(`Are you sure you want to delete "${c.name}"?`)&&(await F6(c.id),i("Project deleted","success"))},a=c=>new Date(c).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});return tt.jsxs("div",{className:"p-6",children:[tt.jsxs("div",{className:"flex items-center justify-between mb-6",children:[tt.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Charts"}),tt.jsxs("div",{className:"flex items-center gap-2",children:[tt.jsxs("button",{onClick:()=>s("imageImport"),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",title:"Import from image",children:[tt.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Image"]}),tt.jsxs("button",{onClick:()=>s("import"),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",title:"Import JSON project",children:[tt.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Import"]}),tt.jsxs("button",{onClick:()=>s("newProject"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[tt.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Chart"]})]})]}),tt.jsx("div",{className:"mb-6",children:tt.jsxs("div",{className:"relative",children:[tt.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),tt.jsx("input",{type:"text",placeholder:"Search charts...",value:n,onChange:c=>e(c.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),o===void 0?tt.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading..."}):o.length===0?tt.jsxs("div",{className:"text-center py-12",children:[tt.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),tt.jsx("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"No charts yet"}),tt.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Create your first crochet chart to get started"}),tt.jsx("button",{onClick:()=>s("newProject"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Chart"})]}):tt.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:o.map(c=>tt.jsxs("div",{onClick:()=>u(c),className:"group bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 cursor-pointer hover:border-blue-500 hover:shadow-md transition-all",children:[tt.jsx(K6,{project:c}),tt.jsxs("div",{className:"flex items-start justify-between gap-2",children:[tt.jsxs("div",{className:"flex-1 min-w-0",children:[tt.jsx("h3",{className:"font-medium text-gray-800 dark:text-white truncate",children:c.name}),tt.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[c.settings.width," x ",c.settings.height]})]}),tt.jsx("button",{onClick:d=>l(c,d),className:"p-1 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete",children:tt.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),tt.jsxs("div",{className:"flex items-center justify-between mt-3",children:[tt.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${Y6[c.chartType]}`,children:X6[c.chartType]}),tt.jsx("span",{className:"text-xs text-gray-400",children:a(c.updatedAt)})]})]},c.id))})]})}function K6({project:n}){const e=Xe.useMemo(()=>W6(n),[n]);return tt.jsx("div",{className:"aspect-video bg-gray-100 dark:bg-gray-700 rounded-lg mb-3 flex items-center justify-center overflow-hidden",children:e?tt.jsx("img",{src:e,alt:n.name,className:"w-full h-full object-contain",style:{imageRendering:"pixelated"}}):tt.jsx("svg",{className:"w-12 h-12 text-gray-300 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})})})}const Z6=[{type:"colorwork",name:"Colorwork",description:"Graphgans, pixel designs, tapestry crochet",icon:tt.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 32 32",fill:"currentColor",children:[tt.jsx("rect",{x:"4",y:"4",width:"8",height:"8"}),tt.jsx("rect",{x:"12",y:"4",width:"8",height:"8",opacity:"0.5"}),tt.jsx("rect",{x:"20",y:"4",width:"8",height:"8"}),tt.jsx("rect",{x:"4",y:"12",width:"8",height:"8",opacity:"0.5"}),tt.jsx("rect",{x:"12",y:"12",width:"8",height:"8"}),tt.jsx("rect",{x:"20",y:"12",width:"8",height:"8",opacity:"0.5"}),tt.jsx("rect",{x:"4",y:"20",width:"8",height:"8"}),tt.jsx("rect",{x:"12",y:"20",width:"8",height:"8",opacity:"0.5"}),tt.jsx("rect",{x:"20",y:"20",width:"8",height:"8"})]})},{type:"c2c",name:"Corner to Corner (C2C)",description:"Diagonal colorwork, worked corner to corner",icon:tt.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 32 32",fill:"currentColor",children:[tt.jsx("rect",{x:"4",y:"4",width:"8",height:"8",transform:"rotate(45 8 8)"}),tt.jsx("rect",{x:"12",y:"12",width:"8",height:"8",transform:"rotate(45 16 16)",opacity:"0.5"}),tt.jsx("rect",{x:"20",y:"20",width:"8",height:"8",transform:"rotate(45 24 24)"})]})},{type:"filet",name:"Filet Crochet",description:"Open and filled squares pattern",icon:tt.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 32 32",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[tt.jsx("rect",{x:"4",y:"4",width:"8",height:"8"}),tt.jsx("rect",{x:"12",y:"4",width:"8",height:"8",fill:"currentColor"}),tt.jsx("rect",{x:"20",y:"4",width:"8",height:"8"}),tt.jsx("rect",{x:"4",y:"12",width:"8",height:"8",fill:"currentColor"}),tt.jsx("rect",{x:"12",y:"12",width:"8",height:"8"}),tt.jsx("rect",{x:"20",y:"12",width:"8",height:"8",fill:"currentColor"}),tt.jsx("rect",{x:"4",y:"20",width:"8",height:"8"}),tt.jsx("rect",{x:"12",y:"20",width:"8",height:"8",fill:"currentColor"}),tt.jsx("rect",{x:"20",y:"20",width:"8",height:"8"})]})},{type:"mosaic",name:"Overlay Mosaic",description:"Two-color rows with overlay stitches",icon:tt.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 32 32",fill:"currentColor",children:[tt.jsx("rect",{x:"4",y:"4",width:"24",height:"4"}),tt.jsx("rect",{x:"4",y:"12",width:"24",height:"4",opacity:"0.5"}),tt.jsx("rect",{x:"4",y:"20",width:"24",height:"4"}),tt.jsx("text",{x:"16",y:"18",textAnchor:"middle",fontSize:"10",fill:"currentColor",children:"X"})]})},{type:"tunisian",name:"Tunisian",description:"Forward and return pass visualization",icon:tt.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 32 32",fill:"currentColor",children:[tt.jsx("rect",{x:"4",y:"6",width:"24",height:"3"}),tt.jsx("rect",{x:"4",y:"11",width:"24",height:"3",opacity:"0.3"}),tt.jsx("rect",{x:"4",y:"16",width:"24",height:"3"}),tt.jsx("rect",{x:"4",y:"21",width:"24",height:"3",opacity:"0.3"})]})},{type:"freeform",name:"Freeform",description:"Place symbols freely, create custom patterns",icon:tt.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 32 32",fill:"currentColor",children:[tt.jsx("circle",{cx:"10",cy:"10",r:"4"}),tt.jsx("circle",{cx:"22",cy:"8",r:"3",opacity:"0.5"}),tt.jsx("circle",{cx:"16",cy:"18",r:"5"}),tt.jsx("circle",{cx:"8",cy:"24",r:"3",opacity:"0.5"}),tt.jsx("circle",{cx:"24",cy:"22",r:"4"})]})}];function J6(){const n=uc(p=>p.settings),e=De(p=>p.createProject),t=yn(p=>p.closeDialog),r=yn(p=>p.setView),s=yn(p=>p.addToast),[i,o]=Xe.useState("Untitled Chart"),[u,l]=Xe.useState("colorwork"),[a,c]=Xe.useState(n.defaultGridWidth),[d,f]=Xe.useState(n.defaultGridHeight),h=()=>{if(!i.trim()){s("Please enter a chart name","error");return}e(i.trim(),u,{width:a,height:d,gaugeH:n.defaultGaugeH,gaugeV:n.defaultGaugeV,gridLines:{show:!0,color:"#cccccc",thickness:1,highlight5:!0,highlight10:!0,highlight5Color:"#999999",highlight10Color:"#666666"}}),t(),r("editor"),s("Chart created","success")};return tt.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:tt.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-auto",children:[tt.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[tt.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Create New Chart"}),tt.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:tt.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),tt.jsxs("div",{className:"p-6 space-y-6",children:[tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Chart Name"}),tt.jsx("input",{type:"text",value:i,onChange:p=>o(p.target.value),className:"w-full px-4 py-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter chart name"})]}),tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Chart Type"}),tt.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Z6.map(p=>tt.jsxs("button",{onClick:()=>l(p.type),className:`
                    p-4 rounded-lg border-2 text-left transition-all
                    ${u===p.type?"border-blue-500 bg-blue-50 dark:bg-blue-900/30":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}
                  `,children:[tt.jsx("div",{className:`mb-2 ${u===p.type?"text-blue-600 dark:text-blue-400":"text-gray-400 dark:text-gray-500"}`,children:p.icon}),tt.jsx("h3",{className:`font-medium text-sm ${u===p.type?"text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300"}`,children:p.name}),tt.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:p.description})]},p.type))})]}),u!=="freeform"&&tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Chart Size"}),tt.jsxs("div",{className:"flex items-center gap-4",children:[tt.jsxs("div",{className:"flex-1",children:[tt.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Width (columns)"}),tt.jsx("input",{type:"number",min:1,max:1e3,value:a,onChange:p=>c(Math.max(1,parseInt(p.target.value)||1)),className:"w-full px-4 py-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),tt.jsx("span",{className:"text-gray-400 mt-5",children:"x"}),tt.jsxs("div",{className:"flex-1",children:[tt.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Height (rows)"}),tt.jsx("input",{type:"number",min:1,max:1e3,value:d,onChange:p=>f(Math.max(1,parseInt(p.target.value)||1)),className:"w-full px-4 py-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),tt.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[tt.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),tt.jsx("button",{onClick:h,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Chart"})]})]})})}function It(n,e,t){return(e=function(r){var s=function(i,o){if(typeof i!="object"||!i)return i;var u=i[Symbol.toPrimitive];if(u!==void 0){var l=u.call(i,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(i)}(r,"string");return typeof s=="symbol"?s:s+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function my(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Ft(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?my(Object(t),!0).forEach(function(r){It(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):my(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Cn(n,e){if(n==null)return{};var t,r,s=function(o,u){if(o==null)return{};var l={};for(var a in o)if({}.hasOwnProperty.call(o,a)){if(u.indexOf(a)>=0)continue;l[a]=o[a]}return l}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}function Vo(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}let gy=class{constructor(){It(this,"browserShadowBlurConstant",1),It(this,"DPI",96),It(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),It(this,"perfLimitSizeTotal",2097152),It(this,"maxCacheSideLimit",4096),It(this,"minCacheSideLimit",256),It(this,"disableStyleCopyPaste",!1),It(this,"enableGLFiltering",!0),It(this,"textureSize",4096),It(this,"forceGLPutImageData",!1),It(this,"cachesBoundsOfCurve",!1),It(this,"fontPaths",{}),It(this,"NUM_FRACTION_DIGITS",4)}};const Zr=new class extends gy{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=Ft(Ft({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const e=new gy,t=(n==null?void 0:n.reduce((r,s)=>(r[s]=e[s],r),{}))||e;this.configure(t)}},vl=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return console[n]("fabric",...t)};let Bo=class extends Error{constructor(e,t){super("fabric: ".concat(e),t)}},Q6=class extends Bo{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}},t_=class{},e_=class extends t_{testPrecision(e,t){const r="precision ".concat(t,` float;
void main(){}`),s=e.createShader(e.FRAGMENT_SHADER);return!!s&&(e.shaderSource(s,r),e.compileShader(s),!!e.getShaderParameter(s,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(t,r)),t.getExtension("WEBGL_lose_context").loseContext(),vl("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}};const r_={};let yy;const $o=()=>yy||(yy={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new e_,dispose(){},copyPasteData:r_}),pc=()=>$o().document,yp=()=>$o().window,U5=()=>{var n;return Math.max((n=Zr.devicePixelRatio)!==null&&n!==void 0?n:yp().devicePixelRatio,1)},th=new class{constructor(){It(this,"boundsOfCurveCache",{}),this.charWidthsCache=new Map}getFontCache(n){let{fontFamily:e,fontStyle:t,fontWeight:r}=n;e=e.toLowerCase();const s=this.charWidthsCache;s.has(e)||s.set(e,new Map);const i=s.get(e),o="".concat(t.toLowerCase(),"_").concat((r+"").toLowerCase());return i.has(o)||i.set(o,new Map),i.get(o)}clearFontCache(n){n?this.charWidthsCache.delete((n||"").toLowerCase()):this.charWidthsCache=new Map}limitDimsByArea(n){const{perfLimitSizeTotal:e}=Zr,t=Math.sqrt(e*n);return[Math.floor(t),Math.floor(e/t)]}},Im="6.9.1";function od(){}const Lh=Math.PI/2,Ud=2*Math.PI,s1=Math.PI/180,Qi=Object.freeze([1,0,0,1,0,0]),o1=16,Ja=.4477152502,Ur="center",tn="left",ps="top",Fm="bottom",qn="right",ms="none",a1=/\r?\n/,q5="moving",bp="scaling",H5="rotating",l1="rotate",$5="skewing",_h="resizing",n_="modifyPoly",i_="modifyPath",qd="changed",vp="scale",ys="scaleX",Qs="scaleY",mc="skewX",gc="skewY",oi="fill",gs="stroke",Hd="modified",vu="json",x0="svg",nr=new class{constructor(){this[vu]=new Map,this[x0]=new Map}has(n){return this[vu].has(n)}getClass(n){const e=this[vu].get(n);if(!e)throw new Bo("No class registered for ".concat(n));return e}setClass(n,e){e?this[vu].set(e,n):(this[vu].set(n.type,n),this[vu].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[x0].get(n)}setSVGClass(n,e){this[x0].set(e??n.type.toLowerCase(),n)}},$d=new class extends Array{remove(n){const e=this.indexOf(n);e>-1&&this.splice(e,1)}cancelAll(){const n=this.splice(0);return n.forEach(e=>e.abort()),n}cancelByCanvas(n){if(!n)return[];const e=this.filter(t=>{var r;return t.target===n||typeof t.target=="object"&&((r=t.target)===null||r===void 0?void 0:r.canvas)===n});return e.forEach(t=>t.abort()),e}cancelByTarget(n){if(!n)return[];const e=this.filter(t=>t.target===n);return e.forEach(t=>t.abort()),e}};let s_=class{constructor(){It(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(r=>{let[s,i]=r;this.on(s,i)}),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if(typeof e=="object"){const r=[];return Object.entries(e).forEach(s=>{let[i,o]=s;r.push(this.once(i,o))}),()=>r.forEach(s=>s())}if(t){const r=this.on(e,function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];t.call(this,...i),r()});return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],s=r.indexOf(t);s>-1&&r.splice(s,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof e=="object"?Object.entries(e).forEach(r=>{let[s,i]=r;this._removeEventListener(s,i)}):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const s=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(s)for(let i=0;i<s.length;i++)s[i].call(this,t||{})}};const Su=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},Ca=n=>{if(n===0)return 1;switch(Math.abs(n)/Lh){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},Ta=n=>{if(n===0)return 0;const e=n/Lh,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};let le=class Yi{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new Yi(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new Yi(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new Yi(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new Yi(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new Yi(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new Yi(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new Yi(this.x/e.x,this.y/e.y)}scalarDivide(e){return new Yi(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new Yi(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new Yi(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new Yi(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new Yi(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u1;const r=Ta(e),s=Ca(e),i=this.subtract(t);return new Yi(i.x*s-i.y*r,i.x*r+i.y*s).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Yi(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}};const u1=new le(0,0),ad=n=>!!n&&Array.isArray(n._objects);function V5(n){class e extends n{constructor(){super(...arguments),It(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];const o=this._objects.push(...s);return s.forEach(u=>this._onObjectAdded(u)),o}insertAt(r){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];return this._objects.splice(r,0,...i),i.forEach(u=>this._onObjectAdded(u)),this._objects.length}remove(){const r=this._objects,s=[];for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return o.forEach(l=>{const a=r.indexOf(l);a!==-1&&(r.splice(a,1),s.push(l),this._onObjectRemoved(l))}),s}forEachObject(r){this.getObjects().forEach((s,i,o)=>r(s,i,o))}getObjects(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return s.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...s))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,s){return!!this._objects.includes(r)||!!s&&this._objects.some(i=>i instanceof e&&i.contains(r,!0))}complexity(){return this._objects.reduce((r,s)=>r+=s.complexity?s.complexity():0,0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(Su(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(Su(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,s){if(!r)return!1;const i=this._objects.indexOf(r);if(i!==0){const o=this.findNewLowerIndex(r,i,s);return Su(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,s){if(!r)return!1;const i=this._objects.indexOf(r);if(i!==this._objects.length-1){const o=this.findNewUpperIndex(r,i,s);return Su(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,s){return r!==this._objects[s]&&(Su(this._objects,r),this._objects.splice(s,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,s,i){let o;if(i){o=s;for(let u=s-1;u>=0;--u)if(r.isOverlapping(this._objects[u])){o=u;break}}else o=s-1;return o}findNewUpperIndex(r,s,i){let o;if(i){o=s;for(let u=s+1;u<this._objects.length;++u)if(r.isOverlapping(this._objects[u])){o=u;break}}else o=s+1;return o}collectObjects(r){let{left:s,top:i,width:o,height:u}=r,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=[],c=new le(s,i),d=c.add(new le(o,u));for(let f=this._objects.length-1;f>=0;f--){const h=this._objects[f];h.selectable&&h.visible&&(l&&h.intersectsWithRect(c,d)||h.isContainedWithinRect(c,d)||l&&h.containsPoint(c)||l&&h.containsPoint(d))&&a.push(h)}return a}}return e}let W5=class extends s_{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}};function ld(n){return yp().requestAnimationFrame(n)}function o_(n){return yp().cancelAnimationFrame(n)}let a_=0;const wl=()=>a_++,Aa=()=>{const n=pc().createElement("canvas");if(!n||n.getContext===void 0)throw new Bo("Failed to create `canvas` element");return n},l_=()=>pc().createElement("img"),to=n=>{const e=Aa();return e.width=n.width,e.height=n.height,e},X5=(n,e,t)=>n.toDataURL("image/".concat(e),t),Y5=(n,e,t)=>new Promise((r,s)=>{n.toBlob(r,"image/".concat(e),t)}),Xn=n=>n*s1,Ea=n=>n/s1,u_=n=>n.every((e,t)=>e===Qi[t]),as=(n,e,t)=>new le(n).transform(e,t),xo=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:r,y:s}=new le(n[4],n[5]).transform(t,!0);return t[4]=-r,t[5]=-s,t},Ci=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],c1=(n,e)=>n.reduceRight((t,r)=>r&&t?Ci(r,t,e):r||t,void 0)||Qi.concat(),G5=n=>{let[e,t]=n;return Math.atan2(t,e)},Vd=n=>{const e=G5(n),t=Math.pow(n[0],2)+Math.pow(n[1],2),r=Math.sqrt(t),s=(n[0]*n[3]-n[2]*n[1])/r,i=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:Ea(e),scaleX:r,scaleY:s,skewX:Ea(i),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},Rh=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function yc(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Xn(n),s=Ca(r),i=Ta(r);return[s,i,-i,s,e?e-(s*e-i*t):0,t?t-(i*e+s*t):0]}const h1=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},K5=n=>Math.tan(Xn(n)),Z5=n=>[1,0,K5(n),1,0,0],J5=n=>[1,K5(n),0,1,0,0],wp=n=>{let{scaleX:e=1,scaleY:t=1,flipX:r=!1,flipY:s=!1,skewX:i=0,skewY:o=0}=n,u=h1(r?-e:e,s?-t:t);return i&&(u=Ci(u,Z5(i),!0)),o&&(u=Ci(u,J5(o),!0)),u},c_=n=>{const{translateX:e=0,translateY:t=0,angle:r=0}=n;let s=Rh(e,t);r&&(s=Ci(s,yc({angle:r})));const i=wp(n);return u_(i)||(s=Ci(s,i)),s},ud=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,s){if(e&&e.aborted)return s(new Q6("loadImage"));const i=l_();let o;e&&(o=function(l){i.src="",s(l)},e.addEventListener("abort",o,{once:!0}));const u=function(){i.onload=i.onerror=null,o&&(e==null||e.removeEventListener("abort",o)),r(i)};n?(i.onload=u,i.onerror=function(){o&&(e==null||e.removeEventListener("abort",o)),s(new Bo("Error loading ".concat(i.src)))},t&&(i.crossOrigin=t),i.src=n):u()})},Sh=function(n){let{signal:e,reviver:t=od}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,s)=>{const i=[];e&&e.addEventListener("abort",s,{once:!0}),Promise.all(n.map(o=>nr.getClass(o.type).fromObject(o,{signal:e}).then(u=>(t(o,u),i.push(u),u)))).then(r).catch(o=>{i.forEach(u=>{u.dispose&&u.dispose()}),s(o)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},xp=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,r)=>{const s=[];e&&e.addEventListener("abort",r,{once:!0});const i=Object.values(n).map(u=>u&&u.type&&nr.has(u.type)?Sh([u],{signal:e}).then(l=>{let[a]=l;return s.push(a),a}):u),o=Object.keys(n);Promise.all(i).then(u=>u.reduce((l,a,c)=>(l[o[c]]=a,l),{})).then(t).catch(u=>{s.forEach(l=>{l.dispose&&l.dispose()}),r(u)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},bc=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in n&&(e[t]=n[t]),e),{})},f1=(n,e)=>Object.keys(n).reduce((t,r)=>(e(n[r],r,n)&&(t[r]=n[r]),t),{}),vn=(n,e)=>parseFloat(Number(n).toFixed(e)),kh=n=>"matrix("+n.map(e=>vn(e,Zr.NUM_FRACTION_DIGITS)).join(" ")+")",Ys=n=>!!n&&n.toLive!==void 0,by=n=>!!n&&typeof n.toObject=="function",vy=n=>!!n&&n.offsetX!==void 0&&"source"in n,zl=n=>!!n&&"multiSelectionStacking"in n;function Q5(n){const e=n&&wo(n);let t=0,r=0;if(!n||!e)return{left:t,top:r};let s=n;const i=e.documentElement,o=e.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===e?(t=o.scrollLeft||i.scrollLeft||0,r=o.scrollTop||i.scrollTop||0):(t+=s.scrollLeft||0,r+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:t,top:r}}const wo=n=>n.ownerDocument||null,tw=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},ew=function(n,e,t){let{width:r,height:s}=t,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=r,n.height=s,i>1&&(n.setAttribute("width",(r*i).toString()),n.setAttribute("height",(s*i).toString()),e.scale(i,i))},Bm=(n,e)=>{let{width:t,height:r}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),r&&(n.style.height=typeof r=="number"?"".concat(r,"px"):r)};function wy(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=ms,n}let rw=class{constructor(e){It(this,"_originalCanvasStyle",void 0),It(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&r.getContext!==void 0?e:e&&pc().getElementById(e)||Aa();var r;if(t.hasAttribute("data-fabric"))throw new Bo("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width","".concat(t)),s.setAttribute("height","".concat(r)),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:s}=this.lower;ew(r,s,e,t)}setCSSDimensions(e){Bm(this.lower.el,e)}calcOffset(){return function(e){var t;const r=e&&wo(e),s={left:0,top:0};if(!r)return s;const i=((t=tw(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};s.left+=parseInt(i.borderLeftWidth,10)||0,s.top+=parseInt(i.borderTopWidth,10)||0,s.left+=parseInt(i.paddingLeft,10)||0,s.top+=parseInt(i.paddingTop,10)||0;let o={left:0,top:0};const u=r.documentElement;e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect());const l=Q5(e);return{left:o.left+l.left-(u.clientLeft||0)+s.left,top:o.top+l.top-(u.clientTop||0)+s.top}}(this.lower.el)}dispose(){$o().dispose(this.lower.el),delete this.lower}};const h_={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...Qi]},f_=["objects"];let d1=class nw extends V5(W5){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return nw.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new rw(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const i=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),i}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(vl("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?U5():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const s=Ft({width:this.width,height:this.height},e);this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,s=[...this.viewportTransform],i=as(e,xo(s));s[0]=t,s[3]=t;const o=as(i,s);s[4]+=r.x-o.x,s[5]+=r.y-o.y,this.setViewportTransform(s)}setZoom(e){this.zoomToPoint(new le(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new le(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=ld(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=xo(this.viewportTransform),s=as({x:0,y:0},r),i=as({x:e,y:t},r),o=s.min(i),u=s.max(i);return this.vptCoords={tl:o,tr:new le(u.x,o.y),bl:new le(o.x,u.y),br:u}}cancelRequestedRender(){this.nextRenderHandle&&(o_(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,s)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,s=t.length;r<s;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],s=this["".concat(t,"Image")],i=this.viewportTransform,o=this["".concat(t,"Vpt")];if(!r&&!s)return;const u=Ys(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=u?r.toLive(e):r,o&&e.transform(...i),u){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const l=r.gradientTransform||r.patternTransform;l&&e.transform(...l)}e.fill(),e.restore()}if(s){e.save();const{skipOffscreen:l}=this;this.skipOffscreen=o,o&&e.transform(...i),s.render(e),this.skipOffscreen=l,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new le(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new le(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new le(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new le(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new le(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return as(this.getCenterPoint(),xo(this.viewportTransform))}_centerObject(e,t){e.setXY(t,Ur,Ur),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,s=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return Ft(Ft(Ft({version:Im},bc(this,t)),{},{objects:this._objects.filter(i=>!i.excludeFromExport).map(i=>this._toObject(i,e,t))},this.__serializeBgOverlay(e,t)),s?{clipPath:s}:null)}_toObject(e,t,r){let s;this.includeDefaultValues||(s=e.includeDefaultValues,e.includeDefaultValues=!1);const i=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!s),i}__serializeBgOverlay(e,t){const r={},s=this.backgroundImage,i=this.overlayImage,o=this.backgroundColor,u=this.overlayColor;return Ys(o)?o.excludeFromExport||(r.background=o.toObject(t)):o&&(r.background=o),Ys(u)?u.excludeFromExport||(r.overlay=u.toObject(t)):u&&(r.overlay=u),s&&!s.excludeFromExport&&(r.backgroundImage=this._toObject(s,e,t)),i&&!i.excludeFromExport&&(r.overlayImage=this._toObject(i,e,t)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),s=t.height||"".concat(this.height),i=Zr.NUM_FRACTION_DIGITS,o=t.viewBox;let u;if(o)u='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;u='viewBox="'.concat(vn(-l[4]/l[0],i)," ").concat(vn(-l[5]/l[3],i)," ").concat(vn(this.width/l[0],i)," ").concat(vn(this.height/l[3],i),'" ')}else u='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',s,'" ',u,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",Im,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(wl()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Ys(t)){const r=this["".concat(e,"Vpt")],s=this.viewportTransform,i={isType:()=>!1,width:this.width/(r?s[0]:1),height:this.height/(r?s[3]:1)};return t.toSVG(i,{additionalTransform:r?kh(s):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=Zr.fontPaths;this._objects.forEach(function i(o){e.push(o),ad(o)&&o._objects.forEach(i)}),e.forEach(i=>{if(!(o=i)||typeof o._renderText!="function")return;var o;const{styles:u,fontFamily:l}=i;!t[l]&&r[l]&&(t[l]=!0,u&&Object.values(u).forEach(a=>{Object.values(a).forEach(c=>{let{fontFamily:d=""}=c;!t[d]&&r[d]&&(t[d]=!0)})}))});const s=Object.keys(t).map(i=>`		@font-face {
			font-family: '`.concat(i,`';
			src: url('`).concat(r[i],`');
		}
`)).join("");return s?`	<style type="text/css"><![CDATA[
`.concat(s,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const s=this[t];s&&!s.excludeFromExport&&s.toSVG&&e.push(s.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(Ys(r)){const s=r.repeat||"",i=this.width,o=this.height,u=this["".concat(t,"Vpt")]?kh(xo(this.viewportTransform)):"";e.push('<rect transform="'.concat(u," translate(").concat(i/2,",").concat(o/2,')" x="').concat(r.offsetX-i/2,'" y="').concat(r.offsetY-o/2,'" width="').concat(s!=="repeat-y"&&s!=="no-repeat"||!vy(r)?i:r.source.width,'" height="').concat(s!=="repeat-x"&&s!=="no-repeat"||!vy(r)?o:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Bo("`json` is undefined"));const s=typeof e=="string"?JSON.parse(e):e,{objects:i=[]}=s,o=Cn(s,f_),{backgroundImage:u,background:l,overlayImage:a,overlay:c,clipPath:d}=o,f=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Sh(i,{reviver:t,signal:r}),xp({backgroundImage:u,backgroundColor:l,overlayImage:a,overlayColor:c,clipPath:d},{signal:r})]).then(h=>{let[p,g]=h;return this.clear(),this.add(...p),this.set(o),this.set(g),this.renderOnAddRemove=f,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=to(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:s=1,enableRetinaScaling:i=!1}=e,o=s*(i?this.getRetinaScaling():1);return X5(this.toCanvasElement(o,e),t,r)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:s=1,enableRetinaScaling:i=!1}=e,o=s*(i?this.getRetinaScaling():1);return Y5(this.toCanvasElement(o,e),t,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:r,left:s,top:i,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const u=(t||this.width)*e,l=(r||this.height)*e,a=this.getZoom(),c=this.width,d=this.height,f=this.skipControlsDrawing,h=a*e,p=this.viewportTransform,g=[h,0,0,h,(p[4]-(s||0))*e,(p[5]-(i||0))*e],m=this.enableRetinaScaling,y=to({width:u,height:l}),b=o?this._objects.filter(v=>o(v)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=g,this.width=u,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(y.getContext("2d"),b),this.viewportTransform=p,this.width=c,this.height=d,this.calcViewportBoundaries(),this.enableRetinaScaling=m,this.skipControlsDrawing=f,y}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),$d.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}};It(d1,"ownDefaults",h_);const d_=["touchstart","touchmove","touchend"],p_=n=>{const e=Q5(n.target),t=function(r){const s=r.changedTouches;return s&&s[0]?s[0]:r}(n);return new le(t.clientX+e.left,t.clientY+e.top)},zm=n=>d_.includes(n.type)||n.pointerType==="touch",xy=n=>{n.preventDefault(),n.stopPropagation()},va=n=>{let e=0,t=0,r=0,s=0;for(let i=0,o=n.length;i<o;i++){const{x:u,y:l}=n[i];(u>r||!i)&&(r=u),(u<e||!i)&&(e=u),(l>s||!i)&&(s=l),(l<t||!i)&&(t=l)}return{left:e,top:t,width:r-e,height:s-t}},m_=["translateX","translateY","scaleX","scaleY"],g_=(n,e)=>Wd(n,Ci(e,n.calcOwnMatrix())),Wd=(n,e)=>{const t=Vd(e),{translateX:r,translateY:s,scaleX:i,scaleY:o}=t,u=Cn(t,m_),l=new le(r,s);n.flipX=!1,n.flipY=!1,Object.assign(n,u),n.set({scaleX:i,scaleY:o}),n.setPositionByOrigin(l,Ur,Ur)},y_=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},iw=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),p1=(n,e,t)=>{const r=n/2,s=e/2,i=[new le(-r,-s),new le(r,-s),new le(-r,s),new le(r,s)].map(u=>u.transform(t)),o=va(i);return new le(o.width,o.height)},_p=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qi;return Ci(xo(arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qi),n)},Gu=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qi,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Qi;return n.transform(_p(e,t))},b_=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qi,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Qi;return n.transform(_p(e,t),!0)},v_=(n,e,t)=>{const r=_p(e,t);return Wd(n,Ci(r,n.calcOwnMatrix())),r},sw=(n,e)=>{var t;const{transform:{target:r}}=e;(t=r.canvas)===null||t===void 0||t.fire("object:".concat(n),Ft(Ft({},e),{},{target:r})),r.fire(n,e)},w_={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Qn=n=>typeof n=="string"?w_[n]:n-.5,Xd="not-allowed";function ow(n){return Qn(n.originX)===Qn(Ur)&&Qn(n.originY)===Qn(Ur)}function _y(n){return .5-Qn(n)}const Co=(n,e)=>n[e],aw=(n,e,t,r)=>({e:n,transform:e,pointer:new le(t,r)});function lw(n,e){const t=n.getTotalAngle()+Ea(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function m1(n,e,t,r,s){var i;let{target:o,corner:u}=n;const l=o.controls[u],a=((i=o.canvas)===null||i===void 0?void 0:i.getZoom())||1,c=o.padding/a,d=function(f,h,p,g){const m=f.getRelativeCenterPoint(),y=p!==void 0&&g!==void 0?f.translateToGivenOrigin(m,Ur,Ur,p,g):new le(f.left,f.top);return(f.angle?h.rotate(-Xn(f.angle),m):h).subtract(y)}(o,new le(r,s),e,t);return d.x>=c&&(d.x-=c),d.x<=-c&&(d.x+=c),d.y>=c&&(d.y-=c),d.y<=c&&(d.y+=c),d.x-=l.offsetX,d.y-=l.offsetY,d}const x_=(n,e,t,r)=>{const{target:s,offsetX:i,offsetY:o}=e,u=t-i,l=r-o,a=!Co(s,"lockMovementX")&&s.left!==u,c=!Co(s,"lockMovementY")&&s.top!==l;return a&&s.set(tn,u),c&&s.set(ps,l),(a||c)&&sw(q5,aw(n,e,t,r)),a||c},Yd=n=>n.replace(/\s+/g," "),Sy={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},_0=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n),ky=(n,e,t,r)=>{n/=255,e/=255,t/=255;const s=Math.max(n,e,t),i=Math.min(n,e,t);let o,u;const l=(s+i)/2;if(s===i)o=u=0;else{const a=s-i;switch(u=l>.5?a/(2-s-i):a/(s+i),s){case n:o=(e-t)/a+(e<t?6:0);break;case e:o=(t-n)/a+2;break;case t:o=(n-e)/a+4}o/=6}return[Math.round(360*o),Math.round(100*u),Math.round(100*l),r]},Cy=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},bf=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),Ty=n=>{let[e,t,r,s=1]=n;const i=Math.round(.3*e+.59*t+.11*r);return[i,i,i,s]};class an{constructor(e){if(It(this,"isUnrecognised",!1),e)if(e instanceof an)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,s,i=1]=e;this.setSource([t,r,s,i])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Sy&&(e=Sy[e]),e==="transparent"?[255,255,255,0]:an.sourceFromHex(e)||an.sourceFromRgb(e)||an.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=ky(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,s]=ky(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(s,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,s]=this.getSource();return"".concat(bf(e)).concat(bf(t)).concat(bf(r)).concat(bf(Math.round(255*s)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Ty(this.getSource())),this}toBlackWhite(e){const[t,,,r]=Ty(this.getSource()),s=t<(e||127)?0:255;return this.setSource([s,s,s,r]),this}overlayWith(e){e instanceof an||(e=new an(e));const t=this.getSource(),r=e.getSource(),[s,i,o]=t.map((u,l)=>Math.round(.5*u+.5*r[l]));return this.setSource([s,i,o,t[3]]),this}static fromRgb(e){return an.fromRgba(e)}static fromRgba(e){return new an(an.sourceFromRgb(e))}static sourceFromRgb(e){const t=Yd(e).match(/^rgba?\(\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d{0,3}(?:\.\d+)?%?)\s?)?\)$/i);if(t){const[r,s,i]=t.slice(1,4).map(o=>{const u=parseFloat(o);return o.endsWith("%")?Math.round(2.55*u):u});return[r,s,i,Cy(t[4])]}}static fromHsl(e){return an.fromHsla(e)}static fromHsla(e){return new an(an.sourceFromHsl(e))}static sourceFromHsl(e){const t=Yd(e).match(/^hsla?\(\s?([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d*(?:\.\d+)?%?)\s?)?\)$/i);if(!t)return;const r=(an.parseAngletoDegrees(t[1])%360+360)%360/360,s=parseFloat(t[2])/100,i=parseFloat(t[3])/100;let o,u,l;if(s===0)o=u=l=i;else{const a=i<=.5?i*(s+1):i+s-i*s,c=2*i-a;o=_0(c,a,r+1/3),u=_0(c,a,r),l=_0(c,a,r-1/3)}return[Math.round(255*o),Math.round(255*u),Math.round(255*l),Cy(t[4])]}static fromHex(e){return new an(an.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map(l=>l+l):t.match(/.{2}/g);const[s,i,o,u=255]=r.map(l=>parseInt(l,16));return[s,i,o,u/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?Ea(r):t.includes("turn")?360*r:r}}const Ku=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o1;const t=/\D{0,2}$/.exec(n),r=parseFloat(n),s=Zr.DPI;switch(t==null?void 0:t[0]){case"mm":return r*s/25.4;case"cm":return r*s/2.54;case"in":return r*s;case"pt":return r*s/72;case"pc":return r*s/72*12;case"em":return r*e;default:return r}},__=n=>{const[e,t]=n.trim().split(" "),[r,s]=(i=e)&&i!==ms?[i.slice(1,4),i.slice(5,8)]:i===ms?[i,i]:["Mid","Mid"];var i;return{meetOrSlice:t||"meet",alignX:r,alignY:s}},Ch=function(n,e){let t,r,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const i=new an(e),o=i.getAlpha();t=i.toRgb(),o!==1&&(r=o.toString())}else t="none";return s?"".concat(n,": ").concat(t,"; ").concat(r?"".concat(n,"-opacity: ").concat(r,"; "):""):"".concat(n,'="').concat(t,'" ').concat(r?"".concat(n,'-opacity="').concat(r,'" '):"")};class uw{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):ms,i=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",u=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",a=this.opacity!==void 0?this.opacity:"1",c=this.visible?"":" visibility: hidden;",d=e?"":this.getSvgFilter(),f=Ch(oi,this.fill);return[Ch(gs,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",u,"; ","stroke-miterlimit: ",l,"; ",f,"fill-rule: ",t,"; ","opacity: ",a,";",d,c].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'.concat(kh(r));return"".concat(s).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),i=e.indexOf("COMMON_PARTS");return e[i]=s,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:s,additionalTransform:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=t?"":'style="'.concat(this.getSvgStyles(),'" '),u=s?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,a=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",c=l&&l.absolutePositioned,d=this.stroke,f=this.fill,h=this.shadow,p=[],g=e.indexOf("COMMON_PARTS");let m;l&&(l.clipPathId="CLIPPATH_".concat(wl()),m='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(r),`</clipPath>
`)),c&&p.push("<g ",u,this.getSvgCommons(),` >
`),p.push("<g ",this.getSvgTransform(!1),c?"":u+this.getSvgCommons(),` >
`);const y=[o,a,t?"":this.addPaintOrder()," ",i?'transform="'.concat(i,'" '):""].join("");return e[g]=y,Ys(f)&&p.push(f.toSVG(this)),Ys(d)&&p.push(d.toSVG(this)),h&&p.push(h.toSVG(this)),l&&p.push(m),p.push(e.join("")),p.push(`</g>
`),c&&p.push(`</g>
`),r?r(p.join("")):p.join("")}addPaintOrder(){return this.paintFirst!==oi?' paint-order="'.concat(this.paintFirst,'" '):""}}function Sp(n){return new RegExp("^("+n.join("|")+")\\b","i")}const iu="textDecorationThickness",cw=["fontSize","fontWeight","fontFamily","fontStyle"],hw=["underline","overline","linethrough"],fw=[...cw,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],dw=[...fw,...hw,"textBackgroundColor","direction",iu],S_=[...cw,...hw,gs,"strokeWidth",oi,"deltaY","textBackgroundColor",iu],k_={_reNewline:a1,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:tn,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:tn,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[iu]:66.667},Fo="justify",Gd="justify-left",eh="justify-right",rh="justify-center";var Ay,Ey,jy;const _o=String.raw(Ay||(Ay=Vo(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),S0=String.raw(Ey||(Ey=Vo(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),C_=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+_o+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+_o+"))?\\s+(.*)"),T_={cx:tn,x:tn,r:"radius",cy:ps,y:ps,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":iu},k0="font-size",C0="clip-path";Sp(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);Sp(["symbol","image","marker","pattern","view","svg"]);const My=Sp(["symbol","g","a","svg","clipPath","defs"]);new RegExp(String.raw(jy||(jy=Vo(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),_o,S0,_o,S0,_o,S0,_o));const A_=new le(1,0),pw=new le,mw=(n,e)=>n.rotate(e),Um=(n,e)=>new le(e).subtract(n),qm=n=>n.distanceFrom(pw),Hm=(n,e)=>Math.atan2(nh(n,e),j_(n,e)),E_=n=>Hm(A_,n),g1=n=>n.eq(pw)?n:n.scalarDivide(qm(n)),gw=function(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return g1(new le(-n.y,n.x).scalarMultiply(e?1:-1))},nh=(n,e)=>n.x*e.y-n.y*e.x,j_=(n,e)=>n.x*e.x+n.y*e.y,Ny=(n,e,t)=>{if(n.eq(e)||n.eq(t))return!0;const r=nh(e,t),s=nh(e,n),i=nh(t,n);return r>=0?s>=0&&i<=0:!(s<=0&&i>=0)},Oy="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Py=new RegExp("(?:\\s|^)"+Oy+Oy+"("+_o+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class wa{constructor(e){const t=typeof e=="string"?wa.parseShadow(e):e;Object.assign(this,wa.ownDefaults,t),this.id=wl()}static parseShadow(e){const t=e.trim(),[,r=0,s=0,i=0]=(Py.exec(t)||[]).map(o=>parseFloat(o)||0);return{color:(t.replace(Py,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:s,blur:i}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=mw(new le(this.offsetX,this.offsetY),Xn(-e.angle)),r=new an(this.color);let s=40,i=40;return e.width&&e.height&&(s=100*vn((Math.abs(t.x)+this.blur)/e.width,Zr.NUM_FRACTION_DIGITS)+20,i=100*vn((Math.abs(t.y)+this.blur)/e.height,Zr.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(i,'%" height="').concat(100+2*i,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(vn(this.blur?this.blur/2:0,Zr.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(vn(t.x,Zr.NUM_FRACTION_DIGITS),'" dy="').concat(vn(t.y,Zr.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=wa.ownDefaults;return this.includeDefaultValues?e:f1(e,(r,s)=>r!==t[s])}static async fromObject(e){return new this(e)}}It(wa,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),It(wa,"type","shadow"),nr.setClass(wa,"shadow");const cc=(n,e,t)=>Math.max(n,Math.min(e,t)),M_=[ps,tn,ys,Qs,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",mc,gc],Ma=[oi,gs,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],N_={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:tn,originY:ps,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:oi,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},O_=(n,e,t,r)=>-t*Math.cos(n/r*Lh)+t+e,P_=()=>!1;class y1{constructor(e){let{startValue:t,byValue:r,duration:s=500,delay:i=0,easing:o=O_,onStart:u=od,onChange:l=od,onComplete:a=od,abort:c=P_,target:d}=e;It(this,"_state","pending"),It(this,"durationProgress",0),It(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=i,this.easing=o,this._onStart=u,this._onChange=l,this._onComplete=a,this._abort=c,this.target=d,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>ld(e),this.delay):ld(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:s,valueProgress:i}=this.calculate(r);this.value=Object.freeze(s),this.valueProgress=i,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),ld(this.tick)))}register(){$d.push(this)}unregister(){$d.remove(this)}abort(){this._state="aborted",this.unregister()}}const L_=["startValue","endValue"];class R_ extends y1{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(Ft(Ft({},Cn(e,L_)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const D_=["startValue","endValue"];class I_ extends y1{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(Ft(Ft({},Cn(e,D_)),{},{startValue:t,byValue:r.map((s,i)=>s-t[i])}))}calculate(e){const t=this.startValue.map((r,s)=>this.easing(e,r,this.byValue[s],this.duration,s));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const F_=["startValue","endValue","easing","onChange","onComplete","abort"],B_=(n,e,t,r)=>e+t*(1-Math.cos(n/r*Lh)),T0=n=>n&&((e,t,r)=>n(new an(e).toRgba(),t,r));class z_ extends y1{constructor(e){let{startValue:t,endValue:r,easing:s=B_,onChange:i,onComplete:o,abort:u}=e,l=Cn(e,F_);const a=new an(t).getSource(),c=new an(r).getSource();super(Ft(Ft({},l),{},{startValue:a,byValue:c.map((d,f)=>d-a[f]),easing:s,onChange:T0(i),onComplete:T0(o),abort:T0(u)}))}calculate(e){const[t,r,s,i]=this.startValue.map((u,l)=>this.easing(e,u,this.byValue[l],this.duration,l)),o=[...[t,r,s].map(Math.round),cc(0,i,1)];return{value:o,valueProgress:o.map((u,l)=>this.byValue[l]!==0?Math.abs((u-this.startValue[l])/this.byValue[l]):0).find(u=>u!==0)||0}}}function yw(n){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(n)?new I_(n):new R_(n);return e.start(),e}function U_(n){const e=new z_(n);return e.start(),e}class jn{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(s=>!this.includes(s))),this}static isPointContained(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(s||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(s||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const i=Um(t,r),o=Um(t,e).divide(i);return s?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(e,t){const r=new le(e).setX(Math.min(e.x-1,...t.map(i=>i.x)));let s=0;for(let i=0;i<t.length;i++){const o=this.intersectSegmentSegment(t[i],t[(i+1)%t.length],e,r);if(o.includes(e))return!0;s+=+(o.status==="Intersection")}return s%2==1}static intersectLineLine(e,t,r,s){let i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const u=t.x-e.x,l=t.y-e.y,a=s.x-r.x,c=s.y-r.y,d=e.x-r.x,f=e.y-r.y,h=a*f-c*d,p=u*f-l*d,g=c*u-a*l;if(g!==0){const m=h/g,y=p/g;return(i||0<=m&&m<=1)&&(o||0<=y&&y<=1)?new jn("Intersection").append(new le(e.x+m*u,e.y+m*l)):new jn}if(h===0||p===0){const m=i||o||jn.isPointContained(e,r,s)||jn.isPointContained(t,r,s)||jn.isPointContained(r,e,t)||jn.isPointContained(s,e,t);return new jn(m?"Coincident":void 0)}return new jn("Parallel")}static intersectSegmentLine(e,t,r,s){return jn.intersectLineLine(e,t,r,s,!1,!0)}static intersectSegmentSegment(e,t,r,s){return jn.intersectLineLine(e,t,r,s,!1,!1)}static intersectLinePolygon(e,t,r){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const i=new jn,o=r.length;for(let u,l,a,c=0;c<o;c++){if(u=r[c],l=r[(c+1)%o],a=jn.intersectLineLine(e,t,u,l,s,!1),a.status==="Coincident")return a;i.append(...a.points)}return i.points.length>0&&(i.status="Intersection"),i}static intersectSegmentPolygon(e,t,r){return jn.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new jn,s=e.length,i=[];for(let o=0;o<s;o++){const u=e[o],l=e[(o+1)%s],a=jn.intersectSegmentPolygon(u,l,t);a.status==="Coincident"?(i.push(a),r.append(u,l)):r.append(...a.points)}return i.length>0&&i.length===e.length?new jn("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const s=t.min(r),i=t.max(r),o=new le(i.x,s.y),u=new le(s.x,i.y);return jn.intersectPolygonPolygon(e,[s,o,i,u])}}class q_ extends W5{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?as(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=as(e,xo(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new le(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),i=[e,t,r,s];if(this.group){const o=this.group.calcTransformMatrix();return i.map(u=>as(u,o))}return i}intersectsWithRect(e,t){return jn.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=jn.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:r,top:s,width:i,height:o}=this.getBoundingRect();return r>=e.x&&r+i<=t.x&&s>=e.y&&s+o<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return jn.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return va(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(ys,e),this._set(Qs,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Ea(G5(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||Qi.concat()}calcACoords(){const e=yc({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),s=Rh(t,r),i=Ci(s,e),o=this._getTransformedDimensions(),u=o.x/2,l=o.y/2;return{tl:as({x:-u,y:-l},i),tr:as({x:u,y:-l},i),bl:as({x:-u,y:l},i),br:as({x:u,y:l},i)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Qn(this.originX),Qn(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),s=this.matrixCache;return s&&s.key.every((i,o)=>i===r[o])?s.value:(this.group&&(t=Ci(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},i=c_(s);return this.ownMatrixCache={key:e,value:i},i}_getNonTransformedDimensions(){return new le(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Ft({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let s=r,i=0;this.strokeUniform&&(s=0,i=r);const o=t.width+s,u=t.height+s;let l;return l=t.skewX===0&&t.skewY===0?new le(o*t.scaleX,u*t.scaleY):p1(o,u,wp(t)),l.scalarAdd(i)}translateToGivenOrigin(e,t,r,s,i){let o=e.x,u=e.y;const l=Qn(s)-Qn(t),a=Qn(i)-Qn(r);if(l||a){const c=this._getTransformedDimensions();o+=l*c.x,u+=a*c.y}return new le(o,u)}translateToCenterPoint(e,t,r){if(t===Ur&&r===Ur)return e;const s=this.translateToGivenOrigin(e,t,r,Ur,Ur);return this.angle?s.rotate(Xn(this.angle),e):s}translateToOriginPoint(e,t,r){const s=this.translateToGivenOrigin(e,Ur,Ur,t,r);return this.angle?s.rotate(Xn(this.angle),e):s}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?as(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new le(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const s=this.translateToCenterPoint(e,t,r),i=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:i.x,top:i.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),tn,ps)}}const H_=["type"],$_=["extraParam"];let aa=class cd extends q_{static getDefaults(){return cd.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){vl("warn","Setting type has no effect",e)}constructor(e){super(),It(this,"_cacheContext",null),Object.assign(this,cd.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=Aa(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,s=Zr.maxCacheSideLimit,i=Zr.minCacheSideLimit;if(t<=s&&r<=s&&t*r<=Zr.perfLimitSizeTotal)return t<i&&(e.width=i),r<i&&(e.height=i),e;const o=t/r,[u,l]=th.limitDimsByArea(o),a=cc(i,u,s),c=cc(i,l,s);return t>a&&(e.zoomX/=t/a,e.width=a,e.capped=!0),r>c&&(e.zoomY/=r/c,e.height=c,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,s=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(s+2),zoomX:e.x,zoomY:e.y,x:r,y:s}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:s,zoomX:i,zoomY:o,x:u,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),a=r!==e.width||s!==e.height,c=this.zoomX!==i||this.zoomY!==o;if(!e||!t)return!1;if(a||c){r!==e.width||s!==e.height?(e.width=r,e.height=s):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const d=u/2,f=l/2;return this.cacheTranslationX=Math.round(e.width/2-d)+d,this.cacheTranslationY=Math.round(e.height/2-f)+f,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(i,o),this.zoomX=i,this.zoomY=o,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new le(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Vd(this.calcTransformMatrix());return new le(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==ys&&e!==Qs||(t=this._constrainScale(t)),e===ys&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof wa||(t=new wa(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:s,cacheTranslationY:i}=this,{width:o,height:u}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:s,cacheTranslationY:i,width:o,height:u,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===gs&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const s=this.fill,i=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=s,this.stroke=i}createClipPathLayer(e,t){const r=to(t),s=r.getContext("2d");if(s.translate(t.cacheTranslationX,t.cacheTranslationY),s.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach(i=>{i.transform(s)}),t.parentClipPaths.push(e),e.absolutePositioned){const i=xo(this.calcTransformMatrix());s.transform(i[0],i[1],i[2],i[3],i[4],i[5])}return e.transform(s),e.drawObject(s,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const s=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,s)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Ys(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(Ys(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,s=this.getCanvasRetinaScaling(),[i,,,o]=(r==null?void 0:r.viewportTransform)||Qi,u=i*s,l=o*s,a=t.nonScaling?new le(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*Zr.browserShadowBlurConstant*(u+l)*(a.x+a.y)/4,e.shadowOffsetX=t.offsetX*u*a.x,e.shadowOffsetY=t.offsetY*l*a.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Ys(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,s=-this.width/2+t.offsetX||0,i=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,s,i):e.transform(1,0,0,1,s,i),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:s,offsetY:i}}_renderPaintInOrder(e){this.paintFirst===gs?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),i=this.getCanvasRetinaScaling(),o=s.x/this.scaleX/i,u=s.y/this.scaleY/i,l=to({width:Math.ceil(o),height:Math.ceil(u)}),a=l.getContext("2d");a&&(a.beginPath(),a.moveTo(0,0),a.lineTo(o,0),a.lineTo(o,u),a.lineTo(0,u),a.closePath(),a.translate(o/2,u/2),a.scale(s.zoomX/this.scaleX/i,s.zoomY/this.scaleY/i),this._applyPatternGradientTransform(a,t),a.fillStyle=t.toLive(e),a.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(i*this.scaleX/s.zoomX,i*this.scaleY/s.zoomY),e.strokeStyle=(r=a.createPattern(l,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new le(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(nr.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=iw(this),r=this.group,s=this.shadow,i=Math.abs,o=e.enableRetinaScaling?U5():1,u=(e.multiplier||1)*o,l=e.canvasProvider||(b=>new d1(b,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&y_(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&v_(this,this.getViewportTransform()),this.setCoords();const a=Aa(),c=this.getBoundingRect(),d=this.shadow,f=new le;if(d){const b=d.blur,v=d.nonScaling?new le(1,1):this.getObjectScaling();f.x=2*Math.round(i(d.offsetX)+b)*i(v.x),f.y=2*Math.round(i(d.offsetY)+b)*i(v.y)}const h=c.width+f.x,p=c.height+f.y;a.width=Math.ceil(h),a.height=Math.ceil(p);const g=l(a);e.format==="jpeg"&&(g.backgroundColor="#fff"),this.setPositionByOrigin(new le(g.width/2,g.height/2),Ur,Ur);const m=this.canvas;g._objects=[this],this.set("canvas",g),this.setCoords();const y=g.toCanvasElement(u||1,e);return this.set("canvas",m),this.shadow=s,r&&(this.group=r),this.set(t),this.setCoords(),g._objects=[],g.destroy(),y}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return X5(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Y5(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:s}=this;if(t){const{x:i,y:o}=this.getRelativeCenterPoint();this.originX=Ur,this.originY=Ur,this.left=i,this.top=o}if(this.set("angle",e),t){const{x:i,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,s);this.left=i,this.top=o,this.originX=r,this.originY=s}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){$d.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&$o().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((r,s)=>{let[i,o]=s;return r[i]=this._animate(i,o,t),r},{})}_animate(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.split("."),i=this.constructor.colorProperties.includes(s[s.length-1]),{abort:o,startValue:u,onChange:l,onComplete:a}=r,c=Ft(Ft({},r),{},{target:this,startValue:u??s.reduce((d,f)=>d[f],this),endValue:t,abort:o==null?void 0:o.bind(this),onChange:(d,f,h)=>{s.reduce((p,g,m)=>(m===s.length-1&&(p[g]=d),p[g]),this),l&&l(d,f,h)},onComplete:(d,f,h)=>{this.setCoords(),a&&a(d,f,h)}});return i?U_(c):yw(c)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(t.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let s,i=0;i<t.length;i++){if(s=t[i],s===e)return{fork:[this,...t.slice(0,i)],otherFork:[],common:t.slice(i)};for(let o=0;o<r.length;o++){if(this===r[o])return{fork:[],otherFork:[e,...r.slice(0,o)],common:[this,...t]};if(s===r[o])return{fork:[this,...t.slice(0,i)],otherFork:[e,...r.slice(0,o)],common:t.slice(i)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const s=t.fork.pop(),i=t.otherFork.pop(),o=r._objects.indexOf(s),u=r._objects.indexOf(i);return o>-1&&o>u}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(cd.customProperties,this.constructor.customProperties||[]);let t;const r=Zr.NUM_FRACTION_DIGITS,{clipPath:s,fill:i,stroke:o,shadow:u,strokeDashArray:l,left:a,top:c,originX:d,originY:f,width:h,height:p,strokeWidth:g,strokeLineCap:m,strokeDashOffset:y,strokeLineJoin:b,strokeUniform:v,strokeMiterLimit:k,scaleX:j,scaleY:I,angle:U,flipX:P,flipY:z,opacity:q,visible:$,backgroundColor:F,fillRule:T,paintFirst:N,globalCompositeOperation:C,skewX:w,skewY:_}=this;s&&!s.excludeFromExport&&(t=s.toObject(e.concat("inverted","absolutePositioned")));const x=A=>vn(A,r),S=Ft(Ft({},bc(this,e)),{},{type:this.constructor.type,version:Im,originX:d,originY:f,left:x(a),top:x(c),width:x(h),height:x(p),fill:by(i)?i.toObject():i,stroke:by(o)?o.toObject():o,strokeWidth:x(g),strokeDashArray:l&&l.concat(),strokeLineCap:m,strokeDashOffset:y,strokeLineJoin:b,strokeUniform:v,strokeMiterLimit:x(k),scaleX:x(j),scaleY:x(I),angle:x(U),flipX:P,flipY:z,opacity:x(q),shadow:u&&u.toObject(),visible:$,backgroundColor:F,fillRule:T,paintFirst:N,globalCompositeOperation:C,skewX:x(w),skewY:x(_)},t?{clipPath:t}:null);return this.includeDefaultValues?S:this._removeDefaultValues(S)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return f1(e,(s,i)=>{if(i===tn||i===ps||i==="type")return!0;const o=r[i];return s!==o&&!(Array.isArray(s)&&Array.isArray(o)&&s.length===0&&o.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=Cn(e,H_),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:s}=r,i=Cn(r,$_);return xp(t,i).then(o=>s?(delete o[s],new this(t[s],o)):new this(o))}static fromObject(e,t){return this._fromObject(e,t)}};It(aa,"stateProperties",M_),It(aa,"cacheProperties",Ma),It(aa,"ownDefaults",N_),It(aa,"type","FabricObject"),It(aa,"colorProperties",[oi,gs,"backgroundColor"]),It(aa,"customProperties",[]),nr.setClass(aa),nr.setClass(aa,"object");const vc=(n,e,t)=>(r,s,i,o)=>{const u=e(r,s,i,o);return u&&sw(n,Ft(Ft({},aw(r,s,i,o)),t)),u};function wc(n){return(e,t,r,s)=>{const{target:i,originX:o,originY:u}=t,l=i.getRelativeCenterPoint(),a=i.translateToOriginPoint(l,o,u),c=n(e,t,r,s);return i.setPositionByOrigin(a,t.originX,t.originY),c}}const Ly=vc(_h,wc((n,e,t,r)=>{const s=m1(e,e.originX,e.originY,t,r);if(Qn(e.originX)===Qn(Ur)||Qn(e.originX)===Qn(qn)&&s.x<0||Qn(e.originX)===Qn(tn)&&s.x>0){const{target:i}=e,o=i.strokeWidth/(i.strokeUniform?i.scaleX:1),u=ow(e)?2:1,l=i.width,a=Math.abs(s.x*u/i.scaleX)-o;return i.set("width",Math.max(a,1)),l!==i.width}return!1}));function V_(n,e,t,r,s){r=r||{};const i=this.sizeX||r.cornerSize||s.cornerSize,o=this.sizeY||r.cornerSize||s.cornerSize,u=r.transparentCorners!==void 0?r.transparentCorners:s.transparentCorners,l=u?gs:oi,a=!u&&(r.cornerStrokeColor||s.cornerStrokeColor);let c,d=e,f=t;n.save(),n.fillStyle=r.cornerColor||s.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor||"",i>o?(c=i,n.scale(1,o/i),f=t*i/o):o>i?(c=o,n.scale(i/o,1),d=e*o/i):c=i,n.beginPath(),n.arc(d,f,c/2,0,Ud,!1),n[l](),a&&n.stroke(),n.restore()}function W_(n,e,t,r,s){r=r||{};const i=this.sizeX||r.cornerSize||s.cornerSize,o=this.sizeY||r.cornerSize||s.cornerSize,u=r.transparentCorners!==void 0?r.transparentCorners:s.transparentCorners,l=u?gs:oi,a=!u&&(r.cornerStrokeColor||s.cornerStrokeColor),c=i/2,d=o/2;n.save(),n.fillStyle=r.cornerColor||s.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor||"",n.translate(e,t);const f=s.getTotalAngle();n.rotate(Xn(f)),n["".concat(l,"Rect")](-c,-d,i,o),a&&n.strokeRect(-c,-d,i,o),n.restore()}class po{constructor(e){It(this,"visible",!0),It(this,"actionName",vp),It(this,"angle",0),It(this,"x",0),It(this,"y",0),It(this,"offsetX",0),It(this,"offsetY",0),It(this,"sizeX",0),It(this,"sizeY",0),It(this,"touchSizeX",0),It(this,"touchSizeY",0),It(this,"cursorStyle","crosshair"),It(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,s){var i;let{tl:o,tr:u,br:l,bl:a}=s;return((i=t.canvas)===null||i===void 0?void 0:i.getActiveObject())===t&&t.isControlVisible(e)&&jn.isPointInPolygon(r,[o,u,l,a])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,s;return(r=(s=e._controlsVisibility)===null||s===void 0?void 0:s[t])!==null&&r!==void 0?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,s){return new le(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,s,i,o){const u=c1([Rh(r,s),yc({angle:e}),h1((i?this.touchSizeX:this.sizeX)||t,(i?this.touchSizeY:this.sizeY)||t)]);return{tl:new le(-.5,-.5).transform(u),tr:new le(.5,-.5).transform(u),br:new le(.5,.5).transform(u),bl:new le(-.5,.5).transform(u)}}render(e,t,r,s,i){((s=s||{}).cornerStyle||i.cornerStyle)==="circle"?V_.call(this,e,t,r,s,i):W_.call(this,e,t,r,s,i)}}const X_=(n,e,t)=>t.lockRotation?Xd:e.cursorStyle,Y_=vc(H5,wc((n,e,t,r)=>{let{target:s,ex:i,ey:o,theta:u,originX:l,originY:a}=e;const c=s.translateToOriginPoint(s.getRelativeCenterPoint(),l,a);if(Co(s,"lockRotation"))return!1;const d=Math.atan2(o-c.y,i-c.x),f=Math.atan2(r-c.y,t-c.x);let h=Ea(f-d+u);if(s.snapAngle&&s.snapAngle>0){const g=s.snapAngle,m=s.snapThreshold||g,y=Math.ceil(h/g)*g,b=Math.floor(h/g)*g;Math.abs(h-b)<m?h=b:Math.abs(h-y)<m&&(h=y)}h<0&&(h=360+h),h%=360;const p=s.angle!==h;return s.angle=h,p}));function bw(n,e){const t=e.canvas,r=n[t.uniScaleKey];return t.uniformScaling&&!r||!t.uniformScaling&&r}function vw(n,e,t){const r=Co(n,"lockScalingX"),s=Co(n,"lockScalingY");if(r&&s||!e&&(r||s)&&t||r&&e==="x"||s&&e==="y")return!0;const{width:i,height:o,strokeWidth:u}=n;return i===0&&u===0&&e!=="y"||o===0&&u===0&&e!=="x"}const G_=["e","se","s","sw","w","nw","n","ne","e"],$c=(n,e,t)=>{const r=bw(n,t);if(vw(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",r))return Xd;const s=lw(t,e);return"".concat(G_[s],"-resize")};function b1(n,e,t,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const i=e.target,o=s.by,u=bw(n,i);let l,a,c,d,f,h;if(vw(i,o,u))return!1;if(e.gestureScale)a=e.scaleX*e.gestureScale,c=e.scaleY*e.gestureScale;else{if(l=m1(e,e.originX,e.originY,t,r),f=o!=="y"?Math.sign(l.x||e.signX||1):1,h=o!=="x"?Math.sign(l.y||e.signY||1):1,e.signX||(e.signX=f),e.signY||(e.signY=h),Co(i,"lockScalingFlip")&&(e.signX!==f||e.signY!==h))return!1;if(d=i._getTransformedDimensions(),u&&!o){const m=Math.abs(l.x)+Math.abs(l.y),{original:y}=e,b=m/(Math.abs(d.x*y.scaleX/i.scaleX)+Math.abs(d.y*y.scaleY/i.scaleY));a=y.scaleX*b,c=y.scaleY*b}else a=Math.abs(l.x*i.scaleX/d.x),c=Math.abs(l.y*i.scaleY/d.y);ow(e)&&(a*=2,c*=2),e.signX!==f&&o!=="y"&&(e.originX=_y(e.originX),a*=-1,e.signX=f),e.signY!==h&&o!=="x"&&(e.originY=_y(e.originY),c*=-1,e.signY=h)}const p=i.scaleX,g=i.scaleY;return o?(o==="x"&&i.set(ys,a),o==="y"&&i.set(Qs,c)):(!Co(i,"lockScalingX")&&i.set(ys,a),!Co(i,"lockScalingY")&&i.set(Qs,c)),p!==i.scaleX||g!==i.scaleY}const vf=vc(bp,wc((n,e,t,r)=>b1(n,e,t,r))),K_=vc(bp,wc((n,e,t,r)=>b1(n,e,t,r,{by:"x"}))),Z_=vc(bp,wc((n,e,t,r)=>b1(n,e,t,r,{by:"y"}))),J_=["target","ex","ey","skewingSide"],A0={x:{counterAxis:"y",scale:ys,skew:mc,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Qs,skew:gc,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},Q_=["ns","nesw","ew","nwse"],t8=(n,e,t)=>{if(e.x!==0&&Co(t,"lockSkewingY")||e.y!==0&&Co(t,"lockSkewingX"))return Xd;const r=lw(t,e)%4;return"".concat(Q_[r],"-resize")};function ww(n,e,t,r,s){const{target:i}=t,{counterAxis:o,origin:u,lockSkewing:l,skew:a,flip:c}=A0[n];if(Co(i,l))return!1;const{origin:d,flip:f}=A0[o],h=Qn(t[d])*(i[f]?-1:1),p=-Math.sign(h)*(i[c]?-1:1),g=.5*-((i[a]===0&&m1(t,Ur,Ur,r,s)[n]>0||i[a]>0?1:-1)*p)+.5;return vc($5,wc((y,b,v,k)=>function(j,I,U){let{target:P,ex:z,ey:q,skewingSide:$}=I,F=Cn(I,J_);const{skew:T}=A0[j],N=U.subtract(new le(z,q)).divide(new le(P.scaleX,P.scaleY))[j],C=P[T],w=F[T],_=Math.tan(Xn(w)),x=j==="y"?P._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:P._getTransformedDimensions({scaleX:1,scaleY:1}).y,S=2*N*$/Math.max(x,1)+_,A=Ea(Math.atan(S));P.set(T,A);const B=C!==P[T];if(B&&j==="y"){const{skewX:E,scaleX:V}=P,X=P._getTransformedDimensions({skewY:C}),Q=P._getTransformedDimensions(),D=E!==0?X.x/Q.x:1;D!==1&&P.set(ys,D*V)}return B}(n,b,new le(v,k))))(e,Ft(Ft({},t),{},{[u]:g,skewingSide:p}),r,s)}const e8=(n,e,t,r)=>ww("x",n,e,t,r),r8=(n,e,t,r)=>ww("y",n,e,t,r);function kp(n,e){return n[e.canvas.altActionKey]}const wf=(n,e,t)=>{const r=kp(n,t);return e.x===0?r?mc:Qs:e.y===0?r?gc:ys:""},Fu=(n,e,t)=>kp(n,t)?t8(0,e,t):$c(n,e,t),Ry=(n,e,t,r)=>kp(n,e.target)?r8(n,e,t,r):K_(n,e,t,r),Dy=(n,e,t,r)=>kp(n,e.target)?e8(n,e,t,r):Z_(n,e,t,r),xw=()=>({ml:new po({x:-.5,y:0,cursorStyleHandler:Fu,actionHandler:Ry,getActionName:wf}),mr:new po({x:.5,y:0,cursorStyleHandler:Fu,actionHandler:Ry,getActionName:wf}),mb:new po({x:0,y:.5,cursorStyleHandler:Fu,actionHandler:Dy,getActionName:wf}),mt:new po({x:0,y:-.5,cursorStyleHandler:Fu,actionHandler:Dy,getActionName:wf}),tl:new po({x:-.5,y:-.5,cursorStyleHandler:$c,actionHandler:vf}),tr:new po({x:.5,y:-.5,cursorStyleHandler:$c,actionHandler:vf}),bl:new po({x:-.5,y:.5,cursorStyleHandler:$c,actionHandler:vf}),br:new po({x:.5,y:.5,cursorStyleHandler:$c,actionHandler:vf}),mtr:new po({x:0,y:-.5,actionHandler:Y_,cursorStyleHandler:X_,offsetY:-40,withConnection:!0,actionName:l1})}),n8=()=>({mr:new po({x:.5,y:0,actionHandler:Ly,cursorStyleHandler:Fu,actionName:_h}),ml:new po({x:-.5,y:0,actionHandler:Ly,cursorStyleHandler:Fu,actionName:_h})}),i8=()=>Ft(Ft({},xw()),n8());class Th extends aa{static getDefaults(){return Ft(Ft({},super.getDefaults()),Th.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Th.ownDefaults),this.setOptions(e)}static createControls(){return{controls:xw()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,s=t.action;if(this===r&&s&&s.startsWith(vp))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let s=r.length-1;s>=0;s--){const[i,o]=r[s],u=this.controls[i];if(u.shouldActivate(i,this,e,t?o.touchCorner:o.corner))return this.__corner=i,{key:i,control:u,coord:this.oCoords[i]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=Rh(t.x,t.y),s=yc({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),i=Ci(r,s),o=Ci(e,i),u=Ci(o,[1/e[0],0,0,1/e[3],0,0]),l=this.group?Vd(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const a=this._calculateCurrentDimensions(l),c={};return this.forEachControl((d,f)=>{const h=d.positionHandler(a,u,this,d);c[f]=Object.assign(h,this._calcCornerCoords(d,h))}),c}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),s=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/s[0],1/s[3]),e.rotate(Xn(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=Ft({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=s.borderColor,this._setLineDash(e,s.borderDashArray),this.strokeBorders(e,t),s.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:s}=this,i=Ft({hasBorders:r,hasControls:s},t),o=this.getViewportTransform(),u=i.hasBorders,l=i.hasControls,a=Ci(o,this.calcTransformMatrix()),c=Vd(a);e.save(),e.translate(c.translateX,c.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(c.angle-=180),e.rotate(Xn(this.group?c.angle:this.angle)),u&&this.drawBorders(e,c,t),l&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let s;if(r&&r.forActiveSelection||this.group){const i=p1(this.width,this.height,wp(t)),o=this.isStrokeAccountedForInDimensions()?u1:(this.strokeUniform?new le().scalarAdd(this.canvas?this.canvas.getZoom():1):new le(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);s=i.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,s,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((s,i)=>{s.withConnection&&s.getVisibility(this,i)&&(r=!0,e.moveTo(s.x*t.x,s.y*t.y),e.lineTo(s.x*t.x+s.offsetX,s.y*t.y+s.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:i,cornerColor:o}=this,u=Ft({cornerStrokeColor:s,cornerDashArray:i,cornerColor:o},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=u.cornerColor,this.transparentCorners||(e.strokeStyle=u.cornerStrokeColor),this._setLineDash(e,u.cornerDashArray),this.forEachControl((l,a)=>{if(l.getVisibility(this,a)){const c=this.oCoords[a];l.render(e,c.x,c.y,u,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[r,s]=t;return this.setControlVisible(r,s)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const s=this.width+4,i=this.height+4;return t.clearRect(-s/2,-i/2,s,i),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function _w(n,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),n}It(Th,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Hi extends Th{}_w(Hi,[uw]),nr.setClass(Hi),nr.setClass(Hi,"object");const s8=(n,e,t,r)=>{const s=2*(r=Math.round(r))+1,{data:i}=n.getImageData(e-r,t-r,s,s);for(let o=3;o<i.length;o+=4)if(i[o]>0)return!1;return!0};class Sw{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new le(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new le(1/this.options.scaleX,1/this.options.scaleY):new le(1,1)}createSideVector(e,t){const r=Um(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new le(e);return t.y+=t.x*Math.tan(Xn(this.options.skewY)),t.x+=t.y*Math.tan(Xn(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const o8=new le;class Zu extends Sw{static getOrthogonalRotationFactor(e,t){const r=t?Hm(e,t):E_(e);return Math.abs(r)<Lh?-1:1}constructor(e,t,r,s){super(s),It(this,"AB",void 0),It(this,"AC",void 0),It(this,"alpha",void 0),It(this,"bisector",void 0),this.A=new le(e),this.B=new le(t),this.C=new le(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Hm(this.AB,this.AC),this.bisector=g1(mw(this.AB.eq(o8)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t),i=gw(s),o=Zu.getOrthogonalRotationFactor(i,this.bisector);return this.scaleUnitVector(i,r*o)}projectBevel(){const e=[];return(this.alpha%Ud==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),i=this.options.strokeUniform?qm(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return qm(s)/this.strokeProjectionMagnitude<=i&&e.push(this.applySkew(this.A.add(s))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],s=new le(Zu.getOrthogonalRotationFactor(this.bisector),Zu.getOrthogonalRotationFactor(new le(this.bisector.y,this.bisector.x)));return[new le(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new le(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach(i=>{Ny(i,e,t)&&r.push(this.A.add(i))}),r}projectRoundWithSkew(e,t){const r=[],{skewX:s,skewY:i,scaleX:o,scaleY:u,strokeUniform:l}=this.options,a=new le(Math.tan(Xn(s)),Math.tan(Xn(i))),c=this.strokeProjectionMagnitude,d=l?c/u/Math.sqrt(1/u**2+1/o**2*a.y**2):c/Math.sqrt(1+a.y**2),f=new le(Math.sqrt(Math.max(c**2-d**2,0)),d),h=l?c/Math.sqrt(1+a.x**2*(1/u)**2/(1/o+1/o*a.x*a.y)**2):c/Math.sqrt(1+a.x**2/(1+a.x*a.y)**2),p=new le(h,Math.sqrt(Math.max(c**2-h**2,0)));return[p,p.scalarMultiply(-1),f,f.scalarMultiply(-1)].map(g=>this.applySkew(l?g.multiply(this.strokeUniformScalar):g)).forEach(g=>{Ny(g,e,t)&&r.push(this.applySkew(this.A).add(g))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%Ud==0,r=this.applySkew(this.A),s=e[t?0:2].subtract(r),i=e[t?1:0].subtract(r),o=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),u=nh(s,o)>0,l=u?s:i,a=u?i:s;return this.isSkewed()?e.push(...this.projectRoundWithSkew(l,a)):e.push(...this.projectRoundNoSkew(l,a)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class Iy extends Sw{constructor(e,t,r){super(r),this.A=new le(e),this.T=new le(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t);return this.scaleUnitVector(gw(s),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new le(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new Zu(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new le(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(g1(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(r);e.push(s.add(t),s.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const a8=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(n.length===0)return r;const s=n.reduce((i,o)=>(i[i.length-1].eq(o)||i.push(new le(o)),i),[new le(n[0])]);if(s.length===1)t=!0;else if(!t){const i=s[0],o=((u,l)=>{for(let a=u.length-1;a>=0;a--)if(l(u[a],a,u))return a;return-1})(s,u=>!u.eq(i));s.splice(o+1)}return s.forEach((i,o,u)=>{let l,a;o===0?(a=u[1],l=t?i:u[u.length-1]):o===u.length-1?(l=u[o-1],a=t?i:u[0]):(l=u[o-1],a=u[o+1]),t&&u.length===1?r.push(...new Iy(i,i,e).project()):!t||o!==0&&o!==u.length-1?r.push(...new Zu(i,l,a,e).project()):r.push(...new Iy(i,o===0?a:l,e).project())}),r},v1=n=>{const e={};return Object.keys(n).forEach(t=>{e[t]={},Object.keys(n[t]).forEach(r=>{e[t][r]=Ft({},n[t][r])})}),e},l8=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let Dc;const w1=n=>{if(Dc||Dc||(Dc="Intl"in yp()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),Dc){const e=Dc.segment(n);return Array.from(e).map(t=>{let{segment:r}=t;return r})}return u8(n)},u8=n=>{const e=[];for(let t,r=0;r<n.length;r++)(t=c8(n,r))!==!1&&e.push(t);return e},c8=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const s=n.charCodeAt(e+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=n.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},x1=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textDecorationThickness!==e.textDecorationThickness||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},h8=(n,e)=>{const t=e.split(`
`),r=[];let s=-1,i={};n=v1(n);for(let o=0;o<t.length;o++){const u=w1(t[o]);if(n[o])for(let l=0;l<u.length;l++){s++;const a=n[o][l];a&&Object.keys(a).length>0&&(x1(i,a,!0)?r.push({start:s,end:s+1,style:a}):r[r.length-1].end++),i=a||{}}else s+=u.length,i={}}return r},f8=(n,e)=>{if(!Array.isArray(n))return v1(n);const t=e.split(a1),r={};let s=-1,i=0;for(let o=0;o<t.length;o++){const u=w1(t[o]);for(let l=0;l<u.length;l++)s++,n[i]&&n[i].start<=s&&s<n[i].end&&(r[o]=r[o]||{},r[o][l]=Ft({},n[i].style),s===n[i].end-1&&i++)}return r},Tl=["display","transform",oi,"fill-opacity","fill-rule","opacity",gs,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Fy(n,e){const t=n.nodeName,r=n.getAttribute("class"),s=n.getAttribute("id"),i="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+t,"i"),e=e.replace(o,""),s&&e.length&&(o=new RegExp("#"+s+i,"i"),e=e.replace(o,"")),r&&e.length){const u=r.split(" ");for(let l=u.length;l--;)o=new RegExp("\\."+u[l]+i,"i"),e=e.replace(o,"")}return e.length===0}function d8(n,e){let t=!0;const r=Fy(n,e.pop());return r&&e.length&&(t=function(s,i){let o,u=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&i.length;)u&&(o=i.pop()),u=Fy(s=s.parentElement,o);return i.length===0}(n,e)),r&&t&&e.length===0}const p8=n=>{var e;return(e=T_[n])!==null&&e!==void 0?e:n},m8=new RegExp("(".concat(_o,")"),"gi"),g8=n=>Yd(n.replace(m8," $1 ").replace(/,/gi," "));var By,zy,Uy,qy,Hy,$y,Vy;const Zi="(".concat(_o,")"),y8=String.raw(By||(By=Vo(["(skewX)(",")"],["(skewX)\\(","\\)"])),Zi),b8=String.raw(zy||(zy=Vo(["(skewY)(",")"],["(skewY)\\(","\\)"])),Zi),v8=String.raw(Uy||(Uy=Vo(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Zi,Zi,Zi),w8=String.raw(qy||(qy=Vo(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Zi,Zi),x8=String.raw(Hy||(Hy=Vo(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Zi,Zi),_8=String.raw($y||($y=Vo(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Zi,Zi,Zi,Zi,Zi,Zi),_1="(?:".concat(_8,"|").concat(x8,"|").concat(v8,"|").concat(w8,"|").concat(y8,"|").concat(b8,")"),S8="(?:".concat(_1,"*)"),k8=String.raw(Vy||(Vy=Vo(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),S8),C8=new RegExp(k8),T8=new RegExp(_1),A8=new RegExp(_1,"g");function $m(n){const e=[];if(!(n=g8(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!C8.test(n))return[...Qi];for(const t of n.matchAll(A8)){const r=T8.exec(t[0]);if(!r)continue;let s=Qi;const i=r.filter(p=>!!p),[,o,...u]=i,[l,a,c,d,f,h]=u.map(p=>parseFloat(p));switch(o){case"translate":s=Rh(l,a);break;case l1:s=yc({angle:l},{x:a,y:c});break;case vp:s=h1(l,a);break;case mc:s=Z5(l);break;case gc:s=J5(l);break;case"matrix":s=[l,a,c,d,f,h]}e.push(s)}return c1(e)}function E8(n,e,t,r){const s=Array.isArray(e);let i,o=e;if(n!==oi&&n!==gs||e!==ms){if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")o=e===ms?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")o=t&&t.transformMatrix?Ci(t.transformMatrix,$m(e)):$m(e);else if(n==="visible")o=e!==ms&&e!=="hidden",t&&t.visible===!1&&(o=!1);else if(n==="opacity")o=parseFloat(e),t&&t.opacity!==void 0&&(o*=t.opacity);else if(n==="textAnchor")o=e==="start"?tn:e==="end"?qn:Ur;else if(n==="charSpacing"||n===iu)i=Ku(e,r)/r*1e3;else if(n==="paintFirst"){const u=e.indexOf(oi),l=e.indexOf(gs);o=oi,(u>-1&&l>-1&&l<u||u===-1&&l>-1)&&(o=gs)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return e;if(n==="imageSmoothing")return e==="optimizeQuality";i=s?e.map(Ku):Ku(e,r)}}else o="";return!s&&isNaN(i)?o:i}function j8(n,e){const t=n.match(C_);if(!t)return;const r=t[1],s=t[3],i=t[4],o=t[5],u=t[6];r&&(e.fontStyle=r),s&&(e.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),i&&(e.fontSize=Ku(i)),u&&(e.fontFamily=u),o&&(e.lineHeight=o==="normal"?1:o)}function M8(n,e){n.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[r,s]=t.split(":");e[r.trim().toLowerCase()]=s.trim()})}function N8(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?M8(t,e):function(r,s){Object.entries(r).forEach(i=>{let[o,u]=i;u!==void 0&&(s[o.toLowerCase()]=u)})}(t,e)),e}const O8={stroke:"strokeOpacity",fill:"fillOpacity"};function Na(n,e,t){if(!n)return{};let r,s={},i=o1;n.parentNode&&My.test(n.parentNode.nodeName)&&(s=Na(n.parentElement,e,t),s.fontSize&&(r=i=Ku(s.fontSize)));const o=Ft(Ft(Ft({},e.reduce((a,c)=>{const d=n.getAttribute(c);return d&&(a[c]=d),a},{})),function(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d={};for(const f in c)d8(a,f.split(" "))&&(d=Ft(Ft({},d),c[f]));return d}(n,t)),N8(n));o[C0]&&n.setAttribute(C0,o[C0]),o[k0]&&(r=Ku(o[k0],i),o[k0]="".concat(r));const u={};for(const a in o){const c=p8(a),d=E8(c,o[a],s,r);u[c]=d}u&&u.font&&j8(u.font,u);const l=Ft(Ft({},s),u);return My.test(n.nodeName)?l:function(a){const c=Hi.getDefaults();return Object.entries(O8).forEach(d=>{let[f,h]=d;if(a[h]===void 0||a[f]==="")return;if(a[f]===void 0){if(!c[f])return;a[f]=c[f]}if(a[f].indexOf("url(")===0)return;const p=new an(a[f]);a[f]=p.setAlpha(vn(p.getAlpha()*a[h],2)).toRgba()}),a}(l)}const P8=["left","top","width","height","visible"],kw=["rx","ry"];class ki extends Hi{static getDefaults(){return Ft(Ft({},super.getDefaults()),ki.ownDefaults)}constructor(e){super(),Object.assign(this,ki.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,s=-t/2,i=-r/2,o=this.rx?Math.min(this.rx,t/2):0,u=this.ry?Math.min(this.ry,r/2):0,l=o!==0||u!==0;e.beginPath(),e.moveTo(s+o,i),e.lineTo(s+t-o,i),l&&e.bezierCurveTo(s+t-Ja*o,i,s+t,i+Ja*u,s+t,i+u),e.lineTo(s+t,i+r-u),l&&e.bezierCurveTo(s+t,i+r-Ja*u,s+t-Ja*o,i+r,s+t-o,i+r),e.lineTo(s+o,i+r),l&&e.bezierCurveTo(s+Ja*o,i+r,s,i+r-Ja*u,s,i+r-u),e.lineTo(s,i+u),l&&e.bezierCurveTo(s,i+Ja*u,s+Ja*o,i,s+o,i),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...kw,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:s}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(s,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,r){const s=Na(e,this.ATTRIBUTE_NAMES,r),{left:i=0,top:o=0,width:u=0,height:l=0,visible:a=!0}=s,c=Cn(s,P8);return new this(Ft(Ft(Ft({},t),c),{},{left:i,top:o,width:u,height:l,visible:!!(a&&u&&l)}))}}It(ki,"type","Rect"),It(ki,"cacheProperties",[...Ma,...kw]),It(ki,"ownDefaults",{rx:0,ry:0}),It(ki,"ATTRIBUTE_NAMES",[...Tl,"x","y","rx","ry","width","height"]),nr.setClass(ki),nr.setSVGClass(ki);const ga="initialization",Kd="added",S1="removed",Zd="imperative",Cw=(n,e)=>{const{strokeUniform:t,strokeWidth:r,width:s,height:i,group:o}=e,u=o&&o!==n?_p(o.calcTransformMatrix(),n.calcTransformMatrix()):null,l=u?e.getRelativeCenterPoint().transform(u):e.getRelativeCenterPoint(),a=!e.isStrokeAccountedForInDimensions(),c=t&&a?b_(new le(r,r),void 0,n.calcTransformMatrix()):u1,d=!t&&a?r:0,f=p1(s+d,i+d,c1([u,e.calcOwnMatrix()],!0)).add(c).scalarDivide(2);return[l.subtract(f),l.add(f)]};class Cp{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:s}=e;return t===ga||t===Zd||!!r&&s!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==ga&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:s}=t;if(r===Zd&&t.overrides)return t.overrides;if(e.length===0)return;const{left:i,top:o,width:u,height:l}=va(e.map(d=>Cw(s,d)).reduce((d,f)=>d.concat(f),[])),a=new le(u,l),c=new le(i,o).add(a.scalarDivide(2));if(r===ga){const d=this.getInitialSize(t,{size:a,center:c});return{center:c,relativeCorrection:new le(0,0),size:d}}return{center:c.transform(s.calcOwnMatrix()),size:a}}}It(Cp,"type","strategy");class Vm extends Cp{shouldPerformLayout(e){return!0}}It(Vm,"type","fit-content"),nr.setClass(Vm);const L8=["strategy"],R8=["target","strategy","bubbles","prevStrategy"],Tw="layoutManager";class Ah{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Vm;It(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=Ft(Ft({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[Hd,q5,_h,H5,bp,$5,qd,n_,i_].map(s=>e.on(s,i=>this.performLayout(s===Hd?{type:"object_modified",trigger:s,e:i,target:r}:{type:"object_modifying",trigger:s,e:i,target:r})))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(r=>r()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:s}=t;if(r===ga||r===Kd?this.subscribeTargets(e):r===S1&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),s&&s.fire("object:layout:before",{target:t,context:e}),r===Zd&&e.deep){const i=Cn(e,L8);t.forEachObject(o=>o.layoutManager&&o.layoutManager.performLayout(Ft(Ft({},i),{},{bubbles:!1,target:o})))}}getLayoutResult(e){const{target:t,strategy:r,type:s}=e,i=r.calcLayoutResult(e,t.getObjects());if(!i)return;const o=s===ga?new le:t.getRelativeCenterPoint(),{center:u,correction:l=new le,relativeCorrection:a=new le}=i,c=o.subtract(u).add(l).transform(s===ga?Qi:xo(t.calcOwnMatrix()),!0).add(a);return{result:i,prevCenter:o,nextCenter:u,offset:c}}commitLayout(e,t){const{target:r}=e,{result:{size:s},nextCenter:i}=t;var o,u;r.set({width:s.x,height:s.y}),this.layoutObjects(e,t),e.type===ga?r.set({left:(o=e.x)!==null&&o!==void 0?o:i.x+s.x*Qn(r.originX),top:(u=e.y)!==null&&u!==void 0?u:i.y+s.y*Qn(r.originY)}):(r.setPositionByOrigin(i,Ur,Ur),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject(s=>{s.group===r&&this.layoutObject(e,t,s)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:s}=t;r.set({left:r.left+s.x,top:r.top+s.y})}onAfterLayout(e,t){const{target:r,strategy:s,bubbles:i,prevStrategy:o}=e,u=Cn(e,R8),{canvas:l}=r;r.fire("layout:after",{context:e,result:t}),l&&l.fire("object:layout:after",{context:e,result:t,target:r});const a=r.parent;i&&a!=null&&a.layoutManager&&((u.path||(u.path=[])).push(r),a.layoutManager.performLayout(Ft(Ft({},u),{},{target:a}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(r=>r())),e.clear()}toObject(){return{type:Tw,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}nr.setClass(Ah,Tw);const D8=["type","objects","layoutManager"];class I8 extends Ah{performLayout(){}}class Kl extends V5(Hi){static getDefaults(){return Ft(Ft({},super.getDefaults()),Kl.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),It(this,"_activeObjects",[]),It(this,"__objectSelectionTracker",void 0),It(this,"__objectSelectionDisposer",void 0),Object.assign(this,Kl.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(s=>{this.enterGroup(s,!1)}),this.layoutManager=(r=t.layoutManager)!==null&&r!==void 0?r:new Ah,this.layoutManager.performLayout({type:ga,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(vl("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(vl("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,r,s)=>this.canEnterGroup(t)&&s.indexOf(t)===r)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const s=this._filterObjectsBeforeEnteringGroup(t),i=super.add(...s);return this._onAfterObjectsChange(Kd,s),i}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const i=this._filterObjectsBeforeEnteringGroup(r),o=super.insertAt(e,...i);return this._onAfterObjectsChange(Kd,i),o}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(S1,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),e==="canvas"&&r!==t&&(this._objects||[]).forEach(s=>{s._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const s=this._activeObjects;if(e)s.push(r),this._set("dirty",!0);else if(s.length>0){const i=s.indexOf(r);i>-1&&(s.splice(i,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&Wd(e,Ci(xo(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Wd(e,Ci(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=Hi.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let i=0;i<this._objects.length;i++){var s;const o=this._objects[i];(s=this.canvas)!==null&&s!==void 0&&s.preserveObjectStacking&&o.group!==this?(e.save(),e.transform(...xo(this.calcTransformMatrix())),o.render(e),e.restore()):o.group===this&&o.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(Ft({target:this,type:Zd},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(s){return!s.excludeFromExport}).map(function(s){const i=s.includeDefaultValues;s.includeDefaultValues=r;const o=s[e||"toObject"](t);return s.includeDefaultValues=i,o})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return Ft(Ft(Ft({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=ki.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const s=t.join("");return e?e(s):s}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&t.push("		",r);for(let s=0;s<this._objects.length;s++)t.push("		",this._objects[s].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("	",r);for(let s=0;s<this._objects.length;s++)t.push("	",this._objects[s].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:s=[],layoutManager:i}=e,o=Cn(e,D8);return Promise.all([Sh(s,t),xp(o,t)]).then(u=>{let[l,a]=u;const c=new this(l,Ft(Ft(Ft({},o),a),{},{layoutManager:new I8}));if(i){const d=nr.getClass(i.type),f=nr.getClass(i.strategy);c.layoutManager=new d(new f)}else c.layoutManager=new Ah;return c.layoutManager.subscribeTargets({type:ga,target:c,targets:c.getObjects()}),c.setCoords(),c})}}It(Kl,"type","Group"),It(Kl,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),nr.setClass(Kl);const F8=(n,e)=>Math.min(e.width/n.width,e.height/n.height),B8=(n,e)=>Math.max(e.width/n.width,e.height/n.height),Wm="\\s*,?\\s*",Ic="".concat(Wm,"(").concat(_o,")"),z8="".concat(Ic).concat(Ic).concat(Ic).concat(Wm,"([01])").concat(Wm,"([01])").concat(Ic).concat(Ic),U8={m:"l",M:"L"},q8=(n,e,t,r,s,i,o,u,l,a,c)=>{const d=Ca(n),f=Ta(n),h=Ca(e),p=Ta(e),g=t*s*h-r*i*p+o,m=r*s*h+t*i*p+u;return["C",a+l*(-t*s*f-r*i*d),c+l*(-r*s*f+t*i*d),g+l*(t*s*p+r*i*h),m+l*(r*s*p-t*i*h),g,m]},Wy=(n,e,t,r)=>{const s=Math.atan2(e,n),i=Math.atan2(r,t);return i>=s?i-s:2*Math.PI-(s-i)};function Xy(n,e,t,r,s,i,o,u){let l;if(Zr.cachesBoundsOfCurve&&(l=[...arguments].join(),th.boundsOfCurveCache[l]))return th.boundsOfCurveCache[l];const a=Math.sqrt,c=Math.abs,d=[],f=[[0,0],[0,0]];let h=6*n-12*t+6*s,p=-3*n+9*t-9*s+3*o,g=3*t-3*n;for(let k=0;k<2;++k){if(k>0&&(h=6*e-12*r+6*i,p=-3*e+9*r-9*i+3*u,g=3*r-3*e),c(p)<1e-12){if(c(h)<1e-12)continue;const z=-g/h;0<z&&z<1&&d.push(z);continue}const j=h*h-4*g*p;if(j<0)continue;const I=a(j),U=(-h+I)/(2*p);0<U&&U<1&&d.push(U);const P=(-h-I)/(2*p);0<P&&P<1&&d.push(P)}let m=d.length;const y=m,b=Aw(n,e,t,r,s,i,o,u);for(;m--;){const{x:k,y:j}=b(d[m]);f[0][m]=k,f[1][m]=j}f[0][y]=n,f[1][y]=e,f[0][y+1]=o,f[1][y+1]=u;const v=[new le(Math.min(...f[0]),Math.min(...f[1])),new le(Math.max(...f[0]),Math.max(...f[1]))];return Zr.cachesBoundsOfCurve&&(th.boundsOfCurveCache[l]=v),v}const H8=(n,e,t)=>{let[r,s,i,o,u,l,a,c]=t;const d=((f,h,p,g,m,y,b)=>{if(p===0||g===0)return[];let v=0,k=0,j=0;const I=Math.PI,U=b*s1,P=Ta(U),z=Ca(U),q=.5*(-z*f-P*h),$=.5*(-z*h+P*f),F=p**2,T=g**2,N=$**2,C=q**2,w=F*T-F*N-T*C;let _=Math.abs(p),x=Math.abs(g);if(w<0){const G=Math.sqrt(1-w/(F*T));_*=G,x*=G}else j=(m===y?-1:1)*Math.sqrt(w/(F*N+T*C));const S=j*_*$/x,A=-j*x*q/_,B=z*S-P*A+.5*f,E=P*S+z*A+.5*h;let V=Wy(1,0,(q-S)/_,($-A)/x),X=Wy((q-S)/_,($-A)/x,(-q-S)/_,(-$-A)/x);y===0&&X>0?X-=2*I:y===1&&X<0&&(X+=2*I);const Q=Math.ceil(Math.abs(X/I*2)),D=[],Z=X/Q,L=8/3*Math.sin(Z/4)*Math.sin(Z/4)/Math.sin(Z/2);let O=V+Z;for(let G=0;G<Q;G++)D[G]=q8(V,O,z,P,_,x,B,E,L,v,k),v=D[G][5],k=D[G][6],V=O,O+=Z;return D})(a-n,c-e,s,i,u,l,o);for(let f=0,h=d.length;f<h;f++)d[f][1]+=n,d[f][2]+=e,d[f][3]+=n,d[f][4]+=e,d[f][5]+=n,d[f][6]+=e;return d},$8=n=>{let e=0,t=0,r=0,s=0;const i=[];let o,u=0,l=0;for(const a of n){const c=[...a];let d;switch(c[0]){case"l":c[1]+=e,c[2]+=t;case"L":e=c[1],t=c[2],d=["L",e,t];break;case"h":c[1]+=e;case"H":e=c[1],d=["L",e,t];break;case"v":c[1]+=t;case"V":t=c[1],d=["L",e,t];break;case"m":c[1]+=e,c[2]+=t;case"M":e=c[1],t=c[2],r=c[1],s=c[2],d=["M",e,t];break;case"c":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t,c[5]+=e,c[6]+=t;case"C":u=c[3],l=c[4],e=c[5],t=c[6],d=["C",c[1],c[2],u,l,e,t];break;case"s":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t;case"S":o==="C"?(u=2*e-u,l=2*t-l):(u=e,l=t),e=c[3],t=c[4],d=["C",u,l,c[1],c[2],e,t],u=d[3],l=d[4];break;case"q":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t;case"Q":u=c[1],l=c[2],e=c[3],t=c[4],d=["Q",u,l,e,t];break;case"t":c[1]+=e,c[2]+=t;case"T":o==="Q"?(u=2*e-u,l=2*t-l):(u=e,l=t),e=c[1],t=c[2],d=["Q",u,l,e,t];break;case"a":c[6]+=e,c[7]+=t;case"A":H8(e,t,c).forEach(f=>i.push(f)),e=c[6],t=c[7];break;case"z":case"Z":e=r,t=s,d=["Z"]}d?(i.push(d),o=d[0]):o=""}return i},Jd=(n,e,t,r)=>Math.sqrt((t-n)**2+(r-e)**2),Aw=(n,e,t,r,s,i,o,u)=>l=>{const a=l**3,c=(h=>3*h**2*(1-h))(l),d=(h=>3*h*(1-h)**2)(l),f=(h=>(1-h)**3)(l);return new le(o*a+s*c+t*d+n*f,u*a+i*c+r*d+e*f)},Ew=n=>n**2,jw=n=>2*n*(1-n),Mw=n=>(1-n)**2,V8=(n,e,t,r,s,i,o,u)=>l=>{const a=Ew(l),c=jw(l),d=Mw(l),f=3*(d*(t-n)+c*(s-t)+a*(o-s)),h=3*(d*(r-e)+c*(i-r)+a*(u-i));return Math.atan2(h,f)},W8=(n,e,t,r,s,i)=>o=>{const u=Ew(o),l=jw(o),a=Mw(o);return new le(s*u+t*l+n*a,i*u+r*l+e*a)},X8=(n,e,t,r,s,i)=>o=>{const u=1-o,l=2*(u*(t-n)+o*(s-t)),a=2*(u*(r-e)+o*(i-r));return Math.atan2(a,l)},Yy=(n,e,t)=>{let r=new le(e,t),s=0;for(let i=1;i<=100;i+=1){const o=n(i/100);s+=Jd(r.x,r.y,o.x,o.y),r=o}return s},Y8=(n,e)=>{let t,r=0,s=0,i={x:n.x,y:n.y},o=Ft({},i),u=.01,l=0;const a=n.iterator,c=n.angleFinder;for(;s<e&&u>1e-4;)o=a(r),l=r,t=Jd(i.x,i.y,o.x,o.y),t+s>e?(r-=u,u/=2):(i=o,r+=u,s+=t);return Ft(Ft({},o),{},{angle:c(l)})},Nw=n=>{let e,t,r=0,s=0,i=0,o=0,u=0;const l=[];for(const a of n){const c={x:s,y:i,command:a[0],length:0};switch(a[0]){case"M":t=c,t.x=o=s=a[1],t.y=u=i=a[2];break;case"L":t=c,t.length=Jd(s,i,a[1],a[2]),s=a[1],i=a[2];break;case"C":e=Aw(s,i,a[1],a[2],a[3],a[4],a[5],a[6]),t=c,t.iterator=e,t.angleFinder=V8(s,i,a[1],a[2],a[3],a[4],a[5],a[6]),t.length=Yy(e,s,i),s=a[5],i=a[6];break;case"Q":e=W8(s,i,a[1],a[2],a[3],a[4]),t=c,t.iterator=e,t.angleFinder=X8(s,i,a[1],a[2],a[3],a[4]),t.length=Yy(e,s,i),s=a[3],i=a[4];break;case"Z":t=c,t.destX=o,t.destY=u,t.length=Jd(s,i,o,u),s=o,i=u}r+=t.length,l.push(t)}return l.push({length:r,x:s,y:i}),l},G8=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Nw(n),r=0;for(;e-t[r].length>0&&r<t.length-2;)e-=t[r].length,r++;const s=t[r],i=e/s.length,o=n[r];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return Ft(Ft({},new le(s.x,s.y).lerp(new le(s.destX,s.destY),i)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return Ft(Ft({},new le(s.x,s.y).lerp(new le(o[1],o[2]),i)),{},{angle:Math.atan2(o[2]-s.y,o[1]-s.x)});case"C":case"Q":return Y8(s,e)}},K8=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Gy=new RegExp(z8,"g"),Z8=new RegExp(_o,"gi"),J8={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Q8=n=>{var e;const t=[],r=(e=n.match(K8))!==null&&e!==void 0?e:[];for(const s of r){const i=s[0];if(i==="z"||i==="Z"){t.push([i]);continue}const o=J8[i.toLowerCase()];let u=[];if(i==="a"||i==="A"){Gy.lastIndex=0;for(let l=null;l=Gy.exec(s);)u.push(...l.slice(1))}else u=s.match(Z8)||[];for(let l=0;l<u.length;l+=o){const a=new Array(o),c=U8[i];a[0]=l>0&&c?c:i;for(let d=0;d<o;d++)a[d+1]=parseFloat(u[l+d]);t.push(a)}}return t},t7=(n,e)=>n.map(t=>t.map((r,s)=>s===0||e===void 0?r:vn(r,e)).join(" ")).join(" ");function Xm(n,e){const t=n.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(r=>{let[s,i]=r;return t.setProperty(s,i)}))}class e7 extends rw{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),It(this,"upper",void 0),It(this,"container",void 0);const{el:s}=this.lower,i=this.createUpperCanvas();this.upper={el:i,ctx:i.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:t}),this.applyCanvasStyle(i,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(r),s.parentNode&&s.parentNode.replaceChild(o,s),o.append(s,i),this.container=o}createUpperCanvas(){const{el:e}=this.lower,t=Aa();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=pc().createElement("div");return e.setAttribute("data-fabric","wrapper"),Xm(e,{position:"relative"}),wy(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:s}=t;Xm(e,Ft(Ft({},r),{},{"touch-action":s?"manipulation":ms})),wy(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:s}=this.upper;ew(r,s,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),Bm(this.upper.el,e),Bm(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:s}=this.upper;super.cleanupDOM(e),t.removeChild(s),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),$o().dispose(this.upper.el),delete this.upper,delete this.container}}class Tp extends d1{constructor(){super(...arguments),It(this,"targets",[]),It(this,"_hoveredTargets",[]),It(this,"_currentTransform",null),It(this,"_groupSelector",null),It(this,"contextTopDirty",!1)}static getDefaults(){return Ft(Ft({},super.getDefaults()),Tp.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new e7(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const s=this.targetFindTolerance,i=this.pixelFindContext;this.clearContext(i),i.save(),i.translate(-t+s,-r+s),i.transform(...this.viewportTransform);const o=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(i),e.selectionBackgroundColor=o,i.restore();const u=Math.round(s*this.getRetinaScaling());return s8(i,u,u,u)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(r=>!!r&&e[r]===!0):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),s=this._activeObject;return!!(!t||t&&s&&r.length>1&&r.indexOf(t)===-1&&s!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&s&&s!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let s;return t===vp||t===ys||t===Qs||t===_h?s=this.centeredScaling||e.centeredScaling:t===l1&&(s=this.centeredRotation||e.centeredRotation),s?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?r.x=qn:["mr","tr","br"].includes(t)&&(r.x=tn),["tl","mt","tr"].includes(t)?r.y=Fm:["bl","mb","br"].includes(t)&&(r.y=ps)),r}_setupCurrentTransform(e,t,r){var s;const i=t.group?Gu(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:o="",control:u}=t.getActiveControl()||{},l=r&&u?(s=u.getActionHandler(e,t,u))===null||s===void 0?void 0:s.bind(u):x_,a=((h,p,g,m)=>{if(!p||!h)return"drag";const y=m.controls[p];return y.getActionName(g,y,m)})(r,o,e,t),c=e[this.centeredKey],d=this._shouldCenterTransform(t,a,c)?{x:Ur,y:Ur}:this._getOriginFromCorner(t,o),f={target:t,action:a,actionHandler:l,actionPerformed:!1,corner:o,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:i.x-t.left,offsetY:i.y-t.top,originX:d.x,originY:d.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,theta:Xn(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:c,original:Ft(Ft({},iw(t)),{},{originX:d.x,originY:d.y})};this._currentTransform=f,this.fire("before:transform",{e,transform:f})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:s,deltaY:i}=this._groupSelector,o=new le(t,r).transform(this.viewportTransform),u=new le(t+s,r+i).transform(this.viewportTransform),l=this.selectionLineWidth/2;let a=Math.min(o.x,u.x),c=Math.min(o.y,u.y),d=Math.max(o.x,u.x),f=Math.max(o.y,u.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(a,c,d-a,f-c)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,a+=l,c+=l,d-=l,f-=l,Hi.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(a,c,d-a,f-c))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,s=this.getActiveObjects();if(this.targets=[],r&&s.length>=1){if(r.findControl(t,zm(e))||s.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const i=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&o&&o!==r?(this.targets=i,r):o}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const s=this.getZoom(),i=e.padding/s;if(i){const[o,u,l,a]=r,c=Math.atan2(u.y-o.y,u.x-o.x),d=Ca(c)*i,f=Ta(c)*i,h=d+f,p=d-f;r=[new le(o.x-p,o.y-h),new le(u.x+h,u.y-p),new le(l.x+p,l.y+h),new le(a.x-h,a.y+p)]}return jn.isPointInPolygon(t,r)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,Gu(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const s=e[r];if(this._checkTarget(s,t)){if(ad(s)&&s.subTargetCheck){const i=this._searchPossibleTargets(s._objects,t);i&&this.targets.push(i)}return s}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&ad(r)&&r.interactive&&this.targets[0]){const s=this.targets;for(let i=s.length-1;i>0;i--){const o=s[i];if(!ad(o)||!o.interactive)return o}return s[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,s=r.getBoundingClientRect();let i=p_(e),o=s.width||0,u=s.height||0;o&&u||(ps in s&&Fm in s&&(u=Math.abs(s.top-s.bottom)),qn in s&&tn in s&&(o=Math.abs(s.right-s.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,t||(i=Gu(i,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(i.x/=l,i.y/=l);const a=o===0||u===0?new le(1,1):new le(r.width/o,r.height/u);return i.multiply(a)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Aa(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return zl(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,s=!1;const i=this.getActiveObjects(),o=[],u=[];e.forEach(l=>{i.includes(l)||(r=!0,l.fire("deselected",{e:t,target:l}),u.push(l))}),i.forEach(l=>{e.includes(l)||(r=!0,l.fire("selected",{e:t,target:l}),o.push(l))}),e.length>0&&i.length>0?(s=!0,r&&this.fire("selection:updated",{e:t,selected:o,deselected:u})):i.length>0?(s=!0,this.fire("selection:created",{e:t,selected:o})):e.length>0&&(s=!0,this.fire("selection:cleared",{e:t,deselected:u})),s&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),s=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),s}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,zl(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),zl(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const s=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),s}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,s={e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",s),r.fire(Hd,s))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;zl(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const s=this._realizeGroupTransformOnObject(e),i=super._toObject(e,t,r);return e.set(s),i}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&zl(t)&&this._activeObject===t){const r=bc(e,["angle","flipX","flipY",tn,ys,Qs,mc,gc,ps]);return g_(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const s=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(s)}}It(Tp,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class r7{constructor(e){It(this,"targets",[]),It(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:s}=e.getActiveObject()||{};s&&s.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),Su(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const n7=["target","oldTarget","fireCanvas","e"],ks={passive:!1},wu=(n,e)=>{const t=n.getViewportPoint(e),r=n.getScenePoint(e);return{viewportPoint:t,scenePoint:r,pointer:t,absolutePointer:r}},Qa=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.addEventListener(...t)},$s=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.removeEventListener(...t)},i7={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class Ym extends Tp{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),It(this,"_isClick",void 0),It(this,"textEditingManager",new r7(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(Qa,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,s=this._getEventPrefix();e(tw(r),"resize",this._onResize),e(r,s+"down",this._onMouseDown),e(r,"".concat(s,"move"),this._onMouseMove,ks),e(r,"".concat(s,"out"),this._onMouseOut),e(r,"".concat(s,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel,{passive:!1}),e(r,"contextmenu",this._onContextMenu),e(r,"click",this._onClick),e(r,"dblclick",this._onClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,ks)}removeListeners(){this.addOrRemove($s,"remove");const e=this._getEventPrefix(),t=wo(this.upperCanvasEl);$s(t,"".concat(e,"up"),this._onMouseUp),$s(t,"touchend",this._onTouchEnd,ks),$s(t,"".concat(e,"move"),this._onMouseMove,ks),$s(t,"touchmove",this._onMouseMove,ks),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=Ft({e},wu(this,e));this.fire("mouse:out",Ft(Ft({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",Ft({},r)),this._hoveredTargets.forEach(s=>{this.fire("mouse:out",Ft(Ft({},r),{},{target:s})),s&&s.fire("mouseout",Ft({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",Ft({e},wu(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void Qa(this.upperCanvasEl,"drag",this._onDragProgress)}xy(e)}_renderDragEffects(e,t,r){let s=!1;const i=this._dropTarget;i&&i!==t&&i!==r&&(i.clearContextTop(),s=!0),t==null||t.clearContextTop(),r!==t&&(r==null||r.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),t&&(o.save(),t.transform(o),t.renderDragSourceEffect(e),o.restore(),s=!0),r&&(o.save(),r.transform(o),r.renderDropTargetEffect(e),o.restore(),s=!0),o.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==ms,r=t?this._activeObject:void 0,s={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};$s(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:s}=this.findDragTargets(e),i=this._dragSource,o={e,target:r,subTargets:s,dragSource:i,canDrop:!1,dropTarget:void 0};let u;this.fire(t,o),this._fireEnterLeaveEvents(r,o),r&&(r.canDrop(e)&&(u=r),r.fire(t,o));for(let l=0;l<s.length;l++){const a=s[l];a.canDrop(e)&&(u=a),a.fire(t,o)}this._renderDragEffects(e,i,u),this._dropTarget=u}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),s={e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(t,s)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),s=this._basicEventHandler("drop:before",Ft({e,target:t,subTargets:r,dragSource:this._dragSource},wu(this,e)));s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],s=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:r});return this.stopContextMenu&&xy(e),this._basicEventHandler("contextmenu",s),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),t==2&&e.type==="dblclick"&&this._handleEvent(e,"dblclick"),t==3&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const s=this.upperCanvasEl,i=this._getEventPrefix(),o=wo(s);Qa(o,"touchend",this._onTouchEnd,ks),t&&Qa(o,"touchmove",this._onMouseMove,ks),$s(s,"".concat(i,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();$s(t,"".concat(r,"move"),this._onMouseMove,ks);const s=wo(t);Qa(s,"".concat(r,"up"),this._onMouseUp),Qa(s,"".concat(r,"move"),this._onMouseMove,ks)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=wo(this.upperCanvasEl);$s(r,"touchend",this._onTouchEnd,ks),$s(r,"touchmove",this._onMouseMove,ks),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Qa(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const s=wo(this.upperCanvasEl);$s(s,"".concat(r,"up"),this._onMouseUp),$s(s,"".concat(r,"move"),this._onMouseMove,ks),Qa(t,"".concat(r,"move"),this._onMouseMove,ks)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,s=this._isClick,i=this._target,{button:o}=e;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let u,l,a=!1;if(r&&(this._finalizeCurrentTransform(e),a=r.actionPerformed),!s){const c=i===this._activeObject;this.handleSelection(e),a||(a=this._shouldRender(i)||!c&&i===this._activeObject)}if(i){const c=i.findControl(this.getViewportPoint(e),zm(e)),{key:d,control:f}=c||{};if(l=d,i.selectable&&i!==this._activeObject&&i.activeOn==="up")this.setActiveObject(i,e),a=!0;else if(f){const h=f.getMouseUpHandler(e,i,f);h&&(u=this.getScenePoint(e),h.call(f,e,r,u.x,u.y))}i.isMoving=!1}if(r&&(r.target!==i||r.corner!==l)){const c=r.target&&r.target.controls[r.corner],d=c&&c.getMouseUpHandler(e,r.target,c);u=u||this.getScenePoint(e),d&&d.call(c,e,r,u.x,u.y)}this._setCursorFromEvent(e,i),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,i&&(i.__corner=void 0),a?this.requestRenderAll():s||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:s=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let i=0;i<s.length;i++)s[i]!==r&&s[i].fire(e,t);return t}_handleEvent(e,t,r){const s=this._target,i=this.targets||[],o=Ft(Ft(Ft({e,target:s,subTargets:i},wu(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),t==="down:before"||t==="down"?r:{});this.fire("mouse:".concat(t),o),s&&s.fire("mouse".concat(t),o);for(let u=0;u<i.length;u++)i[u]!==s&&i[u].fire("mouse".concat(t),o)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,r=!!t&&t===this._activeObject;const{button:s}=e;if(s)return(this.fireMiddleClick&&s===1||this.fireRightClick&&s===2)&&this._handleEvent(e,"down",{alreadySelected:r}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let i=this._shouldRender(t),o=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,o=!0,i=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const u=this.getScenePoint(e);this._groupSelector={x:u.x,y:u.y,deltaY:0,deltaX:0}}if(r=!!t&&t===this._activeObject,t){t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const u=t.findControl(this.getViewportPoint(e),zm(e));if(t===this._activeObject&&(u||!o)){this._setupCurrentTransform(e,t,r);const l=u?u.control:void 0,a=this.getScenePoint(e),c=l&&l.getMouseDownHandler(e,t,l);c&&c.call(l,e,this._currentTransform,a.x,a.y)}}i&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:r}),i&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=Gu(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const r=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,s=this._hoveredTargets,i=this.targets,o=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:r,fireCanvas:!0});for(let u=0;u<o;u++)i[u]===t||s[u]&&s[u]===r||this.fireSyntheticInOutEvents("mouse",{e,target:i[u],oldTarget:s[u]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,s=this._hoveredTargets,i=this.targets,o=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("drag",Ft(Ft({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let u=0;u<o;u++)this.fireSyntheticInOutEvents("drag",Ft(Ft({},t),{},{target:i[u],oldTarget:s[u]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:s,fireCanvas:i,e:o}=t,u=Cn(t,n7);const{targetIn:l,targetOut:a,canvasIn:c,canvasOut:d}=i7[e],f=s!==r;if(s&&f){const h=Ft(Ft({},u),{},{e:o,target:s,nextTarget:r},wu(this,o));i&&this.fire(d,h),s.fire(a,h)}if(r&&f){const h=Ft(Ft({},u),{},{e:o,target:r,previousTarget:s},wu(this,o));i&&this.fire(c,h),r.fire(l,h)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,s=r.target,i=s.group?Gu(t,void 0,s.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,i),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:s,actionHandler:i,target:o}=t,u=!!i&&i(e,t,r.x,r.y);u&&o.setCoords(),s==="drag"&&u&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||u}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const s=zl(this._activeObject)?this._activeObject:null,i=(!s||t.group!==s)&&t.findControl(this.getViewportPoint(e));if(i){const o=i.control;this.setCursor(o.cursorStyleHandler(e,o,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(o=>{r=o.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,s=zl(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||s)&&(s||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e})&&!r.getActiveControl()){if(s){const i=r.getObjects();if(t===r){const o=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(i,o)||this.searchPossibleTargets(this._objects,o))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(i,e)}else{r.isEditing&&r.exitEditing();const i=new(nr.getClass("ActiveSelection"))([],{canvas:this});i.multiSelectAdd(r,t),this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:s,deltaY:i}=this._groupSelector,o=new le(t,r),u=o.add(new le(s,i)),l=o.min(u),a=o.max(u).subtract(l),c=this.collectObjects({left:l.x,top:l.y,width:a.x,height:a.y},{includeIntersecting:!this.selectionFullyContained}),d=o.eq(u)?c[0]?[c[0]]:[]:c.length>1?c.filter(f=>!f.onSelect({e})).reverse():c;if(d.length===1)this.setActiveObject(d[0],e);else if(d.length>1){const f=nr.getClass("ActiveSelection");this.setActiveObject(new f(d,{canvas:this}),e)}return this._groupSelector=null,!0}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;const{upper:r}=this.elements;r.ctx=void 0;const s=super.toCanvasElement(e,t);return r.ctx=r.el.getContext("2d"),s}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const Ow={x1:0,y1:0,x2:0,y2:0},s7=Ft(Ft({},Ow),{},{r1:0,r2:0}),Bu=(n,e)=>isNaN(n)&&typeof e=="number"?e:n;function Pw(n){return n&&/%$/.test(n)&&Number.isFinite(parseFloat(n))}function Lw(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(Pw(n)?100:1):NaN;return cc(0,Bu(t,e),1)}const o7=/\s*;\s*/,a7=/\s*:\s*/;function l7(n,e){let t,r;const s=n.getAttribute("style");if(s){const o=s.split(o7);o[o.length-1]===""&&o.pop();for(let u=o.length;u--;){const[l,a]=o[u].split(a7).map(c=>c.trim());l==="stop-color"?t=a:l==="stop-opacity"&&(r=a)}}const i=new an(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:Lw(n.getAttribute("offset"),0),color:i.toRgb(),opacity:Bu(parseFloat(r||n.getAttribute("stop-opacity")||""),1)*i.getAlpha()*e}}function u7(n,e){const t=[],r=n.getElementsByTagName("stop"),s=Lw(e,1);for(let i=r.length;i--;)t.push(l7(r[i],s));return t}function Rw(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function Dw(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function co(n,e){return n.getAttribute(e)}function c7(n,e){return function(t,r){let s,{width:i,height:o,gradientUnits:u}=r;return Object.entries(t).reduce((l,a)=>{let[c,d]=a;if(d==="Infinity")s=1;else if(d==="-Infinity")s=0;else{const f=typeof d=="string";s=f?parseFloat(d):d,f&&Pw(d)&&(s*=.01,u==="pixels"&&(c!=="x1"&&c!=="x2"&&c!=="r2"||(s*=i),c!=="y1"&&c!=="y2"||(s*=o)))}return l[c]=s,l},{})}(Rw(n)==="linear"?function(t){return{x1:co(t,"x1")||0,y1:co(t,"y1")||0,x2:co(t,"x2")||"100%",y2:co(t,"y2")||0}}(n):function(t){return{x1:co(t,"fx")||co(t,"cx")||"50%",y1:co(t,"fy")||co(t,"cy")||"50%",r1:0,x2:co(t,"cx")||"50%",y2:co(t,"cy")||"50%",r2:co(t,"r")||"50%"}}(n),Ft(Ft({},e),{},{gradientUnits:Dw(n)}))}class xf{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:s={},colorStops:i=[],offsetX:o=0,offsetY:u=0,gradientTransform:l,id:a}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:Ft(Ft({},t==="radial"?s7:Ow),s),colorStops:i,offsetX:o,offsetY:u,gradientTransform:l,id:a?"".concat(a,"_").concat(wl()):wl()})}addColorStop(e){for(const t in e){const r=new an(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return Ft(Ft({},bc(this,e)),{},{type:this.type,coords:Ft({},this.coords),colorStops:this.colorStops.map(t=>Ft({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],s=this.gradientTransform?this.gradientTransform.concat():Qi.concat(),i=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(d=>Ft({},d)).sort((d,f)=>d.offset-f.offset);let u=-this.offsetX,l=-this.offsetY;var a;i==="objectBoundingBox"?(u/=e.width,l/=e.height):(u+=e.width/2,l+=e.height/2),(a=e)&&typeof a._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(u-=e.pathOffset.x,l-=e.pathOffset.y),s[4]-=u,s[5]-=l;const c=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(i,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(kh(s),'"'),""].join(" ");if(this.type==="linear"){const{x1:d,y1:f,x2:h,y2:p}=this.coords;r.push("<linearGradient ",c,' x1="',d,'" y1="',f,'" x2="',h,'" y2="',p,`">
`)}else if(this.type==="radial"){const{x1:d,y1:f,x2:h,y2:p,r1:g,r2:m}=this.coords,y=g>m;r.push("<radialGradient ",c,' cx="',y?d:h,'" cy="',y?f:p,'" r="',y?g:m,'" fx="',y?h:d,'" fy="',y?p:f,`">
`),y&&(o.reverse(),o.forEach(v=>{v.offset=1-v.offset}));const b=Math.min(g,m);if(b>0){const v=b/Math.max(g,m);o.forEach(k=>{k.offset+=v*(1-k.offset)})}}return o.forEach(d=>{let{color:f,offset:h,opacity:p}=d;r.push("<stop ",'offset="',100*h+"%",'" style="stop-color:',f,p!==void 0?";stop-opacity: "+p:";",`"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const{x1:t,y1:r,x2:s,y2:i,r1:o,r2:u}=this.coords,l=this.type==="linear"?e.createLinearGradient(t,r,s,i):e.createRadialGradient(t,r,o,s,i,u);return this.colorStops.forEach(a=>{let{color:c,opacity:d,offset:f}=a;l.addColorStop(f,d!==void 0?new an(c).setAlpha(d).toRgba():c)}),l}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(Ft(Ft({},e),{},{colorStops:t?t.map(s=>Ft({},s)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const s=Dw(e),i=t._findCenterFromElement();return new this(Ft({id:e.getAttribute("id")||void 0,type:Rw(e),coords:c7(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:u7(e,r.opacity),gradientUnits:s,gradientTransform:$m(e.getAttribute("gradientTransform")||"")},s==="pixels"?{offsetX:t.width/2-i.x,offsetY:t.height/2-i.y}:{offsetX:0,offsetY:0}))}}It(xf,"type","Gradient"),nr.setClass(xf,"gradient"),nr.setClass(xf,"linear"),nr.setClass(xf,"radial");const h7=["type","source","patternTransform"];class E0{get type(){return"pattern"}set type(e){vl("warn","Setting type has no effect",e)}constructor(e){It(this,"repeat","repeat"),It(this,"offsetX",0),It(this,"offsetY",0),It(this,"crossOrigin",""),this.id=wl(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return Ft(Ft({},bc(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:vn(this.offsetX,Zr.NUM_FRACTION_DIGITS),offsetY:vn(this.offsetY,Zr.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:s,repeat:i,id:o}=this,u=Bu(this.offsetX/t,0),l=Bu(this.offsetY/r,0),a=i==="repeat-y"||i==="no-repeat"?1+Math.abs(u||0):Bu(s.width/t,0),c=i==="repeat-x"||i==="no-repeat"?1+Math.abs(l||0):Bu(s.height/r,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(u,'" y="').concat(l,'" width="').concat(a,'" height="').concat(c,'">'),'<image x="0" y="0" width="'.concat(s.width,'" height="').concat(s.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:r,source:s,patternTransform:i}=e,o=Cn(e,h7);const u=await ud(s,Ft(Ft({},t),{},{crossOrigin:o.crossOrigin}));return new this(Ft(Ft({},o),{},{patternTransform:i&&i.slice(0),source:u}))}}It(E0,"type","Pattern"),nr.setClass(E0),nr.setClass(E0,"pattern");const f7=["path","left","top"],d7=["d"];class da extends Hi{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:s,top:i}=t,o=Cn(t,f7);super(),Object.assign(this,da.ownDefaults),this.setOptions(o),this._setPath(e||[],!0),typeof s=="number"&&this.set(tn,s),typeof i=="number"&&this.set(ps,i)}_setPath(e,t){this.path=$8(Array.isArray(e)?e:Q8(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new le(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const s of this.path)switch(s[0]){case"L":e.lineTo(s[1]+t,s[2]+r);break;case"M":e.moveTo(s[1]+t,s[2]+r);break;case"C":e.bezierCurveTo(s[1]+t,s[2]+r,s[3]+t,s[4]+r,s[5]+t,s[6]+r);break;case"Q":e.quadraticCurveTo(s[1]+t,s[2]+r,s[3]+t,s[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ft(Ft({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=t7(this.path,Zr.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=Zr.NUM_FRACTION_DIGITS;return" translate(".concat(vn(-this.pathOffset.x,e),", ").concat(vn(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:s}=this._calcDimensions();this.set({width:t,height:r,pathOffset:s}),e&&this.setPositionByOrigin(s,Ur,Ur)}_calcBoundsFromPath(){const e=[];let t=0,r=0,s=0,i=0;for(const o of this.path)switch(o[0]){case"L":s=o[1],i=o[2],e.push({x:t,y:r},{x:s,y:i});break;case"M":s=o[1],i=o[2],t=s,r=i;break;case"C":e.push(...Xy(s,i,o[1],o[2],o[3],o[4],o[5],o[6])),s=o[5],i=o[6];break;case"Q":e.push(...Xy(s,i,o[1],o[2],o[1],o[2],o[3],o[4])),s=o[3],i=o[4];break;case"Z":s=t,i=r}return va(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return Ft(Ft({},e),{},{pathOffset:new le(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const s=Na(e,this.ATTRIBUTE_NAMES,r),{d:i}=s;return new this(i,Ft(Ft(Ft({},Cn(s,d7)),t),{},{left:void 0,top:void 0}))}}It(da,"type","Path"),It(da,"cacheProperties",[...Ma,"path","fillRule"]),It(da,"ATTRIBUTE_NAMES",[...Tl,"d"]),nr.setClass(da),nr.setSVGClass(da);const p7=["left","top","radius"],Iw=["radius","startAngle","endAngle","counterClockwise"];class ca extends Hi{static getDefaults(){return Ft(Ft({},super.getDefaults()),ca.ownDefaults)}constructor(e){super(),Object.assign(this,ca.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Xn(this.startAngle),Xn(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(ys)}getRadiusY(){return this.get("radius")*this.get(Qs)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Iw,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,r=Xn(this.startAngle),s=Xn(this.endAngle),i=Ca(r)*t,o=Ta(r)*t,u=Ca(s)*t,l=Ta(s)*t,a=e>180?1:0,c=this.counterClockwise?0:1;return['<path d="M '.concat(i," ").concat(o," A ").concat(t," ").concat(t," 0 ").concat(a," ").concat(c," ").concat(u," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,r){const s=Na(e,this.ATTRIBUTE_NAMES,r),{left:i=0,top:o=0,radius:u=0}=s;return new this(Ft(Ft({},Cn(s,p7)),{},{radius:u,left:i-u,top:o-u}))}static fromObject(e){return super._fromObject(e)}}It(ca,"type","Circle"),It(ca,"cacheProperties",[...Ma,...Iw]),It(ca,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),It(ca,"ATTRIBUTE_NAMES",["cx","cy","r",...Tl]),nr.setClass(ca),nr.setSVGClass(ca);const m7=["x1","y1","x2","y2"],g7=["x1","y1","x2","y2"],Gm=["x1","x2","y1","y2"];class us extends Hi{constructor(){let[e,t,r,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,us.ownDefaults),this.setOptions(i),this.x1=e,this.x2=r,this.y1=t,this.y2=s,this._setWidthHeight();const{left:o,top:u}=i;typeof o=="number"&&this.set(tn,o),typeof u=="number"&&this.set(ps,u)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:s}=this;this.width=Math.abs(r-e),this.height=Math.abs(s-t);const{left:i,top:o,width:u,height:l}=va([{x:e,y:t},{x:r,y:s}]),a=new le(i+u/2,o+l/2);this.setPositionByOrigin(a,Ur,Ur)}_set(e,t){return super._set(e,t),Gm.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var s;Ys(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new le((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ft(Ft({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:s,width:i,height:o}=this,u=e<=t?-1:1,l=r<=s?-1:1;return{x1:u*i/2,x2:u*-i/2,y1:l*o/2,y2:l*-o/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(s,`" />
`)]}static async fromElement(e,t,r){const s=Na(e,this.ATTRIBUTE_NAMES,r),{x1:i=0,y1:o=0,x2:u=0,y2:l=0}=s;return new this([i,o,u,l],Cn(s,m7))}static fromObject(e){let{x1:t,y1:r,x2:s,y2:i}=e,o=Cn(e,g7);return this._fromObject(Ft(Ft({},o),{},{points:[t,r,s,i]}),{extraParam:"points"})}}It(us,"type","Line"),It(us,"cacheProperties",[...Ma,...Gm]),It(us,"ATTRIBUTE_NAMES",Tl.concat(Gm)),nr.setClass(us),nr.setSVGClass(us);class Vl extends Hi{static getDefaults(){return Ft(Ft({},super.getDefaults()),Vl.ownDefaults)}constructor(e){super(),Object.assign(this,Vl.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}It(Vl,"type","Triangle"),It(Vl,"ownDefaults",{width:100,height:100}),nr.setClass(Vl),nr.setSVGClass(Vl);const Fw=["rx","ry"];class ha extends Hi{static getDefaults(){return Ft(Ft({},super.getDefaults()),ha.ownDefaults)}constructor(e){super(),Object.assign(this,ha.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(ys)}getRy(){return this.get("ry")*this.get(Qs)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Fw,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,Ud,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const s=Na(e,this.ATTRIBUTE_NAMES,r);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}function y7(n){if(!n)return[];const e=n.replace(/,/g," ").trim().split(/\s+/),t=[];for(let r=0;r<e.length;r+=2)t.push({x:parseFloat(e[r]),y:parseFloat(e[r+1])});return t}It(ha,"type","Ellipse"),It(ha,"cacheProperties",[...Ma,...Fw]),It(ha,"ownDefaults",{rx:0,ry:0}),It(ha,"ATTRIBUTE_NAMES",[...Tl,"cx","cy","rx","ry"]),nr.setClass(ha),nr.setSVGClass(ha);const b7=["left","top"],Bw={exactBoundingBox:!1};class bo extends Hi{static getDefaults(){return Ft(Ft({},super.getDefaults()),bo.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),It(this,"strokeDiff",void 0),Object.assign(this,bo.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:s}=t;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(tn,r),typeof s=="number"&&this.set(ps,s)}isOpen(){return!0}_projectStrokeOnPoints(e){return a8(this.points,e,this.isOpen())}_calcDimensions(e){e=Ft({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(a=>a.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new le,strokeOffset:new le,strokeDiff:new le};const r=va(t),s=wp(Ft(Ft({},e),{},{scaleX:1,scaleY:1})),i=va(this.points.map(a=>as(a,s,!0))),o=new le(this.scaleX,this.scaleY);let u=r.left+r.width/2,l=r.top+r.height/2;return this.exactBoundingBox&&(u-=l*Math.tan(Xn(this.skewX)),l-=u*Math.tan(Xn(this.skewY))),Ft(Ft({},r),{},{pathOffset:new le(u,l),strokeOffset:new le(i.left,i.top).subtract(new le(r.left,r.top)).multiply(o),strokeDiff:new le(r.width,r.height).subtract(new le(i.width,i.height)).multiply(o)})}_findCenterFromElement(){const e=va(this.points);return new le(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:s,height:i,pathOffset:o,strokeOffset:u,strokeDiff:l}=this._calcDimensions();this.set({width:s,height:i,pathOffset:o,strokeOffset:u,strokeDiff:l}),e&&this.setPositionByOrigin(new le(t+s/2,r+i/2),Ur,Ur)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new le(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(e).some(u=>this.strokeUniform||this.constructor.layoutProperties.includes(u))){var t,r;const{width:u,height:l}=this._calcDimensions(e);o=new le((t=e.width)!==null&&t!==void 0?t:u,(r=e.height)!==null&&r!==void 0?r:l)}else{var s,i;o=new le((s=e.width)!==null&&s!==void 0?s:this.width,(i=e.height)!==null&&i!==void 0?i:this.height)}return o.multiply(new le(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,s=super._set(e,t);return this.exactBoundingBox&&r&&((e===ys||e===Qs)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),s}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ft(Ft({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:r,y:s}=t;return{x:r,y:s}})})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,s=Zr.NUM_FRACTION_DIGITS;for(let i=0,o=this.points.length;i<o;i++)e.push(vn(this.points[i].x-t,s),",",vn(this.points[i].y-r,s)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,r=this.pathOffset.x,s=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-s);for(let i=0;i<t;i++){const o=this.points[i];e.lineTo(o.x-r,o.y-s)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(y7(e.getAttribute("points")),Ft(Ft({},Cn(Na(e,this.ATTRIBUTE_NAMES,r),b7)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}It(bo,"ownDefaults",Bw),It(bo,"type","Polyline"),It(bo,"layoutProperties",[mc,gc,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),It(bo,"cacheProperties",[...Ma,"points"]),It(bo,"ATTRIBUTE_NAMES",[...Tl]),nr.setClass(bo),nr.setSVGClass(bo);class _f extends bo{isOpen(){return!1}}It(_f,"ownDefaults",Bw),It(_f,"type","Polygon"),nr.setClass(_f),nr.setSVGClass(_f);class zw extends Hi{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const r in t)for(const s in t[r])for(const i in t[r][s])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const r=t===void 0?this.styles:{0:this.styles[t]};for(const s in r)for(const i in r[s])if(r[s][i][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,s,i=0,o=!0,u=0;for(const l in t){r=0;for(const a in t[l]){const c=t[l][a]||{};i++,c[e]!==void 0?(s?c[e]!==s&&(o=!1):s=c[e],c[e]===this[e]&&delete c[e]):o=!1,Object.keys(c).length!==0?r++:delete t[l][a]}r===0&&delete t[l]}for(let l=0;l<this._textLines.length;l++)u+=this._textLines[l].length;o&&i===u&&(this[e]=s,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,s,i;for(s in t){for(i in r=t[s],r)delete r[i][e],Object.keys(r[i]).length===0&&delete r[i];Object.keys(r).length===0&&delete t[s]}}_extendStyles(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const i=f1(Ft(Ft({},this._getStyleDeclaration(r,s)),t),o=>o!==void 0);this._setStyleDeclaration(r,s,i)}getSelectionStyles(e,t,r){const s=[];for(let i=e;i<(t||e);i++)s.push(this.getStyleAtPosition(i,r));return s}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,s):this._getStyleDeclaration(r,s)}setSelectionStyles(e,t,r){for(let s=t;s<(r||t);s++)this._extendStyles(s,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const s=this.styles&&this.styles[e];return s&&(r=s[t])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(e,t){return Ft(Ft({},bc(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}It(zw,"_styleProperties",S_);const v7=/  +/g,w7=/"/g;function j0(n,e,t,r,s){return"		".concat(function(i,o){let{left:u,top:l,width:a,height:c}=o,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Zr.NUM_FRACTION_DIGITS;const f=Ch(oi,i,!1),[h,p,g,m]=[u,l,a,c].map(y=>vn(y,d));return"<rect ".concat(f,' x="').concat(h,'" y="').concat(p,'" width="').concat(g,'" height="').concat(m,'"></rect>')}(n,{left:e,top:t,width:r,height:s}),`
`)}const x7=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let M0;class Ki extends zw{static getDefaults(){return Ft(Ft({},super.getDefaults()),Ki.ownDefaults)}constructor(e,t){super(),It(this,"__charBounds",[]),Object.assign(this,Ki.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=Nw(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Fo)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,s,i,o,u;for(let l=0,a=this._textLines.length;l<a;l++)if((this.textAlign===Fo||l!==a-1&&!this.isEndOfWrapping(l))&&(s=0,i=this._textLines[l],t=this.getLineWidth(l),t<this.width&&(u=this.textLines[l].match(this._reSpacesAndTabs)))){r=u.length,e=(this.width-t)/r;for(let c=0;c<=i.length;c++)o=this.__charBounds[l][c],this._reSpaceAndTab.test(i[c])?(o.width+=e,o.kernedWidth+=e,o.left+=s,s+=e):o.left+=s}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<r.length;s++){if(e<=r[s].length)return{lineIndex:s,charIndex:e};e-=r[s].length+this.missingNewlineOffset(s,t)}return{lineIndex:s-1,charIndex:r[s-1].length<e?r[s-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===gs?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Ur:e.textBaseline="middle";break;case"ascender":e.textBaseline=ps;break;case"descender":e.textBaseline=Fm}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const s=this.getLineWidth(t);s>e&&(e=s)}return e}_renderTextLine(e,t,r,s,i,o){this._renderChars(e,t,r,s,i,o)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let s=this._getTopOffset();for(let i=0,o=this._textLines.length;i<o;i++){const u=this.getHeightOfLine(i);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",i)){s+=u;continue}const l=this._textLines[i].length,a=this._getLineLeftOffset(i);let c,d,f=0,h=0,p=this.getValueOfPropertyAt(i,0,"textBackgroundColor");const g=this.getHeightOfLineImpl(i);for(let m=0;m<l;m++){const y=this.__charBounds[i][m];d=this.getValueOfPropertyAt(i,m,"textBackgroundColor"),this.path?(e.save(),e.translate(y.renderLeft,y.renderTop),e.rotate(y.angle),e.fillStyle=d,d&&e.fillRect(-y.width/2,-g*(1-this._fontSizeFraction),y.width,g),e.restore()):d!==p?(c=r+a+h,this.direction==="rtl"&&(c=this.width-c-f),e.fillStyle=p,p&&e.fillRect(c,s,f,g),h=y.left,f=y.width,p=d):f+=y.kernedWidth}d&&!this.path&&(c=r+a+h,this.direction==="rtl"&&(c=this.width-c-f),e.fillStyle=d,e.fillRect(c,s,f,g)),s+=u}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,s){const i=th.getFontCache(t),o=this._getFontDeclaration(t),u=r?r+e:e,l=r&&o===this._getFontDeclaration(s),a=t.fontSize/this.CACHE_FONT_SIZE;let c,d,f,h;if(r&&i.has(r)&&(f=i.get(r)),i.has(e)&&(h=c=i.get(e)),l&&i.has(u)&&(d=i.get(u),h=d-f),c===void 0||f===void 0||d===void 0){const p=function(){return M0||(M0=to({width:0,height:0}).getContext("2d")),M0}();this._setTextStyles(p,t,!0),c===void 0&&(h=c=p.measureText(e).width,i.set(e,c)),f===void 0&&l&&r&&(f=p.measureText(r).width,i.set(r,f)),l&&d===void 0&&(d=p.measureText(u).width,i.set(u,d),h=d-f)}return{width:c*a,kernedWidth:h*a}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,s=0;const i=this.pathSide===qn,o=this.path,u=this._textLines[e],l=u.length,a=new Array(l);this.__charBounds[e]=a;for(let c=0;c<l;c++){const d=u[c];r=this._getGraphemeBox(d,e,c,t),a[c]=r,s+=r.kernedWidth,t=d}if(a[l]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let c=0;const d=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case tn:c=i?d-s:0;break;case Ur:c=(d-s)/2;break;case qn:c=i?0:d-s}c+=this.pathStartOffset*(i?-1:1);for(let f=i?l-1:0;i?f>=0:f<l;i?f--:f++)r=a[f],c>d?c%=d:c<0&&(c+=d),this._setGraphemeOnPath(c,r),c+=r.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,s=this.path,i=G8(s.path,r,s.segmentsInfo);t.renderLeft=i.x-s.pathOffset.x,t.renderTop=i.y-s.pathOffset.y,t.angle=i.angle+(this.pathSide===qn?Math.PI:0)}_getGraphemeBox(e,t,r,s,i){const o=this.getCompleteStyleDeclaration(t,r),u=s?this.getCompleteStyleDeclaration(t,r-1):{},l=this._measureChar(e,o,s,u);let a,c=l.kernedWidth,d=l.width;this.charSpacing!==0&&(a=this._getWidthOfCharSpacing(),d+=a,c+=a);const f={width:d,left:0,height:o.fontSize,kernedWidth:c,deltaY:o.deltaY};if(r>0&&!i){const h=this.__charBounds[t][r-1];f.left=h.left+h.width+l.kernedWidth-l.width}return f}getHeightOfLineImpl(e){const t=this.__lineHeights;if(t[e])return t[e];let r=this.getHeightOfChar(e,0);for(let s=1,i=this._textLines[e].length;s<i;s++)r=Math.max(this.getHeightOfChar(e,s),r);return t[e]=r*this._fontSizeMult}getHeightOfLine(e){return this.getHeightOfLineImpl(e)*this.lineHeight}calcTextHeight(){let e=0;for(let t=0,r=this._textLines.length;t<r;t++)e+=t===r-1?this.getHeightOfLineImpl(t):this.getHeightOfLine(t);return e}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const s=this._getLeftOffset(),i=this._getTopOffset();for(let o=0,u=this._textLines.length;o<u;o++)this._renderTextLine(t,e,this._textLines[o],s+this._getLineLeftOffset(o),i+r+this.getHeightOfLineImpl(o),o),r+=this.getHeightOfLine(o);e.restore()}_renderTextFill(e){(this.fill||this.styleHas(oi))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,s,i,o){const u=this.textAlign.includes(Fo),l=this.path,a=!u&&this.charSpacing===0&&this.isEmptyStyles(o)&&!l,c=this.direction==="ltr",d=this.direction==="ltr"?1:-1,f=t.direction;let h,p,g,m,y,b="",v=0;if(t.save(),f!==this.direction&&(t.canvas.setAttribute("dir",c?"ltr":"rtl"),t.direction=c?"ltr":"rtl",t.textAlign=c?tn:qn),i-=this.getHeightOfLineImpl(o)*this._fontSizeFraction,a)return this._renderChar(e,t,o,0,r.join(""),s,i),void t.restore();for(let k=0,j=r.length-1;k<=j;k++)m=k===j||this.charSpacing||l,b+=r[k],g=this.__charBounds[o][k],v===0?(s+=d*(g.kernedWidth-g.width),v+=g.width):v+=g.kernedWidth,u&&!m&&this._reSpaceAndTab.test(r[k])&&(m=!0),m||(h=h||this.getCompleteStyleDeclaration(o,k),p=this.getCompleteStyleDeclaration(o,k+1),m=x1(h,p,!1)),m&&(l?(t.save(),t.translate(g.renderLeft,g.renderTop),t.rotate(g.angle),this._renderChar(e,t,o,k,b,-v/2,0),t.restore()):(y=s,this._renderChar(e,t,o,k,b,y,i)),b="",h=p,s+=d*v,v=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,s=to({width:t,height:r}),i=s.getContext("2d");return s.width=t,s.height=r,i.beginPath(),i.moveTo(0,0),i.lineTo(t,0),i.lineTo(t,r),i.lineTo(0,r),i.closePath(),i.translate(t/2,r/2),i.fillStyle=e.toLive(i),this._applyPatternGradientTransform(i,e),i.fill(),i.createPattern(s,"no-repeat")}handleFiller(e,t,r){let s,i;return Ys(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(s=-this.width/2,i=-this.height/2,e.translate(s,i),e[t]=this._applyPatternGradientTransformText(r),{offsetX:s,offsetY:i}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:s}=t;return e.lineWidth=s,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,s,i,o,u){const l=this._getStyleDeclaration(r,s),a=this.getCompleteStyleDeclaration(r,s),c=e==="fillText"&&a.fill,d=e==="strokeText"&&a.stroke&&a.strokeWidth;if(d||c){if(t.save(),t.font=this._getFontDeclaration(a),l.textBackgroundColor&&this._removeShadow(t),l.deltaY&&(u+=l.deltaY),c){const f=this._setFillStyles(t,a);t.fillText(i,o-f.offsetX,u-f.offsetY)}if(d){const f=this._setStrokeStyles(t,a);t.strokeText(i,o-f.offsetX,u-f.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const s=this.get2DCursorLocation(e,!0),i=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),o=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),u={fontSize:i*r.size,deltaY:o+i*r.baseline};this.setSelectionStyles(u,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,s=this.textAlign,i=this.direction,o=this.isEndOfWrapping(e);let u=0;return s===Fo||s===rh&&!o||s===eh&&!o||s===Gd&&!o?0:(s===Ur&&(u=r/2),s===qn&&(u=r),s===rh&&(u=r/2),s===eh&&(u=r),i==="rtl"&&(s===qn||s===Fo||s===eh?u=0:s===tn||s===Gd?u=-r:s!==Ur&&s!==rh||(u=-r/2)),u)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var s;return(s=this._getStyleDeclaration(e,t)[r])!==null&&s!==void 0?s:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const s=this._getLeftOffset(),i=this.path,o=this._getWidthOfCharSpacing(),u=t==="linethrough"?.5:t==="overline"?1:0,l=this.offsets[t];for(let a=0,c=this._textLines.length;a<c;a++){const d=this.getHeightOfLine(a);if(!this[t]&&!this.styleHas(t,a)){r+=d;continue}const f=this._textLines[a],h=d/this.lineHeight,p=this._getLineLeftOffset(a);let g=0,m=0,y=this.getValueOfPropertyAt(a,0,t),b=this.getValueOfPropertyAt(a,0,oi),v=this.getValueOfPropertyAt(a,0,iu),k=y,j=b,I=v;const U=r+h*(1-this._fontSizeFraction);let P=this.getHeightOfChar(a,0),z=this.getValueOfPropertyAt(a,0,"deltaY");for(let F=0,T=f.length;F<T;F++){const N=this.__charBounds[a][F];k=this.getValueOfPropertyAt(a,F,t),j=this.getValueOfPropertyAt(a,F,oi),I=this.getValueOfPropertyAt(a,F,iu);const C=this.getHeightOfChar(a,F),w=this.getValueOfPropertyAt(a,F,"deltaY");if(i&&k&&j){const _=this.fontSize*I/1e3;e.save(),e.fillStyle=b,e.translate(N.renderLeft,N.renderTop),e.rotate(N.angle),e.fillRect(-N.kernedWidth/2,l*C+w-u*_,N.kernedWidth,_),e.restore()}else if((k!==y||j!==b||C!==P||I!==v||w!==z)&&m>0){const _=this.fontSize*v/1e3;let x=s+p+g;this.direction==="rtl"&&(x=this.width-x-m),y&&b&&v&&(e.fillStyle=b,e.fillRect(x,U+l*P+z-u*_,m,_)),g=N.left,m=N.width,y=k,v=I,b=j,P=C,z=w}else m+=N.kernedWidth}let q=s+p+g;this.direction==="rtl"&&(q=this.width-q-m),e.fillStyle=j;const $=this.fontSize*I/1e3;k&&j&&I&&e.fillRect(q,U+l*P+z-u*$,m-o,$),r+=d}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;const o=e.includes("'")||e.includes('"')||e.includes(",")||Ki.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(i?this.CACHE_FONT_SIZE:s,"px"),o].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return w1(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),s=[`
`];let i=[];for(let o=0;o<t.length;o++)r[o]=this.graphemeSplit(t[o]),i=i.concat(r[o],s);return i.pop(),{_unwrappedLines:r,lines:t,graphemeText:i,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ft(Ft({},super.toObject([...dw,...e])),{},{styles:h8(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let s=!1,i=!1;if(typeof e=="object")for(const o in e)o==="path"&&this.setPathInfo(),s=s||r.includes(o),i=i||o==="path";else s=r.includes(e),i=e==="path";return i&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const s=Na(e,Ki.ATTRIBUTE_NAMES,r),i=Ft(Ft({},t),s),{textAnchor:o=tn,textDecoration:u="",dx:l=0,dy:a=0,top:c=0,left:d=0,fontSize:f=o1,strokeWidth:h=1}=i,p=Cn(i,x7),g=new this(Yd(e.textContent||"").trim(),Ft({left:d+l,top:c+a,underline:u.includes("underline"),overline:u.includes("overline"),linethrough:u.includes("line-through"),strokeWidth:0,fontSize:f},p)),m=g.getScaledHeight()/g.height,y=((g.height+g.strokeWidth)*g.lineHeight-g.height)*m,b=g.getScaledHeight()+y;let v=0;return o===Ur&&(v=g.getScaledWidth()/2),o===qn&&(v=g.getScaledWidth()),g.set({left:g.left-v,top:g.top-(b-g.fontSize*(.07+g._fontSizeFraction))/g.lineHeight,strokeWidth:h}),g}static fromObject(e){return this._fromObject(Ft(Ft({},e),{},{styles:f8(e.styles||{},e.text)}),{extraParam:"text"})}}It(Ki,"textLayoutProperties",fw),It(Ki,"cacheProperties",[...Ma,...dw]),It(Ki,"ownDefaults",k_),It(Ki,"type","Text"),It(Ki,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),It(Ki,"ATTRIBUTE_NAMES",Tl.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),_w(Ki,[class extends uw{_toSVG(){const n=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(n){const e=this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0}),t=this.path;return t?e+t._createBaseSVGMarkup(t._toSVG(),{reviver:n,withShadow:!0,additionalTransform:kh(this.calcOwnMatrix())}):e}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:e,textSpans:t}=n;const r=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(w7,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(n,e){const t=[],r=[];let s,i=n;this.backgroundColor&&r.push(...j0(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,u=this._textLines.length;o<u;o++)s=this._getLineLeftOffset(o),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(r,o,e+s,i),this._setSVGTextLineText(t,o,e+s,i),i+=this.getHeightOfLine(o);return{textSpans:t,textBgRects:r}}_createTextCharSpan(n,e,t,r,s){const i=Zr.NUM_FRACTION_DIGITS,o=this.getSvgSpanStyles(e,n!==n.trim()||!!n.match(v7)),u=o?'style="'.concat(o,'"'):"",l=e.deltaY,a=l?' dy="'.concat(vn(l,i),'" '):"",{angle:c,renderLeft:d,renderTop:f,width:h}=s;let p="";if(d!==void 0){const g=h/2;c&&(p=' rotate="'.concat(vn(Ea(c),i),'"'));const m=yc({angle:Ea(c)});m[4]=d,m[5]=f;const y=new le(-g,0).transform(m);t=y.x,r=y.y}return'<tspan x="'.concat(vn(t,i),'" y="').concat(vn(r,i),'" ').concat(a).concat(p).concat(u,">").concat(l8(n),"</tspan>")}_setSVGTextLineText(n,e,t,r){const s=this.getHeightOfLine(e),i=this.textAlign.includes(Fo),o=this._textLines[e];let u,l,a,c,d,f="",h=0;r+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let p=0,g=o.length-1;p<=g;p++)d=p===g||this.charSpacing||this.path,f+=o[p],a=this.__charBounds[e][p],h===0?(t+=a.kernedWidth-a.width,h+=a.width):h+=a.kernedWidth,i&&!d&&this._reSpaceAndTab.test(o[p])&&(d=!0),d||(u=u||this.getCompleteStyleDeclaration(e,p),l=this.getCompleteStyleDeclaration(e,p+1),d=x1(u,l,!0)),d&&(c=this._getStyleDeclaration(e,p),n.push(this._createTextCharSpan(f,c,t,r,a)),f="",u=l,this.direction==="rtl"?t-=h:t+=h,h=0)}_setSVGTextLineBg(n,e,t,r){const s=this._textLines[e],i=this.getHeightOfLine(e)/this.lineHeight;let o,u=0,l=0,a=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let c=0;c<s.length;c++){const{left:d,width:f,kernedWidth:h}=this.__charBounds[e][c];o=this.getValueOfPropertyAt(e,c,"textBackgroundColor"),o!==a?(a&&n.push(...j0(a,t+l,r,u,i)),l=d,u=f,a=o):u+=h}o&&n.push(...j0(a,t+l,r,u,i))}_getSVGLineTopOffset(n){let e,t=0;for(e=0;e<n;e++)t+=this.getHeightOfLine(e);const r=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," text-decoration-thickness: ").concat(vn(this.textDecorationThickness*this.getObjectScaling().y/10,Zr.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(n,e){const{fontFamily:t,strokeWidth:r,stroke:s,fill:i,fontSize:o,fontStyle:u,fontWeight:l,deltaY:a,textDecorationThickness:c,linethrough:d,overline:f,underline:h}=n,p=this.getSvgTextDecoration({underline:h??this.underline,overline:f??this.overline,linethrough:d??this.linethrough}),g=c||this.textDecorationThickness;return[s?Ch(gs,s):"",r?"stroke-width: ".concat(r,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",u?"font-style: ".concat(u,"; "):"",l?"font-weight: ".concat(l,"; "):"",p?"text-decoration: ".concat(p,"; text-decoration-thickness: ").concat(vn(g*this.getObjectScaling().y/10,Zr.NUM_FRACTION_DIGITS),"%; "):"",i?Ch(oi,i):"",a?"baseline-shift: ".concat(-a,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(e=>n[e.replace("-","")]).join(" ")}}]),nr.setClass(Ki),nr.setSVGClass(Ki);class _7{constructor(e){It(this,"target",void 0),It(this,"__mouseDownInPlace",!1),It(this,"__dragStartFired",!1),It(this,"__isDraggingOver",!1),It(this,"__dragStartSelection",void 0),It(this,"__dragImageDisposer",void 0),It(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:s,selectionEnd:i}=t;const o=this.target,u=o.canvas,l=new le(o.flipX?-1:1,o.flipY?-1:1),a=o._getCursorBoundaries(s),c=new le(a.left+a.leftOffset,a.top+a.topOffset).multiply(l).transform(o.calcTransformMatrix()),d=u.getScenePoint(e).subtract(c),f=o.getCanvasRetinaScaling(),h=o.getBoundingRect(),p=c.subtract(new le(h.left,h.top)),g=u.viewportTransform,m=p.add(d).transform(g,!0),y=o.backgroundColor,b=v1(o.styles);o.backgroundColor="";const v={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(v,0,s),o.setSelectionStyles(v,i,o.text.length),o.dirty=!0;const k=o.toCanvasElement({enableRetinaScaling:u.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=y,o.styles=b,o.dirty=!0,Xm(k,{position:"fixed",left:"".concat(-k.width,"px"),border:ms,width:"".concat(k.width/f,"px"),height:"".concat(k.height/f,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{k.remove()},wo(e.target||this.target.hiddenTextarea).body.appendChild(k),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(k,m.x,m.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const s=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},i=t._text.slice(s.selectionStart,s.selectionEnd).join(""),o=Ft({text:t.text,value:i},s);e.dataTransfer.setData("text/plain",i),e.dataTransfer.setData("application/fabric",JSON.stringify({value:i,styles:t.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,o)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,s=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let i=(t=r.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(i&&!s){const o=this.target,u=o.canvas;let l=o.getSelectionStartFromPointer(r);const{styles:a}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},c=i[Math.max(0,i.length-1)],d=0;if(this.__dragStartSelection){const f=this.__dragStartSelection.selectionStart,h=this.__dragStartSelection.selectionEnd;l>f&&l<=h?l=f:l>h&&(l-=h-f),o.removeChars(f,h),delete this.__dragStartSelection}o._reNewline.test(c)&&(o._reNewline.test(o._text[l])||l===o._text.length)&&(i=i.trimEnd()),e.didDrop=!0,e.dropTarget=o,o.insertChars(i,a,l),u.setActiveObject(o),o.enterEditing(r),o.selectionStart=Math.min(l+d,o._text.length),o.selectionEnd=Math.min(o.selectionStart+i.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(qd,{index:l+d,action:"drop"}),u.fire("text:changed",{target:o}),u.contextTopDirty=!0,u.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const s=this.target,i=this.target.canvas,{selectionStart:o,selectionEnd:u}=this.__dragStartSelection,l=((r=t.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||ms;l===ms?(s.selectionStart=o,s.selectionEnd=u,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),l==="move"&&(s.removeChars(o,u),s.selectionStart=s.selectionEnd=o,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(qd,{index:o,action:"dragend"}),i.fire("text:changed",{target:s}),i.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Ky=/[ \n\.,;!\?\-]/;class S7 extends Ki{constructor(){super(...arguments),It(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:s,onComplete:i}=e;return yw({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:s,onComplete:i,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let s=e>0&&this._reSpace.test(r[e])&&(t===-1||!a1.test(r[e-1]))?e-1:e,i=r[s];for(;s>0&&s<r.length&&!Ky.test(i);)s+=t,i=r[s];return t===-1&&Ky.test(i)&&s++,s}selectWord(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const r=this.searchWordBoundary(e,-1),s=Math.max(r,this.searchWordBoundary(e,1));this.selectionStart=r,this.selectionEnd=s,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const r=this.findLineBoundaryLeft(e),s=this.findLineBoundaryRight(e);this.selectionStart=r,this.selectionEnd=s,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;wo(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),s=this.selectionStart,i=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&s!==i||s!==r&&i!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===i||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const s=r.slice(0,e),i=this.graphemeSplit(s).length;if(e===t)return{selectionStart:i,selectionEnd:i};const o=r.slice(e,t);return{selectionStart:i,selectionEnd:i+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(e,t,r){const s=r.slice(0,e).join("").length;return e===t?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),s=r.lineIndex,i=r.charIndex,o=this.getValueOfPropertyAt(s,i,"fontSize")*this.lineHeight,u=t.leftOffset,l=this.getCanvasRetinaScaling(),a=this.canvas.upperCanvasEl,c=a.width/l,d=a.height/l,f=c-o,h=d-o,p=new le(t.left+u,t.top+t.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new le(a.clientWidth/c,a.clientHeight/d));return p.x<0&&(p.x=0),p.x>f&&(p.x=f),p.y<0&&(p.y=0),p.y>h&&(p.y=h),p.x+=this.canvas._offset.left,p.y+=this.canvas._offset.top,{left:"".concat(p.x,"px"),top:"".concat(p.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(Hd),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e,!0),{lineIndex:i,charIndex:o}=this.get2DCursorLocation(t,!0);if(r!==i){if(this.styles[r])for(let u=s;u<this._unwrappedTextLines[r].length;u++)delete this.styles[r][u];if(this.styles[i])for(let u=o;u<this._unwrappedTextLines[i].length;u++){const l=this.styles[i][u];l&&(this.styles[r]||(this.styles[r]={}),this.styles[r][s+u-o]=l)}for(let u=r+1;u<=i;u++)delete this.styles[u];this.shiftLineStyles(i,r-i)}else if(this.styles[r]){const u=this.styles[r],l=o-s;for(let a=s;a<o;a++)delete u[a];for(const a in this.styles[r]){const c=parseInt(a,10);c>=o&&(u[c-l]=u[a],delete u[a])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const s in this.styles){const i=parseInt(s,10);i>e&&(this.styles[i+t]=r[i],r[i-t]||delete this.styles[i])}}insertNewlineStyleObject(e,t,r,s){const i={},o=this._unwrappedTextLines[e].length,u=o===t;let l=!1;r||(r=1),this.shiftLineStyles(e,r);const a=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const d in this.styles[e]){const f=parseInt(d,10);f>=t&&(l=!0,i[f-t]=this.styles[e][d],u&&t===0||delete this.styles[e][d])}let c=!1;for(l&&!u&&(this.styles[e+r]=i,c=!0),(c||o>t)&&r--;r>0;)s&&s[r-1]?this.styles[e+r]={0:Ft({},s[r-1])}:a?this.styles[e+r]={0:Ft({},a)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,s){this.styles||(this.styles={});const i=this.styles[e],o=i?Ft({},i):{};r||(r=1);for(const l in o){const a=parseInt(l,10);a>=t&&(i[a+r]=o[a],o[a-r]||delete i[a])}if(this._forceClearCache=!0,s){for(;r--;)Object.keys(s[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=Ft({},s[r]));return}if(!i)return;const u=i[t?t-1:1];for(;u&&r--;)this.styles[e][t+r]=Ft({},u)}insertNewStyleBlock(e,t,r){const s=this.get2DCursorLocation(t,!0),i=[0];let o,u=0;for(let l=0;l<e.length;l++)e[l]===`
`?(u++,i[u]=0):i[u]++;for(i[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,i[0],r),r=r&&r.slice(i[0]+1)),u&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+i[0],u),o=1;o<u;o++)i[o]>0?this.insertCharStyleObject(s.lineIndex+o,0,i[o],r):r&&this.styles[s.lineIndex+o]&&r[0]&&(this.styles[s.lineIndex+o][0]=r[0]),r=r&&r.slice(i[o]+1);i[o]>0&&this.insertCharStyleObject(s.lineIndex+o,0,i[o],r)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;s>r&&this.removeStyleFromTo(r,s);const i=this.graphemeSplit(e);this.insertNewStyleBlock(i,r,t),this._text=[...this._text.slice(0,r),...i,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=tn:this._selectionDirection===qn&&(this._selectionDirection=tn,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===qn?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=qn:this._selectionDirection===tn&&(this._selectionDirection=qn,this.selectionStart=t),this.selectionEnd=r)}}class k7 extends S7{initHiddenTextarea(){const e=this.canvas&&wo(this.canvas.getElement())||pc(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off",name:"fabricTextarea"}).map(o=>{let[u,l]=o;return t.setAttribute(u,l)});const{top:r,left:s,fontSize:i}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(s,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(i,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o=>{let[u,l]=o;return t.addEventListener(u,this[l].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:r,selectionStart:s,selectionEnd:i}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const o=()=>{this.updateFromTextArea(),this.fire(qd),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void o();const u=this._splitTextIntoLines(r).graphemeText,l=this._text.length,a=u.length,c=this.selectionStart,d=this.selectionEnd,f=c!==d;let h,p,g,m,y=a-l;const b=this.fromStringToGraphemeSelection(s,i,r),v=c>b.selectionStart;f?(p=this._text.slice(c,d),y+=d-c):a<l&&(p=v?this._text.slice(d+y,d):this._text.slice(c,c-y));const k=u.slice(b.selectionEnd-y,b.selectionEnd);if(p&&p.length&&(k.length&&(h=this.getSelectionStyles(c,c+1,!1),h=k.map(()=>h[0])),f?(g=c,m=d):v?(g=d-p.length,m=d):(g=d,m=d+p.length),this.removeStyleFromTo(g,m)),k.length){const{copyPasteData:j}=$o();t&&k.join("")===j.copiedText&&!Zr.disableStyleCopyPaste&&(h=j.copiedTextStyle),this.insertNewStyleBlock(k,c,h)}o()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:s}=t;this.compositionStart=r,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=$o();e.copiedText=this.getSelectedText(),Zr.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,s=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],s+=r.left+r.width),s}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(r),i=s.lineIndex;if(i===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const o=s.charIndex,u=this._getWidthBeforeCursor(i,o),l=this._getIndexOnLine(i+1,u);return this._textLines[i].slice(o).length+l+1+this.missingNewlineOffset(i)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(r),i=s.lineIndex;if(i===0||e.metaKey||e.keyCode===33)return-r;const o=s.charIndex,u=this._getWidthBeforeCursor(i,o),l=this._getIndexOnLine(i-1,u),a=this._textLines[i].slice(0,o),c=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+l-a.length+(1-c)}_getIndexOnLine(e,t){const r=this._textLines[e];let s,i,o=this._getLineLeftOffset(e),u=0;for(let l=0,a=r.length;l<a;l++)if(s=this.__charBounds[e][l].width,o+=s,o>t){i=!0;const c=o-s,d=o,f=Math.abs(c-t);u=Math.abs(d-t)<f?l:l-1;break}return i||(u=r.length-1),u}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===qn);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const s=this.text.length;this.selectionStart=cc(0,this.selectionStart,s),this.selectionEnd=cc(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===tn?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let s;if(e.altKey)s=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=r==="Left"?-1:1,!0;s=this["findLineBoundary".concat(r)](this[t])}return s!==void 0&&this[t]!==s&&(this[t]=s,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=tn,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===qn&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=tn,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===tn&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=qn,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=qn,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const Zy=n=>!!n.button;class C7 extends k7{constructor(){super(...arguments),It(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new _7(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:r}=e;this.canvas&&this.editable&&!Zy(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),r&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=r||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:r}=e;const s=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const i=this.canvas._activeObject;if(i&&i!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||Zy(t)||s||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,s=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,s,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(xo(this.calcTransformMatrix())).add(new le(-this._getLeftOffset(),-this._getTopOffset()));let r=0,s=0,i=0;for(let a=0;a<this._textLines.length&&r<=t.y;a++)r+=this.getHeightOfLine(a),i=a,a>0&&(s+=this._textLines[a-1].length+this.missingNewlineOffset(a-1));let o=Math.abs(this._getLineLeftOffset(i));const u=this._textLines[i].length,l=this.__charBounds[i];for(let a=0;a<u;a++){const c=o+l[a].kernedWidth;if(t.x<=c){Math.abs(t.x-c)<=Math.abs(t.x-o)&&s++;break}o=c,s++}return Math.min(this.flipX?u-s:s,this._text.length)}}const Sf="moveCursorUp",kf="moveCursorDown",Cf="moveCursorLeft",Tf="moveCursorRight",Af="exitEditing",Jy=(n,e)=>{const t=e.getRetinaScaling();n.setTransform(t,0,0,t,0,0);const r=e.viewportTransform;n.transform(r[0],r[1],r[2],r[3],r[4],r[5])},T7=Ft({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Af,27:Af,33:Sf,34:kf,35:Tf,36:Cf,37:Cf,38:Sf,39:Tf,40:kf},keysMapRtl:{9:Af,27:Af,33:Sf,34:kf,35:Cf,36:Tf,37:Tf,38:Sf,39:Cf,40:kf},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class ya extends C7{static getDefaults(){return Ft(Ft({},super.getDefaults()),ya.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,Ft(Ft({},ya.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof Ym&&this.canvas.textEditingManager.remove(this),t instanceof Ym&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),r=this.findAncestorsWithClipPath(),s=r.length>0;let i,o=e;if(s){i=to(e.canvas),o=i.getContext("2d"),Jy(o,this.canvas);const u=this.calcTransformMatrix();o.transform(u[0],u[1],u[2],u[3],u[4],u[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(o,t):this.renderCursor(o,t),s)for(const u of r){const l=u.clipPath,a=to(e.canvas),c=a.getContext("2d");if(Jy(c,this.canvas),!l.absolutePositioned){const d=u.calcTransformMatrix();c.transform(d[0],d[1],d[2],d[3],d[4],d[5])}l.transform(c),l.drawObject(c,!0,{}),this.drawClipPathOnCache(o,l,a)}s&&(e.setTransform(1,0,0,1,0,0),e.drawImage(i,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),s=this._getTopOffset(),i=this._getCursorBoundariesOffsets(e,t);return{left:r,top:s,leftOffset:i.left,topOffset:i.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:s,lineIndex:i}=this.get2DCursorLocation(e);for(let a=0;a<i;a++)t+=this.getHeightOfLine(a);const o=this._getLineLeftOffset(i),u=this.__charBounds[i][s];u&&(r=u.left),this.charSpacing!==0&&s===this._textLines[i].length&&(r-=this._getWidthOfCharSpacing());const l={top:t,left:o+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===qn||this.textAlign===Fo||this.textAlign===eh?l.left*=-1:this.textAlign===tn||this.textAlign===Gd?l.left=o-(r>0?r:0):this.textAlign!==Ur&&this.textAlign!==rh||(l.left=o-(r>0?r:0))),l}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),s=r.lineIndex,i=r.charIndex>0?r.charIndex-1:0,o=this.getValueOfPropertyAt(s,i,"fontSize"),u=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/u,a=this.getValueOfPropertyAt(s,i,"deltaY"),c=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-o*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(s,i,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-l/2,top:c+t.top+a,width:l,height:o}}_renderCursor(e,t,r){const{color:s,opacity:i,left:o,top:u,width:l,height:a}=this.getCursorRenderingData(r,t);e.fillStyle=s,e.globalAlpha=i,e.fillRect(o,u,l,a)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const s=t.selectionStart,i=t.selectionEnd,o=this.textAlign.includes(Fo),u=this.get2DCursorLocation(s),l=this.get2DCursorLocation(i),a=u.lineIndex,c=l.lineIndex,d=u.charIndex<0?0:u.charIndex,f=l.charIndex<0?0:l.charIndex;for(let h=a;h<=c;h++){const p=this._getLineLeftOffset(h)||0;let g=this.getHeightOfLine(h),m=0,y=0,b=0;if(h===a&&(y=this.__charBounds[a][d].left),h>=a&&h<c)b=o&&!this.isEndOfWrapping(h)?this.width:this.getLineWidth(h)||5;else if(h===c)if(f===0)b=this.__charBounds[c][f].left;else{const U=this._getWidthOfCharSpacing();b=this.__charBounds[c][f-1].left+this.__charBounds[c][f-1].width-U}m=g,(this.lineHeight<1||h===c&&this.lineHeight>1)&&(g/=this.lineHeight);let v=r.left+p+y,k=g,j=0;const I=b-y;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",k=1,j=g):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===qn||this.textAlign===Fo||this.textAlign===eh?v=this.width-v-I:this.textAlign===tn||this.textAlign===Gd?v=r.left+p-b:this.textAlign!==Ur&&this.textAlign!==rh||(v=r.left+p-b)),e.fillRect(v,r.top+r.topOffset+j,I,k),r.topOffset+=m}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,oi)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}It(ya,"ownDefaults",T7),It(ya,"type","IText"),nr.setClass(ya),nr.setClass(ya,"i-text");class Wl extends ya{static getDefaults(){return Ft(Ft({},super.getDefaults()),Wl.ownDefaults)}constructor(e,t){super(e,Ft(Ft({},Wl.ownDefaults),t))}static createControls(){return{controls:i8()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Fo)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,s=0;const i={};for(let o=0;o<e.graphemeLines.length;o++)e.graphemeText[s]===`
`&&o>0?(r=0,s++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[s])&&o>0&&(r++,s++),i[o]={line:t,offset:r},s+=e.graphemeLines[o].length,r+=e.graphemeLines[o].length;return i}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];r&&(t=r.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,s=e+1,i=!1;const o=this._styleMap[e],u=this._styleMap[e+1];o&&(e=o.line,r=o.offset),u&&(s=u.line,i=s===e,t=u.offset);const l=e===void 0?this.styles:{line:this.styles[e]};for(const a in l)for(const c in l[a]){const d=parseInt(c,10);if(d>=r&&(!i||d<t))for(const f in l[a][c])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const s=this._styleMap[e];super._setStyleDeclaration(s.line,s.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),s=[];for(let i=0;i<r.wordsData.length;i++)s.push(...this._wrapLine(i,t,r));return this.isWrapping=!1,s}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let s=0;return{wordsData:e.map((i,o)=>{let u=0;const l=t?this.graphemeSplit(i):this.wordSplit(i);return l.length===0?[{word:[],width:0}]:l.map(a=>{const c=t?[a]:this.graphemeSplit(a),d=this._measureWord(c,o,u);return s=Math.max(d,s),u+=c.length+r.length,{word:c,width:d}})}),largestWordWidth:s}}_measureWord(e,t){let r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=0;for(let o=0,u=e.length;o<u;o++)i+=this._getGraphemeBox(e[o],t,o+s,r,!0).kernedWidth,r=e[o];return i}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:s,wordsData:i}=r,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const u=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,a=[],c=l?"":" ";let d=0,f=[],h=0,p=0,g=!0;t-=o;const m=Math.max(t,s,this.dynamicMinWidth),y=i[e];let b;for(h=0,b=0;b<y.length;b++){const{word:v,width:k}=y[b];h+=v.length,d+=p+k-u,d>m&&!g?(a.push(f),f=[],d=k,g=!0):d+=u,g||l||f.push(c),f=f.concat(v),p=l?0:this._measureWord([c],e,h),h++,g=!1}return b&&a.push(f),s+o>this.dynamicMinWidth&&(this.dynamicMinWidth=s-u+o),a}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),s=new Array(r.length);for(let i=0;i<r.length;i++)s[i]=r[i].join("");return t.lines=s,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const s=this._styleMap[t].line;e.set("".concat(s),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}It(Wl,"type","Textbox"),It(Wl,"textLayoutProperties",[...ya.textLayoutProperties,"width"]),It(Wl,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),nr.setClass(Wl);class Qy extends Cp{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:s,group:i}=r;if(!s||!this.shouldPerformLayout(e))return;const{width:o,height:u}=va(Cw(r,s)),l=new le(o,u);if(s.absolutePositioned)return{center:Gu(s.getRelativeCenterPoint(),void 0,i?i.calcTransformMatrix():void 0),size:l};{const a=s.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:c=new le,correction:d=new le}=this.calcBoundingBox(t,e)||{};return{center:c.add(a),correction:d.subtract(a),size:l}}return{center:r.getRelativeCenterPoint().add(a),size:l}}}}It(Qy,"type","clip-path"),nr.setClass(Qy);class tb extends Cp{getInitialSize(e,t){let{target:r}=e,{size:s}=t;return new le(r.width||s.x,r.height||s.y)}}It(tb,"type","fixed"),nr.setClass(tb);class A7 extends Ah{subscribeTargets(e){const t=e.target;e.targets.reduce((r,s)=>(s.parent&&r.add(s.parent),r),new Set).forEach(r=>{r.layoutManager.subscribeTargets({target:r,targets:[t]})})}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce((s,i)=>(i.parent&&s.add(i.parent),s),new Set).forEach(s=>{!r.some(i=>i.parent===s)&&s.layoutManager.unsubscribeTargets({target:s,targets:[t]})})}}class Xl extends Kl{static getDefaults(){return Ft(Ft({},super.getDefaults()),Xl.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Xl.ownDefaults),this.setOptions(t);const{left:r,top:s,layoutManager:i}=t;this.groupInit(e,{left:r,top:s,layoutManager:i??new A7})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(s=>{const i=this._objects.findIndex(u=>u.isInFrontOf(s)),o=i===-1?this.size():i;this.insertAt(o,s)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(vl("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach(s=>{const{parent:i}=s;i&&r.add(i)}),e===S1?r.forEach(s=>{s._onAfterObjectsChange(Kd,t)}):r.forEach(s=>{s._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s=Ft(Ft({hasControls:!1},r),{},{forActiveSelection:!0});for(let i=0;i<this._objects.length;i++)this._objects[i]._renderControls(e,s);super._renderControls(e,t),e.restore()}}It(Xl,"type","ActiveSelection"),It(Xl,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),nr.setClass(Xl),nr.setClass(Xl,"activeSelection");class E7{constructor(){It(this,"resources",{})}applyFilters(e,t,r,s,i){const o=i.getContext("2d");if(!o)return;o.drawImage(t,0,0,r,s);const u={sourceWidth:r,sourceHeight:s,imageData:o.getImageData(0,0,r,s),originalEl:t,originalImageData:o.getImageData(0,0,r,s),canvasEl:i,ctx:o,filterBackend:this};e.forEach(a=>{a.applyTo(u)});const{imageData:l}=u;return l.width===r&&l.height===s||(i.width=l.width,i.height=l.height),o.putImageData(l,0,0),u}}class Uw{constructor(){let{tileSize:e=Zr.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};It(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),It(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=to({width:e,height:t}),s=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=r,this.gl=s)}applyFilters(e,t,r,s,i,o){const u=this.gl,l=i.getContext("2d");if(!u||!l)return;let a;o&&(a=this.getCachedTexture(o,t));const c={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:s,destinationWidth:r,destinationHeight:s,context:u,sourceTexture:this.createTexture(u,r,s,a?void 0:t),targetTexture:this.createTexture(u,r,s),originalTexture:a||this.createTexture(u,r,s,a?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},d=u.createFramebuffer();return u.bindFramebuffer(u.FRAMEBUFFER,d),e.forEach(f=>{f&&f.applyTo(c)}),function(f){const h=f.targetCanvas,p=h.width,g=h.height,m=f.destinationWidth,y=f.destinationHeight;p===m&&g===y||(h.width=m,h.height=y)}(c),this.copyGLTo2D(u,c),u.bindTexture(u.TEXTURE_2D,null),u.deleteTexture(c.sourceTexture),u.deleteTexture(c.targetTexture),u.deleteFramebuffer(d),l.setTransform(1,0,0,1,0,0),c}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,s,i){const{NEAREST:o,TEXTURE_2D:u,RGBA:l,UNSIGNED_BYTE:a,CLAMP_TO_EDGE:c,TEXTURE_MAG_FILTER:d,TEXTURE_MIN_FILTER:f,TEXTURE_WRAP_S:h,TEXTURE_WRAP_T:p}=e,g=e.createTexture();return e.bindTexture(u,g),e.texParameteri(u,d,i||o),e.texParameteri(u,f,i||o),e.texParameteri(u,h,c),e.texParameteri(u,p,c),s?e.texImage2D(u,0,l,l,a,s):e.texImage2D(u,0,l,t,r,0,l,a,null),g}getCachedTexture(e,t,r){const{textureCache:s}=this;if(s[e])return s[e];{const i=this.createTexture(this.gl,t.width,t.height,t,r);return i&&(s[e]=i),i}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,s=t.targetCanvas,i=s.getContext("2d");if(!i)return;i.translate(0,s.height),i.scale(1,-1);const o=r.height-s.height;i.drawImage(r,0,o,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),s=t.destinationWidth,i=t.destinationHeight,o=s*i*4;if(!r)return;const u=new Uint8Array(this.imageBuffer,0,o),l=new Uint8ClampedArray(this.imageBuffer,0,o);e.readPixels(0,0,s,i,e.RGBA,e.UNSIGNED_BYTE,u);const a=new ImageData(l,s,i);r.putImageData(a,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const s=e.getParameter(r.UNMASKED_RENDERER_WEBGL),i=e.getParameter(r.UNMASKED_VENDOR_WEBGL);s&&(t.renderer=s.toLowerCase()),i&&(t.vendor=i.toLowerCase())}return this.gpuInfo=t,t}}let N0;function j7(){const{WebGLProbe:n}=$o();return n.queryWebGL(Aa()),Zr.enableGLFiltering&&n.isSupported(Zr.textureSize)?new Uw({tileSize:Zr.textureSize}):new E7}function O0(){return!N0&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(N0=j7()),N0}const M7=["filters","resizeFilter","src","crossOrigin","type"],qw=["cropX","cropY"];class Vs extends Hi{static getDefaults(){return Ft(Ft({},super.getDefaults()),Vs.ownDefaults)}constructor(e,t){super(),It(this,"_lastScaleX",1),It(this,"_lastScaleY",1),It(this,"_filterScalingX",1),It(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Vs.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(wl()),this.setElement(typeof e=="string"?(this.canvas&&wo(this.canvas.getElement())||pc()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(r),(t=e.classList)===null||t===void 0||t.add(Vs.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=O0(!1);t instanceof Uw&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&$o().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(r=>{r&&t.push(r.toObject())}),Ft(Ft({},super.toObject([...qw,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,s=-this.height/2;let i=[],o=[],u="",l="";if(!t)return[];if(this.hasCrop()){const a=wl();i.push('<clipPath id="imageCrop_'+a+`">
`,'	<rect x="'+r+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),u=' clip-path="url(#imageCrop_'+a+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(s-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(l).concat(u,`></image>
`)),this.stroke||this.strokeDashArray){const a=this.fill;this.fill=null,o=['	<rect x="'.concat(r,'" y="').concat(s,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=a}return i=this.paintFirst!==oi?i.concat(o,e):i.concat(e,o),i}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ud(e,{crossOrigin:t,signal:r}).then(s=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(s)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),s=r.x,i=r.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||s>t&&i>t)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=i);const u=to(o),{width:l,height:a}=o;this._element=u,this._lastScaleX=e.scaleX=s,this._lastScaleY=e.scaleY=i,O0().applyFilters([e],o,l,a,this._element),this._filterScalingX=u.width/this._originalElement.width,this._filterScalingY=u.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(i=>i&&!i.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,s=t.naturalHeight||t.height;if(this._element===this._originalElement){const i=to({width:r,height:s});this._element=i,this._filteredEl=i}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,s),this._lastScaleX=1,this._lastScaleY=1);O0().applyFilters(e,this._originalElement,r,s,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,s=this._filterScalingY,i=this.width,o=this.height,u=Math.max(this.cropX,0),l=Math.max(this.cropY,0),a=t.naturalWidth||t.width,c=t.naturalHeight||t.height,d=u*r,f=l*s,h=Math.min(i*r,a-d),p=Math.min(o*s,c-f),g=-i/2,m=-o/2,y=Math.min(i,a/r-u),b=Math.min(o,c/s-l);t&&e.drawImage(t,d,f,h,p,g,m,y,b)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=__(this.preserveAspectRatio||""),t=this.width,r=this.height,s={width:t,height:r};let i,o=this._element.width,u=this._element.height,l=1,a=1,c=0,d=0,f=0,h=0;return!e||e.alignX===ms&&e.alignY===ms?(l=t/o,a=r/u):(e.meetOrSlice==="meet"&&(l=a=F8(this._element,s),i=(t-o*l)/2,e.alignX==="Min"&&(c=-i),e.alignX==="Max"&&(c=i),i=(r-u*a)/2,e.alignY==="Min"&&(d=-i),e.alignY==="Max"&&(d=i)),e.meetOrSlice==="slice"&&(l=a=B8(this._element,s),i=o-t/l,e.alignX==="Mid"&&(f=i/2),e.alignX==="Max"&&(f=i),i=u-r/a,e.alignY==="Mid"&&(h=i/2),e.alignY==="Max"&&(h=i),o=t/l,u=r/a)),{width:o,height:u,scaleX:l,scaleY:a,offsetLeft:c,offsetTop:d,cropX:f,cropY:h}}static fromObject(e,t){let{filters:r,resizeFilter:s,src:i,crossOrigin:o,type:u}=e,l=Cn(e,M7);return Promise.all([ud(i,Ft(Ft({},t),{},{crossOrigin:o})),r&&Sh(r,t),s&&Sh([s],t),xp(l,t)]).then(a=>{let[c,d=[],[f]=[],h={}]=a;return new this(c,Ft(Ft({},l),{},{src:i,filters:d,resizeFilter:f},h))})}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return ud(e,{crossOrigin:t,signal:r}).then(i=>new this(i,s))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const s=Na(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(s["xlink:href"]||s.href,t,s).catch(i=>(vl("log","Unable to parse Image",i),null))}}It(Vs,"type","Image"),It(Vs,"cacheProperties",[...Ma,...qw]),It(Vs,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),It(Vs,"CSS_CANVAS","canvas-img"),It(Vs,"ATTRIBUTE_NAMES",[...Tl,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),nr.setClass(Vs),nr.setSVGClass(Vs);Sp(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Ap=n=>n.webgl!==void 0,k1="precision highp float",N7=`
    `.concat(k1,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),O7=["type"],P7=["type"],L7=new RegExp(k1,"g");class ai{get type(){return this.constructor.type}constructor(){let e=Cn(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},O7);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return N7}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=$o();s!=="highp"&&(t=t.replace(L7,k1.replace("highp",s)));const i=e.createShader(e.VERTEX_SHADER),o=e.createShader(e.FRAGMENT_SHADER),u=e.createProgram();if(!i||!o||!u)throw new Bo("Vertex, fragment shader or program creation error");if(e.shaderSource(i,r),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Bo("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(i)));if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new Bo("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(o)));if(e.attachShader(u,i),e.attachShader(u,o),e.linkProgram(u),!e.getProgramParameter(u,e.LINK_STATUS))throw new Bo('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(u)));const l=this.getUniformLocations(e,u)||{};return l.uStepW=e.getUniformLocation(u,"uStepW"),l.uStepH=e.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:this.getAttributeLocations(e,u),uniformLocations:l}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,s={};for(let i=0;i<r.length;i++)s[r[i]]=e.getUniformLocation(t,r[i]);return s}sendAttributeData(e,t,r){const s=t.aPosition,i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,s=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===s||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,s)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){Ap(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,s=to({width:t,height:r});e.helpLayer=s}}toObject(){const e=Object.keys(this.constructor.defaults||{});return Ft({type:this.type},e.reduce((t,r)=>(t[r]=this[r],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Cn(e,P7))}}It(ai,"type","BaseFilter"),It(ai,"uniformLocations",[]);const R7={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class Ef extends ai{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(R7[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const r=new an(this.color).getSource(),s=this.alpha,i=r[0]*s,o=r[1]*s,u=r[2]*s,l=1-s;for(let a=0;a<t.length;a+=4){const c=t[a],d=t[a+1],f=t[a+2];let h,p,g;switch(this.mode){case"multiply":h=c*i/255,p=d*o/255,g=f*u/255;break;case"screen":h=255-(255-c)*(255-i)/255,p=255-(255-d)*(255-o)/255,g=255-(255-f)*(255-u)/255;break;case"add":h=c+i,p=d+o,g=f+u;break;case"difference":h=Math.abs(c-i),p=Math.abs(d-o),g=Math.abs(f-u);break;case"subtract":h=c-i,p=d-o,g=f-u;break;case"darken":h=Math.min(c,i),p=Math.min(d,o),g=Math.min(f,u);break;case"lighten":h=Math.max(c,i),p=Math.max(d,o),g=Math.max(f,u);break;case"overlay":h=i<128?2*c*i/255:255-2*(255-c)*(255-i)/255,p=o<128?2*d*o/255:255-2*(255-d)*(255-o)/255,g=u<128?2*f*u/255:255-2*(255-f)*(255-u)/255;break;case"exclusion":h=i+c-2*i*c/255,p=o+d-2*o*d/255,g=u+f-2*u*f/255;break;case"tint":h=i+c*l,p=o+d*l,g=u+f*l}t[a]=h,t[a+1]=p,t[a+2]=g}}sendUniformData(e,t){const r=new an(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}It(Ef,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),It(Ef,"type","BlendColor"),It(Ef,"uniformLocations",["uColor"]),nr.setClass(Ef);const D7={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},I7=["type","image"];class jf extends ai{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return D7[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:s},filterBackend:{resources:i}}=e;const o=this.image;i.blendImage||(i.blendImage=Aa());const u=i.blendImage,l=u.getContext("2d");u.width!==r||u.height!==s?(u.width=r,u.height=s):l.clearRect(0,0,r,s),l.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),l.drawImage(o.getElement(),0,0,r,s);const a=l.getImageData(0,0,r,s).data;for(let c=0;c<t.length;c+=4){const d=t[c],f=t[c+1],h=t[c+2],p=t[c+3],g=a[c],m=a[c+1],y=a[c+2],b=a[c+3];switch(this.mode){case"multiply":t[c]=d*g/255,t[c+1]=f*m/255,t[c+2]=h*y/255,t[c+3]=p*b/255;break;case"mask":t[c+3]=b}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return Ft(Ft({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:s}=e,i=Cn(e,I7);return Vs.fromObject(s,t).then(o=>new this(Ft(Ft({},i),{},{image:o})))}}It(jf,"type","BlendImage"),It(jf,"defaults",{mode:"multiply",alpha:1}),It(jf,"uniformLocations",["uTransformMatrix","uImage"]),nr.setClass(jf);class Mf extends ai{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(e){Ap(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:t,width:r,height:s}}=e;this.aspectRatio=r/s,this.horizontal=!0;let i=this.getBlurValue()*r;const o=new Uint8ClampedArray(t),u=15,l=4*r;for(let a=0;a<t.length;a+=4){let c=0,d=0,f=0,h=0,p=0;const g=a-a%l,m=g+l;for(let y=-14;y<u;y++){const b=y/u,v=4*Math.floor(i*b),k=1-Math.abs(b);let j=a+v;j<g?j=g:j>m&&(j=m);const I=t[j+3]*k;c+=t[j]*I,d+=t[j+1]*I,f+=t[j+2]*I,h+=I,p+=k}o[a]=c/h,o[a+1]=d/h,o[a+2]=f/h,o[a+3]=h/p}this.horizontal=!1,i=this.getBlurValue()*s;for(let a=0;a<o.length;a+=4){let c=0,d=0,f=0,h=0,p=0;const g=a%l,m=o.length-l+g;for(let y=-14;y<u;y++){const b=y/u,v=Math.floor(i*b)*l,k=1-Math.abs(b);let j=a+v;j<g?j=g:j>m&&(j=m);const I=o[j+3]*k;c+=o[j]*I,d+=o[j+1]*I,f+=o[j+2]*I,h+=I,p+=k}t[a]=c/h,t[a+1]=d/h,t[a+2]=f/h,t[a+3]=h/p}}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return this.blur===0}getBlurValue(){let e=1;const{horizontal:t,aspectRatio:r}=this;return t?r>1&&(e=1/r):r<1&&(e=r),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}It(Mf,"type","Blur"),It(Mf,"defaults",{blur:0}),It(Mf,"uniformLocations",["uDelta"]),nr.setClass(Mf);class Nf extends ai{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let s=0;s<t.length;s+=4)t[s]+=r,t[s+1]+=r,t[s+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}It(Nf,"type","Brightness"),It(Nf,"defaults",{brightness:0}),It(Nf,"uniformLocations",["uBrightness"]),nr.setClass(Nf);const Hw={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class zu extends ai{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,r=this.matrix,s=this.colorsOnly;for(let i=0;i<t.length;i+=4){const o=t[i],u=t[i+1],l=t[i+2];if(t[i]=o*r[0]+u*r[1]+l*r[2]+255*r[4],t[i+1]=o*r[5]+u*r[6]+l*r[7]+255*r[9],t[i+2]=o*r[10]+u*r[11]+l*r[12]+255*r[14],!s){const a=t[i+3];t[i]+=a*r[3],t[i+1]+=a*r[8],t[i+2]+=a*r[13],t[i+3]=o*r[15]+u*r[16]+l*r[17]+a*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,s=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],i=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,s),e.uniform4fv(t.uConstants,i)}toObject(){return Ft(Ft({},super.toObject()),{},{matrix:[...this.matrix]})}}function au(n,e){var t;const r=(It(t=class extends zu{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),It(t,"defaults",{colorsOnly:!1,matrix:e}),t);return nr.setClass(r,n),r}It(zu,"type","ColorMatrix"),It(zu,"defaults",Hw),It(zu,"uniformLocations",["uColorMatrix","uConstants"]),nr.setClass(zu);au("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);au("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);au("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);au("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);au("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);au("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);au("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class eb extends ai{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){Ap(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(r=>nr.getClass(r.type).fromObject(r,t))).then(r=>new this({subFilters:r}))}}It(eb,"type","Composed"),nr.setClass(eb);class Of extends ai{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),s=259*(r+255)/(255*(259-r));for(let i=0;i<t.length;i+=4)t[i]=s*(t[i]-128)+128,t[i+1]=s*(t[i+1]-128)+128,t[i+2]=s*(t[i+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}It(Of,"type","Contrast"),It(Of,"defaults",{contrast:0}),It(Of,"uniformLocations",["uContrast"]),nr.setClass(Of);const F7={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Pf extends ai{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return F7[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,s=this.matrix,i=Math.round(Math.sqrt(s.length)),o=Math.floor(i/2),u=t.width,l=t.height,a=e.ctx.createImageData(u,l),c=a.data,d=this.opaque?1:0;let f,h,p,g,m,y,b,v,k,j,I,U,P;for(I=0;I<l;I++)for(j=0;j<u;j++){for(m=4*(I*u+j),f=0,h=0,p=0,g=0,P=0;P<i;P++)for(U=0;U<i;U++)b=I+P-o,y=j+U-o,b<0||b>=l||y<0||y>=u||(v=4*(b*u+y),k=s[P*i+U],f+=r[v]*k,h+=r[v+1]*k,p+=r[v+2]*k,d||(g+=r[v+3]*k));c[m]=f,c[m+1]=h,c[m+2]=p,c[m+3]=d?r[m+3]:g}e.imageData=a}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return Ft(Ft({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}It(Pf,"type","Convolute"),It(Pf,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),It(Pf,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),nr.setClass(Pf);const $w="Gamma";class Lf extends ai{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,s=1/r[0],i=1/r[1],o=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const u=this.rgbValues;for(let l=0;l<256;l++)u.r[l]=255*Math.pow(l/255,s),u.g[l]=255*Math.pow(l/255,i),u.b[l]=255*Math.pow(l/255,o);for(let l=0;l<t.length;l+=4)t[l]=u.r[t[l]],t[l+1]=u.g[t[l+1]],t[l+2]=u.b[t[l+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:$w,gamma:this.gamma.concat()}}}It(Lf,"type",$w),It(Lf,"defaults",{gamma:[1,1,1]}),It(Lf,"uniformLocations",["uGamma"]),nr.setClass(Lf);const B7={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Rf extends ai{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],u=t[s+2];switch(this.mode){case"average":r=(i+o+u)/3;break;case"lightness":r=(Math.min(i,o,u)+Math.max(i,o,u))/2;break;case"luminosity":r=.21*i+.72*o+.07*u}t[s+2]=t[s+1]=t[s]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return B7[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}It(Rf,"type","Grayscale"),It(Rf,"defaults",{mode:"average"}),It(Rf,"uniformLocations",["uMode"]),nr.setClass(Rf);const z7=Ft(Ft({},Hw),{},{rotation:0});class P0 extends zu{calculateMatrix(){const e=this.rotation*Math.PI,t=Ca(e),r=Ta(e),s=1/3,i=Math.sqrt(s)*r,o=1-t;this.matrix=[t+o/3,s*o-i,s*o+i,0,0,s*o+i,t+s*o,s*o-i,0,0,s*o-i,s*o+i,t+s*o,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}It(P0,"type","HueRotation"),It(P0,"defaults",z7),nr.setClass(P0);class Df extends ai{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}It(Df,"type","Invert"),It(Df,"defaults",{alpha:!1,invert:!0}),It(Df,"uniformLocations",["uInvert","uAlpha"]),nr.setClass(Df);class If extends ai{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let s=0;s<t.length;s+=4){const i=(.5-Math.random())*r;t[s]+=i,t[s+1]+=i,t[s+2]+=i}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}It(If,"type","Noise"),It(If,"defaults",{noise:0}),It(If,"uniformLocations",["uNoise","uSeed"]),nr.setClass(If);class Ff extends ai{applyTo2d(e){let{imageData:{data:t,width:r,height:s}}=e;for(let i=0;i<s;i+=this.blocksize)for(let o=0;o<r;o+=this.blocksize){const u=4*i*r+4*o,l=t[u],a=t[u+1],c=t[u+2],d=t[u+3];for(let f=i;f<Math.min(i+this.blocksize,s);f++)for(let h=o;h<Math.min(o+this.blocksize,r);h++){const p=4*f*r+4*h;t[p]=l,t[p+1]=a,t[p+2]=c,t[p+3]=d}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}It(Ff,"type","Pixelate"),It(Ff,"defaults",{blocksize:4}),It(Ff,"uniformLocations",["uBlocksize"]),nr.setClass(Ff);class Bf extends ai{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,s=new an(this.color).getSource(),i=[s[0]-r,s[1]-r,s[2]-r],o=[s[0]+r,s[1]+r,s[2]+r];for(let u=0;u<t.length;u+=4){const l=t[u],a=t[u+1],c=t[u+2];l>i[0]&&a>i[1]&&c>i[2]&&l<o[0]&&a<o[1]&&c<o[2]&&(t[u+3]=0)}}sendUniformData(e,t){const r=new an(this.color).getSource(),s=this.distance,i=[0+r[0]/255-s,0+r[1]/255-s,0+r[2]/255-s,1],o=[r[0]/255+s,r[1]/255+s,r[2]/255+s,1];e.uniform4fv(t.uLow,i),e.uniform4fv(t.uHigh,o)}}It(Bf,"type","RemoveColor"),It(Bf,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),It(Bf,"uniformLocations",["uLow","uHigh"]),nr.setClass(Bf);class zf extends ai{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),s=new Array(r);for(let i=1;i<=r;i++)s[i-1]=e(i*t);return s}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((r,s)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(s,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(s,`];
              sum += 2.0 * uTaps[`).concat(s,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){Ap(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,s=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/s;const i=t.width,o=t.height,u=Math.round(i*r),l=Math.round(o*s);let a;a=this.resizeType==="sliceHack"?this.sliceByTwo(e,i,o,u,l):this.resizeType==="hermite"?this.hermiteFastResize(e,i,o,u,l):this.resizeType==="bilinear"?this.bilinearFiltering(e,i,o,u,l):this.resizeType==="lanczos"?this.lanczosResize(e,i,o,u,l):new ImageData(u,l),e.imageData=a}sliceByTwo(e,t,r,s,i){const o=e.imageData,u=.5;let l=!1,a=!1,c=t*u,d=r*u;const f=e.filterBackend.resources;let h=0,p=0;const g=t;let m=0;f.sliceByTwo||(f.sliceByTwo=Aa());const y=f.sliceByTwo;(y.width<1.5*t||y.height<r)&&(y.width=1.5*t,y.height=r);const b=y.getContext("2d");for(b.clearRect(0,0,1.5*t,r),b.putImageData(o,0,0),s=Math.floor(s),i=Math.floor(i);!l||!a;)t=c,r=d,s<Math.floor(c*u)?c=Math.floor(c*u):(c=s,l=!0),i<Math.floor(d*u)?d=Math.floor(d*u):(d=i,a=!0),b.drawImage(y,h,p,t,r,g,m,c,d),h=g,p=m,m+=d;return b.getImageData(h,p,s,i)}lanczosResize(e,t,r,s,i){const o=e.imageData.data,u=e.ctx.createImageData(s,i),l=u.data,a=this.lanczosCreate(this.lanczosLobes),c=this.rcpScaleX,d=this.rcpScaleY,f=2/this.rcpScaleX,h=2/this.rcpScaleY,p=Math.ceil(c*this.lanczosLobes/2),g=Math.ceil(d*this.lanczosLobes/2),m={},y={x:0,y:0},b={x:0,y:0};return function v(k){let j,I,U,P,z,q,$,F,T,N,C;for(y.x=(k+.5)*c,b.x=Math.floor(y.x),j=0;j<i;j++){for(y.y=(j+.5)*d,b.y=Math.floor(y.y),z=0,q=0,$=0,F=0,T=0,I=b.x-p;I<=b.x+p;I++)if(!(I<0||I>=t)){N=Math.floor(1e3*Math.abs(I-y.x)),m[N]||(m[N]={});for(let w=b.y-g;w<=b.y+g;w++)w<0||w>=r||(C=Math.floor(1e3*Math.abs(w-y.y)),m[N][C]||(m[N][C]=a(Math.sqrt(Math.pow(N*f,2)+Math.pow(C*h,2))/1e3)),U=m[N][C],U>0&&(P=4*(w*t+I),z+=U,q+=U*o[P],$+=U*o[P+1],F+=U*o[P+2],T+=U*o[P+3]))}P=4*(j*s+k),l[P]=q/z,l[P+1]=$/z,l[P+2]=F/z,l[P+3]=T/z}return++k<s?v(k):u}(0)}bilinearFiltering(e,t,r,s,i){let o,u,l,a,c,d,f,h,p,g,m,y,b,v=0;const k=this.rcpScaleX,j=this.rcpScaleY,I=4*(t-1),U=e.imageData.data,P=e.ctx.createImageData(s,i),z=P.data;for(f=0;f<i;f++)for(h=0;h<s;h++)for(c=Math.floor(k*h),d=Math.floor(j*f),p=k*h-c,g=j*f-d,b=4*(d*t+c),m=0;m<4;m++)o=U[b+m],u=U[b+4+m],l=U[b+I+m],a=U[b+I+4+m],y=o*(1-p)*(1-g)+u*p*(1-g)+l*g*(1-p)+a*p*g,z[v++]=y;return P}hermiteFastResize(e,t,r,s,i){const o=this.rcpScaleX,u=this.rcpScaleY,l=Math.ceil(o/2),a=Math.ceil(u/2),c=e.imageData.data,d=e.ctx.createImageData(s,i),f=d.data;for(let h=0;h<i;h++)for(let p=0;p<s;p++){const g=4*(p+h*s);let m=0,y=0,b=0,v=0,k=0,j=0,I=0;const U=(h+.5)*u;for(let P=Math.floor(h*u);P<(h+1)*u;P++){const z=Math.abs(U-(P+.5))/a,q=(p+.5)*o,$=z*z;for(let F=Math.floor(p*o);F<(p+1)*o;F++){let T=Math.abs(q-(F+.5))/l;const N=Math.sqrt($+T*T);N>1&&N<-1||(m=2*N*N*N-3*N*N+1,m>0&&(T=4*(F+P*t),I+=m*c[T+3],b+=m,c[T+3]<255&&(m=m*c[T+3]/250),v+=m*c[T],k+=m*c[T+1],j+=m*c[T+2],y+=m))}}f[g]=v/y,f[g+1]=k/y,f[g+2]=j/y,f[g+3]=I/b}return d}}It(zf,"type","Resize"),It(zf,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),It(zf,"uniformLocations",["uDelta","uTaps"]),nr.setClass(zf);class Uf extends ai{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],u=t[s+2],l=Math.max(i,o,u);t[s]+=l!==i?(l-i)*r:0,t[s+1]+=l!==o?(l-o)*r:0,t[s+2]+=l!==u?(l-u)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}It(Uf,"type","Saturation"),It(Uf,"defaults",{saturation:0}),It(Uf,"uniformLocations",["uSaturation"]),nr.setClass(Uf);class qf extends ai{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],u=t[s+2],l=Math.max(i,o,u),a=(i+o+u)/3,c=2*Math.abs(l-a)/255*r;t[s]+=l!==i?(l-i)*c:0,t[s+1]+=l!==o?(l-o)*c:0,t[s+2]+=l!==u?(l-u)*c:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}It(qf,"type","Vibrance"),It(qf,"defaults",{vibrance:0}),It(qf,"uniformLocations",["uVibrance"]),nr.setClass(qf);const L0=20;function U7(n,e,t,r,s,i){const o=[];switch(n){case"filet":{if(o.push(new ki({left:e,top:t,width:r,height:r,fill:s,selectable:!1,evented:!1})),s!=="transparent"){const u=r*.15;o.push(new us([e+u,t+u,e+r-u,t+r-u],{stroke:"#333",strokeWidth:Math.max(1,r*.08),selectable:!1,evented:!1})),o.push(new us([e+r-u,t+u,e+u,t+r-u],{stroke:"#333",strokeWidth:Math.max(1,r*.08),selectable:!1,evented:!1}))}break}case"mosaic":{if(o.push(new ki({left:e,top:t,width:r,height:r,fill:s,selectable:!1,evented:!1})),i){const u=r*.2;o.push(new us([e+u,t+u,e+r-u,t+r-u],{stroke:"#000",strokeWidth:Math.max(2,r*.1),selectable:!1,evented:!1})),o.push(new us([e+r-u,t+u,e+u,t+r-u],{stroke:"#000",strokeWidth:Math.max(2,r*.1),selectable:!1,evented:!1}))}break}case"c2c":{const u=e+r/2,l=t+r/2,a=`M ${u} ${t+r*.05} L ${e+r*.95} ${l} L ${u} ${t+r*.95} L ${e+r*.05} ${l} Z`;o.push(new da(a,{fill:s,stroke:"#666",strokeWidth:1,selectable:!1,evented:!1}));break}case"tunisian":{o.push(new ki({left:e,top:t,width:r,height:r,fill:s,selectable:!1,evented:!1})),s!=="transparent"&&o.push(new us([e+r/2,t+r*.1,e+r/2,t+r*.9],{stroke:"rgba(0,0,0,0.3)",strokeWidth:Math.max(1,r*.05),selectable:!1,evented:!1}));break}default:o.push(new ki({left:e,top:t,width:r,height:r,fill:s,selectable:!1,evented:!1}))}return o}function q7(){const n=Xe.useRef(null),e=Xe.useRef(null),t=Xe.useRef(null),r=De(_=>_.project),s=De(_=>_.zoom),i=De(_=>_.panOffset),o=De(_=>_.setPanOffset),u=De(_=>_.activeTool),l=De(_=>_.activeColorId),a=De(_=>_.setCell),c=De(_=>_.selection),d=De(_=>_.setSelection),[f,h]=Xe.useState(null),p=Xe.useRef(!1),g=Xe.useRef(null),m=Xe.useRef(new Set),y=Xe.useRef(null),b=Xe.useRef(null),v=Xe.useRef(null);Xe.useEffect(()=>{if(!n.current||!t.current)return;const _=new Ym(n.current,{selection:!1,renderOnAddRemove:!1,skipOffscreen:!0});e.current=_;const x=new ResizeObserver(()=>{if(t.current&&e.current){const{width:S,height:A}=t.current.getBoundingClientRect();e.current.setDimensions({width:S,height:A}),k()}});return x.observe(t.current),()=>{x.disconnect(),_.dispose(),e.current=null}},[]);const k=Xe.useCallback(()=>{var ot,mt;const _=e.current;if(!_||!(r!=null&&r.grid)||!r.settings)return;const{width:x,height:S}=r.settings,{cells:A}=r.grid,B=r.settings.gridLines;_.clear();const E=L0*s,V=i.x,X=i.y,Q=_.width||800,D=_.height||600,Z=Math.max(0,Math.floor(-V/E)),L=Math.min(x,Math.ceil((Q-V)/E)),O=Math.max(0,Math.floor(-X/E)),G=Math.min(S,Math.ceil((D-X)/E)),nt=r.chartType;for(let pt=O;pt<G;pt++)for(let st=Z;st<L;st++){const at=(ot=A[pt])==null?void 0:ot[st];if(at!=null&&at.colorId){const vt=(mt=r.palette.find(yt=>yt.id===at.colorId))==null?void 0:mt.color;if(vt){const yt=V+st*E,kt=X+pt*E,St=!!at.symbolId;U7(nt,yt,kt,E,vt,St).forEach(Lt=>_.add(Lt))}}}if(B.show){for(let pt=Z;pt<=L;pt++){const st=V+pt*E,at=B.highlight10&&pt%10===0,vt=B.highlight5&&pt%5===0&&!at,yt=new us([st,X+O*E,st,X+G*E],{stroke:at?B.highlight10Color:vt?B.highlight5Color:B.color,strokeWidth:at?2:vt?1.5:B.thickness,selectable:!1,evented:!1});_.add(yt)}for(let pt=O;pt<=G;pt++){const st=X+pt*E,at=B.highlight10&&pt%10===0,vt=B.highlight5&&pt%5===0&&!at,yt=new us([V+Z*E,st,V+L*E,st],{stroke:at?B.highlight10Color:vt?B.highlight5Color:B.color,strokeWidth:at?2:vt?1.5:B.thickness,selectable:!1,evented:!1});_.add(yt)}}if(nt==="tunisian")for(let pt=O;pt<G;pt++){const st=pt%2===1,at=V-25,vt=X+pt*E+E/2;if(at>-30){const yt=st?`M ${at+20} ${vt} L ${at+5} ${vt} L ${at+10} ${vt-4} M ${at+5} ${vt} L ${at+10} ${vt+4}`:`M ${at+5} ${vt} L ${at+20} ${vt} L ${at+15} ${vt-4} M ${at+20} ${vt} L ${at+15} ${vt+4}`,kt=new da(yt,{stroke:st?"#E11D48":"#2563EB",strokeWidth:2,fill:"transparent",selectable:!1,evented:!1});_.add(kt)}}const ct=r.progressTracker;if(ct&&ct.darkenMode!=="none"){const{currentRow:pt,darkenMode:st,brightness:at}=ct,vt=(100-at)/100;for(let kt=O;kt<G;kt++){let St=!1;switch(st){case"done":St=kt<pt;break;case"todo":St=kt>pt;break;case"except-current":St=kt!==pt;break}if(St){const Tt=new ki({left:V+Z*E,top:X+kt*E,width:(L-Z)*E,height:E,fill:`rgba(0, 0, 0, ${vt})`,selectable:!1,evented:!1});_.add(Tt)}}const yt=new ki({left:V,top:X+pt*E,width:x*E,height:E,fill:"transparent",stroke:"#22C55E",strokeWidth:3,selectable:!1,evented:!1});_.add(yt)}if(c){const pt=Math.min(c.startRow,c.endRow),st=Math.max(c.startRow,c.endRow),at=Math.min(c.startCol,c.endCol),vt=Math.max(c.startCol,c.endCol),yt=new ki({left:V+at*E,top:X+pt*E,width:(vt-at+1)*E,height:(st-pt+1)*E,fill:"rgba(59, 130, 246, 0.2)",stroke:"#3B82F6",strokeWidth:2,strokeDashArray:[5,5],selectable:!1,evented:!1});_.add(yt)}_.renderAll()},[r,s,i,c]);Xe.useEffect(()=>{k()},[k]);const j=Xe.useCallback(_=>{if(!t.current||!(r!=null&&r.settings))return null;const x=t.current.getBoundingClientRect(),S=_.clientX-x.left-i.x,A=_.clientY-x.top-i.y,B=L0*s,E=Math.floor(S/B),V=Math.floor(A/B);return E>=0&&E<r.settings.width&&V>=0&&V<r.settings.height?{row:V,col:E}:null},[s,i,r==null?void 0:r.settings]),I=Xe.useCallback(_=>{if(h(null),u==="pan"){p.current=!0,g.current={row:_.clientY,col:_.clientX};return}if(u==="select"){const A=j(_);if(!A)return;p.current=!0,y.current=A,d({startRow:A.row,startCol:A.col,endRow:A.row,endCol:A.col});return}if(u!=="draw"&&u!=="erase")return;const x=j(_);if(!x)return;p.current=!0,m.current.clear(),g.current=x;const S=u==="draw"?l:null;a(x.row,x.col,S),m.current.add(`${x.row},${x.col}`)},[u,l,j,a,d]),U=Xe.useCallback(_=>{if(!p.current)return;if(u==="pan"&&g.current){const B=_.clientX-g.current.col,E=_.clientY-g.current.row;o({x:i.x+B,y:i.y+E}),g.current={row:_.clientY,col:_.clientX};return}if(u==="select"&&y.current){const B=j(_);if(!B)return;d({startRow:y.current.row,startCol:y.current.col,endRow:B.row,endCol:B.col});return}if(u!=="draw"&&u!=="erase")return;const x=j(_);if(!x)return;const S=`${x.row},${x.col}`;if(m.current.has(S))return;const A=u==="draw"?l:null;a(x.row,x.col,A),m.current.add(S),g.current=x},[u,l,j,a,i,o,d]),P=Xe.useCallback(()=>{p.current=!1,g.current=null,m.current.clear(),y.current=null},[]),z=Xe.useCallback(_=>{_.preventDefault(),c&&h({x:_.clientX,y:_.clientY})},[c]),q=Xe.useCallback(_=>{if(_.altKey||_.ctrlKey){_.preventDefault();const x=_.deltaY>0?-.1:.1,S=Math.max(.1,Math.min(10,s+x));De.getState().setZoom(S)}},[s]),$=Xe.useCallback(_=>{var S;const x=j(_);if(!(!x||!(r!=null&&r.grid)))if(u==="eyedropper"){const A=(S=r.grid.cells[x.row])==null?void 0:S[x.col];A!=null&&A.colorId&&(De.getState().setActiveColor(A.colorId),De.getState().setActiveTool("draw"))}else u==="fill"&&De.getState().floodFill(x.row,x.col,l)},[u,l,j,r==null?void 0:r.grid]),F=Xe.useCallback(_=>{if(!t.current||!(r!=null&&r.settings))return null;const x=t.current.getBoundingClientRect(),S=_.clientX-x.left-i.x,A=_.clientY-x.top-i.y,B=L0*s,E=Math.floor(S/B),V=Math.floor(A/B);return E>=0&&E<r.settings.width&&V>=0&&V<r.settings.height?{row:V,col:E}:null},[s,i,r==null?void 0:r.settings]),T=Xe.useCallback(_=>{var B;if(h(null),_.touches.length===2){const E=_.touches[0],V=_.touches[1],X=Math.hypot(V.clientX-E.clientX,V.clientY-E.clientY);b.current=X,v.current={x:(E.clientX+V.clientX)/2,y:(E.clientY+V.clientY)/2};return}if(_.touches.length!==1)return;const x=_.touches[0];if(u==="pan"){p.current=!0,v.current={x:x.clientX,y:x.clientY};return}if(u==="select"){const E=F(x);if(!E)return;p.current=!0,y.current=E,d({startRow:E.row,startCol:E.col,endRow:E.row,endCol:E.col});return}if(u==="eyedropper"||u==="fill"){const E=F(x);if(!E||!(r!=null&&r.grid))return;if(u==="eyedropper"){const V=(B=r.grid.cells[E.row])==null?void 0:B[E.col];V!=null&&V.colorId&&(De.getState().setActiveColor(V.colorId),De.getState().setActiveTool("draw"))}else De.getState().floodFill(E.row,E.col,l);return}if(u!=="draw"&&u!=="erase")return;const S=F(x);if(!S)return;p.current=!0,m.current.clear(),g.current=S;const A=u==="draw"?l:null;a(S.row,S.col,A),m.current.add(`${S.row},${S.col}`)},[u,l,F,a,d,r==null?void 0:r.grid]),N=Xe.useCallback(_=>{if(_.touches.length===2){_.preventDefault();const E=_.touches[0],V=_.touches[1],X=Math.hypot(V.clientX-E.clientX,V.clientY-E.clientY);if(b.current!==null){const Q=X/b.current,D=Math.max(.1,Math.min(10,s*Q));De.getState().setZoom(D)}b.current=X;return}if(!p.current||_.touches.length!==1)return;const x=_.touches[0];if(u==="pan"&&v.current){const E=x.clientX-v.current.x,V=x.clientY-v.current.y;o({x:i.x+E,y:i.y+V}),v.current={x:x.clientX,y:x.clientY};return}if(u==="select"&&y.current){const E=F(x);if(!E)return;d({startRow:y.current.row,startCol:y.current.col,endRow:E.row,endCol:E.col});return}if(u!=="draw"&&u!=="erase")return;const S=F(x);if(!S)return;const A=`${S.row},${S.col}`;if(m.current.has(A))return;const B=u==="draw"?l:null;a(S.row,S.col,B),m.current.add(A),g.current=S},[u,l,F,a,i,o,d,s]),C=Xe.useCallback(()=>{p.current=!1,g.current=null,m.current.clear(),y.current=null,b.current=null,v.current=null},[]),w=()=>{switch(u){case"draw":return"crosshair";case"erase":return"crosshair";case"fill":return"crosshair";case"select":return"crosshair";case"pan":return"grab";case"eyedropper":return"crosshair";default:return"default"}};return tt.jsxs("div",{ref:t,className:"w-full h-full overflow-hidden bg-gray-100 dark:bg-gray-900 relative touch-none",style:{cursor:w()},onMouseDown:I,onMouseMove:U,onMouseUp:P,onMouseLeave:P,onWheel:q,onClick:$,onContextMenu:z,onTouchStart:T,onTouchMove:N,onTouchEnd:C,onTouchCancel:C,children:[tt.jsx("canvas",{ref:n}),f&&c&&tt.jsx(H7,{x:f.x,y:f.y,onClose:()=>h(null)})]})}function H7({x:n,y:e,onClose:t}){const r=De(v=>v.copySelection),s=De(v=>v.pasteSelection),i=De(v=>v.fillSelection),o=De(v=>v.mirrorSelectionH),u=De(v=>v.mirrorSelectionV),l=De(v=>v.clearSelection),a=De(v=>v.activeColorId),c=De(v=>v.clipboard),d=Xe.useRef(null);Xe.useEffect(()=>{const v=k=>{d.current&&!d.current.contains(k.target)&&t()};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[t]);const f=()=>{r(),t()},h=()=>{s(),t()},p=()=>{i(a),t()},g=()=>{i(null),t()},m=()=>{o(),t()},y=()=>{u(),t()},b=()=>{l(),t()};return tt.jsxs("div",{ref:d,className:"fixed bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 py-1 z-50 min-w-40",style:{left:n,top:e},children:[tt.jsxs("button",{onClick:f,className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[tt.jsx("span",{className:"w-4",children:""})," Copy",tt.jsx("span",{className:"ml-auto text-xs text-gray-400",children:"Ctrl+C"})]}),tt.jsxs("button",{onClick:h,disabled:!c,className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[tt.jsx("span",{className:"w-4",children:""})," Paste",tt.jsx("span",{className:"ml-auto text-xs text-gray-400",children:"Ctrl+V"})]}),tt.jsx("div",{className:"h-px bg-gray-200 dark:bg-gray-700 my-1"}),tt.jsxs("button",{onClick:p,className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[tt.jsx("span",{className:"w-4",children:""})," Fill with Color"]}),tt.jsxs("button",{onClick:g,className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[tt.jsx("span",{className:"w-4",children:""})," Clear",tt.jsx("span",{className:"ml-auto text-xs text-gray-400",children:"Del"})]}),tt.jsx("div",{className:"h-px bg-gray-200 dark:bg-gray-700 my-1"}),tt.jsxs("button",{onClick:m,className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[tt.jsx("span",{className:"w-4",children:""})," Mirror Horizontal"]}),tt.jsxs("button",{onClick:y,className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[tt.jsx("span",{className:"w-4",children:""})," Mirror Vertical"]}),tt.jsx("div",{className:"h-px bg-gray-200 dark:bg-gray-700 my-1"}),tt.jsxs("button",{onClick:b,className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[tt.jsx("span",{className:"w-4",children:""})," Deselect",tt.jsx("span",{className:"ml-auto text-xs text-gray-400",children:"Esc"})]})]})}function $7(){const n=De(q=>q.activeTool),e=De(q=>q.setActiveTool),t=De(q=>q.zoom),r=De(q=>q.setZoom),s=De(q=>q.undo),i=De(q=>q.redo),o=De(q=>q.undoStack),u=De(q=>q.redoStack),l=De(q=>q.project),a=De(q=>q.selection),c=De(q=>q.insertRow),d=De(q=>q.deleteRow),f=De(q=>q.insertColumn),h=De(q=>q.deleteColumn),p=De(q=>q.resizeGrid),g=yn(q=>q.openDialog),[m,y]=Xe.useState(!1),b=[{id:"draw",label:"Draw",icon:"",shortcut:"D"},{id:"erase",label:"Erase",icon:"",shortcut:"E"},{id:"fill",label:"Fill",icon:"",shortcut:"F"},{id:"select",label:"Select",icon:"",shortcut:"S"},{id:"eyedropper",label:"Eyedropper",icon:"",shortcut:"I"},{id:"pan",label:"Pan",icon:"",shortcut:"Space"}],v=()=>{if(!a)return null;const q=Math.min(a.startRow,a.endRow),$=Math.max(a.startRow,a.endRow),F=Math.min(a.startCol,a.endCol),T=Math.max(a.startCol,a.endCol);return{minRow:q,maxRow:$,minCol:F,maxCol:T}},k=()=>{const q=v();q&&c(q.minRow)},j=()=>{const q=v();q&&c(q.maxRow+1)},I=()=>{const q=v();if(q)for(let $=q.maxRow;$>=q.minRow;$--)d($)},U=()=>{const q=v();q&&f(q.minCol)},P=()=>{const q=v();q&&f(q.maxCol+1)},z=()=>{const q=v();if(q)for(let $=q.maxCol;$>=q.minCol;$--)h($)};return tt.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 overflow-x-auto scrollbar-thin",children:[tt.jsx("div",{className:"flex items-center gap-1 pr-2 border-r border-gray-200 dark:border-gray-600 flex-shrink-0",children:b.map(q=>tt.jsx("button",{onClick:()=>e(q.id),title:`${q.label} (${q.shortcut})`,className:`w-9 h-9 flex items-center justify-center rounded-lg transition-colors ${n===q.id?"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:tt.jsx("span",{className:"text-lg",children:q.icon})},q.id))}),tt.jsxs("div",{className:"flex items-center gap-1 pr-2 border-r border-gray-200 dark:border-gray-600 flex-shrink-0",children:[tt.jsx("button",{onClick:s,disabled:o.length===0,title:"Undo (Ctrl+Z)",className:"w-9 h-9 flex items-center justify-center rounded-lg text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-40 disabled:cursor-not-allowed",children:tt.jsx("span",{className:"text-lg",children:""})}),tt.jsx("button",{onClick:i,disabled:u.length===0,title:"Redo (Ctrl+Y)",className:"w-9 h-9 flex items-center justify-center rounded-lg text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-40 disabled:cursor-not-allowed",children:tt.jsx("span",{className:"text-lg",children:""})})]}),tt.jsxs("div",{className:"flex items-center gap-1 pr-2 border-r border-gray-200 dark:border-gray-600 flex-shrink-0",children:[tt.jsx("button",{onClick:()=>r(t-.25),disabled:t<=.25,title:"Zoom Out (Ctrl+-)",className:"w-9 h-9 flex items-center justify-center rounded-lg text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-40 disabled:cursor-not-allowed",children:tt.jsx("span",{className:"text-lg",children:""})}),tt.jsxs("span",{className:"w-14 text-center text-sm text-gray-600 dark:text-gray-300",children:[Math.round(t*100),"%"]}),tt.jsx("button",{onClick:()=>r(t+.25),disabled:t>=10,title:"Zoom In (Ctrl++)",className:"w-9 h-9 flex items-center justify-center rounded-lg text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-40 disabled:cursor-not-allowed",children:tt.jsx("span",{className:"text-lg",children:""})}),tt.jsx("button",{onClick:()=>r(1),title:"Reset Zoom (Ctrl+0)",className:"px-2 h-9 text-xs text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:"100%"})]}),a&&tt.jsxs("div",{className:"flex items-center gap-1 pr-2 border-r border-gray-200 dark:border-gray-600 flex-shrink-0",children:[tt.jsxs("div",{className:"relative group",children:[tt.jsxs("button",{title:"Row operations",className:"px-2 h-9 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg flex items-center gap-1",children:[tt.jsx("span",{children:"Rows"}),tt.jsx("span",{className:"text-xs",children:""})]}),tt.jsxs("div",{className:"absolute left-0 top-full mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 py-1 min-w-40 z-50 hidden group-hover:block",children:[tt.jsx("button",{onClick:k,className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Insert row above"}),tt.jsx("button",{onClick:j,className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Insert row below"}),tt.jsx("div",{className:"h-px bg-gray-200 dark:bg-gray-700 my-1"}),tt.jsx("button",{onClick:I,className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Delete selected rows"})]})]}),tt.jsxs("div",{className:"relative group",children:[tt.jsxs("button",{title:"Column operations",className:"px-2 h-9 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg flex items-center gap-1",children:[tt.jsx("span",{children:"Columns"}),tt.jsx("span",{className:"text-xs",children:""})]}),tt.jsxs("div",{className:"absolute left-0 top-full mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 py-1 min-w-40 z-50 hidden group-hover:block",children:[tt.jsx("button",{onClick:U,className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Insert column left"}),tt.jsx("button",{onClick:P,className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Insert column right"}),tt.jsx("div",{className:"h-px bg-gray-200 dark:bg-gray-700 my-1"}),tt.jsx("button",{onClick:z,className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Delete selected columns"})]})]})]}),tt.jsx("div",{className:"flex items-center gap-1 pr-2 border-r border-gray-200 dark:border-gray-600 flex-shrink-0",children:tt.jsx("button",{onClick:()=>y(!0),title:"Resize grid",className:"px-3 h-9 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg flex items-center gap-1",children:tt.jsxs("span",{children:["Grid: ",l==null?void 0:l.settings.width," x ",l==null?void 0:l.settings.height]})})}),tt.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[tt.jsxs("button",{onClick:()=>g("writtenInstructions"),title:"Generate written instructions",className:"px-3 h-9 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg flex items-center gap-2",children:[tt.jsx("span",{children:""}),tt.jsx("span",{children:"Instructions"})]}),tt.jsxs("button",{onClick:()=>g("export"),title:"Export chart",className:"px-3 h-9 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg flex items-center gap-2",children:[tt.jsx("span",{children:""}),tt.jsx("span",{children:"Export"})]})]}),m&&l&&tt.jsx(V7,{currentWidth:l.settings.width,currentHeight:l.settings.height,onResize:(q,$)=>{p(q,$),y(!1)},onClose:()=>y(!1)})]})}function V7({currentWidth:n,currentHeight:e,onResize:t,onClose:r}){const[s,i]=Xe.useState(n),[o,u]=Xe.useState(e),l=a=>{a.preventDefault(),s>=1&&s<=1e3&&o>=1&&o<=1e3&&t(s,o)};return tt.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:tt.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-6 w-80",children:[tt.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Resize Grid"}),tt.jsxs("form",{onSubmit:l,className:"space-y-4",children:[tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Width (columns)"}),tt.jsx("input",{type:"number",value:s,onChange:a=>i(Number(a.target.value)),min:1,max:1e3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Height (rows)"}),tt.jsx("input",{type:"number",value:o,onChange:a=>u(Number(a.target.value)),min:1,max:1e3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),tt.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Maximum size: 1000 x 1000. Shrinking the grid will crop existing content."}),tt.jsxs("div",{className:"flex gap-3 pt-2",children:[tt.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),tt.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 text-white bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors",children:"Resize"})]})]})]})})}const W7=["#FF0000","#FF4444","#FF6666","#FF8888","#FFAAAA","#FFCCCC","#FF6600","#FF8833","#FFAA66","#FFCC99","#FFDDBB","#FFEEDD","#FFFF00","#FFFF44","#FFFF88","#FFFFAA","#FFFFCC","#FFFFEE","#00FF00","#44FF44","#66FF66","#88FF88","#AAFFAA","#CCFFCC","#00FFFF","#44FFFF","#66FFFF","#88FFFF","#AAFFFF","#CCFFFF","#0000FF","#4444FF","#6666FF","#8888FF","#AAAAFF","#CCCCFF","#8800FF","#9944FF","#AA66FF","#BB88FF","#CCAAFF","#DDCCFF","#FF00FF","#FF44FF","#FF66FF","#FF88FF","#FFAAFF","#FFCCFF","#8B4513","#A0522D","#CD853F","#DEB887","#F5DEB3","#FAEBD7","#000000","#333333","#666666","#999999","#CCCCCC","#FFFFFF"];function X7({color:n,onChange:e,onClose:t}){const[r,s]=Xe.useState(n),[i,o]=Xe.useState(n),u=Xe.useRef(null);Xe.useEffect(()=>{const d=f=>{u.current&&!u.current.contains(f.target)&&t()};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[t]);const l=d=>{s(d),o(d),e(d)},a=d=>{o(d),/^#[0-9A-Fa-f]{6}$/.test(d)&&(s(d),e(d))},c=d=>{const f=d.target.value;s(f),o(f),e(f)};return tt.jsxs("div",{ref:u,className:"absolute top-full left-0 mt-2 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-4 z-50 w-72",children:[tt.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[tt.jsx("div",{className:"w-12 h-12 rounded-lg border-2 border-gray-200 dark:border-gray-600",style:{backgroundColor:r}}),tt.jsxs("div",{className:"flex-1",children:[tt.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Hex Color"}),tt.jsx("input",{type:"text",value:i,onChange:d=>a(d.target.value.toUpperCase()),className:"w-full px-2 py-1 text-sm bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded font-mono",placeholder:"#000000"})]}),tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Pick"}),tt.jsx("input",{type:"color",value:r,onChange:c,className:"w-8 h-8 rounded cursor-pointer"})]})]}),tt.jsx("div",{className:"grid grid-cols-6 gap-1",children:W7.map(d=>tt.jsx("button",{onClick:()=>l(d),className:`w-8 h-8 rounded border-2 transition-transform hover:scale-110 ${r.toUpperCase()===d?"border-blue-500 ring-2 ring-blue-300":"border-gray-200 dark:border-gray-600"}`,style:{backgroundColor:d},title:d},d))}),tt.jsx("div",{className:"mt-4 flex justify-end",children:tt.jsx("button",{onClick:t,className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded hover:bg-gray-200 dark:hover:bg-gray-600",children:"Done"})})]})}function Y7(){const n=De(p=>p.project),e=De(p=>p.activeColorId),t=De(p=>p.addColor),r=De(p=>p.updateColor),s=De(p=>p.removeColor),i=De(p=>p.setActiveColor),[o,u]=Xe.useState(null),[l,a]=Xe.useState(null);if(!n)return null;const c=()=>{const p=`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`,g=t(p);i(g.id),u(g.id)},d=(p,g)=>{r(p,{color:g})},f=(p,g)=>{r(p,{name:g})},h=(p,g)=>{g.stopPropagation(),!(n.palette.length<=1)&&s(p)};return tt.jsxs("div",{className:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 p-4 flex flex-col h-full",children:[tt.jsxs("div",{className:"flex items-center justify-between mb-4",children:[tt.jsx("h3",{className:"font-medium text-gray-800 dark:text-white",children:"Colors"}),tt.jsx("button",{onClick:c,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Add color",children:tt.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),tt.jsx("div",{className:"flex-1 overflow-auto space-y-1",children:n.palette.map(p=>tt.jsx(G7,{entry:p,isActive:e===p.id,isEditing:o===p.id,isEditingName:l===p.id,canDelete:n.palette.length>1,onClick:()=>i(p.id),onDoubleClick:()=>u(p.id),onNameDoubleClick:()=>a(p.id),onColorChange:g=>d(p.id,g),onNameChange:g=>f(p.id,g),onNameBlur:()=>a(null),onColorPickerClose:()=>u(null),onDelete:g=>h(p.id,g)},p.id))}),tt.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:tt.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n.palette.length," color",n.palette.length!==1?"s":""]})})]})}function G7({entry:n,isActive:e,isEditing:t,isEditingName:r,canDelete:s,onClick:i,onDoubleClick:o,onNameDoubleClick:u,onColorChange:l,onNameChange:a,onNameBlur:c,onColorPickerClose:d,onDelete:f}){return tt.jsxs("div",{className:"relative",children:[tt.jsxs("button",{onClick:i,className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors group ${e?"bg-blue-50 dark:bg-blue-900/30 ring-2 ring-blue-500":"hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[tt.jsx("div",{className:"w-8 h-8 rounded border border-gray-200 dark:border-gray-600 shrink-0 cursor-pointer",style:{backgroundColor:n.color},onDoubleClick:h=>{h.stopPropagation(),o()},title:"Double-click to edit color"}),tt.jsxs("div",{className:"flex-1 text-left min-w-0",children:[r?tt.jsx("input",{type:"text",value:n.name,onChange:h=>a(h.target.value),onBlur:c,onKeyDown:h=>{h.key==="Enter"&&c()},className:"w-full px-1 py-0.5 text-sm font-medium bg-white dark:bg-gray-700 border border-blue-500 rounded focus:outline-none",autoFocus:!0,onClick:h=>h.stopPropagation()}):tt.jsx("div",{className:"text-sm font-medium text-gray-800 dark:text-white truncate cursor-text",onDoubleClick:h=>{h.stopPropagation(),u()},title:"Double-click to edit name",children:n.name}),tt.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:n.color.toUpperCase()})]}),s&&tt.jsx("button",{onClick:f,className:"p-1 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete color",children:tt.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t&&tt.jsx(X7,{color:n.color,onChange:l,onClose:d})]})}function K7(n){const e={version:"1.0.0",app:"stitchfizzle",exportedAt:new Date().toISOString(),project:n};return JSON.stringify(e,null,2)}function Z7(n){const e=K7(n),t=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download=`${n.name.replace(/[^a-zA-Z0-9-_]/g,"_")}.stitchfizzle.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)}function J7(n){try{const e=JSON.parse(n);if(e.app==="stitchfizzle"&&e.project){const t=e.project;return t.createdAt=new Date(t.createdAt),t.updatedAt=new Date(t.updatedAt),t}if(e.id&&e.name&&e.chartType){const t=e;return t.createdAt=new Date(t.createdAt),t.updatedAt=new Date(t.updatedAt),t}return null}catch{return null}}const Q7={small:600,medium:1200,large:2e3};function tS(n,e){return new Promise((t,r)=>{var z;if(!n.grid){r(new Error("Project has no grid data"));return}const{grid:s,palette:i,settings:o}=n,{includeGridLines:u,includeLegend:l,backgroundColor:a,selection:c}=e,d=c?Math.min(c.startRow,c.endRow):0,f=c?Math.max(c.startRow,c.endRow):o.height-1,h=c?Math.min(c.startCol,c.endCol):0,g=(c?Math.max(c.startCol,c.endCol):o.width-1)-h+1,m=f-d+1,y=e.size==="custom"?e.customWidth||1200:Q7[e.size],b=l?150:0,v=Math.floor((y-b)/g),k=g*v+b,j=m*v,I=document.createElement("canvas");I.width=k,I.height=j;const U=I.getContext("2d");if(!U){r(new Error("Could not get canvas context"));return}U.fillStyle=a,U.fillRect(0,0,k,j);const P=new Map(i.map(q=>[q.id,q]));for(let q=0;q<m;q++)for(let $=0;$<g;$++){const F=(z=s.cells[d+q])==null?void 0:z[h+$];if(F!=null&&F.colorId){const T=P.get(F.colorId);T&&(U.fillStyle=T.color,U.fillRect($*v,q*v,v,v))}}if(u){U.strokeStyle=o.gridLines.color,U.lineWidth=1;for(let q=0;q<=g;q++)U.beginPath(),U.moveTo(q*v,0),U.lineTo(q*v,m*v),U.stroke();for(let q=0;q<=m;q++)U.beginPath(),U.moveTo(0,q*v),U.lineTo(g*v,q*v),U.stroke()}if(l&&i.length>0){const q=g*v+10,$=20,F=24;U.font="12px sans-serif",U.textBaseline="middle",i.forEach((T,N)=>{const C=10+N*F;U.fillStyle=T.color,U.fillRect(q,C,$,$),U.strokeStyle="#000",U.lineWidth=1,U.strokeRect(q,C,$,$),U.fillStyle="#000",U.fillText(T.name,q+$+8,C+$/2)})}I.toBlob(q=>{q?t(q):r(new Error("Failed to create PNG blob"))},"image/png",1)})}async function eS(n,e){const t=await tS(n,e),r=URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download=`${n.name.replace(/[^a-zA-Z0-9-_]/g,"_")}.png`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)}function rS(n,e){var j;if(!n.grid)throw new Error("Project has no grid data");const{grid:t,palette:r,settings:s}=n,{cellSize:i,includeGridLines:o,includeLegend:u,backgroundColor:l,selection:a}=e,c=a?Math.min(a.startRow,a.endRow):0,d=a?Math.max(a.startRow,a.endRow):s.height-1,f=a?Math.min(a.startCol,a.endCol):0,p=(a?Math.max(a.startCol,a.endCol):s.width-1)-f+1,g=d-c+1,m=u?150:0,y=p*i+m,b=g*i,v=new Map(r.map(I=>[I.id,I]));let k=`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="${y}" height="${b}" viewBox="0 0 ${y} ${b}">
  <defs>
    <style>
      .cell { stroke: none; }
      .grid-line { stroke: ${s.gridLines.color}; stroke-width: 1; fill: none; }
      .legend-text { font-family: sans-serif; font-size: 12px; }
    </style>
  </defs>

  <!-- Background -->
  <rect width="${y}" height="${b}" fill="${l}" />

  <!-- Cells -->
  <g id="cells">
`;for(let I=0;I<g;I++)for(let U=0;U<p;U++){const P=(j=t.cells[c+I])==null?void 0:j[f+U];if(P!=null&&P.colorId){const z=v.get(P.colorId);z&&(k+=`    <rect class="cell" x="${U*i}" y="${I*i}" width="${i}" height="${i}" fill="${z.color}" />
`)}}if(k+=`  </g>
`,o){k+=`
  <!-- Grid Lines -->
  <g id="grid-lines">
`;for(let I=0;I<=p;I++)k+=`    <line class="grid-line" x1="${I*i}" y1="0" x2="${I*i}" y2="${g*i}" />
`;for(let I=0;I<=g;I++)k+=`    <line class="grid-line" x1="0" y1="${I*i}" x2="${p*i}" y2="${I*i}" />
`;k+=`  </g>
`}if(u&&r.length>0){const I=p*i+10,U=20,P=24;k+=`
  <!-- Legend -->
  <g id="legend">
`,r.forEach((z,q)=>{const $=10+q*P;k+=`    <rect x="${I}" y="${$}" width="${U}" height="${U}" fill="${z.color}" stroke="#000" stroke-width="1" />
`,k+=`    <text class="legend-text" x="${I+U+8}" y="${$+U/2}" dominant-baseline="middle">${nS(z.name)}</text>
`}),k+=`  </g>
`}return k+="</svg>",k}function nS(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function iS(n,e){const t=rS(n,e),r=new Blob([t],{type:"image/svg+xml"}),s=URL.createObjectURL(r),i=document.createElement("a");i.href=s,i.download=`${n.name.replace(/[^a-zA-Z0-9-_]/g,"_")}.svg`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s)}const sS="modulepreload",oS=function(n){return"/"+n},rb={},Km=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=oS(l),l in rb)return;rb[l]=!0;const a=l.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":sS,a||(d.as="script"),d.crossOrigin="",d.href=l,u&&d.setAttribute("nonce",u),document.head.appendChild(d),a)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return s.then(o=>{for(const u of o||[])u.status==="rejected"&&i(u.reason);return e().catch(i)})};function ln(n){"@babel/helpers - typeof";return ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ln(n)}var qi=Uint8Array,As=Uint16Array,C1=Int32Array,Ep=new qi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),jp=new qi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Zm=new qi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vw=function(n,e){for(var t=new As(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var s=new C1(t[30]),r=1;r<30;++r)for(var i=t[r];i<t[r+1];++i)s[i]=i-t[r]<<5|r;return{b:t,r:s}},Ww=Vw(Ep,2),Xw=Ww.b,Jm=Ww.r;Xw[28]=258,Jm[258]=28;var Yw=Vw(jp,0),aS=Yw.b,nb=Yw.r,Qm=new As(32768);for(var Sn=0;Sn<32768;++Sn){var tl=(Sn&43690)>>1|(Sn&21845)<<1;tl=(tl&52428)>>2|(tl&13107)<<2,tl=(tl&61680)>>4|(tl&3855)<<4,Qm[Sn]=((tl&65280)>>8|(tl&255)<<8)>>1}var Ho=function(n,e,t){for(var r=n.length,s=0,i=new As(e);s<r;++s)n[s]&&++i[n[s]-1];var o=new As(e);for(s=1;s<e;++s)o[s]=o[s-1]+i[s-1]<<1;var u;if(t){u=new As(1<<e);var l=15-e;for(s=0;s<r;++s)if(n[s])for(var a=s<<4|n[s],c=e-n[s],d=o[n[s]-1]++<<c,f=d|(1<<c)-1;d<=f;++d)u[Qm[d]>>l]=a}else for(u=new As(r),s=0;s<r;++s)n[s]&&(u[s]=Qm[o[n[s]-1]++]>>15-n[s]);return u},xl=new qi(288);for(var Sn=0;Sn<144;++Sn)xl[Sn]=8;for(var Sn=144;Sn<256;++Sn)xl[Sn]=9;for(var Sn=256;Sn<280;++Sn)xl[Sn]=7;for(var Sn=280;Sn<288;++Sn)xl[Sn]=8;var Eh=new qi(32);for(var Sn=0;Sn<32;++Sn)Eh[Sn]=5;var lS=Ho(xl,9,0),uS=Ho(xl,9,1),cS=Ho(Eh,5,0),hS=Ho(Eh,5,1),R0=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ho=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},D0=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},T1=function(n){return(n+7)/8|0},Gw=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new qi(n.subarray(e,t))},fS=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],go=function(n,e,t){var r=new Error(e||fS[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,go),!t)throw r;return r},dS=function(n,e,t,r){var s=n.length,i=0;if(!s||e.f&&!e.l)return t||new qi(0);var o=!t,u=o||e.i!=2,l=e.i;o&&(t=new qi(s*3));var a=function(nt){var ct=t.length;if(nt>ct){var ot=new qi(Math.max(ct*2,nt));ot.set(t),t=ot}},c=e.f||0,d=e.p||0,f=e.b||0,h=e.l,p=e.d,g=e.m,m=e.n,y=s*8;do{if(!h){c=ho(n,d,1);var b=ho(n,d+1,3);if(d+=3,b)if(b==1)h=uS,p=hS,g=9,m=5;else if(b==2){var I=ho(n,d,31)+257,U=ho(n,d+10,15)+4,P=I+ho(n,d+5,31)+1;d+=14;for(var z=new qi(P),q=new qi(19),$=0;$<U;++$)q[Zm[$]]=ho(n,d+$*3,7);d+=U*3;for(var F=R0(q),T=(1<<F)-1,N=Ho(q,F,1),$=0;$<P;){var C=N[ho(n,d,T)];d+=C&15;var v=C>>4;if(v<16)z[$++]=v;else{var w=0,_=0;for(v==16?(_=3+ho(n,d,3),d+=2,w=z[$-1]):v==17?(_=3+ho(n,d,7),d+=3):v==18&&(_=11+ho(n,d,127),d+=7);_--;)z[$++]=w}}var x=z.subarray(0,I),S=z.subarray(I);g=R0(x),m=R0(S),h=Ho(x,g,1),p=Ho(S,m,1)}else go(1);else{var v=T1(d)+4,k=n[v-4]|n[v-3]<<8,j=v+k;if(j>s){l&&go(0);break}u&&a(f+k),t.set(n.subarray(v,j),f),e.b=f+=k,e.p=d=j*8,e.f=c;continue}if(d>y){l&&go(0);break}}u&&a(f+131072);for(var A=(1<<g)-1,B=(1<<m)-1,E=d;;E=d){var w=h[D0(n,d)&A],V=w>>4;if(d+=w&15,d>y){l&&go(0);break}if(w||go(2),V<256)t[f++]=V;else if(V==256){E=d,h=null;break}else{var X=V-254;if(V>264){var $=V-257,Q=Ep[$];X=ho(n,d,(1<<Q)-1)+Xw[$],d+=Q}var D=p[D0(n,d)&B],Z=D>>4;D||go(3),d+=D&15;var S=aS[Z];if(Z>3){var Q=jp[Z];S+=D0(n,d)&(1<<Q)-1,d+=Q}if(d>y){l&&go(0);break}u&&a(f+131072);var L=f+X;if(f<S){var O=i-S,G=Math.min(S,L);for(O+f<0&&go(3);f<G;++f)t[f]=r[O+f]}for(;f<L;++f)t[f]=t[f-S]}}e.l=h,e.p=E,e.b=f,e.f=c,h&&(c=1,e.m=g,e.d=p,e.n=m)}while(!c);return f!=t.length&&o?Gw(t,0,f):t.subarray(0,f)},oa=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Fc=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},I0=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var s=t.length,i=t.slice();if(!s)return{t:Zw,l:0};if(s==1){var o=new qi(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(j,I){return j.f-I.f}),t.push({s:-1,f:25001});var u=t[0],l=t[1],a=0,c=1,d=2;for(t[0]={s:-1,f:u.f+l.f,l:u,r:l};c!=s-1;)u=t[t[a].f<t[d].f?a++:d++],l=t[a!=c&&t[a].f<t[d].f?a++:d++],t[c++]={s:-1,f:u.f+l.f,l:u,r:l};for(var f=i[0].s,r=1;r<s;++r)i[r].s>f&&(f=i[r].s);var h=new As(f+1),p=tg(t[c-1],h,0);if(p>e){var r=0,g=0,m=p-e,y=1<<m;for(i.sort(function(I,U){return h[U.s]-h[I.s]||I.f-U.f});r<s;++r){var b=i[r].s;if(h[b]>e)g+=y-(1<<p-h[b]),h[b]=e;else break}for(g>>=m;g>0;){var v=i[r].s;h[v]<e?g-=1<<e-h[v]++-1:++r}for(;r>=0&&g;--r){var k=i[r].s;h[k]==e&&(--h[k],++g)}p=e}return{t:new qi(h),l:p}},tg=function(n,e,t){return n.s==-1?Math.max(tg(n.l,e,t+1),tg(n.r,e,t+1)):e[n.s]=t},ib=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new As(++e),r=0,s=n[0],i=1,o=function(l){t[r++]=l},u=1;u<=e;++u)if(n[u]==s&&u!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=n[u]}return{c:t.subarray(0,r),n:e}},Bc=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Kw=function(n,e,t){var r=t.length,s=T1(e+2);n[s]=r&255,n[s+1]=r>>8,n[s+2]=n[s]^255,n[s+3]=n[s+1]^255;for(var i=0;i<r;++i)n[s+i+4]=t[i];return(s+4+r)*8},sb=function(n,e,t,r,s,i,o,u,l,a,c){oa(e,c++,t),++s[256];for(var d=I0(s,15),f=d.t,h=d.l,p=I0(i,15),g=p.t,m=p.l,y=ib(f),b=y.c,v=y.n,k=ib(g),j=k.c,I=k.n,U=new As(19),P=0;P<b.length;++P)++U[b[P]&31];for(var P=0;P<j.length;++P)++U[j[P]&31];for(var z=I0(U,7),q=z.t,$=z.l,F=19;F>4&&!q[Zm[F-1]];--F);var T=a+5<<3,N=Bc(s,xl)+Bc(i,Eh)+o,C=Bc(s,f)+Bc(i,g)+o+14+3*F+Bc(U,q)+2*U[16]+3*U[17]+7*U[18];if(l>=0&&T<=N&&T<=C)return Kw(e,c,n.subarray(l,l+a));var w,_,x,S;if(oa(e,c,1+(C<N)),c+=2,C<N){w=Ho(f,h,0),_=f,x=Ho(g,m,0),S=g;var A=Ho(q,$,0);oa(e,c,v-257),oa(e,c+5,I-1),oa(e,c+10,F-4),c+=14;for(var P=0;P<F;++P)oa(e,c+3*P,q[Zm[P]]);c+=3*F;for(var B=[b,j],E=0;E<2;++E)for(var V=B[E],P=0;P<V.length;++P){var X=V[P]&31;oa(e,c,A[X]),c+=q[X],X>15&&(oa(e,c,V[P]>>5&127),c+=V[P]>>12)}}else w=lS,_=xl,x=cS,S=Eh;for(var P=0;P<u;++P){var Q=r[P];if(Q>255){var X=Q>>18&31;Fc(e,c,w[X+257]),c+=_[X+257],X>7&&(oa(e,c,Q>>23&31),c+=Ep[X]);var D=Q&31;Fc(e,c,x[D]),c+=S[D],D>3&&(Fc(e,c,Q>>5&8191),c+=jp[D])}else Fc(e,c,w[Q]),c+=_[Q]}return Fc(e,c,w[256]),c+_[256]},pS=new C1([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Zw=new qi(0),mS=function(n,e,t,r,s,i){var o=i.z||n.length,u=new qi(r+o+5*(1+Math.ceil(o/7e3))+s),l=u.subarray(r,u.length-s),a=i.l,c=(i.r||0)&7;if(e){c&&(l[0]=i.r>>3);for(var d=pS[e-1],f=d>>13,h=d&8191,p=(1<<t)-1,g=i.p||new As(32768),m=i.h||new As(p+1),y=Math.ceil(t/3),b=2*y,v=function(mt){return(n[mt]^n[mt+1]<<y^n[mt+2]<<b)&p},k=new C1(25e3),j=new As(288),I=new As(32),U=0,P=0,z=i.i||0,q=0,$=i.w||0,F=0;z+2<o;++z){var T=v(z),N=z&32767,C=m[T];if(g[N]=C,m[T]=N,$<=z){var w=o-z;if((U>7e3||q>24576)&&(w>423||!a)){c=sb(n,l,0,k,j,I,P,q,F,z-F,c),q=U=P=0,F=z;for(var _=0;_<286;++_)j[_]=0;for(var _=0;_<30;++_)I[_]=0}var x=2,S=0,A=h,B=N-C&32767;if(w>2&&T==v(z-B))for(var E=Math.min(f,w)-1,V=Math.min(32767,z),X=Math.min(258,w);B<=V&&--A&&N!=C;){if(n[z+x]==n[z+x-B]){for(var Q=0;Q<X&&n[z+Q]==n[z+Q-B];++Q);if(Q>x){if(x=Q,S=B,Q>E)break;for(var D=Math.min(B,Q-2),Z=0,_=0;_<D;++_){var L=z-B+_&32767,O=g[L],G=L-O&32767;G>Z&&(Z=G,C=L)}}}N=C,C=g[N],B+=N-C&32767}if(S){k[q++]=268435456|Jm[x]<<18|nb[S];var nt=Jm[x]&31,ct=nb[S]&31;P+=Ep[nt]+jp[ct],++j[257+nt],++I[ct],$=z+x,++U}else k[q++]=n[z],++j[n[z]]}}for(z=Math.max(z,$);z<o;++z)k[q++]=n[z],++j[n[z]];c=sb(n,l,a,k,j,I,P,q,F,z-F,c),a||(i.r=c&7|l[c/8|0]<<3,c-=7,i.h=m,i.p=g,i.i=z,i.w=$)}else{for(var z=i.w||0;z<o+a;z+=65535){var ot=z+65535;ot>=o&&(l[c/8|0]=a,ot=o),c=Kw(l,c+1,n.subarray(z,ot))}i.i=o}return Gw(u,0,r+T1(c)+s)},Jw=function(){var n=1,e=0;return{p:function(t){for(var r=n,s=e,i=t.length|0,o=0;o!=i;){for(var u=Math.min(o+2655,i);o<u;++o)s+=r+=t[o];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}n=r,e=s},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},gS=function(n,e,t,r,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),o=new qi(i.length+n.length);o.set(i),o.set(n,i.length),n=o,s.w=i.length}return mS(n,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,s)},Qw=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},yS=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var s=Jw();s.p(e.dictionary),Qw(n,2,s.d())}},bS=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&go(6,"invalid zlib data"),(n[1]>>5&1)==1&&go(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function eg(n,e){e||(e={});var t=Jw();t.p(n);var r=gS(n,e,e.dictionary?6:2,4);return yS(r,e),Qw(r,r.length-4,t.d()),r}function vS(n,e){return dS(n.subarray(bS(n),-4),{i:2},e,e)}var wS=typeof TextDecoder<"u"&&new TextDecoder,xS=0;try{wS.decode(Zw,{stream:!0}),xS=1}catch{}var Tr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function F0(){Tr.console&&typeof Tr.console.log=="function"&&Tr.console.log.apply(Tr.console,arguments)}var gn={log:F0,warn:function(n){Tr.console&&(typeof Tr.console.warn=="function"?Tr.console.warn.apply(Tr.console,arguments):F0.call(null,arguments))},error:function(n){Tr.console&&(typeof Tr.console.error=="function"?Tr.console.error.apply(Tr.console,arguments):F0(n))}};function B0(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Bl(r.response,e,t)},r.onerror=function(){gn.error("could not download file")},r.send()}function ob(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Hf(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var ih,rg,Bl=Tr.saveAs||((typeof window>"u"?"undefined":ln(window))!=="object"||window!==Tr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Tr.URL||Tr.webkitURL,s=document.createElement("a");e=e||n.name||"download",s.download=e,s.rel="noopener",typeof n=="string"?(s.href=n,s.origin!==location.origin?ob(s.href)?B0(n,e,t):Hf(s,s.target="_blank"):Hf(s)):(s.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){Hf(s)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(ob(n))B0(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Hf(r)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:ln(i)!=="object"&&(gn.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return B0(n,e,t);var s=n.type==="application/octet-stream",i=/constructor/i.test(Tr.HTMLElement)||Tr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":ln(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var c=u.result;c=o?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},u.readAsDataURL(n)}else{var l=Tr.URL||Tr.webkitURL,a=l.createObjectURL(n);r?r.location=a:location.href=a,r=null,setTimeout(function(){l.revokeObjectURL(a)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function t3(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],r=0;r<t.length;r++){var s=t[r].re,i=t[r].process,o=s.exec(n);o&&(e=i(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),l=this.g.toString(16),a=this.b.toString(16);return u.length==1&&(u="0"+u),l.length==1&&(l="0"+l),a.length==1&&(a="0"+a),"#"+u+l+a}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function z0(n,e){var t=n[0],r=n[1],s=n[2],i=n[3];t=Ii(t,r,s,i,e[0],7,-680876936),i=Ii(i,t,r,s,e[1],12,-389564586),s=Ii(s,i,t,r,e[2],17,606105819),r=Ii(r,s,i,t,e[3],22,-1044525330),t=Ii(t,r,s,i,e[4],7,-176418897),i=Ii(i,t,r,s,e[5],12,1200080426),s=Ii(s,i,t,r,e[6],17,-1473231341),r=Ii(r,s,i,t,e[7],22,-45705983),t=Ii(t,r,s,i,e[8],7,1770035416),i=Ii(i,t,r,s,e[9],12,-1958414417),s=Ii(s,i,t,r,e[10],17,-42063),r=Ii(r,s,i,t,e[11],22,-1990404162),t=Ii(t,r,s,i,e[12],7,1804603682),i=Ii(i,t,r,s,e[13],12,-40341101),s=Ii(s,i,t,r,e[14],17,-1502002290),t=Fi(t,r=Ii(r,s,i,t,e[15],22,1236535329),s,i,e[1],5,-165796510),i=Fi(i,t,r,s,e[6],9,-1069501632),s=Fi(s,i,t,r,e[11],14,643717713),r=Fi(r,s,i,t,e[0],20,-373897302),t=Fi(t,r,s,i,e[5],5,-701558691),i=Fi(i,t,r,s,e[10],9,38016083),s=Fi(s,i,t,r,e[15],14,-660478335),r=Fi(r,s,i,t,e[4],20,-405537848),t=Fi(t,r,s,i,e[9],5,568446438),i=Fi(i,t,r,s,e[14],9,-1019803690),s=Fi(s,i,t,r,e[3],14,-187363961),r=Fi(r,s,i,t,e[8],20,1163531501),t=Fi(t,r,s,i,e[13],5,-1444681467),i=Fi(i,t,r,s,e[2],9,-51403784),s=Fi(s,i,t,r,e[7],14,1735328473),t=Bi(t,r=Fi(r,s,i,t,e[12],20,-1926607734),s,i,e[5],4,-378558),i=Bi(i,t,r,s,e[8],11,-2022574463),s=Bi(s,i,t,r,e[11],16,1839030562),r=Bi(r,s,i,t,e[14],23,-35309556),t=Bi(t,r,s,i,e[1],4,-1530992060),i=Bi(i,t,r,s,e[4],11,1272893353),s=Bi(s,i,t,r,e[7],16,-155497632),r=Bi(r,s,i,t,e[10],23,-1094730640),t=Bi(t,r,s,i,e[13],4,681279174),i=Bi(i,t,r,s,e[0],11,-358537222),s=Bi(s,i,t,r,e[3],16,-722521979),r=Bi(r,s,i,t,e[6],23,76029189),t=Bi(t,r,s,i,e[9],4,-640364487),i=Bi(i,t,r,s,e[12],11,-421815835),s=Bi(s,i,t,r,e[15],16,530742520),t=zi(t,r=Bi(r,s,i,t,e[2],23,-995338651),s,i,e[0],6,-198630844),i=zi(i,t,r,s,e[7],10,1126891415),s=zi(s,i,t,r,e[14],15,-1416354905),r=zi(r,s,i,t,e[5],21,-57434055),t=zi(t,r,s,i,e[12],6,1700485571),i=zi(i,t,r,s,e[3],10,-1894986606),s=zi(s,i,t,r,e[10],15,-1051523),r=zi(r,s,i,t,e[1],21,-2054922799),t=zi(t,r,s,i,e[8],6,1873313359),i=zi(i,t,r,s,e[15],10,-30611744),s=zi(s,i,t,r,e[6],15,-1560198380),r=zi(r,s,i,t,e[13],21,1309151649),t=zi(t,r,s,i,e[4],6,-145523070),i=zi(i,t,r,s,e[11],10,-1120210379),s=zi(s,i,t,r,e[2],15,718787259),r=zi(r,s,i,t,e[9],21,-343485551),n[0]=ll(t,n[0]),n[1]=ll(r,n[1]),n[2]=ll(s,n[2]),n[3]=ll(i,n[3])}function Mp(n,e,t,r,s,i){return e=ll(ll(e,n),ll(r,i)),ll(e<<s|e>>>32-s,t)}function Ii(n,e,t,r,s,i,o){return Mp(e&t|~e&r,n,e,s,i,o)}function Fi(n,e,t,r,s,i,o){return Mp(e&r|t&~r,n,e,s,i,o)}function Bi(n,e,t,r,s,i,o){return Mp(e^t^r,n,e,s,i,o)}function zi(n,e,t,r,s,i,o){return Mp(t^(e|~r),n,e,s,i,o)}function e3(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)z0(r,_S(n.substring(e-64,e)));n=n.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)s[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(z0(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*t,z0(r,s),r}function _S(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}ih=Tr.atob.bind(Tr),rg=Tr.btoa.bind(Tr);var ab="0123456789abcdef".split("");function SS(n){for(var e="",t=0;t<4;t++)e+=ab[n>>8*t+4&15]+ab[n>>8*t&15];return e}function kS(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function ng(n){return e3(n).map(kS).join("")}var CS=function(n){for(var e=0;e<n.length;e++)n[e]=SS(n[e]);return n.join("")}(e3("hello"))!="5d41402abc4b2a76b9719d911017c592";function ll(n,e){if(CS){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function ig(n,e){var t,r,s,i;if(n!==t){for(var o=(s=n,i=1+(256/n.length>>0),new Array(i+1).join(s)),u=[],l=0;l<256;l++)u[l]=l;var a=0;for(l=0;l<256;l++){var c=u[l];a=(a+c+o.charCodeAt(l))%256,u[l]=u[a],u[a]=c}t=n,r=u}else u=r;var d=e.length,f=0,h=0,p="";for(l=0;l<d;l++)h=(h+(c=u[f=(f+1)%256]))%256,u[f]=u[h],u[h]=c,o=u[(u[f]+u[h])%256],p+=String.fromCharCode(e.charCodeAt(l)^o);return p}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var lb={print:4,modify:8,copy:16,"annot-forms":32};function ku(n,e,t,r){this.v=1,this.r=2;var s=192;n.forEach(function(u){if(lb.perm!==void 0)throw new Error("Invalid permission: "+u);s+=lb[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=ng(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=ig(this.encryptionKey,this.padding)}function Cu(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var s=n.charCodeAt(r);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=n[r]}return e}function ub(n){if(ln(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,s){if(s=s||!1,typeof t!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var i=Math.random().toString(35);return e[t][i]=[r,!!s],i},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[t]){var o=e[t][i];try{o[0].apply(n,r)}catch(u){Tr.console&&gn.error("jsPDF PubSub Error",u.message,u)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Qd(n){if(!(this instanceof Qd))return new Qd(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function r3(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Ul(n,e,t,r,s){if(!(this instanceof Ul))return new Ul(n,e,t,r,s);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,r3.call(this,r,s)}function Uu(n,e,t,r,s){if(!(this instanceof Uu))return new Uu(n,e,t,r,s);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,r3.call(this,r,s)}function _r(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],i=arguments[3],o=[],u=1,l=16,a="S",c=null;ln(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,s=n.format||s,i=n.compress||n.compressPdf||i,(c=n.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),u=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),a=n.defaultPathOperation||"S"),o=n.filters||(i===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var d=n.putOnlyUsedFonts||!1,f={},h={internal:{},__private__:{}};h.__private__.PubSub=ub;var p="1.3",g=h.__private__.getPdfVersion=function(){return p};h.__private__.setPdfVersion=function(Y){p=Y};var m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return m};var y=h.__private__.getPageFormat=function(Y){return m[Y]};s=s||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},v=b.COMPAT;function k(){this.saveGraphicsState(),st(new Fe(ie,0,0,-ie,0,so()*ie).toString()+" cm"),this.setFontSize(this.getFontSize()/ie),a="n",v=b.ADVANCED}function j(){this.restoreGraphicsState(),a="S",v=b.COMPAT}var I=h.__private__.combineFontStyleAndFontWeight=function(Y,lt){if(Y=="bold"&&lt=="normal"||Y=="bold"&&lt==400||Y=="normal"&&lt=="italic"||Y=="bold"&&lt=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return lt&&(Y=lt==400||lt==="normal"?Y==="italic"?"italic":"normal":lt!=700&&lt!=="bold"||Y!=="normal"?(lt==700?"bold":lt)+""+Y:"bold"),Y};h.advancedAPI=function(Y){var lt=v===b.COMPAT;return lt&&k.call(this),typeof Y!="function"||(Y(this),lt&&j.call(this)),this},h.compatAPI=function(Y){var lt=v===b.ADVANCED;return lt&&j.call(this),typeof Y!="function"||(Y(this),lt&&k.call(this)),this},h.isAdvancedAPI=function(){return v===b.ADVANCED};var U,P=function(Y){if(v!==b.ADVANCED)throw new Error(Y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},z=h.roundToPrecision=h.__private__.roundToPrecision=function(Y,lt){var Ct=e||lt;if(isNaN(Y)||isNaN(Ct))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Y.toFixed(Ct).replace(/0+$/,"")};U=h.hpf=h.__private__.hpf=typeof l=="number"?function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return z(Y,l)}:l==="smart"?function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return z(Y,Y>-1&&Y<1?16:5)}:function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return z(Y,16)};var q=h.f2=h.__private__.f2=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.f2");return z(Y,2)},$=h.__private__.f3=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.f3");return z(Y,3)},F=h.scale=h.__private__.scale=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.scale");return v===b.COMPAT?Y*ie:v===b.ADVANCED?Y:void 0},T=function(Y){return v===b.COMPAT?so()-Y:v===b.ADVANCED?Y:void 0},N=function(Y){return F(T(Y))};h.__private__.setPrecision=h.setPrecision=function(Y){typeof parseInt(Y,10)=="number"&&(e=parseInt(Y,10))};var C,w="00000000000000000000000000000000",_=h.__private__.getFileId=function(){return w},x=h.__private__.setFileId=function(Y){return w=Y!==void 0&&/^[a-fA-F0-9]{32}$/.test(Y)?Y.toUpperCase():w.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(xn=new ku(c.userPermissions,c.userPassword,c.ownerPassword,w)),w};h.setFileId=function(Y){return x(Y),this},h.getFileId=function(){return _()};var S=h.__private__.convertDateToPDFDate=function(Y){var lt=Y.getTimezoneOffset(),Ct=lt<0?"+":"-",Ot=Math.floor(Math.abs(lt/60)),Gt=Math.abs(lt%60),ae=[Ct,X(Ot),"'",X(Gt),"'"].join("");return["D:",Y.getFullYear(),X(Y.getMonth()+1),X(Y.getDate()),X(Y.getHours()),X(Y.getMinutes()),X(Y.getSeconds()),ae].join("")},A=h.__private__.convertPDFDateToDate=function(Y){var lt=parseInt(Y.substr(2,4),10),Ct=parseInt(Y.substr(6,2),10)-1,Ot=parseInt(Y.substr(8,2),10),Gt=parseInt(Y.substr(10,2),10),ae=parseInt(Y.substr(12,2),10),Se=parseInt(Y.substr(14,2),10);return new Date(lt,Ct,Ot,Gt,ae,Se,0)},B=h.__private__.setCreationDate=function(Y){var lt;if(Y===void 0&&(Y=new Date),Y instanceof Date)lt=S(Y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");lt=Y}return C=lt},E=h.__private__.getCreationDate=function(Y){var lt=C;return Y==="jsDate"&&(lt=A(C)),lt};h.setCreationDate=function(Y){return B(Y),this},h.getCreationDate=function(Y){return E(Y)};var V,X=h.__private__.padd2=function(Y){return("0"+parseInt(Y)).slice(-2)},Q=h.__private__.padd2Hex=function(Y){return("00"+(Y=Y.toString())).substr(Y.length)},D=0,Z=[],L=[],O=0,G=[],nt=[],ct=!1,ot=L,mt=function(){D=0,O=0,L=[],Z=[],G=[],Oe=ee(),Je=ee()};h.__private__.setCustomOutputDestination=function(Y){ct=!0,ot=Y};var pt=function(Y){ct||(ot=Y)};h.__private__.resetCustomOutputDestination=function(){ct=!1,ot=L};var st=h.__private__.out=function(Y){return Y=Y.toString(),O+=Y.length+1,ot.push(Y),ot},at=h.__private__.write=function(Y){return st(arguments.length===1?Y.toString():Array.prototype.join.call(arguments," "))},vt=h.__private__.getArrayBuffer=function(Y){for(var lt=Y.length,Ct=new ArrayBuffer(lt),Ot=new Uint8Array(Ct);lt--;)Ot[lt]=Y.charCodeAt(lt);return Ct},yt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return yt};var kt=n.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(Y){return kt=v===b.ADVANCED?Y/ie:Y,this};var St,Tt=h.__private__.getFontSize=h.getFontSize=function(){return v===b.COMPAT?kt:kt*ie},Lt=n.R2L||!1;h.__private__.setR2L=h.setR2L=function(Y){return Lt=Y,this},h.__private__.getR2L=h.getR2L=function(){return Lt};var Xt,re=h.__private__.setZoomMode=function(Y){var lt=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Y))St=Y;else if(isNaN(Y)){if(lt.indexOf(Y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Y+'" is not recognized.');St=Y}else St=parseInt(Y,10)};h.__private__.getZoomMode=function(){return St};var ue,ce=h.__private__.setPageMode=function(Y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Y+'" is not recognized.');Xt=Y};h.__private__.getPageMode=function(){return Xt};var de=h.__private__.setLayoutMode=function(Y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Y+'" is not recognized.');ue=Y};h.__private__.getLayoutMode=function(){return ue},h.__private__.setDisplayMode=h.setDisplayMode=function(Y,lt,Ct){return re(Y),de(lt),ce(Ct),this};var ve={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(Y){if(Object.keys(ve).indexOf(Y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ve[Y]},h.__private__.getDocumentProperties=function(){return ve},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(Y){for(var lt in ve)ve.hasOwnProperty(lt)&&Y[lt]&&(ve[lt]=Y[lt]);return this},h.__private__.setDocumentProperty=function(Y,lt){if(Object.keys(ve).indexOf(Y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ve[Y]=lt};var Te,ie,ze,me,ke,we={},ne={},Be=[],$e={},Or={},te={},Sr={},br=null,Ye=0,Ve=[],er=new ub(h),cr=n.hotfixes||[],mr={},jr={},rr=[],Fe=function Y(lt,Ct,Ot,Gt,ae,Se){if(!(this instanceof Y))return new Y(lt,Ct,Ot,Gt,ae,Se);isNaN(lt)&&(lt=1),isNaN(Ct)&&(Ct=0),isNaN(Ot)&&(Ot=0),isNaN(Gt)&&(Gt=1),isNaN(ae)&&(ae=0),isNaN(Se)&&(Se=0),this._matrix=[lt,Ct,Ot,Gt,ae,Se]};Object.defineProperty(Fe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Y){this._matrix[0]=Y}}),Object.defineProperty(Fe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Y){this._matrix[1]=Y}}),Object.defineProperty(Fe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Y){this._matrix[2]=Y}}),Object.defineProperty(Fe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Y){this._matrix[3]=Y}}),Object.defineProperty(Fe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Y){this._matrix[4]=Y}}),Object.defineProperty(Fe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Y){this._matrix[5]=Y}}),Object.defineProperty(Fe.prototype,"a",{get:function(){return this._matrix[0]},set:function(Y){this._matrix[0]=Y}}),Object.defineProperty(Fe.prototype,"b",{get:function(){return this._matrix[1]},set:function(Y){this._matrix[1]=Y}}),Object.defineProperty(Fe.prototype,"c",{get:function(){return this._matrix[2]},set:function(Y){this._matrix[2]=Y}}),Object.defineProperty(Fe.prototype,"d",{get:function(){return this._matrix[3]},set:function(Y){this._matrix[3]=Y}}),Object.defineProperty(Fe.prototype,"e",{get:function(){return this._matrix[4]},set:function(Y){this._matrix[4]=Y}}),Object.defineProperty(Fe.prototype,"f",{get:function(){return this._matrix[5]},set:function(Y){this._matrix[5]=Y}}),Object.defineProperty(Fe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Fe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Fe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Fe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Fe.prototype.join=function(Y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(U).join(Y)},Fe.prototype.multiply=function(Y){var lt=Y.sx*this.sx+Y.shy*this.shx,Ct=Y.sx*this.shy+Y.shy*this.sy,Ot=Y.shx*this.sx+Y.sy*this.shx,Gt=Y.shx*this.shy+Y.sy*this.sy,ae=Y.tx*this.sx+Y.ty*this.shx+this.tx,Se=Y.tx*this.shy+Y.ty*this.sy+this.ty;return new Fe(lt,Ct,Ot,Gt,ae,Se)},Fe.prototype.decompose=function(){var Y=this.sx,lt=this.shy,Ct=this.shx,Ot=this.sy,Gt=this.tx,ae=this.ty,Se=Math.sqrt(Y*Y+lt*lt),Ge=(Y/=Se)*Ct+(lt/=Se)*Ot;Ct-=Y*Ge,Ot-=lt*Ge;var pr=Math.sqrt(Ct*Ct+Ot*Ot);return Ge/=pr,Y*(Ot/=pr)<lt*(Ct/=pr)&&(Y=-Y,lt=-lt,Ge=-Ge,Se=-Se),{scale:new Fe(Se,0,0,pr,0,0),translate:new Fe(1,0,0,1,Gt,ae),rotate:new Fe(Y,lt,-lt,Y,0,0),skew:new Fe(1,0,Ge,1,0,0)}},Fe.prototype.toString=function(Y){return this.join(" ")},Fe.prototype.inversed=function(){var Y=this.sx,lt=this.shy,Ct=this.shx,Ot=this.sy,Gt=this.tx,ae=this.ty,Se=1/(Y*Ot-lt*Ct),Ge=Ot*Se,pr=-lt*Se,Mr=-Ct*Se,Cr=Y*Se;return new Fe(Ge,pr,Mr,Cr,-Ge*Gt-Mr*ae,-pr*Gt-Cr*ae)},Fe.prototype.applyToPoint=function(Y){var lt=Y.x*this.sx+Y.y*this.shx+this.tx,Ct=Y.x*this.shy+Y.y*this.sy+this.ty;return new Mo(lt,Ct)},Fe.prototype.applyToRectangle=function(Y){var lt=this.applyToPoint(Y),Ct=this.applyToPoint(new Mo(Y.x+Y.w,Y.y+Y.h));return new Zo(lt.x,lt.y,Ct.x-lt.x,Ct.y-lt.y)},Fe.prototype.clone=function(){var Y=this.sx,lt=this.shy,Ct=this.shx,Ot=this.sy,Gt=this.tx,ae=this.ty;return new Fe(Y,lt,Ct,Ot,Gt,ae)},h.Matrix=Fe;var Nr=h.matrixMult=function(Y,lt){return lt.multiply(Y)},Ue=new Fe(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Ue;var Et=function(Y,lt){if(!Or[Y]){var Ct=(lt instanceof Ul?"Sh":"P")+(Object.keys($e).length+1).toString(10);lt.id=Ct,Or[Y]=Ct,$e[Ct]=lt,er.publish("addPattern",lt)}};h.ShadingPattern=Ul,h.TilingPattern=Uu,h.addShadingPattern=function(Y,lt){return P("addShadingPattern()"),Et(Y,lt),this},h.beginTilingPattern=function(Y){P("beginTilingPattern()"),zn(Y.boundingBox[0],Y.boundingBox[1],Y.boundingBox[2]-Y.boundingBox[0],Y.boundingBox[3]-Y.boundingBox[1],Y.matrix)},h.endTilingPattern=function(Y,lt){P("endTilingPattern()"),lt.stream=nt[V].join(`
`),Et(Y,lt),er.publish("endTilingPattern",lt),rr.pop().restore()};var qt=h.__private__.newObject=function(){var Y=ee();return Ce(Y,!0),Y},ee=h.__private__.newObjectDeferred=function(){return D++,Z[D]=function(){return O},D},Ce=function(Y,lt){return lt=typeof lt=="boolean"&&lt,Z[Y]=O,lt&&st(Y+" 0 obj"),Y},sr=h.__private__.newAdditionalObject=function(){var Y={objId:ee(),content:""};return G.push(Y),Y},Oe=ee(),Je=ee(),Ke=h.__private__.decodeColorString=function(Y){var lt=Y.split(" ");if(lt.length!==2||lt[1]!=="g"&&lt[1]!=="G")lt.length===5&&(lt[4]==="k"||lt[4]==="K")&&(lt=[(1-lt[0])*(1-lt[3]),(1-lt[1])*(1-lt[3]),(1-lt[2])*(1-lt[3]),"r"]);else{var Ct=parseFloat(lt[0]);lt=[Ct,Ct,Ct,"r"]}for(var Ot="#",Gt=0;Gt<3;Gt++)Ot+=("0"+Math.floor(255*parseFloat(lt[Gt])).toString(16)).slice(-2);return Ot},He=h.__private__.encodeColorString=function(Y){var lt;typeof Y=="string"&&(Y={ch1:Y});var Ct=Y.ch1,Ot=Y.ch2,Gt=Y.ch3,ae=Y.ch4,Se=Y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ct=="string"&&Ct.charAt(0)!=="#"){var Ge=new t3(Ct);if(Ge.ok)Ct=Ge.toHex();else if(!/^\d*\.?\d*$/.test(Ct))throw new Error('Invalid color "'+Ct+'" passed to jsPDF.encodeColorString.')}if(typeof Ct=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ct)&&(Ct="#"+Ct[1]+Ct[1]+Ct[2]+Ct[2]+Ct[3]+Ct[3]),typeof Ct=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ct)){var pr=parseInt(Ct.substr(1),16);Ct=pr>>16&255,Ot=pr>>8&255,Gt=255&pr}if(Ot===void 0||ae===void 0&&Ct===Ot&&Ot===Gt)if(typeof Ct=="string")lt=Ct+" "+Se[0];else switch(Y.precision){case 2:lt=q(Ct/255)+" "+Se[0];break;case 3:default:lt=$(Ct/255)+" "+Se[0]}else if(ae===void 0||ln(ae)==="object"){if(ae&&!isNaN(ae.a)&&ae.a===0)return lt=["1.","1.","1.",Se[1]].join(" ");if(typeof Ct=="string")lt=[Ct,Ot,Gt,Se[1]].join(" ");else switch(Y.precision){case 2:lt=[q(Ct/255),q(Ot/255),q(Gt/255),Se[1]].join(" ");break;default:case 3:lt=[$(Ct/255),$(Ot/255),$(Gt/255),Se[1]].join(" ")}}else if(typeof Ct=="string")lt=[Ct,Ot,Gt,ae,Se[2]].join(" ");else switch(Y.precision){case 2:lt=[q(Ct),q(Ot),q(Gt),q(ae),Se[2]].join(" ");break;case 3:default:lt=[$(Ct),$(Ot),$(Gt),$(ae),Se[2]].join(" ")}return lt},hr=h.__private__.getFilters=function(){return o},lr=h.__private__.putStream=function(Y){var lt=(Y=Y||{}).data||"",Ct=Y.filters||hr(),Ot=Y.alreadyAppliedFilters||[],Gt=Y.addLength1||!1,ae=lt.length,Se=Y.objectId,Ge=function(ri){return ri};if(c!==null&&Se===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(Ge=xn.encryptor(Se,0));var pr={};Ct===!0&&(Ct=["FlateEncode"]);var Mr=Y.additionalKeyValues||[],Cr=(pr=_r.API.processDataByFilters!==void 0?_r.API.processDataByFilters(lt,Ct):{data:lt,reverseChain:[]}).reverseChain+(Array.isArray(Ot)?Ot.join(" "):Ot.toString());if(pr.data.length!==0&&(Mr.push({key:"Length",value:pr.data.length}),Gt===!0&&Mr.push({key:"Length1",value:ae})),Cr.length!=0)if(Cr.split("/").length-1==1)Mr.push({key:"Filter",value:Cr});else{Mr.push({key:"Filter",value:"["+Cr+"]"});for(var Vr=0;Vr<Mr.length;Vr+=1)if(Mr[Vr].key==="DecodeParms"){for(var pn=[],bn=0;bn<pr.reverseChain.split("/").length-1;bn+=1)pn.push("null");pn.push(Mr[Vr].value),Mr[Vr].value="["+pn.join(" ")+"]"}}st("<<");for(var Rn=0;Rn<Mr.length;Rn++)st("/"+Mr[Rn].key+" "+Mr[Rn].value);st(">>"),pr.data.length!==0&&(st("stream"),st(Ge(pr.data)),st("endstream"))},fr=h.__private__.putPage=function(Y){var lt=Y.number,Ct=Y.data,Ot=Y.objId,Gt=Y.contentsObjId;Ce(Ot,!0),st("<</Type /Page"),st("/Parent "+Y.rootDictionaryObjId+" 0 R"),st("/Resources "+Y.resourceDictionaryObjId+" 0 R"),st("/MediaBox ["+parseFloat(U(Y.mediaBox.bottomLeftX))+" "+parseFloat(U(Y.mediaBox.bottomLeftY))+" "+U(Y.mediaBox.topRightX)+" "+U(Y.mediaBox.topRightY)+"]"),Y.cropBox!==null&&st("/CropBox ["+U(Y.cropBox.bottomLeftX)+" "+U(Y.cropBox.bottomLeftY)+" "+U(Y.cropBox.topRightX)+" "+U(Y.cropBox.topRightY)+"]"),Y.bleedBox!==null&&st("/BleedBox ["+U(Y.bleedBox.bottomLeftX)+" "+U(Y.bleedBox.bottomLeftY)+" "+U(Y.bleedBox.topRightX)+" "+U(Y.bleedBox.topRightY)+"]"),Y.trimBox!==null&&st("/TrimBox ["+U(Y.trimBox.bottomLeftX)+" "+U(Y.trimBox.bottomLeftY)+" "+U(Y.trimBox.topRightX)+" "+U(Y.trimBox.topRightY)+"]"),Y.artBox!==null&&st("/ArtBox ["+U(Y.artBox.bottomLeftX)+" "+U(Y.artBox.bottomLeftY)+" "+U(Y.artBox.topRightX)+" "+U(Y.artBox.topRightY)+"]"),typeof Y.userUnit=="number"&&Y.userUnit!==1&&st("/UserUnit "+Y.userUnit),er.publish("putPage",{objId:Ot,pageContext:Ve[lt],pageNumber:lt,page:Ct}),st("/Contents "+Gt+" 0 R"),st(">>"),st("endobj");var ae=Ct.join(`
`);return v===b.ADVANCED&&(ae+=`
Q`),Ce(Gt,!0),lr({data:ae,filters:hr(),objectId:Gt}),st("endobj"),Ot},Xr=h.__private__.putPages=function(){var Y,lt,Ct=[];for(Y=1;Y<=Ye;Y++)Ve[Y].objId=ee(),Ve[Y].contentsObjId=ee();for(Y=1;Y<=Ye;Y++)Ct.push(fr({number:Y,data:nt[Y],objId:Ve[Y].objId,contentsObjId:Ve[Y].contentsObjId,mediaBox:Ve[Y].mediaBox,cropBox:Ve[Y].cropBox,bleedBox:Ve[Y].bleedBox,trimBox:Ve[Y].trimBox,artBox:Ve[Y].artBox,userUnit:Ve[Y].userUnit,rootDictionaryObjId:Oe,resourceDictionaryObjId:Je}));Ce(Oe,!0),st("<</Type /Pages");var Ot="/Kids [";for(lt=0;lt<Ye;lt++)Ot+=Ct[lt]+" 0 R ";st(Ot+"]"),st("/Count "+Ye),st(">>"),st("endobj"),er.publish("postPutPages")},Rr=function(Y){er.publish("putFont",{font:Y,out:st,newObject:qt,putStream:lr}),Y.isAlreadyPutted!==!0&&(Y.objectNumber=qt(),st("<<"),st("/Type /Font"),st("/BaseFont /"+Cu(Y.postScriptName)),st("/Subtype /Type1"),typeof Y.encoding=="string"&&st("/Encoding /"+Y.encoding),st("/FirstChar 32"),st("/LastChar 255"),st(">>"),st("endobj"))},en=function(){for(var Y in we)we.hasOwnProperty(Y)&&(d===!1||d===!0&&f.hasOwnProperty(Y))&&Rr(we[Y])},Qr=function(Y){Y.objectNumber=qt();var lt=[];lt.push({key:"Type",value:"/XObject"}),lt.push({key:"Subtype",value:"/Form"}),lt.push({key:"BBox",value:"["+[U(Y.x),U(Y.y),U(Y.x+Y.width),U(Y.y+Y.height)].join(" ")+"]"}),lt.push({key:"Matrix",value:"["+Y.matrix.toString()+"]"});var Ct=Y.pages[1].join(`
`);lr({data:Ct,additionalKeyValues:lt,objectId:Y.objectNumber}),st("endobj")},Lr=function(){for(var Y in mr)mr.hasOwnProperty(Y)&&Qr(mr[Y])},xt=function(Y,lt){var Ct,Ot=[],Gt=1/(lt-1);for(Ct=0;Ct<1;Ct+=Gt)Ot.push(Ct);if(Ot.push(1),Y[0].offset!=0){var ae={offset:0,color:Y[0].color};Y.unshift(ae)}if(Y[Y.length-1].offset!=1){var Se={offset:1,color:Y[Y.length-1].color};Y.push(Se)}for(var Ge="",pr=0,Mr=0;Mr<Ot.length;Mr++){for(Ct=Ot[Mr];Ct>Y[pr+1].offset;)pr++;var Cr=Y[pr].offset,Vr=(Ct-Cr)/(Y[pr+1].offset-Cr),pn=Y[pr].color,bn=Y[pr+1].color;Ge+=Q(Math.round((1-Vr)*pn[0]+Vr*bn[0]).toString(16))+Q(Math.round((1-Vr)*pn[1]+Vr*bn[1]).toString(16))+Q(Math.round((1-Vr)*pn[2]+Vr*bn[2]).toString(16))}return Ge.trim()},Yt=function(Y,lt){lt||(lt=21);var Ct=qt(),Ot=xt(Y.colors,lt),Gt=[];Gt.push({key:"FunctionType",value:"0"}),Gt.push({key:"Domain",value:"[0.0 1.0]"}),Gt.push({key:"Size",value:"["+lt+"]"}),Gt.push({key:"BitsPerSample",value:"8"}),Gt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Gt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),lr({data:Ot,additionalKeyValues:Gt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ct}),st("endobj"),Y.objectNumber=qt(),st("<< /ShadingType "+Y.type),st("/ColorSpace /DeviceRGB");var ae="/Coords ["+U(parseFloat(Y.coords[0]))+" "+U(parseFloat(Y.coords[1]))+" ";Y.type===2?ae+=U(parseFloat(Y.coords[2]))+" "+U(parseFloat(Y.coords[3])):ae+=U(parseFloat(Y.coords[2]))+" "+U(parseFloat(Y.coords[3]))+" "+U(parseFloat(Y.coords[4]))+" "+U(parseFloat(Y.coords[5])),st(ae+="]"),Y.matrix&&st("/Matrix ["+Y.matrix.toString()+"]"),st("/Function "+Ct+" 0 R"),st("/Extend [true true]"),st(">>"),st("endobj")},he=function(Y,lt){var Ct=ee(),Ot=qt();lt.push({resourcesOid:Ct,objectOid:Ot}),Y.objectNumber=Ot;var Gt=[];Gt.push({key:"Type",value:"/Pattern"}),Gt.push({key:"PatternType",value:"1"}),Gt.push({key:"PaintType",value:"1"}),Gt.push({key:"TilingType",value:"1"}),Gt.push({key:"BBox",value:"["+Y.boundingBox.map(U).join(" ")+"]"}),Gt.push({key:"XStep",value:U(Y.xStep)}),Gt.push({key:"YStep",value:U(Y.yStep)}),Gt.push({key:"Resources",value:Ct+" 0 R"}),Y.matrix&&Gt.push({key:"Matrix",value:"["+Y.matrix.toString()+"]"}),lr({data:Y.stream,additionalKeyValues:Gt,objectId:Y.objectNumber}),st("endobj")},ge=function(Y){var lt;for(lt in $e)$e.hasOwnProperty(lt)&&($e[lt]instanceof Ul?Yt($e[lt]):$e[lt]instanceof Uu&&he($e[lt],Y))},Ze=function(Y){for(var lt in Y.objectNumber=qt(),st("<<"),Y)switch(lt){case"opacity":st("/ca "+q(Y[lt]));break;case"stroke-opacity":st("/CA "+q(Y[lt]))}st(">>"),st("endobj")},je=function(){var Y;for(Y in te)te.hasOwnProperty(Y)&&Ze(te[Y])},Pe=function(){for(var Y in st("/XObject <<"),mr)mr.hasOwnProperty(Y)&&mr[Y].objectNumber>=0&&st("/"+Y+" "+mr[Y].objectNumber+" 0 R");er.publish("putXobjectDict"),st(">>")},Ar=function(){xn.oid=qt(),st("<<"),st("/Filter /Standard"),st("/V "+xn.v),st("/R "+xn.r),st("/U <"+xn.toHexString(xn.U)+">"),st("/O <"+xn.toHexString(xn.O)+">"),st("/P "+xn.P),st(">>"),st("endobj")},wr=function(){for(var Y in st("/Font <<"),we)we.hasOwnProperty(Y)&&(d===!1||d===!0&&f.hasOwnProperty(Y))&&st("/"+Y+" "+we[Y].objectNumber+" 0 R");st(">>")},kr=function(){if(Object.keys($e).length>0){for(var Y in st("/Shading <<"),$e)$e.hasOwnProperty(Y)&&$e[Y]instanceof Ul&&$e[Y].objectNumber>=0&&st("/"+Y+" "+$e[Y].objectNumber+" 0 R");er.publish("putShadingPatternDict"),st(">>")}},ur=function(Y){if(Object.keys($e).length>0){for(var lt in st("/Pattern <<"),$e)$e.hasOwnProperty(lt)&&$e[lt]instanceof h.TilingPattern&&$e[lt].objectNumber>=0&&$e[lt].objectNumber<Y&&st("/"+lt+" "+$e[lt].objectNumber+" 0 R");er.publish("putTilingPatternDict"),st(">>")}},Qe=function(){if(Object.keys(te).length>0){var Y;for(Y in st("/ExtGState <<"),te)te.hasOwnProperty(Y)&&te[Y].objectNumber>=0&&st("/"+Y+" "+te[Y].objectNumber+" 0 R");er.publish("putGStateDict"),st(">>")}},gr=function(Y){Ce(Y.resourcesOid,!0),st("<<"),st("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),wr(),kr(),ur(Y.objectOid),Qe(),Pe(),st(">>"),st("endobj")},Hr=function(){var Y=[];en(),je(),Lr(),ge(Y),er.publish("putResources"),Y.forEach(gr),gr({resourcesOid:Je,objectOid:Number.MAX_SAFE_INTEGER}),er.publish("postPutResources")},Yr=function(){er.publish("putAdditionalObjects");for(var Y=0;Y<G.length;Y++){var lt=G[Y];Ce(lt.objId,!0),st(lt.content),st("endobj")}er.publish("postPutAdditionalObjects")},rn=function(Y){ne[Y.fontName]=ne[Y.fontName]||{},ne[Y.fontName][Y.fontStyle]=Y.id},Tn=function(Y,lt,Ct,Ot,Gt){var ae={id:"F"+(Object.keys(we).length+1).toString(10),postScriptName:Y,fontName:lt,fontStyle:Ct,encoding:Ot,isStandardFont:Gt||!1,metadata:{}};return er.publish("addFont",{font:ae,instance:this}),we[ae.id]=ae,rn(ae),ae.id},li=function(Y){for(var lt=0,Ct=yt.length;lt<Ct;lt++){var Ot=Tn.call(this,Y[lt][0],Y[lt][1],Y[lt][2],yt[lt][3],!0);d===!1&&(f[Ot]=!0);var Gt=Y[lt][0].split("-");rn({id:Ot,fontName:Gt[0],fontStyle:Gt[1]||""})}er.publish("addFonts",{fonts:we,dictionary:ne})},Pn=function(Y){return Y.foo=function(){try{return Y.apply(this,arguments)}catch(Ot){var lt=Ot.stack||"";~lt.indexOf(" at ")&&(lt=lt.split(" at ")[1]);var Ct="Error in function "+lt.split(`
`)[0].split("<")[0]+": "+Ot.message;if(!Tr.console)throw new Error(Ct);Tr.console.error(Ct,Ot),Tr.alert&&alert(Ct)}},Y.foo.bar=Y,Y.foo},zr=function(Y,lt){var Ct,Ot,Gt,ae,Se,Ge,pr,Mr,Cr;if(Gt=(lt=lt||{}).sourceEncoding||"Unicode",Se=lt.outputEncoding,(lt.autoencode||Se)&&we[Te].metadata&&we[Te].metadata[Gt]&&we[Te].metadata[Gt].encoding&&(ae=we[Te].metadata[Gt].encoding,!Se&&we[Te].encoding&&(Se=we[Te].encoding),!Se&&ae.codePages&&(Se=ae.codePages[0]),typeof Se=="string"&&(Se=ae[Se]),Se)){for(pr=!1,Ge=[],Ct=0,Ot=Y.length;Ct<Ot;Ct++)(Mr=Se[Y.charCodeAt(Ct)])?Ge.push(String.fromCharCode(Mr)):Ge.push(Y[Ct]),Ge[Ct].charCodeAt(0)>>8&&(pr=!0);Y=Ge.join("")}for(Ct=Y.length;pr===void 0&&Ct!==0;)Y.charCodeAt(Ct-1)>>8&&(pr=!0),Ct--;if(!pr)return Y;for(Ge=lt.noBOM?[]:[254,255],Ct=0,Ot=Y.length;Ct<Ot;Ct++){if((Cr=(Mr=Y.charCodeAt(Ct))>>8)>>8)throw new Error("Character at position "+Ct+" of string '"+Y+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ge.push(Cr),Ge.push(Mr-(Cr<<8))}return String.fromCharCode.apply(void 0,Ge)},fn=h.__private__.pdfEscape=h.pdfEscape=function(Y,lt){return zr(Y,lt).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ui=h.__private__.beginPage=function(Y){nt[++Ye]=[],Ve[Ye]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Y[0]),topRightY:Number(Y[1])}},bi(Ye),pt(nt[V])},Dr=function(Y,lt){var Ct,Ot,Gt;switch(t=lt||t,typeof Y=="string"&&(Ct=y(Y.toLowerCase()),Array.isArray(Ct)&&(Ot=Ct[0],Gt=Ct[1])),Array.isArray(Y)&&(Ot=Y[0]*ie,Gt=Y[1]*ie),isNaN(Ot)&&(Ot=s[0],Gt=s[1]),(Ot>14400||Gt>14400)&&(gn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ot=Math.min(14400,Ot),Gt=Math.min(14400,Gt)),s=[Ot,Gt],t.substr(0,1)){case"l":Gt>Ot&&(s=[Gt,Ot]);break;case"p":Ot>Gt&&(s=[Gt,Ot])}ui(s),hu(ro),st(Wi),jl!==0&&st(jl+" J"),Fs!==0&&st(Fs+" j"),er.publish("addPage",{pageNumber:Ye})},Ir=function(Y){Y>0&&Y<=Ye&&(nt.splice(Y,1),Ve.splice(Y,1),Ye--,V>Ye&&(V=Ye),this.setPage(V))},bi=function(Y){Y>0&&Y<=Ye&&(V=Y)},Ei=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return nt.length-1},Os=function(Y,lt,Ct){var Ot,Gt=void 0;return Ct=Ct||{},Y=Y!==void 0?Y:we[Te].fontName,lt=lt!==void 0?lt:we[Te].fontStyle,Ot=Y.toLowerCase(),ne[Ot]!==void 0&&ne[Ot][lt]!==void 0?Gt=ne[Ot][lt]:ne[Y]!==void 0&&ne[Y][lt]!==void 0?Gt=ne[Y][lt]:Ct.disableWarning===!1&&gn.warn("Unable to look up font label for font '"+Y+"', '"+lt+"'. Refer to getFontList() for available fonts."),Gt||Ct.noFallback||(Gt=ne.times[lt])==null&&(Gt=ne.times.normal),Gt},Ln=h.__private__.putInfo=function(){var Y=qt(),lt=function(Ot){return Ot};for(var Ct in c!==null&&(lt=xn.encryptor(Y,0)),st("<<"),st("/Producer ("+fn(lt("jsPDF "+_r.version))+")"),ve)ve.hasOwnProperty(Ct)&&ve[Ct]&&st("/"+Ct.substr(0,1).toUpperCase()+Ct.substr(1)+" ("+fn(lt(ve[Ct]))+")");st("/CreationDate ("+fn(lt(C))+")"),st(">>"),st("endobj")},ci=h.__private__.putCatalog=function(Y){var lt=(Y=Y||{}).rootDictionaryObjId||Oe;switch(qt(),st("<<"),st("/Type /Catalog"),st("/Pages "+lt+" 0 R"),St||(St="fullwidth"),St){case"fullwidth":st("/OpenAction [3 0 R /FitH null]");break;case"fullheight":st("/OpenAction [3 0 R /FitV null]");break;case"fullpage":st("/OpenAction [3 0 R /Fit]");break;case"original":st("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ct=""+St;Ct.substr(Ct.length-1)==="%"&&(St=parseInt(St)/100),typeof St=="number"&&st("/OpenAction [3 0 R /XYZ null null "+q(St)+"]")}switch(ue||(ue="continuous"),ue){case"continuous":st("/PageLayout /OneColumn");break;case"single":st("/PageLayout /SinglePage");break;case"two":case"twoleft":st("/PageLayout /TwoColumnLeft");break;case"tworight":st("/PageLayout /TwoColumnRight")}Xt&&st("/PageMode /"+Xt),er.publish("putCatalog"),st(">>"),st("endobj")},rs=h.__private__.putTrailer=function(){st("trailer"),st("<<"),st("/Size "+(D+1)),st("/Root "+D+" 0 R"),st("/Info "+(D-1)+" 0 R"),c!==null&&st("/Encrypt "+xn.oid+" 0 R"),st("/ID [ <"+w+"> <"+w+"> ]"),st(">>")},Fr=h.__private__.putHeader=function(){st("%PDF-"+p),st("%")},eo=h.__private__.putXRef=function(){var Y="0000000000";st("xref"),st("0 "+(D+1)),st("0000000000 65535 f ");for(var lt=1;lt<=D;lt++)typeof Z[lt]=="function"?st((Y+Z[lt]()).slice(-10)+" 00000 n "):Z[lt]!==void 0?st((Y+Z[lt]).slice(-10)+" 00000 n "):st("0000000000 00000 n ")},hi=h.__private__.buildDocument=function(){mt(),pt(L),er.publish("buildDocument"),Fr(),Xr(),Yr(),Hr(),c!==null&&Ar(),Ln(),ci();var Y=O;return eo(),rs(),st("startxref"),st(""+Y),st("%%EOF"),pt(nt[V]),L.join(`
`)},vi=h.__private__.getBlob=function(Y){return new Blob([vt(Y)],{type:"application/pdf"})},En=h.output=h.__private__.output=Pn(function(Y,lt){switch(typeof(lt=lt||{})=="string"?lt={filename:lt}:lt.filename=lt.filename||"generated.pdf",Y){case void 0:return hi();case"save":h.save(lt.filename);break;case"arraybuffer":return vt(hi());case"blob":return vi(hi());case"bloburi":case"bloburl":if(Tr.URL!==void 0&&typeof Tr.URL.createObjectURL=="function")return Tr.URL&&Tr.URL.createObjectURL(vi(hi()))||void 0;gn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ct="",Ot=hi();try{Ct=rg(Ot)}catch{Ct=rg(unescape(encodeURIComponent(Ot)))}return"data:application/pdf;filename="+lt.filename+";base64,"+Ct;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Tr)==="[object Window]"){var Gt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ae=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';lt.pdfObjectUrl&&(Gt=lt.pdfObjectUrl,ae="");var Se='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Gt+'"'+ae+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(lt)+");<\/script></body></html>",Ge=Tr.open();return Ge!==null&&Ge.document.write(Se),Ge}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Tr)==="[object Window]"){var pr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(lt.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+lt.filename+'" width="500px" height="400px" /></body></html>',Mr=Tr.open();if(Mr!==null){Mr.document.write(pr);var Cr=this;Mr.document.documentElement.querySelector("#pdfViewer").onload=function(){Mr.document.title=lt.filename,Mr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Cr.output("bloburl"))}}return Mr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Tr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Vr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",lt)+'"></iframe></body></html>',pn=Tr.open();if(pn!==null&&(pn.document.write(Vr),pn.document.title=lt.filename),pn||typeof safari>"u")return pn;break;case"datauri":case"dataurl":return Tr.document.location.href=this.output("datauristring",lt);default:return null}}),ji=function(Y){return Array.isArray(cr)===!0&&cr.indexOf(Y)>-1};switch(r){case"pt":ie=1;break;case"mm":ie=72/25.4;break;case"cm":ie=72/2.54;break;case"in":ie=72;break;case"px":ie=ji("px_scaling")==1?.75:96/72;break;case"pc":case"em":ie=12;break;case"ex":ie=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ie=r}var xn=null;B(),x();var wi=function(Y){return c!==null?xn.encryptor(Y,0):function(lt){return lt}},Ps=h.__private__.getPageInfo=h.getPageInfo=function(Y){if(isNaN(Y)||Y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ve[Y].objId,pageNumber:Y,pageContext:Ve[Y]}},vr=h.__private__.getPageInfoByObjId=function(Y){if(isNaN(Y)||Y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var lt in Ve)if(Ve[lt].objId===Y)break;return Ps(lt)},dn=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Ve[V].objId,pageNumber:V,pageContext:Ve[V]}};h.addPage=function(){return Dr.apply(this,arguments),this},h.setPage=function(){return bi.apply(this,arguments),pt.call(this,nt[V]),this},h.insertPage=function(Y){return this.addPage(),this.movePage(V,Y),this},h.movePage=function(Y,lt){var Ct,Ot;if(Y>lt){Ct=nt[Y],Ot=Ve[Y];for(var Gt=Y;Gt>lt;Gt--)nt[Gt]=nt[Gt-1],Ve[Gt]=Ve[Gt-1];nt[lt]=Ct,Ve[lt]=Ot,this.setPage(lt)}else if(Y<lt){Ct=nt[Y],Ot=Ve[Y];for(var ae=Y;ae<lt;ae++)nt[ae]=nt[ae+1],Ve[ae]=Ve[ae+1];nt[lt]=Ct,Ve[lt]=Ot,this.setPage(lt)}return this},h.deletePage=function(){return Ir.apply(this,arguments),this},h.__private__.text=h.text=function(Y,lt,Ct,Ot,Gt){var ae,Se,Ge,pr,Mr,Cr,Vr,pn,bn,Rn=(Ot=Ot||{}).scope||this;if(typeof Y=="number"&&typeof lt=="number"&&(typeof Ct=="string"||Array.isArray(Ct))){var ri=Ct;Ct=lt,lt=Y,Y=ri}if(arguments[3]instanceof Fe?(P("The transform parameter of text() with a Matrix value"),bn=Gt):(Ge=arguments[4],pr=arguments[5],ln(Vr=arguments[3])==="object"&&Vr!==null||(typeof Ge=="string"&&(pr=Ge,Ge=null),typeof Vr=="string"&&(pr=Vr,Vr=null),typeof Vr=="number"&&(Ge=Vr,Vr=null),Ot={flags:Vr,angle:Ge,align:pr})),isNaN(lt)||isNaN(Ct)||Y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Y.length===0)return Rn;var Yn="",is=!1,Ni=typeof Ot.lineHeightFactor=="number"?Ot.lineHeightFactor:Yo,zs=Rn.internal.scaleFactor;function Ml(xe){return xe=xe.split("	").join(Array(Ot.TabLen||9).join(" ")),fn(xe,Vr)}function ta(xe){for(var Ne,or=xe.concat(),dr=[],Er=or.length;Er--;)typeof(Ne=or.shift())=="string"?dr.push(Ne):Array.isArray(xe)&&(Ne.length===1||Ne[1]===void 0&&Ne[2]===void 0)?dr.push(Ne[0]):dr.push([Ne[0],Ne[1],Ne[2]]);return dr}function Ba(xe,Ne){var or;if(typeof xe=="string")or=Ne(xe)[0];else if(Array.isArray(xe)){for(var dr,Er,ni=xe.concat(),xr=[],Un=ni.length;Un--;)typeof(dr=ni.shift())=="string"?xr.push(Ne(dr)[0]):Array.isArray(dr)&&typeof dr[0]=="string"&&(Er=Ne(dr[0],dr[1],dr[2]),xr.push([Er[0],Er[1],Er[2]]));or=xr}return or}var ea=!1,Nl=!0;if(typeof Y=="string")ea=!0;else if(Array.isArray(Y)){var Ol=Y.concat();Se=[];for(var za,Dn=Ol.length;Dn--;)(typeof(za=Ol.shift())!="string"||Array.isArray(za)&&typeof za[0]!="string")&&(Nl=!1);ea=Nl}if(ea===!1)throw new Error('Type of text must be string or Array. "'+Y+'" is not recognized.');typeof Y=="string"&&(Y=Y.match(/[\r?\n]/)?Y.split(/\r\n|\r|\n/g):[Y]);var Oi=kt/Rn.internal.scaleFactor,cn=Oi*(Ni-1);switch(Ot.baseline){case"bottom":Ct-=cn;break;case"top":Ct+=Oi-cn;break;case"hanging":Ct+=Oi-2*cn;break;case"middle":Ct+=Oi/2-cn}if((Cr=Ot.maxWidth||0)>0&&(typeof Y=="string"?Y=Rn.splitTextToSize(Y,Cr):Object.prototype.toString.call(Y)==="[object Array]"&&(Y=Y.reduce(function(xe,Ne){return xe.concat(Rn.splitTextToSize(Ne,Cr))},[]))),ae={text:Y,x:lt,y:Ct,options:Ot,mutex:{pdfEscape:fn,activeFontKey:Te,fonts:we,activeFontSize:kt}},er.publish("preProcessText",ae),Y=ae.text,Ge=(Ot=ae.options).angle,!(bn instanceof Fe)&&Ge&&typeof Ge=="number"){Ge*=Math.PI/180,Ot.rotationDirection===0&&(Ge=-Ge),v===b.ADVANCED&&(Ge=-Ge);var oo=Math.cos(Ge),fi=Math.sin(Ge);bn=new Fe(oo,fi,-fi,oo,0,0)}else Ge&&Ge instanceof Fe&&(bn=Ge);v!==b.ADVANCED||bn||(bn=Ue),(Mr=Ot.charSpace||io)!==void 0&&(Yn+=U(F(Mr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(pn=Ot.horizontalScale)!==void 0&&(Yn+=U(100*pn)+` Tz
`),Ot.lang;var Pi=-1,Pl=Ot.renderingMode!==void 0?Ot.renderingMode:Ot.stroke,Ua=Rn.internal.getCurrentPageInfo().pageContext;switch(Pl){case 0:case!1:case"fill":Pi=0;break;case 1:case!0:case"stroke":Pi=1;break;case 2:case"fillThenStroke":Pi=2;break;case 3:case"invisible":Pi=3;break;case 4:case"fillAndAddForClipping":Pi=4;break;case 5:case"strokeAndAddPathForClipping":Pi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Pi=6;break;case 7:case"addToPathForClipping":Pi=7}var Us=Ua.usedRenderingMode!==void 0?Ua.usedRenderingMode:-1;Pi!==-1?Yn+=Pi+` Tr
`:Us!==-1&&(Yn+=`0 Tr
`),Pi!==-1&&(Ua.usedRenderingMode=Pi),pr=Ot.align||"left";var Li,ws=kt*Ni,xs=Rn.internal.pageSize.getWidth(),Ll=we[Te];Mr=Ot.charSpace||io,Cr=Ot.maxWidth||0,Vr=Object.assign({autoencode:!0,noBOM:!0},Ot.flags);var R=[],W=function(xe){return Rn.getStringUnitWidth(xe,{font:Ll,charSpace:Mr,fontSize:kt,doKerning:!1})*kt/zs};if(Object.prototype.toString.call(Y)==="[object Array]"){var J;Se=ta(Y),pr!=="left"&&(Li=Se.map(W));var rt,it=0;if(pr==="right"){lt-=Li[0],Y=[],Dn=Se.length;for(var ht=0;ht<Dn;ht++)ht===0?(rt=Rs(lt),J=no(Ct)):(rt=F(it-Li[ht]),J=-ws),Y.push([Se[ht],rt,J]),it=Li[ht]}else if(pr==="center"){lt-=Li[0]/2,Y=[],Dn=Se.length;for(var wt=0;wt<Dn;wt++)wt===0?(rt=Rs(lt),J=no(Ct)):(rt=F((it-Li[wt])/2),J=-ws),Y.push([Se[wt],rt,J]),it=Li[wt]}else if(pr==="left"){Y=[],Dn=Se.length;for(var At=0;At<Dn;At++)Y.push(Se[At])}else if(pr==="justify"&&Ll.encoding==="Identity-H"){Y=[],Dn=Se.length,Cr=Cr!==0?Cr:xs;for(var Nt=0,Mt=0;Mt<Dn;Mt++)if(J=Mt===0?no(Ct):-ws,rt=Mt===0?Rs(lt):Nt,Mt<Dn-1){var $t=F((Cr-Li[Mt])/(Se[Mt].split(" ").length-1)),jt=Se[Mt].split(" ");Y.push([jt[0]+" ",rt,J]),Nt=0;for(var Ht=1;Ht<jt.length;Ht++){var Pt=(W(jt[Ht-1]+" "+jt[Ht])-W(jt[Ht]))*zs+$t;Ht==jt.length-1?Y.push([jt[Ht],Pt,0]):Y.push([jt[Ht]+" ",Pt,0]),Nt-=Pt}}else Y.push([Se[Mt],rt,J]);Y.push(["",Nt,0])}else{if(pr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Y=[],Dn=Se.length,Cr=Cr!==0?Cr:xs,Mt=0;Mt<Dn;Mt++)J=Mt===0?no(Ct):-ws,rt=Mt===0?Rs(lt):0,Mt<Dn-1?R.push(U(F((Cr-Li[Mt])/(Se[Mt].split(" ").length-1)))):R.push(0),Y.push([Se[Mt],rt,J])}}var zt=typeof Ot.R2L=="boolean"?Ot.R2L:Lt;zt===!0&&(Y=Ba(Y,function(xe,Ne,or){return[xe.split("").reverse().join(""),Ne,or]})),ae={text:Y,x:lt,y:Ct,options:Ot,mutex:{pdfEscape:fn,activeFontKey:Te,fonts:we,activeFontSize:kt}},er.publish("postProcessText",ae),Y=ae.text,is=ae.mutex.isHex||!1;var Bt=we[Te].encoding;Bt!=="WinAnsiEncoding"&&Bt!=="StandardEncoding"||(Y=Ba(Y,function(xe,Ne,or){return[Ml(xe),Ne,or]})),Se=ta(Y),Y=[];for(var Vt,Kt,Qt,se=0,fe=1,Me=Array.isArray(Se[0])?fe:se,Ie="",Ae=function(xe,Ne,or){var dr="";return or instanceof Fe?(or=typeof Ot.angle=="number"?Nr(or,new Fe(1,0,0,1,xe,Ne)):Nr(new Fe(1,0,0,1,xe,Ne),or),v===b.ADVANCED&&(or=Nr(new Fe(1,0,0,-1,0,0),or)),dr=or.join(" ")+` Tm
`):dr=U(xe)+" "+U(Ne)+` Td
`,dr},Ee=0;Ee<Se.length;Ee++){switch(Ie="",Me){case fe:Qt=(is?"<":"(")+Se[Ee][0]+(is?">":")"),Vt=parseFloat(Se[Ee][1]),Kt=parseFloat(Se[Ee][2]);break;case se:Qt=(is?"<":"(")+Se[Ee]+(is?">":")"),Vt=Rs(lt),Kt=no(Ct)}R!==void 0&&R[Ee]!==void 0&&(Ie=R[Ee]+` Tw
`),Ee===0?Y.push(Ie+Ae(Vt,Kt,bn)+Qt):Me===se?Y.push(Ie+Qt):Me===fe&&Y.push(Ie+Ae(Vt,Kt,bn)+Qt)}Y=Me===se?Y.join(` Tj
T* `):Y.join(` Tj
`),Y+=` Tj
`;var Re=`BT
/`;return Re+=Te+" "+kt+` Tf
`,Re+=U(kt*Ni)+` TL
`,Re+=Is+`
`,Re+=Yn,Re+=Y,st(Re+="ET"),f[Te]=!0,Rn};var ei=h.__private__.clip=h.clip=function(Y){return st(Y==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return ei("evenodd")},h.__private__.discardPath=h.discardPath=function(){return st("n"),this};var Mi=h.__private__.isValidStyle=function(Y){var lt=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Y)!==-1&&(lt=!0),lt};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(Y){return Mi(Y)&&(a=Y),this};var jo=h.__private__.getStyle=h.getStyle=function(Y){var lt=a;switch(Y){case"D":case"S":lt="S";break;case"F":lt="f";break;case"FD":case"DF":lt="B";break;case"f":case"f*":case"B":case"B*":lt=Y}return lt},Oa=h.close=function(){return st("h"),this};h.stroke=function(){return st("S"),this},h.fill=function(Y){return Vi("f",Y),this},h.fillEvenOdd=function(Y){return Vi("f*",Y),this},h.fillStroke=function(Y){return Vi("B",Y),this},h.fillStrokeEvenOdd=function(Y){return Vi("B*",Y),this};var Vi=function(Y,lt){ln(lt)==="object"?El(lt,Y):st(Y)},Al=function(Y){Y===null||v===b.ADVANCED&&Y===void 0||(Y=jo(Y),st(Y))};function ns(Y,lt,Ct,Ot,Gt){var ae=new Uu(lt||this.boundingBox,Ct||this.xStep,Ot||this.yStep,this.gState,Gt||this.matrix);ae.stream=this.stream;var Se=Y+"$$"+this.cloneIndex+++"$$";return Et(Se,ae),ae}var El=function(Y,lt){var Ct=Or[Y.key],Ot=$e[Ct];if(Ot instanceof Ul)st("q"),st(uu(lt)),Ot.gState&&h.setGState(Ot.gState),st(Y.matrix.toString()+" cm"),st("/"+Ct+" sh"),st("Q");else if(Ot instanceof Uu){var Gt=new Fe(1,0,0,-1,0,so());Y.matrix&&(Gt=Gt.multiply(Y.matrix||Ue),Ct=ns.call(Ot,Y.key,Y.boundingBox,Y.xStep,Y.yStep,Gt).id),st("q"),st("/Pattern cs"),st("/"+Ct+" scn"),Ot.gState&&h.setGState(Ot.gState),st(lt),st("Q")}},uu=function(Y){switch(Y){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Xo=h.moveTo=function(Y,lt){return st(U(F(Y))+" "+U(N(lt))+" m"),this},vs=h.lineTo=function(Y,lt){return st(U(F(Y))+" "+U(N(lt))+" l"),this},Ls=h.curveTo=function(Y,lt,Ct,Ot,Gt,ae){return st([U(F(Y)),U(N(lt)),U(F(Ct)),U(N(Ot)),U(F(Gt)),U(N(ae)),"c"].join(" ")),this};h.__private__.line=h.line=function(Y,lt,Ct,Ot,Gt){if(isNaN(Y)||isNaN(lt)||isNaN(Ct)||isNaN(Ot)||!Mi(Gt))throw new Error("Invalid arguments passed to jsPDF.line");return v===b.COMPAT?this.lines([[Ct-Y,Ot-lt]],Y,lt,[1,1],Gt||"S"):this.lines([[Ct-Y,Ot-lt]],Y,lt,[1,1]).stroke()},h.__private__.lines=h.lines=function(Y,lt,Ct,Ot,Gt,ae){var Se,Ge,pr,Mr,Cr,Vr,pn,bn,Rn,ri,Yn,is;if(typeof Y=="number"&&(is=Ct,Ct=lt,lt=Y,Y=is),Ot=Ot||[1,1],ae=ae||!1,isNaN(lt)||isNaN(Ct)||!Array.isArray(Y)||!Array.isArray(Ot)||!Mi(Gt)||typeof ae!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Xo(lt,Ct),Se=Ot[0],Ge=Ot[1],Mr=Y.length,ri=lt,Yn=Ct,pr=0;pr<Mr;pr++)(Cr=Y[pr]).length===2?(ri=Cr[0]*Se+ri,Yn=Cr[1]*Ge+Yn,vs(ri,Yn)):(Vr=Cr[0]*Se+ri,pn=Cr[1]*Ge+Yn,bn=Cr[2]*Se+ri,Rn=Cr[3]*Ge+Yn,ri=Cr[4]*Se+ri,Yn=Cr[5]*Ge+Yn,Ls(Vr,pn,bn,Rn,ri,Yn));return ae&&Oa(),Al(Gt),this},h.path=function(Y){for(var lt=0;lt<Y.length;lt++){var Ct=Y[lt],Ot=Ct.c;switch(Ct.op){case"m":Xo(Ot[0],Ot[1]);break;case"l":vs(Ot[0],Ot[1]);break;case"c":Ls.apply(this,Ot);break;case"h":Oa()}}return this},h.__private__.rect=h.rect=function(Y,lt,Ct,Ot,Gt){if(isNaN(Y)||isNaN(lt)||isNaN(Ct)||isNaN(Ot)||!Mi(Gt))throw new Error("Invalid arguments passed to jsPDF.rect");return v===b.COMPAT&&(Ot=-Ot),st([U(F(Y)),U(N(lt)),U(F(Ct)),U(F(Ot)),"re"].join(" ")),Al(Gt),this},h.__private__.triangle=h.triangle=function(Y,lt,Ct,Ot,Gt,ae,Se){if(isNaN(Y)||isNaN(lt)||isNaN(Ct)||isNaN(Ot)||isNaN(Gt)||isNaN(ae)||!Mi(Se))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ct-Y,Ot-lt],[Gt-Ct,ae-Ot],[Y-Gt,lt-ae]],Y,lt,[1,1],Se,!0),this},h.__private__.roundedRect=h.roundedRect=function(Y,lt,Ct,Ot,Gt,ae,Se){if(isNaN(Y)||isNaN(lt)||isNaN(Ct)||isNaN(Ot)||isNaN(Gt)||isNaN(ae)||!Mi(Se))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ge=4/3*(Math.SQRT2-1);return Gt=Math.min(Gt,.5*Ct),ae=Math.min(ae,.5*Ot),this.lines([[Ct-2*Gt,0],[Gt*Ge,0,Gt,ae-ae*Ge,Gt,ae],[0,Ot-2*ae],[0,ae*Ge,-Gt*Ge,ae,-Gt,ae],[2*Gt-Ct,0],[-Gt*Ge,0,-Gt,-ae*Ge,-Gt,-ae],[0,2*ae-Ot],[0,-ae*Ge,Gt*Ge,-ae,Gt,-ae]],Y+Gt,lt,[1,1],Se,!0),this},h.__private__.ellipse=h.ellipse=function(Y,lt,Ct,Ot,Gt){if(isNaN(Y)||isNaN(lt)||isNaN(Ct)||isNaN(Ot)||!Mi(Gt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ae=4/3*(Math.SQRT2-1)*Ct,Se=4/3*(Math.SQRT2-1)*Ot;return Xo(Y+Ct,lt),Ls(Y+Ct,lt-Se,Y+ae,lt-Ot,Y,lt-Ot),Ls(Y-ae,lt-Ot,Y-Ct,lt-Se,Y-Ct,lt),Ls(Y-Ct,lt+Se,Y-ae,lt+Ot,Y,lt+Ot),Ls(Y+ae,lt+Ot,Y+Ct,lt+Se,Y+Ct,lt),Al(Gt),this},h.__private__.circle=h.circle=function(Y,lt,Ct,Ot){if(isNaN(Y)||isNaN(lt)||isNaN(Ct)||!Mi(Ot))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Y,lt,Ct,Ct,Ot)},h.setFont=function(Y,lt,Ct){return Ct&&(lt=I(lt,Ct)),Te=Os(Y,lt,{disableWarning:!1}),this};var cu=h.__private__.getFont=h.getFont=function(){return we[Os.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var Y,lt,Ct={};for(Y in ne)if(ne.hasOwnProperty(Y))for(lt in Ct[Y]=[],ne[Y])ne[Y].hasOwnProperty(lt)&&Ct[Y].push(lt);return Ct},h.addFont=function(Y,lt,Ct,Ot,Gt){var ae=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ae.indexOf(arguments[3])!==-1?Gt=arguments[3]:arguments[3]&&ae.indexOf(arguments[3])==-1&&(Ct=I(Ct,Ot)),Gt=Gt||"Identity-H",Tn.call(this,Y,lt,Ct,Gt)};var Yo,ro=n.lineWidth||.200025,Pa=h.__private__.getLineWidth=h.getLineWidth=function(){return ro},hu=h.__private__.setLineWidth=h.setLineWidth=function(Y){return ro=Y,st(U(F(Y))+" w"),this};h.__private__.setLineDash=_r.API.setLineDash=_r.API.setLineDashPattern=function(Y,lt){if(Y=Y||[],lt=lt||0,isNaN(lt)||!Array.isArray(Y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Y=Y.map(function(Ct){return U(F(Ct))}).join(" "),lt=U(F(lt)),st("["+Y+"] "+lt+" d"),this};var Go=h.__private__.getLineHeight=h.getLineHeight=function(){return kt*Yo};h.__private__.getLineHeight=h.getLineHeight=function(){return kt*Yo};var Ko=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(Y){return typeof(Y=Y||1.15)=="number"&&(Yo=Y),this},La=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Yo};Ko(n.lineHeight);var Rs=h.__private__.getHorizontalCoordinate=function(Y){return F(Y)},no=h.__private__.getVerticalCoordinate=function(Y){return v===b.ADVANCED?Y:Ve[V].mediaBox.topRightY-Ve[V].mediaBox.bottomLeftY-F(Y)},xc=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(Y){return U(Rs(Y))},Ds=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(Y){return U(no(Y))},Wi=n.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return Ke(Wi)},h.__private__.setStrokeColor=h.setDrawColor=function(Y,lt,Ct,Ot){return Wi=He({ch1:Y,ch2:lt,ch3:Ct,ch4:Ot,pdfColorType:"draw",precision:2}),st(Wi),this};var Ra=n.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return Ke(Ra)},h.__private__.setFillColor=h.setFillColor=function(Y,lt,Ct,Ot){return Ra=He({ch1:Y,ch2:lt,ch3:Ct,ch4:Ot,pdfColorType:"fill",precision:2}),st(Ra),this};var Is=n.textColor||"0 g",Da=h.__private__.getTextColor=h.getTextColor=function(){return Ke(Is)};h.__private__.setTextColor=h.setTextColor=function(Y,lt,Ct,Ot){return Is=He({ch1:Y,ch2:lt,ch3:Ct,ch4:Ot,pdfColorType:"text",precision:3}),this};var io=n.charSpace,fu=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(io||0)};h.__private__.setCharSpace=h.setCharSpace=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return io=Y,this};var jl=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(Y){var lt=h.CapJoinStyles[Y];if(lt===void 0)throw new Error("Line cap style of '"+Y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return jl=lt,st(lt+" J"),this};var Fs=0;h.__private__.setLineJoin=h.setLineJoin=function(Y){var lt=h.CapJoinStyles[Y];if(lt===void 0)throw new Error("Line join style of '"+Y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fs=lt,st(lt+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(Y){if(Y=Y||0,isNaN(Y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return st(U(F(Y))+" M"),this},h.GState=Qd,h.setGState=function(Y){(Y=typeof Y=="string"?te[Sr[Y]]:Ia(null,Y)).equals(br)||(st("/"+Y.id+" gs"),br=Y)};var Ia=function(Y,lt){if(!Y||!Sr[Y]){var Ct=!1;for(var Ot in te)if(te.hasOwnProperty(Ot)&&te[Ot].equals(lt)){Ct=!0;break}if(Ct)lt=te[Ot];else{var Gt="GS"+(Object.keys(te).length+1).toString(10);te[Gt]=lt,lt.id=Gt}return Y&&(Sr[Y]=lt.id),er.publish("addGState",lt),lt}};h.addGState=function(Y,lt){return Ia(Y,lt),this},h.saveGraphicsState=function(){return st("q"),Be.push({key:Te,size:kt,color:Is}),this},h.restoreGraphicsState=function(){st("Q");var Y=Be.pop();return Te=Y.key,kt=Y.size,Is=Y.color,br=null,this},h.setCurrentTransformationMatrix=function(Y){return st(Y.toString()+" cm"),this},h.comment=function(Y){return st("#"+Y),this};var Mo=function(Y,lt){var Ct=Y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ct},set:function(ae){isNaN(ae)||(Ct=parseFloat(ae))}});var Ot=lt||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ot},set:function(ae){isNaN(ae)||(Ot=parseFloat(ae))}});var Gt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Gt},set:function(ae){Gt=ae.toString()}}),this},Zo=function(Y,lt,Ct,Ot){Mo.call(this,Y,lt),this.type="rect";var Gt=Ct||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Gt},set:function(Se){isNaN(Se)||(Gt=parseFloat(Se))}});var ae=Ot||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ae},set:function(Se){isNaN(Se)||(ae=parseFloat(Se))}}),this},Jo=function(){this.page=Ye,this.currentPage=V,this.pages=nt.slice(0),this.pagesContext=Ve.slice(0),this.x=ze,this.y=me,this.matrix=ke,this.width=No(V),this.height=so(V),this.outputDestination=ot,this.id="",this.objectNumber=-1};Jo.prototype.restore=function(){Ye=this.page,V=this.currentPage,Ve=this.pagesContext,nt=this.pages,ze=this.x,me=this.y,ke=this.matrix,Oo(V,this.width),Fa(V,this.height),ot=this.outputDestination};var zn=function(Y,lt,Ct,Ot,Gt){rr.push(new Jo),Ye=V=0,nt=[],ze=Y,me=lt,ke=Gt,ui([Ct,Ot])},Qo=function(Y){if(jr[Y])rr.pop().restore();else{var lt=new Jo,Ct="Xo"+(Object.keys(mr).length+1).toString(10);lt.id=Ct,jr[Y]=Ct,mr[Ct]=lt,er.publish("addFormObject",lt),rr.pop().restore()}};for(var Bs in h.beginFormObject=function(Y,lt,Ct,Ot,Gt){return zn(Y,lt,Ct,Ot,Gt),this},h.endFormObject=function(Y){return Qo(Y),this},h.doFormObject=function(Y,lt){var Ct=mr[jr[Y]];return st("q"),st(lt.toString()+" cm"),st("/"+Ct.id+" Do"),st("Q"),this},h.getFormObject=function(Y){var lt=mr[jr[Y]];return{x:lt.x,y:lt.y,width:lt.width,height:lt.height,matrix:lt.matrix}},h.save=function(Y,lt){return Y=Y||"generated.pdf",(lt=lt||{}).returnPromise=lt.returnPromise||!1,lt.returnPromise===!1?(Bl(vi(hi()),Y),typeof Bl.unload=="function"&&Tr.setTimeout&&setTimeout(Bl.unload,911),this):new Promise(function(Ct,Ot){try{var Gt=Bl(vi(hi()),Y);typeof Bl.unload=="function"&&Tr.setTimeout&&setTimeout(Bl.unload,911),Ct(Gt)}catch(ae){Ot(ae.message)}})},_r.API)_r.API.hasOwnProperty(Bs)&&(Bs==="events"&&_r.API.events.length?function(Y,lt){var Ct,Ot,Gt;for(Gt=lt.length-1;Gt!==-1;Gt--)Ct=lt[Gt][0],Ot=lt[Gt][1],Y.subscribe.apply(Y,[Ct].concat(typeof Ot=="function"?[Ot]:Ot))}(er,_r.API.events):h[Bs]=_r.API[Bs]);var No=h.getPageWidth=function(Y){return(Ve[Y=Y||V].mediaBox.topRightX-Ve[Y].mediaBox.bottomLeftX)/ie},Oo=h.setPageWidth=function(Y,lt){Ve[Y].mediaBox.topRightX=lt*ie+Ve[Y].mediaBox.bottomLeftX},so=h.getPageHeight=function(Y){return(Ve[Y=Y||V].mediaBox.topRightY-Ve[Y].mediaBox.bottomLeftY)/ie},Fa=h.setPageHeight=function(Y,lt){Ve[Y].mediaBox.topRightY=lt*ie+Ve[Y].mediaBox.bottomLeftY};return h.internal={pdfEscape:fn,getStyle:jo,getFont:cu,getFontSize:Tt,getCharSpace:fu,getTextColor:Da,getLineHeight:Go,getLineHeightFactor:La,getLineWidth:Pa,write:at,getHorizontalCoordinate:Rs,getVerticalCoordinate:no,getCoordinateString:xc,getVerticalCoordinateString:Ds,collections:{},newObject:qt,newAdditionalObject:sr,newObjectDeferred:ee,newObjectDeferredBegin:Ce,getFilters:hr,putStream:lr,events:er,scaleFactor:ie,pageSize:{getWidth:function(){return No(V)},setWidth:function(Y){Oo(V,Y)},getHeight:function(){return so(V)},setHeight:function(Y){Fa(V,Y)}},encryptionOptions:c,encryption:xn,getEncryptor:wi,output:En,getNumberOfPages:Ei,pages:nt,out:st,f2:q,f3:$,getPageInfo:Ps,getPageInfoByObjId:vr,getCurrentPageInfo:dn,getPDFVersion:g,Point:Mo,Rectangle:Zo,Matrix:Fe,hasHotfix:ji},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return No(V)},set:function(Y){Oo(V,Y)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return so(V)},set:function(Y){Fa(V,Y)},enumerable:!0,configurable:!0}),li.call(h,yt),Te="F1",Dr(s,t),er.publish("initialized"),h}ku.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},ku.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ku.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},ku.prototype.processOwnerPassword=function(n,e){return ig(ng(e).substr(0,5),n)},ku.prototype.encryptor=function(n,e){var t=ng(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return ig(t,r)}},Qd.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||ln(n)!==ln(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},_r.API={events:[]},_r.version="2.5.2";var Fn=_r.API,A1=1,lu=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xu=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Pr=function(n){return n.toFixed(2)},el=function(n){return n.toFixed(5)};Fn.__acroform__={};var bs=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},cb=function(n){return n*A1},Ro=function(n){var e=new i3,t=ar.internal.getHeight(n)||0,r=ar.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Pr(r)),Number(Pr(t))],e},TS=Fn.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},AS=Fn.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},ES=Fn.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},$n=Fn.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ES(n,e-1)},Vn=Fn.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return TS(n,e-1)},Wn=Fn.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return AS(n,e-1)},jS=Fn.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=n[0],i=n[1],o=n[2],u=n[3],l={};return l.lowerLeft_X=t(s)||0,l.lowerLeft_Y=r(i+u)||0,l.upperRight_X=t(s+o)||0,l.upperRight_Y=r(i)||0,[Number(Pr(l.lowerLeft_X)),Number(Pr(l.lowerLeft_Y)),Number(Pr(l.upperRight_X)),Number(Pr(l.upperRight_Y))]},MS=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=sg(n,t),s=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+s+" "+Pr(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=Ro(n);return i.scope=n.scope,i.stream=e.join(`
`),i}},sg=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=n.multiline?s.map(function($){return $.split(`
`)}):s.map(function($){return[$]});var i=t,o=ar.internal.getHeight(n)||0;o=o<0?-o:o;var u=ar.internal.getWidth(n)||0;u=u<0?-u:u;var l=function($,F,T){if($+1<s.length){var N=F+" "+s[$+1][0];return $f(N,n,T).width<=u-4}return!1};i++;t:for(;i>0;){e="",i--;var a,c,d=$f("3",n,i).height,f=n.multiline?o-i:(o-d)/2,h=f+=2,p=0,g=0,m=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+$f(e,n,i=12).width+", FieldWidth:"+u+`
`;break}for(var y="",b=0,v=0;v<s.length;v++)if(s.hasOwnProperty(v)){var k=!1;if(s[v].length!==1&&m!==s[v].length-1){if((d+2)*(b+2)+2>o)continue t;y+=s[v][m],k=!0,g=v,v--}else{y=(y+=s[v][m]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var j=parseInt(v),I=l(j,y,i),U=v>=s.length-1;if(I&&!U){y+=" ",m=0;continue}if(I||U){if(U)g=j;else if(n.multiline&&(d+2)*(b+2)+2>o)continue t}else{if(!n.multiline||(d+2)*(b+2)+2>o)continue t;g=j}}for(var P="",z=p;z<=g;z++){var q=s[z];if(n.multiline){if(z===g){P+=q[m]+" ",m=(m+1)%q.length;continue}if(z===p){P+=q[q.length-1]+" ";continue}}P+=q[0]+" "}switch(P=P.substr(P.length-1)==" "?P.substr(0,P.length-1):P,c=$f(P,n,i).width,n.textAlign){case"right":a=u-c-2;break;case"center":a=(u-c)/2;break;case"left":default:a=2}e+=Pr(a)+" "+Pr(h)+` Td
`,e+="("+lu(P)+`) Tj
`,e+=-Pr(a)+` 0 Td
`,h=-(i+2),c=0,p=k?g:g+1,b++,y=""}break}return r.text=e,r.fontSize=i,r},$f=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:s}},NS={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},OS=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},PS=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,s=n[t];e.internal.newObjectDeferredBegin(s.objId,!0),ln(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete n[r]}},LS=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Ao.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(NS)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");A1=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new s3,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var i=r[s];i.objId=void 0,i.hasAnnotation&&OS(i,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,s){var i=!r;for(var o in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var u=r[o],l=[],a=u.Rect;if(u.Rect&&(u.Rect=jS(u.Rect,s)),s.internal.newObjectDeferredBegin(u.objId,!0),u.DA=ar.createDefaultAppearanceStream(u),ln(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(l=u.getKeyValueListForStream()),u.Rect=a,u.hasAppearanceStream&&!u.appearanceStreamContent){var c=MS(u);l.push({key:"AP",value:"<</N "+c+">>"}),s.internal.acroformPlugin.xForms.push(c)}if(u.appearanceStreamContent){var d="";for(var f in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(f)){var h=u.appearanceStreamContent[f];if(d+="/"+f+" ",d+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var p=h[o];typeof p=="function"&&(p=p.call(s,u)),d+="/"+o+" "+p+" ",s.internal.acroformPlugin.xForms.indexOf(p)>=0||s.internal.acroformPlugin.xForms.push(p)}}else typeof(p=h)=="function"&&(p=p.call(s,u)),d+="/"+o+" "+p,s.internal.acroformPlugin.xForms.indexOf(p)>=0||s.internal.acroformPlugin.xForms.push(p);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:u.objId}),s.internal.out("endobj")}i&&PS(s.internal.acroformPlugin.xForms,s)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},n3=Fn.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var s="[",i=0;i<n.length;i++)switch(i!==0&&(s+=" "),ln(n[i])){case"boolean":case"number":case"object":s+=n[i].toString();break;case"string":n[i].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),s+="("+lu(r(n[i].toString()))+")"):s+=n[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},U0=function(n,e,t){var r=function(s){return s};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+lu(r(n))+")"},zo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};zo.prototype.toString=function(){return this.objId+" 0 R"},zo.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},zo.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],s=this[r];s&&(Array.isArray(s)?n.push({key:r,value:n3(s,this.objId,this.scope)}):s instanceof zo?(s.scope=this.scope,n.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&n.push({key:r,value:s}))}return n};var i3=function(){zo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};bs(i3,zo);var s3=function(){zo.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+lu(t(n))+")"}},set:function(t){n=t}})};bs(s3,zo);var Ao=function n(){zo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');e=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!$n(e,3)},set:function(y){y?this.F=Vn(e,3):this.F=Wn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');t=y}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(y){r=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(y){r[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(y){r[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(y){r[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(y){r[3]=y}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof tp)return;i="FieldObject"+n.FieldNum++}var y=function(b){return b};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+lu(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var a=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return a===void 0?50/A1:a},set:function(y){a=y}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof tp||this instanceof Zl))return U0(d,this.objId,this.scope)},set:function(y){y=y.toString(),d=y}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof gi?f:U0(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=this instanceof gi?y:y.substr(0,1)==="("?xu(y.substr(1,y.length-2)):xu(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof gi?xu(f.substr(1,f.length-1)):f},set:function(y){y=y.toString(),f=this instanceof gi?"/"+y:y}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof gi?h:U0(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof gi?y:y.substr(0,1)==="("?xu(y.substr(1,y.length-2)):xu(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof gi?xu(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof gi?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(y){y=!!y,g=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(y){p=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,1)},set:function(y){y?this.Ff=Vn(this.Ff,1):this.Ff=Wn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,2)},set:function(y){y?this.Ff=Vn(this.Ff,2):this.Ff=Wn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,3)},set:function(y){y?this.Ff=Vn(this.Ff,3):this.Ff=Wn(this.Ff,3)}});var m=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(m!==null)return m},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');m=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(m){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:m=2;break;case"center":case 1:m=1;break;case"left":case 0:default:m=0}}})};bs(Ao,zo);var Ju=function(){Ao.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return n3(e,this.objId,this.scope)},set:function(t){var r,s;s=[],typeof(r=t)=="string"&&(s=function(i,o,u){u||(u=1);for(var l,a=[];l=o.exec(i);)a.push(l[u]);return a}(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,18)},set:function(t){t?this.Ff=Vn(this.Ff,18):this.Ff=Wn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Vn(this.Ff,19):this.Ff=Wn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,20)},set:function(t){t?(this.Ff=Vn(this.Ff,20),e.sort()):this.Ff=Wn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,22)},set:function(t){t?this.Ff=Vn(this.Ff,22):this.Ff=Wn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,23)},set:function(t){t?this.Ff=Vn(this.Ff,23):this.Ff=Wn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,27)},set:function(t){t?this.Ff=Vn(this.Ff,27):this.Ff=Wn(this.Ff,27)}}),this.hasAppearanceStream=!1};bs(Ju,Ao);var Qu=function(){Ju.call(this),this.fontName="helvetica",this.combo=!1};bs(Qu,Ju);var tc=function(){Qu.call(this),this.combo=!0};bs(tc,Qu);var hd=function(){tc.call(this),this.edit=!0};bs(hd,tc);var gi=function(){Ao.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,15)},set:function(t){t?this.Ff=Vn(this.Ff,15):this.Ff=Wn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,16)},set:function(t){t?this.Ff=Vn(this.Ff,16):this.Ff=Wn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,17)},set:function(t){t?this.Ff=Vn(this.Ff,17):this.Ff=Wn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,26)},set:function(t){t?this.Ff=Vn(this.Ff,26):this.Ff=Wn(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(i){return i};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+lu(t(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(t){ln(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};bs(gi,Ao);var fd=function(){gi.call(this),this.pushButton=!0};bs(fd,gi);var ec=function(){gi.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};bs(ec,gi);var tp=function(){var n,e;Ao.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(u){return u};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),r)o.push("/"+i+" ("+lu(s(r[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){ln(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(s){t="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ar.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};bs(tp,Ao),ec.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},ec.prototype.createOption=function(n){var e=new tp;return e.Parent=this,e.optionName=n,this.Kids.push(e),RS.call(this.scope,e),e};var dd=function(){gi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ar.CheckBox.createAppearanceStream()};bs(dd,gi);var Zl=function(){Ao.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,13)},set:function(e){e?this.Ff=Vn(this.Ff,13):this.Ff=Wn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,21)},set:function(e){e?this.Ff=Vn(this.Ff,21):this.Ff=Wn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,23)},set:function(e){e?this.Ff=Vn(this.Ff,23):this.Ff=Wn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,24)},set:function(e){e?this.Ff=Vn(this.Ff,24):this.Ff=Wn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,25)},set:function(e){e?this.Ff=Vn(this.Ff,25):this.Ff=Wn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,26)},set:function(e){e?this.Ff=Vn(this.Ff,26):this.Ff=Wn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};bs(Zl,Ao);var pd=function(){Zl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,14)},set:function(n){n?this.Ff=Vn(this.Ff,14):this.Ff=Wn(this.Ff,14)}}),this.password=!0};bs(pd,Zl);var ar={CheckBox:{createAppearanceStream:function(){return{N:{On:ar.CheckBox.YesNormal},D:{On:ar.CheckBox.YesPushDown,Off:ar.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Ro(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),i=sg(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Pr(ar.internal.getWidth(n))+" "+Pr(ar.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Pr(i.fontSize)+" Tf "+s),t.push("BT"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Ro(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),s=[],i=ar.internal.getHeight(n),o=ar.internal.getWidth(n),u=sg(n,n.caption);return s.push("1 g"),s.push("0 0 "+Pr(o)+" "+Pr(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Pr(o-1)+" "+Pr(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+t+" "+Pr(u.fontSize)+" Tf "+r),s.push(u.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=Ro(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Pr(ar.internal.getWidth(n))+" "+Pr(ar.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:ar.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=ar.RadioButton.Circle.YesNormal,e.D[n]=ar.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Ro(n);e.scope=n.scope;var t=[],r=ar.internal.getWidth(n)<=ar.internal.getHeight(n)?ar.internal.getWidth(n)/4:ar.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var s=ar.internal.Bezier_C,i=Number((r*s).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+el(ar.internal.getWidth(n)/2)+" "+el(ar.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),t.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),t.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),t.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ro(n);e.scope=n.scope;var t=[],r=ar.internal.getWidth(n)<=ar.internal.getHeight(n)?ar.internal.getWidth(n)/4:ar.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*ar.internal.Bezier_C).toFixed(5)),o=Number((r*ar.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+el(ar.internal.getWidth(n)/2)+" "+el(ar.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),t.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),t.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),t.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+el(ar.internal.getWidth(n)/2)+" "+el(ar.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Ro(n);e.scope=n.scope;var t=[],r=ar.internal.getWidth(n)<=ar.internal.getHeight(n)?ar.internal.getWidth(n)/4:ar.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*ar.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+el(ar.internal.getWidth(n)/2)+" "+el(ar.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),t.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),t.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),t.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:ar.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=ar.RadioButton.Cross.YesNormal,e.D[n]=ar.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Ro(n);e.scope=n.scope;var t=[],r=ar.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Pr(ar.internal.getWidth(n)-2)+" "+Pr(ar.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Pr(r.x1.x)+" "+Pr(r.x1.y)+" m"),t.push(Pr(r.x2.x)+" "+Pr(r.x2.y)+" l"),t.push(Pr(r.x4.x)+" "+Pr(r.x4.y)+" m"),t.push(Pr(r.x3.x)+" "+Pr(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ro(n);e.scope=n.scope;var t=ar.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Pr(ar.internal.getWidth(n))+" "+Pr(ar.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Pr(ar.internal.getWidth(n)-2)+" "+Pr(ar.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Pr(t.x1.x)+" "+Pr(t.x1.y)+" m"),r.push(Pr(t.x2.x)+" "+Pr(t.x2.y)+" l"),r.push(Pr(t.x4.x)+" "+Pr(t.x4.y)+" m"),r.push(Pr(t.x3.x)+" "+Pr(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Ro(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Pr(ar.internal.getWidth(n))+" "+Pr(ar.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};ar.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=ar.internal.getWidth(n),t=ar.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},ar.internal.getWidth=function(n){var e=0;return ln(n)==="object"&&(e=cb(n.Rect[2])),e},ar.internal.getHeight=function(n){var e=0;return ln(n)==="object"&&(e=cb(n.Rect[3])),e};var RS=Fn.addField=function(n){if(LS(this,n),!(n instanceof Ao))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Fn.AcroFormChoiceField=Ju,Fn.AcroFormListBox=Qu,Fn.AcroFormComboBox=tc,Fn.AcroFormEditBox=hd,Fn.AcroFormButton=gi,Fn.AcroFormPushButton=fd,Fn.AcroFormRadioButton=ec,Fn.AcroFormCheckBox=dd,Fn.AcroFormTextField=Zl,Fn.AcroFormPasswordField=pd,Fn.AcroFormAppearance=ar,Fn.AcroForm={ChoiceField:Ju,ListBox:Qu,ComboBox:tc,EditBox:hd,Button:gi,PushButton:fd,RadioButton:ec,CheckBox:dd,TextField:Zl,PasswordField:pd,Appearance:ar},_r.AcroForm={ChoiceField:Ju,ListBox:Qu,ComboBox:tc,EditBox:hd,Button:gi,PushButton:fd,RadioButton:ec,CheckBox:dd,TextField:Zl,PasswordField:pd,Appearance:ar};_r.AcroForm;function o3(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function($,F){var T,N,C,w,_,x=e;if((F=F||e)==="RGBA"||$.data!==void 0&&$.data instanceof Uint8ClampedArray&&"height"in $&&"width"in $)return"RGBA";if(I($))for(_ in t)for(C=t[_],T=0;T<C.length;T+=1){for(w=!0,N=0;N<C[T].length;N+=1)if(C[T][N]!==void 0&&C[T][N]!==$[N]){w=!1;break}if(w===!0){x=_;break}}else for(_ in t)for(C=t[_],T=0;T<C.length;T+=1){for(w=!0,N=0;N<C[T].length;N+=1)if(C[T][N]!==void 0&&C[T][N]!==$.charCodeAt(N)){w=!1;break}if(w===!0){x=_;break}}return x===e&&F!==e&&(x=F),x},s=function $(F){for(var T=this.internal.write,N=this.internal.putStream,C=(0,this.internal.getFilters)();C.indexOf("FlateEncode")!==-1;)C.splice(C.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var w=[];if(w.push({key:"Type",value:"/XObject"}),w.push({key:"Subtype",value:"/Image"}),w.push({key:"Width",value:F.width}),w.push({key:"Height",value:F.height}),F.colorSpace===m.INDEXED?w.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(w.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===m.DEVICE_CMYK&&w.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),w.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&w.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)){for(var _="",x=0,S=F.transparency.length;x<S;x++)_+=F.transparency[x]+" "+F.transparency[x]+" ";w.push({key:"Mask",value:"["+_+"]"})}F.sMask!==void 0&&w.push({key:"SMask",value:F.objectId+1+" 0 R"});var A=F.filter!==void 0?["/"+F.filter]:void 0;if(N({data:F.data,additionalKeyValues:w,alreadyAppliedFilters:A,objectId:F.objectId}),T("endobj"),"sMask"in F&&F.sMask!==void 0){var B="/Predictor "+F.predictor+" /Colors 1 /BitsPerComponent "+F.bitsPerComponent+" /Columns "+F.width,E={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:F.bitsPerComponent,decodeParameters:B,data:F.sMask};"filter"in F&&(E.filter=F.filter),$.call(this,E)}if(F.colorSpace===m.INDEXED){var V=this.internal.newObject();N({data:P(new Uint8Array(F.palette)),objectId:V}),T("endobj")}},i=function(){var $=this.internal.collections.addImage_images;for(var F in $)s.call(this,$[F])},o=function(){var $,F=this.internal.collections.addImage_images,T=this.internal.write;for(var N in F)T("/I"+($=F[N]).index,$.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var $=this.internal.collections.addImage_images;return u.call(this),$},a=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function($){return typeof n["process"+$.toUpperCase()]=="function"},d=function($){return ln($)==="object"&&$.nodeType===1},f=function($,F){if($.nodeName==="IMG"&&$.hasAttribute("src")){var T=""+$.getAttribute("src");if(T.indexOf("data:image/")===0)return ih(unescape(T).split("base64,").pop());var N=n.loadFile(T,!0);if(N!==void 0)return N}if($.nodeName==="CANVAS"){if($.width===0||$.height===0)throw new Error("Given canvas must have data. Canvas width: "+$.width+", height: "+$.height);var C;switch(F){case"PNG":C="image/png";break;case"WEBP":C="image/webp";break;case"JPEG":case"JPG":default:C="image/jpeg"}return ih($.toDataURL(C,1).split("base64,").pop())}},h=function($){var F=this.internal.collections.addImage_images;if(F){for(var T in F)if($===F[T].alias)return F[T]}},p=function($,F,T){return $||F||($=-96,F=-96),$<0&&($=-1*T.width*72/$/this.internal.scaleFactor),F<0&&(F=-1*T.height*72/F/this.internal.scaleFactor),$===0&&($=F*T.width/T.height),F===0&&(F=$*T.height/T.width),[$,F]},g=function($,F,T,N,C,w){var _=p.call(this,T,N,C),x=this.internal.getCoordinateString,S=this.internal.getVerticalCoordinateString,A=l.call(this);if(T=_[0],N=_[1],A[C.index]=C,w){w*=Math.PI/180;var B=Math.cos(w),E=Math.sin(w),V=function(Q){return Q.toFixed(4)},X=[V(B),V(E),V(-1*E),V(B),0,0,"cm"]}this.internal.write("q"),w?(this.internal.write([1,"0","0",1,x($),S(F+N),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([x(T),"0","0",x(N),"0","0","cm"].join(" "))):this.internal.write([x(T),"0","0",x(N),x($),S(F+N),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+C.index+" Do"),this.internal.write("Q")},m=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=n.__addimage__.sHashCode=function($){var F,T,N=0;if(typeof $=="string")for(T=$.length,F=0;F<T;F++)N=(N<<5)-N+$.charCodeAt(F),N|=0;else if(I($))for(T=$.byteLength/2,F=0;F<T;F++)N=(N<<5)-N+$[F],N|=0;return N},v=n.__addimage__.validateStringAsBase64=function($){($=$||"").toString().trim();var F=!0;return $.length===0&&(F=!1),$.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test($.substr(0,$.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test($.substr(-2))===!1&&(F=!1),F},k=n.__addimage__.extractImageFromDataUrl=function($){var F=($=$||"").split("base64,"),T=null;if(F.length===2){var N=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(F[0]);Array.isArray(N)&&(T={mimeType:N[1],charset:N[2],data:F[1]})}return T},j=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function($){return j()&&$ instanceof ArrayBuffer};var I=n.__addimage__.isArrayBufferView=function($){return j()&&typeof Uint32Array<"u"&&($ instanceof Int8Array||$ instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&$ instanceof Uint8ClampedArray||$ instanceof Int16Array||$ instanceof Uint16Array||$ instanceof Int32Array||$ instanceof Uint32Array||$ instanceof Float32Array||$ instanceof Float64Array)},U=n.__addimage__.binaryStringToUint8Array=function($){for(var F=$.length,T=new Uint8Array(F),N=0;N<F;N++)T[N]=$.charCodeAt(N);return T},P=n.__addimage__.arrayBufferToBinaryString=function($){for(var F="",T=I($)?$:new Uint8Array($),N=0;N<T.length;N+=8192)F+=String.fromCharCode.apply(null,T.subarray(N,N+8192));return F};n.addImage=function(){var $,F,T,N,C,w,_,x,S;if(typeof arguments[1]=="number"?(F=e,T=arguments[1],N=arguments[2],C=arguments[3],w=arguments[4],_=arguments[5],x=arguments[6],S=arguments[7]):(F=arguments[1],T=arguments[2],N=arguments[3],C=arguments[4],w=arguments[5],_=arguments[6],x=arguments[7],S=arguments[8]),ln($=arguments[0])==="object"&&!d($)&&"imageData"in $){var A=$;$=A.imageData,F=A.format||F||e,T=A.x||T||0,N=A.y||N||0,C=A.w||A.width||C,w=A.h||A.height||w,_=A.alias||_,x=A.compression||x,S=A.rotation||A.angle||S}var B=this.internal.getFilters();if(x===void 0&&B.indexOf("FlateEncode")!==-1&&(x="SLOW"),isNaN(T)||isNaN(N))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var E=z.call(this,$,F,_,x);return g.call(this,T,N,C,w,E,S),this};var z=function($,F,T,N){var C,w,_;if(typeof $=="string"&&r($)===e){$=unescape($);var x=q($,!1);(x!==""||(x=n.loadFile($,!0))!==void 0)&&($=x)}if(d($)&&($=f($,F)),F=r($,F),!c(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((_=T)==null||_.length===0)&&(T=function(S){return typeof S=="string"||I(S)?b(S):I(S.data)?b(S.data):null}($)),(C=h.call(this,T))||(j()&&($ instanceof Uint8Array||F==="RGBA"||(w=$,$=U($))),C=this["process"+F.toUpperCase()]($,a.call(this),T,function(S){return S&&typeof S=="string"&&(S=S.toUpperCase()),S in n.image_compression?S:y.NONE}(N),w)),!C)throw new Error("An unknown error occurred whilst processing the image.");return C},q=n.__addimage__.convertBase64ToBinaryString=function($,F){var T;F=typeof F!="boolean"||F;var N,C="";if(typeof $=="string"){N=(T=k($))!==null?T.data:$;try{C=ih(N)}catch(w){if(F)throw v(N)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+w.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return C};n.getImageProperties=function($){var F,T,N="";if(d($)&&($=f($)),typeof $=="string"&&r($)===e&&((N=q($,!1))===""&&(N=n.loadFile($)||""),$=N),T=r($),!c(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(!j()||$ instanceof Uint8Array||($=U($)),!(F=this["process"+T.toUpperCase()]($)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=T,F}})(_r.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};_r.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,s,i,o=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),a=t.pageContext.annotations,c=!1,d=0;d<a.length&&!c;d++)switch((r=a[d]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var f=0;f<a.length;f++){r=a[f];var h=this.internal.pdfEscape,p=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),m=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(g.objId),b=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(r.bounds.x)+" "+u(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y)+"] ")+"/Contents ("+h(y(r.contents))+")",i+=" /Popup "+m.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+h(y(b))+") >>",g.content=i;var v=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(r.bounds.x+30)+" "+u(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+u(r.bounds.y)+"] ")+" /Parent "+v,r.open&&(i+=" /Open true"),i+=" >>",m.content=i,this.internal.write(g.objId,"0 R",m.objId,"0 R");break;case"freetext":s="/Rect ["+o(r.bounds.x)+" "+u(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y+r.bounds.h)+"] ";var k=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+h(p(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var j=this.annotations._nameMap[r.options.name];r.options.pageNumber=j.page,r.options.top=j.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+h(p(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var I=u(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+I+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,s,i,o){var u=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:l(t),y:a(r),w:l(t+s),h:a(r+i)},options:o,type:"link"})},n.textWithLink=function(t,r,s,i){var o,u,l=this.getTextWidth(t),a=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){u=i.maxWidth;var c=this.splitTextToSize(t,u).length;o=Math.ceil(a*c)}else u=l,o=a;return this.text(t,r,s,i),s+=.2*a,i.align==="center"&&(r-=l/2),i.align==="right"&&(r-=l),this.link(r,s-a,u,o,i),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(_r.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];n.__arabicParser__={};var i=n.__arabicParser__.isInArabicSubstitutionA=function(g){return e[g.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},u=n.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&i(g)&&e[g.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&s.indexOf(g.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&i(g)&&e[g.charCodeAt(0)].length>=1};var a=n.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&i(g)&&e[g.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&i(g)&&e[g.charCodeAt(0)].length>=3};var c=n.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&i(g)&&e[g.charCodeAt(0)].length==4},d=n.__arabicParser__.resolveLigatures=function(g){var m=0,y=t,b="",v=0;for(m=0;m<g.length;m+=1)y[g.charCodeAt(m)]!==void 0?(v++,typeof(y=y[g.charCodeAt(m)])=="number"&&(b+=String.fromCharCode(y),y=t,v=0),m===g.length-1&&(y=t,b+=g.charAt(m-(v-1)),m-=v-1,v=0)):(y=t,b+=g.charAt(m-v),m-=v,v=0);return b};n.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&r[g.charCodeAt(0)]!==void 0};var f=n.__arabicParser__.getCorrectForm=function(g,m,y){return o(g)?i(g)===!1?-1:!a(g)||!o(m)&&!o(y)||!o(y)&&u(m)||u(g)&&!o(m)||u(g)&&l(m)||u(g)&&u(m)?0:c(g)&&o(m)&&!u(m)&&o(y)&&a(y)?3:u(g)||!o(y)?1:2:-1},h=function(g){var m=0,y=0,b=0,v="",k="",j="",I=(g=g||"").split("\\s+"),U=[];for(m=0;m<I.length;m+=1){for(U.push(""),y=0;y<I[m].length;y+=1)v=I[m][y],k=I[m][y-1],j=I[m][y+1],o(v)?(b=f(v,k,j),U[m]+=b!==-1?String.fromCharCode(e[v.charCodeAt(0)][b]):v):U[m]+=v;U[m]=d(U[m])}return U.join(" ")},p=n.__arabicParser__.processArabic=n.processArabic=function(){var g,m=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(m)){var b=0;for(y=[],b=0;b<m.length;b+=1)Array.isArray(m[b])?y.push([h(m[b][0]),m[b][1],m[b][2]]):y.push([h(m[b])]);g=y}else g=h(m);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};n.events.push(["preProcessText",p])}(_r.API),_r.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(u){t=u}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(u){s=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(u){i=u}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(u){o=u}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var s;if((t=t||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(_r.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(g){l=g}});var a=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return a},set:function(g){a=g}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var p=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return p},set:function(g){p=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,a){r.call(this);var c=(a=a||{}).fontSize||this.getFontSize(),d=a.font||this.getFont(),f=a.scaleFactor||this.internal.scaleFactor,h=0,p=0,g=0,m=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=a.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(v,k){return v.concat(m.splitTextToSize(k,y))},[])):l=Array.isArray(l)?l:[l];for(var b=0;b<l.length;b++)h<(g=this.getStringUnitWidth(l[b],{font:d})*c)&&(h=g);return h!==0&&(p=l.length),{w:h/=f,h:Math.max((p*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/f,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var a=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,f=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return a.lineNumber!==void 0&&(a.lineNumber===l.lineNumber?(l.x=(a.x||0)+(a.width||0),l.y=a.y||0):a.y+a.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,h&&f&&(this.printHeaderRow(l.lineNumber,!0),l.y+=f[0].height)):l.y=a.y+a.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-c,l.y+c,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+c,{align:"center",baseline:"top",maxWidth:l.width-c-c}):this.text(l.text,l.x+c,l.y+c,{align:"left",baseline:"top",maxWidth:l.width-c-c})),this.internal.__cell__.lastCell=l,this};n.table=function(l,a,c,d,f){if(r.call(this),!c)throw new Error("No data for PDF table.");var h,p,g,m,y=[],b=[],v=[],k={},j={},I=[],U=[],P=(f=f||{}).autoSize||!1,z=f.printHeaders!==!1,q=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,$=f.margins||Object.assign({width:this.getPageWidth()},e),F=typeof f.padding=="number"?f.padding:3,T=f.headerBackgroundColor||"#c8c8c8",N=f.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=z,this.internal.__cell__.margins=$,this.internal.__cell__.table_font_size=q,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=T,this.internal.__cell__.headerTextColor=N,this.setFontSize(q),d==null)b=y=Object.keys(c[0]),v=y.map(function(){return"left"});else if(Array.isArray(d)&&ln(d[0])==="object")for(y=d.map(function(A){return A.name}),b=d.map(function(A){return A.prompt||A.name||""}),v=d.map(function(A){return A.align||"left"}),h=0;h<d.length;h+=1)j[d[h].name]=d[h].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(b=y=d,v=y.map(function(){return"left"}));if(P||Array.isArray(d)&&typeof d[0]=="string")for(h=0;h<y.length;h+=1){for(k[m=y[h]]=c.map(function(A){return A[m]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(b[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=k[m],this.setFont(void 0,"normal"),g=0;g<p.length;g+=1)I.push(this.getTextDimensions(p[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[m]=Math.max.apply(null,I)+F+F,I=[]}if(z){var C={};for(h=0;h<y.length;h+=1)C[y[h]]={},C[y[h]].text=b[h],C[y[h]].align=v[h];var w=u.call(this,C,j);U=y.map(function(A){return new i(l,a,j[A],w,C[A].text,void 0,C[A].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var _=d.reduce(function(A,B){return A[B.name]=B.align,A},{});for(h=0;h<c.length;h+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:h,data:c[h]},this);var x=u.call(this,c[h],j);for(g=0;g<y.length;g+=1){var S=c[h][y[g]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:h,col:g,data:S},this),o.call(this,new i(l,a,j[y[g]],x,S,h+2,_[y[g]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=a,this};var u=function(l,a){var c=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(l).map(function(h){var p=l[h];return this.splitTextToSize(p.hasOwnProperty("text")?p.text:p,a[h]-c-c)},this).map(function(h){return this.getLineHeightFactor()*h.length*d/f+c+c},this).reduce(function(h,p){return Math.max(h,p)},0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,a){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){c=this.internal.__cell__.tableHeaderRow[h].clone(),a&&(c.y=this.internal.__cell__.margins.top||0,f.push(c)),c.lineNumber=l;var p=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,c),this.setTextColor(p)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),t=!1}}(_r.API);var a3={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},l3=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],og=o3(l3),u3=[100,200,300,400,500,600,700,800,900],DS=o3(u3);function ag(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(i){return a3[i=i||"normal"]?i:"normal"}(n.style),r=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(n.weight),s=function(i){return typeof og[i=i||"normal"]=="number"?i:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:s,src:n.src||[],ref:n.ref||{name:e,style:[s,t,r].join(" ")}}}function hb(n,e,t,r){var s;for(s=t;s>=0&&s<e.length;s+=r)if(n[e[s]])return n[e[s]];for(s=t;s>=0&&s<e.length;s-=r)if(n[e[s]])return n[e[s]]}var IS={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},fb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function db(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function FS(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",s=Object.assign({},IS,t.genericFontFamilies||{}),i=null,o=null,u=0;u<e.length;++u)if(s[(i=ag(e[u])).family]&&(i.family=s[i.family]),n.hasOwnProperty(i.family)){o=n[i.family];break}if(!(o=o||n[r]))throw new Error("Could not find a font-family for the rule '"+db(i)+"' and default family '"+r+"'.");if(o=function(l,a){if(a[l])return a[l];var c=og[l],d=c<=og.normal?-1:1,f=hb(a,l3,c,d);if(!f)throw new Error("Could not find a matching font-stretch value for "+l);return f}(i.stretch,o),o=function(l,a){if(a[l])return a[l];for(var c=a3[l],d=0;d<c.length;++d)if(a[c[d]])return a[c[d]];throw new Error("Could not find a matching font-style for "+l)}(i.style,o),!(o=function(l,a){if(a[l])return a[l];if(l===400&&a[500])return a[500];if(l===500&&a[400])return a[400];var c=DS[l],d=hb(a,u3,c,l<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+l);return d}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+db(i)+"'.");return o}function pb(n){return n.trimLeft()}function BS(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function zS(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Vf,mb,gb,q0=["times"];(function(n){var e,t,r,s,i,o,u,l,a,c=function(E){return E=E||{},this.isStrokeTransparent=E.isStrokeTransparent||!1,this.strokeOpacity=E.strokeOpacity||1,this.strokeStyle=E.strokeStyle||"#000000",this.fillStyle=E.fillStyle||"#000000",this.isFillTransparent=E.isFillTransparent||!1,this.fillOpacity=E.fillOpacity||1,this.font=E.font||"10px sans-serif",this.textBaseline=E.textBaseline||"alphabetic",this.textAlign=E.textAlign||"left",this.lineWidth=E.lineWidth||1,this.lineJoin=E.lineJoin||"miter",this.lineCap=E.lineCap||"butt",this.path=E.path||[],this.transform=E.transform!==void 0?E.transform.clone():new l,this.globalCompositeOperation=E.globalCompositeOperation||"normal",this.globalAlpha=E.globalAlpha||1,this.clip_path=E.clip_path||[],this.currentPoint=E.currentPoint||new o,this.miterLimit=E.miterLimit||10,this.lastPoint=E.lastPoint||new o,this.lineDashOffset=E.lineDashOffset||0,this.lineDash=E.lineDash||[],this.margin=E.margin||[0,0,0,0],this.prevPageLastElemOffset=E.prevPageLastElemOffset||0,this.ignoreClearRect=typeof E.ignoreClearRect!="boolean"||E.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,u=this.internal.Rectangle,l=this.internal.Matrix,a=new c}]);var d=function(E){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=E;Object.defineProperty(this,"pdf",{get:function(){return V}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(pt){X=!!pt}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(pt){Q=!!pt}});var D=0;Object.defineProperty(this,"posX",{get:function(){return D},set:function(pt){isNaN(pt)||(D=pt)}});var Z=0;Object.defineProperty(this,"posY",{get:function(){return Z},set:function(pt){isNaN(pt)||(Z=pt)}}),Object.defineProperty(this,"margin",{get:function(){return a.margin},set:function(pt){var st;typeof pt=="number"?st=[pt,pt,pt,pt]:((st=new Array(4))[0]=pt[0],st[1]=pt.length>=2?pt[1]:st[0],st[2]=pt.length>=3?pt[2]:st[0],st[3]=pt.length>=4?pt[3]:st[1]),a.margin=st}});var L=!1;Object.defineProperty(this,"autoPaging",{get:function(){return L},set:function(pt){L=pt}});var O=0;Object.defineProperty(this,"lastBreak",{get:function(){return O},set:function(pt){O=pt}});var G=[];Object.defineProperty(this,"pageBreaks",{get:function(){return G},set:function(pt){G=pt}}),Object.defineProperty(this,"ctx",{get:function(){return a},set:function(pt){pt instanceof c&&(a=pt)}}),Object.defineProperty(this,"path",{get:function(){return a.path},set:function(pt){a.path=pt}});var nt=[];Object.defineProperty(this,"ctxStack",{get:function(){return nt},set:function(pt){nt=pt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(pt){var st;st=f(pt),this.ctx.fillStyle=st.style,this.ctx.isFillTransparent=st.a===0,this.ctx.fillOpacity=st.a,this.pdf.setFillColor(st.r,st.g,st.b,{a:st.a}),this.pdf.setTextColor(st.r,st.g,st.b,{a:st.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(pt){var st=f(pt);this.ctx.strokeStyle=st.style,this.ctx.isStrokeTransparent=st.a===0,this.ctx.strokeOpacity=st.a,st.a===0?this.pdf.setDrawColor(255,255,255):(st.a,this.pdf.setDrawColor(st.r,st.g,st.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(pt){["butt","round","square"].indexOf(pt)!==-1&&(this.ctx.lineCap=pt,this.pdf.setLineCap(pt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(pt){isNaN(pt)||(this.ctx.lineWidth=pt,this.pdf.setLineWidth(pt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(pt){["bevel","round","miter"].indexOf(pt)!==-1&&(this.ctx.lineJoin=pt,this.pdf.setLineJoin(pt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(pt){isNaN(pt)||(this.ctx.miterLimit=pt,this.pdf.setMiterLimit(pt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(pt){this.ctx.textBaseline=pt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(pt){["right","end","center","left","start"].indexOf(pt)!==-1&&(this.ctx.textAlign=pt)}});var ct=null;function ot(pt,st){if(ct===null){var at=function(vt){var yt=[];return Object.keys(vt).forEach(function(kt){vt[kt].forEach(function(St){var Tt=null;switch(St){case"bold":Tt={family:kt,weight:"bold"};break;case"italic":Tt={family:kt,style:"italic"};break;case"bolditalic":Tt={family:kt,weight:"bold",style:"italic"};break;case"":case"normal":Tt={family:kt}}Tt!==null&&(Tt.ref={name:kt,style:St},yt.push(Tt))})}),yt}(pt.getFontList());ct=function(vt){for(var yt={},kt=0;kt<vt.length;++kt){var St=ag(vt[kt]),Tt=St.family,Lt=St.stretch,Xt=St.style,re=St.weight;yt[Tt]=yt[Tt]||{},yt[Tt][Lt]=yt[Tt][Lt]||{},yt[Tt][Lt][Xt]=yt[Tt][Lt][Xt]||{},yt[Tt][Lt][Xt][re]=St}return yt}(at.concat(st))}return ct}var mt=null;Object.defineProperty(this,"fontFaces",{get:function(){return mt},set:function(pt){ct=null,mt=pt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(pt){var st;if(this.ctx.font=pt,(st=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(pt))!==null){var at=st[1],vt=(st[2],st[3]),yt=st[4],kt=(st[5],st[6]),St=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(yt)[2];yt=Math.floor(St==="px"?parseFloat(yt)*this.pdf.internal.scaleFactor:St==="em"?parseFloat(yt)*this.pdf.getFontSize():parseFloat(yt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(yt);var Tt=function(ve){var Te,ie,ze=[],me=ve.trim();if(me==="")return q0;if(me in fb)return[fb[me]];for(;me!=="";){switch(ie=null,Te=(me=pb(me)).charAt(0)){case'"':case"'":ie=BS(me.substring(1),Te);break;default:ie=zS(me)}if(ie===null||(ze.push(ie[0]),(me=pb(ie[1]))!==""&&me.charAt(0)!==","))return q0;me=me.replace(/^,/,"")}return ze}(kt);if(this.fontFaces){var Lt=FS(ot(this.pdf,this.fontFaces),Tt.map(function(ve){return{family:ve,stretch:"normal",weight:vt,style:at}}));this.pdf.setFont(Lt.ref.name,Lt.ref.style)}else{var Xt="";(vt==="bold"||parseInt(vt,10)>=700||at==="bold")&&(Xt="bold"),at==="italic"&&(Xt+="italic"),Xt.length===0&&(Xt="normal");for(var re="",ue={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ce=0;ce<Tt.length;ce++){if(this.pdf.internal.getFont(Tt[ce],Xt,{noFallback:!0,disableWarning:!0})!==void 0){re=Tt[ce];break}if(Xt==="bolditalic"&&this.pdf.internal.getFont(Tt[ce],"bold",{noFallback:!0,disableWarning:!0})!==void 0)re=Tt[ce],Xt="bold";else if(this.pdf.internal.getFont(Tt[ce],"normal",{noFallback:!0,disableWarning:!0})!==void 0){re=Tt[ce],Xt="normal";break}}if(re===""){for(var de=0;de<Tt.length;de++)if(ue[Tt[de]]){re=ue[Tt[de]];break}}re=re===""?"Times":re,this.pdf.setFont(re,Xt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(pt){this.ctx.globalCompositeOperation=pt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(pt){this.ctx.globalAlpha=pt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(pt){this.ctx.lineDashOffset=pt,B.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(pt){this.ctx.lineDash=pt,B.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(pt){this.ctx.ignoreClearRect=!!pt}})};d.prototype.setLineDash=function(E){this.lineDash=E},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){k.call(this,"fill",!1)},d.prototype.stroke=function(){k.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(E,V){if(isNaN(E)||isNaN(V))throw gn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new o(E,V));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(E,V)},d.prototype.closePath=function(){var E=new o(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&ln(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){E=new o(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(E.x,E.y)},d.prototype.lineTo=function(E,V){if(isNaN(E)||isNaN(V))throw gn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new o(E,V));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(X.x,X.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},d.prototype.quadraticCurveTo=function(E,V,X,Q){if(isNaN(X)||isNaN(Q)||isNaN(E)||isNaN(V))throw gn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var D=this.ctx.transform.applyToPoint(new o(X,Q)),Z=this.ctx.transform.applyToPoint(new o(E,V));this.path.push({type:"qct",x1:Z.x,y1:Z.y,x:D.x,y:D.y}),this.ctx.lastPoint=new o(D.x,D.y)},d.prototype.bezierCurveTo=function(E,V,X,Q,D,Z){if(isNaN(D)||isNaN(Z)||isNaN(E)||isNaN(V)||isNaN(X)||isNaN(Q))throw gn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var L=this.ctx.transform.applyToPoint(new o(D,Z)),O=this.ctx.transform.applyToPoint(new o(E,V)),G=this.ctx.transform.applyToPoint(new o(X,Q));this.path.push({type:"bct",x1:O.x,y1:O.y,x2:G.x,y2:G.y,x:L.x,y:L.y}),this.ctx.lastPoint=new o(L.x,L.y)},d.prototype.arc=function(E,V,X,Q,D,Z){if(isNaN(E)||isNaN(V)||isNaN(X)||isNaN(Q)||isNaN(D))throw gn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Z=!!Z,!this.ctx.transform.isIdentity){var L=this.ctx.transform.applyToPoint(new o(E,V));E=L.x,V=L.y;var O=this.ctx.transform.applyToPoint(new o(0,X)),G=this.ctx.transform.applyToPoint(new o(0,0));X=Math.sqrt(Math.pow(O.x-G.x,2)+Math.pow(O.y-G.y,2))}Math.abs(D-Q)>=2*Math.PI&&(Q=0,D=2*Math.PI),this.path.push({type:"arc",x:E,y:V,radius:X,startAngle:Q,endAngle:D,counterclockwise:Z})},d.prototype.arcTo=function(E,V,X,Q,D){throw new Error("arcTo not implemented.")},d.prototype.rect=function(E,V,X,Q){if(isNaN(E)||isNaN(V)||isNaN(X)||isNaN(Q))throw gn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(E,V),this.lineTo(E+X,V),this.lineTo(E+X,V+Q),this.lineTo(E,V+Q),this.lineTo(E,V),this.lineTo(E+X,V),this.lineTo(E,V)},d.prototype.fillRect=function(E,V,X,Q){if(isNaN(E)||isNaN(V)||isNaN(X)||isNaN(Q))throw gn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var D={};this.lineCap!=="butt"&&(D.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(D.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(E,V,X,Q),this.fill(),D.hasOwnProperty("lineCap")&&(this.lineCap=D.lineCap),D.hasOwnProperty("lineJoin")&&(this.lineJoin=D.lineJoin)}},d.prototype.strokeRect=function(E,V,X,Q){if(isNaN(E)||isNaN(V)||isNaN(X)||isNaN(Q))throw gn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(E,V,X,Q),this.stroke())},d.prototype.clearRect=function(E,V,X,Q){if(isNaN(E)||isNaN(V)||isNaN(X)||isNaN(Q))throw gn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(E,V,X,Q))},d.prototype.save=function(E){E=typeof E!="boolean"||E;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),E){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},d.prototype.restore=function(E){E=typeof E!="boolean"||E;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(V),E&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(E){var V,X,Q,D;if(E.isCanvasGradient===!0&&(E=E.getColor()),!E)return{r:0,g:0,b:0,a:0,style:E};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(E))V=0,X=0,Q=0,D=0;else{var Z=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(E);if(Z!==null)V=parseInt(Z[1]),X=parseInt(Z[2]),Q=parseInt(Z[3]),D=1;else if((Z=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(E))!==null)V=parseInt(Z[1]),X=parseInt(Z[2]),Q=parseInt(Z[3]),D=parseFloat(Z[4]);else{if(D=1,typeof E=="string"&&E.charAt(0)!=="#"){var L=new t3(E);E=L.ok?L.toHex():"#000000"}E.length===4?(V=E.substring(1,2),V+=V,X=E.substring(2,3),X+=X,Q=E.substring(3,4),Q+=Q):(V=E.substring(1,3),X=E.substring(3,5),Q=E.substring(5,7)),V=parseInt(V,16),X=parseInt(X,16),Q=parseInt(Q,16)}}return{r:V,g:X,b:Q,a:D,style:E}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},p=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(E,V,X,Q){if(isNaN(V)||isNaN(X)||typeof E!="string")throw gn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!h.call(this)){var D=x(this.ctx.transform.rotation),Z=this.ctx.transform.scaleX;F.call(this,{text:E,x:V,y:X,scale:Z,angle:D,align:this.textAlign,maxWidth:Q})}},d.prototype.strokeText=function(E,V,X,Q){if(isNaN(V)||isNaN(X)||typeof E!="string")throw gn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){Q=isNaN(Q)?void 0:Q;var D=x(this.ctx.transform.rotation),Z=this.ctx.transform.scaleX;F.call(this,{text:E,x:V,y:X,scale:Z,renderingMode:"stroke",angle:D,align:this.textAlign,maxWidth:Q})}},d.prototype.measureText=function(E){if(typeof E!="string")throw gn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,X=this.pdf.internal.scaleFactor,Q=V.internal.getFontSize(),D=V.getStringUnitWidth(E)*Q/V.internal.scaleFactor,Z=function(L){var O=(L=L||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return O}}),this};return new Z({width:D*=Math.round(96*X/72*1e4)/1e4})},d.prototype.scale=function(E,V){if(isNaN(E)||isNaN(V))throw gn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new l(E,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},d.prototype.rotate=function(E){if(isNaN(E))throw gn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new l(Math.cos(E),Math.sin(E),-Math.sin(E),Math.cos(E),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},d.prototype.translate=function(E,V){if(isNaN(E)||isNaN(V))throw gn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new l(1,0,0,1,E,V);this.ctx.transform=this.ctx.transform.multiply(X)},d.prototype.transform=function(E,V,X,Q,D,Z){if(isNaN(E)||isNaN(V)||isNaN(X)||isNaN(Q)||isNaN(D)||isNaN(Z))throw gn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var L=new l(E,V,X,Q,D,Z);this.ctx.transform=this.ctx.transform.multiply(L)},d.prototype.setTransform=function(E,V,X,Q,D,Z){E=isNaN(E)?1:E,V=isNaN(V)?0:V,X=isNaN(X)?0:X,Q=isNaN(Q)?1:Q,D=isNaN(D)?0:D,Z=isNaN(Z)?0:Z,this.ctx.transform=new l(E,V,X,Q,D,Z)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(E,V,X,Q,D,Z,L,O,G){var nt=this.pdf.getImageProperties(E),ct=1,ot=1,mt=1,pt=1;Q!==void 0&&O!==void 0&&(mt=O/Q,pt=G/D,ct=nt.width/Q*O/Q,ot=nt.height/D*G/D),Z===void 0&&(Z=V,L=X,V=0,X=0),Q!==void 0&&O===void 0&&(O=Q,G=D),Q===void 0&&O===void 0&&(O=nt.width,G=nt.height);for(var st,at=this.ctx.transform.decompose(),vt=x(at.rotate.shx),yt=new l,kt=(yt=(yt=(yt=yt.multiply(at.translate)).multiply(at.skew)).multiply(at.scale)).applyToRectangle(new u(Z-V*mt,L-X*pt,Q*ct,D*ot)),St=m.call(this,kt),Tt=[],Lt=0;Lt<St.length;Lt+=1)Tt.indexOf(St[Lt])===-1&&Tt.push(St[Lt]);if(v(Tt),this.autoPaging)for(var Xt=Tt[0],re=Tt[Tt.length-1],ue=Xt;ue<re+1;ue++){this.pdf.setPage(ue);var ce=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],de=ue===1?this.posY+this.margin[0]:this.margin[0],ve=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Te=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ie=ue===1?0:ve+(ue-2)*Te;if(this.ctx.clip_path.length!==0){var ze=this.path;st=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(st,this.posX+this.margin[3],-ie+de+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=ze}var me=JSON.parse(JSON.stringify(kt));me=b([me],this.posX+this.margin[3],-ie+de+this.ctx.prevPageLastElemOffset)[0];var ke=(ue>Xt||ue<re)&&g.call(this);ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ce,Te,null).clip().discardPath()),this.pdf.addImage(E,"JPEG",me.x,me.y,me.w,me.h,null,null,vt),ke&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(E,"JPEG",kt.x,kt.y,kt.w,kt.h,null,null,vt)};var m=function(E,V,X){var Q=[];V=V||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var D=this.posY+this.ctx.prevPageLastElemOffset;switch(E.type){default:case"mt":case"lt":Q.push(Math.floor((E.y+D)/X)+1);break;case"arc":Q.push(Math.floor((E.y+D-E.radius)/X)+1),Q.push(Math.floor((E.y+D+E.radius)/X)+1);break;case"qct":var Z=S(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x,E.y);Q.push(Math.floor((Z.y+D)/X)+1),Q.push(Math.floor((Z.y+Z.h+D)/X)+1);break;case"bct":var L=A(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x2,E.y2,E.x,E.y);Q.push(Math.floor((L.y+D)/X)+1),Q.push(Math.floor((L.y+L.h+D)/X)+1);break;case"rect":Q.push(Math.floor((E.y+D)/X)+1),Q.push(Math.floor((E.y+E.h+D)/X)+1)}for(var O=0;O<Q.length;O+=1)for(;this.pdf.internal.getNumberOfPages()<Q[O];)y.call(this);return Q},y=function(){var E=this.fillStyle,V=this.strokeStyle,X=this.font,Q=this.lineCap,D=this.lineWidth,Z=this.lineJoin;this.pdf.addPage(),this.fillStyle=E,this.strokeStyle=V,this.font=X,this.lineCap=Q,this.lineWidth=D,this.lineJoin=Z},b=function(E,V,X){for(var Q=0;Q<E.length;Q++)switch(E[Q].type){case"bct":E[Q].x2+=V,E[Q].y2+=X;case"qct":E[Q].x1+=V,E[Q].y1+=X;case"mt":case"lt":case"arc":default:E[Q].x+=V,E[Q].y+=X}return E},v=function(E){return E.sort(function(V,X){return V-X})},k=function(E,V){for(var X,Q,D=this.fillStyle,Z=this.strokeStyle,L=this.lineCap,O=this.lineWidth,G=Math.abs(O*this.ctx.transform.scaleX),nt=this.lineJoin,ct=JSON.parse(JSON.stringify(this.path)),ot=JSON.parse(JSON.stringify(this.path)),mt=[],pt=0;pt<ot.length;pt++)if(ot[pt].x!==void 0)for(var st=m.call(this,ot[pt]),at=0;at<st.length;at+=1)mt.indexOf(st[at])===-1&&mt.push(st[at]);for(var vt=0;vt<mt.length;vt++)for(;this.pdf.internal.getNumberOfPages()<mt[vt];)y.call(this);if(v(mt),this.autoPaging)for(var yt=mt[0],kt=mt[mt.length-1],St=yt;St<kt+1;St++){this.pdf.setPage(St),this.fillStyle=D,this.strokeStyle=Z,this.lineCap=L,this.lineWidth=G,this.lineJoin=nt;var Tt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Lt=St===1?this.posY+this.margin[0]:this.margin[0],Xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],re=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ue=St===1?0:Xt+(St-2)*re;if(this.ctx.clip_path.length!==0){var ce=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(X,this.posX+this.margin[3],-ue+Lt+this.ctx.prevPageLastElemOffset),j.call(this,E,!0),this.path=ce}if(Q=JSON.parse(JSON.stringify(ct)),this.path=b(Q,this.posX+this.margin[3],-ue+Lt+this.ctx.prevPageLastElemOffset),V===!1||St===0){var de=(St>yt||St<kt)&&g.call(this);de&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Tt,re,null).clip().discardPath()),j.call(this,E,V),de&&this.pdf.restoreGraphicsState()}this.lineWidth=O}else this.lineWidth=G,j.call(this,E,V),this.lineWidth=O;this.path=ct},j=function(E,V){if((E!=="stroke"||V||!p.call(this))&&(E==="stroke"||V||!h.call(this))){for(var X,Q,D=[],Z=this.path,L=0;L<Z.length;L++){var O=Z[L];switch(O.type){case"begin":D.push({begin:!0});break;case"close":D.push({close:!0});break;case"mt":D.push({start:O,deltas:[],abs:[]});break;case"lt":var G=D.length;if(Z[L-1]&&!isNaN(Z[L-1].x)&&(X=[O.x-Z[L-1].x,O.y-Z[L-1].y],G>0)){for(;G>=0;G--)if(D[G-1].close!==!0&&D[G-1].begin!==!0){D[G-1].deltas.push(X),D[G-1].abs.push(O);break}}break;case"bct":X=[O.x1-Z[L-1].x,O.y1-Z[L-1].y,O.x2-Z[L-1].x,O.y2-Z[L-1].y,O.x-Z[L-1].x,O.y-Z[L-1].y],D[D.length-1].deltas.push(X);break;case"qct":var nt=Z[L-1].x+2/3*(O.x1-Z[L-1].x),ct=Z[L-1].y+2/3*(O.y1-Z[L-1].y),ot=O.x+2/3*(O.x1-O.x),mt=O.y+2/3*(O.y1-O.y),pt=O.x,st=O.y;X=[nt-Z[L-1].x,ct-Z[L-1].y,ot-Z[L-1].x,mt-Z[L-1].y,pt-Z[L-1].x,st-Z[L-1].y],D[D.length-1].deltas.push(X);break;case"arc":D.push({deltas:[],abs:[],arc:!0}),Array.isArray(D[D.length-1].abs)&&D[D.length-1].abs.push(O)}}Q=V?null:E==="stroke"?"stroke":"fill";for(var at=!1,vt=0;vt<D.length;vt++)if(D[vt].arc)for(var yt=D[vt].abs,kt=0;kt<yt.length;kt++){var St=yt[kt];St.type==="arc"?P.call(this,St.x,St.y,St.radius,St.startAngle,St.endAngle,St.counterclockwise,void 0,V,!at):T.call(this,St.x,St.y),at=!0}else if(D[vt].close===!0)this.pdf.internal.out("h"),at=!1;else if(D[vt].begin!==!0){var Tt=D[vt].start.x,Lt=D[vt].start.y;N.call(this,D[vt].deltas,Tt,Lt),at=!0}Q&&z.call(this,Q),V&&q.call(this)}},I=function(E){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return E-X;case"top":return E+V-X;case"hanging":return E+V-2*X;case"middle":return E+V/2-X;case"ideographic":return E;case"alphabetic":default:return E}},U=function(E){return E+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var E=function(){};return E.colorStops=[],E.addColorStop=function(V,X){this.colorStops.push([V,X])},E.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},E.isCanvasGradient=!0,E},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var P=function(E,V,X,Q,D,Z,L,O,G){for(var nt=w.call(this,X,Q,D,Z),ct=0;ct<nt.length;ct++){var ot=nt[ct];ct===0&&(G?$.call(this,ot.x1+E,ot.y1+V):T.call(this,ot.x1+E,ot.y1+V)),C.call(this,E,V,ot.x2,ot.y2,ot.x3,ot.y3,ot.x4,ot.y4)}O?q.call(this):z.call(this,L)},z=function(E){switch(E){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},q=function(){this.pdf.clip(),this.pdf.discardPath()},$=function(E,V){this.pdf.internal.out(t(E)+" "+r(V)+" m")},F=function(E){var V;switch(E.align){case"right":case"end":V="right";break;case"center":V="center";break;case"left":case"start":default:V="left"}var X=this.pdf.getTextDimensions(E.text),Q=I.call(this,E.y),D=U.call(this,Q)-X.h,Z=this.ctx.transform.applyToPoint(new o(E.x,Q)),L=this.ctx.transform.decompose(),O=new l;O=(O=(O=O.multiply(L.translate)).multiply(L.skew)).multiply(L.scale);for(var G,nt,ct,ot=this.ctx.transform.applyToRectangle(new u(E.x,Q,X.w,X.h)),mt=O.applyToRectangle(new u(E.x,D,X.w,X.h)),pt=m.call(this,mt),st=[],at=0;at<pt.length;at+=1)st.indexOf(pt[at])===-1&&st.push(pt[at]);if(v(st),this.autoPaging)for(var vt=st[0],yt=st[st.length-1],kt=vt;kt<yt+1;kt++){this.pdf.setPage(kt);var St=kt===1?this.posY+this.margin[0]:this.margin[0],Tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Lt=this.pdf.internal.pageSize.height-this.margin[2],Xt=Lt-this.margin[0],re=this.pdf.internal.pageSize.width-this.margin[1],ue=re-this.margin[3],ce=kt===1?0:Tt+(kt-2)*Xt;if(this.ctx.clip_path.length!==0){var de=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(G,this.posX+this.margin[3],-1*ce+St),j.call(this,"fill",!0),this.path=de}var ve=b([JSON.parse(JSON.stringify(mt))],this.posX+this.margin[3],-ce+St+this.ctx.prevPageLastElemOffset)[0];E.scale>=.01&&(nt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(nt*E.scale),ct=this.lineWidth,this.lineWidth=ct*E.scale);var Te=this.autoPaging!=="text";if(Te||ve.y+ve.h<=Lt){if(Te||ve.y>=St&&ve.x<=re){var ie=Te?E.text:this.pdf.splitTextToSize(E.text,E.maxWidth||re-ve.x)[0],ze=b([JSON.parse(JSON.stringify(ot))],this.posX+this.margin[3],-ce+St+this.ctx.prevPageLastElemOffset)[0],me=Te&&(kt>vt||kt<yt)&&g.call(this);me&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ue,Xt,null).clip().discardPath()),this.pdf.text(ie,ze.x,ze.y,{angle:E.angle,align:V,renderingMode:E.renderingMode}),me&&this.pdf.restoreGraphicsState()}}else ve.y<Lt&&(this.ctx.prevPageLastElemOffset+=Lt-ve.y);E.scale>=.01&&(this.pdf.setFontSize(nt),this.lineWidth=ct)}else E.scale>=.01&&(nt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(nt*E.scale),ct=this.lineWidth,this.lineWidth=ct*E.scale),this.pdf.text(E.text,Z.x+this.posX,Z.y+this.posY,{angle:E.angle,align:V,renderingMode:E.renderingMode,maxWidth:E.maxWidth}),E.scale>=.01&&(this.pdf.setFontSize(nt),this.lineWidth=ct)},T=function(E,V,X,Q){X=X||0,Q=Q||0,this.pdf.internal.out(t(E+X)+" "+r(V+Q)+" l")},N=function(E,V,X){return this.pdf.lines(E,V,X,null,null)},C=function(E,V,X,Q,D,Z,L,O){this.pdf.internal.out([e(s(X+E)),e(i(Q+V)),e(s(D+E)),e(i(Z+V)),e(s(L+E)),e(i(O+V)),"c"].join(" "))},w=function(E,V,X,Q){for(var D=2*Math.PI,Z=Math.PI/2;V>X;)V-=D;var L=Math.abs(X-V);L<D&&Q&&(L=D-L);for(var O=[],G=Q?-1:1,nt=V;L>1e-5;){var ct=nt+G*Math.min(L,Z);O.push(_.call(this,E,nt,ct)),L-=Math.abs(ct-nt),nt=ct}return O},_=function(E,V,X){var Q=(X-V)/2,D=E*Math.cos(Q),Z=E*Math.sin(Q),L=D,O=-Z,G=L*L+O*O,nt=G+L*D+O*Z,ct=4/3*(Math.sqrt(2*G*nt)-nt)/(L*Z-O*D),ot=L-ct*O,mt=O+ct*L,pt=ot,st=-mt,at=Q+V,vt=Math.cos(at),yt=Math.sin(at);return{x1:E*Math.cos(V),y1:E*Math.sin(V),x2:ot*vt-mt*yt,y2:ot*yt+mt*vt,x3:pt*vt-st*yt,y3:pt*yt+st*vt,x4:E*Math.cos(X),y4:E*Math.sin(X)}},x=function(E){return 180*E/Math.PI},S=function(E,V,X,Q,D,Z){var L=E+.5*(X-E),O=V+.5*(Q-V),G=D+.5*(X-D),nt=Z+.5*(Q-Z),ct=Math.min(E,D,L,G),ot=Math.max(E,D,L,G),mt=Math.min(V,Z,O,nt),pt=Math.max(V,Z,O,nt);return new u(ct,mt,ot-ct,pt-mt)},A=function(E,V,X,Q,D,Z,L,O){var G,nt,ct,ot,mt,pt,st,at,vt,yt,kt,St,Tt,Lt,Xt=X-E,re=Q-V,ue=D-X,ce=Z-Q,de=L-D,ve=O-Z;for(nt=0;nt<41;nt++)vt=(st=(ct=E+(G=nt/40)*Xt)+G*((mt=X+G*ue)-ct))+G*(mt+G*(D+G*de-mt)-st),yt=(at=(ot=V+G*re)+G*((pt=Q+G*ce)-ot))+G*(pt+G*(Z+G*ve-pt)-at),nt==0?(kt=vt,St=yt,Tt=vt,Lt=yt):(kt=Math.min(kt,vt),St=Math.min(St,yt),Tt=Math.max(Tt,vt),Lt=Math.max(Lt,yt));return new u(Math.round(kt),Math.round(St),Math.round(Tt-kt),Math.round(Lt-St))},B=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var E,V,X=(E=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:E,lineDashOffset:V}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(_r.API),function(n){var e=function(i){var o,u,l,a,c,d,f,h,p,g;for(u=[],l=0,a=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;a>l;l+=4)(c=(i.charCodeAt(l)<<24)+(i.charCodeAt(l+1)<<16)+(i.charCodeAt(l+2)<<8)+i.charCodeAt(l+3))!==0?(d=(c=((c=((c=((c=(c-(g=c%85))/85)-(p=c%85))/85)-(h=c%85))/85)-(f=c%85))/85)%85,u.push(d+33,f+33,h+33,p+33,g+33)):u.push(122);return function(m,y){for(var b=y;b>0;b--)m.pop()}(u,o.length),String.fromCharCode.apply(String,u)+"~>"},t=function(i){var o,u,l,a,c,d=String,f="length",h=255,p="charCodeAt",g="slice",m="replace";for(i[g](-2),i=i[g](0,-2)[m](/\s/g,"")[m]("z","!!!!!"),l=[],a=0,c=(i+=o="uuuuu"[g](i[f]%5||5))[f];c>a;a+=5)u=52200625*(i[p](a)-33)+614125*(i[p](a+1)-33)+7225*(i[p](a+2)-33)+85*(i[p](a+3)-33)+(i[p](a+4)-33),l.push(h&u>>24,h&u>>16,h&u>>8,h&u);return function(y,b){for(var v=b;v>0;v--)y.pop()}(l,o[f]),d.fromCharCode.apply(d,l)},r=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var u="",l=0;l<i.length;l+=2)u+=String.fromCharCode("0x"+(i[l]+i[l+1]));return u},s=function(i){for(var o=new Uint8Array(i.length),u=i.length;u--;)o[u]=i.charCodeAt(u);return i=(o=eg(o)).reduce(function(l,a){return l+String.fromCharCode(a)},"")};n.processDataByFilters=function(i,o){var u=0,l=i||"",a=[];for(typeof(o=o||[])=="string"&&(o=[o]),u=0;u<o.length;u+=1)switch(o[u]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),a.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),a.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),a.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">",a.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),a.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[u]+'" is not implemented')}return{data:l,reverseChain:a.reverse().join(" ")}}}(_r.API),function(n){n.loadFile=function(e,t,r){return function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var u=void 0;try{u=function(l,a,c){var d=new XMLHttpRequest,f=0,h=function(p){var g=p.length,m=[],y=String.fromCharCode;for(f=0;f<g;f+=1)m.push(y(255&p.charCodeAt(f)));return m.join("")};if(d.open("GET",l,!a),d.overrideMimeType("text/plain; charset=x-user-defined"),a===!1&&(d.onload=function(){d.status===200?c(h(this.responseText)):c(void 0)}),d.send(null),a&&d.status===200)return h(d.responseText)}(s,i,o)}catch{}return u}(e,t,r)},n.loadImageFile=n.loadFile}(_r.API),function(n){function e(){return(Tr.html2canvas?Promise.resolve(Tr.html2canvas):Km(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(Tr.DOMPurify?Promise.resolve(Tr.DOMPurify):Km(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var u=ln(o);return u==="undefined"?"undefined":u==="string"||o instanceof String?"string":u==="number"||o instanceof Number?"number":u==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":u==="object"?"object":"unknown"},s=function(o,u){var l=document.createElement(o);for(var a in u.className&&(l.className=u.className),u.innerHTML&&u.dompurify&&(l.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)l.style[a]=u.style[a];return l},i=function o(u){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),a=o.convert(Promise.resolve(),l);return a=(a=a.setProgress(1,o,1,[o])).set(u)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,u){return o.__proto__=u||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,u){return this.then(function(){switch(u=u||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(l){return this.set({src:s("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function l(a,c){for(var d=a.nodeType===3?document.createTextNode(a.nodeValue):a.cloneNode(!1),f=a.firstChild;f;f=f.nextSibling)c!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,c));return a.nodeType===1&&(a.nodeName==="CANVAS"?(d.width=a.width,d.height=a.height,d.getContext("2d").drawImage(a,0,0)):a.nodeName!=="TEXTAREA"&&a.nodeName!=="SELECT"||(d.value=a.value),d.addEventListener("load",function(){d.scrollTop=a.scrollTop,d.scrollLeft=a.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(u){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,u(this.prop.container,l)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(u){var l=this.opt.jsPDF,a=this.opt.fontFaces,c=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:c,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=a,a)for(var f=0;f<a.length;++f){var h=a[f],p=h.src.find(function(g){return g.format==="truetype"});p&&l.addFont(p.url,h.ref.name,h.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,l.context2d.save(!0),u(this.prop.container,d)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,u,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,u):this.outputPdf(o,u)},i.prototype.outputPdf=function(o,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,u)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(r(o)!=="object")return this;var u=Object.keys(o||{}).map(function(l){if(l in i.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(u)})},i.prototype.get=function(o,u){return this.then(function(){var l=o in i.template.prop?this.prop[o]:this.opt[o];return u?u(l):l})},i.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function u(l,a){return Math.floor(l*a/72*96)}return this.then(function(){(o=o||_r.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:u(o.inner.width,o.k),height:u(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,u,l,a){return o!=null&&(this.progress.val=o),u!=null&&(this.progress.state=u),l!=null&&(this.progress.n=l),a!=null&&(this.progress.stack=a),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,u,l,a){return this.setProgress(o?this.progress.val+o:null,u||null,l?this.progress.n+l:null,a?this.progress.stack.concat(a):null)},i.prototype.then=function(o,u){var l=this;return this.thenCore(o,u,function(a,c){return l.updateProgress(null,null,1,[a]),Promise.prototype.then.call(this,function(d){return l.updateProgress(null,a),d}).then(a,c).then(function(d){return l.updateProgress(1),d})})},i.prototype.thenCore=function(o,u,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),u&&(u=u.bind(this));var a=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),c=l.call(a,o,u);return i.convert(c,this.__proto__)},i.prototype.thenExternal=function(o,u){return Promise.prototype.then.call(this,o,u)},i.prototype.thenList=function(o){var u=this;return o.forEach(function(l){u=u.thenCore(l)}),u},i.prototype.catch=function(o){o&&(o=o.bind(this));var u=Promise.prototype.catch.call(this,o);return i.convert(u,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,_r.getPageSize=function(o,u,l){if(ln(o)==="object"){var a=o;o=a.orientation,u=a.unit||u,l=a.format||l}u=u||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var c,d=(""+l).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":c=1;break;case"mm":c=72/25.4;break;case"cm":c=72/2.54;break;case"in":c=72;break;case"px":c=.75;break;case"pc":case"em":c=12;break;case"ex":c=6;break;default:throw"Invalid unit: "+u}var h,p=0,g=0;if(f.hasOwnProperty(d))p=f[d][1]/c,g=f[d][0]/c;else try{p=l[1],g=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",g>p&&(h=g,g=p,p=h);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",p>g&&(h=g,g=p,p=h)}return{width:g,height:p,unit:u,k:c,orientation:o}},n.html=function(o,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(ag):null;var l=new i(u);return u.worker?l:l.from(o).doCallback()}}(_r.API),_r.API.addJS=function(n){return gb=n,this.internal.events.subscribe("postPutResources",function(){Vf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Vf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),mb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+gb+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Vf!==void 0&&mb!==void 0&&this.internal.out("/Names <</JavaScript "+Vf+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=t.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],u=r.exec(o);if(u!=null){var l=u[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var a=this.internal.pages.length,c=[];for(i=0;i<a;i++){var d=t.internal.newObject();c.push(d);var f=t.internal.getPageInfo(i+1);t.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var h=t.internal.newObject();for(t.internal.write("<< /Names [ "),i=0;i<c.length;i++)t.internal.write("(page_"+(i+1)+")"+c[i]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+h+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,s,i){var o={title:s,options:i,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var o=r.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var u=this.count=this.count_r({count:0},o);if(u>0&&this.line("/Count "+u),o.options&&o.options.pageNumber){var l=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var a=0;a<r.children.length;a++)this.renderItems(r.children[a])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,s){for(var i=0;i<s.children.length;i++)r.count++,this.count_r(r,s.children[i]);return r.count}}])}(_r.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,s,i,o,u){var l,a=this.decode.DCT_DECODE,c=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(d){for(var f,h=256*d.charCodeAt(4)+d.charCodeAt(5),p=d.length,g={width:0,height:0,numcomponents:1},m=4;m<p;m+=2){if(m+=h,e.indexOf(d.charCodeAt(m+1))!==-1){f=256*d.charCodeAt(m+5)+d.charCodeAt(m+6),g={width:256*d.charCodeAt(m+7)+d.charCodeAt(m+8),height:f,numcomponents:d.charCodeAt(m+9)};break}h=256*d.charCodeAt(m+2)+d.charCodeAt(m+3)}return g}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}c={data:t,width:l.width,height:l.height,colorSpace:u,bitsPerComponent:8,filter:a,index:r,alias:s}}return c}}(_r.API);var _u,Wf,yb,bb,vb,US=function(){var n,e,t;function r(i){var o,u,l,a,c,d,f,h,p,g,m,y,b,v;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(o=this.readUInt32(),p=(function(){var k,j;for(j=[],k=0;k<4;++k)j.push(String.fromCharCode(this.data[this.pos++]));return j}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},c=this.readUInt16(),a=this.readUInt16()||100,d.delay=1e3*c/a,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(p==="fdAT"&&(this.pos+=4,o-=4),i=(d!=null?d.data:void 0)||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((g=l-this.transparency.indexed.length)>0)for(b=0;0<=g?b<g:b>g;0<=g?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":f=(m=this.read(o)).indexOf(0),h=String.fromCharCode.apply(String,m.slice(0,f)),this.text[h]=String.fromCharCode.apply(String,m.slice(f+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(v=this.colorType)===4||v===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(i){var o,u;for(u=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)u.push(this.data[this.pos++]);return u},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*o),l=0,a=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function c(d,f,h,p){var g,m,y,b,v,k,j,I,U,P,z,q,$,F,T,N,C,w,_,x,S,A=Math.ceil((a.width-d)/h),B=Math.ceil((a.height-f)/p),E=a.width==A&&a.height==B;for(F=o*A,q=E?u:new Uint8Array(F*B),k=i.length,$=0,m=0;$<B&&l<k;){switch(i[l++]){case 0:for(b=C=0;C<F;b=C+=1)q[m++]=i[l++];break;case 1:for(b=w=0;w<F;b=w+=1)g=i[l++],v=b<o?0:q[m-o],q[m++]=(g+v)%256;break;case 2:for(b=_=0;_<F;b=_+=1)g=i[l++],y=(b-b%o)/o,T=$&&q[($-1)*F+y*o+b%o],q[m++]=(T+g)%256;break;case 3:for(b=x=0;x<F;b=x+=1)g=i[l++],y=(b-b%o)/o,v=b<o?0:q[m-o],T=$&&q[($-1)*F+y*o+b%o],q[m++]=(g+Math.floor((v+T)/2))%256;break;case 4:for(b=S=0;S<F;b=S+=1)g=i[l++],y=(b-b%o)/o,v=b<o?0:q[m-o],$===0?T=N=0:(T=q[($-1)*F+y*o+b%o],N=y&&q[($-1)*F+(y-1)*o+b%o]),j=v+T-N,I=Math.abs(j-v),P=Math.abs(j-T),z=Math.abs(j-N),U=I<=P&&I<=z?v:P<=z?T:N,q[m++]=(g+U)%256;break;default:throw new Error("Invalid filter algorithm: "+i[l-1])}if(!E){var V=((f+$*p)*a.width+d)*o,X=$*F;for(b=0;b<A;b+=1){for(var Q=0;Q<o;Q+=1)u[V++]=q[X++];V+=(h-1)*o}}$++}}return i=vS(i),a.interlaceMethod==1?(c(0,0,8,8),c(4,0,8,8),c(0,4,4,8),c(2,0,4,4),c(0,2,2,4),c(1,0,2,2),c(0,1,1,2)):c(0,0,1,1),u},r.prototype.decodePalette=function(){var i,o,u,l,a,c,d,f,h;for(u=this.palette,c=this.transparency.indexed||[],a=new Uint8Array((c.length||0)+u.length),l=0,i=0,o=d=0,f=u.length;d<f;o=d+=3)a[l++]=u[o],a[l++]=u[o+1],a[l++]=u[o+2],a[l++]=(h=c[i++])!=null?h:255;return a},r.prototype.copyToImageData=function(i,o){var u,l,a,c,d,f,h,p,g,m,y;if(l=this.colors,g=null,u=this.hasAlphaChannel,this.palette.length&&(g=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),l=4,u=!0),p=(a=i.data||i).length,d=g||o,c=f=0,l===1)for(;c<p;)h=g?4*o[c/4]:f,m=d[h++],a[c++]=m,a[c++]=m,a[c++]=m,a[c++]=u?d[h++]:255,f=h;else for(;c<p;)h=g?4*o[c/4]:f,a[c++]=d[h++],a[c++]=d[h++],a[c++]=d[h++],a[c++]=u?d[h++]:255,f=h},r.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(Tr)==="[object Window]"){try{e=Tr.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),n=function(i){var o;if(s()===!0)return t.width=i.width,t.height=i.height,t.clearRect(0,0,i.width,i.height),t.putImageData(i,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(i){var o,u,l,a,c,d,f,h;if(this.animation){for(h=[],u=c=0,d=(f=this.animation.frames).length;c<d;u=++c)o=f[u],l=i.createImageData(o.width,o.height),a=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,a),o.imageData=l,h.push(o.image=n(l));return h}},r.prototype.renderFrame=function(i,o){var u,l,a;return u=(l=this.animation.frames)[o],a=l[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(a!=null?a.disposeOp:void 0)===1?i.clearRect(a.xOffset,a.yOffset,a.width,a.height):(a!=null?a.disposeOp:void 0)===2&&i.putImageData(a.imageData,a.xOffset,a.yOffset),u.blendOp===0&&i.clearRect(u.xOffset,u.yOffset,u.width,u.height),i.drawImage(u.image,u.xOffset,u.yOffset)},r.prototype.animate=function(i){var o,u,l,a,c,d,f=this;return u=0,d=this.animation,a=d.numFrames,l=d.frames,c=d.numPlays,(o=function(){var h,p;if(h=u++%a,p=l[h],f.renderFrame(i,h),a>1&&u/a<c)return f.animation._timeout=setTimeout(o,p.delay)})()},r.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},r.prototype.render=function(i){var o,u;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(u=o.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),o.putImageData(u,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function qS(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,s=n[e++],i=s>>7,o=1<<(7&s)+1;n[e++],n[e++];var u=null,l=null;i&&(u=e,l=o,e+=3*o);var a=!0,c=[],d=0,f=null,h=0,p=null;for(this.width=t,this.height=r;a&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,p=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!(($=n[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var g=n[e++];d=n[e++]|n[e++]<<8,f=n[e++],!(1&g)&&(f=null),h=g>>2&7,e++;break;case 254:for(;;){if(!(($=n[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var m=n[e++]|n[e++]<<8,y=n[e++]|n[e++]<<8,b=n[e++]|n[e++]<<8,v=n[e++]|n[e++]<<8,k=n[e++],j=k>>6&1,I=1<<(7&k)+1,U=u,P=l,z=!1;k>>7&&(z=!0,U=e,P=I,e+=3*I);var q=e;for(e++;;){var $;if(!(($=n[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}c.push({x:m,y,width:b,height:v,has_local_palette:z,palette_offset:U,palette_size:P,data_offset:q,data_length:e-q,transparent_index:f,interlaced:!!j,delay:d,disposal:h});break;case 59:a=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return p},this.frameInfo=function(F){if(F<0||F>=c.length)throw new Error("Frame index out of range.");return c[F]},this.decodeAndBlitFrameBGRA=function(F,T){var N=this.frameInfo(F),C=N.width*N.height,w=new Uint8Array(C);wb(n,N.data_offset,w,C);var _=N.palette_offset,x=N.transparent_index;x===null&&(x=256);var S=N.width,A=t-S,B=S,E=4*(N.y*t+N.x),V=4*((N.y+N.height)*t+N.x),X=E,Q=4*A;N.interlaced===!0&&(Q+=4*t*7);for(var D=8,Z=0,L=w.length;Z<L;++Z){var O=w[Z];if(B===0&&(B=S,(X+=Q)>=V&&(Q=4*A+4*t*(D-1),X=E+(S+A)*(D<<1),D>>=1)),O===x)X+=4;else{var G=n[_+3*O],nt=n[_+3*O+1],ct=n[_+3*O+2];T[X++]=ct,T[X++]=nt,T[X++]=G,T[X++]=255}--B}},this.decodeAndBlitFrameRGBA=function(F,T){var N=this.frameInfo(F),C=N.width*N.height,w=new Uint8Array(C);wb(n,N.data_offset,w,C);var _=N.palette_offset,x=N.transparent_index;x===null&&(x=256);var S=N.width,A=t-S,B=S,E=4*(N.y*t+N.x),V=4*((N.y+N.height)*t+N.x),X=E,Q=4*A;N.interlaced===!0&&(Q+=4*t*7);for(var D=8,Z=0,L=w.length;Z<L;++Z){var O=w[Z];if(B===0&&(B=S,(X+=Q)>=V&&(Q=4*A+4*t*(D-1),X=E+(S+A)*(D<<1),D>>=1)),O===x)X+=4;else{var G=n[_+3*O],nt=n[_+3*O+1],ct=n[_+3*O+2];T[X++]=G,T[X++]=nt,T[X++]=ct,T[X++]=255}--B}}}function wb(n,e,t,r){for(var s=n[e++],i=1<<s,o=i+1,u=o+1,l=s+1,a=(1<<l)-1,c=0,d=0,f=0,h=n[e++],p=new Int32Array(4096),g=null;;){for(;c<16&&h!==0;)d|=n[e++]<<c,c+=8,h===1?h=n[e++]:--h;if(c<l)break;var m=d&a;if(d>>=l,c-=l,m!==i){if(m===o)break;for(var y=m<u?m:g,b=0,v=y;v>i;)v=p[v]>>8,++b;var k=v;if(f+b+(y!==m?1:0)>r)return void gn.log("Warning, gif stream longer than expected.");t[f++]=k;var j=f+=b;for(y!==m&&(t[f++]=k),v=y;b--;)v=p[v],t[--j]=255&v,v>>=8;g!==null&&u<4096&&(p[u++]=g<<8|k,u>=a+1&&l<12&&(++l,a=a<<1|1)),g=m}else u=o+1,a=(1<<(l=s+1))-1,g=null}return f!==r&&gn.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function H0(n){var e,t,r,s,i,o=Math.floor,u=new Array(64),l=new Array(64),a=new Array(64),c=new Array(64),d=new Array(65535),f=new Array(65535),h=new Array(64),p=new Array(64),g=[],m=0,y=7,b=new Array(64),v=new Array(64),k=new Array(64),j=new Array(256),I=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],P=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],$=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],N=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],C=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function w(E,V){for(var X=0,Q=0,D=new Array,Z=1;Z<=16;Z++){for(var L=1;L<=E[Z];L++)D[V[Q]]=[],D[V[Q]][0]=X,D[V[Q]][1]=Z,Q++,X++;X*=2}return D}function _(E){for(var V=E[0],X=E[1]-1;X>=0;)V&1<<X&&(m|=1<<y),X--,--y<0&&(m==255?(x(255),x(0)):x(m),y=7,m=0)}function x(E){g.push(E)}function S(E){x(E>>8&255),x(255&E)}function A(E,V,X,Q,D){for(var Z,L=D[0],O=D[240],G=function(yt,kt){var St,Tt,Lt,Xt,re,ue,ce,de,ve,Te,ie=0;for(ve=0;ve<8;++ve){St=yt[ie],Tt=yt[ie+1],Lt=yt[ie+2],Xt=yt[ie+3],re=yt[ie+4],ue=yt[ie+5],ce=yt[ie+6];var ze=St+(de=yt[ie+7]),me=St-de,ke=Tt+ce,we=Tt-ce,ne=Lt+ue,Be=Lt-ue,$e=Xt+re,Or=Xt-re,te=ze+$e,Sr=ze-$e,br=ke+ne,Ye=ke-ne;yt[ie]=te+br,yt[ie+4]=te-br;var Ve=.707106781*(Ye+Sr);yt[ie+2]=Sr+Ve,yt[ie+6]=Sr-Ve;var er=.382683433*((te=Or+Be)-(Ye=we+me)),cr=.5411961*te+er,mr=1.306562965*Ye+er,jr=.707106781*(br=Be+we),rr=me+jr,Fe=me-jr;yt[ie+5]=Fe+cr,yt[ie+3]=Fe-cr,yt[ie+1]=rr+mr,yt[ie+7]=rr-mr,ie+=8}for(ie=0,ve=0;ve<8;++ve){St=yt[ie],Tt=yt[ie+8],Lt=yt[ie+16],Xt=yt[ie+24],re=yt[ie+32],ue=yt[ie+40],ce=yt[ie+48];var Nr=St+(de=yt[ie+56]),Ue=St-de,Et=Tt+ce,qt=Tt-ce,ee=Lt+ue,Ce=Lt-ue,sr=Xt+re,Oe=Xt-re,Je=Nr+sr,Ke=Nr-sr,He=Et+ee,hr=Et-ee;yt[ie]=Je+He,yt[ie+32]=Je-He;var lr=.707106781*(hr+Ke);yt[ie+16]=Ke+lr,yt[ie+48]=Ke-lr;var fr=.382683433*((Je=Oe+Ce)-(hr=qt+Ue)),Xr=.5411961*Je+fr,Rr=1.306562965*hr+fr,en=.707106781*(He=Ce+qt),Qr=Ue+en,Lr=Ue-en;yt[ie+40]=Lr+Xr,yt[ie+24]=Lr-Xr,yt[ie+8]=Qr+Rr,yt[ie+56]=Qr-Rr,ie++}for(ve=0;ve<64;++ve)Te=yt[ve]*kt[ve],h[ve]=Te>0?Te+.5|0:Te-.5|0;return h}(E,V),nt=0;nt<64;++nt)p[U[nt]]=G[nt];var ct=p[0]-X;X=p[0],ct==0?_(Q[0]):(_(Q[f[Z=32767+ct]]),_(d[Z]));for(var ot=63;ot>0&&p[ot]==0;)ot--;if(ot==0)return _(L),X;for(var mt,pt=1;pt<=ot;){for(var st=pt;p[pt]==0&&pt<=ot;)++pt;var at=pt-st;if(at>=16){mt=at>>4;for(var vt=1;vt<=mt;++vt)_(O);at&=15}Z=32767+p[pt],_(D[(at<<4)+f[Z]]),_(d[Z]),pt++}return ot!=63&&_(L),X}function B(E){E=Math.min(Math.max(E,1),100),i!=E&&(function(V){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var D=o((X[Q]*V+50)/100);D=Math.min(Math.max(D,1),255),u[U[Q]]=D}for(var Z=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],L=0;L<64;L++){var O=o((Z[L]*V+50)/100);O=Math.min(Math.max(O,1),255),l[U[L]]=O}for(var G=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],nt=0,ct=0;ct<8;ct++)for(var ot=0;ot<8;ot++)a[nt]=1/(u[U[nt]]*G[ct]*G[ot]*8),c[nt]=1/(l[U[nt]]*G[ct]*G[ot]*8),nt++}(E<50?Math.floor(5e3/E):Math.floor(200-2*E)),i=E)}this.encode=function(E,V){V&&B(V),g=new Array,m=0,y=7,S(65496),S(65504),S(16),x(74),x(70),x(73),x(70),x(0),x(1),x(1),x(0),S(1),S(1),x(0),x(0),function(){S(65499),S(132),x(0);for(var Tt=0;Tt<64;Tt++)x(u[Tt]);x(1);for(var Lt=0;Lt<64;Lt++)x(l[Lt])}(),function(Tt,Lt){S(65472),S(17),x(8),S(Lt),S(Tt),x(3),x(1),x(17),x(0),x(2),x(17),x(1),x(3),x(17),x(1)}(E.width,E.height),function(){S(65476),S(418),x(0);for(var Tt=0;Tt<16;Tt++)x(P[Tt+1]);for(var Lt=0;Lt<=11;Lt++)x(z[Lt]);x(16);for(var Xt=0;Xt<16;Xt++)x(q[Xt+1]);for(var re=0;re<=161;re++)x($[re]);x(1);for(var ue=0;ue<16;ue++)x(F[ue+1]);for(var ce=0;ce<=11;ce++)x(T[ce]);x(17);for(var de=0;de<16;de++)x(N[de+1]);for(var ve=0;ve<=161;ve++)x(C[ve])}(),S(65498),S(12),x(3),x(1),x(0),x(2),x(17),x(3),x(17),x(0),x(63),x(0);var X=0,Q=0,D=0;m=0,y=7,this.encode.displayName="_encode_";for(var Z,L,O,G,nt,ct,ot,mt,pt,st=E.data,at=E.width,vt=E.height,yt=4*at,kt=0;kt<vt;){for(Z=0;Z<yt;){for(nt=yt*kt+Z,ot=-1,mt=0,pt=0;pt<64;pt++)ct=nt+(mt=pt>>3)*yt+(ot=4*(7&pt)),kt+mt>=vt&&(ct-=yt*(kt+1+mt-vt)),Z+ot>=yt&&(ct-=Z+ot-yt+4),L=st[ct++],O=st[ct++],G=st[ct++],b[pt]=(I[L]+I[O+256>>0]+I[G+512>>0]>>16)-128,v[pt]=(I[L+768>>0]+I[O+1024>>0]+I[G+1280>>0]>>16)-128,k[pt]=(I[L+1280>>0]+I[O+1536>>0]+I[G+1792>>0]>>16)-128;X=A(b,a,X,e,r),Q=A(v,c,Q,t,s),D=A(k,c,D,t,s),Z+=32}kt+=8}if(y>=0){var St=[];St[1]=y+1,St[0]=(1<<y+1)-1,_(St)}return S(65497),new Uint8Array(g)},n=n||50,function(){for(var E=String.fromCharCode,V=0;V<256;V++)j[V]=E(V)}(),e=w(P,z),t=w(F,T),r=w(q,$),s=w(N,C),function(){for(var E=1,V=2,X=1;X<=15;X++){for(var Q=E;Q<V;Q++)f[32767+Q]=X,d[32767+Q]=[],d[32767+Q][1]=X,d[32767+Q][0]=Q;for(var D=-(V-1);D<=-E;D++)f[32767+D]=X,d[32767+D]=[],d[32767+D][1]=X,d[32767+D][0]=V-1+D;E<<=1,V<<=1}}(),function(){for(var E=0;E<256;E++)I[E]=19595*E,I[E+256>>0]=38470*E,I[E+512>>0]=7471*E+32768,I[E+768>>0]=-11059*E,I[E+1024>>0]=-21709*E,I[E+1280>>0]=32768*E+8421375,I[E+1536>>0]=-27439*E,I[E+1792>>0]=-5329*E}(),B(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function fo(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function xb(n){function e(P){if(!P)throw Error("assert :P")}function t(P,z,q){for(var $=0;4>$;$++)if(P[z+$]!=q.charCodeAt($))return!0;return!1}function r(P,z,q,$,F){for(var T=0;T<F;T++)P[z+T]=q[$+T]}function s(P,z,q,$){for(var F=0;F<$;F++)P[z+F]=q}function i(P){return new Int32Array(P)}function o(P,z){for(var q=[],$=0;$<P;$++)q.push(new z);return q}function u(P,z){var q=[];return function $(F,T,N){for(var C=N[T],w=0;w<C&&(F.push(N.length>T+1?[]:new z),!(N.length<T+1));w++)$(F[w],T+1,N)}(q,0,P),q}var l=function(){var P=this;function z(M,H){for(var K=1<<H-1>>>0;M&K;)K>>>=1;return K?(M&K-1)+K:M}function q(M,H,K,et,ut){e(!(et%K));do M[H+(et-=K)]=ut;while(0<et)}function $(M,H,K,et,ut){if(e(2328>=ut),512>=ut)var ft=i(512);else if((ft=i(ut))==null)return 0;return function(dt,gt,bt,_t,Rt,Zt){var Jt,Wt,be=gt,oe=1<<bt,Dt=i(16),Ut=i(16);for(e(Rt!=0),e(_t!=null),e(dt!=null),e(0<bt),Wt=0;Wt<Rt;++Wt){if(15<_t[Wt])return 0;++Dt[_t[Wt]]}if(Dt[0]==Rt)return 0;for(Ut[1]=0,Jt=1;15>Jt;++Jt){if(Dt[Jt]>1<<Jt)return 0;Ut[Jt+1]=Ut[Jt]+Dt[Jt]}for(Wt=0;Wt<Rt;++Wt)Jt=_t[Wt],0<_t[Wt]&&(Zt[Ut[Jt]++]=Wt);if(Ut[15]==1)return(_t=new F).g=0,_t.value=Zt[0],q(dt,be,1,oe,_t),oe;var pe,_e=-1,ye=oe-1,tr=0,qe=1,yr=1,We=1<<bt;for(Wt=0,Jt=1,Rt=2;Jt<=bt;++Jt,Rt<<=1){if(qe+=yr<<=1,0>(yr-=Dt[Jt]))return 0;for(;0<Dt[Jt];--Dt[Jt])(_t=new F).g=Jt,_t.value=Zt[Wt++],q(dt,be+tr,Rt,We,_t),tr=z(tr,Jt)}for(Jt=bt+1,Rt=2;15>=Jt;++Jt,Rt<<=1){if(qe+=yr<<=1,0>(yr-=Dt[Jt]))return 0;for(;0<Dt[Jt];--Dt[Jt]){if(_t=new F,(tr&ye)!=_e){for(be+=We,pe=1<<(_e=Jt)-bt;15>_e&&!(0>=(pe-=Dt[_e]));)++_e,pe<<=1;oe+=We=1<<(pe=_e-bt),dt[gt+(_e=tr&ye)].g=pe+bt,dt[gt+_e].value=be-gt-_e}_t.g=Jt-bt,_t.value=Zt[Wt++],q(dt,be+(tr>>bt),Rt,We,_t),tr=z(tr,Jt)}}return qe!=2*Ut[15]-1?0:oe}(M,H,K,et,ut,ft)}function F(){this.value=this.g=0}function T(){this.value=this.g=0}function N(){this.G=o(5,F),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Dn,T)}function C(M,H,K,et){e(M!=null),e(H!=null),e(2147483648>et),M.Ca=254,M.I=0,M.b=-8,M.Ka=0,M.oa=H,M.pa=K,M.Jd=H,M.Yc=K+et,M.Zc=4<=et?K+et-4+1:K,Z(M)}function w(M,H){for(var K=0;0<H--;)K|=O(M,128)<<H;return K}function _(M,H){var K=w(M,H);return L(M)?-K:K}function x(M,H,K,et){var ut,ft=0;for(e(M!=null),e(H!=null),e(4294967288>et),M.Sb=et,M.Ra=0,M.u=0,M.h=0,4<et&&(et=4),ut=0;ut<et;++ut)ft+=H[K+ut]<<8*ut;M.Ra=ft,M.bb=et,M.oa=H,M.pa=K}function S(M){for(;8<=M.u&&M.bb<M.Sb;)M.Ra>>>=8,M.Ra+=M.oa[M.pa+M.bb]<<oo-8>>>0,++M.bb,M.u-=8;X(M)&&(M.h=1,M.u=0)}function A(M,H){if(e(0<=H),!M.h&&H<=cn){var K=V(M)&Oi[H];return M.u+=H,S(M),K}return M.h=1,M.u=0}function B(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function E(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(M){return M.Ra>>>(M.u&oo-1)>>>0}function X(M){return e(M.bb<=M.Sb),M.h||M.bb==M.Sb&&M.u>oo}function Q(M,H){M.u=H,M.h=X(M)}function D(M){M.u>=fi&&(e(M.u>=fi),S(M))}function Z(M){e(M!=null&&M.oa!=null),M.pa<M.Zc?(M.I=(M.oa[M.pa++]|M.I<<8)>>>0,M.b+=8):(e(M!=null&&M.oa!=null),M.pa<M.Yc?(M.b+=8,M.I=M.oa[M.pa++]|M.I<<8):M.Ka?M.b=0:(M.I<<=8,M.b+=8,M.Ka=1))}function L(M){return w(M,1)}function O(M,H){var K=M.Ca;0>M.b&&Z(M);var et=M.b,ut=K*H>>>8,ft=(M.I>>>et>ut)+0;for(ft?(K-=ut,M.I-=ut+1<<et>>>0):K=ut+1,et=K,ut=0;256<=et;)ut+=8,et>>=8;return et=7^ut+Pi[et],M.b-=et,M.Ca=(K<<et)-1,ft}function G(M,H,K){M[H+0]=K>>24&255,M[H+1]=K>>16&255,M[H+2]=K>>8&255,M[H+3]=K>>0&255}function nt(M,H){return M[H+0]<<0|M[H+1]<<8}function ct(M,H){return nt(M,H)|M[H+2]<<16}function ot(M,H){return nt(M,H)|nt(M,H+2)<<16}function mt(M,H){var K=1<<H;return e(M!=null),e(0<H),M.X=i(K),M.X==null?0:(M.Mb=32-H,M.Xa=H,1)}function pt(M,H){e(M!=null),e(H!=null),e(M.Xa==H.Xa),r(H.X,0,M.X,0,1<<H.Xa)}function st(){this.X=[],this.Xa=this.Mb=0}function at(M,H,K,et){e(K!=null),e(et!=null);var ut=K[0],ft=et[0];return ut==0&&(ut=(M*ft+H/2)/H),ft==0&&(ft=(H*ut+M/2)/M),0>=ut||0>=ft?0:(K[0]=ut,et[0]=ft,1)}function vt(M,H){return M+(1<<H)-1>>>H}function yt(M,H){return((4278255360&M)+(4278255360&H)>>>0&4278255360)+((16711935&M)+(16711935&H)>>>0&16711935)>>>0}function kt(M,H){P[H]=function(K,et,ut,ft,dt,gt,bt){var _t;for(_t=0;_t<dt;++_t){var Rt=P[M](gt[bt+_t-1],ut,ft+_t);gt[bt+_t]=yt(K[et+_t],Rt)}}}function St(){this.ud=this.hd=this.jd=0}function Tt(M,H){return((4278124286&(M^H))>>>1)+(M&H)>>>0}function Lt(M){return 0<=M&&256>M?M:0>M?0:255<M?255:void 0}function Xt(M,H){return Lt(M+(M-H+.5>>1))}function re(M,H,K){return Math.abs(H-K)-Math.abs(M-K)}function ue(M,H,K,et,ut,ft,dt){for(et=ft[dt-1],K=0;K<ut;++K)ft[dt+K]=et=yt(M[H+K],et)}function ce(M,H,K,et,ut){var ft;for(ft=0;ft<K;++ft){var dt=M[H+ft],gt=dt>>8&255,bt=16711935&(bt=(bt=16711935&dt)+((gt<<16)+gt));et[ut+ft]=(4278255360&dt)+bt>>>0}}function de(M,H){H.jd=M>>0&255,H.hd=M>>8&255,H.ud=M>>16&255}function ve(M,H,K,et,ut,ft){var dt;for(dt=0;dt<et;++dt){var gt=H[K+dt],bt=gt>>>8,_t=gt,Rt=255&(Rt=(Rt=gt>>>16)+((M.jd<<24>>24)*(bt<<24>>24)>>>5));_t=255&(_t=(_t=_t+((M.hd<<24>>24)*(bt<<24>>24)>>>5))+((M.ud<<24>>24)*(Rt<<24>>24)>>>5)),ut[ft+dt]=(4278255360&gt)+(Rt<<16)+_t}}function Te(M,H,K,et,ut){P[H]=function(ft,dt,gt,bt,_t,Rt,Zt,Jt,Wt){for(bt=Zt;bt<Jt;++bt)for(Zt=0;Zt<Wt;++Zt)_t[Rt++]=ut(gt[et(ft[dt++])])},P[M]=function(ft,dt,gt,bt,_t,Rt,Zt){var Jt=8>>ft.b,Wt=ft.Ea,be=ft.K[0],oe=ft.w;if(8>Jt)for(ft=(1<<ft.b)-1,oe=(1<<Jt)-1;dt<gt;++dt){var Dt,Ut=0;for(Dt=0;Dt<Wt;++Dt)Dt&ft||(Ut=et(bt[_t++])),Rt[Zt++]=ut(be[Ut&oe]),Ut>>=Jt}else P["VP8LMapColor"+K](bt,_t,be,oe,Rt,Zt,dt,gt,Wt)}}function ie(M,H,K,et,ut){for(K=H+K;H<K;){var ft=M[H++];et[ut++]=ft>>16&255,et[ut++]=ft>>8&255,et[ut++]=ft>>0&255}}function ze(M,H,K,et,ut){for(K=H+K;H<K;){var ft=M[H++];et[ut++]=ft>>16&255,et[ut++]=ft>>8&255,et[ut++]=ft>>0&255,et[ut++]=ft>>24&255}}function me(M,H,K,et,ut){for(K=H+K;H<K;){var ft=(dt=M[H++])>>16&240|dt>>12&15,dt=dt>>0&240|dt>>28&15;et[ut++]=ft,et[ut++]=dt}}function ke(M,H,K,et,ut){for(K=H+K;H<K;){var ft=(dt=M[H++])>>16&248|dt>>13&7,dt=dt>>5&224|dt>>3&31;et[ut++]=ft,et[ut++]=dt}}function we(M,H,K,et,ut){for(K=H+K;H<K;){var ft=M[H++];et[ut++]=ft>>0&255,et[ut++]=ft>>8&255,et[ut++]=ft>>16&255}}function ne(M,H,K,et,ut,ft){if(ft==0)for(K=H+K;H<K;)G(et,((ft=M[H++])[0]>>24|ft[1]>>8&65280|ft[2]<<8&16711680|ft[3]<<24)>>>0),ut+=32;else r(et,ut,M,H,K)}function Be(M,H){P[H][0]=P[M+"0"],P[H][1]=P[M+"1"],P[H][2]=P[M+"2"],P[H][3]=P[M+"3"],P[H][4]=P[M+"4"],P[H][5]=P[M+"5"],P[H][6]=P[M+"6"],P[H][7]=P[M+"7"],P[H][8]=P[M+"8"],P[H][9]=P[M+"9"],P[H][10]=P[M+"10"],P[H][11]=P[M+"11"],P[H][12]=P[M+"12"],P[H][13]=P[M+"13"],P[H][14]=P[M+"0"],P[H][15]=P[M+"0"]}function $e(M){return M==Op||M==Pp||M==Bh||M==Lp}function Or(){this.eb=[],this.size=this.A=this.fb=0}function te(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Sr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Or,this.f.kb=new te,this.sd=null}function br(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ye(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ve(M){return alert("todo:WebPSamplerProcessPlane"),M.T}function er(M,H){var K=M.T,et=H.ba.f.RGBA,ut=et.eb,ft=et.fb+M.ka*et.A,dt=qs[H.ba.S],gt=M.y,bt=M.O,_t=M.f,Rt=M.N,Zt=M.ea,Jt=M.W,Wt=H.cc,be=H.dc,oe=H.Mc,Dt=H.Nc,Ut=M.ka,pe=M.ka+M.T,_e=M.U,ye=_e+1>>1;for(Ut==0?dt(gt,bt,null,null,_t,Rt,Zt,Jt,_t,Rt,Zt,Jt,ut,ft,null,null,_e):(dt(H.ec,H.fc,gt,bt,Wt,be,oe,Dt,_t,Rt,Zt,Jt,ut,ft-et.A,ut,ft,_e),++K);Ut+2<pe;Ut+=2)Wt=_t,be=Rt,oe=Zt,Dt=Jt,Rt+=M.Rc,Jt+=M.Rc,ft+=2*et.A,dt(gt,(bt+=2*M.fa)-M.fa,gt,bt,Wt,be,oe,Dt,_t,Rt,Zt,Jt,ut,ft-et.A,ut,ft,_e);return bt+=M.fa,M.j+pe<M.o?(r(H.ec,H.fc,gt,bt,_e),r(H.cc,H.dc,_t,Rt,ye),r(H.Mc,H.Nc,Zt,Jt,ye),K--):1&pe||dt(gt,bt,null,null,_t,Rt,Zt,Jt,_t,Rt,Zt,Jt,ut,ft+et.A,null,null,_e),K}function cr(M,H,K){var et=M.F,ut=[M.J];if(et!=null){var ft=M.U,dt=H.ba.S,gt=dt==Fh||dt==Bh;H=H.ba.f.RGBA;var bt=[0],_t=M.ka;bt[0]=M.T,M.Kb&&(_t==0?--bt[0]:(--_t,ut[0]-=M.width),M.j+M.ka+M.T==M.o&&(bt[0]=M.o-M.j-_t));var Rt=H.eb;_t=H.fb+_t*H.A,M=Ne(et,ut[0],M.width,ft,bt,Rt,_t+(gt?0:3),H.A),e(K==bt),M&&$e(dt)&&Re(Rt,_t,gt,ft,bt,H.A)}return 0}function mr(M){var H=M.ma,K=H.ba.S,et=11>K,ut=K==Dh||K==Ih||K==Fh||K==Np||K==12||$e(K);if(H.memory=null,H.Ib=null,H.Jb=null,H.Nd=null,!Nl(H.Oa,M,ut?11:12))return 0;if(ut&&$e(K)&&Se(),M.da)alert("todo:use_scaling");else{if(et){if(H.Ib=Ve,M.Kb){if(K=M.U+1>>1,H.memory=i(M.U+2*K),H.memory==null)return 0;H.ec=H.memory,H.fc=0,H.cc=H.ec,H.dc=H.fc+M.U,H.Mc=H.cc,H.Nc=H.dc+K,H.Ib=er,Se()}}else alert("todo:EmitYUV");ut&&(H.Jb=cr,et&&Gt())}if(et&&!I1){for(M=0;256>M;++M)N3[M]=89858*(M-128)+Uh>>zh,L3[M]=-22014*(M-128)+Uh,P3[M]=-45773*(M-128),O3[M]=113618*(M-128)+Uh>>zh;for(M=Sc;M<Ip;++M)H=76283*(M-16)+Uh>>zh,R3[M-Sc]=Ni(H,255),D3[M-Sc]=Ni(H+8>>4,15);I1=1}return 1}function jr(M){var H=M.ma,K=M.U,et=M.T;return e(!(1&M.ka)),0>=K||0>=et?0:(K=H.Ib(M,H),H.Jb!=null&&H.Jb(M,H,K),H.Dc+=K,1)}function rr(M){M.ma.memory=null}function Fe(M,H,K,et){return A(M,8)!=47?0:(H[0]=A(M,14)+1,K[0]=A(M,14)+1,et[0]=A(M,1),A(M,3)!=0?0:!M.h)}function Nr(M,H){if(4>M)return M+1;var K=M-2>>1;return(2+(1&M)<<K)+A(H,K)+1}function Ue(M,H){return 120<H?H-120:1<=(K=((K=y3[H-1])>>4)*M+(8-(15&K)))?K:1;var K}function Et(M,H,K){var et=V(K),ut=M[H+=255&et].g-8;return 0<ut&&(Q(K,K.u+8),et=V(K),H+=M[H].value,H+=et&(1<<ut)-1),Q(K,K.u+M[H].g),M[H].value}function qt(M,H,K){return K.g+=M.g,K.value+=M.value<<H>>>0,e(8>=K.g),M.g}function ee(M,H,K){var et=M.xc;return e((H=et==0?0:M.vc[M.md*(K>>et)+(H>>et)])<M.Wb),M.Ya[H]}function Ce(M,H,K,et){var ut=M.ab,ft=M.c*H,dt=M.C;H=dt+H;var gt=K,bt=et;for(et=M.Ta,K=M.Ua;0<ut--;){var _t=M.gc[ut],Rt=dt,Zt=H,Jt=gt,Wt=bt,be=(bt=et,gt=K,_t.Ea);switch(e(Rt<Zt),e(Zt<=_t.nc),_t.hc){case 2:Us(Jt,Wt,(Zt-Rt)*be,bt,gt);break;case 0:var oe=Rt,Dt=Zt,Ut=bt,pe=gt,_e=(We=_t).Ea;oe==0&&(Pl(Jt,Wt,null,null,1,Ut,pe),ue(Jt,Wt+1,0,0,_e-1,Ut,pe+1),Wt+=_e,pe+=_e,++oe);for(var ye=1<<We.b,tr=ye-1,qe=vt(_e,We.b),yr=We.K,We=We.w+(oe>>We.b)*qe;oe<Dt;){var Jr=yr,sn=We,Gr=1;for(Ua(Jt,Wt,Ut,pe-_e,1,Ut,pe);Gr<_e;){var Wr=(Gr&~tr)+ye;Wr>_e&&(Wr=_e),(0,R[Jr[sn++]>>8&15])(Jt,Wt+ +Gr,Ut,pe+Gr-_e,Wr-Gr,Ut,pe+Gr),Gr=Wr}Wt+=_e,pe+=_e,++oe&tr||(We+=qe)}Zt!=_t.nc&&r(bt,gt-be,bt,gt+(Zt-Rt-1)*be,be);break;case 1:for(be=Jt,Dt=Wt,_e=(Jt=_t.Ea)-(pe=Jt&~(Ut=(Wt=1<<_t.b)-1)),oe=vt(Jt,_t.b),ye=_t.K,_t=_t.w+(Rt>>_t.b)*oe;Rt<Zt;){for(tr=ye,qe=_t,yr=new St,We=Dt+pe,Jr=Dt+Jt;Dt<We;)de(tr[qe++],yr),W(yr,be,Dt,Wt,bt,gt),Dt+=Wt,gt+=Wt;Dt<Jr&&(de(tr[qe++],yr),W(yr,be,Dt,_e,bt,gt),Dt+=_e,gt+=_e),++Rt&Ut||(_t+=oe)}break;case 3:if(Jt==bt&&Wt==gt&&0<_t.b){for(Dt=bt,Jt=be=gt+(Zt-Rt)*be-(pe=(Zt-Rt)*vt(_t.Ea,_t.b)),Wt=bt,Ut=gt,oe=[],pe=(_e=pe)-1;0<=pe;--pe)oe[pe]=Wt[Ut+pe];for(pe=_e-1;0<=pe;--pe)Dt[Jt+pe]=oe[pe];Li(_t,Rt,Zt,bt,be,bt,gt)}else Li(_t,Rt,Zt,Jt,Wt,bt,gt)}gt=et,bt=K}bt!=K&&r(et,K,gt,bt,ft)}function sr(M,H){var K=M.V,et=M.Ba+M.c*M.C,ut=H-M.C;if(e(H<=M.l.o),e(16>=ut),0<ut){var ft=M.l,dt=M.Ta,gt=M.Ua,bt=ft.width;if(Ce(M,ut,K,et),ut=gt=[gt],e((K=M.C)<(et=H)),e(ft.v<ft.va),et>ft.o&&(et=ft.o),K<ft.j){var _t=ft.j-K;K=ft.j,ut[0]+=_t*bt}if(K>=et?K=0:(ut[0]+=4*ft.v,ft.ka=K-ft.j,ft.U=ft.va-ft.v,ft.T=et-K,K=1),K){if(gt=gt[0],11>(K=M.ca).S){var Rt=K.f.RGBA,Zt=(et=K.S,ut=ft.U,ft=ft.T,_t=Rt.eb,Rt.A),Jt=ft;for(Rt=Rt.fb+M.Ma*Rt.A;0<Jt--;){var Wt=dt,be=gt,oe=ut,Dt=_t,Ut=Rt;switch(et){case qa:J(Wt,be,oe,Dt,Ut);break;case Dh:rt(Wt,be,oe,Dt,Ut);break;case Op:rt(Wt,be,oe,Dt,Ut),Re(Dt,Ut,0,oe,1,0);break;case E1:wt(Wt,be,oe,Dt,Ut);break;case Ih:ne(Wt,be,oe,Dt,Ut,1);break;case Pp:ne(Wt,be,oe,Dt,Ut,1),Re(Dt,Ut,0,oe,1,0);break;case Fh:ne(Wt,be,oe,Dt,Ut,0);break;case Bh:ne(Wt,be,oe,Dt,Ut,0),Re(Dt,Ut,1,oe,1,0);break;case Np:it(Wt,be,oe,Dt,Ut);break;case Lp:it(Wt,be,oe,Dt,Ut),xe(Dt,Ut,oe,1,0);break;case j1:ht(Wt,be,oe,Dt,Ut);break;default:e(0)}gt+=bt,Rt+=Zt}M.Ma+=ft}else alert("todo:EmitRescaledRowsYUVA");e(M.Ma<=K.height)}}M.C=H,e(M.C<=M.i)}function Oe(M){var H;if(0<M.ua)return 0;for(H=0;H<M.Wb;++H){var K=M.Ya[H].G,et=M.Ya[H].H;if(0<K[1][et[1]+0].g||0<K[2][et[2]+0].g||0<K[3][et[3]+0].g)return 0}return 1}function Je(M,H,K,et,ut,ft){if(M.Z!=0){var dt=M.qd,gt=M.rd;for(e($a[M.Z]!=null);H<K;++H)$a[M.Z](dt,gt,et,ut,et,ut,ft),dt=et,gt=ut,ut+=ft;M.qd=dt,M.rd=gt}}function Ke(M,H){var K=M.l.ma,et=K.Z==0||K.Z==1?M.l.j:M.C;if(et=M.C<et?et:M.C,e(H<=M.l.o),H>et){var ut=M.l.width,ft=K.ca,dt=K.tb+ut*et,gt=M.V,bt=M.Ba+M.c*et,_t=M.gc;e(M.ab==1),e(_t[0].hc==3),xs(_t[0],et,H,gt,bt,ft,dt),Je(K,et,H,ft,dt,ut)}M.C=M.Ma=H}function He(M,H,K,et,ut,ft,dt){var gt=M.$/et,bt=M.$%et,_t=M.m,Rt=M.s,Zt=K+M.$,Jt=Zt;ut=K+et*ut;var Wt=K+et*ft,be=280+Rt.ua,oe=M.Pb?gt:16777216,Dt=0<Rt.ua?Rt.Wa:null,Ut=Rt.wc,pe=Zt<Wt?ee(Rt,bt,gt):null;e(M.C<ft),e(Wt<=ut);var _e=!1;t:for(;;){for(;_e||Zt<Wt;){var ye=0;if(gt>=oe){var tr=Zt-K;e((oe=M).Pb),oe.wd=oe.m,oe.xd=tr,0<oe.s.ua&&pt(oe.s.Wa,oe.s.vb),oe=gt+v3}if(bt&Ut||(pe=ee(Rt,bt,gt)),e(pe!=null),pe.Qb&&(H[Zt]=pe.qb,_e=!0),!_e)if(D(_t),pe.jc){ye=_t,tr=H;var qe=Zt,yr=pe.pd[V(ye)&Dn-1];e(pe.jc),256>yr.g?(Q(ye,ye.u+yr.g),tr[qe]=yr.value,ye=0):(Q(ye,ye.u+yr.g-256),e(256<=yr.value),ye=yr.value),ye==0&&(_e=!0)}else ye=Et(pe.G[0],pe.H[0],_t);if(_t.h)break;if(_e||256>ye){if(!_e)if(pe.nd)H[Zt]=(pe.qb|ye<<8)>>>0;else{if(D(_t),_e=Et(pe.G[1],pe.H[1],_t),D(_t),tr=Et(pe.G[2],pe.H[2],_t),qe=Et(pe.G[3],pe.H[3],_t),_t.h)break;H[Zt]=(qe<<24|_e<<16|ye<<8|tr)>>>0}if(_e=!1,++Zt,++bt>=et&&(bt=0,++gt,dt!=null&&gt<=ft&&!(gt%16)&&dt(M,gt),Dt!=null))for(;Jt<Zt;)ye=H[Jt++],Dt.X[(506832829*ye&4294967295)>>>Dt.Mb]=ye}else if(280>ye){if(ye=Nr(ye-256,_t),tr=Et(pe.G[4],pe.H[4],_t),D(_t),tr=Ue(et,tr=Nr(tr,_t)),_t.h)break;if(Zt-K<tr||ut-Zt<ye)break t;for(qe=0;qe<ye;++qe)H[Zt+qe]=H[Zt+qe-tr];for(Zt+=ye,bt+=ye;bt>=et;)bt-=et,++gt,dt!=null&&gt<=ft&&!(gt%16)&&dt(M,gt);if(e(Zt<=ut),bt&Ut&&(pe=ee(Rt,bt,gt)),Dt!=null)for(;Jt<Zt;)ye=H[Jt++],Dt.X[(506832829*ye&4294967295)>>>Dt.Mb]=ye}else{if(!(ye<be))break t;for(_e=ye-280,e(Dt!=null);Jt<Zt;)ye=H[Jt++],Dt.X[(506832829*ye&4294967295)>>>Dt.Mb]=ye;ye=Zt,e(!(_e>>>(tr=Dt).Xa)),H[ye]=tr.X[_e],_e=!0}_e||e(_t.h==X(_t))}if(M.Pb&&_t.h&&Zt<ut)e(M.m.h),M.a=5,M.m=M.wd,M.$=M.xd,0<M.s.ua&&pt(M.s.vb,M.s.Wa);else{if(_t.h)break t;dt!=null&&dt(M,gt>ft?ft:gt),M.a=0,M.$=Zt-K}return 1}return M.a=3,0}function hr(M){e(M!=null),M.vc=null,M.yc=null,M.Ya=null;var H=M.Wa;H!=null&&(H.X=null),M.vb=null,e(M!=null)}function lr(){var M=new Qo;return M==null?null:(M.a=0,M.xb=O1,Be("Predictor","VP8LPredictors"),Be("Predictor","VP8LPredictors_C"),Be("PredictorAdd","VP8LPredictorsAdd"),Be("PredictorAdd","VP8LPredictorsAdd_C"),Us=ce,W=ve,J=ie,rt=ze,it=me,ht=ke,wt=we,P.VP8LMapColor32b=ws,P.VP8LMapColor8b=Ll,M)}function fr(M,H,K,et,ut){var ft=1,dt=[M],gt=[H],bt=et.m,_t=et.s,Rt=null,Zt=0;t:for(;;){if(K)for(;ft&&A(bt,1);){var Jt=dt,Wt=gt,be=et,oe=1,Dt=be.m,Ut=be.gc[be.ab],pe=A(Dt,2);if(be.Oc&1<<pe)ft=0;else{switch(be.Oc|=1<<pe,Ut.hc=pe,Ut.Ea=Jt[0],Ut.nc=Wt[0],Ut.K=[null],++be.ab,e(4>=be.ab),pe){case 0:case 1:Ut.b=A(Dt,3)+2,oe=fr(vt(Ut.Ea,Ut.b),vt(Ut.nc,Ut.b),0,be,Ut.K),Ut.K=Ut.K[0];break;case 3:var _e,ye=A(Dt,8)+1,tr=16<ye?0:4<ye?1:2<ye?2:3;if(Jt[0]=vt(Ut.Ea,tr),Ut.b=tr,_e=oe=fr(ye,1,0,be,Ut.K)){var qe,yr=ye,We=Ut,Jr=1<<(8>>We.b),sn=i(Jr);if(sn==null)_e=0;else{var Gr=We.K[0],Wr=We.w;for(sn[0]=We.K[0][0],qe=1;qe<1*yr;++qe)sn[qe]=yt(Gr[Wr+qe],sn[qe-1]);for(;qe<4*Jr;++qe)sn[qe]=0;We.K[0]=null,We.K[0]=sn,_e=1}}oe=_e;break;case 2:break;default:e(0)}ft=oe}}if(dt=dt[0],gt=gt[0],ft&&A(bt,1)&&!(ft=1<=(Zt=A(bt,4))&&11>=Zt)){et.a=3;break t}var mn;if(mn=ft)e:{var hn,Br,Zn,ss=et,Jn=dt,os=gt,on=Zt,_s=K,Ss=ss.m,di=ss.s,xi=[null],Xi=1,Hs=0,Po=b3[on];r:for(;;){if(_s&&A(Ss,1)){var pi=A(Ss,3)+2,ia=vt(Jn,pi),Rl=vt(os,pi),du=ia*Rl;if(!fr(ia,Rl,0,ss,xi))break r;for(xi=xi[0],di.xc=pi,hn=0;hn<du;++hn){var Va=xi[hn]>>8&65535;xi[hn]=Va,Va>=Xi&&(Xi=Va+1)}}if(Ss.h)break r;for(Br=0;5>Br;++Br){var In=M1[Br];!Br&&0<on&&(In+=1<<on),Hs<In&&(Hs=In)}var Fp=o(Xi*Po,F),z1=Xi,U1=o(z1,N);if(U1==null)var Hh=null;else e(65536>=z1),Hh=U1;var kc=i(Hs);if(Hh==null||kc==null||Fp==null){ss.a=1;break r}var $h=Fp;for(hn=Zn=0;hn<Xi;++hn){var lo=Hh[hn],pu=lo.G,mu=lo.H,q1=0,Vh=1,H1=0;for(Br=0;5>Br;++Br){In=M1[Br],pu[Br]=$h,mu[Br]=Zn,!Br&&0<on&&(In+=1<<on);i:{var Wh,Bp=In,Xh=ss,Cc=kc,B3=$h,z3=Zn,zp=0,Wa=Xh.m,U3=A(Wa,1);if(s(Cc,0,0,Bp),U3){var q3=A(Wa,1)+1,H3=A(Wa,1),$1=A(Wa,H3==0?1:8);Cc[$1]=1,q3==2&&(Cc[$1=A(Wa,8)]=1);var Yh=1}else{var V1=i(19),W1=A(Wa,4)+4;if(19<W1){Xh.a=3;var Gh=0;break i}for(Wh=0;Wh<W1;++Wh)V1[g3[Wh]]=A(Wa,3);var Up=void 0,Tc=void 0,X1=Xh,$3=V1,Kh=Bp,Y1=Cc,qp=0,Xa=X1.m,G1=8,K1=o(128,F);n:for(;$(K1,0,7,$3,19);){if(A(Xa,1)){var V3=2+2*A(Xa,3);if((Up=2+A(Xa,V3))>Kh)break n}else Up=Kh;for(Tc=0;Tc<Kh&&Up--;){D(Xa);var Z1=K1[0+(127&V(Xa))];Q(Xa,Xa.u+Z1.g);var gu=Z1.value;if(16>gu)Y1[Tc++]=gu,gu!=0&&(G1=gu);else{var W3=gu==16,J1=gu-16,X3=p3[J1],Q1=A(Xa,d3[J1])+X3;if(Tc+Q1>Kh)break n;for(var Y3=W3?G1:0;0<Q1--;)Y1[Tc++]=Y3}}qp=1;break n}qp||(X1.a=3),Yh=qp}(Yh=Yh&&!Wa.h)&&(zp=$(B3,z3,8,Cc,Bp)),Yh&&zp!=0?Gh=zp:(Xh.a=3,Gh=0)}if(Gh==0)break r;if(Vh&&m3[Br]==1&&(Vh=$h[Zn].g==0),q1+=$h[Zn].g,Zn+=Gh,3>=Br){var Ac,Hp=kc[0];for(Ac=1;Ac<In;++Ac)kc[Ac]>Hp&&(Hp=kc[Ac]);H1+=Hp}}if(lo.nd=Vh,lo.Qb=0,Vh&&(lo.qb=(pu[3][mu[3]+0].value<<24|pu[1][mu[1]+0].value<<16|pu[2][mu[2]+0].value)>>>0,q1==0&&256>pu[0][mu[0]+0].value&&(lo.Qb=1,lo.qb+=pu[0][mu[0]+0].value<<8)),lo.jc=!lo.Qb&&6>H1,lo.jc){var Zh,sa=lo;for(Zh=0;Zh<Dn;++Zh){var Ya=Zh,Ga=sa.pd[Ya],Jh=sa.G[0][sa.H[0]+Ya];256<=Jh.value?(Ga.g=Jh.g+256,Ga.value=Jh.value):(Ga.g=0,Ga.value=0,Ya>>=qt(Jh,8,Ga),Ya>>=qt(sa.G[1][sa.H[1]+Ya],16,Ga),Ya>>=qt(sa.G[2][sa.H[2]+Ya],0,Ga),qt(sa.G[3][sa.H[3]+Ya],24,Ga))}}}di.vc=xi,di.Wb=Xi,di.Ya=Hh,di.yc=Fp,mn=1;break e}mn=0}if(!(ft=mn)){et.a=3;break t}if(0<Zt){if(_t.ua=1<<Zt,!mt(_t.Wa,Zt)){et.a=1,ft=0;break t}}else _t.ua=0;var $p=et,t2=dt,G3=gt,Vp=$p.s,Wp=Vp.xc;if($p.c=t2,$p.i=G3,Vp.md=vt(t2,Wp),Vp.wc=Wp==0?-1:(1<<Wp)-1,K){et.xb=T3;break t}if((Rt=i(dt*gt))==null){et.a=1,ft=0;break t}ft=(ft=He(et,Rt,0,dt,gt,gt,null))&&!bt.h;break t}return ft?(ut!=null?ut[0]=Rt:(e(Rt==null),e(K)),et.$=0,K||hr(_t)):hr(_t),ft}function Xr(M,H){var K=M.c*M.i,et=K+H+16*H;return e(M.c<=H),M.V=i(et),M.V==null?(M.Ta=null,M.Ua=0,M.a=1,0):(M.Ta=M.V,M.Ua=M.Ba+K+H,1)}function Rr(M,H){var K=M.C,et=H-K,ut=M.V,ft=M.Ba+M.c*K;for(e(H<=M.l.o);0<et;){var dt=16<et?16:et,gt=M.l.ma,bt=M.l.width,_t=bt*dt,Rt=gt.ca,Zt=gt.tb+bt*K,Jt=M.Ta,Wt=M.Ua;Ce(M,dt,ut,ft),or(Jt,Wt,Rt,Zt,_t),Je(gt,K,K+dt,Rt,Zt,bt),et-=dt,ut+=dt*M.c,K+=dt}e(K==H),M.C=M.Ma=H}function en(){this.ub=this.yd=this.td=this.Rb=0}function Qr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Lr(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function xt(){this.Yb=function(){var M=[];return function H(K,et,ut){for(var ft=ut[et],dt=0;dt<ft&&(K.push(ut.length>et+1?[]:0),!(ut.length<et+1));dt++)H(K[dt],et+1,ut)}(M,0,[3,11]),M}()}function Yt(){this.jb=i(3),this.Wc=u([4,8],xt),this.Xc=u([4,17],xt)}function he(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function ge(){this.ld=this.La=this.dd=this.tc=0}function Ze(){this.Na=this.la=0}function je(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Pe(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ar(){this.uc=this.M=this.Nb=0,this.wa=Array(new ge),this.Y=0,this.ya=Array(new Pe),this.aa=0,this.l=new ur}function wr(){this.y=i(16),this.f=i(8),this.ea=i(8)}function kr(){this.cb=this.a=0,this.sc="",this.m=new B,this.Od=new en,this.Kc=new Qr,this.ed=new he,this.Qa=new Lr,this.Ic=this.$c=this.Aa=0,this.D=new Ar,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,B),this.ia=0,this.pb=o(4,je),this.Pa=new Yt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new wr),this.Hd=0,this.rb=Array(new Ze),this.sb=0,this.wa=Array(new ge),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Pe),this.L=this.aa=0,this.gd=u([4,2],ge),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ur(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Qe(){var M=new kr;return M!=null&&(M.a=0,M.sc="OK",M.cb=0,M.Xb=0,_c||(_c=rn)),M}function gr(M,H,K){return M.a==0&&(M.a=H,M.sc=K,M.cb=0),0}function Hr(M,H,K){return 3<=K&&M[H+0]==157&&M[H+1]==1&&M[H+2]==42}function Yr(M,H){if(M==null)return 0;if(M.a=0,M.sc="OK",H==null)return gr(M,2,"null VP8Io passed to VP8GetHeaders()");var K=H.data,et=H.w,ut=H.ha;if(4>ut)return gr(M,7,"Truncated header.");var ft=K[et+0]|K[et+1]<<8|K[et+2]<<16,dt=M.Od;if(dt.Rb=!(1&ft),dt.td=ft>>1&7,dt.yd=ft>>4&1,dt.ub=ft>>5,3<dt.td)return gr(M,3,"Incorrect keyframe parameters.");if(!dt.yd)return gr(M,4,"Frame not displayable.");et+=3,ut-=3;var gt=M.Kc;if(dt.Rb){if(7>ut)return gr(M,7,"cannot parse picture header");if(!Hr(K,et,ut))return gr(M,3,"Bad code word");gt.c=16383&(K[et+4]<<8|K[et+3]),gt.Td=K[et+4]>>6,gt.i=16383&(K[et+6]<<8|K[et+5]),gt.Ud=K[et+6]>>6,et+=7,ut-=7,M.za=gt.c+15>>4,M.Ub=gt.i+15>>4,H.width=gt.c,H.height=gt.i,H.Da=0,H.j=0,H.v=0,H.va=H.width,H.o=H.height,H.da=0,H.ib=H.width,H.hb=H.height,H.U=H.width,H.T=H.height,s((ft=M.Pa).jb,0,255,ft.jb.length),e((ft=M.Qa)!=null),ft.Cb=0,ft.Bb=0,ft.Fb=1,s(ft.Zb,0,0,ft.Zb.length),s(ft.Lb,0,0,ft.Lb)}if(dt.ub>ut)return gr(M,7,"bad partition length");C(ft=M.m,K,et,dt.ub),et+=dt.ub,ut-=dt.ub,dt.Rb&&(gt.Ld=L(ft),gt.Kd=L(ft)),gt=M.Qa;var bt,_t=M.Pa;if(e(ft!=null),e(gt!=null),gt.Cb=L(ft),gt.Cb){if(gt.Bb=L(ft),L(ft)){for(gt.Fb=L(ft),bt=0;4>bt;++bt)gt.Zb[bt]=L(ft)?_(ft,7):0;for(bt=0;4>bt;++bt)gt.Lb[bt]=L(ft)?_(ft,6):0}if(gt.Bb)for(bt=0;3>bt;++bt)_t.jb[bt]=L(ft)?w(ft,8):255}else gt.Bb=0;if(ft.Ka)return gr(M,3,"cannot parse segment header");if((gt=M.ed).zd=L(ft),gt.Tb=w(ft,6),gt.wb=w(ft,3),gt.Pc=L(ft),gt.Pc&&L(ft)){for(_t=0;4>_t;++_t)L(ft)&&(gt.vd[_t]=_(ft,6));for(_t=0;4>_t;++_t)L(ft)&&(gt.od[_t]=_(ft,6))}if(M.L=gt.Tb==0?0:gt.zd?1:2,ft.Ka)return gr(M,3,"cannot parse filter header");var Rt=ut;if(ut=bt=et,et=bt+Rt,gt=Rt,M.Xb=(1<<w(M.m,2))-1,Rt<3*(_t=M.Xb))K=7;else{for(bt+=3*_t,gt-=3*_t,Rt=0;Rt<_t;++Rt){var Zt=K[ut+0]|K[ut+1]<<8|K[ut+2]<<16;Zt>gt&&(Zt=gt),C(M.Jc[+Rt],K,bt,Zt),bt+=Zt,gt-=Zt,ut+=3}C(M.Jc[+_t],K,bt,gt),K=bt<et?0:5}if(K!=0)return gr(M,K,"cannot parse partitions");for(K=w(bt=M.m,7),ut=L(bt)?_(bt,4):0,et=L(bt)?_(bt,4):0,gt=L(bt)?_(bt,4):0,_t=L(bt)?_(bt,4):0,bt=L(bt)?_(bt,4):0,Rt=M.Qa,Zt=0;4>Zt;++Zt){if(Rt.Cb){var Jt=Rt.Zb[Zt];Rt.Fb||(Jt+=K)}else{if(0<Zt){M.pb[Zt]=M.pb[0];continue}Jt=K}var Wt=M.pb[Zt];Wt.Sc[0]=Rp[Ni(Jt+ut,127)],Wt.Sc[1]=Dp[Ni(Jt+0,127)],Wt.Eb[0]=2*Rp[Ni(Jt+et,127)],Wt.Eb[1]=101581*Dp[Ni(Jt+gt,127)]>>16,8>Wt.Eb[1]&&(Wt.Eb[1]=8),Wt.Qc[0]=Rp[Ni(Jt+_t,117)],Wt.Qc[1]=Dp[Ni(Jt+bt,127)],Wt.lc=Jt+bt}if(!dt.Rb)return gr(M,4,"Not a key frame.");for(L(ft),dt=M.Pa,K=0;4>K;++K){for(ut=0;8>ut;++ut)for(et=0;3>et;++et)for(gt=0;11>gt;++gt)_t=O(ft,k3[K][ut][et][gt])?w(ft,8):_3[K][ut][et][gt],dt.Wc[K][ut].Yb[et][gt]=_t;for(ut=0;17>ut;++ut)dt.Xc[K][ut]=dt.Wc[K][C3[ut]]}return M.kc=L(ft),M.kc&&(M.Bd=w(ft,8)),M.cb=1}function rn(M,H,K,et,ut,ft,dt){var gt=H[ut].Yb[K];for(K=0;16>ut;++ut){if(!O(M,gt[K+0]))return ut;for(;!O(M,gt[K+1]);)if(gt=H[++ut].Yb[0],K=0,ut==16)return 16;var bt=H[ut+1].Yb;if(O(M,gt[K+2])){var _t=M,Rt=0;if(O(_t,(Jt=gt)[(Zt=K)+3]))if(O(_t,Jt[Zt+6])){for(gt=0,Zt=2*(Rt=O(_t,Jt[Zt+8]))+(Jt=O(_t,Jt[Zt+9+Rt])),Rt=0,Jt=w3[Zt];Jt[gt];++gt)Rt+=Rt+O(_t,Jt[gt]);Rt+=3+(8<<Zt)}else O(_t,Jt[Zt+7])?(Rt=7+2*O(_t,165),Rt+=O(_t,145)):Rt=5+O(_t,159);else Rt=O(_t,Jt[Zt+4])?3+O(_t,Jt[Zt+5]):2;gt=bt[2]}else Rt=1,gt=bt[1];bt=dt+x3[ut],0>(_t=M).b&&Z(_t);var Zt,Jt=_t.b,Wt=(Zt=_t.Ca>>1)-(_t.I>>Jt)>>31;--_t.b,_t.Ca+=Wt,_t.Ca|=1,_t.I-=(Zt+1&Wt)<<Jt,ft[bt]=((Rt^Wt)-Wt)*et[(0<ut)+0]}return 16}function Tn(M){var H=M.rb[M.sb-1];H.la=0,H.Na=0,s(M.zc,0,0,M.zc.length),M.ja=0}function li(M,H){if(M==null)return 0;if(H==null)return gr(M,2,"NULL VP8Io parameter in VP8Decode().");if(!M.cb&&!Yr(M,H))return 0;if(e(M.cb),H.ac==null||H.ac(H)){H.ob&&(M.L=0);var K=qh[M.L];if(M.L==2?(M.yb=0,M.zb=0):(M.yb=H.v-K>>4,M.zb=H.j-K>>4,0>M.yb&&(M.yb=0),0>M.zb&&(M.zb=0)),M.Va=H.o+15+K>>4,M.Hb=H.va+15+K>>4,M.Hb>M.za&&(M.Hb=M.za),M.Va>M.Ub&&(M.Va=M.Ub),0<M.L){var et=M.ed;for(K=0;4>K;++K){var ut;if(M.Qa.Cb){var ft=M.Qa.Lb[K];M.Qa.Fb||(ft+=et.Tb)}else ft=et.Tb;for(ut=0;1>=ut;++ut){var dt=M.gd[K][ut],gt=ft;if(et.Pc&&(gt+=et.vd[0],ut&&(gt+=et.od[0])),0<(gt=0>gt?0:63<gt?63:gt)){var bt=gt;0<et.wb&&(bt=4<et.wb?bt>>2:bt>>1)>9-et.wb&&(bt=9-et.wb),1>bt&&(bt=1),dt.dd=bt,dt.tc=2*gt+bt,dt.ld=40<=gt?2:15<=gt?1:0}else dt.tc=0;dt.La=ut}}}K=0}else gr(M,6,"Frame setup failed"),K=M.a;if(K=K==0){if(K){M.$c=0,0<M.Aa||(M.Ic=F3);t:{K=M.Ic,et=4*(bt=M.za);var _t=32*bt,Rt=bt+1,Zt=0<M.L?bt*(0<M.Aa?2:1):0,Jt=(M.Aa==2?2:1)*bt;if((dt=et+832+(ut=3*(16*K+qh[M.L])/2*_t)+(ft=M.Fa!=null&&0<M.Fa.length?M.Kc.c*M.Kc.i:0))!=dt)K=0;else{if(dt>M.Vb){if(M.Vb=0,M.Ec=i(dt),M.Fc=0,M.Ec==null){K=gr(M,1,"no memory during frame initialization.");break t}M.Vb=dt}dt=M.Ec,gt=M.Fc,M.Ac=dt,M.Bc=gt,gt+=et,M.Gd=o(_t,wr),M.Hd=0,M.rb=o(Rt+1,Ze),M.sb=1,M.wa=Zt?o(Zt,ge):null,M.Y=0,M.D.Nb=0,M.D.wa=M.wa,M.D.Y=M.Y,0<M.Aa&&(M.D.Y+=bt),e(!0),M.oc=dt,M.pc=gt,gt+=832,M.ya=o(Jt,Pe),M.aa=0,M.D.ya=M.ya,M.D.aa=M.aa,M.Aa==2&&(M.D.aa+=bt),M.R=16*bt,M.B=8*bt,bt=(_t=qh[M.L])*M.R,_t=_t/2*M.B,M.sa=dt,M.ta=gt+bt,M.qa=M.sa,M.ra=M.ta+16*K*M.R+_t,M.Ha=M.qa,M.Ia=M.ra+8*K*M.B+_t,M.$c=0,gt+=ut,M.mb=ft?dt:null,M.nb=ft?gt:null,e(gt+ft<=M.Fc+M.Vb),Tn(M),s(M.Ac,M.Bc,0,et),K=1}}if(K){if(H.ka=0,H.y=M.sa,H.O=M.ta,H.f=M.qa,H.N=M.ra,H.ea=M.Ha,H.Vd=M.Ia,H.fa=M.R,H.Rc=M.B,H.F=null,H.J=0,!Un){for(K=-255;255>=K;++K)dr[255+K]=0>K?-K:K;for(K=-1020;1020>=K;++K)Er[1020+K]=-128>K?-128:127<K?127:K;for(K=-112;112>=K;++K)ni[112+K]=-16>K?-16:15<K?15:K;for(K=-255;510>=K;++K)xr[255+K]=0>K?0:255<K?255:K;Un=1}At=Ln,Nt=Ir,$t=bi,jt=Ei,Ht=Os,Mt=Dr,Pt=Ra,zt=Is,Bt=fu,Vt=jl,Kt=Da,Qt=io,se=Fs,fe=Ia,Me=La,Ie=Rs,Ae=no,Ee=xc,ao[0]=Mi,ao[1]=rs,ao[2]=dn,ao[3]=ei,ao[4]=jo,ao[5]=Vi,ao[6]=Oa,ao[7]=Al,ao[8]=El,ao[9]=ns,Ha[0]=ji,Ha[1]=eo,Ha[2]=hi,Ha[3]=vi,Ha[4]=xn,Ha[5]=wi,Ha[6]=Ps,na[0]=Ls,na[1]=Fr,na[2]=uu,na[3]=Xo,na[4]=Yo,na[5]=cu,na[6]=ro,K=1}else K=0}K&&(K=function(Wt,be){for(Wt.M=0;Wt.M<Wt.Va;++Wt.M){var oe,Dt=Wt.Jc[Wt.M&Wt.Xb],Ut=Wt.m,pe=Wt;for(oe=0;oe<pe.za;++oe){var _e=Ut,ye=pe,tr=ye.Ac,qe=ye.Bc+4*oe,yr=ye.zc,We=ye.ya[ye.aa+oe];if(ye.Qa.Bb?We.$b=O(_e,ye.Pa.jb[0])?2+O(_e,ye.Pa.jb[2]):O(_e,ye.Pa.jb[1]):We.$b=0,ye.kc&&(We.Ad=O(_e,ye.Bd)),We.Za=!O(_e,145)+0,We.Za){var Jr=We.Ob,sn=0;for(ye=0;4>ye;++ye){var Gr,Wr=yr[0+ye];for(Gr=0;4>Gr;++Gr){Wr=S3[tr[qe+Gr]][Wr];for(var mn=N1[O(_e,Wr[0])];0<mn;)mn=N1[2*mn+O(_e,Wr[mn])];Wr=-mn,tr[qe+Gr]=Wr}r(Jr,sn,tr,qe,4),sn+=4,yr[0+ye]=Wr}}else Wr=O(_e,156)?O(_e,128)?1:3:O(_e,163)?2:0,We.Ob[0]=Wr,s(tr,qe,Wr,4),s(yr,0,Wr,4);We.Dd=O(_e,142)?O(_e,114)?O(_e,183)?1:3:2:0}if(pe.m.Ka)return gr(Wt,7,"Premature end-of-partition0 encountered.");for(;Wt.ja<Wt.za;++Wt.ja){if(pe=Dt,_e=(Ut=Wt).rb[Ut.sb-1],tr=Ut.rb[Ut.sb+Ut.ja],oe=Ut.ya[Ut.aa+Ut.ja],qe=Ut.kc?oe.Ad:0)_e.la=tr.la=0,oe.Za||(_e.Na=tr.Na=0),oe.Hc=0,oe.Gc=0,oe.ia=0;else{var hn,Br;if(_e=tr,tr=pe,qe=Ut.Pa.Xc,yr=Ut.ya[Ut.aa+Ut.ja],We=Ut.pb[yr.$b],ye=yr.ad,Jr=0,sn=Ut.rb[Ut.sb-1],Wr=Gr=0,s(ye,Jr,0,384),yr.Za)var Zn=0,ss=qe[3];else{mn=i(16);var Jn=_e.Na+sn.Na;if(Jn=_c(tr,qe[1],Jn,We.Eb,0,mn,0),_e.Na=sn.Na=(0<Jn)+0,1<Jn)At(mn,0,ye,Jr);else{var os=mn[0]+3>>3;for(mn=0;256>mn;mn+=16)ye[Jr+mn]=os}Zn=1,ss=qe[0]}var on=15&_e.la,_s=15&sn.la;for(mn=0;4>mn;++mn){var Ss=1&_s;for(os=Br=0;4>os;++os)on=on>>1|(Ss=(Jn=_c(tr,ss,Jn=Ss+(1&on),We.Sc,Zn,ye,Jr))>Zn)<<7,Br=Br<<2|(3<Jn?3:1<Jn?2:ye[Jr+0]!=0),Jr+=16;on>>=4,_s=_s>>1|Ss<<7,Gr=(Gr<<8|Br)>>>0}for(ss=on,Zn=_s>>4,hn=0;4>hn;hn+=2){for(Br=0,on=_e.la>>4+hn,_s=sn.la>>4+hn,mn=0;2>mn;++mn){for(Ss=1&_s,os=0;2>os;++os)Jn=Ss+(1&on),on=on>>1|(Ss=0<(Jn=_c(tr,qe[2],Jn,We.Qc,0,ye,Jr)))<<3,Br=Br<<2|(3<Jn?3:1<Jn?2:ye[Jr+0]!=0),Jr+=16;on>>=2,_s=_s>>1|Ss<<5}Wr|=Br<<4*hn,ss|=on<<4<<hn,Zn|=(240&_s)<<hn}_e.la=ss,sn.la=Zn,yr.Hc=Gr,yr.Gc=Wr,yr.ia=43690&Wr?0:We.ia,qe=!(Gr|Wr)}if(0<Ut.L&&(Ut.wa[Ut.Y+Ut.ja]=Ut.gd[oe.$b][oe.Za],Ut.wa[Ut.Y+Ut.ja].La|=!qe),pe.Ka)return gr(Wt,7,"Premature end-of-file encountered.")}if(Tn(Wt),Ut=be,pe=1,oe=(Dt=Wt).D,_e=0<Dt.L&&Dt.M>=Dt.zb&&Dt.M<=Dt.Va,Dt.Aa==0)t:{if(oe.M=Dt.M,oe.uc=_e,Ba(Dt,oe),pe=1,oe=(Br=Dt.D).Nb,_e=(Wr=qh[Dt.L])*Dt.R,tr=Wr/2*Dt.B,mn=16*oe*Dt.R,os=8*oe*Dt.B,qe=Dt.sa,yr=Dt.ta-_e+mn,We=Dt.qa,ye=Dt.ra-tr+os,Jr=Dt.Ha,sn=Dt.Ia-tr+os,_s=(on=Br.M)==0,Gr=on>=Dt.Va-1,Dt.Aa==2&&Ba(Dt,Br),Br.uc)for(Ss=(Jn=Dt).D.M,e(Jn.D.uc),Br=Jn.yb;Br<Jn.Hb;++Br){Zn=Br,ss=Ss;var di=(xi=(In=Jn).D).Nb;hn=In.R;var xi=xi.wa[xi.Y+Zn],Xi=In.sa,Hs=In.ta+16*di*hn+16*Zn,Po=xi.dd,pi=xi.tc;if(pi!=0)if(e(3<=pi),In.L==1)0<Zn&&Ie(Xi,Hs,hn,pi+4),xi.La&&Ee(Xi,Hs,hn,pi),0<ss&&Me(Xi,Hs,hn,pi+4),xi.La&&Ae(Xi,Hs,hn,pi);else{var ia=In.B,Rl=In.qa,du=In.ra+8*di*ia+8*Zn,Va=In.Ha,In=In.Ia+8*di*ia+8*Zn;di=xi.ld,0<Zn&&(zt(Xi,Hs,hn,pi+4,Po,di),Vt(Rl,du,Va,In,ia,pi+4,Po,di)),xi.La&&(Qt(Xi,Hs,hn,pi,Po,di),fe(Rl,du,Va,In,ia,pi,Po,di)),0<ss&&(Pt(Xi,Hs,hn,pi+4,Po,di),Bt(Rl,du,Va,In,ia,pi+4,Po,di)),xi.La&&(Kt(Xi,Hs,hn,pi,Po,di),se(Rl,du,Va,In,ia,pi,Po,di))}}if(Dt.ia&&alert("todo:DitherRow"),Ut.put!=null){if(Br=16*on,on=16*(on+1),_s?(Ut.y=Dt.sa,Ut.O=Dt.ta+mn,Ut.f=Dt.qa,Ut.N=Dt.ra+os,Ut.ea=Dt.Ha,Ut.W=Dt.Ia+os):(Br-=Wr,Ut.y=qe,Ut.O=yr,Ut.f=We,Ut.N=ye,Ut.ea=Jr,Ut.W=sn),Gr||(on-=Wr),on>Ut.o&&(on=Ut.o),Ut.F=null,Ut.J=null,Dt.Fa!=null&&0<Dt.Fa.length&&Br<on&&(Ut.J=Fa(Dt,Ut,Br,on-Br),Ut.F=Dt.mb,Ut.F==null&&Ut.F.length==0)){pe=gr(Dt,3,"Could not decode alpha data.");break t}Br<Ut.j&&(Wr=Ut.j-Br,Br=Ut.j,e(!(1&Wr)),Ut.O+=Dt.R*Wr,Ut.N+=Dt.B*(Wr>>1),Ut.W+=Dt.B*(Wr>>1),Ut.F!=null&&(Ut.J+=Ut.width*Wr)),Br<on&&(Ut.O+=Ut.v,Ut.N+=Ut.v>>1,Ut.W+=Ut.v>>1,Ut.F!=null&&(Ut.J+=Ut.v),Ut.ka=Br-Ut.j,Ut.U=Ut.va-Ut.v,Ut.T=on-Br,pe=Ut.put(Ut))}oe+1!=Dt.Ic||Gr||(r(Dt.sa,Dt.ta-_e,qe,yr+16*Dt.R,_e),r(Dt.qa,Dt.ra-tr,We,ye+8*Dt.B,tr),r(Dt.Ha,Dt.Ia-tr,Jr,sn+8*Dt.B,tr))}if(!pe)return gr(Wt,6,"Output aborted.")}return 1}(M,H)),H.bc!=null&&H.bc(H),K&=1}return K?(M.cb=0,K):0}function Pn(M,H,K,et,ut){ut=M[H+K+32*et]+(ut>>3),M[H+K+32*et]=-256&ut?0>ut?0:255:ut}function zr(M,H,K,et,ut,ft){Pn(M,H,0,K,et+ut),Pn(M,H,1,K,et+ft),Pn(M,H,2,K,et-ft),Pn(M,H,3,K,et-ut)}function fn(M){return(20091*M>>16)+M}function ui(M,H,K,et){var ut,ft=0,dt=i(16);for(ut=0;4>ut;++ut){var gt=M[H+0]+M[H+8],bt=M[H+0]-M[H+8],_t=(35468*M[H+4]>>16)-fn(M[H+12]),Rt=fn(M[H+4])+(35468*M[H+12]>>16);dt[ft+0]=gt+Rt,dt[ft+1]=bt+_t,dt[ft+2]=bt-_t,dt[ft+3]=gt-Rt,ft+=4,H++}for(ut=ft=0;4>ut;++ut)gt=(M=dt[ft+0]+4)+dt[ft+8],bt=M-dt[ft+8],_t=(35468*dt[ft+4]>>16)-fn(dt[ft+12]),Pn(K,et,0,0,gt+(Rt=fn(dt[ft+4])+(35468*dt[ft+12]>>16))),Pn(K,et,1,0,bt+_t),Pn(K,et,2,0,bt-_t),Pn(K,et,3,0,gt-Rt),ft++,et+=32}function Dr(M,H,K,et){var ut=M[H+0]+4,ft=35468*M[H+4]>>16,dt=fn(M[H+4]),gt=35468*M[H+1]>>16;zr(K,et,0,ut+dt,M=fn(M[H+1]),gt),zr(K,et,1,ut+ft,M,gt),zr(K,et,2,ut-ft,M,gt),zr(K,et,3,ut-dt,M,gt)}function Ir(M,H,K,et,ut){ui(M,H,K,et),ut&&ui(M,H+16,K,et+4)}function bi(M,H,K,et){Nt(M,H+0,K,et,1),Nt(M,H+32,K,et+128,1)}function Ei(M,H,K,et){var ut;for(M=M[H+0]+4,ut=0;4>ut;++ut)for(H=0;4>H;++H)Pn(K,et,H,ut,M)}function Os(M,H,K,et){M[H+0]&&jt(M,H+0,K,et),M[H+16]&&jt(M,H+16,K,et+4),M[H+32]&&jt(M,H+32,K,et+128),M[H+48]&&jt(M,H+48,K,et+128+4)}function Ln(M,H,K,et){var ut,ft=i(16);for(ut=0;4>ut;++ut){var dt=M[H+0+ut]+M[H+12+ut],gt=M[H+4+ut]+M[H+8+ut],bt=M[H+4+ut]-M[H+8+ut],_t=M[H+0+ut]-M[H+12+ut];ft[0+ut]=dt+gt,ft[8+ut]=dt-gt,ft[4+ut]=_t+bt,ft[12+ut]=_t-bt}for(ut=0;4>ut;++ut)dt=(M=ft[0+4*ut]+3)+ft[3+4*ut],gt=ft[1+4*ut]+ft[2+4*ut],bt=ft[1+4*ut]-ft[2+4*ut],_t=M-ft[3+4*ut],K[et+0]=dt+gt>>3,K[et+16]=_t+bt>>3,K[et+32]=dt-gt>>3,K[et+48]=_t-bt>>3,et+=64}function ci(M,H,K){var et,ut=H-32,ft=nn,dt=255-M[ut-1];for(et=0;et<K;++et){var gt,bt=ft,_t=dt+M[H-1];for(gt=0;gt<K;++gt)M[H+gt]=bt[_t+M[ut+gt]];H+=32}}function rs(M,H){ci(M,H,4)}function Fr(M,H){ci(M,H,8)}function eo(M,H){ci(M,H,16)}function hi(M,H){var K;for(K=0;16>K;++K)r(M,H+32*K,M,H-32,16)}function vi(M,H){var K;for(K=16;0<K;--K)s(M,H,M[H-1],16),H+=32}function En(M,H,K){var et;for(et=0;16>et;++et)s(H,K+32*et,M,16)}function ji(M,H){var K,et=16;for(K=0;16>K;++K)et+=M[H-1+32*K]+M[H+K-32];En(et>>5,M,H)}function xn(M,H){var K,et=8;for(K=0;16>K;++K)et+=M[H-1+32*K];En(et>>4,M,H)}function wi(M,H){var K,et=8;for(K=0;16>K;++K)et+=M[H+K-32];En(et>>4,M,H)}function Ps(M,H){En(128,M,H)}function vr(M,H,K){return M+2*H+K+2>>2}function dn(M,H){var K,et=H-32;for(et=new Uint8Array([vr(M[et-1],M[et+0],M[et+1]),vr(M[et+0],M[et+1],M[et+2]),vr(M[et+1],M[et+2],M[et+3]),vr(M[et+2],M[et+3],M[et+4])]),K=0;4>K;++K)r(M,H+32*K,et,0,et.length)}function ei(M,H){var K=M[H-1],et=M[H-1+32],ut=M[H-1+64],ft=M[H-1+96];G(M,H+0,16843009*vr(M[H-1-32],K,et)),G(M,H+32,16843009*vr(K,et,ut)),G(M,H+64,16843009*vr(et,ut,ft)),G(M,H+96,16843009*vr(ut,ft,ft))}function Mi(M,H){var K,et=4;for(K=0;4>K;++K)et+=M[H+K-32]+M[H-1+32*K];for(et>>=3,K=0;4>K;++K)s(M,H+32*K,et,4)}function jo(M,H){var K=M[H-1+0],et=M[H-1+32],ut=M[H-1+64],ft=M[H-1-32],dt=M[H+0-32],gt=M[H+1-32],bt=M[H+2-32],_t=M[H+3-32];M[H+0+96]=vr(et,ut,M[H-1+96]),M[H+1+96]=M[H+0+64]=vr(K,et,ut),M[H+2+96]=M[H+1+64]=M[H+0+32]=vr(ft,K,et),M[H+3+96]=M[H+2+64]=M[H+1+32]=M[H+0+0]=vr(dt,ft,K),M[H+3+64]=M[H+2+32]=M[H+1+0]=vr(gt,dt,ft),M[H+3+32]=M[H+2+0]=vr(bt,gt,dt),M[H+3+0]=vr(_t,bt,gt)}function Oa(M,H){var K=M[H+1-32],et=M[H+2-32],ut=M[H+3-32],ft=M[H+4-32],dt=M[H+5-32],gt=M[H+6-32],bt=M[H+7-32];M[H+0+0]=vr(M[H+0-32],K,et),M[H+1+0]=M[H+0+32]=vr(K,et,ut),M[H+2+0]=M[H+1+32]=M[H+0+64]=vr(et,ut,ft),M[H+3+0]=M[H+2+32]=M[H+1+64]=M[H+0+96]=vr(ut,ft,dt),M[H+3+32]=M[H+2+64]=M[H+1+96]=vr(ft,dt,gt),M[H+3+64]=M[H+2+96]=vr(dt,gt,bt),M[H+3+96]=vr(gt,bt,bt)}function Vi(M,H){var K=M[H-1+0],et=M[H-1+32],ut=M[H-1+64],ft=M[H-1-32],dt=M[H+0-32],gt=M[H+1-32],bt=M[H+2-32],_t=M[H+3-32];M[H+0+0]=M[H+1+64]=ft+dt+1>>1,M[H+1+0]=M[H+2+64]=dt+gt+1>>1,M[H+2+0]=M[H+3+64]=gt+bt+1>>1,M[H+3+0]=bt+_t+1>>1,M[H+0+96]=vr(ut,et,K),M[H+0+64]=vr(et,K,ft),M[H+0+32]=M[H+1+96]=vr(K,ft,dt),M[H+1+32]=M[H+2+96]=vr(ft,dt,gt),M[H+2+32]=M[H+3+96]=vr(dt,gt,bt),M[H+3+32]=vr(gt,bt,_t)}function Al(M,H){var K=M[H+0-32],et=M[H+1-32],ut=M[H+2-32],ft=M[H+3-32],dt=M[H+4-32],gt=M[H+5-32],bt=M[H+6-32],_t=M[H+7-32];M[H+0+0]=K+et+1>>1,M[H+1+0]=M[H+0+64]=et+ut+1>>1,M[H+2+0]=M[H+1+64]=ut+ft+1>>1,M[H+3+0]=M[H+2+64]=ft+dt+1>>1,M[H+0+32]=vr(K,et,ut),M[H+1+32]=M[H+0+96]=vr(et,ut,ft),M[H+2+32]=M[H+1+96]=vr(ut,ft,dt),M[H+3+32]=M[H+2+96]=vr(ft,dt,gt),M[H+3+64]=vr(dt,gt,bt),M[H+3+96]=vr(gt,bt,_t)}function ns(M,H){var K=M[H-1+0],et=M[H-1+32],ut=M[H-1+64],ft=M[H-1+96];M[H+0+0]=K+et+1>>1,M[H+2+0]=M[H+0+32]=et+ut+1>>1,M[H+2+32]=M[H+0+64]=ut+ft+1>>1,M[H+1+0]=vr(K,et,ut),M[H+3+0]=M[H+1+32]=vr(et,ut,ft),M[H+3+32]=M[H+1+64]=vr(ut,ft,ft),M[H+3+64]=M[H+2+64]=M[H+0+96]=M[H+1+96]=M[H+2+96]=M[H+3+96]=ft}function El(M,H){var K=M[H-1+0],et=M[H-1+32],ut=M[H-1+64],ft=M[H-1+96],dt=M[H-1-32],gt=M[H+0-32],bt=M[H+1-32],_t=M[H+2-32];M[H+0+0]=M[H+2+32]=K+dt+1>>1,M[H+0+32]=M[H+2+64]=et+K+1>>1,M[H+0+64]=M[H+2+96]=ut+et+1>>1,M[H+0+96]=ft+ut+1>>1,M[H+3+0]=vr(gt,bt,_t),M[H+2+0]=vr(dt,gt,bt),M[H+1+0]=M[H+3+32]=vr(K,dt,gt),M[H+1+32]=M[H+3+64]=vr(et,K,dt),M[H+1+64]=M[H+3+96]=vr(ut,et,K),M[H+1+96]=vr(ft,ut,et)}function uu(M,H){var K;for(K=0;8>K;++K)r(M,H+32*K,M,H-32,8)}function Xo(M,H){var K;for(K=0;8>K;++K)s(M,H,M[H-1],8),H+=32}function vs(M,H,K){var et;for(et=0;8>et;++et)s(H,K+32*et,M,8)}function Ls(M,H){var K,et=8;for(K=0;8>K;++K)et+=M[H+K-32]+M[H-1+32*K];vs(et>>4,M,H)}function cu(M,H){var K,et=4;for(K=0;8>K;++K)et+=M[H+K-32];vs(et>>3,M,H)}function Yo(M,H){var K,et=4;for(K=0;8>K;++K)et+=M[H-1+32*K];vs(et>>3,M,H)}function ro(M,H){vs(128,M,H)}function Pa(M,H,K){var et=M[H-K],ut=M[H+0],ft=3*(ut-et)+Gn[1020+M[H-2*K]-M[H+K]],dt=ra[112+(ft+4>>3)];M[H-K]=nn[255+et+ra[112+(ft+3>>3)]],M[H+0]=nn[255+ut-dt]}function hu(M,H,K,et){var ut=M[H+0],ft=M[H+K];return Kn[255+M[H-2*K]-M[H-K]]>et||Kn[255+ft-ut]>et}function Go(M,H,K,et){return 4*Kn[255+M[H-K]-M[H+0]]+Kn[255+M[H-2*K]-M[H+K]]<=et}function Ko(M,H,K,et,ut){var ft=M[H-3*K],dt=M[H-2*K],gt=M[H-K],bt=M[H+0],_t=M[H+K],Rt=M[H+2*K],Zt=M[H+3*K];return 4*Kn[255+gt-bt]+Kn[255+dt-_t]>et?0:Kn[255+M[H-4*K]-ft]<=ut&&Kn[255+ft-dt]<=ut&&Kn[255+dt-gt]<=ut&&Kn[255+Zt-Rt]<=ut&&Kn[255+Rt-_t]<=ut&&Kn[255+_t-bt]<=ut}function La(M,H,K,et){var ut=2*et+1;for(et=0;16>et;++et)Go(M,H+et,K,ut)&&Pa(M,H+et,K)}function Rs(M,H,K,et){var ut=2*et+1;for(et=0;16>et;++et)Go(M,H+et*K,1,ut)&&Pa(M,H+et*K,1)}function no(M,H,K,et){var ut;for(ut=3;0<ut;--ut)La(M,H+=4*K,K,et)}function xc(M,H,K,et){var ut;for(ut=3;0<ut;--ut)Rs(M,H+=4,K,et)}function Ds(M,H,K,et,ut,ft,dt,gt){for(ft=2*ft+1;0<ut--;){if(Ko(M,H,K,ft,dt))if(hu(M,H,K,gt))Pa(M,H,K);else{var bt=M,_t=H,Rt=K,Zt=bt[_t-2*Rt],Jt=bt[_t-Rt],Wt=bt[_t+0],be=bt[_t+Rt],oe=bt[_t+2*Rt],Dt=27*(pe=Gn[1020+3*(Wt-Jt)+Gn[1020+Zt-be]])+63>>7,Ut=18*pe+63>>7,pe=9*pe+63>>7;bt[_t-3*Rt]=nn[255+bt[_t-3*Rt]+pe],bt[_t-2*Rt]=nn[255+Zt+Ut],bt[_t-Rt]=nn[255+Jt+Dt],bt[_t+0]=nn[255+Wt-Dt],bt[_t+Rt]=nn[255+be-Ut],bt[_t+2*Rt]=nn[255+oe-pe]}H+=et}}function Wi(M,H,K,et,ut,ft,dt,gt){for(ft=2*ft+1;0<ut--;){if(Ko(M,H,K,ft,dt))if(hu(M,H,K,gt))Pa(M,H,K);else{var bt=M,_t=H,Rt=K,Zt=bt[_t-Rt],Jt=bt[_t+0],Wt=bt[_t+Rt],be=ra[112+((oe=3*(Jt-Zt))+4>>3)],oe=ra[112+(oe+3>>3)],Dt=be+1>>1;bt[_t-2*Rt]=nn[255+bt[_t-2*Rt]+Dt],bt[_t-Rt]=nn[255+Zt+oe],bt[_t+0]=nn[255+Jt-be],bt[_t+Rt]=nn[255+Wt-Dt]}H+=et}}function Ra(M,H,K,et,ut,ft){Ds(M,H,K,1,16,et,ut,ft)}function Is(M,H,K,et,ut,ft){Ds(M,H,1,K,16,et,ut,ft)}function Da(M,H,K,et,ut,ft){var dt;for(dt=3;0<dt;--dt)Wi(M,H+=4*K,K,1,16,et,ut,ft)}function io(M,H,K,et,ut,ft){var dt;for(dt=3;0<dt;--dt)Wi(M,H+=4,1,K,16,et,ut,ft)}function fu(M,H,K,et,ut,ft,dt,gt){Ds(M,H,ut,1,8,ft,dt,gt),Ds(K,et,ut,1,8,ft,dt,gt)}function jl(M,H,K,et,ut,ft,dt,gt){Ds(M,H,1,ut,8,ft,dt,gt),Ds(K,et,1,ut,8,ft,dt,gt)}function Fs(M,H,K,et,ut,ft,dt,gt){Wi(M,H+4*ut,ut,1,8,ft,dt,gt),Wi(K,et+4*ut,ut,1,8,ft,dt,gt)}function Ia(M,H,K,et,ut,ft,dt,gt){Wi(M,H+4,1,ut,8,ft,dt,gt),Wi(K,et+4,1,ut,8,ft,dt,gt)}function Mo(){this.ba=new Sr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ye,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Zo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Jo(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function zn(){this.ua=0,this.Wa=new st,this.vb=new st,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new N,this.yc=new F}function Qo(){this.xb=this.a=0,this.l=new ur,this.ca=new Sr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new E,this.Pb=0,this.wd=new E,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new zn,this.ab=0,this.gc=o(4,Jo),this.Oc=0}function Bs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ur,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function No(M,H,K,et,ut,ft,dt){for(M=M==null?0:M[H+0],H=0;H<dt;++H)ut[ft+H]=M+K[et+H]&255,M=ut[ft+H]}function Oo(M,H,K,et,ut,ft,dt){var gt;if(M==null)No(null,null,K,et,ut,ft,dt);else for(gt=0;gt<dt;++gt)ut[ft+gt]=M[H+gt]+K[et+gt]&255}function so(M,H,K,et,ut,ft,dt){if(M==null)No(null,null,K,et,ut,ft,dt);else{var gt,bt=M[H+0],_t=bt,Rt=bt;for(gt=0;gt<dt;++gt)_t=Rt+(bt=M[H+gt])-_t,Rt=K[et+gt]+(-256&_t?0>_t?0:255:_t)&255,_t=bt,ut[ft+gt]=Rt}}function Fa(M,H,K,et){var ut=H.width,ft=H.o;if(e(M!=null&&H!=null),0>K||0>=et||K+et>ft)return null;if(!M.Cc){if(M.ga==null){var dt;if(M.ga=new Bs,(dt=M.ga==null)||(dt=H.width*H.o,e(M.Gb.length==0),M.Gb=i(dt),M.Uc=0,M.Gb==null?dt=0:(M.mb=M.Gb,M.nb=M.Uc,M.rc=null,dt=1),dt=!dt),!dt){dt=M.ga;var gt=M.Fa,bt=M.P,_t=M.qc,Rt=M.mb,Zt=M.nb,Jt=bt+1,Wt=_t-1,be=dt.l;if(e(gt!=null&&Rt!=null&&H!=null),$a[0]=null,$a[1]=No,$a[2]=Oo,$a[3]=so,dt.ca=Rt,dt.tb=Zt,dt.c=H.width,dt.i=H.height,e(0<dt.c&&0<dt.i),1>=_t)H=0;else if(dt.$a=gt[bt+0]>>0&3,dt.Z=gt[bt+0]>>2&3,dt.Lc=gt[bt+0]>>4&3,bt=gt[bt+0]>>6&3,0>dt.$a||1<dt.$a||4<=dt.Z||1<dt.Lc||bt)H=0;else if(be.put=jr,be.ac=mr,be.bc=rr,be.ma=dt,be.width=H.width,be.height=H.height,be.Da=H.Da,be.v=H.v,be.va=H.va,be.j=H.j,be.o=H.o,dt.$a)t:{e(dt.$a==1),H=lr();e:for(;;){if(H==null){H=0;break t}if(e(dt!=null),dt.mc=H,H.c=dt.c,H.i=dt.i,H.l=dt.l,H.l.ma=dt,H.l.width=dt.c,H.l.height=dt.i,H.a=0,x(H.m,gt,Jt,Wt),!fr(dt.c,dt.i,1,H,null)||(H.ab==1&&H.gc[0].hc==3&&Oe(H.s)?(dt.ic=1,gt=H.c*H.i,H.Ta=null,H.Ua=0,H.V=i(gt),H.Ba=0,H.V==null?(H.a=1,H=0):H=1):(dt.ic=0,H=Xr(H,dt.c)),!H))break e;H=1;break t}dt.mc=null,H=0}else H=Wt>=dt.c*dt.i;dt=!H}if(dt)return null;M.ga.Lc!=1?M.Ga=0:et=ft-K}e(M.ga!=null),e(K+et<=ft);t:{if(H=(gt=M.ga).c,ft=gt.l.o,gt.$a==0){if(Jt=M.rc,Wt=M.Vc,be=M.Fa,bt=M.P+1+K*H,_t=M.mb,Rt=M.nb+K*H,e(bt<=M.P+M.qc),gt.Z!=0)for(e($a[gt.Z]!=null),dt=0;dt<et;++dt)$a[gt.Z](Jt,Wt,be,bt,_t,Rt,H),Jt=_t,Wt=Rt,Rt+=H,bt+=H;else for(dt=0;dt<et;++dt)r(_t,Rt,be,bt,H),Jt=_t,Wt=Rt,Rt+=H,bt+=H;M.rc=Jt,M.Vc=Wt}else{if(e(gt.mc!=null),H=K+et,e((dt=gt.mc)!=null),e(H<=dt.i),dt.C>=H)H=1;else if(gt.ic||Gt(),gt.ic){gt=dt.V,Jt=dt.Ba,Wt=dt.c;var oe=dt.i,Dt=(be=1,bt=dt.$/Wt,_t=dt.$%Wt,Rt=dt.m,Zt=dt.s,dt.$),Ut=Wt*oe,pe=Wt*H,_e=Zt.wc,ye=Dt<pe?ee(Zt,_t,bt):null;e(Dt<=Ut),e(H<=oe),e(Oe(Zt));e:for(;;){for(;!Rt.h&&Dt<pe;){if(_t&_e||(ye=ee(Zt,_t,bt)),e(ye!=null),D(Rt),256>(oe=Et(ye.G[0],ye.H[0],Rt)))gt[Jt+Dt]=oe,++Dt,++_t>=Wt&&(_t=0,++bt<=H&&!(bt%16)&&Ke(dt,bt));else{if(!(280>oe)){be=0;break e}oe=Nr(oe-256,Rt);var tr,qe=Et(ye.G[4],ye.H[4],Rt);if(D(Rt),!(Dt>=(qe=Ue(Wt,qe=Nr(qe,Rt)))&&Ut-Dt>=oe)){be=0;break e}for(tr=0;tr<oe;++tr)gt[Jt+Dt+tr]=gt[Jt+Dt+tr-qe];for(Dt+=oe,_t+=oe;_t>=Wt;)_t-=Wt,++bt<=H&&!(bt%16)&&Ke(dt,bt);Dt<pe&&_t&_e&&(ye=ee(Zt,_t,bt))}e(Rt.h==X(Rt))}Ke(dt,bt>H?H:bt);break e}!be||Rt.h&&Dt<Ut?(be=0,dt.a=Rt.h?5:3):dt.$=Dt,H=be}else H=He(dt,dt.V,dt.Ba,dt.c,dt.i,H,Rr);if(!H){et=0;break t}}K+et>=ft&&(M.Cc=1),et=1}if(!et)return null;if(M.Cc&&((et=M.ga)!=null&&(et.mc=null),M.ga=null,0<M.Ga))return alert("todo:WebPDequantizeLevels"),null}return M.nb+K*ut}function Y(M,H,K,et,ut,ft){for(;0<ut--;){var dt,gt=M,bt=H+(K?1:0),_t=M,Rt=H+(K?0:3);for(dt=0;dt<et;++dt){var Zt=_t[Rt+4*dt];Zt!=255&&(Zt*=32897,gt[bt+4*dt+0]=gt[bt+4*dt+0]*Zt>>23,gt[bt+4*dt+1]=gt[bt+4*dt+1]*Zt>>23,gt[bt+4*dt+2]=gt[bt+4*dt+2]*Zt>>23)}H+=ft}}function lt(M,H,K,et,ut){for(;0<et--;){var ft;for(ft=0;ft<K;++ft){var dt=M[H+2*ft+0],gt=15&(_t=M[H+2*ft+1]),bt=4369*gt,_t=(240&_t|_t>>4)*bt>>16;M[H+2*ft+0]=(240&dt|dt>>4)*bt>>16&240|(15&dt|dt<<4)*bt>>16>>4&15,M[H+2*ft+1]=240&_t|gt}H+=ut}}function Ct(M,H,K,et,ut,ft,dt,gt){var bt,_t,Rt=255;for(_t=0;_t<ut;++_t){for(bt=0;bt<et;++bt){var Zt=M[H+bt];ft[dt+4*bt]=Zt,Rt&=Zt}H+=K,dt+=gt}return Rt!=255}function Ot(M,H,K,et,ut){var ft;for(ft=0;ft<ut;++ft)K[et+ft]=M[H+ft]>>8}function Gt(){Re=Y,xe=lt,Ne=Ct,or=Ot}function ae(M,H,K){P[M]=function(et,ut,ft,dt,gt,bt,_t,Rt,Zt,Jt,Wt,be,oe,Dt,Ut,pe,_e){var ye,tr=_e-1>>1,qe=gt[bt+0]|_t[Rt+0]<<16,yr=Zt[Jt+0]|Wt[be+0]<<16;e(et!=null);var We=3*qe+yr+131074>>2;for(H(et[ut+0],255&We,We>>16,oe,Dt),ft!=null&&(We=3*yr+qe+131074>>2,H(ft[dt+0],255&We,We>>16,Ut,pe)),ye=1;ye<=tr;++ye){var Jr=gt[bt+ye]|_t[Rt+ye]<<16,sn=Zt[Jt+ye]|Wt[be+ye]<<16,Gr=qe+Jr+yr+sn+524296,Wr=Gr+2*(Jr+yr)>>3;We=Wr+qe>>1,qe=(Gr=Gr+2*(qe+sn)>>3)+Jr>>1,H(et[ut+2*ye-1],255&We,We>>16,oe,Dt+(2*ye-1)*K),H(et[ut+2*ye-0],255&qe,qe>>16,oe,Dt+(2*ye-0)*K),ft!=null&&(We=Gr+yr>>1,qe=Wr+sn>>1,H(ft[dt+2*ye-1],255&We,We>>16,Ut,pe+(2*ye-1)*K),H(ft[dt+2*ye+0],255&qe,qe>>16,Ut,pe+(2*ye+0)*K)),qe=Jr,yr=sn}1&_e||(We=3*qe+yr+131074>>2,H(et[ut+_e-1],255&We,We>>16,oe,Dt+(_e-1)*K),ft!=null&&(We=3*yr+qe+131074>>2,H(ft[dt+_e-1],255&We,We>>16,Ut,pe+(_e-1)*K)))}}function Se(){qs[qa]=A3,qs[Dh]=P1,qs[E1]=E3,qs[Ih]=L1,qs[Fh]=R1,qs[Np]=D1,qs[j1]=j3,qs[Op]=P1,qs[Pp]=L1,qs[Bh]=R1,qs[Lp]=D1}function Ge(M){return M&-16384?0>M?0:255:M>>M3}function pr(M,H){return Ge((19077*M>>8)+(26149*H>>8)-14234)}function Mr(M,H,K){return Ge((19077*M>>8)-(6419*H>>8)-(13320*K>>8)+8708)}function Cr(M,H){return Ge((19077*M>>8)+(33050*H>>8)-17685)}function Vr(M,H,K,et,ut){et[ut+0]=pr(M,K),et[ut+1]=Mr(M,H,K),et[ut+2]=Cr(M,H)}function pn(M,H,K,et,ut){et[ut+0]=Cr(M,H),et[ut+1]=Mr(M,H,K),et[ut+2]=pr(M,K)}function bn(M,H,K,et,ut){var ft=Mr(M,H,K);H=ft<<3&224|Cr(M,H)>>3,et[ut+0]=248&pr(M,K)|ft>>5,et[ut+1]=H}function Rn(M,H,K,et,ut){var ft=240&Cr(M,H)|15;et[ut+0]=240&pr(M,K)|Mr(M,H,K)>>4,et[ut+1]=ft}function ri(M,H,K,et,ut){et[ut+0]=255,Vr(M,H,K,et,ut+1)}function Yn(M,H,K,et,ut){pn(M,H,K,et,ut),et[ut+3]=255}function is(M,H,K,et,ut){Vr(M,H,K,et,ut),et[ut+3]=255}function Ni(M,H){return 0>M?0:M>H?H:M}function zs(M,H,K){P[M]=function(et,ut,ft,dt,gt,bt,_t,Rt,Zt){for(var Jt=Rt+(-2&Zt)*K;Rt!=Jt;)H(et[ut+0],ft[dt+0],gt[bt+0],_t,Rt),H(et[ut+1],ft[dt+0],gt[bt+0],_t,Rt+K),ut+=2,++dt,++bt,Rt+=2*K;1&Zt&&H(et[ut+0],ft[dt+0],gt[bt+0],_t,Rt)}}function Ml(M,H,K){return K==0?M==0?H==0?6:5:H==0?4:0:K}function ta(M,H,K,et,ut){switch(M>>>30){case 3:Nt(H,K,et,ut,0);break;case 2:Mt(H,K,et,ut);break;case 1:jt(H,K,et,ut)}}function Ba(M,H){var K,et,ut=H.M,ft=H.Nb,dt=M.oc,gt=M.pc+40,bt=M.oc,_t=M.pc+584,Rt=M.oc,Zt=M.pc+600;for(K=0;16>K;++K)dt[gt+32*K-1]=129;for(K=0;8>K;++K)bt[_t+32*K-1]=129,Rt[Zt+32*K-1]=129;for(0<ut?dt[gt-1-32]=bt[_t-1-32]=Rt[Zt-1-32]=129:(s(dt,gt-32-1,127,21),s(bt,_t-32-1,127,9),s(Rt,Zt-32-1,127,9)),et=0;et<M.za;++et){var Jt=H.ya[H.aa+et];if(0<et){for(K=-1;16>K;++K)r(dt,gt+32*K-4,dt,gt+32*K+12,4);for(K=-1;8>K;++K)r(bt,_t+32*K-4,bt,_t+32*K+4,4),r(Rt,Zt+32*K-4,Rt,Zt+32*K+4,4)}var Wt=M.Gd,be=M.Hd+et,oe=Jt.ad,Dt=Jt.Hc;if(0<ut&&(r(dt,gt-32,Wt[be].y,0,16),r(bt,_t-32,Wt[be].f,0,8),r(Rt,Zt-32,Wt[be].ea,0,8)),Jt.Za){var Ut=dt,pe=gt-32+16;for(0<ut&&(et>=M.za-1?s(Ut,pe,Wt[be].y[15],4):r(Ut,pe,Wt[be+1].y,0,4)),K=0;4>K;K++)Ut[pe+128+K]=Ut[pe+256+K]=Ut[pe+384+K]=Ut[pe+0+K];for(K=0;16>K;++K,Dt<<=2)Ut=dt,pe=gt+F1[K],ao[Jt.Ob[K]](Ut,pe),ta(Dt,oe,16*+K,Ut,pe)}else if(Ut=Ml(et,ut,Jt.Ob[0]),Ha[Ut](dt,gt),Dt!=0)for(K=0;16>K;++K,Dt<<=2)ta(Dt,oe,16*+K,dt,gt+F1[K]);for(K=Jt.Gc,Ut=Ml(et,ut,Jt.Dd),na[Ut](bt,_t),na[Ut](Rt,Zt),Dt=oe,Ut=bt,pe=_t,255&(Jt=K>>0)&&(170&Jt?$t(Dt,256,Ut,pe):Ht(Dt,256,Ut,pe)),Jt=Rt,Dt=Zt,255&(K>>=8)&&(170&K?$t(oe,320,Jt,Dt):Ht(oe,320,Jt,Dt)),ut<M.Ub-1&&(r(Wt[be].y,0,dt,gt+480,16),r(Wt[be].f,0,bt,_t+224,8),r(Wt[be].ea,0,Rt,Zt+224,8)),K=8*ft*M.B,Wt=M.sa,be=M.ta+16*et+16*ft*M.R,oe=M.qa,Jt=M.ra+8*et+K,Dt=M.Ha,Ut=M.Ia+8*et+K,K=0;16>K;++K)r(Wt,be+K*M.R,dt,gt+32*K,16);for(K=0;8>K;++K)r(oe,Jt+K*M.B,bt,_t+32*K,8),r(Dt,Ut+K*M.B,Rt,Zt+32*K,8)}}function ea(M,H,K,et,ut,ft,dt,gt,bt){var _t=[0],Rt=[0],Zt=0,Jt=bt!=null?bt.kd:0,Wt=bt??new Zo;if(M==null||12>K)return 7;Wt.data=M,Wt.w=H,Wt.ha=K,H=[H],K=[K],Wt.gb=[Wt.gb];t:{var be=H,oe=K,Dt=Wt.gb;if(e(M!=null),e(oe!=null),e(Dt!=null),Dt[0]=0,12<=oe[0]&&!t(M,be[0],"RIFF")){if(t(M,be[0]+8,"WEBP")){Dt=3;break t}var Ut=ot(M,be[0]+4);if(12>Ut||4294967286<Ut){Dt=3;break t}if(Jt&&Ut>oe[0]-8){Dt=7;break t}Dt[0]=Ut,be[0]+=12,oe[0]-=12}Dt=0}if(Dt!=0)return Dt;for(Ut=0<Wt.gb[0],K=K[0];;){t:{var pe=M;oe=H,Dt=K;var _e=_t,ye=Rt,tr=be=[0];if((We=Zt=[Zt])[0]=0,8>Dt[0])Dt=7;else{if(!t(pe,oe[0],"VP8X")){if(ot(pe,oe[0]+4)!=10){Dt=3;break t}if(18>Dt[0]){Dt=7;break t}var qe=ot(pe,oe[0]+8),yr=1+ct(pe,oe[0]+12);if(2147483648<=yr*(pe=1+ct(pe,oe[0]+15))){Dt=3;break t}tr!=null&&(tr[0]=qe),_e!=null&&(_e[0]=yr),ye!=null&&(ye[0]=pe),oe[0]+=18,Dt[0]-=18,We[0]=1}Dt=0}}if(Zt=Zt[0],be=be[0],Dt!=0)return Dt;if(oe=!!(2&be),!Ut&&Zt)return 3;if(ft!=null&&(ft[0]=!!(16&be)),dt!=null&&(dt[0]=oe),gt!=null&&(gt[0]=0),dt=_t[0],be=Rt[0],Zt&&oe&&bt==null){Dt=0;break}if(4>K){Dt=7;break}if(Ut&&Zt||!Ut&&!Zt&&!t(M,H[0],"ALPH")){K=[K],Wt.na=[Wt.na],Wt.P=[Wt.P],Wt.Sa=[Wt.Sa];t:{qe=M,Dt=H,Ut=K;var We=Wt.gb;_e=Wt.na,ye=Wt.P,tr=Wt.Sa,yr=22,e(qe!=null),e(Ut!=null),pe=Dt[0];var Jr=Ut[0];for(e(_e!=null),e(tr!=null),_e[0]=null,ye[0]=null,tr[0]=0;;){if(Dt[0]=pe,Ut[0]=Jr,8>Jr){Dt=7;break t}var sn=ot(qe,pe+4);if(4294967286<sn){Dt=3;break t}var Gr=8+sn+1&-2;if(yr+=Gr,0<We&&yr>We){Dt=3;break t}if(!t(qe,pe,"VP8 ")||!t(qe,pe,"VP8L")){Dt=0;break t}if(Jr[0]<Gr){Dt=7;break t}t(qe,pe,"ALPH")||(_e[0]=qe,ye[0]=pe+8,tr[0]=sn),pe+=Gr,Jr-=Gr}}if(K=K[0],Wt.na=Wt.na[0],Wt.P=Wt.P[0],Wt.Sa=Wt.Sa[0],Dt!=0)break}K=[K],Wt.Ja=[Wt.Ja],Wt.xa=[Wt.xa];t:if(We=M,Dt=H,Ut=K,_e=Wt.gb[0],ye=Wt.Ja,tr=Wt.xa,qe=Dt[0],pe=!t(We,qe,"VP8 "),yr=!t(We,qe,"VP8L"),e(We!=null),e(Ut!=null),e(ye!=null),e(tr!=null),8>Ut[0])Dt=7;else{if(pe||yr){if(We=ot(We,qe+4),12<=_e&&We>_e-12){Dt=3;break t}if(Jt&&We>Ut[0]-8){Dt=7;break t}ye[0]=We,Dt[0]+=8,Ut[0]-=8,tr[0]=yr}else tr[0]=5<=Ut[0]&&We[qe+0]==47&&!(We[qe+4]>>5),ye[0]=Ut[0];Dt=0}if(K=K[0],Wt.Ja=Wt.Ja[0],Wt.xa=Wt.xa[0],H=H[0],Dt!=0)break;if(4294967286<Wt.Ja)return 3;if(gt==null||oe||(gt[0]=Wt.xa?2:1),dt=[dt],be=[be],Wt.xa){if(5>K){Dt=7;break}gt=dt,Jt=be,oe=ft,M==null||5>K?M=0:5<=K&&M[H+0]==47&&!(M[H+4]>>5)?(Ut=[0],We=[0],_e=[0],x(ye=new E,M,H,K),Fe(ye,Ut,We,_e)?(gt!=null&&(gt[0]=Ut[0]),Jt!=null&&(Jt[0]=We[0]),oe!=null&&(oe[0]=_e[0]),M=1):M=0):M=0}else{if(10>K){Dt=7;break}gt=be,M==null||10>K||!Hr(M,H+3,K-3)?M=0:(Jt=M[H+0]|M[H+1]<<8|M[H+2]<<16,oe=16383&(M[H+7]<<8|M[H+6]),M=16383&(M[H+9]<<8|M[H+8]),1&Jt||3<(Jt>>1&7)||!(Jt>>4&1)||Jt>>5>=Wt.Ja||!oe||!M?M=0:(dt&&(dt[0]=oe),gt&&(gt[0]=M),M=1))}if(!M||(dt=dt[0],be=be[0],Zt&&(_t[0]!=dt||Rt[0]!=be)))return 3;bt!=null&&(bt[0]=Wt,bt.offset=H-bt.w,e(4294967286>H-bt.w),e(bt.offset==bt.ha-K));break}return Dt==0||Dt==7&&Zt&&bt==null?(ft!=null&&(ft[0]|=Wt.na!=null&&0<Wt.na.length),et!=null&&(et[0]=dt),ut!=null&&(ut[0]=be),0):Dt}function Nl(M,H,K){var et=H.width,ut=H.height,ft=0,dt=0,gt=et,bt=ut;if(H.Da=M!=null&&0<M.Da,H.Da&&(gt=M.cd,bt=M.bd,ft=M.v,dt=M.j,11>K||(ft&=-2,dt&=-2),0>ft||0>dt||0>=gt||0>=bt||ft+gt>et||dt+bt>ut))return 0;if(H.v=ft,H.j=dt,H.va=ft+gt,H.o=dt+bt,H.U=gt,H.T=bt,H.da=M!=null&&0<M.da,H.da){if(!at(gt,bt,K=[M.ib],ft=[M.hb]))return 0;H.ib=K[0],H.hb=ft[0]}return H.ob=M!=null&&M.ob,H.Kb=M==null||!M.Sd,H.da&&(H.ob=H.ib<3*et/4&&H.hb<3*ut/4,H.Kb=0),1}function Ol(M){if(M==null)return 2;if(11>M.S){var H=M.f.RGBA;H.fb+=(M.height-1)*H.A,H.A=-H.A}else H=M.f.kb,M=M.height,H.O+=(M-1)*H.fa,H.fa=-H.fa,H.N+=(M-1>>1)*H.Ab,H.Ab=-H.Ab,H.W+=(M-1>>1)*H.Db,H.Db=-H.Db,H.F!=null&&(H.J+=(M-1)*H.lb,H.lb=-H.lb);return 0}function za(M,H,K,et){if(et==null||0>=M||0>=H)return 2;if(K!=null){if(K.Da){var ut=K.cd,ft=K.bd,dt=-2&K.v,gt=-2&K.j;if(0>dt||0>gt||0>=ut||0>=ft||dt+ut>M||gt+ft>H)return 2;M=ut,H=ft}if(K.da){if(!at(M,H,ut=[K.ib],ft=[K.hb]))return 2;M=ut[0],H=ft[0]}}et.width=M,et.height=H;t:{var bt=et.width,_t=et.height;if(M=et.S,0>=bt||0>=_t||!(M>=qa&&13>M))M=2;else{if(0>=et.Rd&&et.sd==null){dt=ft=ut=H=0;var Rt=(gt=bt*B1[M])*_t;if(11>M||(ft=(_t+1)/2*(H=(bt+1)/2),M==12&&(dt=(ut=bt)*_t)),(_t=i(Rt+2*ft+dt))==null){M=1;break t}et.sd=_t,11>M?((bt=et.f.RGBA).eb=_t,bt.fb=0,bt.A=gt,bt.size=Rt):((bt=et.f.kb).y=_t,bt.O=0,bt.fa=gt,bt.Fd=Rt,bt.f=_t,bt.N=0+Rt,bt.Ab=H,bt.Cd=ft,bt.ea=_t,bt.W=0+Rt+ft,bt.Db=H,bt.Ed=ft,M==12&&(bt.F=_t,bt.J=0+Rt+2*ft),bt.Tc=dt,bt.lb=ut)}if(H=1,ut=et.S,ft=et.width,dt=et.height,ut>=qa&&13>ut)if(11>ut)M=et.f.RGBA,H&=(gt=Math.abs(M.A))*(dt-1)+ft<=M.size,H&=gt>=ft*B1[ut],H&=M.eb!=null;else{M=et.f.kb,gt=(ft+1)/2,Rt=(dt+1)/2,bt=Math.abs(M.fa),_t=Math.abs(M.Ab);var Zt=Math.abs(M.Db),Jt=Math.abs(M.lb),Wt=Jt*(dt-1)+ft;H&=bt*(dt-1)+ft<=M.Fd,H&=_t*(Rt-1)+gt<=M.Cd,H=(H&=Zt*(Rt-1)+gt<=M.Ed)&bt>=ft&_t>=gt&Zt>=gt,H&=M.y!=null,H&=M.f!=null,H&=M.ea!=null,ut==12&&(H&=Jt>=ft,H&=Wt<=M.Tc,H&=M.F!=null)}else H=0;M=H?0:2}}return M!=0||K!=null&&K.fd&&(M=Ol(et)),M}var Dn=64,Oi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cn=24,oo=32,fi=8,Pi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];kt("Predictor0","PredictorAdd0"),P.Predictor0=function(){return 4278190080},P.Predictor1=function(M){return M},P.Predictor2=function(M,H,K){return H[K+0]},P.Predictor3=function(M,H,K){return H[K+1]},P.Predictor4=function(M,H,K){return H[K-1]},P.Predictor5=function(M,H,K){return Tt(Tt(M,H[K+1]),H[K+0])},P.Predictor6=function(M,H,K){return Tt(M,H[K-1])},P.Predictor7=function(M,H,K){return Tt(M,H[K+0])},P.Predictor8=function(M,H,K){return Tt(H[K-1],H[K+0])},P.Predictor9=function(M,H,K){return Tt(H[K+0],H[K+1])},P.Predictor10=function(M,H,K){return Tt(Tt(M,H[K-1]),Tt(H[K+0],H[K+1]))},P.Predictor11=function(M,H,K){var et=H[K+0];return 0>=re(et>>24&255,M>>24&255,(H=H[K-1])>>24&255)+re(et>>16&255,M>>16&255,H>>16&255)+re(et>>8&255,M>>8&255,H>>8&255)+re(255&et,255&M,255&H)?et:M},P.Predictor12=function(M,H,K){var et=H[K+0];return(Lt((M>>24&255)+(et>>24&255)-((H=H[K-1])>>24&255))<<24|Lt((M>>16&255)+(et>>16&255)-(H>>16&255))<<16|Lt((M>>8&255)+(et>>8&255)-(H>>8&255))<<8|Lt((255&M)+(255&et)-(255&H)))>>>0},P.Predictor13=function(M,H,K){var et=H[K-1];return(Xt((M=Tt(M,H[K+0]))>>24&255,et>>24&255)<<24|Xt(M>>16&255,et>>16&255)<<16|Xt(M>>8&255,et>>8&255)<<8|Xt(M>>0&255,et>>0&255))>>>0};var Pl=P.PredictorAdd0;P.PredictorAdd1=ue,kt("Predictor2","PredictorAdd2"),kt("Predictor3","PredictorAdd3"),kt("Predictor4","PredictorAdd4"),kt("Predictor5","PredictorAdd5"),kt("Predictor6","PredictorAdd6"),kt("Predictor7","PredictorAdd7"),kt("Predictor8","PredictorAdd8"),kt("Predictor9","PredictorAdd9"),kt("Predictor10","PredictorAdd10"),kt("Predictor11","PredictorAdd11"),kt("Predictor12","PredictorAdd12"),kt("Predictor13","PredictorAdd13");var Ua=P.PredictorAdd2;Te("ColorIndexInverseTransform","MapARGB","32b",function(M){return M>>8&255},function(M){return M}),Te("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(M){return M},function(M){return M>>8&255});var Us,Li=P.ColorIndexInverseTransform,ws=P.MapARGB,xs=P.VP8LColorIndexInverseTransformAlpha,Ll=P.MapAlpha,R=P.VP8LPredictorsAdd=[];R.length=16,(P.VP8LPredictors=[]).length=16,(P.VP8LPredictorsAdd_C=[]).length=16,(P.VP8LPredictors_C=[]).length=16;var W,J,rt,it,ht,wt,At,Nt,Mt,$t,jt,Ht,Pt,zt,Bt,Vt,Kt,Qt,se,fe,Me,Ie,Ae,Ee,Re,xe,Ne,or,dr=i(511),Er=i(2041),ni=i(225),xr=i(767),Un=0,Gn=Er,ra=ni,nn=xr,Kn=dr,qa=0,Dh=1,E1=2,Ih=3,Fh=4,Np=5,j1=6,Op=7,Pp=8,Bh=9,Lp=10,d3=[2,3,7],p3=[3,3,11],M1=[280,256,256,256,40],m3=[0,1,1,1,0],g3=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],y3=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],b3=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],v3=8,Rp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Dp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],_c=null,w3=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],x3=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],N1=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],_3=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],S3=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],k3=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],C3=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ha=[],ao=[],na=[],T3=1,O1=2,$a=[],qs=[];ae("UpsampleRgbLinePair",Vr,3),ae("UpsampleBgrLinePair",pn,3),ae("UpsampleRgbaLinePair",is,4),ae("UpsampleBgraLinePair",Yn,4),ae("UpsampleArgbLinePair",ri,4),ae("UpsampleRgba4444LinePair",Rn,2),ae("UpsampleRgb565LinePair",bn,2);var A3=P.UpsampleRgbLinePair,E3=P.UpsampleBgrLinePair,P1=P.UpsampleRgbaLinePair,L1=P.UpsampleBgraLinePair,R1=P.UpsampleArgbLinePair,D1=P.UpsampleRgba4444LinePair,j3=P.UpsampleRgb565LinePair,zh=16,Uh=1<<zh-1,Sc=-227,Ip=482,M3=6,I1=0,N3=i(256),O3=i(256),P3=i(256),L3=i(256),R3=i(Ip-Sc),D3=i(Ip-Sc);zs("YuvToRgbRow",Vr,3),zs("YuvToBgrRow",pn,3),zs("YuvToRgbaRow",is,4),zs("YuvToBgraRow",Yn,4),zs("YuvToArgbRow",ri,4),zs("YuvToRgba4444Row",Rn,2),zs("YuvToRgb565Row",bn,2);var F1=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],qh=[0,2,8],I3=[8,7,6,4,4,2,2,2,1,1,1,1],F3=1;this.WebPDecodeRGBA=function(M,H,K,et,ut){var ft=Dh,dt=new Mo,gt=new Sr;dt.ba=gt,gt.S=ft,gt.width=[gt.width],gt.height=[gt.height];var bt=gt.width,_t=gt.height,Rt=new br;if(Rt==null||M==null)var Zt=2;else e(Rt!=null),Zt=ea(M,H,K,Rt.width,Rt.height,Rt.Pd,Rt.Qd,Rt.format,null);if(Zt!=0?bt=0:(bt!=null&&(bt[0]=Rt.width[0]),_t!=null&&(_t[0]=Rt.height[0]),bt=1),bt){gt.width=gt.width[0],gt.height=gt.height[0],et!=null&&(et[0]=gt.width),ut!=null&&(ut[0]=gt.height);t:{if(et=new ur,(ut=new Zo).data=M,ut.w=H,ut.ha=K,ut.kd=1,H=[0],e(ut!=null),((M=ea(ut.data,ut.w,ut.ha,null,null,null,H,null,ut))==0||M==7)&&H[0]&&(M=4),(H=M)==0){if(e(dt!=null),et.data=ut.data,et.w=ut.w+ut.offset,et.ha=ut.ha-ut.offset,et.put=jr,et.ac=mr,et.bc=rr,et.ma=dt,ut.xa){if((M=lr())==null){dt=1;break t}if(function(Jt,Wt){var be=[0],oe=[0],Dt=[0];e:for(;;){if(Jt==null)return 0;if(Wt==null)return Jt.a=2,0;if(Jt.l=Wt,Jt.a=0,x(Jt.m,Wt.data,Wt.w,Wt.ha),!Fe(Jt.m,be,oe,Dt)){Jt.a=3;break e}if(Jt.xb=O1,Wt.width=be[0],Wt.height=oe[0],!fr(be[0],oe[0],1,Jt,null))break e;return 1}return e(Jt.a!=0),0}(M,et)){if(et=(H=za(et.width,et.height,dt.Oa,dt.ba))==0){e:{et=M;r:for(;;){if(et==null){et=0;break e}if(e(et.s.yc!=null),e(et.s.Ya!=null),e(0<et.s.Wb),e((K=et.l)!=null),e((ut=K.ma)!=null),et.xb!=0){if(et.ca=ut.ba,et.tb=ut.tb,e(et.ca!=null),!Nl(ut.Oa,K,Ih)){et.a=2;break r}if(!Xr(et,K.width)||K.da)break r;if((K.da||$e(et.ca.S))&&Gt(),11>et.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),et.ca.f.kb.F!=null&&Gt()),et.Pb&&0<et.s.ua&&et.s.vb.X==null&&!mt(et.s.vb,et.s.Wa.Xa)){et.a=1;break r}et.xb=0}if(!He(et,et.V,et.Ba,et.c,et.i,K.o,sr))break r;ut.Dc=et.Ma,et=1;break e}e(et.a!=0),et=0}et=!et}et&&(H=M.a)}else H=M.a}else{if((M=new Qe)==null){dt=1;break t}if(M.Fa=ut.na,M.P=ut.P,M.qc=ut.Sa,Yr(M,et)){if((H=za(et.width,et.height,dt.Oa,dt.ba))==0){if(M.Aa=0,K=dt.Oa,e((ut=M)!=null),K!=null){if(0<(bt=0>(bt=K.Md)?0:100<bt?255:255*bt/100)){for(_t=Rt=0;4>_t;++_t)12>(Zt=ut.pb[_t]).lc&&(Zt.ia=bt*I3[0>Zt.lc?0:Zt.lc]>>3),Rt|=Zt.ia;Rt&&(alert("todo:VP8InitRandom"),ut.ia=1)}ut.Ga=K.Id,100<ut.Ga?ut.Ga=100:0>ut.Ga&&(ut.Ga=0)}li(M,et)||(H=M.a)}}else H=M.a}H==0&&dt.Oa!=null&&dt.Oa.fd&&(H=Ol(dt.ba))}dt=H}ft=dt!=0?null:11>ft?gt.f.RGBA.eb:gt.f.kb.y}else ft=null;return ft};var B1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function a(P,z){for(var q="",$=0;$<4;$++)q+=String.fromCharCode(P[z++]);return q}function c(P,z){return(P[z+0]<<0|P[z+1]<<8|P[z+2]<<16)>>>0}function d(P,z){return(P[z+0]<<0|P[z+1]<<8|P[z+2]<<16|P[z+3]<<24)>>>0}new l;var f=[0],h=[0],p=[],g=new l,m=n,y=function(P,z){var q={},$=0,F=!1,T=0,N=0;if(q.frames=[],!function(V,X,Q,D){for(var Z=0;Z<D;Z++)if(V[X+Z]!=Q.charCodeAt(Z))return!0;return!1}(P,z,"RIFF",4)){var C,w;for(d(P,z+=4),z+=8;z<P.length;){var _=a(P,z),x=d(P,z+=4);z+=4;var S=x+(1&x);switch(_){case"VP8 ":case"VP8L":q.frames[$]===void 0&&(q.frames[$]={}),(E=q.frames[$]).src_off=F?N:z-8,E.src_size=T+x+8,$++,F&&(F=!1,T=0,N=0);break;case"VP8X":(E=q.header={}).feature_flags=P[z];var A=z+4;E.canvas_width=1+c(P,A),A+=3,E.canvas_height=1+c(P,A),A+=3;break;case"ALPH":F=!0,T=S+8,N=z-8;break;case"ANIM":(E=q.header).bgcolor=d(P,z),A=z+4,E.loop_count=(C=P)[(w=A)+0]<<0|C[w+1]<<8,A+=2;break;case"ANMF":var B,E;(E=q.frames[$]={}).offset_x=2*c(P,z),z+=3,E.offset_y=2*c(P,z),z+=3,E.width=1+c(P,z),z+=3,E.height=1+c(P,z),z+=3,E.duration=c(P,z),z+=3,B=P[z++],E.dispose=1&B,E.blend=B>>1&1}_!="ANMF"&&(z+=S)}return q}}(m,0);y.response=m,y.rgbaoutput=!0,y.dataurl=!1;var b=y.header?y.header:null,v=y.frames?y.frames:null;if(b){b.loop_counter=b.loop_count,f=[b.canvas_height],h=[b.canvas_width];for(var k=0;k<v.length&&v[k].blend!=0;k++);}var j=v[0],I=g.WebPDecodeRGBA(m,j.src_off,j.src_size,h,f);j.rgba=I,j.imgwidth=h[0],j.imgheight=f[0];for(var U=0;U<h[0]*f[0]*4;U++)p[U]=I[U];return this.width=h,this.height=f,this.data=p,this}(function(n){var e=function(){return typeof eg=="function"},t=function(f,h,p,g){var m=4,y=o;switch(g){case n.image_compression.FAST:m=1,y=i;break;case n.image_compression.MEDIUM:m=6,y=u;break;case n.image_compression.SLOW:m=9,y=l}f=r(f,h,p,y);var b=eg(f,{level:m});return n.__addimage__.arrayBufferToBinaryString(b)},r=function(f,h,p,g){for(var m,y,b,v=f.length/h,k=new Uint8Array(f.length+v),j=c(),I=0;I<v;I+=1){if(b=I*h,m=f.subarray(b,b+h),g)k.set(g(m,p,y),b+I);else{for(var U,P=j.length,z=[];U<P;U+=1)z[U]=j[U](m,p,y);var q=d(z.concat());k.set(z[q],b+I)}y=m}return k},s=function(f){var h=Array.apply([],f);return h.unshift(0),h},i=function(f,h){var p,g=[],m=f.length;g[0]=1;for(var y=0;y<m;y+=1)p=f[y-h]||0,g[y+1]=f[y]-p+256&255;return g},o=function(f,h,p){var g,m=[],y=f.length;m[0]=2;for(var b=0;b<y;b+=1)g=p&&p[b]||0,m[b+1]=f[b]-g+256&255;return m},u=function(f,h,p){var g,m,y=[],b=f.length;y[0]=3;for(var v=0;v<b;v+=1)g=f[v-h]||0,m=p&&p[v]||0,y[v+1]=f[v]+256-(g+m>>>1)&255;return y},l=function(f,h,p){var g,m,y,b,v=[],k=f.length;v[0]=4;for(var j=0;j<k;j+=1)g=f[j-h]||0,m=p&&p[j]||0,y=p&&p[j-h]||0,b=a(g,m,y),v[j+1]=f[j]-b+256&255;return v},a=function(f,h,p){if(f===h&&h===p)return f;var g=Math.abs(h-p),m=Math.abs(f-p),y=Math.abs(f+h-p-p);return g<=m&&g<=y?f:m<=y?h:p},c=function(){return[s,i,o,u,l]},d=function(f){var h=f.map(function(p){return p.reduce(function(g,m){return g+Math.abs(m)},0)});return h.indexOf(Math.min.apply(null,h))};n.processPNG=function(f,h,p,g){var m,y,b,v,k,j,I,U,P,z,q,$,F,T,N,C=this.decode.FLATE_DECODE,w="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(b=new US(f)).imgData,y=b.bits,m=b.colorSpace,k=b.colors,[4,6].indexOf(b.colorType)!==-1){if(b.bits===8){P=(U=b.pixelBitlength==32?new Uint32Array(b.decodePixels().buffer):b.pixelBitlength==16?new Uint16Array(b.decodePixels().buffer):new Uint8Array(b.decodePixels().buffer)).length,q=new Uint8Array(P*b.colors),z=new Uint8Array(P);var _,x=b.pixelBitlength-b.bits;for(T=0,N=0;T<P;T++){for(F=U[T],_=0;_<x;)q[N++]=F>>>_&255,_+=b.bits;z[T]=F>>>_&255}}if(b.bits===16){P=(U=new Uint32Array(b.decodePixels().buffer)).length,q=new Uint8Array(P*(32/b.pixelBitlength)*b.colors),z=new Uint8Array(P*(32/b.pixelBitlength)),$=b.colors>1,T=0,N=0;for(var S=0;T<P;)F=U[T++],q[N++]=F>>>0&255,$&&(q[N++]=F>>>16&255,F=U[T++],q[N++]=F>>>0&255),z[S++]=F>>>16&255;y=8}g!==n.image_compression.NONE&&e()?(f=t(q,b.width*b.colors,b.colors,g),I=t(z,b.width,1,g)):(f=q,I=z,C=void 0)}if(b.colorType===3&&(m=this.color_spaces.INDEXED,j=b.palette,b.transparency.indexed)){var A=b.transparency.indexed,B=0;for(T=0,P=A.length;T<P;++T)B+=A[T];if((B/=255)===P-1&&A.indexOf(0)!==-1)v=[A.indexOf(0)];else if(B!==P){for(U=b.decodePixels(),z=new Uint8Array(U.length),T=0,P=U.length;T<P;T++)z[T]=A[U[T]];I=t(z,b.width,1)}}var E=function(V){var X;switch(V){case n.image_compression.FAST:X=11;break;case n.image_compression.MEDIUM:X=13;break;case n.image_compression.SLOW:X=14;break;default:X=12}return X}(g);return C===this.decode.FLATE_DECODE&&(w="/Predictor "+E+" "),w+="/Colors "+k+" /BitsPerComponent "+y+" /Columns "+b.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(I&&this.__addimage__.isArrayBuffer(I)||this.__addimage__.isArrayBufferView(I))&&(I=this.__addimage__.arrayBufferToBinaryString(I)),{alias:p,data:f,index:h,filter:C,decodeParameters:w,transparency:v,palette:j,sMask:I,predictor:E,width:b.width,height:b.height,bitsPerComponent:y,colorSpace:m}}}})(_r.API),function(n){n.processGIF89A=function(e,t,r,s){var i=new qS(e),o=i.width,u=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var a={data:l,width:o,height:u},c=new H0(100).encode(a,100);return n.processJPEG.call(this,c,t,r,s)},n.processGIF87A=n.processGIF89A}(_r.API),fo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:t,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},fo.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){gn.log("bit decode error:"+t)}},fo.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*s*4,u=0;u<8&&8*s+u<this.width;u++){var l=this.palette[i>>7-u&1];this.data[o+4*u]=l.blue,this.data[o+4*u+1]=l.green,this.data[o+4*u+2]=l.red,this.data[o+4*u+3]=255}t!==0&&(this.pos+=4-t)}},fo.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<n;s++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*s*4,u=i>>4,l=15&i,a=this.palette[u];if(this.data[o]=a.blue,this.data[o+1]=a.green,this.data[o+2]=a.red,this.data[o+3]=255,2*s+1>=this.width)break;a=this.palette[l],this.data[o+4]=a.blue,this.data[o+4+1]=a.green,this.data[o+4+2]=a.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},fo.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}n!==0&&(this.pos+=4-n)}},fo.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,u=(i>>5&e)/e*255|0,l=(i>>10&e)/e*255|0,a=i>>15?255:0,c=r*this.width*4+4*s;this.data[c]=l,this.data[c+1]=u,this.data[c+2]=o,this.data[c+3]=a}this.pos+=n}},fo.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&e)/e*255|0,l=(o>>5&t)/t*255|0,a=(o>>11)/e*255|0,c=s*this.width*4+4*i;this.data[c]=a,this.data[c+1]=l,this.data[c+2]=u,this.data[c+3]=255}this.pos+=n}},fo.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},fo.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=i,this.data[u+1]=s,this.data[u+2]=r,this.data[u+3]=o}},fo.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,s){var i=new fo(e,!1),o=i.width,u=i.height,l={data:i.getData(),width:o,height:u},a=new H0(100).encode(l,100);return n.processJPEG.call(this,a,t,r,s)}}(_r.API),xb.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,s){var i=new xb(e),o=i.width,u=i.height,l={data:i.getData(),width:o,height:u},a=new H0(100).encode(l,100);return n.processJPEG.call(this,a,t,r,s)}}(_r.API),_r.API.processRGBA=function(n,e,t){for(var r=n.data,s=r.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),u=0,l=0,a=0;a<s;a+=4){var c=r[a],d=r[a+1],f=r[a+2],h=r[a+3];i[u++]=c,i[u++]=d,i[u++]=f,o[l++]=h}var p=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:p,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},_r.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},_u=_r.API,Wf=_u.getCharWidthsArray=function(n,e){var t,r,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:s.metadata.Unicode.widths,l=u.fof?u.fof:1,a=e.kerning?e.kerning:s.metadata.Unicode.kerning,c=a.fof?a.fof:1,d=e.doKerning!==!1,f=0,h=n.length,p=0,g=u[0]||l,m=[];for(t=0;t<h;t++)r=n.charCodeAt(t),typeof s.metadata.widthOfString=="function"?m.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+o*(1e3/i)||0)/1e3):(f=d&&ln(a[r])==="object"&&!isNaN(parseInt(a[r][p],10))?a[r][p]/c:0,m.push((u[r]||g)/l+f)),p=r;return m},yb=_u.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return _u.processArabic&&(n=_u.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,s)/t:Wf.apply(this,arguments).reduce(function(i,o){return i+o},0)},bb=function(n,e,t,r){for(var s=[],i=0,o=n.length,u=0;i!==o&&u+e[i]<t;)u+=e[i],i++;s.push(n.slice(0,i));var l=i;for(u=0;i!==o;)u+e[i]>r&&(s.push(n.slice(l,i)),u=0,l=i),u+=e[i],i++;return l!==i&&s.push(n.slice(l,i)),s},vb=function(n,e,t){t||(t={});var r,s,i,o,u,l,a,c=[],d=[c],f=t.textIndent||0,h=0,p=0,g=n.split(" "),m=Wf.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?g[0].length+2:t.lineIndent||0){var y=Array(l).join(" "),b=[];g.map(function(k){(k=k.split(/\s*\n/)).length>1?b=b.concat(k.map(function(j,I){return(I&&j.length?`
`:"")+j})):b.push(k[0])}),g=b,l=yb.apply(this,[y,t])}for(i=0,o=g.length;i<o;i++){var v=0;if(r=g[i],l&&r[0]==`
`&&(r=r.substr(1),v=1),f+h+(p=(s=Wf.apply(this,[r,t])).reduce(function(k,j){return k+j},0))>e||v){if(p>e){for(u=bb.apply(this,[r,s,e-(f+h),e]),c.push(u.shift()),c=[u.pop()];u.length;)d.push([u.shift()]);p=s.slice(r.length-(c[0]?c[0].length:0)).reduce(function(k,j){return k+j},0)}else c=[r];d.push(c),f=p+l,h=m}else c.push(r),f+=h+p,h=m}return a=l?function(k,j){return(j?y:"")+k.join(" ")}:function(k){return k.join(" ")},d.map(a)},_u.splitTextToSize=function(n,e,t){var r,s=(t=t||{}).fontSize||this.internal.getFontSize(),i=(function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var d=this.internal.getFont(c.fontName,c.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/s;i.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=t.lineIndent;var u,l,a=[];for(u=0,l=r.length;u<l;u++)a=a.concat(vb.apply(this,[r[u],o,i]));return a},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},s=0;s<e.length;s++)t[e[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=e[s];var i=function(d){return"0x"+parseInt(d,10).toString(16)},o=n.__fontmetrics__.compress=function(d){var f,h,p,g,m=["{"];for(var y in d){if(f=d[y],isNaN(parseInt(y,10))?h="'"+y+"'":(y=parseInt(y,10),h=(h=i(y).slice(2)).slice(0,-1)+r[h.slice(-1)]),typeof f=="number")f<0?(p=i(f).slice(3),g="-"):(p=i(f).slice(2),g=""),p=g+p.slice(0,-1)+r[p.slice(-1)];else{if(ln(f)!=="object")throw new Error("Don't know what to do with value type "+ln(f)+".");p=o(f)}m.push(h+p)}return m.push("}"),m.join("")},u=n.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,h,p,g,m={},y=1,b=m,v=[],k="",j="",I=d.length-1,U=1;U<I;U+=1)(g=d[U])=="'"?f?(p=f.join(""),f=void 0):f=[]:f?f.push(g):g=="{"?(v.push([b,p]),b={},p=void 0):g=="}"?((h=v.pop())[0][h[1]]=b,p=void 0,b=h[0]):g=="-"?y=-1:p===void 0?t.hasOwnProperty(g)?(k+=t[g],p=parseInt(k,16)*y,y=1,k=""):k+=g:t.hasOwnProperty(g)?(j+=t[g],b[p]=parseInt(j,16)*y,y=1,p=void 0,j=""):j+=g;return m},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},a={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},c={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(d){var f=d.font,h=c.Unicode[f.postScriptName];h&&(f.metadata.Unicode={},f.metadata.Unicode.widths=h.widths,f.metadata.Unicode.kerning=h.kerning);var p=a.Unicode[f.postScriptName];p&&(f.metadata.Unicode.encoding=p,f.encoding=p.codePages[0])}])}(_r.API),function(n){var e=function(t){for(var r=t.length,s=new Uint8Array(r),i=0;i<r;i++)s[i]=t.charCodeAt(i);return s};n.API.events.push(["addFont",function(t){var r=void 0,s=t.font,i=t.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,u){u=/^\x00\x01\x00\x00/.test(u)?e(u):e(ih(u)),o.metadata=n.API.TTFFont.open(u),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,r)}}])}(_r),function(n){function e(){return(Tr.canvg?Promise.resolve(Tr.canvg):Km(()=>import("./index.es-C7uJ_JNI.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}_r.API.addSvgAsImage=function(t,r,s,i,o,u,l,a){if(isNaN(r)||isNaN(s))throw gn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw gn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=i,c.height=o;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return e().then(function(p){return p.fromString(d,t,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(f)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),r,s,i,o,l,a)})}}(),_r.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,t);return this},_r.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(o),l=[],a=0,c=0,d=0;function f(p,g){var m,y=!1;for(m=0;m<p.length;m+=1)p[m]===g&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var h=u.length;for(d=0;d<h;d+=1)t[u[d]].value=t[u[d]].defaultValue,t[u[d]].explicitSet=!1}if(ln(n)==="object"){for(s in n)if(i=n[s],f(u,s)&&i!==void 0){if(t[s].type==="boolean"&&typeof i=="boolean")t[s].value=i;else if(t[s].type==="name"&&f(t[s].valueSet,i))t[s].value=i;else if(t[s].type==="integer"&&Number.isInteger(i))t[s].value=i;else if(t[s].type==="array"){for(a=0;a<i.length;a+=1)if(r=!0,i[a].length===1&&typeof i[a][0]=="number")l.push(String(i[a]-1));else if(i[a].length>1){for(c=0;c<i[a].length;c+=1)typeof i[a][c]!="number"&&(r=!1);r===!0&&l.push([i[a][0]-1,i[a][1]-1].join(" "))}t[s].value="["+l.join(" ")+"]"}else t[s].value=t[s].defaultValue;t[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var p,g=[];for(p in t)t[p].explicitSet===!0&&(t[p].type==="name"?g.push("/"+p+" /"+t[p].value):g.push("/"+p+" "+t[p].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),a=i.length+o.length+u.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+a+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+u+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(_r.API),function(n){var e=n.API,t=e.pdfEscape16=function(i,o){for(var u,l=o.metadata.Unicode.widths,a=["","0","00","000","0000"],c=[""],d=0,f=i.length;d<f;++d){if(u=o.metadata.characterToGlyph(i.charCodeAt(d)),o.metadata.glyIdsUsed.push(u),o.metadata.toUnicode[u]=i.charCodeAt(d),l.indexOf(u)==-1&&(l.push(u),l.push([parseInt(o.metadata.widthOfGlyph(u),10)])),u=="0")return c.join("");u=u.toString(16),c.push(a[4-u.length],u)}return c.join("")},r=function(i){var o,u,l,a,c,d,f;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,f=(u=Object.keys(i).sort(function(h,p){return h-p})).length;d<f;d++)o=u[d],l.length>=100&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(a=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+a+">"));return l.length&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),c+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(o){var u=o.font,l=o.out,a=o.newObject,c=o.putStream;if(u.metadata instanceof n.API.TTFFont&&u.encoding==="Identity-H"){for(var d=u.metadata.Unicode.widths,f=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),h="",p=0;p<f.length;p++)h+=String.fromCharCode(f[p]);var g=a();c({data:h,addLength1:!0,objectId:g}),l("endobj");var m=a();c({data:r(u.metadata.toUnicode),addLength1:!0,objectId:m}),l("endobj");var y=a();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Cu(u.fontName)),l("/FontFile2 "+g+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(u.metadata.bbox)),l("/Flags "+u.metadata.flags),l("/StemV "+u.metadata.stemV),l("/ItalicAngle "+u.metadata.italicAngle),l("/Ascent "+u.metadata.ascender),l("/Descent "+u.metadata.decender),l("/CapHeight "+u.metadata.capHeight),l(">>"),l("endobj");var b=a();l("<<"),l("/Type /Font"),l("/BaseFont /"+Cu(u.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+n.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+u.encoding+")"),l(">>"),l(">>"),l("endobj"),u.objectNumber=a(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+m+" 0 R"),l("/BaseFont /"+Cu(u.fontName)),l("/Encoding /"+u.encoding),l("/DescendantFonts ["+b+" 0 R]"),l(">>"),l("endobj"),u.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(o){var u=o.font,l=o.out,a=o.newObject,c=o.putStream;if(u.metadata instanceof n.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var d=u.metadata.rawData,f="",h=0;h<d.length;h++)f+=String.fromCharCode(d[h]);var p=a();c({data:f,addLength1:!0,objectId:p}),l("endobj");var g=a();c({data:r(u.metadata.toUnicode),addLength1:!0,objectId:g}),l("endobj");var m=a();l("<<"),l("/Descent "+u.metadata.decender),l("/CapHeight "+u.metadata.capHeight),l("/StemV "+u.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+p+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(u.metadata.bbox)),l("/FontName /"+Cu(u.fontName)),l("/ItalicAngle "+u.metadata.italicAngle),l("/Ascent "+u.metadata.ascender),l(">>"),l("endobj"),u.objectNumber=a();for(var y=0;y<u.metadata.hmtx.widths.length;y++)u.metadata.hmtx.widths[y]=parseInt(u.metadata.hmtx.widths[y]*(1e3/u.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+Cu(u.fontName)+"/FontDescriptor "+m+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),l("endobj"),u.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,u=i.text||"",l=i.x,a=i.y,c=i.options||{},d=i.mutex||{},f=d.pdfEscape,h=d.activeFontKey,p=d.fonts,g=h,m="",y=0,b="",v=p[g].encoding;if(p[g].encoding!=="Identity-H")return{text:u,x:l,y:a,options:c,mutex:d};for(b=u,g=h,Array.isArray(u)&&(b=u[0]),y=0;y<b.length;y+=1)p[g].metadata.hasOwnProperty("cmap")&&(o=p[g].metadata.cmap.unicode.codeMap[b[y].charCodeAt(0)]),o||b[y].charCodeAt(0)<256&&p[g].metadata.hasOwnProperty("Unicode")?m+=b[y]:m+="";var k="";return parseInt(g.slice(1))<14||v==="WinAnsiEncoding"?k=f(m,g).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):v==="Identity-H"&&(k=t(m,p[g])),d.isHex=!0,{text:k,x:l,y:a,options:c,mutex:d}};e.events.push(["postProcessText",function(i){var o=i.text||"",u=[],l={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var a=0;for(a=0;a<o.length;a+=1)Array.isArray(o[a])&&o[a].length===3?u.push([s(Object.assign({},l,{text:o[a][0]})).text,o[a][1],o[a][2]]):u.push(s(Object.assign({},l,{text:o[a]})).text);i.text=u}else i.text=s(Object.assign({},l,{text:o})).text}])}(_r),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(_r.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var s,i,o,u,l,a,c,d=e,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],p={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},m=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,v=0;this.__bidiEngine__={};var k=function($){var F=$.charCodeAt(),T=F>>8,N=g[T];return N!==void 0?d[256*N+(255&F)]:T===252||T===253?"AL":y.test(T)?"L":T===8?"R":"N"},j=function($){for(var F,T=0;T<$.length;T++){if((F=k($.charAt(T)))==="L")return!1;if(F==="R")return!0}return!1},I=function($,F,T,N){var C,w,_,x,S=F[N];switch(S){case"L":case"R":b=!1;break;case"N":case"AN":break;case"EN":b&&(S="AN");break;case"AL":b=!0,S="R";break;case"WS":S="N";break;case"CS":N<1||N+1>=F.length||(C=T[N-1])!=="EN"&&C!=="AN"||(w=F[N+1])!=="EN"&&w!=="AN"?S="N":b&&(w="AN"),S=w===C?w:"N";break;case"ES":S=(C=N>0?T[N-1]:"B")==="EN"&&N+1<F.length&&F[N+1]==="EN"?"EN":"N";break;case"ET":if(N>0&&T[N-1]==="EN"){S="EN";break}if(b){S="N";break}for(_=N+1,x=F.length;_<x&&F[_]==="ET";)_++;S=_<x&&F[_]==="EN"?"EN":"N";break;case"NSM":if(o&&!u){for(x=F.length,_=N+1;_<x&&F[_]==="NSM";)_++;if(_<x){var A=$[N],B=A>=1425&&A<=2303||A===64286;if(C=F[_],B&&(C==="R"||C==="AL")){S="R";break}}}S=N<1||(C=F[N-1])==="B"?"N":T[N-1];break;case"B":b=!1,s=!0,S=v;break;case"S":i=!0,S="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"BN":S="N"}return S},U=function($,F,T){var N=$.split("");return T&&P(N,T,{hiLevel:v}),N.reverse(),F&&F.reverse(),N.join("")},P=function($,F,T){var N,C,w,_,x,S=-1,A=$.length,B=0,E=[],V=v?h:f,X=[];for(b=!1,s=!1,i=!1,C=0;C<A;C++)X[C]=k($[C]);for(w=0;w<A;w++){if(x=B,E[w]=I($,X,E,w),N=240&(B=V[x][p[E[w]]]),B&=15,F[w]=_=V[B][5],N>0)if(N===16){for(C=S;C<w;C++)F[C]=1;S=-1}else S=-1;if(V[B][6])S===-1&&(S=w);else if(S>-1){for(C=S;C<w;C++)F[C]=_;S=-1}X[w]==="B"&&(F[w]=0),T.hiLevel|=_}i&&function(Q,D,Z){for(var L=0;L<Z;L++)if(Q[L]==="S"){D[L]=v;for(var O=L-1;O>=0&&Q[O]==="WS";O--)D[O]=v}}(X,F,A)},z=function($,F,T,N,C){if(!(C.hiLevel<$)){if($===1&&v===1&&!s)return F.reverse(),void(T&&T.reverse());for(var w,_,x,S,A=F.length,B=0;B<A;){if(N[B]>=$){for(x=B+1;x<A&&N[x]>=$;)x++;for(S=B,_=x-1;S<_;S++,_--)w=F[S],F[S]=F[_],F[_]=w,T&&(w=T[S],T[S]=T[_],T[_]=w);B=x}B++}}},q=function($,F,T){var N=$.split(""),C={hiLevel:v};return T||(T=[]),P(N,T,C),function(w,_,x){if(x.hiLevel!==0&&c)for(var S,A=0;A<w.length;A++)_[A]===1&&(S=m.indexOf(w[A]))>=0&&(w[A]=m[S+1])}(N,T,C),z(2,N,F,T,C),z(1,N,F,T,C),N.join("")};return this.__bidiEngine__.doBidiReorder=function($,F,T){if(function(C,w){if(w)for(var _=0;_<C.length;_++)w[_]=_;u===void 0&&(u=j(C)),a===void 0&&(a=j(C))}($,F),o||!l||a)if(o&&l&&u^a)v=u?1:0,$=U($,F,T);else if(!o&&l&&a)v=u?1:0,$=q($,F,T),$=U($,F);else if(!o||u||l||a){if(o&&!l&&u^a)$=U($,F),u?(v=0,$=q($,F,T)):(v=1,$=q($,F,T),$=U($,F));else if(o&&u&&!l&&a)v=1,$=q($,F,T),$=U($,F);else if(!o&&!l&&u^a){var N=c;u?(v=1,$=q($,F,T),v=0,c=!1,$=q($,F,T),c=N):(v=0,$=q($,F,T),$=U($,F),v=1,c=!1,$=q($,F,T),c=N,$=U($,F))}}else v=0,$=q($,F,T);else v=u?1:0,$=q($,F,T);return $},this.__bidiEngine__.setOptions=function($){$&&(o=$.isInputVisual,l=$.isOutputVisual,u=$.isInputRtl,a=$.isOutputRtl,c=$.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var s=r.text,i=(r.x,r.y,r.options||{}),o=(r.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,t.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var u=0;for(o=[],u=0;u<s.length;u+=1)Object.prototype.toString.call(s[u])==="[object Array]"?o.push([t.doBidiReorder(s[u][0]),s[u][1],s[u][2]]):o.push([t.doBidiReorder(s[u])]);r.text=o}else r.text=t.doBidiReorder(s);t.setOptions({isInputVisual:!0})}])}(_r),_r.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new _l(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new nk(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new HS(this.contents),this.head=new VS(this),this.name=new KS(this),this.cmap=new c3(this),this.toUnicode={},this.hhea=new WS(this),this.maxp=new ZS(this),this.hmtx=new JS(this),this.post=new YS(this),this.os2=new XS(this),this.loca=new rk(this),this.glyf=new QS(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,u,l,a;for(a=[],o=0,u=(l=this.bbox).length;o<u;o++)e=l[o],a.push(Math.round(e*this.scaleFactor));return a}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),32768&(t=s>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var s,i,o,u;for(o=0,i=0,u=(e=""+e).length;0<=u?i<u:i>u;i=0<=u?++i:--i)s=e.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Eo,_l=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,s;for(s=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)s.push(this.writeByte(e.charCodeAt(t)));return s},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,s,i,o,u,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),u=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^u)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*s+16777216*i+65536*o+256*u+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,s,i;for(i=[],r=0,s=e.length;r<s;r++)t=e[r],i.push(this.writeByte(t));return i},n}(),HS=function(){var n;function e(t){var r,s,i;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,s,i,o,u,l,a,c,d,f,h,p,g;for(g in h=Object.keys(t).length,l=Math.log(2),d=16*Math.floor(Math.log(h)/l),o=Math.floor(d/l),c=16*h-d,(s=new _l).writeInt(this.scalarType),s.writeShort(h),s.writeShort(d),s.writeShort(o),s.writeShort(c),i=16*h,a=s.pos+i,u=null,p=[],t)for(f=t[g],s.writeString(g),s.writeInt(n(f)),s.writeInt(a),s.writeInt(f.length),p=p.concat(f),g==="head"&&(u=a),a+=f.length;a%4;)p.push(0),a++;return s.write(p),r=2981146554-n(s.data),s.pos=u+8,s.writeUInt32(r),s.data},n=function(t){var r,s,i,o;for(t=h3.call(t);t.length%4;)t.push(0);for(i=new _l(t),s=0,r=0,o=t.length;r<o;r=r+=4)s+=i.readUInt32();return 4294967295&s},e}(),$S={}.hasOwnProperty,Wo=function(n,e){for(var t in e)$S.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Eo=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var VS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Eo),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new _l).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),_b=function(){function n(e,t){var r,s,i,o,u,l,a,c,d,f,h,p,g,m,y,b,v;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(h=e.readUInt16(),f=h/2,e.pos+=6,i=function(){var k,j;for(j=[],l=k=0;0<=f?k<f:k>f;l=0<=f?++k:--k)j.push(e.readUInt16());return j}(),e.pos+=2,g=function(){var k,j;for(j=[],l=k=0;0<=f?k<f:k>f;l=0<=f?++k:--k)j.push(e.readUInt16());return j}(),a=function(){var k,j;for(j=[],l=k=0;0<=f?k<f:k>f;l=0<=f?++k:--k)j.push(e.readUInt16());return j}(),c=function(){var k,j;for(j=[],l=k=0;0<=f?k<f:k>f;l=0<=f?++k:--k)j.push(e.readUInt16());return j}(),s=(this.length-e.pos+this.offset)/2,u=function(){var k,j;for(j=[],l=k=0;0<=s?k<s:k>s;l=0<=s?++k:--k)j.push(e.readUInt16());return j}(),l=y=0,v=i.length;y<v;l=++y)for(m=i[l],r=b=p=g[l];p<=m?b<=m:b>=m;r=p<=m?++b:--b)c[l]===0?o=r+a[l]:(o=u[c[l]/2+(r-p)-(f-l)]||0)!==0&&(o+=a[l]),this.codeMap[r]=65535&o}e.pos=d}return n.encode=function(e,t){var r,s,i,o,u,l,a,c,d,f,h,p,g,m,y,b,v,k,j,I,U,P,z,q,$,F,T,N,C,w,_,x,S,A,B,E,V,X,Q,D,Z,L,O,G,nt,ct;switch(N=new _l,o=Object.keys(e).sort(function(ot,mt){return ot-mt}),t){case"macroman":for(g=0,m=function(){var ot=[];for(p=0;p<256;++p)ot.push(0);return ot}(),b={0:0},i={},C=0,S=o.length;C<S;C++)b[O=e[s=o[C]]]==null&&(b[O]=++g),i[s]={old:e[s],new:b[e[s]]},m[s]=b[e[s]];return N.writeUInt16(1),N.writeUInt16(0),N.writeUInt32(12),N.writeUInt16(0),N.writeUInt16(262),N.writeUInt16(0),N.write(m),{charMap:i,subtable:N.data,maxGlyphID:g+1};case"unicode":for(F=[],d=[],v=0,b={},r={},y=a=null,w=0,A=o.length;w<A;w++)b[j=e[s=o[w]]]==null&&(b[j]=++v),r[s]={old:j,new:b[j]},u=b[j]-s,y!=null&&u===a||(y&&d.push(y),F.push(s),a=u),y=s;for(y&&d.push(y),d.push(65535),F.push(65535),q=2*(z=F.length),P=2*Math.pow(Math.log(z)/Math.LN2,2),f=Math.log(P/2)/Math.LN2,U=2*z-P,l=[],I=[],h=[],p=_=0,B=F.length;_<B;p=++_){if($=F[p],c=d[p],$===65535){l.push(0),I.push(0);break}if($-(T=r[$].new)>=32768)for(l.push(0),I.push(2*(h.length+z-p)),s=x=$;$<=c?x<=c:x>=c;s=$<=c?++x:--x)h.push(r[s].new);else l.push(T-$),I.push(0)}for(N.writeUInt16(3),N.writeUInt16(1),N.writeUInt32(12),N.writeUInt16(4),N.writeUInt16(16+8*z+2*h.length),N.writeUInt16(0),N.writeUInt16(q),N.writeUInt16(P),N.writeUInt16(f),N.writeUInt16(U),Z=0,E=d.length;Z<E;Z++)s=d[Z],N.writeUInt16(s);for(N.writeUInt16(0),L=0,V=F.length;L<V;L++)s=F[L],N.writeUInt16(s);for(G=0,X=l.length;G<X;G++)u=l[G],N.writeUInt16(u);for(nt=0,Q=I.length;nt<Q;nt++)k=I[nt],N.writeUInt16(k);for(ct=0,D=h.length;ct<D;ct++)g=h[ct],N.writeUInt16(g);return{charMap:r,subtable:N.data,maxGlyphID:v+1}}},n}(),c3=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Eo),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,s,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)r=new _b(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var s,i;return r==null&&(r="macroman"),s=_b.encode(t,r),(i=new _l).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},e}(),WS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Eo),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),XS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Eo),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(t.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(t.readInt());return s}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(t.readInt());return s}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),YS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Eo),e.prototype.tag="post",e.prototype.parse=function(t){var r,s,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(s=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)r=t.readByte(),i.push(this.names.push(t.readString(r)));return i;case 151552:return s=t.readUInt16(),this.offsets=t.read(s);case 196608:break;case 262144:return this.map=(function(){var u,l,a;for(a=[],o=u=0,l=this.file.maxp.numGlyphs;0<=l?u<l:u>l;o=0<=l?++u:--u)a.push(t.readUInt32());return a}).call(this)}},e}(),GS=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},KS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Eo),e.prototype.tag="name",e.prototype.parse=function(t){var r,s,i,o,u,l,a,c,d,f,h;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),s=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)s.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(a={},o=d=0,f=s.length;d<f;o=++d)i=s[o],t.pos=i.offset,c=t.readString(i.length),u=new GS(c,i),a[h=i.nameID]==null&&(a[h]=[]),a[i.nameID].push(u);this.strings=a,this.copyright=a[0],this.fontFamily=a[1],this.fontSubfamily=a[2],this.uniqueSubfamily=a[3],this.fontName=a[4],this.version=a[5];try{this.postscriptName=a[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=a[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=a[7],this.manufacturer=a[8],this.designer=a[9],this.description=a[10],this.vendorUrl=a[11],this.designerUrl=a[12],this.license=a[13],this.licenseUrl=a[14],this.preferredFamily=a[15],this.preferredSubfamily=a[17],this.compatibleFull=a[18],this.sampleText=a[19]},e}(),ZS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Eo),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),JS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Eo),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,s,i,o,u,l,a;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,d;for(d=[],r=c=0;0<=i?c<i:c>i;r=0<=i?++c:--c)d.push(t.readInt16());return d}(),this.widths=(function(){var c,d,f,h;for(h=[],c=0,d=(f=this.metrics).length;c<d;c++)o=f[c],h.push(o.advance);return h}).call(this),s=this.widths[this.widths.length-1],a=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)a.push(this.widths.push(s));return a},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),h3=[].slice,QS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Eo),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,s,i,o,u,l,a,c,d,f;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,s=o.indexOf(t),(i=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+s,u=(l=new _l(r.read(i))).readShort(),c=l.readShort(),f=l.readShort(),a=l.readShort(),d=l.readShort(),this.cache[t]=u===-1?new ek(l,c,f,a,d):new tk(l,u,c,f,a,d),this.cache[t]))},e.prototype.encode=function(t,r,s){var i,o,u,l,a;for(u=[],o=[],l=0,a=r.length;l<a;l++)i=t[r[l]],o.push(u.length),i&&(u=u.concat(i.encode(s)));return o.push(u.length),{table:u,offsets:o}},e}(),tk=function(){function n(e,t,r,s,i,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),ek=function(){function n(e,t,r,s,i){var o,u;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;u=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&u;)o.pos+=1&u?4:2,128&u?o.pos+=8:64&u?o.pos+=4:8&u&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new _l(h3.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),rk=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Eo),e.prototype.tag="loca",e.prototype.parse=function(t){var r,s;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var s=new Uint32Array(this.offsets.length),i=0,o=0,u=0;u<s.length;++u)if(s[u]=i,o<r.length&&r[o]==u){++o,s[u]=i;var l=this.offsets[u],a=this.offsets[u+1]-l;a>0&&(i+=a)}for(var c=new Array(4*s.length),d=0;d<s.length;++d)c[4*d+3]=255&s[d],c[4*d+2]=(65280&s[d])>>8,c[4*d+1]=(16711680&s[d])>>16,c[4*d]=(4278190080&s[d])>>24;return c},e}(),nk=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,s,i;for(t in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)r=i[t],e[t]=s[r];return e},n.prototype.glyphsFor=function(e){var t,r,s,i,o,u,l;for(s={},o=0,u=e.length;o<u;o++)s[i=e[o]]=this.font.glyf.glyphFor(i);for(i in t=[],s)(r=s[i])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(i in l=this.glyphsFor(t))r=l[i],s[i]=r;return s},n.prototype.encode=function(e,t){var r,s,i,o,u,l,a,c,d,f,h,p,g,m,y;for(s in r=c3.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),h={0:0},y=r.charMap)h[(l=y[s]).old]=l.new;for(p in f=r.maxGlyphID,o)p in h||(h[p]=f++);return c=function(b){var v,k;for(v in k={},b)k[b[v]]=v;return k}(h),d=Object.keys(c).sort(function(b,v){return b-v}),g=function(){var b,v,k;for(k=[],b=0,v=d.length;b<v;b++)u=d[b],k.push(c[u]);return k}(),i=this.font.glyf.encode(o,g,h),a=this.font.loca.encode(i.offsets,g),m={cmap:this.font.cmap.raw(),glyf:i.table,loca:a,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(m["OS/2"]=this.font.os2.raw()),this.font.directory.encode(m)},n}();_r.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,s,i,o;if(Array.isArray(t))return"["+function(){var u,l,a;for(a=[],u=0,l=t.length;u<l;u++)r=t[u],a.push(e.convert(r));return a}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(s in i=["<<"],t)o=t[s],i.push("/"+s+" "+e.convert(o));return i.push(">>"),i.join(`
`)}return""+t},e}();async function ik(n,e){var z;if(!n.grid)throw new Error("Project has no grid data");const{grid:t,palette:r,settings:s}=n,{pages:i,includeGridLines:o,includeLegend:u,backgroundColor:l,selection:a}=e,c=a?Math.min(a.startRow,a.endRow):0,d=a?Math.max(a.startRow,a.endRow):s.height-1,f=a?Math.min(a.startCol,a.endCol):0,p=(a?Math.max(a.startCol,a.endCol):s.width-1)-f+1,g=d-c+1,m=new Map(r.map(q=>[q.id,q])),y=210,b=297,v=10,k=i===1||i===4?1:i===9?3:4,j=i===1?1:i===4?2:i===9?3:4,I=y-2*v,U=b-2*v-(u?40:0),P=new _r({orientation:"portrait",unit:"mm",format:"a4"});for(let q=0;q<j;q++)for(let $=0;$<k;$++){($>0||q>0)&&P.addPage(),P.setFillColor(l),P.rect(0,0,y,b,"F");const F=Math.ceil(p/k),T=Math.ceil(g/j),N=$*F,C=Math.min(($+1)*F,p),w=q*T,_=Math.min((q+1)*T,g),x=C-N,S=_-w,A=I/x,B=U/S,E=Math.min(A,B);for(let V=w;V<_;V++)for(let X=N;X<C;X++){const Q=(z=t.cells[c+V])==null?void 0:z[f+X];if(Q!=null&&Q.colorId){const D=m.get(Q.colorId);D&&(P.setFillColor(D.color),P.rect(v+(X-N)*E,v+(V-w)*E,E,E,"F"))}}if(o){P.setDrawColor(s.gridLines.color),P.setLineWidth(.1);for(let V=0;V<=x;V++)P.line(v+V*E,v,v+V*E,v+S*E);for(let V=0;V<=S;V++)P.line(v,v+V*E,v+x*E,v+V*E)}if(u&&$===0&&q===0&&r.length>0){const V=v+S*E+5,X=5,Q=50;P.setFontSize(8),P.setTextColor(0,0,0),r.forEach((D,Z)=>{const L=Z%4,O=Math.floor(Z/4),G=v+L*Q,nt=V+O*8;P.setFillColor(D.color),P.rect(G,nt,X,X,"F"),P.setDrawColor(0,0,0),P.rect(G,nt,X,X,"S"),P.text(D.abbreviation||D.name.substring(0,8),G+X+2,nt+3.5)})}if(i>1){const V=q*k+$+1;P.setFontSize(8),P.setTextColor(100,100,100),P.text(`Page ${V} of ${i}`,y-v-20,b-5)}}return P}async function sk(n,e){(await ik(n,e)).save(`${n.name.replace(/[^a-zA-Z0-9-_]/g,"_")}.pdf`)}function Xf(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var f3={exports:{}};/*! ExcelJS 19-10-2023 */(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,s,i){function o(a,c){if(!s[a]){if(!r[a]){var d=typeof Xf=="function"&&Xf;if(!c&&d)return d(a,!0);if(u)return u(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var h=s[a]={exports:{}};r[a][0].call(h.exports,function(p){return o(r[a][1][p]||p)},h,h.exports,t,r,s,i)}return s[a].exports}for(var u=typeof Xf=="function"&&Xf,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(t,r,s){const i=t("fs"),o=t("fast-csv"),u=t("dayjs/plugin/customParseFormat"),l=t("dayjs/plugin/utc"),a=t("dayjs").extend(u).extend(l),c=t("../utils/stream-buf"),{fs:{exists:d}}=t("../utils/utils"),f={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}};r.exports=class{constructor(h){this.workbook=h,this.worksheet=null}async readFile(h,p){if(p=p||{},!await d(h))throw new Error("File not found: "+h);const g=i.createReadStream(h),m=await this.read(g,p);return g.close(),m}read(h,p){return p=p||{},new Promise((g,m)=>{const y=this.workbook.addWorksheet(p.sheetName),b=p.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],v=p.map||function(j){if(j==="")return null;const I=Number(j);if(!Number.isNaN(I)&&I!==1/0)return I;const U=b.reduce((z,q)=>{if(z)return z;const $=a(j,q,!0);return $.isValid()?$:null},null);if(U)return new Date(U.valueOf());const P=f[j];return P!==void 0?P:j},k=o.parse(p.parserOptions).on("data",j=>{y.addRow(j.map(v))}).on("end",()=>{k.emit("worksheet",y)});k.on("worksheet",g).on("error",m),h.pipe(k)})}createInputStream(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}write(h,p){return new Promise((g,m)=>{p=p||{};const y=this.workbook.getWorksheet(p.sheetName||p.sheetId),b=o.format(p.formatterOptions);h.on("finish",()=>{g()}),b.on("error",m),b.pipe(h);const{dateFormat:v,dateUTC:k}=p,j=p.map||(P=>{if(P){if(P.text||P.hyperlink)return P.hyperlink||P.text||"";if(P.formula||P.result)return P.result||"";if(P instanceof Date)return v?k?a.utc(P).format(v):a(P).format(v):k?a.utc(P).format():a(P).format();if(P.error)return P.error;if(typeof P=="object")return JSON.stringify(P)}return P}),I=p.includeEmptyRows===void 0||p.includeEmptyRows;let U=1;y&&y.eachRow((P,z)=>{if(I)for(;U++<z-1;)b.write([]);const{values:q}=P;q.shift(),b.write(q.map(j)),U=z}),b.end()})}writeFile(h,p){const g={encoding:(p=p||{}).encoding||"utf8"},m=i.createWriteStream(h,g);return this.write(m,p)}async writeBuffer(h){const p=new c;return await this.write(p,h),p.read()}}},{"../utils/stream-buf":24,"../utils/utils":27,dayjs:391,"dayjs/plugin/customParseFormat":392,"dayjs/plugin/utc":393,"fast-csv":424,fs:216}],2:[function(t,r,s){const i=t("../utils/col-cache");class o{constructor(l,a){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.worksheet=l,a)if(typeof a=="string"){const d=i.decodeAddress(a);this.nativeCol=d.col+c,this.nativeColOff=0,this.nativeRow=d.row+c,this.nativeRowOff=0}else a.nativeCol!==void 0?(this.nativeCol=a.nativeCol||0,this.nativeColOff=a.nativeColOff||0,this.nativeRow=a.nativeRow||0,this.nativeRowOff=a.nativeRowOff||0):a.col!==void 0?(this.col=a.col+c,this.row=a.row+c):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0}static asInstance(l){return l instanceof o||l==null?l:new o(l)}get col(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth}set col(l){this.nativeCol=Math.floor(l),this.nativeColOff=Math.floor((l-this.nativeCol)*this.colWidth)}get row(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight}set row(l){this.nativeRow=Math.floor(l),this.nativeRowOff=Math.floor((l-this.nativeRow)*this.rowHeight)}get colWidth(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}get rowHeight(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}get model(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}}set model(l){this.nativeCol=l.nativeCol,this.nativeColOff=l.nativeColOff,this.nativeRow=l.nativeRow,this.nativeRowOff=l.nativeRowOff}}r.exports=o},{"../utils/col-cache":19}],3:[function(t,r,s){const i=t("../utils/col-cache"),o=t("../utils/under-dash"),u=t("./enums"),{slideFormula:l}=t("../utils/shared-formula"),a=t("./note");class c{constructor(h,p,g){if(!h||!p)throw new Error("A Cell needs a Row");this._row=h,this._column=p,i.validateAddress(g),this._address=g,this._value=d.create(c.Types.Null,this),this.style=this._mergeStyle(h.style,p.style,{}),this._mergeCount=0}get worksheet(){return this._row.worksheet}get workbook(){return this._row.worksheet.workbook}destroy(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}get numFmt(){return this.style.numFmt}set numFmt(h){this.style.numFmt=h}get font(){return this.style.font}set font(h){this.style.font=h}get alignment(){return this.style.alignment}set alignment(h){this.style.alignment=h}get border(){return this.style.border}set border(h){this.style.border=h}get fill(){return this.style.fill}set fill(h){this.style.fill=h}get protection(){return this.style.protection}set protection(h){this.style.protection=h}_mergeStyle(h,p,g){const m=h&&h.numFmt||p&&p.numFmt;m&&(g.numFmt=m);const y=h&&h.font||p&&p.font;y&&(g.font=y);const b=h&&h.alignment||p&&p.alignment;b&&(g.alignment=b);const v=h&&h.border||p&&p.border;v&&(g.border=v);const k=h&&h.fill||p&&p.fill;k&&(g.fill=k);const j=h&&h.protection||p&&p.protection;return j&&(g.protection=j),g}get address(){return this._address}get row(){return this._row.number}get col(){return this._column.number}get $col$row(){return`$${this._column.letter}$${this.row}`}get type(){return this._value.type}get effectiveType(){return this._value.effectiveType}toCsvString(){return this._value.toCsvString()}addMergeRef(){this._mergeCount++}releaseMergeRef(){this._mergeCount--}get isMerged(){return this._mergeCount>0||this.type===c.Types.Merge}merge(h,p){this._value.release(),this._value=d.create(c.Types.Merge,this,h),p||(this.style=h.style)}unmerge(){this.type===c.Types.Merge&&(this._value.release(),this._value=d.create(c.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}isMergedTo(h){return this._value.type===c.Types.Merge&&this._value.isMergedTo(h)}get master(){return this.type===c.Types.Merge?this._value.master:this}get isHyperlink(){return this._value.type===c.Types.Hyperlink}get hyperlink(){return this._value.hyperlink}get value(){return this._value.value}set value(h){this.type!==c.Types.Merge?(this._value.release(),this._value=d.create(d.getType(h),this,h)):this._value.master.value=h}get note(){return this._comment&&this._comment.note}set note(h){this._comment=new a(h)}get text(){return this._value.toString()}get html(){return o.escapeHtml(this.text)}toString(){return this.text}_upgradeToHyperlink(h){this.type===c.Types.String&&(this._value=d.create(c.Types.Hyperlink,this,{text:this._value.value,hyperlink:h}))}get formula(){return this._value.formula}get result(){return this._value.result}get formulaType(){return this._value.formulaType}get fullAddress(){const{worksheet:h}=this._row;return{sheetName:h.name,address:this.address,row:this.row,col:this.col}}get name(){return this.names[0]}set name(h){this.names=[h]}get names(){return this.workbook.definedNames.getNamesEx(this.fullAddress)}set names(h){const{definedNames:p}=this.workbook;p.removeAllNames(this.fullAddress),h.forEach(g=>{p.addEx(this.fullAddress,g)})}addName(h){this.workbook.definedNames.addEx(this.fullAddress,h)}removeName(h){this.workbook.definedNames.removeEx(this.fullAddress,h)}removeAllNames(){this.workbook.definedNames.removeAllNames(this.fullAddress)}get _dataValidations(){return this.worksheet.dataValidations}get dataValidation(){return this._dataValidations.find(this.address)}set dataValidation(h){this._dataValidations.add(this.address,h)}get model(){const{model:h}=this._value;return h.style=this.style,this._comment&&(h.comment=this._comment.model),h}set model(h){if(this._value.release(),this._value=d.create(h.type,this),this._value.model=h,h.comment)switch(h.comment.type){case"note":this._comment=a.fromModel(h.comment)}h.style?this.style=h.style:this.style={}}}c.Types=u.ValueType;const d={getType:f=>f==null?c.Types.Null:f instanceof String||typeof f=="string"?c.Types.String:typeof f=="number"?c.Types.Number:typeof f=="boolean"?c.Types.Boolean:f instanceof Date?c.Types.Date:f.text&&f.hyperlink?c.Types.Hyperlink:f.formula||f.sharedFormula?c.Types.Formula:f.richText?c.Types.RichText:f.sharedString?c.Types.SharedString:f.error?c.Types.Error:c.Types.JSON,types:[{t:c.Types.Null,f:class{constructor(f){this.model={address:f.address,type:c.Types.Null}}get value(){return null}set value(f){}get type(){return c.Types.Null}get effectiveType(){return c.Types.Null}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return""}release(){}toString(){return""}}},{t:c.Types.Number,f:class{constructor(f,h){this.model={address:f.address,type:c.Types.Number,value:h}}get value(){return this.model.value}set value(f){this.model.value=f}get type(){return c.Types.Number}get effectiveType(){return c.Types.Number}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:c.Types.String,f:class{constructor(f,h){this.model={address:f.address,type:c.Types.String,value:h}}get value(){return this.model.value}set value(f){this.model.value=f}get type(){return c.Types.String}get effectiveType(){return c.Types.String}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return`"${this.model.value.replace(/"/g,'""')}"`}release(){}toString(){return this.model.value}}},{t:c.Types.Date,f:class{constructor(f,h){this.model={address:f.address,type:c.Types.Date,value:h}}get value(){return this.model.value}set value(f){this.model.value=f}get type(){return c.Types.Date}get effectiveType(){return c.Types.Date}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.model.value.toISOString()}release(){}toString(){return this.model.value.toString()}}},{t:c.Types.Hyperlink,f:class{constructor(f,h){this.model={address:f.address,type:c.Types.Hyperlink,text:h?h.text:void 0,hyperlink:h?h.hyperlink:void 0},h&&h.tooltip&&(this.model.tooltip=h.tooltip)}get value(){const f={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(f.tooltip=this.model.tooltip),f}set value(f){this.model={text:f.text,hyperlink:f.hyperlink},f.tooltip&&(this.model.tooltip=f.tooltip)}get text(){return this.model.text}set text(f){this.model.text=f}get hyperlink(){return this.model.hyperlink}set hyperlink(f){this.model.hyperlink=f}get type(){return c.Types.Hyperlink}get effectiveType(){return c.Types.Hyperlink}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.model.hyperlink}release(){}toString(){return this.model.text}}},{t:c.Types.Formula,f:class{constructor(f,h){this.cell=f,this.model={address:f.address,type:c.Types.Formula,shareType:h?h.shareType:void 0,ref:h?h.ref:void 0,formula:h?h.formula:void 0,sharedFormula:h?h.sharedFormula:void 0,result:h?h.result:void 0}}_copyModel(f){const h={},p=g=>{const m=f[g];m&&(h[g]=m)};return p("formula"),p("result"),p("ref"),p("shareType"),p("sharedFormula"),h}get value(){return this._copyModel(this.model)}set value(f){this.model=this._copyModel(f)}validate(f){switch(d.getType(f)){case c.Types.Null:case c.Types.String:case c.Types.Number:case c.Types.Date:break;case c.Types.Hyperlink:case c.Types.Formula:default:throw new Error("Cannot process that type of result value")}}get dependencies(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}get formula(){return this.model.formula||this._getTranslatedFormula()}set formula(f){this.model.formula=f}get formulaType(){return this.model.formula?u.FormulaType.Master:this.model.sharedFormula?u.FormulaType.Shared:u.FormulaType.None}get result(){return this.model.result}set result(f){this.model.result=f}get type(){return c.Types.Formula}get effectiveType(){const f=this.model.result;return f==null?u.ValueType.Null:f instanceof String||typeof f=="string"?u.ValueType.String:typeof f=="number"?u.ValueType.Number:f instanceof Date?u.ValueType.Date:f.text&&f.hyperlink?u.ValueType.Hyperlink:f.formula?u.ValueType.Formula:u.ValueType.Null}get address(){return this.model.address}set address(f){this.model.address=f}_getTranslatedFormula(){if(!this._translatedFormula&&this.model.sharedFormula){const{worksheet:f}=this.cell,h=f.findCell(this.model.sharedFormula);this._translatedFormula=h&&l(h.formula,h.address,this.model.address)}return this._translatedFormula}toCsvString(){return""+(this.model.result||"")}release(){}toString(){return this.model.result?this.model.result.toString():""}}},{t:c.Types.Merge,f:class{constructor(f,h){this.model={address:f.address,type:c.Types.Merge,master:h?h.address:void 0},this._master=h,h&&h.addMergeRef()}get value(){return this._master.value}set value(f){f instanceof c?(this._master&&this._master.releaseMergeRef(),f.addMergeRef(),this._master=f):this._master.value=f}isMergedTo(f){return f===this._master}get master(){return this._master}get type(){return c.Types.Merge}get effectiveType(){return this._master.effectiveType}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return""}release(){this._master.releaseMergeRef()}toString(){return this.value.toString()}}},{t:c.Types.JSON,f:class{constructor(f,h){this.model={address:f.address,type:c.Types.String,value:JSON.stringify(h),rawValue:h}}get value(){return this.model.rawValue}set value(f){this.model.rawValue=f,this.model.value=JSON.stringify(f)}get type(){return c.Types.String}get effectiveType(){return c.Types.String}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.model.value}release(){}toString(){return this.model.value}}},{t:c.Types.SharedString,f:class{constructor(f,h){this.model={address:f.address,type:c.Types.SharedString,value:h}}get value(){return this.model.value}set value(f){this.model.value=f}get type(){return c.Types.SharedString}get effectiveType(){return c.Types.SharedString}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:c.Types.RichText,f:class{constructor(f,h){this.model={address:f.address,type:c.Types.String,value:h}}get value(){return this.model.value}set value(f){this.model.value=f}toString(){return this.model.value.richText.map(f=>f.text).join("")}get type(){return c.Types.RichText}get effectiveType(){return c.Types.RichText}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return`"${this.text.replace(/"/g,'""')}"`}release(){}}},{t:c.Types.Boolean,f:class{constructor(f,h){this.model={address:f.address,type:c.Types.Boolean,value:h}}get value(){return this.model.value}set value(f){this.model.value=f}get type(){return c.Types.Boolean}get effectiveType(){return c.Types.Boolean}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.model.value?1:0}release(){}toString(){return this.model.value.toString()}}},{t:c.Types.Error,f:class{constructor(f,h){this.model={address:f.address,type:c.Types.Error,value:h}}get value(){return this.model.value}set value(f){this.model.value=f}get type(){return c.Types.Error}get effectiveType(){return c.Types.Error}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.toString()}release(){}toString(){return this.model.value.error.toString()}}}].reduce((f,h)=>(f[h.t]=h.f,f),[]),create(f,h,p){const g=this.types[f];if(!g)throw new Error("Could not create Value of type "+f);return new g(h,p)}};r.exports=c},{"../utils/col-cache":19,"../utils/shared-formula":23,"../utils/under-dash":26,"./enums":7,"./note":9}],4:[function(t,r,s){const i=t("../utils/under-dash"),o=t("./enums"),u=t("../utils/col-cache");class l{constructor(c,d,f){this._worksheet=c,this._number=d,f!==!1&&(this.defn=f)}get number(){return this._number}get worksheet(){return this._worksheet}get letter(){return u.n2l(this._number)}get isCustomWidth(){return this.width!==void 0&&this.width!==9}get defn(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}}set defn(c){c?(this.key=c.key,this.width=c.width!==void 0?c.width:9,this.outlineLevel=c.outlineLevel,c.style?this.style=c.style:this.style={},this.header=c.header,this._hidden=!!c.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}get headers(){return this._header&&this._header instanceof Array?this._header:[this._header]}get header(){return this._header}set header(c){c!==void 0?(this._header=c,this.headers.forEach((d,f)=>{this._worksheet.getCell(f+1,this.number).value=d})):this._header=void 0}get key(){return this._key}set key(c){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=c,c&&this._worksheet.setColumnKey(this._key,this)}get hidden(){return!!this._hidden}set hidden(c){this._hidden=c}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(c){this._outlineLevel=c}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}toString(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}equivalentTo(c){return this.width===c.width&&this.hidden===c.hidden&&this.outlineLevel===c.outlineLevel&&i.isEqual(this.style,c.style)}get isDefault(){if(this.isCustomWidth||this.hidden||this.outlineLevel)return!1;const c=this.style;return!c||!(c.font||c.numFmt||c.alignment||c.border||c.fill||c.protection)}get headerCount(){return this.headers.length}eachCell(c,d){const f=this.number;d||(d=c,c=null),this._worksheet.eachRow(c,(h,p)=>{d(h.getCell(f),p)})}get values(){const c=[];return this.eachCell((d,f)=>{d&&d.type!==o.ValueType.Null&&(c[f]=d.value)}),c}set values(c){if(!c)return;const d=this.number;let f=0;c.hasOwnProperty("0")&&(f=1),c.forEach((h,p)=>{this._worksheet.getCell(p+f,d).value=h})}_applyStyle(c,d){return this.style[c]=d,this.eachCell(f=>{f[c]=d}),d}get numFmt(){return this.style.numFmt}set numFmt(c){this._applyStyle("numFmt",c)}get font(){return this.style.font}set font(c){this._applyStyle("font",c)}get alignment(){return this.style.alignment}set alignment(c){this._applyStyle("alignment",c)}get protection(){return this.style.protection}set protection(c){this._applyStyle("protection",c)}get border(){return this.style.border}set border(c){this._applyStyle("border",c)}get fill(){return this.style.fill}set fill(c){this._applyStyle("fill",c)}static toModel(c){const d=[];let f=null;return c&&c.forEach((h,p)=>{h.isDefault?f&&(f=null):f&&h.equivalentTo(f)?f.max=p+1:(f={min:p+1,max:p+1,width:h.width!==void 0?h.width:9,style:h.style,isCustomWidth:h.isCustomWidth,hidden:h.hidden,outlineLevel:h.outlineLevel,collapsed:h.collapsed},d.push(f))}),d.length?d:void 0}static fromModel(c,d){const f=[];let h=1,p=0;for(d=(d=d||[]).sort(function(g,m){return g.min-m.min});p<d.length;){const g=d[p++];for(;h<g.min;)f.push(new l(c,h++));for(;h<=g.max;)f.push(new l(c,h++,g))}return f.length?f:null}}r.exports=l},{"../utils/col-cache":19,"../utils/under-dash":26,"./enums":7}],5:[function(t,r,s){r.exports=class{constructor(i){this.model=i||{}}add(i,o){return this.model[i]=o}find(i){return this.model[i]}remove(i){this.model[i]=void 0}}},{}],6:[function(t,r,s){const i=t("../utils/under-dash"),o=t("../utils/col-cache"),u=t("../utils/cell-matrix"),l=t("./range"),a=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/;r.exports=class{constructor(){this.matrixMap={}}getMatrix(c){return this.matrixMap[c]||(this.matrixMap[c]=new u)}add(c,d){const f=o.decodeEx(c);this.addEx(f,d)}addEx(c,d){const f=this.getMatrix(d);if(c.top)for(let h=c.left;h<=c.right;h++)for(let p=c.top;p<=c.bottom;p++){const g={sheetName:c.sheetName,address:o.n2l(h)+p,row:p,col:h};f.addCellEx(g)}else f.addCellEx(c)}remove(c,d){const f=o.decodeEx(c);this.removeEx(f,d)}removeEx(c,d){this.getMatrix(d).removeCellEx(c)}removeAllNames(c){i.each(this.matrixMap,d=>{d.removeCellEx(c)})}forEach(c){i.each(this.matrixMap,(d,f)=>{d.forEach(h=>{c(f,h)})})}getNames(c){return this.getNamesEx(o.decodeEx(c))}getNamesEx(c){return i.map(this.matrixMap,(d,f)=>d.findCellEx(c)&&f).filter(Boolean)}_explore(c,d){d.mark=!1;const{sheetName:f}=d,h=new l(d.row,d.col,d.row,d.col,f);let p,g;function m(b,v){const k=c.findCellAt(f,b,d.col);return!(!k||!k.mark)&&(h[v]=b,k.mark=!1,!0)}for(g=d.row-1;m(g,"top");g--);for(g=d.row+1;m(g,"bottom");g++);function y(b,v){const k=[];for(g=h.top;g<=h.bottom;g++){const j=c.findCellAt(f,g,b);if(!j||!j.mark)return!1;k.push(j)}h[v]=b;for(let j=0;j<k.length;j++)k[j].mark=!1;return!0}for(p=d.col-1;y(p,"left");p--);for(p=d.col+1;y(p,"right");p++);return h}getRanges(c,d){return(d=d||this.matrixMap[c])?(d.forEach(f=>{f.mark=!0}),{name:c,ranges:d.map(f=>f.mark&&this._explore(d,f)).filter(Boolean).map(f=>f.$shortRange)}):{name:c,ranges:[]}}normaliseMatrix(c,d){c.forEachInSheet(d,(f,h,p)=>{f&&(f.row===h&&f.col===p||(f.row=h,f.col=p,f.address=o.n2l(p)+h))})}spliceRows(c,d,f,h){i.each(this.matrixMap,p=>{p.spliceRows(c,d,f,h),this.normaliseMatrix(p,c)})}spliceColumns(c,d,f,h){i.each(this.matrixMap,p=>{p.spliceColumns(c,d,f,h),this.normaliseMatrix(p,c)})}get model(){return i.map(this.matrixMap,(c,d)=>this.getRanges(d,c)).filter(c=>c.ranges.length)}set model(c){const d=this.matrixMap={};c.forEach(f=>{const h=d[f.name]=new u;f.ranges.forEach(p=>{a.test(p.split("!").pop()||"")&&h.addCell(p)})})}}},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":26,"./range":10}],7:[function(t,r,s){r.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(t,r,s){const i=t("../utils/col-cache"),o=t("./anchor");r.exports=class{constructor(u,l){this.worksheet=u,this.model=l}get model(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}}set model(u){let{type:l,imageId:a,range:c,hyperlinks:d}=u;if(this.type=l,this.imageId=a,l==="image")if(typeof c=="string"){const f=i.decode(c);this.range={tl:new o(this.worksheet,{col:f.left,row:f.top},-1),br:new o(this.worksheet,{col:f.right,row:f.bottom},0),editAs:"oneCell"}}else this.range={tl:new o(this.worksheet,c.tl,0),br:c.br&&new o(this.worksheet,c.br,0),ext:c.ext,editAs:c.editAs,hyperlinks:d||c.hyperlinks}}}},{"../utils/col-cache":19,"./anchor":2}],9:[function(t,r,s){const i=t("../utils/under-dash");class o{constructor(l){this.note=l}get model(){let l=null;switch(typeof this.note){case"string":l={type:"note",note:{texts:[{text:this.note}]}};break;default:l={type:"note",note:this.note}}return i.deepMerge({},o.DEFAULT_CONFIGS,l)}set model(l){const{note:a}=l,{texts:c}=a;c.length===1&&Object.keys(c[0]).length===1?this.note=c[0].text:this.note=a}static fromModel(l){const a=new o;return a.model=l,a}}o.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},r.exports=o},{"../utils/under-dash":26}],10:[function(t,r,s){const i=t("../utils/col-cache");class o{constructor(){this.decode(arguments)}setTLBR(l,a,c,d,f){if(arguments.length<4){const h=i.decodeAddress(l),p=i.decodeAddress(a);this.model={top:Math.min(h.row,p.row),left:Math.min(h.col,p.col),bottom:Math.max(h.row,p.row),right:Math.max(h.col,p.col),sheetName:c},this.setTLBR(h.row,h.col,p.row,p.col,f)}else this.model={top:Math.min(l,c),left:Math.min(a,d),bottom:Math.max(l,c),right:Math.max(a,d),sheetName:f}}decode(l){switch(l.length){case 5:this.setTLBR(l[0],l[1],l[2],l[3],l[4]);break;case 4:this.setTLBR(l[0],l[1],l[2],l[3]);break;case 3:this.setTLBR(l[0],l[1],l[2]);break;case 2:this.setTLBR(l[0],l[1]);break;case 1:{const a=l[0];if(a instanceof o)this.model={top:a.model.top,left:a.model.left,bottom:a.model.bottom,right:a.model.right,sheetName:a.sheetName};else if(a instanceof Array)this.decode(a);else if(a.top&&a.left&&a.bottom&&a.right)this.model={top:a.top,left:a.left,bottom:a.bottom,right:a.right,sheetName:a.sheetName};else{const c=i.decodeEx(a);c.top?this.model={top:c.top,left:c.left,bottom:c.bottom,right:c.right,sheetName:c.sheetName}:this.model={top:c.row,left:c.col,bottom:c.row,right:c.col,sheetName:c.sheetName}}break}case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - "+l.length)}}get top(){return this.model.top||1}set top(l){this.model.top=l}get left(){return this.model.left||1}set left(l){this.model.left=l}get bottom(){return this.model.bottom||1}set bottom(l){this.model.bottom=l}get right(){return this.model.right||1}set right(l){this.model.right=l}get sheetName(){return this.model.sheetName}set sheetName(l){this.model.sheetName=l}get _serialisedSheetName(){const{sheetName:l}=this.model;return l?/^[a-zA-Z0-9]*$/.test(l)?l+"!":`'${l}'!`:""}expand(l,a,c,d){(!this.model.top||l<this.top)&&(this.top=l),(!this.model.left||a<this.left)&&(this.left=a),(!this.model.bottom||c>this.bottom)&&(this.bottom=c),(!this.model.right||d>this.right)&&(this.right=d)}expandRow(l){if(l){const{dimensions:a,number:c}=l;a&&this.expand(c,a.min,c,a.max)}}expandToAddress(l){const a=i.decodeEx(l);this.expand(a.row,a.col,a.row,a.col)}get tl(){return i.n2l(this.left)+this.top}get $t$l(){return`$${i.n2l(this.left)}$${this.top}`}get br(){return i.n2l(this.right)+this.bottom}get $b$r(){return`$${i.n2l(this.right)}$${this.bottom}`}get range(){return`${this._serialisedSheetName+this.tl}:${this.br}`}get $range(){return`${this._serialisedSheetName+this.$t$l}:${this.$b$r}`}get shortRange(){return this.count>1?this.range:this._serialisedSheetName+this.tl}get $shortRange(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}get count(){return(1+this.bottom-this.top)*(1+this.right-this.left)}toString(){return this.range}intersects(l){return(!l.sheetName||!this.sheetName||l.sheetName===this.sheetName)&&!(l.bottom<this.top)&&!(l.top>this.bottom)&&!(l.right<this.left)&&!(l.left>this.right)}contains(l){const a=i.decodeEx(l);return this.containsEx(a)}containsEx(l){return(!l.sheetName||!this.sheetName||l.sheetName===this.sheetName)&&l.row>=this.top&&l.row<=this.bottom&&l.col>=this.left&&l.col<=this.right}forEachAddress(l){for(let a=this.left;a<=this.right;a++)for(let c=this.top;c<=this.bottom;c++)l(i.encodeAddress(c,a),c,a)}}r.exports=o},{"../utils/col-cache":19}],11:[function(t,r,s){const i=t("../utils/under-dash"),o=t("./enums"),u=t("../utils/col-cache"),l=t("./cell");r.exports=class{constructor(a,c){this._worksheet=a,this._number=c,this._cells=[],this.style={},this.outlineLevel=0}get number(){return this._number}get worksheet(){return this._worksheet}commit(){this._worksheet._commitRow(this)}destroy(){delete this._worksheet,delete this._cells,delete this.style}findCell(a){return this._cells[a-1]}getCellEx(a){let c=this._cells[a.col-1];if(!c){const d=this._worksheet.getColumn(a.col);c=new l(this,d,a.address),this._cells[a.col-1]=c}return c}getCell(a){if(typeof a=="string"){const c=this._worksheet.getColumnKey(a);a=c?c.number:u.l2n(a)}return this._cells[a-1]||this.getCellEx({address:u.encodeAddress(this._number,a),row:this._number,col:a})}splice(a,c){const d=a+c;for(var f=arguments.length,h=new Array(f>2?f-2:0),p=2;p<f;p++)h[p-2]=arguments[p];const g=h.length-c,m=this._cells.length;let y,b,v;if(g<0)for(y=a+h.length;y<=m;y++)v=this._cells[y-1],b=this._cells[y-g-1],b?(v=this.getCell(y),v.value=b.value,v.style=b.style,v._comment=b._comment):v&&(v.value=null,v.style={},v._comment=void 0);else if(g>0)for(y=m;y>=d;y--)b=this._cells[y-1],b?(v=this.getCell(y+g),v.value=b.value,v.style=b.style,v._comment=b._comment):this._cells[y+g-1]=void 0;for(y=0;y<h.length;y++)v=this.getCell(a+y),v.value=h[y],v.style={},v._comment=void 0}eachCell(a,c){if(c||(c=a,a=null),a&&a.includeEmpty){const d=this._cells.length;for(let f=1;f<=d;f++)c(this.getCell(f),f)}else this._cells.forEach((d,f)=>{d&&d.type!==o.ValueType.Null&&c(d,f+1)})}addPageBreak(a,c){const d=this._worksheet,f=Math.max(0,a-1)||0,h=Math.max(0,c-1)||16838,p={id:this._number,max:h,man:1};f&&(p.min=f),d.rowBreaks.push(p)}get values(){const a=[];return this._cells.forEach(c=>{c&&c.type!==o.ValueType.Null&&(a[c.col]=c.value)}),a}set values(a){if(this._cells=[],a)if(a instanceof Array){let c=0;a.hasOwnProperty("0")&&(c=1),a.forEach((d,f)=>{d!==void 0&&(this.getCellEx({address:u.encodeAddress(this._number,f+c),row:this._number,col:f+c}).value=d)})}else this._worksheet.eachColumnKey((c,d)=>{a[d]!==void 0&&(this.getCellEx({address:u.encodeAddress(this._number,c.number),row:this._number,col:c.number}).value=a[d])})}get hasValues(){return i.some(this._cells,a=>a&&a.type!==o.ValueType.Null)}get cellCount(){return this._cells.length}get actualCellCount(){let a=0;return this.eachCell(()=>{a++}),a}get dimensions(){let a=0,c=0;return this._cells.forEach(d=>{d&&d.type!==o.ValueType.Null&&((!a||a>d.col)&&(a=d.col),c<d.col&&(c=d.col))}),a>0?{min:a,max:c}:null}_applyStyle(a,c){return this.style[a]=c,this._cells.forEach(d=>{d&&(d[a]=c)}),c}get numFmt(){return this.style.numFmt}set numFmt(a){this._applyStyle("numFmt",a)}get font(){return this.style.font}set font(a){this._applyStyle("font",a)}get alignment(){return this.style.alignment}set alignment(a){this._applyStyle("alignment",a)}get protection(){return this.style.protection}set protection(a){this._applyStyle("protection",a)}get border(){return this.style.border}set border(a){this._applyStyle("border",a)}get fill(){return this.style.fill}set fill(a){this._applyStyle("fill",a)}get hidden(){return!!this._hidden}set hidden(a){this._hidden=a}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(a){this._outlineLevel=a}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}get model(){const a=[];let c=0,d=0;return this._cells.forEach(f=>{if(f){const h=f.model;h&&((!c||c>f.col)&&(c=f.col),d<f.col&&(d=f.col),a.push(h))}}),this.height||a.length?{cells:a,number:this.number,min:c,max:d,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null}set model(a){if(a.number!==this._number)throw new Error("Invalid row number in model");let c;this._cells=[],a.cells.forEach(d=>{switch(d.type){case l.Types.Merge:break;default:{let f;if(d.address)f=u.decodeAddress(d.address);else if(c){const{row:h}=c,p=c.col+1;f={row:h,col:p,address:u.encodeAddress(h,p),$col$row:`$${u.n2l(p)}$${h}`}}c=f,this.getCellEx(f).model=d;break}}}),a.height?this.height=a.height:delete this.height,this.hidden=a.hidden,this.outlineLevel=a.outlineLevel||0,this.style=a.style&&JSON.parse(JSON.stringify(a.style))||{}}}},{"../utils/col-cache":19,"../utils/under-dash":26,"./cell":3,"./enums":7}],12:[function(t,r,s){const i=t("../utils/col-cache");class o{constructor(l,a,c){this.table=l,this.column=a,this.index=c}_set(l,a){this.table.cacheState(),this.column[l]=a}get name(){return this.column.name}set name(l){this._set("name",l)}get filterButton(){return this.column.filterButton}set filterButton(l){this.column.filterButton=l}get style(){return this.column.style}set style(l){this.column.style=l}get totalsRowLabel(){return this.column.totalsRowLabel}set totalsRowLabel(l){this._set("totalsRowLabel",l)}get totalsRowFunction(){return this.column.totalsRowFunction}set totalsRowFunction(l){this._set("totalsRowFunction",l)}get totalsRowResult(){return this.column.totalsRowResult}set totalsRowResult(l){this._set("totalsRowResult",l)}get totalsRowFormula(){return this.column.totalsRowFormula}set totalsRowFormula(l){this._set("totalsRowFormula",l)}}r.exports=class{constructor(u,l){this.worksheet=u,l&&(this.table=l,this.validate(),this.store())}getFormula(u){switch(u.totalsRowFunction){case"none":return null;case"average":return`SUBTOTAL(101,${this.table.name}[${u.name}])`;case"countNums":return`SUBTOTAL(102,${this.table.name}[${u.name}])`;case"count":return`SUBTOTAL(103,${this.table.name}[${u.name}])`;case"max":return`SUBTOTAL(104,${this.table.name}[${u.name}])`;case"min":return`SUBTOTAL(105,${this.table.name}[${u.name}])`;case"stdDev":return`SUBTOTAL(106,${this.table.name}[${u.name}])`;case"var":return`SUBTOTAL(107,${this.table.name}[${u.name}])`;case"sum":return`SUBTOTAL(109,${this.table.name}[${u.name}])`;case"custom":return u.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: "+u.totalsRowFunction)}}get width(){return this.table.columns.length}get height(){return this.table.rows.length}get filterHeight(){return this.height+(this.table.headerRow?1:0)}get tableHeight(){return this.filterHeight+(this.table.totalsRow?1:0)}validate(){const{table:u}=this,l=(g,m,y)=>{g[m]===void 0&&(g[m]=y)};l(u,"headerRow",!0),l(u,"totalsRow",!1),l(u,"style",{}),l(u.style,"theme","TableStyleMedium2"),l(u.style,"showFirstColumn",!1),l(u.style,"showLastColumn",!1),l(u.style,"showRowStripes",!1),l(u.style,"showColumnStripes",!1);const a=(g,m)=>{if(!g)throw new Error(m)};a(u.ref,"Table must have ref"),a(u.columns,"Table must have column definitions"),a(u.rows,"Table must have row definitions"),u.tl=i.decodeAddress(u.ref);const{row:c,col:d}=u.tl;a(c>0,"Table must be on valid row"),a(d>0,"Table must be on valid col");const{width:f,filterHeight:h,tableHeight:p}=this;u.autoFilterRef=i.encode(c,d,c+h-1,d+f-1),u.tableRef=i.encode(c,d,c+p-1,d+f-1),u.columns.forEach((g,m)=>{a(g.name,`Column ${m} must have a name`),m===0?l(g,"totalsRowLabel","Total"):(l(g,"totalsRowFunction","none"),g.totalsRowFormula=this.getFormula(g))})}store(){const u=(h,p)=>{p&&Object.keys(p).forEach(g=>{h[g]=p[g]})},{worksheet:l,table:a}=this,{row:c,col:d}=a.tl;let f=0;if(a.headerRow){const h=l.getRow(c+f++);a.columns.forEach((p,g)=>{const{style:m,name:y}=p,b=h.getCell(d+g);b.value=y,u(b,m)})}if(a.rows.forEach(h=>{const p=l.getRow(c+f++);h.forEach((g,m)=>{const y=p.getCell(d+m);y.value=g,u(y,a.columns[m].style)})}),a.totalsRow){const h=l.getRow(c+f++);a.columns.forEach((p,g)=>{const m=h.getCell(d+g);if(g===0)m.value=p.totalsRowLabel;else{const y=this.getFormula(p);m.value=y?{formula:p.totalsRowFormula,result:p.totalsRowResult}:null}u(m,p.style)})}}load(u){const{table:l}=this,{row:a,col:c}=l.tl;let d=0;if(l.headerRow){const f=u.getRow(a+d++);l.columns.forEach((h,p)=>{f.getCell(c+p).value=h.name})}if(l.rows.forEach(f=>{const h=u.getRow(a+d++);f.forEach((p,g)=>{h.getCell(c+g).value=p})}),l.totalsRow){const f=u.getRow(a+d++);l.columns.forEach((h,p)=>{const g=f.getCell(c+p);p===0?g.value=h.totalsRowLabel:this.getFormula(h)&&(g.value={formula:h.totalsRowFormula,result:h.totalsRowResult})})}}get model(){return this.table}set model(u){this.table=u}cacheState(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}commit(){if(!this._cache)return;this.validate();const u=i.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(let l=0;l<this._cache.tableHeight;l++){const a=this.worksheet.getRow(u.row+l);for(let c=0;c<this._cache.width;c++)a.getCell(u.col+c).value=null}else{for(let l=this.tableHeight;l<this._cache.tableHeight;l++){const a=this.worksheet.getRow(u.row+l);for(let c=0;c<this._cache.width;c++)a.getCell(u.col+c).value=null}for(let l=0;l<this.tableHeight;l++){const a=this.worksheet.getRow(u.row+l);for(let c=this.width;c<this._cache.width;c++)a.getCell(u.col+c).value=null}}this.store()}addRow(u,l){this.cacheState(),l===void 0?this.table.rows.push(u):this.table.rows.splice(l,0,u)}removeRows(u){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.rows.splice(u,l)}getColumn(u){const l=this.table.columns[u];return new o(this,l,u)}addColumn(u,l,a){this.cacheState(),a===void 0?(this.table.columns.push(u),this.table.rows.forEach((c,d)=>{c.push(l[d])})):(this.table.columns.splice(a,0,u),this.table.rows.forEach((c,d)=>{c.splice(a,0,l[d])}))}removeColumns(u){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.columns.splice(u,l),this.table.rows.forEach(a=>{a.splice(u,l)})}_assign(u,l,a){this.cacheState(),u[l]=a}get ref(){return this.table.ref}set ref(u){this._assign(this.table,"ref",u)}get name(){return this.table.name}set name(u){this.table.name=u}get displayName(){return this.table.displyName||this.table.name}set displayNamename(u){this.table.displayName=u}get headerRow(){return this.table.headerRow}set headerRow(u){this._assign(this.table,"headerRow",u)}get totalsRow(){return this.table.totalsRow}set totalsRow(u){this._assign(this.table,"totalsRow",u)}get theme(){return this.table.style.name}set theme(u){this.table.style.name=u}get showFirstColumn(){return this.table.style.showFirstColumn}set showFirstColumn(u){this.table.style.showFirstColumn=u}get showLastColumn(){return this.table.style.showLastColumn}set showLastColumn(u){this.table.style.showLastColumn=u}get showRowStripes(){return this.table.style.showRowStripes}set showRowStripes(u){this.table.style.showRowStripes=u}get showColumnStripes(){return this.table.style.showColumnStripes}set showColumnStripes(u){this.table.style.showColumnStripes=u}}},{"../utils/col-cache":19}],13:[function(t,r,s){const i=t("./worksheet"),o=t("./defined-names"),u=t("../xlsx/xlsx"),l=t("../csv/csv");r.exports=class{constructor(){this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new o}get xlsx(){return this._xlsx||(this._xlsx=new u(this)),this._xlsx}get csv(){return this._csv||(this._csv=new l(this)),this._csv}get nextId(){for(let a=1;a<this._worksheets.length;a++)if(!this._worksheets[a])return a;return this._worksheets.length||1}addWorksheet(a,c){const d=this.nextId;c&&(typeof c=="string"?(console.trace('tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { argb: "rbg value" } }'),c={properties:{tabColor:{argb:c}}}):(c.argb||c.theme||c.indexed)&&(console.trace("tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { ... } }"),c={properties:{tabColor:c}}));const f=this._worksheets.reduce((g,m)=>(m&&m.orderNo)>g?m.orderNo:g,0),h=Object.assign({},c,{id:d,name:a,orderNo:f+1,workbook:this}),p=new i(h);return this._worksheets[d]=p,p}removeWorksheetEx(a){delete this._worksheets[a.id]}removeWorksheet(a){const c=this.getWorksheet(a);c&&c.destroy()}getWorksheet(a){return a===void 0?this._worksheets.find(Boolean):typeof a=="number"?this._worksheets[a]:typeof a=="string"?this._worksheets.find(c=>c&&c.name===a):void 0}get worksheets(){return this._worksheets.slice(1).sort((a,c)=>a.orderNo-c.orderNo).filter(Boolean)}eachSheet(a){this.worksheets.forEach(c=>{a(c,c.id)})}get definedNames(){return this._definedNames}clearThemes(){this._themes=void 0}addImage(a){const c=this.media.length;return this.media.push(Object.assign({},a,{type:"image"})),c}getImage(a){return this.media[a]}get model(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map(a=>a.model),sheets:this.worksheets.map(a=>a.model).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}}set model(a){this.creator=a.creator,this.lastModifiedBy=a.lastModifiedBy,this.lastPrinted=a.lastPrinted,this.created=a.created,this.modified=a.modified,this.company=a.company,this.manager=a.manager,this.title=a.title,this.subject=a.subject,this.keywords=a.keywords,this.category=a.category,this.description=a.description,this.language=a.language,this.revision=a.revision,this.contentStatus=a.contentStatus,this.properties=a.properties,this.calcProperties=a.calcProperties,this._worksheets=[],a.worksheets.forEach(c=>{const{id:d,name:f,state:h}=c,p=a.sheets&&a.sheets.findIndex(g=>g.id===d);(this._worksheets[d]=new i({id:d,name:f,orderNo:p,state:h,workbook:this})).model=c}),this._definedNames.model=a.definedNames,this.views=a.views,this._themes=a.themes,this.media=a.media||[]}}},{"../csv/csv":1,"../xlsx/xlsx":144,"./defined-names":6,"./worksheet":14}],14:[function(t,r,s){const i=t("../utils/under-dash"),o=t("../utils/col-cache"),u=t("./range"),l=t("./row"),a=t("./column"),c=t("./enums"),d=t("./image"),f=t("./table"),h=t("./data-validations"),p=t("../utils/encryptor"),{copyStyle:g}=t("../utils/copy-style");r.exports=class{constructor(m){m=m||{},this._workbook=m.workbook,this.id=m.id,this.orderNo=m.orderNo,this.name=m.name,this.state=m.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},m.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!m.pageSetup||!m.pageSetup.fitToWidth&&!m.pageSetup.fitToHeight||m.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},m.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},m.headerFooter),this.dataValidations=new h,this.views=m.views||[],this.autoFilter=m.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}get name(){return this._name}set name(m){if(m===void 0&&(m="sheet"+this.id),this._name!==m){if(typeof m!="string")throw new Error("The name has to be a string.");if(m==="")throw new Error("The name can't be empty.");if(m==="History")throw new Error('The name "History" is protected. Please use a different name.');if(/[*?:/\\[\]]/.test(m))throw new Error(`Worksheet name ${m} cannot include any of the following characters: * ? : \\ / [ ]`);if(/(^')|('$)/.test(m))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: "+m);if(m&&m.length>31&&(console.warn(`Worksheet name ${m} exceeds 31 chars. This will be truncated`),m=m.substring(0,31)),this._workbook._worksheets.find(y=>y&&y.name.toLowerCase()===m.toLowerCase()))throw new Error("Worksheet name already exists: "+m);this._name=m}}get workbook(){return this._workbook}destroy(){this._workbook.removeWorksheetEx(this)}get dimensions(){const m=new u;return this._rows.forEach(y=>{if(y){const b=y.dimensions;b&&m.expand(y.number,b.min,y.number,b.max)}}),m}get columns(){return this._columns}set columns(m){this._headerRowCount=m.reduce((v,k)=>{const j=(k.header?1:k.headers&&k.headers.length)||0;return Math.max(v,j)},0);let y=1;const b=this._columns=[];m.forEach(v=>{const k=new a(this,y++,!1);b.push(k),k.defn=v})}getColumnKey(m){return this._keys[m]}setColumnKey(m,y){this._keys[m]=y}deleteColumnKey(m){delete this._keys[m]}eachColumnKey(m){i.each(this._keys,m)}getColumn(m){if(typeof m=="string"){const y=this._keys[m];if(y)return y;m=o.l2n(m)}if(this._columns||(this._columns=[]),m>this._columns.length){let y=this._columns.length+1;for(;y<=m;)this._columns.push(new a(this,y++))}return this._columns[m-1]}spliceColumns(m,y){const b=this._rows.length;for(var v=arguments.length,k=new Array(v>2?v-2:0),j=2;j<v;j++)k[j-2]=arguments[j];if(k.length>0)for(let z=0;z<b;z++){const q=[m,y];k.forEach(F=>{q.push(F[z]||null)});const $=this.getRow(z+1);$.splice.apply($,q)}else this._rows.forEach(z=>{z&&z.splice(m,y)});const I=k.length-y,U=m+y,P=this._columns.length;if(I<0)for(let z=m+k.length;z<=P;z++)this.getColumn(z).defn=this.getColumn(z-I).defn;else if(I>0)for(let z=P;z>=U;z--)this.getColumn(z+I).defn=this.getColumn(z).defn;for(let z=m;z<m+k.length;z++)this.getColumn(z).defn=null;this.workbook.definedNames.spliceColumns(this.name,m,y,k.length)}get lastColumn(){return this.getColumn(this.columnCount)}get columnCount(){let m=0;return this.eachRow(y=>{m=Math.max(m,y.cellCount)}),m}get actualColumnCount(){const m=[];let y=0;return this.eachRow(b=>{b.eachCell(v=>{let{col:k}=v;m[k]||(m[k]=!0,y++)})}),y}_commitRow(){}get _lastRowNumber(){const m=this._rows;let y=m.length;for(;y>0&&m[y-1]===void 0;)y--;return y}get _nextRow(){return this._lastRowNumber+1}get lastRow(){if(this._rows.length)return this._rows[this._rows.length-1]}findRow(m){return this._rows[m-1]}findRows(m,y){return this._rows.slice(m-1,m-1+y)}get rowCount(){return this._lastRowNumber}get actualRowCount(){let m=0;return this.eachRow(()=>{m++}),m}getRow(m){let y=this._rows[m-1];return y||(y=this._rows[m-1]=new l(this,m)),y}getRows(m,y){if(y<1)return;const b=[];for(let v=m;v<m+y;v++)b.push(this.getRow(v));return b}addRow(m){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const b=this._nextRow,v=this.getRow(b);return v.values=m,this._setStyleOption(b,y[0]==="i"?y:"n"),v}addRows(m){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const b=[];return m.forEach(v=>{b.push(this.addRow(v,y))}),b}insertRow(m,y){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";return this.spliceRows(m,0,y),this._setStyleOption(m,b),this.getRow(m)}insertRows(m,y){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";if(this.spliceRows(m,0,...y),b!=="n")for(let v=0;v<y.length;v++)b[0]==="o"&&this.findRow(y.length+m+v)!==void 0?this._copyStyle(y.length+m+v,m+v,b[1]==="+"):b[0]==="i"&&this.findRow(m-1)!==void 0&&this._copyStyle(m-1,m+v,b[1]==="+");return this.getRows(m,y.length)}_setStyleOption(m){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";y[0]==="o"&&this.findRow(m+1)!==void 0?this._copyStyle(m+1,m,y[1]==="+"):y[0]==="i"&&this.findRow(m-1)!==void 0&&this._copyStyle(m-1,m,y[1]==="+")}_copyStyle(m,y){let b=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const v=this.getRow(m),k=this.getRow(y);k.style=g(v.style),v.eachCell({includeEmpty:b},(j,I)=>{k.getCell(I).style=g(j.style)}),k.height=v.height}duplicateRow(m,y){let b=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const v=this._rows[m-1],k=new Array(y).fill(v.values);this.spliceRows(m+1,b?0:y,...k);for(let j=0;j<y;j++){const I=this._rows[m+j];I.style=v.style,I.height=v.height,v.eachCell({includeEmpty:!0},(U,P)=>{I.getCell(P).style=U.style})}}spliceRows(m,y){const b=m+y;for(var v=arguments.length,k=new Array(v>2?v-2:0),j=2;j<v;j++)k[j-2]=arguments[j];const I=k.length,U=I-y,P=this._rows.length;let z,q;if(U<0)for(m===P&&(this._rows[P-1]=void 0),z=b;z<=P;z++)if(q=this._rows[z-1],q){const $=this.getRow(z+U);$.values=q.values,$.style=q.style,$.height=q.height,q.eachCell({includeEmpty:!0},(F,T)=>{$.getCell(T).style=F.style}),this._rows[z-1]=void 0}else this._rows[z+U-1]=void 0;else if(U>0)for(z=P;z>=b;z--)if(q=this._rows[z-1],q){const $=this.getRow(z+U);$.values=q.values,$.style=q.style,$.height=q.height,q.eachCell({includeEmpty:!0},(F,T)=>{if($.getCell(T).style=F.style,F._value.constructor.name==="MergeValue"){const N=this.getRow(F._row._number+I).getCell(T),C=F._value._master,w=this.getRow(C._row._number+I).getCell(C._column._number);N.merge(w)}})}else this._rows[z+U-1]=void 0;for(z=0;z<I;z++){const $=this.getRow(m+z);$.style={},$.values=k[z]}this.workbook.definedNames.spliceRows(this.name,m,y,I)}eachRow(m,y){if(y||(y=m,m=void 0),m&&m.includeEmpty){const b=this._rows.length;for(let v=1;v<=b;v++)y(this.getRow(v),v)}else this._rows.forEach(b=>{b&&b.hasValues&&y(b,b.number)})}getSheetValues(){const m=[];return this._rows.forEach(y=>{y&&(m[y.number]=y.values)}),m}findCell(m,y){const b=o.getAddress(m,y),v=this._rows[b.row-1];return v?v.findCell(b.col):void 0}getCell(m,y){const b=o.getAddress(m,y);return this.getRow(b.row).getCellEx(b)}mergeCells(){for(var m=arguments.length,y=new Array(m),b=0;b<m;b++)y[b]=arguments[b];const v=new u(y);this._mergeCellsInternal(v)}mergeCellsWithoutStyle(){for(var m=arguments.length,y=new Array(m),b=0;b<m;b++)y[b]=arguments[b];const v=new u(y);this._mergeCellsInternal(v,!0)}_mergeCellsInternal(m,y){i.each(this._merges,v=>{if(v.intersects(m))throw new Error("Cannot merge already merged cells")});const b=this.getCell(m.top,m.left);for(let v=m.top;v<=m.bottom;v++)for(let k=m.left;k<=m.right;k++)(v>m.top||k>m.left)&&this.getCell(v,k).merge(b,y);this._merges[b.address]=m}_unMergeMaster(m){const y=this._merges[m.address];if(y){for(let b=y.top;b<=y.bottom;b++)for(let v=y.left;v<=y.right;v++)this.getCell(b,v).unmerge();delete this._merges[m.address]}}get hasMerges(){return i.some(this._merges,Boolean)}unMergeCells(){for(var m=arguments.length,y=new Array(m),b=0;b<m;b++)y[b]=arguments[b];const v=new u(y);for(let k=v.top;k<=v.bottom;k++)for(let j=v.left;j<=v.right;j++){const I=this.findCell(k,j);I&&(I.type===c.ValueType.Merge?this._unMergeMaster(I.master):this._merges[I.address]&&this._unMergeMaster(I))}}fillFormula(m,y,b){let v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"shared";const k=o.decode(m),{top:j,left:I,bottom:U,right:P}=k,z=P-I+1,q=o.encodeAddress(j,I),$=v==="shared";let F;F=typeof b=="function"?b:Array.isArray(b)?Array.isArray(b[0])?(N,C)=>b[N-j][C-I]:(N,C)=>b[(N-j)*z+(C-I)]:()=>{};let T=!0;for(let N=j;N<=U;N++)for(let C=I;C<=P;C++)T?(this.getCell(N,C).value={shareType:v,formula:y,ref:m,result:F(N,C)},T=!1):this.getCell(N,C).value=$?{sharedFormula:q,result:F(N,C)}:F(N,C)}addImage(m,y){const b={type:"image",imageId:m,range:y};this._media.push(new d(this,b))}getImages(){return this._media.filter(m=>m.type==="image")}addBackgroundImage(m){const y={type:"background",imageId:m};this._media.push(new d(this,y))}getBackgroundImageId(){const m=this._media.find(y=>y.type==="background");return m&&m.imageId}protect(m,y){return new Promise(b=>{this.sheetProtection={sheet:!0},y&&"spinCount"in y&&(y.spinCount=Number.isFinite(y.spinCount)?Math.round(Math.max(0,y.spinCount)):1e5),m&&(this.sheetProtection.algorithmName="SHA-512",this.sheetProtection.saltValue=p.randomBytes(16).toString("base64"),this.sheetProtection.spinCount=y&&"spinCount"in y?y.spinCount:1e5,this.sheetProtection.hashValue=p.convertPasswordToHash(m,"SHA512",this.sheetProtection.saltValue,this.sheetProtection.spinCount)),y&&(this.sheetProtection=Object.assign(this.sheetProtection,y),!m&&"spinCount"in y&&delete this.sheetProtection.spinCount),b()})}unprotect(){this.sheetProtection=null}addTable(m){const y=new f(this,m);return this.tables[m.name]=y,y}getTable(m){return this.tables[m]}removeTable(m){delete this.tables[m]}getTables(){return Object.values(this.tables)}addConditionalFormatting(m){this.conditionalFormattings.push(m)}removeConditionalFormatting(m){typeof m=="number"?this.conditionalFormattings.splice(m,1):this.conditionalFormattings=m instanceof Function?this.conditionalFormattings.filter(m):[]}get tabColor(){return console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor}set tabColor(m){console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor=m}get model(){const m={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map(v=>v.model),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map(v=>v.model),conditionalFormattings:this.conditionalFormattings};m.cols=a.toModel(this.columns);const y=m.rows=[],b=m.dimensions=new u;return this._rows.forEach(v=>{const k=v&&v.model;k&&(b.expand(k.number,k.min,k.number,k.max),y.push(k))}),m.merges=[],i.each(this._merges,v=>{m.merges.push(v.range)}),m}_parseRows(m){this._rows=[],m.rows.forEach(y=>{const b=new l(this,y.number);this._rows[b.number-1]=b,b.model=y})}_parseMergeCells(m){i.each(m.mergeCells,y=>{this.mergeCellsWithoutStyle(y)})}set model(m){this.name=m.name,this._columns=a.fromModel(this,m.cols),this._parseRows(m),this._parseMergeCells(m),this.dataValidations=new h(m.dataValidations),this.properties=m.properties,this.pageSetup=m.pageSetup,this.headerFooter=m.headerFooter,this.views=m.views,this.autoFilter=m.autoFilter,this._media=m.media.map(y=>new d(this,y)),this.sheetProtection=m.sheetProtection,this.tables=m.tables.reduce((y,b)=>{const v=new f;return v.model=b,y[b.name]=v,y},{}),this.conditionalFormattings=m.conditionalFormattings}}},{"../utils/col-cache":19,"../utils/copy-style":20,"../utils/encryptor":21,"../utils/under-dash":26,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(t,r,s){t("core-js/modules/es.promise"),t("core-js/modules/es.promise.finally"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.values"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.async-iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.find"),t("core-js/modules/es.string.from-code-point"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.number.is-nan"),t("regenerator-runtime/runtime");const i={Workbook:t("./doc/workbook")},o=t("./doc/enums");Object.keys(o).forEach(u=>{i[u]=o[u]}),r.exports=i},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":359,"core-js/modules/es.array.find-index":358,"core-js/modules/es.array.includes":360,"core-js/modules/es.array.iterator":361,"core-js/modules/es.number.is-nan":363,"core-js/modules/es.object.assign":364,"core-js/modules/es.object.keys":366,"core-js/modules/es.object.values":367,"core-js/modules/es.promise":372,"core-js/modules/es.promise.finally":371,"core-js/modules/es.string.from-code-point":376,"core-js/modules/es.string.includes":377,"core-js/modules/es.symbol":381,"core-js/modules/es.symbol.async-iterator":378,"regenerator-runtime/runtime":492}],16:[function(t,r,s){const i=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");s.bufferToString=function(o){return typeof o=="string"?o:i?i.decode(o):o.toString()}},{}],17:[function(t,r,s){const i=typeof TextEncoder>"u"?null:new TextEncoder("utf-8"),{Buffer:o}=t("buffer");s.stringToBuffer=function(u){return typeof u!="string"?u:i?o.from(i.encode(u).buffer):o.from(u)}},{buffer:220}],18:[function(t,r,s){const i=t("./under-dash"),o=t("./col-cache");r.exports=class{constructor(u){this.template=u,this.sheets={}}addCell(u){this.addCellEx(o.decodeEx(u))}getCell(u){return this.findCellEx(o.decodeEx(u),!0)}findCell(u){return this.findCellEx(o.decodeEx(u),!1)}findCellAt(u,l,a){const c=this.sheets[u],d=c&&c[l];return d&&d[a]}addCellEx(u){if(u.top)for(let l=u.top;l<=u.bottom;l++)for(let a=u.left;a<=u.right;a++)this.getCellAt(u.sheetName,l,a);else this.findCellEx(u,!0)}getCellEx(u){return this.findCellEx(u,!0)}findCellEx(u,l){const a=this.findSheet(u,l),c=this.findSheetRow(a,u,l);return this.findRowCell(c,u,l)}getCellAt(u,l,a){const c=this.sheets[u]||(this.sheets[u]=[]),d=c[l]||(c[l]=[]);return d[a]||(d[a]={sheetName:u,address:o.n2l(a)+l,row:l,col:a})}removeCellEx(u){const l=this.findSheet(u);if(!l)return;const a=this.findSheetRow(l,u);a&&delete a[u.col]}forEachInSheet(u,l){const a=this.sheets[u];a&&a.forEach((c,d)=>{c&&c.forEach((f,h)=>{f&&l(f,d,h)})})}forEach(u){i.each(this.sheets,(l,a)=>{this.forEachInSheet(a,u)})}map(u){const l=[];return this.forEach(a=>{l.push(u(a))}),l}findSheet(u,l){const a=u.sheetName;return this.sheets[a]?this.sheets[a]:l?this.sheets[a]=[]:void 0}findSheetRow(u,l,a){const{row:c}=l;return u&&u[c]?u[c]:a?u[c]=[]:void 0}findRowCell(u,l,a){const{col:c}=l;return u&&u[c]?u[c]:a?u[c]=this.template?Object.assign(l,JSON.parse(JSON.stringify(this.template))):l:void 0}spliceRows(u,l,a,c){const d=this.sheets[u];if(d){const f=[];for(let h=0;h<c;h++)f.push([]);d.splice(l,a,...f)}}spliceColumns(u,l,a,c){const d=this.sheets[u];if(d){const f=[];for(let h=0;h<c;h++)f.push(null);i.each(d,h=>{h.splice(l,a,...f)})}}}},{"./col-cache":19,"./under-dash":26}],19:[function(t,r,s){const i=/^[A-Z]+\d+$/,o={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:u=>u<=26?1:u<=676?2:3,_fill(u){let l,a,c,d,f,h=1;if(u>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&u>=1){for(;h<=26;)l=this._dictionary[h-1],this._n2l[h]=l,this._l2n[l]=h,h++;this._l2nFill=1}if(this._l2nFill<2&&u>=2){for(h=27;h<=702;)a=h-27,c=a%26,d=Math.floor(a/26),l=this._dictionary[d]+this._dictionary[c],this._n2l[h]=l,this._l2n[l]=h,h++;this._l2nFill=2}if(this._l2nFill<3&&u>=3){for(h=703;h<=16384;)a=h-703,c=a%26,d=Math.floor(a/26)%26,f=Math.floor(a/676),l=this._dictionary[f]+this._dictionary[d]+this._dictionary[c],this._n2l[h]=l,this._l2n[l]=h,h++;this._l2nFill=3}},l2n(u){if(this._l2n[u]||this._fill(u.length),!this._l2n[u])throw new Error("Out of bounds. Invalid column letter: "+u);return this._l2n[u]},n2l(u){if(u<1||u>16384)throw new Error(u+" is out of bounds. Excel supports columns from 1 to 16384");return this._n2l[u]||this._fill(this._level(u)),this._n2l[u]},_hash:{},validateAddress(u){if(!i.test(u))throw new Error("Invalid Address: "+u);return!0},decodeAddress(u){const l=u.length<5&&this._hash[u];if(l)return l;let a=!1,c="",d=0,f=!1,h="",p=0;for(let m,y=0;y<u.length;y++)if(m=u.charCodeAt(y),!f&&m>=65&&m<=90)a=!0,c+=u[y],d=26*d+m-64;else if(m>=48&&m<=57)f=!0,h+=u[y],p=10*p+m-48;else if(f&&a&&m!==36)break;if(a){if(d>16384)throw new Error("Out of bounds. Invalid column letter: "+c)}else d=void 0;f||(p=void 0);const g={address:u=c+h,col:d,row:p,$col$row:`$${c}$${h}`};return d<=100&&p<=100&&(this._hash[u]=g,this._hash[g.$col$row]=g),g},getAddress(u,l){if(l){const a=this.n2l(l)+u;return this.decodeAddress(a)}return this.decodeAddress(u)},decode(u){const l=u.split(":");if(l.length===2){const a=this.decodeAddress(l[0]),c=this.decodeAddress(l[1]),d={top:Math.min(a.row,c.row),left:Math.min(a.col,c.col),bottom:Math.max(a.row,c.row),right:Math.max(a.col,c.col)};return d.tl=this.n2l(d.left)+d.top,d.br=this.n2l(d.right)+d.bottom,d.dimensions=`${d.tl}:${d.br}`,d}return this.decodeAddress(u)},decodeEx(u){const l=u.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),a=l[1]||l[2],c=l[3],d=c.split(":");if(d.length>1){let h=this.decodeAddress(d[0]),p=this.decodeAddress(d[1]);const g=Math.min(h.row,p.row),m=Math.min(h.col,p.col),y=Math.max(h.row,p.row),b=Math.max(h.col,p.col);return h=this.n2l(m)+g,p=this.n2l(b)+y,{top:g,left:m,bottom:y,right:b,sheetName:a,tl:{address:h,col:m,row:g,$col$row:`$${this.n2l(m)}$${g}`,sheetName:a},br:{address:p,col:b,row:y,$col$row:`$${this.n2l(b)}$${y}`,sheetName:a},dimensions:`${h}:${p}`}}if(c.startsWith("#"))return a?{sheetName:a,error:c}:{error:c};const f=this.decodeAddress(c);return a?{sheetName:a,...f}:f},encodeAddress:(u,l)=>o.n2l(l)+u,encode(){switch(arguments.length){case 2:return o.encodeAddress(arguments[0],arguments[1]);case 4:return`${o.encodeAddress(arguments[0],arguments[1])}:${o.encodeAddress(arguments[2],arguments[3])}`;default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange(u,l){const[a,c,,d,f]=u,[h,p]=l;return h>=a&&h<=d&&p>=c&&p<=f}};r.exports=o},{}],20:[function(t,r,s){const i=(u,l)=>({...u,...l.reduce((a,c)=>(u[c]&&(a[c]={...u[c]}),a),{})}),o=function(u,l,a){let c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];u[a]&&(l[a]=i(u[a],c))};s.copyStyle=u=>{if(!u)return u;if(l=u,Object.keys(l).length===0)return{};var l;const a={...u};return o(u,a,"font",["color"]),o(u,a,"alignment"),o(u,a,"protection"),u.border&&(o(u,a,"border"),o(u.border,a.border,"top",["color"]),o(u.border,a.border,"left",["color"]),o(u.border,a.border,"bottom",["color"]),o(u.border,a.border,"right",["color"]),o(u.border,a.border,"diagonal",["color"])),u.fill&&(o(u,a,"fill",["fgColor","bgColor","center"]),u.fill.stops&&(a.fill.stops=u.fill.stops.map(c=>i(c,["color"])))),a}},{}],21:[function(t,r,s){(function(i){(function(){const o=t("crypto"),u={hash(l){const a=o.createHash(l);for(var c=arguments.length,d=new Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return a.update(i.concat(d)),a.digest()},convertPasswordToHash(l,a,c,d){if(a=a.toLowerCase(),o.getHashes().indexOf(a)<0)throw new Error(`Hash algorithm '${a}' not supported!`);const f=i.from(l,"utf16le");let h=this.hash(a,i.from(c,"base64"),f);for(let p=0;p<d;p++){const g=i.alloc(4);g.writeUInt32LE(p,0),h=this.hash(a,h,g)}return h.toString("base64")},randomBytes:l=>o.randomBytes(l)};r.exports=u}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220,crypto:390}],22:[function(t,r,s){const{SaxesParser:i}=t("saxes"),{PassThrough:o}=t("readable-stream"),{bufferToString:u}=t("./browser-buffer-decode");r.exports=async function*(l){l.pipe&&!l[Symbol.asyncIterator]&&(l=l.pipe(new o));const a=new i;let c;a.on("error",f=>{c=f});let d=[];a.on("opentag",f=>d.push({eventType:"opentag",value:f})),a.on("text",f=>d.push({eventType:"text",value:f})),a.on("closetag",f=>d.push({eventType:"closetag",value:f}));for await(const f of l){if(a.write(u(f)),c)throw c;yield d,d=[]}}},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],23:[function(t,r,s){const i=t("./col-cache"),o=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,u=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;r.exports={slideFormula:function(l,a,c){const d=i.decode(a),f=i.decode(c);return l.replace(o,(h,p,g,m,y)=>{if(y)return h;const b=u.exec(m);if(b){const v=b[1],k=b[2].toUpperCase(),j=b[3],I=b[4];if(k.length>3||k.length===3&&k>"XFD")return h;let U=i.l2n(k),P=parseInt(I,10);return v||(U+=f.col-d.col),j||(P+=f.row-d.row),(p||"")+(v||"")+i.n2l(U)+(j||"")+P}return h})}}},{"./col-cache":19}],24:[function(t,r,s){(function(i,o){(function(){const u=t("readable-stream"),l=t("./utils"),a=t("./string-buf");class c{constructor(m,y){this._data=m,this._encoding=y}get length(){return this.toBuffer().length}copy(m,y,b,v){return this.toBuffer().copy(m,y,b,v)}toBuffer(){return this._buffer||(this._buffer=o.from(this._data,this._encoding)),this._buffer}}class d{constructor(m){this._data=m}get length(){return this._data.length}copy(m,y,b,v){return this._data._buf.copy(m,y,b,v)}toBuffer(){return this._data.toBuffer()}}class f{constructor(m){this._data=m}get length(){return this._data.length}copy(m,y,b,v){this._data.copy(m,y,b,v)}toBuffer(){return this._data}}class h{constructor(m){this.size=m,this.buffer=o.alloc(m),this.iRead=0,this.iWrite=0}toBuffer(){if(this.iRead===0&&this.iWrite===this.size)return this.buffer;const m=o.alloc(this.iWrite-this.iRead);return this.buffer.copy(m,0,this.iRead,this.iWrite),m}get length(){return this.iWrite-this.iRead}get eod(){return this.iRead===this.iWrite}get full(){return this.iWrite===this.size}read(m){let y;return m===0?null:m===void 0||m>=this.length?(y=this.toBuffer(),this.iRead=this.iWrite,y):(y=o.alloc(m),this.buffer.copy(y,0,this.iRead,m),this.iRead+=m,y)}write(m,y,b){const v=Math.min(b,this.size-this.iWrite);return m.copy(this.buffer,this.iWrite,y,y+v),this.iWrite+=v,v}}const p=function(g){g=g||{},this.bufSize=g.bufSize||1048576,this.buffers=[],this.batch=g.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};l.inherits(p,u.Duplex,{toBuffer(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return o.concat(this.buffers.map(g=>g.toBuffer()))}},_getWritableBuffer(){if(this.buffers.length){const m=this.buffers[this.buffers.length-1];if(!m.full)return m}const g=new h(this.bufSize);return this.buffers.push(g),g},async _pipe(g){await Promise.all(this.pipes.map(function(m){return new Promise(y=>{m.write(g.toBuffer(),()=>{y()})})}))},_writeToBuffers(g){let m=0;const y=g.length;for(;m<y;)m+=this._getWritableBuffer().write(g,m,y-m)},async write(g,m,y){let b;if(m instanceof Function&&(y=m,m="utf8"),y=y||l.nop,g instanceof a)b=new d(g);else if(g instanceof o)b=new f(g);else{if(!(typeof g=="string"||g instanceof String||g instanceof ArrayBuffer))throw new Error("Chunk must be one of type String, Buffer or StringBuf.");b=new c(g,m)}if(this.pipes.length)if(this.batch)for(this._writeToBuffers(b);!this.corked&&this.buffers.length>1;)this._pipe(this.buffers.shift());else this.corked?(this._writeToBuffers(b),i.nextTick(y)):(await this._pipe(b),y());else this.paused||this.emit("data",b.toBuffer()),this._writeToBuffers(b),this.emit("readable");return!0},cork(){this.corked=!0},_flush(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork(){this.corked=!1,this._flush()},end(g,m,y){const b=v=>{v?y(v):(this._flush(),this.pipes.forEach(k=>{k.end()}),this.emit("finish"))};g?this.write(g,m,b):b()},read(g){let m;if(g){for(m=[];g&&this.buffers.length&&!this.buffers[0].eod;){const y=this.buffers[0],b=y.read(g);g-=b.length,m.push(b),y.eod&&y.full&&this.buffers.shift()}return o.concat(m)}return m=this.buffers.map(y=>y.toBuffer()).filter(Boolean),this.buffers=[],o.concat(m)},setEncoding(g){this.encoding=g},pause(){this.paused=!0},resume(){this.paused=!1},isPaused(){return!!this.paused},pipe(g){this.pipes.push(g),!this.paused&&this.buffers.length&&this.end()},unpipe(g){this.pipes=this.pipes.filter(m=>m!==g)},unshift(){throw new Error("Not Implemented")},wrap(){throw new Error("Not Implemented")}}),r.exports=p}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{"./string-buf":25,"./utils":27,_process:467,buffer:220,"readable-stream":491}],25:[function(t,r,s){(function(i){(function(){r.exports=class{constructor(o){this._buf=i.alloc(o&&o.size||16384),this._encoding=o&&o.encoding||"utf8",this._inPos=0,this._buffer=void 0}get length(){return this._inPos}get capacity(){return this._buf.length}get buffer(){return this._buf}toBuffer(){return this._buffer||(this._buffer=i.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}reset(o){o=o||0,this._buffer=void 0,this._inPos=o}_grow(o){let u=2*this._buf.length;for(;u<o;)u*=2;const l=i.alloc(u);this._buf.copy(l,0),this._buf=l}addText(o){this._buffer=void 0;let u=this._inPos+this._buf.write(o,this._inPos,this._encoding);for(;u>=this._buf.length-4;)this._grow(this._inPos+o.length),u=this._inPos+this._buf.write(o,this._inPos,this._encoding);this._inPos=u}addStringBuf(o){o.length&&(this._buffer=void 0,this.length+o.length>this.capacity&&this._grow(this.length+o.length),o._buf.copy(this._buf,this._inPos,0,o.length),this._inPos+=o.length)}}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220}],26:[function(t,r,s){const{toString:i}=Object.prototype,o=/["&<>]/,u={each:function(l,a){l&&(Array.isArray(l)?l.forEach(a):Object.keys(l).forEach(c=>{a(l[c],c)}))},some:function(l,a){return!!l&&(Array.isArray(l)?l.some(a):Object.keys(l).some(c=>a(l[c],c)))},every:function(l,a){return!l||(Array.isArray(l)?l.every(a):Object.keys(l).every(c=>a(l[c],c)))},map:function(l,a){return l?Array.isArray(l)?l.map(a):Object.keys(l).map(c=>a(l[c],c)):[]},keyBy:(l,a)=>l.reduce((c,d)=>(c[d[a]]=d,c),{}),isEqual:function(l,a){const c=typeof l,d=typeof a,f=Array.isArray(l),h=Array.isArray(a);let p;if(c!==d)return!1;switch(typeof l){case"object":if(f||h)return!(!f||!h)&&l.length===a.length&&l.every((g,m)=>{const y=a[m];return u.isEqual(g,y)});if(l===null||a===null)return l===a;if(p=Object.keys(l),Object.keys(a).length!==p.length)return!1;for(const g of p)if(!a.hasOwnProperty(g))return!1;return u.every(l,(g,m)=>{const y=a[m];return u.isEqual(g,y)});default:return l===a}},escapeHtml(l){const a=o.exec(l);if(!a)return l;let c="",d="",f=0,h=a.index;for(;h<l.length;h++){switch(l.charAt(h)){case'"':d="&quot;";break;case"&":d="&amp;";break;case"'":d="&apos;";break;case"<":d="&lt;";break;case">":d="&gt;";break;default:continue}f!==h&&(c+=l.substring(f,h)),f=h+1,c+=d}return f!==h?c+l.substring(f,h):c},strcmp:(l,a)=>l<a?-1:l>a?1:0,isUndefined:l=>i.call(l)==="[object Undefined]",isObject:l=>i.call(l)==="[object Object]",deepMerge(){const l=arguments[0]||{},{length:a}=arguments;let c,d,f;function h(p,g){c=l[g],f=Array.isArray(p),u.isObject(p)||f?(f?(f=!1,d=c&&Array.isArray(c)?c:[]):d=c&&u.isObject(c)?c:{},l[g]=u.deepMerge(d,p)):u.isUndefined(p)||(l[g]=p)}for(let p=0;p<a;p++)u.each(arguments[p],h);return l}};r.exports=u},{}],27:[function(t,r,s){(function(i,o){(function(){const u=t("fs"),l=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,a={nop(){},promiseImmediate:c=>new Promise(d=>{i.setImmediate?o(()=>{d(c)}):setTimeout(()=>{d(c)},1)}),inherits:function(c,d,f,h){c.super_=d,h||(h=f,f=null),f&&Object.keys(f).forEach(g=>{Object.defineProperty(c,g,Object.getOwnPropertyDescriptor(f,g))});const p={constructor:{value:c,enumerable:!1,writable:!1,configurable:!0}};h&&Object.keys(h).forEach(g=>{p[g]=Object.getOwnPropertyDescriptor(h,g)}),c.prototype=Object.create(d.prototype,p)},dateToExcel:(c,d)=>25569+c.getTime()/864e5-(d?1462:0),excelToDate(c,d){const f=Math.round(24*(c-25569+(d?1462:0))*3600*1e3);return new Date(f)},parsePath(c){const d=c.lastIndexOf("/");return{path:c.substring(0,d),name:c.substring(d+1)}},getRelsPath(c){const d=a.parsePath(c);return`${d.path}/_rels/${d.name}.rels`},xmlEncode(c){const d=l.exec(c);if(!d)return c;let f="",h="",p=0,g=d.index;for(;g<c.length;g++){const m=c.charCodeAt(g);switch(m){case 34:h="&quot;";break;case 38:h="&amp;";break;case 39:h="&apos;";break;case 60:h="&lt;";break;case 62:h="&gt;";break;case 127:h="";break;default:if(m<=31&&(m<=8||m>=11&&m!==13)){h="";break}continue}p!==g&&(f+=c.substring(p,g)),p=g+1,h&&(f+=h)}return p!==g?f+c.substring(p,g):f},xmlDecode:c=>c.replace(/&([a-z]*);/g,d=>{switch(d){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return d}}),validInt(c){const d=parseInt(c,10);return Number.isNaN(d)?0:d},isDateFmt(c){return c?(c=(c=c.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/)!==null:!1},fs:{exists:c=>new Promise(d=>{u.access(c,u.constants.F_OK,f=>{d(!f)})})},toIsoDateString:c=>c.toIsoString().subsstr(0,10),parseBoolean:c=>c===!0||c==="true"||c===1||c==="1"};r.exports=a}).call(this)}).call(this,typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{},t("timers").setImmediate)},{fs:216,timers:523}],28:[function(t,r,s){const i=t("./under-dash"),o=t("./utils");function u(c,d,f){c.push(` ${d}="${o.xmlEncode(f.toString())}"`)}function l(c,d){if(d){const f=[];i.each(d,(h,p)=>{h!==void 0&&u(f,p,h)}),c.push(f.join(""))}}class a{constructor(){this._xml=[],this._stack=[],this._rollbacks=[]}get tos(){return this._stack.length?this._stack[this._stack.length-1]:void 0}get cursor(){return this._xml.length}openXml(d){const f=this._xml;f.push("<?xml"),l(f,d),f.push(`?>
`)}openNode(d,f){const h=this.tos,p=this._xml;h&&this.open&&p.push(">"),this._stack.push(d),p.push("<"),p.push(d),l(p,f),this.leaf=!0,this.open=!0}addAttribute(d,f){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");f!==void 0&&u(this._xml,d,f)}addAttributes(d){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");l(this._xml,d)}writeText(d){const f=this._xml;this.open&&(f.push(">"),this.open=!1),this.leaf=!1,f.push(o.xmlEncode(d.toString()))}writeXml(d){this.open&&(this._xml.push(">"),this.open=!1),this.leaf=!1,this._xml.push(d)}closeNode(){const d=this._stack.pop(),f=this._xml;this.leaf?f.push("/>"):(f.push("</"),f.push(d),f.push(">")),this.open=!1,this.leaf=!1}leafNode(d,f,h){this.openNode(d,f),h!==void 0&&this.writeText(h),this.closeNode()}closeAll(){for(;this._stack.length;)this.closeNode()}addRollback(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}commit(){this._rollbacks.pop()}rollback(){const d=this._rollbacks.pop();this._xml.length>d.xml&&this._xml.splice(d.xml,this._xml.length-d.xml),this._stack.length>d.stack&&this._stack.splice(d.stack,this._stack.length-d.stack),this.leaf=d.leaf,this.open=d.open}get xml(){return this.closeAll(),this._xml.join("")}}a.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},r.exports=a},{"./under-dash":26,"./utils":27}],29:[function(t,r,s){(function(i){(function(){const o=t("events"),u=t("jszip"),l=t("./stream-buf"),{stringToBuffer:a}=t("./browser-buffer-encode");class c extends o.EventEmitter{constructor(f){super(),this.options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},f),this.zip=new u,this.stream=new l}append(f,h){h.hasOwnProperty("base64")&&h.base64?this.zip.file(h.name,f,{base64:!0}):(i.browser&&typeof f=="string"&&(f=a(f)),this.zip.file(h.name,f))}async finalize(){const f=await this.zip.generateAsync(this.options);this.stream.end(f),this.emit("finish")}read(f){return this.stream.read(f)}setEncoding(f){return this.stream.setEncoding(f)}pause(){return this.stream.pause()}resume(){return this.stream.resume()}isPaused(){return this.stream.isPaused()}pipe(f,h){return this.stream.pipe(f,h)}unpipe(f){return this.stream.unpipe(f)}unshift(f){return this.stream.unshift(f)}wrap(f){return this.stream.wrap(f)}}r.exports={ZipWriter:c}}).call(this)}).call(this,t("_process"))},{"./browser-buffer-encode":17,"./stream-buf":24,_process:467,events:422,jszip:441}],30:[function(t,r,s){r.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},28:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy""m""d""',"zh-cn":'yyyy""m""d""',"ja-jp":'yyyy""m""d""',"ko-kr":'yyyy"" mm"" dd""'},32:{"zh-tw":'hh""mm""',"zh-cn":'h""mm""',"ja-jp":'h""mm""',"ko-kr":'h"" mm""'},33:{"zh-tw":'hh""mm""ss""',"zh-cn":'h""mm""ss""',"ja-jp":'h""mm""ss""',"ko-kr":'h"" mm"" ss""'},34:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},51:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},52:{"zh-tw":'/ hh""mm""',"zh-cn":'yyyy""m""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'m""d""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},55:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},58:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],31:[function(t,r,s){r.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],32:[function(t,r,s){const i=t("../../utils/parse-sax"),o=t("../../utils/xml-stream");class u{prepare(){}render(){}parseOpen(a){}parseText(a){}parseClose(a){}reconcile(a,c){}reset(){this.model=null,this.map&&Object.values(this.map).forEach(a=>{a instanceof u?a.reset():a.xform&&a.xform.reset()})}mergeModel(a){this.model=Object.assign(this.model||{},a)}async parse(a){for await(const c of a)for(const{eventType:d,value:f}of c)if(d==="opentag")this.parseOpen(f);else if(d==="text")this.parseText(f);else if(d==="closetag"&&!this.parseClose(f.name))return this.model;return this.model}async parseStream(a){return this.parse(i(a))}get xml(){return this.toXml(this.model)}toXml(a){const c=new o;return this.render(c,a),c.xml}static toAttribute(a,c){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(a===void 0){if(d)return c}else if(d||a!==c)return a.toString()}static toStringAttribute(a,c){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return u.toAttribute(a,c,d)}static toStringValue(a,c){return a===void 0?c:a}static toBoolAttribute(a,c){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(a===void 0){if(d)return c}else if(d||a!==c)return a?"1":"0"}static toBoolValue(a,c){return a===void 0?c:a==="1"}static toIntAttribute(a,c){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return u.toAttribute(a,c,d)}static toIntValue(a,c){return a===void 0?c:parseInt(a,10)}static toFloatAttribute(a,c){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return u.toAttribute(a,c,d)}static toFloatValue(a,c){return a===void 0?c:parseFloat(a)}}r.exports=u},{"../../utils/parse-sax":22,"../../utils/xml-stream":28}],33:[function(t,r,s){const i=t("../base-xform"),o=t("../../../utils/col-cache");function u(a){try{return o.decodeEx(a),!0}catch{return!1}}function l(a){const c=[];let d=!1,f="";return a.split(",").forEach(h=>{if(!h)return;const p=(h.match(/'/g)||[]).length;if(!p)return void(d?f+=h+",":u(h)&&c.push(h));const g=p%2==0;!d&&g&&u(h)?c.push(h):d&&!g?(d=!1,u(f+h)&&c.push(f+h),f=""):(d=!0,f+=h+",")}),c}r.exports=class extends i{render(a,c){a.openNode("definedName",{name:c.name,localSheetId:c.localSheetId}),a.writeText(c.ranges.join(",")),a.closeNode()}parseOpen(a){switch(a.name){case"definedName":return this._parsedName=a.attributes.name,this._parsedLocalSheetId=a.attributes.localSheetId,this._parsedText=[],!0;default:return!1}}parseText(a){this._parsedText.push(a)}parseClose(){return this.model={name:this._parsedName,ranges:l(this._parsedText.join(""))},this._parsedLocalSheetId!==void 0&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}},{"../../../utils/col-cache":19,"../base-xform":32}],34:[function(t,r,s){const i=t("../../../utils/utils"),o=t("../base-xform");r.exports=class extends o{render(u,l){u.leafNode("sheet",{sheetId:l.id,name:l.name,state:l.state,"r:id":l.rId})}parseOpen(u){return u.name==="sheet"&&(this.model={name:i.xmlDecode(u.attributes.name),id:parseInt(u.attributes.sheetId,10),state:u.attributes.state,rId:u.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/utils":27,"../base-xform":32}],35:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{render(o,u){o.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:u.fullCalcOnLoad?1:void 0})}parseOpen(o){return o.name==="calcPr"&&(this.model={},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],36:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{render(o,u){o.leafNode("workbookPr",{date1904:u.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}parseOpen(o){return o.name==="workbookPr"&&(this.model={date1904:o.attributes.date1904==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],37:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{render(o,u){const l={xWindow:u.x||0,yWindow:u.y||0,windowWidth:u.width||12e3,windowHeight:u.height||24e3,firstSheet:u.firstSheet,activeTab:u.activeTab};u.visibility&&u.visibility!=="visible"&&(l.visibility=u.visibility),o.leafNode("workbookView",l)}parseOpen(o){if(o.name==="workbookView"){const u=this.model={},l=function(c,d,f){const h=d!==void 0?u[c]=d:f;h!==void 0&&(u[c]=h)},a=function(c,d,f){const h=d!==void 0?u[c]=parseInt(d,10):f;h!==void 0&&(u[c]=h)};return a("x",o.attributes.xWindow,0),a("y",o.attributes.yWindow,0),a("width",o.attributes.windowWidth,25e3),a("height",o.attributes.windowHeight,1e4),l("visibility",o.attributes.visibility,"visible"),a("activeTab",o.attributes.activeTab,void 0),a("firstSheet",o.attributes.firstSheet,void 0),!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],38:[function(t,r,s){const i=t("../../../utils/under-dash"),o=t("../../../utils/col-cache"),u=t("../../../utils/xml-stream"),l=t("../base-xform"),a=t("../static-xform"),c=t("../list-xform"),d=t("./defined-name-xform"),f=t("./sheet-xform"),h=t("./workbook-view-xform"),p=t("./workbook-properties-xform"),g=t("./workbook-calc-properties-xform");class m extends l{constructor(){super(),this.map={fileVersion:m.STATIC_XFORMS.fileVersion,workbookPr:new p,bookViews:new c({tag:"bookViews",count:!1,childXform:new h}),sheets:new c({tag:"sheets",count:!1,childXform:new f}),definedNames:new c({tag:"definedNames",count:!1,childXform:new d}),calcPr:new g}}prepare(b){b.sheets=b.worksheets;const v=[];let k=0;b.sheets.forEach(j=>{if(j.pageSetup&&j.pageSetup.printArea&&j.pageSetup.printArea.split("&&").forEach(I=>{const U=I.split(":"),P={name:"_xlnm.Print_Area",ranges:[`'${j.name}'!$${U[0]}:$${U[1]}`],localSheetId:k};v.push(P)}),j.pageSetup&&(j.pageSetup.printTitlesRow||j.pageSetup.printTitlesColumn)){const I=[];if(j.pageSetup.printTitlesColumn){const P=j.pageSetup.printTitlesColumn.split(":");I.push(`'${j.name}'!$${P[0]}:$${P[1]}`)}if(j.pageSetup.printTitlesRow){const P=j.pageSetup.printTitlesRow.split(":");I.push(`'${j.name}'!$${P[0]}:$${P[1]}`)}const U={name:"_xlnm.Print_Titles",ranges:I,localSheetId:k};v.push(U)}k++}),v.length&&(b.definedNames=b.definedNames.concat(v)),(b.media||[]).forEach((j,I)=>{j.name=j.type+(I+1)})}render(b,v){b.openXml(u.StdDocAttributes),b.openNode("workbook",m.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(b),this.map.workbookPr.render(b,v.properties),this.map.bookViews.render(b,v.views),this.map.sheets.render(b,v.sheets),this.map.definedNames.render(b,v.definedNames),this.map.calcPr.render(b,v.calcProperties),b.closeNode()}parseOpen(b){if(this.parser)return this.parser.parseOpen(b),!0;switch(b.name){case"workbook":return!0;default:return this.parser=this.map[b.name],this.parser&&this.parser.parseOpen(b),!0}}parseText(b){this.parser&&this.parser.parseText(b)}parseClose(b){if(this.parser)return this.parser.parseClose(b)||(this.parser=void 0),!0;switch(b){case"workbook":return this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1;default:return!0}}reconcile(b){const v=(b.workbookRels||[]).reduce((P,z)=>(P[z.Id]=z,P),{}),k=[];let j,I=0;(b.sheets||[]).forEach(P=>{const z=v[P.rId];z&&(j=b.worksheetHash["xl/"+z.Target.replace(/^(\s|\/xl\/)+/,"")],j&&(j.name=P.name,j.id=P.id,j.state=P.state,k[I++]=j))});const U=[];i.each(b.definedNames,P=>{if(P.name==="_xlnm.Print_Area"){if(j=k[P.localSheetId],j){j.pageSetup||(j.pageSetup={});const z=o.decodeEx(P.ranges[0]);j.pageSetup.printArea=j.pageSetup.printArea?`${j.pageSetup.printArea}&&${z.dimensions}`:z.dimensions}}else if(P.name==="_xlnm.Print_Titles"){if(j=k[P.localSheetId],j){j.pageSetup||(j.pageSetup={});const z=P.ranges.join(","),q=/\$/g,$=/\$\d+:\$\d+/,F=z.match($);if(F&&F.length){const C=F[0];j.pageSetup.printTitlesRow=C.replace(q,"")}const T=/\$[A-Z]+:\$[A-Z]+/,N=z.match(T);if(N&&N.length){const C=N[0];j.pageSetup.printTitlesColumn=C.replace(q,"")}}}else U.push(P)}),b.definedNames=U,b.media.forEach((P,z)=>{P.index=z})}}m.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},m.STATIC_XFORMS={fileVersion:new a({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},r.exports=m},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./defined-name-xform":33,"./sheet-xform":34,"./workbook-calc-properties-xform":35,"./workbook-properties-xform":36,"./workbook-view-xform":37}],39:[function(t,r,s){const i=t("../strings/rich-text-xform"),o=t("../../../utils/utils"),u=t("../base-xform"),l=r.exports=function(a){this.model=a};o.inherits(l,u,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new i),this._richTextXform},render(a,c){c=c||this.model,a.openNode("comment",{ref:c.ref,authorId:0}),a.openNode("text"),c&&c.note&&c.note.texts&&c.note.texts.forEach(d=>{this.richTextXform.render(a,d)}),a.closeNode(),a.closeNode()},parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"comment":return this.model={type:"note",note:{texts:[]},...a.attributes},!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(a),!0;default:return!1}},parseText(a){this.parser&&this.parser.parseText(a)},parseClose(a){switch(a){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(a),!0}}})},{"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],40:[function(t,r,s){const i=t("../../../utils/xml-stream"),o=t("../../../utils/utils"),u=t("../base-xform"),l=t("./comment-xform"),a=r.exports=function(){this.map={comment:new l}};o.inherits(a,u,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render(c,d){d=d||this.model,c.openXml(i.StdDocAttributes),c.openNode("comments",a.COMMENTS_ATTRIBUTES),c.openNode("authors"),c.leafNode("author",null,"Author"),c.closeNode(),c.openNode("commentList"),d.comments.forEach(f=>{this.map.comment.render(c,f)}),c.closeNode(),c.closeNode()},parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(c),!0;default:return!1}},parseText(c){this.parser&&this.parser.parseText(c)},parseClose(c){switch(c){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(c),!0}}})},{"../../../utils/utils":27,"../../../utils/xml-stream":28,"../base-xform":32,"./comment-xform":39}],41:[function(t,r,s){const i=t("../../base-xform");r.exports=class extends i{constructor(o){super(),this._model=o}get tag(){return this._model&&this._model.tag}render(o,u,l){(u===l[2]||this.tag==="x:SizeWithCells"&&u===l[1])&&o.leafNode(this.tag)}parseOpen(o){switch(o.name){case this.tag:return this.model={},this.model[this.tag]=!0,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../base-xform":32}],42:[function(t,r,s){const i=t("../../base-xform");r.exports=class extends i{constructor(o){super(),this._model=o}get tag(){return this._model&&this._model.tag}render(o,u){o.leafNode(this.tag,null,u)}parseOpen(o){switch(o.name){case this.tag:return this.text="",!0;default:return!1}}parseText(o){this.text=o}parseClose(){return!1}}},{"../../base-xform":32}],43:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"x:Anchor"}getAnchorRect(o){const u=Math.floor(o.left),l=Math.floor(68*(o.left-u)),a=Math.floor(o.top),c=Math.floor(18*(o.top-a)),d=Math.floor(o.right),f=Math.floor(68*(o.right-d)),h=Math.floor(o.bottom);return[u,l,a,c,d,f,h,Math.floor(18*(o.bottom-h))]}getDefaultRect(o){const u=o.col,l=Math.max(o.row-2,0);return[u,6,l,14,u+2,2,l+4,16]}render(o,u){const l=u.anchor?this.getAnchorRect(u.anchor):this.getDefaultRect(u.refAddress);o.leafNode("x:Anchor",null,l.join(", "))}parseOpen(o){switch(o.name){case this.tag:return this.text="",!0;default:return!1}}parseText(o){this.text=o}parseClose(){return!1}}},{"../base-xform":32}],44:[function(t,r,s){const i=t("../base-xform"),o=t("./vml-anchor-xform"),u=t("./style/vml-protection-xform"),l=t("./style/vml-position-xform"),a=["twoCells","oneCells","absolute"];r.exports=class extends i{constructor(){super(),this.map={"x:Anchor":new o,"x:Locked":new u({tag:"x:Locked"}),"x:LockText":new u({tag:"x:LockText"}),"x:SizeWithCells":new l({tag:"x:SizeWithCells"}),"x:MoveWithCells":new l({tag:"x:MoveWithCells"})}}get tag(){return"x:ClientData"}render(c,d){const{protection:f,editAs:h}=d.note;c.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(c,h,a),this.map["x:SizeWithCells"].render(c,h,a),this.map["x:Anchor"].render(c,d),this.map["x:Locked"].render(c,f.locked),c.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(c,f.lockText),c.leafNode("x:Row",null,d.refAddress.row-1),c.leafNode("x:Column",null,d.refAddress.col-1),c.closeNode()}parseOpen(c){switch(c.name){case this.tag:this.reset(),this.model={anchor:[],protection:{},editAs:""};break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.normalizeModel(),!1;default:return!0}}normalizeModel(){const c=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),d=Object.keys(c).length;this.model.editAs=a[d],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}}},{"../base-xform":32,"./style/vml-position-xform":41,"./style/vml-protection-xform":42,"./vml-anchor-xform":43}],45:[function(t,r,s){const i=t("../../../utils/xml-stream"),o=t("../base-xform"),u=t("./vml-shape-xform");class l extends o{constructor(){super(),this.map={"v:shape":new u}}get tag(){return"xml"}render(c,d){c.openXml(i.StdDocAttributes),c.openNode(this.tag,l.DRAWING_ATTRIBUTES),c.openNode("o:shapelayout",{"v:ext":"edit"}),c.leafNode("o:idmap",{"v:ext":"edit",data:1}),c.closeNode(),c.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),c.leafNode("v:stroke",{joinstyle:"miter"}),c.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),c.closeNode(),d.comments.forEach((f,h)=>{this.map["v:shape"].render(c,f,h)}),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:this.reset(),this.model={comments:[]};break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0;switch(c){case this.tag:return!1;default:return!0}}reconcile(c,d){c.anchors.forEach(f=>{f.br?this.map["xdr:twoCellAnchor"].reconcile(f,d):this.map["xdr:oneCellAnchor"].reconcile(f,d)})}}l.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},r.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"./vml-shape-xform":46}],46:[function(t,r,s){const i=t("../base-xform"),o=t("./vml-textbox-xform"),u=t("./vml-client-data-xform");class l extends i{constructor(){super(),this.map={"v:textbox":new o,"x:ClientData":new u}}get tag(){return"v:shape"}render(c,d,f){c.openNode("v:shape",l.V_SHAPE_ATTRIBUTES(d,f)),c.leafNode("v:fill",{color2:"infoBackground [80]"}),c.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),c.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(c,d),this.map["x:ClientData"].render(c,d),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:this.reset(),this.model={margins:{insetmode:c.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}};break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1;default:return!0}}}l.V_SHAPE_ATTRIBUTES=(a,c)=>({id:"_x0000_s"+(1025+c),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":a.note.margins&&a.note.margins.insetmode}),r.exports=l},{"../base-xform":32,"./vml-client-data-xform":44,"./vml-textbox-xform":47}],47:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"v:textbox"}conversionUnit(o,u,l){return`${parseFloat(o)*u.toFixed(2)}${l}`}reverseConversionUnit(o){return(o||"").split(",").map(u=>Number(parseFloat(this.conversionUnit(parseFloat(u),.1,"")).toFixed(2)))}render(o,u){const l={style:"mso-direction-alt:auto"};if(u&&u.note){let{inset:a}=u.note&&u.note.margins;Array.isArray(a)&&(a=a.map(c=>this.conversionUnit(c,10,"mm")).join(",")),a&&(l.inset=a)}o.openNode("v:textbox",l),o.leafNode("div",{style:"text-align:left"}),o.closeNode()}parseOpen(o){switch(o.name){case this.tag:return this.model={inset:this.reverseConversionUnit(o.attributes.inset)},!0;default:return!0}}parseText(){}parseClose(o){switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],48:[function(t,r,s){const i=t("./base-xform");r.exports=class extends i{createNewModel(o){return{}}parseOpen(o){return this.parser=this.parser||this.map[o.name],this.parser?(this.parser.parseOpen(o),!0):o.name===this.tag&&(this.model=this.createNewModel(o),!0)}parseText(o){this.parser&&this.parser.parseText(o)}onParserClose(o,u){this.model[o]=u.model}parseClose(o){return this.parser?(this.parser.parseClose(o)||(this.onParserClose(o,this.parser),this.parser=void 0),!0):o!==this.tag}}},{"./base-xform":32}],49:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{render(o,u){o.openNode("HeadingPairs"),o.openNode("vt:vector",{size:2,baseType:"variant"}),o.openNode("vt:variant"),o.leafNode("vt:lpstr",void 0,"Worksheets"),o.closeNode(),o.openNode("vt:variant"),o.leafNode("vt:i4",void 0,u.length),o.closeNode(),o.closeNode(),o.closeNode()}parseOpen(o){return o.name==="HeadingPairs"}parseText(){}parseClose(o){return o!=="HeadingPairs"}}},{"../base-xform":32}],50:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{render(o,u){o.openNode("TitlesOfParts"),o.openNode("vt:vector",{size:u.length,baseType:"lpstr"}),u.forEach(l=>{o.leafNode("vt:lpstr",void 0,l.name)}),o.closeNode(),o.closeNode()}parseOpen(o){return o.name==="TitlesOfParts"}parseText(){}parseClose(o){return o!=="TitlesOfParts"}}},{"../base-xform":32}],51:[function(t,r,s){const i=t("../../../utils/xml-stream"),o=t("../base-xform"),u=t("../simple/string-xform"),l=t("./app-heading-pairs-xform"),a=t("./app-titles-of-parts-xform");class c extends o{constructor(){super(),this.map={Company:new u({tag:"Company"}),Manager:new u({tag:"Manager"}),HeadingPairs:new l,TitleOfParts:new a}}render(f,h){f.openXml(i.StdDocAttributes),f.openNode("Properties",c.PROPERTY_ATTRIBUTES),f.leafNode("Application",void 0,"Microsoft Excel"),f.leafNode("DocSecurity",void 0,"0"),f.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(f,h.worksheets),this.map.TitleOfParts.render(f,h.worksheets),this.map.Company.render(f,h.company||""),this.map.Manager.render(f,h.manager),f.leafNode("LinksUpToDate",void 0,"false"),f.leafNode("SharedDoc",void 0,"false"),f.leafNode("HyperlinksChanged",void 0,"false"),f.leafNode("AppVersion",void 0,"16.0300"),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"Properties":return!0;default:return this.parser=this.map[f.name],!!this.parser&&(this.parser.parseOpen(f),!0)}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){if(this.parser)return this.parser.parseClose(f)||(this.parser=void 0),!0;switch(f){case"Properties":return this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1;default:return!0}}}c.DateFormat=function(d){return d.toISOString().replace(/[.]\d{3,6}/,"")},c.DateAttrs={"xsi:type":"dcterms:W3CDTF"},c.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},r.exports=c},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/string-xform":119,"./app-heading-pairs-xform":49,"./app-titles-of-parts-xform":50}],52:[function(t,r,s){const i=t("../../../utils/xml-stream"),o=t("../base-xform");class u extends o{render(a,c){a.openXml(i.StdDocAttributes),a.openNode("Types",u.PROPERTY_ATTRIBUTES);const d={};(c.media||[]).forEach(f=>{if(f.type==="image"){const h=f.extension;d[h]||(d[h]=!0,a.leafNode("Default",{Extension:h,ContentType:"image/"+h}))}}),a.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),a.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),a.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),c.worksheets.forEach(f=>{const h=`/xl/worksheets/sheet${f.id}.xml`;a.leafNode("Override",{PartName:h,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})}),a.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),a.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),c.sharedStrings&&c.sharedStrings.count&&a.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),c.tables&&c.tables.forEach(f=>{a.leafNode("Override",{PartName:"/xl/tables/"+f.target,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})}),c.drawings&&c.drawings.forEach(f=>{a.leafNode("Override",{PartName:`/xl/drawings/${f.name}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}),c.commentRefs&&(a.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),c.commentRefs.forEach(f=>{let{commentName:h}=f;a.leafNode("Override",{PartName:`/xl/${h}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})})),a.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),a.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),a.closeNode()}parseOpen(){return!1}parseText(){}parseClose(){return!1}}u.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},r.exports=u},{"../../../utils/xml-stream":28,"../base-xform":32}],53:[function(t,r,s){const i=t("../../../utils/xml-stream"),o=t("../base-xform"),u=t("../simple/date-xform"),l=t("../simple/string-xform"),a=t("../simple/integer-xform");class c extends o{constructor(){super(),this.map={"dc:creator":new l({tag:"dc:creator"}),"dc:title":new l({tag:"dc:title"}),"dc:subject":new l({tag:"dc:subject"}),"dc:description":new l({tag:"dc:description"}),"dc:identifier":new l({tag:"dc:identifier"}),"dc:language":new l({tag:"dc:language"}),"cp:keywords":new l({tag:"cp:keywords"}),"cp:category":new l({tag:"cp:category"}),"cp:lastModifiedBy":new l({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new u({tag:"cp:lastPrinted",format:c.DateFormat}),"cp:revision":new a({tag:"cp:revision"}),"cp:version":new l({tag:"cp:version"}),"cp:contentStatus":new l({tag:"cp:contentStatus"}),"cp:contentType":new l({tag:"cp:contentType"}),"dcterms:created":new u({tag:"dcterms:created",attrs:c.DateAttrs,format:c.DateFormat}),"dcterms:modified":new u({tag:"dcterms:modified",attrs:c.DateAttrs,format:c.DateFormat})}}render(f,h){f.openXml(i.StdDocAttributes),f.openNode("cp:coreProperties",c.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(f,h.creator),this.map["dc:title"].render(f,h.title),this.map["dc:subject"].render(f,h.subject),this.map["dc:description"].render(f,h.description),this.map["dc:identifier"].render(f,h.identifier),this.map["dc:language"].render(f,h.language),this.map["cp:keywords"].render(f,h.keywords),this.map["cp:category"].render(f,h.category),this.map["cp:lastModifiedBy"].render(f,h.lastModifiedBy),this.map["cp:lastPrinted"].render(f,h.lastPrinted),this.map["cp:revision"].render(f,h.revision),this.map["cp:version"].render(f,h.version),this.map["cp:contentStatus"].render(f,h.contentStatus),this.map["cp:contentType"].render(f,h.contentType),this.map["dcterms:created"].render(f,h.created),this.map["dcterms:modified"].render(f,h.modified),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[f.name],this.parser)return this.parser.parseOpen(f),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(f))}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){if(this.parser)return this.parser.parseClose(f)||(this.parser=void 0),!0;switch(f){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: "+f)}}}c.DateFormat=function(d){return d.toISOString().replace(/[.]\d{3}/,"")},c.DateAttrs={"xsi:type":"dcterms:W3CDTF"},c.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},r.exports=c},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/date-xform":117,"../simple/integer-xform":118,"../simple/string-xform":119}],54:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{render(o,u){o.leafNode("Relationship",u)}parseOpen(o){switch(o.name){case"Relationship":return this.model=o.attributes,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],55:[function(t,r,s){const i=t("../../../utils/xml-stream"),o=t("../base-xform"),u=t("./relationship-xform");class l extends o{constructor(){super(),this.map={Relationship:new u}}render(c,d){d=d||this._values,c.openXml(i.StdDocAttributes),c.openNode("Relationships",l.RELATIONSHIPS_ATTRIBUTES),d.forEach(f=>{this.map.Relationship.render(c,f)}),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"Relationships":return this.model=[],!0;default:if(this.parser=this.map[c.name],this.parser)return this.parser.parseOpen(c),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(c))}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.model.push(this.parser.model),this.parser=void 0),!0;switch(c){case"Relationships":return!1;default:throw new Error("Unexpected xml node in parseClose: "+c)}}}l.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},r.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"./relationship-xform":54}],56:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:this.reset(),this.model={range:{editAs:o.attributes.editAs||"oneCell"}};break;default:this.parser=this.map[o.name],this.parser&&this.parser.parseOpen(o)}return!0}parseText(o){this.parser&&this.parser.parseText(o)}reconcilePicture(o,u){if(o&&o.rId){const l=u.rels[o.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(l){const a=l[1],c=u.mediaIndex[a];return u.media[c]}}}}},{"../base-xform":32}],57:[function(t,r,s){const i=t("../base-xform"),o=t("./blip-xform");r.exports=class extends i{constructor(){super(),this.map={"a:blip":new o}}get tag(){return"xdr:blipFill"}render(u,l){u.openNode(this.tag),this.map["a:blip"].render(u,l),u.openNode("a:stretch"),u.leafNode("a:fillRect"),u.closeNode(),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset();break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(){}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.model=this.map["a:blip"].model,!1;default:return!0}}}},{"../base-xform":32,"./blip-xform":58}],58:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"a:blip"}render(o,u){o.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":u.rId,cstate:"print"})}parseOpen(o){switch(o.name){case this.tag:return this.model={rId:o.attributes["r:embed"]},!0;default:return!0}}parseText(){}parseClose(o){switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],59:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"xdr:cNvPicPr"}render(o){o.openNode(this.tag),o.leafNode("a:picLocks",{noChangeAspect:"1"}),o.closeNode()}parseOpen(o){switch(o.name){case this.tag:default:return!0}}parseText(){}parseClose(o){switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],60:[function(t,r,s){const i=t("../base-xform"),o=t("./hlink-click-xform"),u=t("./ext-lst-xform");r.exports=class extends i{constructor(){super(),this.map={"a:hlinkClick":new o,"a:extLst":new u}}get tag(){return"xdr:cNvPr"}render(l,a){l.openNode(this.tag,{id:a.index,name:"Picture "+a.index}),this.map["a:hlinkClick"].render(l,a),this.map["a:extLst"].render(l,a),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset();break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(){}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model=this.map["a:hlinkClick"].model,!1;default:return!0}}}},{"../base-xform":32,"./ext-lst-xform":63,"./hlink-click-xform":65}],61:[function(t,r,s){const i=t("../base-xform"),o=t("../simple/integer-xform");r.exports=class extends i{constructor(u){super(),this.tag=u.tag,this.map={"xdr:col":new o({tag:"xdr:col",zero:!0}),"xdr:colOff":new o({tag:"xdr:colOff",zero:!0}),"xdr:row":new o({tag:"xdr:row",zero:!0}),"xdr:rowOff":new o({tag:"xdr:rowOff",zero:!0})}}render(u,l){u.openNode(this.tag),this.map["xdr:col"].render(u,l.nativeCol),this.map["xdr:colOff"].render(u,l.nativeColOff),this.map["xdr:row"].render(u,l.nativeRow),this.map["xdr:rowOff"].render(u,l.nativeRowOff),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset();break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1;default:return!0}}}},{"../base-xform":32,"../simple/integer-xform":118}],62:[function(t,r,s){const i=t("../../../utils/col-cache"),o=t("../../../utils/xml-stream"),u=t("../base-xform"),l=t("./two-cell-anchor-xform"),a=t("./one-cell-anchor-xform");class c extends u{constructor(){super(),this.map={"xdr:twoCellAnchor":new l,"xdr:oneCellAnchor":new a}}prepare(f){f.anchors.forEach((h,p)=>{h.anchorType=function(g){return(typeof g.range=="string"?i.decode(g.range):g.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"}(h),this.map[h.anchorType].prepare(h,{index:p})})}get tag(){return"xdr:wsDr"}render(f,h){f.openXml(o.StdDocAttributes),f.openNode(this.tag,c.DRAWING_ATTRIBUTES),h.anchors.forEach(p=>{this.map[p.anchorType].render(f,p)}),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case this.tag:this.reset(),this.model={anchors:[]};break;default:this.parser=this.map[f.name],this.parser&&this.parser.parseOpen(f)}return!0}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){if(this.parser)return this.parser.parseClose(f)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0;switch(f){case this.tag:return!1;default:return!0}}reconcile(f,h){f.anchors.forEach(p=>{p.br?this.map["xdr:twoCellAnchor"].reconcile(p,h):this.map["xdr:oneCellAnchor"].reconcile(p,h)})}}c.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},r.exports=c},{"../../../utils/col-cache":19,"../../../utils/xml-stream":28,"../base-xform":32,"./one-cell-anchor-xform":67,"./two-cell-anchor-xform":70}],63:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"a:extLst"}render(o){o.openNode(this.tag),o.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),o.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),o.closeNode(),o.closeNode()}parseOpen(o){switch(o.name){case this.tag:default:return!0}}parseText(){}parseClose(o){switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],64:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{constructor(o){super(),this.tag=o.tag,this.map={}}render(o,u){o.openNode(this.tag);const l=Math.floor(9525*u.width),a=Math.floor(9525*u.height);o.addAttribute("cx",l),o.addAttribute("cy",a),o.closeNode()}parseOpen(o){return o.name===this.tag&&(this.model={width:parseInt(o.attributes.cx||"0",10)/9525,height:parseInt(o.attributes.cy||"0",10)/9525},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],65:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"a:hlinkClick"}render(o,u){u.hyperlinks&&u.hyperlinks.rId&&o.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":u.hyperlinks.rId,tooltip:u.hyperlinks.tooltip})}parseOpen(o){switch(o.name){case this.tag:return this.model={hyperlinks:{rId:o.attributes["r:id"],tooltip:o.attributes.tooltip}},!0;default:return!0}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],66:[function(t,r,s){const i=t("../base-xform"),o=t("./c-nv-pr-xform"),u=t("./c-nv-pic-pr-xform");r.exports=class extends i{constructor(){super(),this.map={"xdr:cNvPr":new o,"xdr:cNvPicPr":new u}}get tag(){return"xdr:nvPicPr"}render(l,a){l.openNode(this.tag),this.map["xdr:cNvPr"].render(l,a),this.map["xdr:cNvPicPr"].render(l,a),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset();break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(){}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model=this.map["xdr:cNvPr"].model,!1;default:return!0}}}},{"../base-xform":32,"./c-nv-pic-pr-xform":59,"./c-nv-pr-xform":60}],67:[function(t,r,s){const i=t("./base-cell-anchor-xform"),o=t("../static-xform"),u=t("./cell-position-xform"),l=t("./ext-xform"),a=t("./pic-xform");r.exports=class extends i{constructor(){super(),this.map={"xdr:from":new u({tag:"xdr:from"}),"xdr:ext":new l({tag:"xdr:ext"}),"xdr:pic":new a,"xdr:clientData":new o({tag:"xdr:clientData"})}}get tag(){return"xdr:oneCellAnchor"}prepare(c,d){this.map["xdr:pic"].prepare(c.picture,d)}render(c,d){c.openNode(this.tag,{editAs:d.range.editAs||"oneCell"}),this.map["xdr:from"].render(c,d.range.tl),this.map["xdr:ext"].render(c,d.range.ext),this.map["xdr:pic"].render(c,d.picture),this.map["xdr:clientData"].render(c,{}),c.closeNode()}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(c,d){c.medium=this.reconcilePicture(c.picture,d)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./ext-xform":64,"./pic-xform":68}],68:[function(t,r,s){const i=t("../base-xform"),o=t("../static-xform"),u=t("./blip-fill-xform"),l=t("./nv-pic-pr-xform"),a=t("./sp-pr");r.exports=class extends i{constructor(){super(),this.map={"xdr:nvPicPr":new l,"xdr:blipFill":new u,"xdr:spPr":new o(a)}}get tag(){return"xdr:pic"}prepare(c,d){c.index=d.index+1}render(c,d){c.openNode(this.tag),this.map["xdr:nvPicPr"].render(c,d),this.map["xdr:blipFill"].render(c,d),this.map["xdr:spPr"].render(c,d),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:this.reset();break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(){}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.mergeModel(this.parser.model),this.parser=void 0),!0;switch(c){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"../static-xform":120,"./blip-fill-xform":57,"./nv-pic-pr-xform":66,"./sp-pr":69}],69:[function(t,r,s){r.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],70:[function(t,r,s){const i=t("./base-cell-anchor-xform"),o=t("../static-xform"),u=t("./cell-position-xform"),l=t("./pic-xform");r.exports=class extends i{constructor(){super(),this.map={"xdr:from":new u({tag:"xdr:from"}),"xdr:to":new u({tag:"xdr:to"}),"xdr:pic":new l,"xdr:clientData":new o({tag:"xdr:clientData"})}}get tag(){return"xdr:twoCellAnchor"}prepare(a,c){this.map["xdr:pic"].prepare(a.picture,c)}render(a,c){a.openNode(this.tag,{editAs:c.range.editAs||"oneCell"}),this.map["xdr:from"].render(a,c.range.tl),this.map["xdr:to"].render(a,c.range.br),this.map["xdr:pic"].render(a,c.picture),this.map["xdr:clientData"].render(a,{}),a.closeNode()}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(a,c){a.medium=this.reconcilePicture(a.picture,c)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./pic-xform":68}],71:[function(t,r,s){const i=t("./base-xform");r.exports=class extends i{constructor(o){super(),this.tag=o.tag,this.always=!!o.always,this.count=o.count,this.empty=o.empty,this.$count=o.$count||"count",this.$=o.$,this.childXform=o.childXform,this.maxItems=o.maxItems}prepare(o,u){const{childXform:l}=this;o&&o.forEach((a,c)=>{u.index=c,l.prepare(a,u)})}render(o,u){if(this.always||u&&u.length){o.openNode(this.tag,this.$),this.count&&o.addAttribute(this.$count,u&&u.length||0);const{childXform:l}=this;(u||[]).forEach((a,c)=>{l.render(o,a,c)}),o.closeNode()}else this.empty&&o.leafNode(this.tag)}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:return this.model=[],!0;default:return!!this.childXform.parseOpen(o)&&(this.parser=this.childXform,!0)}}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser){if(!this.parser.parseClose(o)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error(`Max ${this.childXform.tag} count (${this.maxItems}) exceeded`);return!0}return!1}reconcile(o,u){if(o){const{childXform:l}=this;o.forEach(a=>{l.reconcile(a,u)})}}}},{"./base-xform":32}],72:[function(t,r,s){const i=t("../../../utils/col-cache"),o=t("../base-xform");r.exports=class extends o{get tag(){return"autoFilter"}render(u,l){if(l)if(typeof l=="string")u.leafNode("autoFilter",{ref:l});else{const a=function(f){return typeof f=="string"?f:i.getAddress(f.row,f.column).address},c=a(l.from),d=a(l.to);c&&d&&u.leafNode("autoFilter",{ref:`${c}:${d}`})}}parseOpen(u){u.name==="autoFilter"&&(this.model=u.attributes.ref)}}},{"../../../utils/col-cache":19,"../base-xform":32}],73:[function(t,r,s){const i=t("../../../utils/utils"),o=t("../base-xform"),u=t("../../../doc/range"),l=t("../../../doc/enums"),a=t("../strings/rich-text-xform");function c(d){if(d==null)return l.ValueType.Null;if(d instanceof String||typeof d=="string")return l.ValueType.String;if(typeof d=="number")return l.ValueType.Number;if(typeof d=="boolean")return l.ValueType.Boolean;if(d instanceof Date)return l.ValueType.Date;if(d.text&&d.hyperlink)return l.ValueType.Hyperlink;if(d.formula)return l.ValueType.Formula;if(d.error)return l.ValueType.Error;throw new Error("I could not understand type of value")}r.exports=class extends o{constructor(){super(),this.richTextXForm=new a}get tag(){return"c"}prepare(d,f){const h=f.styles.addStyleModel(d.style||{},function(p){switch(p.type){case l.ValueType.Formula:return c(p.result);default:return p.type}}(d));switch(h&&(d.styleId=h),d.comment&&f.comments.push({...d.comment,ref:d.address}),d.type){case l.ValueType.String:case l.ValueType.RichText:f.sharedStrings&&(d.ssId=f.sharedStrings.add(d.value));break;case l.ValueType.Date:f.date1904&&(d.date1904=!0);break;case l.ValueType.Hyperlink:f.sharedStrings&&d.text!==void 0&&d.text!==null&&(d.ssId=f.sharedStrings.add(d.text)),f.hyperlinks.push({address:d.address,target:d.hyperlink,tooltip:d.tooltip});break;case l.ValueType.Merge:f.merges.add(d);break;case l.ValueType.Formula:if(f.date1904&&(d.date1904=!0),d.shareType==="shared"&&(d.si=f.siFormulae++),d.formula)f.formulae[d.address]=d;else if(d.sharedFormula){const p=f.formulae[d.sharedFormula];if(!p)throw new Error("Shared Formula master must exist above and or left of clone for cell "+d.address);p.si===void 0?(p.shareType="shared",p.si=f.siFormulae++,p.range=new u(p.address,d.address)):p.range&&p.range.expandToAddress(d.address),d.si=p.si}}}renderFormula(d,f){let h=null;switch(f.shareType){case"shared":h={t:"shared",ref:f.ref||f.range.range,si:f.si};break;case"array":h={t:"array",ref:f.ref};break;default:f.si!==void 0&&(h={t:"shared",si:f.si})}switch(c(f.result)){case l.ValueType.Null:d.leafNode("f",h,f.formula);break;case l.ValueType.String:d.addAttribute("t","str"),d.leafNode("f",h,f.formula),d.leafNode("v",null,f.result);break;case l.ValueType.Number:d.leafNode("f",h,f.formula),d.leafNode("v",null,f.result);break;case l.ValueType.Boolean:d.addAttribute("t","b"),d.leafNode("f",h,f.formula),d.leafNode("v",null,f.result?1:0);break;case l.ValueType.Error:d.addAttribute("t","e"),d.leafNode("f",h,f.formula),d.leafNode("v",null,f.result.error);break;case l.ValueType.Date:d.leafNode("f",h,f.formula),d.leafNode("v",null,i.dateToExcel(f.result,f.date1904));break;default:throw new Error("I could not understand type of value")}}render(d,f){if(f.type!==l.ValueType.Null||f.styleId){switch(d.openNode("c"),d.addAttribute("r",f.address),f.styleId&&d.addAttribute("s",f.styleId),f.type){case l.ValueType.Null:break;case l.ValueType.Number:d.leafNode("v",null,f.value);break;case l.ValueType.Boolean:d.addAttribute("t","b"),d.leafNode("v",null,f.value?"1":"0");break;case l.ValueType.Error:d.addAttribute("t","e"),d.leafNode("v",null,f.value.error);break;case l.ValueType.String:case l.ValueType.RichText:f.ssId!==void 0?(d.addAttribute("t","s"),d.leafNode("v",null,f.ssId)):f.value&&f.value.richText?(d.addAttribute("t","inlineStr"),d.openNode("is"),f.value.richText.forEach(h=>{this.richTextXForm.render(d,h)}),d.closeNode("is")):(d.addAttribute("t","str"),d.leafNode("v",null,f.value));break;case l.ValueType.Date:d.leafNode("v",null,i.dateToExcel(f.value,f.date1904));break;case l.ValueType.Hyperlink:f.ssId!==void 0?(d.addAttribute("t","s"),d.leafNode("v",null,f.ssId)):(d.addAttribute("t","str"),d.leafNode("v",null,f.text));break;case l.ValueType.Formula:this.renderFormula(d,f);break;case l.ValueType.Merge:}d.closeNode()}}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;switch(d.name){case"c":return this.model={address:d.attributes.r},this.t=d.attributes.t,d.attributes.s&&(this.model.styleId=parseInt(d.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=d.attributes.si,this.model.shareType=d.attributes.t,this.model.ref=d.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(d),!0;default:return!1}}parseText(d){if(this.parser)this.parser.parseText(d);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+d:d;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+d:d:this.model.value=this.model.value?this.model.value+d:d}}parseClose(d){switch(d){case"c":{const{model:f}=this;if(f.formula||f.shareType)f.type=l.ValueType.Formula,f.value&&(this.t==="str"?f.result=i.xmlDecode(f.value):this.t==="b"?f.result=parseInt(f.value,10)!==0:this.t==="e"?f.result={error:f.value}:f.result=parseFloat(f.value),f.value=void 0);else if(f.value!==void 0)switch(this.t){case"s":f.type=l.ValueType.String,f.value=parseInt(f.value,10);break;case"str":f.type=l.ValueType.String,f.value=i.xmlDecode(f.value);break;case"inlineStr":f.type=l.ValueType.String;break;case"b":f.type=l.ValueType.Boolean,f.value=parseInt(f.value,10)!==0;break;case"e":f.type=l.ValueType.Error,f.value={error:f.value};break;default:f.type=l.ValueType.Number,f.value=parseFloat(f.value)}else f.styleId?f.type=l.ValueType.Null:f.type=l.ValueType.Merge;return!1}case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(d),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(d),!0)}}reconcile(d,f){const h=d.styleId&&f.styles&&f.styles.getStyleModel(d.styleId);switch(h&&(d.style=h),d.styleId!==void 0&&(d.styleId=void 0),d.type){case l.ValueType.String:typeof d.value=="number"&&f.sharedStrings&&(d.value=f.sharedStrings.getString(d.value)),d.value.richText&&(d.type=l.ValueType.RichText);break;case l.ValueType.Number:h&&i.isDateFmt(h.numFmt)&&(d.type=l.ValueType.Date,d.value=i.excelToDate(d.value,f.date1904));break;case l.ValueType.Formula:d.result!==void 0&&h&&i.isDateFmt(h.numFmt)&&(d.result=i.excelToDate(d.result,f.date1904)),d.shareType==="shared"&&(d.ref?f.formulae[d.si]=d.address:(d.sharedFormula=f.formulae[d.si],delete d.shareType),delete d.si)}const p=f.hyperlinkMap[d.address];p&&(d.type===l.ValueType.Formula?(d.text=d.result,d.result=void 0):(d.text=d.value,d.value=void 0),d.type=l.ValueType.Hyperlink,d.hyperlink=p);const g=f.commentsMap&&f.commentsMap[d.address];g&&(d.comment=g)}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],74:[function(t,r,s){const i=t("../../base-xform");r.exports=class extends i{get tag(){return"x14:cfIcon"}render(o,u){o.leafNode(this.tag,{iconSet:u.iconSet,iconId:u.iconId})}parseOpen(o){let{attributes:u}=o;this.model={iconSet:u.iconSet,iconId:i.toIntValue(u.iconId)}}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],75:[function(t,r,s){const{v4:i}=t("uuid"),o=t("../../base-xform"),u=t("../../composite-xform"),l=t("./databar-ext-xform"),a=t("./icon-set-ext-xform"),c={"3Triangles":!0,"3Stars":!0,"5Boxes":!0};class d extends u{constructor(){super(),this.map={"x14:dataBar":this.databarXform=new l,"x14:iconSet":this.iconSetXform=new a}}get tag(){return"x14:cfRule"}static isExt(h){return h.type==="dataBar"?l.isExt(h):!(h.type!=="iconSet"||!h.custom&&!c[h.iconSet])}prepare(h){d.isExt(h)&&(h.x14Id=`{${i()}}`.toUpperCase())}render(h,p){if(d.isExt(p))switch(p.type){case"dataBar":this.renderDataBar(h,p);break;case"iconSet":this.renderIconSet(h,p)}}renderDataBar(h,p){h.openNode(this.tag,{type:"dataBar",id:p.x14Id}),this.databarXform.render(h,p),h.closeNode()}renderIconSet(h,p){h.openNode(this.tag,{type:"iconSet",priority:p.priority,id:p.x14Id||`{${i()}}`}),this.iconSetXform.render(h,p),h.closeNode()}createNewModel(h){let{attributes:p}=h;return{type:p.type,x14Id:p.id,priority:o.toIntValue(p.priority)}}onParserClose(h,p){Object.assign(this.model,p.model)}}r.exports=d},{"../../base-xform":32,"../../composite-xform":48,"./databar-ext-xform":79,"./icon-set-ext-xform":81,uuid:528}],76:[function(t,r,s){const i=t("../../composite-xform"),o=t("./f-ext-xform");r.exports=class extends i{constructor(){super(),this.map={"xm:f":this.fExtXform=new o}}get tag(){return"x14:cfvo"}render(u,l){u.openNode(this.tag,{type:l.type}),l.value!==void 0&&this.fExtXform.render(u,l.value),u.closeNode()}createNewModel(u){return{type:u.attributes.type}}onParserClose(u,l){switch(u){case"xm:f":this.model.value=l.model?parseFloat(l.model):0}}}},{"../../composite-xform":48,"./f-ext-xform":80}],77:[function(t,r,s){const i=t("../../composite-xform"),o=t("./sqref-ext-xform"),u=t("./cf-rule-ext-xform");r.exports=class extends i{constructor(){super(),this.map={"xm:sqref":this.sqRef=new o,"x14:cfRule":this.cfRule=new u}}get tag(){return"x14:conditionalFormatting"}prepare(l,a){l.rules.forEach(c=>{this.cfRule.prepare(c,a)})}render(l,a){a.rules.some(u.isExt)&&(l.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),a.rules.filter(u.isExt).forEach(c=>this.cfRule.render(l,c)),this.sqRef.render(l,a.ref),l.closeNode())}createNewModel(){return{rules:[]}}onParserClose(l,a){switch(l){case"xm:sqref":this.model.ref=a.model;break;case"x14:cfRule":this.model.rules.push(a.model)}}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./sqref-ext-xform":82}],78:[function(t,r,s){const i=t("../../composite-xform"),o=t("./cf-rule-ext-xform"),u=t("./conditional-formatting-ext-xform");r.exports=class extends i{constructor(){super(),this.map={"x14:conditionalFormatting":this.cfXform=new u}}get tag(){return"x14:conditionalFormattings"}hasContent(l){return l.hasExtContent===void 0&&(l.hasExtContent=l.some(a=>a.rules.some(o.isExt))),l.hasExtContent}prepare(l,a){l.forEach(c=>{this.cfXform.prepare(c,a)})}render(l,a){this.hasContent(a)&&(l.openNode(this.tag),a.forEach(c=>this.cfXform.render(l,c)),l.closeNode())}createNewModel(){return[]}onParserClose(l,a){this.model.push(a.model)}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./conditional-formatting-ext-xform":77}],79:[function(t,r,s){const i=t("../../base-xform"),o=t("../../composite-xform"),u=t("../../style/color-xform"),l=t("./cfvo-ext-xform");r.exports=class extends o{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new l,"x14:borderColor":this.borderColorXform=new u("x14:borderColor"),"x14:negativeBorderColor":this.negativeBorderColorXform=new u("x14:negativeBorderColor"),"x14:negativeFillColor":this.negativeFillColorXform=new u("x14:negativeFillColor"),"x14:axisColor":this.axisColorXform=new u("x14:axisColor")}}static isExt(a){return!a.gradient}get tag(){return"x14:dataBar"}render(a,c){a.openNode(this.tag,{minLength:i.toIntAttribute(c.minLength,0,!0),maxLength:i.toIntAttribute(c.maxLength,100,!0),border:i.toBoolAttribute(c.border,!1),gradient:i.toBoolAttribute(c.gradient,!0),negativeBarColorSameAsPositive:i.toBoolAttribute(c.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:i.toBoolAttribute(c.negativeBarBorderColorSameAsPositive,!0),axisPosition:i.toAttribute(c.axisPosition,"auto"),direction:i.toAttribute(c.direction,"leftToRight")}),c.cfvo.forEach(d=>{this.cfvoXform.render(a,d)}),this.borderColorXform.render(a,c.borderColor),this.negativeBorderColorXform.render(a,c.negativeBorderColor),this.negativeFillColorXform.render(a,c.negativeFillColor),this.axisColorXform.render(a,c.axisColor),a.closeNode()}createNewModel(a){let{attributes:c}=a;return{cfvo:[],minLength:i.toIntValue(c.minLength,0),maxLength:i.toIntValue(c.maxLength,100),border:i.toBoolValue(c.border,!1),gradient:i.toBoolValue(c.gradient,!0),negativeBarColorSameAsPositive:i.toBoolValue(c.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:i.toBoolValue(c.negativeBarBorderColorSameAsPositive,!0),axisPosition:i.toStringValue(c.axisPosition,"auto"),direction:i.toStringValue(c.direction,"leftToRight")}}onParserClose(a,c){const[,d]=a.split(":");switch(d){case"cfvo":this.model.cfvo.push(c.model);break;default:this.model[d]=c.model}}}},{"../../base-xform":32,"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-ext-xform":76}],80:[function(t,r,s){const i=t("../../base-xform");r.exports=class extends i{get tag(){return"xm:f"}render(o,u){o.leafNode(this.tag,null,u)}parseOpen(){this.model=""}parseText(o){this.model+=o}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],81:[function(t,r,s){const i=t("../../base-xform"),o=t("../../composite-xform"),u=t("./cfvo-ext-xform"),l=t("./cf-icon-ext-xform");r.exports=class extends o{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new u,"x14:cfIcon":this.cfIconXform=new l}}get tag(){return"x14:iconSet"}render(a,c){a.openNode(this.tag,{iconSet:i.toStringAttribute(c.iconSet),reverse:i.toBoolAttribute(c.reverse,!1),showValue:i.toBoolAttribute(c.showValue,!0),custom:i.toBoolAttribute(c.icons,!1)}),c.cfvo.forEach(d=>{this.cfvoXform.render(a,d)}),c.icons&&c.icons.forEach((d,f)=>{d.iconId=f,this.cfIconXform.render(a,d)}),a.closeNode()}createNewModel(a){let{attributes:c}=a;return{cfvo:[],iconSet:i.toStringValue(c.iconSet,"3TrafficLights"),reverse:i.toBoolValue(c.reverse,!1),showValue:i.toBoolValue(c.showValue,!0)}}onParserClose(a,c){const[,d]=a.split(":");switch(d){case"cfvo":this.model.cfvo.push(c.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(c.model);break;default:this.model[d]=c.model}}}},{"../../base-xform":32,"../../composite-xform":48,"./cf-icon-ext-xform":74,"./cfvo-ext-xform":76}],82:[function(t,r,s){const i=t("../../base-xform");r.exports=class extends i{get tag(){return"xm:sqref"}render(o,u){o.leafNode(this.tag,null,u)}parseOpen(){this.model=""}parseText(o){this.model+=o}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],83:[function(t,r,s){const i=t("../../base-xform"),o=t("../../composite-xform"),u=t("../../../../doc/range"),l=t("./databar-xform"),a=t("./ext-lst-ref-xform"),c=t("./formula-xform"),d=t("./color-scale-xform"),f=t("./icon-set-xform"),h={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},p=m=>{const{type:y,operator:b}=m;switch(y){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:y};default:return{type:y,operator:b}}};class g extends o{constructor(){super(),this.map={dataBar:this.databarXform=new l,extLst:this.extLstRefXform=new a,formula:this.formulaXform=new c,colorScale:this.colorScaleXform=new d,iconSet:this.iconSetXform=new f}}get tag(){return"cfRule"}static isPrimitive(y){return y.type!=="iconSet"||!y.custom&&!h[y.iconSet]}render(y,b){switch(b.type){case"expression":this.renderExpression(y,b);break;case"cellIs":this.renderCellIs(y,b);break;case"top10":this.renderTop10(y,b);break;case"aboveAverage":this.renderAboveAverage(y,b);break;case"dataBar":this.renderDataBar(y,b);break;case"colorScale":this.renderColorScale(y,b);break;case"iconSet":this.renderIconSet(y,b);break;case"containsText":this.renderText(y,b);break;case"timePeriod":this.renderTimePeriod(y,b)}}renderExpression(y,b){y.openNode(this.tag,{type:"expression",dxfId:b.dxfId,priority:b.priority}),this.formulaXform.render(y,b.formulae[0]),y.closeNode()}renderCellIs(y,b){y.openNode(this.tag,{type:"cellIs",dxfId:b.dxfId,priority:b.priority,operator:b.operator}),b.formulae.forEach(v=>{this.formulaXform.render(y,v)}),y.closeNode()}renderTop10(y,b){y.leafNode(this.tag,{type:"top10",dxfId:b.dxfId,priority:b.priority,percent:i.toBoolAttribute(b.percent,!1),bottom:i.toBoolAttribute(b.bottom,!1),rank:i.toIntValue(b.rank,10,!0)})}renderAboveAverage(y,b){y.leafNode(this.tag,{type:"aboveAverage",dxfId:b.dxfId,priority:b.priority,aboveAverage:i.toBoolAttribute(b.aboveAverage,!0)})}renderDataBar(y,b){y.openNode(this.tag,{type:"dataBar",priority:b.priority}),this.databarXform.render(y,b),this.extLstRefXform.render(y,b),y.closeNode()}renderColorScale(y,b){y.openNode(this.tag,{type:"colorScale",priority:b.priority}),this.colorScaleXform.render(y,b),y.closeNode()}renderIconSet(y,b){g.isPrimitive(b)&&(y.openNode(this.tag,{type:"iconSet",priority:b.priority}),this.iconSetXform.render(y,b),y.closeNode())}renderText(y,b){y.openNode(this.tag,{type:b.operator,dxfId:b.dxfId,priority:b.priority,operator:i.toStringAttribute(b.operator,"containsText")});const v=(k=>{if(k.formulae&&k.formulae[0])return k.formulae[0];const j=new u(k.ref),{tl:I}=j;switch(k.operator){case"containsText":return`NOT(ISERROR(SEARCH("${k.text}",${I})))`;case"containsBlanks":return`LEN(TRIM(${I}))=0`;case"notContainsBlanks":return`LEN(TRIM(${I}))>0`;case"containsErrors":return`ISERROR(${I})`;case"notContainsErrors":return`NOT(ISERROR(${I}))`;default:return}})(b);v&&this.formulaXform.render(y,v),y.closeNode()}renderTimePeriod(y,b){y.openNode(this.tag,{type:"timePeriod",dxfId:b.dxfId,priority:b.priority,timePeriod:b.timePeriod});const v=(k=>{if(k.formulae&&k.formulae[0])return k.formulae[0];const j=new u(k.ref),{tl:I}=j;switch(k.timePeriod){case"thisWeek":return`AND(TODAY()-ROUNDDOWN(${I},0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(${I},0)-TODAY()<=7-WEEKDAY(TODAY()))`;case"lastWeek":return`AND(TODAY()-ROUNDDOWN(${I},0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(${I},0)<(WEEKDAY(TODAY())+7))`;case"nextWeek":return`AND(ROUNDDOWN(${I},0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(${I},0)-TODAY()<(15-WEEKDAY(TODAY())))`;case"yesterday":return`FLOOR(${I},1)=TODAY()-1`;case"today":return`FLOOR(${I},1)=TODAY()`;case"tomorrow":return`FLOOR(${I},1)=TODAY()+1`;case"last7Days":return`AND(TODAY()-FLOOR(${I},1)<=6,FLOOR(${I},1)<=TODAY())`;case"lastMonth":return`AND(MONTH(${I})=MONTH(EDATE(TODAY(),0-1)),YEAR(${I})=YEAR(EDATE(TODAY(),0-1)))`;case"thisMonth":return`AND(MONTH(${I})=MONTH(TODAY()),YEAR(${I})=YEAR(TODAY()))`;case"nextMonth":return`AND(MONTH(${I})=MONTH(EDATE(TODAY(),0+1)),YEAR(${I})=YEAR(EDATE(TODAY(),0+1)))`;default:return}})(b);v&&this.formulaXform.render(y,v),y.closeNode()}createNewModel(y){let{attributes:b}=y;return{...p(b),dxfId:i.toIntValue(b.dxfId),priority:i.toIntValue(b.priority),timePeriod:b.timePeriod,percent:i.toBoolValue(b.percent),bottom:i.toBoolValue(b.bottom),rank:i.toIntValue(b.rank),aboveAverage:i.toBoolValue(b.aboveAverage)}}onParserClose(y,b){switch(y){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,b.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(b.model)}}}r.exports=g},{"../../../../doc/range":10,"../../base-xform":32,"../../composite-xform":48,"./color-scale-xform":85,"./databar-xform":88,"./ext-lst-ref-xform":89,"./formula-xform":90,"./icon-set-xform":91}],84:[function(t,r,s){const i=t("../../base-xform");r.exports=class extends i{get tag(){return"cfvo"}render(o,u){o.leafNode(this.tag,{type:u.type,val:u.value})}parseOpen(o){this.model={type:o.attributes.type,value:i.toFloatValue(o.attributes.val)}}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],85:[function(t,r,s){const i=t("../../composite-xform"),o=t("../../style/color-xform"),u=t("./cfvo-xform");r.exports=class extends i{constructor(){super(),this.map={cfvo:this.cfvoXform=new u,color:this.colorXform=new o}}get tag(){return"colorScale"}render(l,a){l.openNode(this.tag),a.cfvo.forEach(c=>{this.cfvoXform.render(l,c)}),a.color.forEach(c=>{this.colorXform.render(l,c)}),l.closeNode()}createNewModel(l){return{cfvo:[],color:[]}}onParserClose(l,a){this.model[l].push(a.model)}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],86:[function(t,r,s){const i=t("../../composite-xform"),o=t("./cf-rule-xform");r.exports=class extends i{constructor(){super(),this.map={cfRule:new o}}get tag(){return"conditionalFormatting"}render(u,l){l.rules.some(o.isPrimitive)&&(u.openNode(this.tag,{sqref:l.ref}),l.rules.forEach(a=>{o.isPrimitive(a)&&(a.ref=l.ref,this.map.cfRule.render(u,a))}),u.closeNode())}createNewModel(u){let{attributes:l}=u;return{ref:l.sqref,rules:[]}}onParserClose(u,l){this.model.rules.push(l.model)}}},{"../../composite-xform":48,"./cf-rule-xform":83}],87:[function(t,r,s){const i=t("../../base-xform"),o=t("./conditional-formatting-xform");r.exports=class extends i{constructor(){super(),this.cfXform=new o}get tag(){return"conditionalFormatting"}reset(){this.model=[]}prepare(u,l){let a=u.reduce((c,d)=>Math.max(c,...d.rules.map(f=>f.priority||0)),1);u.forEach(c=>{c.rules.forEach(d=>{d.priority||(d.priority=a++),d.style&&(d.dxfId=l.styles.addDxfStyle(d.style))})})}render(u,l){l.forEach(a=>{this.cfXform.render(u,a)})}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"conditionalFormatting":return this.parser=this.cfXform,this.parser.parseOpen(u),!0;default:return!1}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return!!this.parser&&(!!this.parser.parseClose(u)||(this.model.push(this.parser.model),this.parser=void 0,!1))}reconcile(u,l){u.forEach(a=>{a.rules.forEach(c=>{c.dxfId!==void 0&&(c.style=l.styles.getDxfStyle(c.dxfId),delete c.dxfId)})})}}},{"../../base-xform":32,"./conditional-formatting-xform":86}],88:[function(t,r,s){const i=t("../../composite-xform"),o=t("../../style/color-xform"),u=t("./cfvo-xform");r.exports=class extends i{constructor(){super(),this.map={cfvo:this.cfvoXform=new u,color:this.colorXform=new o}}get tag(){return"dataBar"}render(l,a){l.openNode(this.tag),a.cfvo.forEach(c=>{this.cfvoXform.render(l,c)}),this.colorXform.render(l,a.color),l.closeNode()}createNewModel(){return{cfvo:[]}}onParserClose(l,a){switch(l){case"cfvo":this.model.cfvo.push(a.model);break;case"color":this.model.color=a.model}}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],89:[function(t,r,s){const i=t("../../base-xform"),o=t("../../composite-xform");class u extends i{get tag(){return"x14:id"}render(c,d){c.leafNode(this.tag,null,d)}parseOpen(){this.model=""}parseText(c){this.model+=c}parseClose(c){return c!==this.tag}}class l extends o{constructor(){super(),this.map={"x14:id":this.idXform=new u}}get tag(){return"ext"}render(c,d){c.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(c,d.x14Id),c.closeNode()}createNewModel(){return{}}onParserClose(c,d){this.model.x14Id=d.model}}r.exports=class extends o{constructor(){super(),this.map={ext:new l}}get tag(){return"extLst"}render(a,c){a.openNode(this.tag),this.map.ext.render(a,c),a.closeNode()}createNewModel(){return{}}onParserClose(a,c){Object.assign(this.model,c.model)}}},{"../../base-xform":32,"../../composite-xform":48}],90:[function(t,r,s){const i=t("../../base-xform");r.exports=class extends i{get tag(){return"formula"}render(o,u){o.leafNode(this.tag,null,u)}parseOpen(){this.model=""}parseText(o){this.model+=o}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],91:[function(t,r,s){const i=t("../../base-xform"),o=t("../../composite-xform"),u=t("./cfvo-xform");r.exports=class extends o{constructor(){super(),this.map={cfvo:this.cfvoXform=new u}}get tag(){return"iconSet"}render(l,a){l.openNode(this.tag,{iconSet:i.toStringAttribute(a.iconSet,"3TrafficLights"),reverse:i.toBoolAttribute(a.reverse,!1),showValue:i.toBoolAttribute(a.showValue,!0)}),a.cfvo.forEach(c=>{this.cfvoXform.render(l,c)}),l.closeNode()}createNewModel(l){let{attributes:a}=l;return{iconSet:i.toStringValue(a.iconSet,"3TrafficLights"),reverse:i.toBoolValue(a.reverse),showValue:i.toBoolValue(a.showValue),cfvo:[]}}onParserClose(l,a){this.model[l].push(a.model)}}},{"../../base-xform":32,"../../composite-xform":48,"./cfvo-xform":84}],92:[function(t,r,s){const i=t("../../../utils/utils"),o=t("../base-xform");r.exports=class extends o{get tag(){return"col"}prepare(u,l){const a=l.styles.addStyleModel(u.style||{});a&&(u.styleId=a)}render(u,l){u.openNode("col"),u.addAttribute("min",l.min),u.addAttribute("max",l.max),l.width&&u.addAttribute("width",l.width),l.styleId&&u.addAttribute("style",l.styleId),l.hidden&&u.addAttribute("hidden","1"),l.bestFit&&u.addAttribute("bestFit","1"),l.outlineLevel&&u.addAttribute("outlineLevel",l.outlineLevel),l.collapsed&&u.addAttribute("collapsed","1"),u.addAttribute("customWidth","1"),u.closeNode()}parseOpen(u){if(u.name==="col"){const l=this.model={min:parseInt(u.attributes.min||"0",10),max:parseInt(u.attributes.max||"0",10),width:u.attributes.width===void 0?void 0:parseFloat(u.attributes.width||"0")};return u.attributes.style&&(l.styleId=parseInt(u.attributes.style,10)),i.parseBoolean(u.attributes.hidden)&&(l.hidden=!0),i.parseBoolean(u.attributes.bestFit)&&(l.bestFit=!0),u.attributes.outlineLevel&&(l.outlineLevel=parseInt(u.attributes.outlineLevel,10)),i.parseBoolean(u.attributes.collapsed)&&(l.collapsed=!0),!0}return!1}parseText(){}parseClose(){return!1}reconcile(u,l){u.styleId&&(u.style=l.styles.getStyleModel(u.styleId))}}},{"../../../utils/utils":27,"../base-xform":32}],93:[function(t,r,s){const i=t("../../../utils/under-dash"),o=t("../../../utils/utils"),u=t("../../../utils/col-cache"),l=t("../base-xform"),a=t("../../../doc/range");function c(f,h,p,g){const m=h[p];m!==void 0?f[p]=m:g!==void 0&&(f[p]=g)}function d(f,h,p,g){const m=h[p];m!==void 0&&(f[p]=o.parseBoolean(m))}r.exports=class extends l{get tag(){return"dataValidations"}render(f,h){const p=function(g){const m=i.map(g,(v,k)=>({address:k,dataValidation:v,marked:!1})).sort((v,k)=>i.strcmp(v.address,k.address)),y=i.keyBy(m,"address"),b=(v,k,j)=>{for(let I=0;I<k;I++){const U=u.encodeAddress(v.row+I,j);if(!g[U]||!i.isEqual(g[v.address],g[U]))return!1}return!0};return m.map(v=>{if(!v.marked){const k=u.decodeEx(v.address);if(k.dimensions)return y[k.dimensions].marked=!0,{...v.dataValidation,sqref:v.address};let j=1,I=u.encodeAddress(k.row+j,k.col);for(;g[I]&&i.isEqual(v.dataValidation,g[I]);)j++,I=u.encodeAddress(k.row+j,k.col);let U=1;for(;b(k,j,k.col+U);)U++;for(let P=0;P<j;P++)for(let z=0;z<U;z++)I=u.encodeAddress(k.row+P,k.col+z),y[I].marked=!0;if(j>1||U>1){const P=k.row+(j-1),z=k.col+(U-1);return{...v.dataValidation,sqref:`${v.address}:${u.encodeAddress(P,z)}`}}return{...v.dataValidation,sqref:v.address}}return null}).filter(Boolean)}(h);p.length&&(f.openNode("dataValidations",{count:p.length}),p.forEach(g=>{f.openNode("dataValidation"),g.type!=="any"&&(f.addAttribute("type",g.type),g.operator&&g.type!=="list"&&g.operator!=="between"&&f.addAttribute("operator",g.operator),g.allowBlank&&f.addAttribute("allowBlank","1")),g.showInputMessage&&f.addAttribute("showInputMessage","1"),g.promptTitle&&f.addAttribute("promptTitle",g.promptTitle),g.prompt&&f.addAttribute("prompt",g.prompt),g.showErrorMessage&&f.addAttribute("showErrorMessage","1"),g.errorStyle&&f.addAttribute("errorStyle",g.errorStyle),g.errorTitle&&f.addAttribute("errorTitle",g.errorTitle),g.error&&f.addAttribute("error",g.error),f.addAttribute("sqref",g.sqref),(g.formulae||[]).forEach((m,y)=>{f.openNode("formula"+(y+1)),g.type==="date"?f.writeText(o.dateToExcel(new Date(m))):f.writeText(m),f.closeNode()}),f.closeNode()}),f.closeNode())}parseOpen(f){switch(f.name){case"dataValidations":return this.model={},!0;case"dataValidation":{this._address=f.attributes.sqref;const h={type:f.attributes.type||"any",formulae:[]};switch(f.attributes.type&&d(h,f.attributes,"allowBlank"),d(h,f.attributes,"showInputMessage"),d(h,f.attributes,"showErrorMessage"),h.type){case"any":case"list":case"custom":break;default:c(h,f.attributes,"operator","between")}return c(h,f.attributes,"promptTitle"),c(h,f.attributes,"prompt"),c(h,f.attributes,"errorStyle"),c(h,f.attributes,"errorTitle"),c(h,f.attributes,"error"),this._dataValidation=h,!0}case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}parseText(f){this._formula&&this._formula.push(f)}parseClose(f){switch(f){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach(h=>{h.includes(":")?new a(h).forEachAddress(p=>{this.model[p]=this._dataValidation}):this.model[h]=this._dataValidation}),!0;case"formula1":case"formula2":{let h=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":h=parseInt(h,10);break;case"decimal":h=parseFloat(h);break;case"date":h=o.excelToDate(parseFloat(h))}return this._dataValidation.formulae.push(h),this._formula=void 0,!0}default:return!0}}}},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/utils":27,"../base-xform":32}],94:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"dimension"}render(o,u){u&&o.leafNode("dimension",{ref:u})}parseOpen(o){return o.name==="dimension"&&(this.model=o.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],95:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"drawing"}render(o,u){u&&o.leafNode(this.tag,{"r:id":u.rId})}parseOpen(o){switch(o.name){case this.tag:return this.model={rId:o.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],96:[function(t,r,s){const i=t("../composite-xform"),o=t("./cf-ext/conditional-formattings-ext-xform");class u extends i{constructor(){super(),this.map={"x14:conditionalFormattings":this.conditionalFormattings=new o}}get tag(){return"ext"}hasContent(a){return this.conditionalFormattings.hasContent(a.conditionalFormattings)}prepare(a,c){this.conditionalFormattings.prepare(a.conditionalFormattings,c)}render(a,c){a.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(a,c.conditionalFormattings),a.closeNode()}createNewModel(){return{}}onParserClose(a,c){this.model[a]=c.model}}r.exports=class extends i{constructor(){super(),this.map={ext:this.ext=new u}}get tag(){return"extLst"}prepare(l,a){this.ext.prepare(l,a)}hasContent(l){return this.ext.hasContent(l)}render(l,a){this.hasContent(a)&&(l.openNode("extLst"),this.ext.render(l,a),l.closeNode())}createNewModel(){return{}}onParserClose(l,a){Object.assign(this.model,a.model)}}},{"../composite-xform":48,"./cf-ext/conditional-formattings-ext-xform":78}],97:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"headerFooter"}render(o,u){if(u){o.addRollback();let l=!1;o.openNode("headerFooter"),u.differentFirst&&(o.addAttribute("differentFirst","1"),l=!0),u.differentOddEven&&(o.addAttribute("differentOddEven","1"),l=!0),u.oddHeader&&typeof u.oddHeader=="string"&&(o.leafNode("oddHeader",null,u.oddHeader),l=!0),u.oddFooter&&typeof u.oddFooter=="string"&&(o.leafNode("oddFooter",null,u.oddFooter),l=!0),u.evenHeader&&typeof u.evenHeader=="string"&&(o.leafNode("evenHeader",null,u.evenHeader),l=!0),u.evenFooter&&typeof u.evenFooter=="string"&&(o.leafNode("evenFooter",null,u.evenFooter),l=!0),u.firstHeader&&typeof u.firstHeader=="string"&&(o.leafNode("firstHeader",null,u.firstHeader),l=!0),u.firstFooter&&typeof u.firstFooter=="string"&&(o.leafNode("firstFooter",null,u.firstFooter),l=!0),l?(o.closeNode(),o.commit()):o.rollback()}}parseOpen(o){switch(o.name){case"headerFooter":return this.model={},o.attributes.differentFirst&&(this.model.differentFirst=parseInt(o.attributes.differentFirst,0)===1),o.attributes.differentOddEven&&(this.model.differentOddEven=parseInt(o.attributes.differentOddEven,0)===1),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}parseText(o){switch(this.currentNode){case"oddHeader":this.model.oddHeader=o;break;case"oddFooter":this.model.oddFooter=o;break;case"evenHeader":this.model.evenHeader=o;break;case"evenFooter":this.model.evenFooter=o;break;case"firstHeader":this.model.firstHeader=o;break;case"firstFooter":this.model.firstFooter=o}}parseClose(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}}},{"../base-xform":32}],98:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"hyperlink"}render(o,u){this.isInternalLink(u)?o.leafNode("hyperlink",{ref:u.address,"r:id":u.rId,tooltip:u.tooltip,location:u.target}):o.leafNode("hyperlink",{ref:u.address,"r:id":u.rId,tooltip:u.tooltip})}parseOpen(o){return o.name==="hyperlink"&&(this.model={address:o.attributes.ref,rId:o.attributes["r:id"],tooltip:o.attributes.tooltip},o.attributes.location&&(this.model.target=o.attributes.location),!0)}parseText(){}parseClose(){return!1}isInternalLink(o){return o.target&&/^[^!]+![a-zA-Z]+[\d]+$/.test(o.target)}}},{"../base-xform":32}],99:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"mergeCell"}render(o,u){o.leafNode("mergeCell",{ref:u})}parseOpen(o){return o.name==="mergeCell"&&(this.model=o.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],100:[function(t,r,s){const i=t("../../../utils/under-dash"),o=t("../../../doc/range"),u=t("../../../utils/col-cache"),l=t("../../../doc/enums");r.exports=class{constructor(){this.merges={}}add(a){if(this.merges[a.master])this.merges[a.master].expandToAddress(a.address);else{const c=`${a.master}:${a.address}`;this.merges[a.master]=new o(c)}}get mergeCells(){return i.map(this.merges,a=>a.range)}reconcile(a,c){i.each(a,d=>{const f=u.decode(d);for(let h=f.top;h<=f.bottom;h++){const p=c[h-1];for(let g=f.left;g<=f.right;g++){const m=p.cells[g-1];m?m.type===l.ValueType.Merge&&(m.master=f.tl):p.cells[g]={type:l.ValueType.Null,address:u.encodeAddress(h,g)}}}})}getMasterAddress(a){const c=this.hash[a];return c&&c.tl}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26}],101:[function(t,r,s){const i=t("../base-xform"),o=u=>u!==void 0;r.exports=class extends i{get tag(){return"outlinePr"}render(u,l){return!(!l||!o(l.summaryBelow)&&!o(l.summaryRight))&&(u.leafNode(this.tag,{summaryBelow:o(l.summaryBelow)?Number(l.summaryBelow):void 0,summaryRight:o(l.summaryRight)?Number(l.summaryRight):void 0}),!0)}parseOpen(u){return u.name===this.tag&&(this.model={summaryBelow:o(u.attributes.summaryBelow)?!!Number(u.attributes.summaryBelow):void 0,summaryRight:o(u.attributes.summaryRight)?!!Number(u.attributes.summaryRight):void 0},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],102:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"brk"}render(o,u){o.leafNode("brk",u)}parseOpen(o){return o.name==="brk"&&(this.model=o.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],103:[function(t,r,s){const i=t("../../../utils/under-dash"),o=t("../base-xform");r.exports=class extends o{get tag(){return"pageMargins"}render(u,l){if(l){const a={left:l.left,right:l.right,top:l.top,bottom:l.bottom,header:l.header,footer:l.footer};i.some(a,c=>c!==void 0)&&u.leafNode(this.tag,a)}}parseOpen(u){switch(u.name){case this.tag:return this.model={left:parseFloat(u.attributes.left||.7),right:parseFloat(u.attributes.right||.7),top:parseFloat(u.attributes.top||.75),bottom:parseFloat(u.attributes.bottom||.75),header:parseFloat(u.attributes.header||.3),footer:parseFloat(u.attributes.footer||.3)},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],104:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"pageSetUpPr"}render(o,u){return!(!u||!u.fitToPage)&&(o.leafNode(this.tag,{fitToPage:u.fitToPage?"1":void 0}),!0)}parseOpen(o){return o.name===this.tag&&(this.model={fitToPage:o.attributes.fitToPage==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],105:[function(t,r,s){const i=t("../../../utils/under-dash"),o=t("../base-xform");function u(d){return d?"1":void 0}function l(d){switch(d){case"overThenDown":return d;default:return}}function a(d){switch(d){case"atEnd":case"asDisplyed":return d;default:return}}function c(d){switch(d){case"dash":case"blank":case"NA":return d;default:return}}r.exports=class extends o{get tag(){return"pageSetup"}render(d,f){if(f){const h={paperSize:f.paperSize,orientation:f.orientation,horizontalDpi:f.horizontalDpi,verticalDpi:f.verticalDpi,pageOrder:l(f.pageOrder),blackAndWhite:u(f.blackAndWhite),draft:u(f.draft),cellComments:a(f.cellComments),errors:c(f.errors),scale:f.scale,fitToWidth:f.fitToWidth,fitToHeight:f.fitToHeight,firstPageNumber:f.firstPageNumber,useFirstPageNumber:u(f.firstPageNumber),usePrinterDefaults:u(f.usePrinterDefaults),copies:f.copies};i.some(h,p=>p!==void 0)&&d.leafNode(this.tag,h)}}parseOpen(d){switch(d.name){case this.tag:return this.model={paperSize:(f=d.attributes.paperSize,f!==void 0?parseInt(f,10):void 0),orientation:d.attributes.orientation||"portrait",horizontalDpi:parseInt(d.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(d.attributes.verticalDpi||"4294967295",10),pageOrder:d.attributes.pageOrder||"downThenOver",blackAndWhite:d.attributes.blackAndWhite==="1",draft:d.attributes.draft==="1",cellComments:d.attributes.cellComments||"None",errors:d.attributes.errors||"displayed",scale:parseInt(d.attributes.scale||"100",10),fitToWidth:parseInt(d.attributes.fitToWidth||"1",10),fitToHeight:parseInt(d.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(d.attributes.firstPageNumber||"1",10),useFirstPageNumber:d.attributes.useFirstPageNumber==="1",usePrinterDefaults:d.attributes.usePrinterDefaults==="1",copies:parseInt(d.attributes.copies||"1",10)},!0;default:return!1}var f}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],106:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"picture"}render(o,u){u&&o.leafNode(this.tag,{"r:id":u.rId})}parseOpen(o){switch(o.name){case this.tag:return this.model={rId:o.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],107:[function(t,r,s){const i=t("../../../utils/under-dash"),o=t("../base-xform");function u(l){return l?"1":void 0}r.exports=class extends o{get tag(){return"printOptions"}render(l,a){if(a){const c={headings:u(a.showRowColHeaders),gridLines:u(a.showGridLines),horizontalCentered:u(a.horizontalCentered),verticalCentered:u(a.verticalCentered)};i.some(c,d=>d!==void 0)&&l.leafNode(this.tag,c)}}parseOpen(l){switch(l.name){case this.tag:return this.model={showRowColHeaders:l.attributes.headings==="1",showGridLines:l.attributes.gridLines==="1",horizontalCentered:l.attributes.horizontalCentered==="1",verticalCentered:l.attributes.verticalCentered==="1"},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],108:[function(t,r,s){const i=t("./page-breaks-xform"),o=t("../list-xform");r.exports=class extends o{constructor(){super({tag:"rowBreaks",count:!0,childXform:new i})}render(u,l){if(l&&l.length){u.openNode(this.tag,this.$),this.count&&(u.addAttribute(this.$count,l.length),u.addAttribute("manualBreakCount",l.length));const{childXform:a}=this;l.forEach(c=>{a.render(u,c)}),u.closeNode()}else this.empty&&u.leafNode(this.tag)}}},{"../list-xform":71,"./page-breaks-xform":102}],109:[function(t,r,s){const i=t("../base-xform"),o=t("../../../utils/utils"),u=t("./cell-xform");r.exports=class extends i{constructor(l){super(),this.maxItems=l&&l.maxItems,this.map={c:new u}}get tag(){return"row"}prepare(l,a){const c=a.styles.addStyleModel(l.style);c&&(l.styleId=c);const d=this.map.c;l.cells.forEach(f=>{d.prepare(f,a)})}render(l,a,c){l.openNode("row"),l.addAttribute("r",a.number),a.height&&(l.addAttribute("ht",a.height),l.addAttribute("customHeight","1")),a.hidden&&l.addAttribute("hidden","1"),a.min>0&&a.max>0&&a.min<=a.max&&l.addAttribute("spans",`${a.min}:${a.max}`),a.styleId&&(l.addAttribute("s",a.styleId),l.addAttribute("customFormat","1")),l.addAttribute("x14ac:dyDescent","0.25"),a.outlineLevel&&l.addAttribute("outlineLevel",a.outlineLevel),a.collapsed&&l.addAttribute("collapsed","1");const d=this.map.c;a.cells.forEach(f=>{d.render(l,f,c)}),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;if(l.name==="row"){this.numRowsSeen+=1;const a=l.attributes.spans?l.attributes.spans.split(":").map(d=>parseInt(d,10)):[void 0,void 0],c=this.model={number:parseInt(l.attributes.r,10),min:a[0],max:a[1],cells:[]};return l.attributes.s&&(c.styleId=parseInt(l.attributes.s,10)),o.parseBoolean(l.attributes.hidden)&&(c.hidden=!0),o.parseBoolean(l.attributes.bestFit)&&(c.bestFit=!0),l.attributes.ht&&(c.height=parseFloat(l.attributes.ht)),l.attributes.outlineLevel&&(c.outlineLevel=parseInt(l.attributes.outlineLevel,10)),o.parseBoolean(l.attributes.collapsed)&&(c.collapsed=!0),!0}return this.parser=this.map[l.name],!!this.parser&&(this.parser.parseOpen(l),!0)}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser){if(!this.parser.parseClose(l)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error(`Max column count (${this.maxItems}) exceeded`);this.parser=void 0}return!0}return!1}reconcile(l,a){l.style=l.styleId?a.styles.getStyleModel(l.styleId):{},l.styleId!==void 0&&(l.styleId=void 0);const c=this.map.c;l.cells.forEach(d=>{c.reconcile(d,a)})}}},{"../../../utils/utils":27,"../base-xform":32,"./cell-xform":73}],110:[function(t,r,s){const i=t("../../../utils/under-dash"),o=t("../base-xform");r.exports=class extends o{get tag(){return"sheetFormatPr"}render(u,l){if(l){const a={defaultRowHeight:l.defaultRowHeight,outlineLevelRow:l.outlineLevelRow,outlineLevelCol:l.outlineLevelCol,"x14ac:dyDescent":l.dyDescent};l.defaultColWidth&&(a.defaultColWidth=l.defaultColWidth),l.defaultRowHeight&&l.defaultRowHeight===15||(a.customHeight="1"),i.some(a,c=>c!==void 0)&&u.leafNode("sheetFormatPr",a)}}parseOpen(u){return u.name==="sheetFormatPr"&&(this.model={defaultRowHeight:parseFloat(u.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(u.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(u.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(u.attributes.outlineLevelCol||"0",10)},u.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(u.attributes.defaultColWidth)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],111:[function(t,r,s){const i=t("../base-xform"),o=t("../style/color-xform"),u=t("./page-setup-properties-xform"),l=t("./outline-properties-xform");r.exports=class extends i{constructor(){super(),this.map={tabColor:new o("tabColor"),pageSetUpPr:new u,outlinePr:new l}}get tag(){return"sheetPr"}render(a,c){if(c){a.addRollback(),a.openNode("sheetPr");let d=!1;d=this.map.tabColor.render(a,c.tabColor)||d,d=this.map.pageSetUpPr.render(a,c.pageSetup)||d,d=this.map.outlinePr.render(a,c.outlineProperties)||d,d?(a.closeNode(),a.commit()):a.rollback()}}parseOpen(a){return this.parser?(this.parser.parseOpen(a),!0):a.name===this.tag?(this.reset(),!0):!!this.map[a.name]&&(this.parser=this.map[a.name],this.parser.parseOpen(a),!0)}parseText(a){return!!this.parser&&(this.parser.parseText(a),!0)}parseClose(a){return this.parser?(this.parser.parseClose(a)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}}},{"../base-xform":32,"../style/color-xform":128,"./outline-properties-xform":101,"./page-setup-properties-xform":104}],112:[function(t,r,s){const i=t("../../../utils/under-dash"),o=t("../base-xform");function u(a,c){return a?c:void 0}function l(a,c){return a===c||void 0}r.exports=class extends o{get tag(){return"sheetProtection"}render(a,c){if(c){const d={sheet:u(c.sheet,"1"),selectLockedCells:c.selectLockedCells===!1?"1":void 0,selectUnlockedCells:c.selectUnlockedCells===!1?"1":void 0,formatCells:u(c.formatCells,"0"),formatColumns:u(c.formatColumns,"0"),formatRows:u(c.formatRows,"0"),insertColumns:u(c.insertColumns,"0"),insertRows:u(c.insertRows,"0"),insertHyperlinks:u(c.insertHyperlinks,"0"),deleteColumns:u(c.deleteColumns,"0"),deleteRows:u(c.deleteRows,"0"),sort:u(c.sort,"0"),autoFilter:u(c.autoFilter,"0"),pivotTables:u(c.pivotTables,"0")};c.sheet&&(d.algorithmName=c.algorithmName,d.hashValue=c.hashValue,d.saltValue=c.saltValue,d.spinCount=c.spinCount,d.objects=u(c.objects===!1,"1"),d.scenarios=u(c.scenarios===!1,"1")),i.some(d,f=>f!==void 0)&&a.leafNode(this.tag,d)}}parseOpen(a){switch(a.name){case this.tag:return this.model={sheet:l(a.attributes.sheet,"1"),objects:a.attributes.objects!=="1"&&void 0,scenarios:a.attributes.scenarios!=="1"&&void 0,selectLockedCells:a.attributes.selectLockedCells!=="1"&&void 0,selectUnlockedCells:a.attributes.selectUnlockedCells!=="1"&&void 0,formatCells:l(a.attributes.formatCells,"0"),formatColumns:l(a.attributes.formatColumns,"0"),formatRows:l(a.attributes.formatRows,"0"),insertColumns:l(a.attributes.insertColumns,"0"),insertRows:l(a.attributes.insertRows,"0"),insertHyperlinks:l(a.attributes.insertHyperlinks,"0"),deleteColumns:l(a.attributes.deleteColumns,"0"),deleteRows:l(a.attributes.deleteRows,"0"),sort:l(a.attributes.sort,"0"),autoFilter:l(a.attributes.autoFilter,"0"),pivotTables:l(a.attributes.pivotTables,"0")},a.attributes.algorithmName&&(this.model.algorithmName=a.attributes.algorithmName,this.model.hashValue=a.attributes.hashValue,this.model.saltValue=a.attributes.saltValue,this.model.spinCount=parseInt(a.attributes.spinCount,10)),!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],113:[function(t,r,s){const i=t("../../../utils/col-cache"),o=t("../base-xform"),u={frozen:"frozen",frozenSplit:"frozen",split:"split"};r.exports=class extends o{get tag(){return"sheetView"}prepare(l){switch(l.state){case"frozen":case"split":break;default:l.state="normal"}}render(l,a){l.openNode("sheetView",{workbookViewId:a.workbookViewId||0});const c=function(g,m,y){y&&l.addAttribute(g,m)};let d,f,h,p;switch(c("rightToLeft","1",a.rightToLeft===!0),c("tabSelected","1",a.tabSelected),c("showRuler","0",a.showRuler===!1),c("showRowColHeaders","0",a.showRowColHeaders===!1),c("showGridLines","0",a.showGridLines===!1),c("zoomScale",a.zoomScale,a.zoomScale),c("zoomScaleNormal",a.zoomScaleNormal,a.zoomScaleNormal),c("view",a.style,a.style),a.state){case"frozen":f=a.xSplit||0,h=a.ySplit||0,d=a.topLeftCell||i.getAddress(h+1,f+1).address,p=(a.xSplit&&a.ySplit?"bottomRight":a.xSplit&&"topRight")||"bottomLeft",l.leafNode("pane",{xSplit:a.xSplit||void 0,ySplit:a.ySplit||void 0,topLeftCell:d,activePane:p,state:"frozen"}),l.leafNode("selection",{pane:p,activeCell:a.activeCell,sqref:a.activeCell});break;case"split":a.activePane==="topLeft"&&(a.activePane=void 0),l.leafNode("pane",{xSplit:a.xSplit||void 0,ySplit:a.ySplit||void 0,topLeftCell:a.topLeftCell,activePane:a.activePane}),l.leafNode("selection",{pane:a.activePane,activeCell:a.activeCell,sqref:a.activeCell});break;case"normal":a.activeCell&&l.leafNode("selection",{activeCell:a.activeCell,sqref:a.activeCell})}l.closeNode()}parseOpen(l){switch(l.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(l.attributes.workbookViewId,10),rightToLeft:l.attributes.rightToLeft==="1",tabSelected:l.attributes.tabSelected==="1",showRuler:l.attributes.showRuler!=="0",showRowColHeaders:l.attributes.showRowColHeaders!=="0",showGridLines:l.attributes.showGridLines!=="0",zoomScale:parseInt(l.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(l.attributes.zoomScaleNormal||"100",10),style:l.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(l.attributes.xSplit||"0",10),ySplit:parseInt(l.attributes.ySplit||"0",10),topLeftCell:l.attributes.topLeftCell,activePane:l.attributes.activePane||"topLeft",state:l.attributes.state},!0;case"selection":{const a=l.attributes.pane||"topLeft";return this.selections[a]={pane:a,activeCell:l.attributes.activeCell},!0}default:return!1}}parseText(){}parseClose(l){let a,c;switch(l){case"sheetView":return this.sheetView&&this.pane?(a=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:u[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},this.model.state==="split"&&(a.activePane=this.pane.activePane),c=this.selections[this.pane.activePane],c&&c.activeCell&&(a.activeCell=c.activeCell),this.sheetView.style&&(a.style=this.sheetView.style)):(a=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},c=this.selections.topLeft,c&&c.activeCell&&(a.activeCell=c.activeCell),this.sheetView.style&&(a.style=this.sheetView.style)),!1;default:return!0}}reconcile(){}}},{"../../../utils/col-cache":19,"../base-xform":32}],114:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"tablePart"}render(o,u){u&&o.leafNode(this.tag,{"r:id":u.rId})}parseOpen(o){switch(o.name){case this.tag:return this.model={rId:o.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],115:[function(t,r,s){const i=t("../../../utils/under-dash"),o=t("../../../utils/col-cache"),u=t("../../../utils/xml-stream"),l=t("../../rel-type"),a=t("./merges"),c=t("../base-xform"),d=t("../list-xform"),f=t("./row-xform"),h=t("./col-xform"),p=t("./dimension-xform"),g=t("./hyperlink-xform"),m=t("./merge-cell-xform"),y=t("./data-validations-xform"),b=t("./sheet-properties-xform"),v=t("./sheet-format-properties-xform"),k=t("./sheet-view-xform"),j=t("./sheet-protection-xform"),I=t("./page-margins-xform"),U=t("./page-setup-xform"),P=t("./print-options-xform"),z=t("./auto-filter-xform"),q=t("./picture-xform"),$=t("./drawing-xform"),F=t("./table-part-xform"),T=t("./row-breaks-xform"),N=t("./header-footer-xform"),C=t("./cf/conditional-formattings-xform"),w=t("./ext-lst-xform"),_=(S,A)=>{if(!A||!A.length)return S;if(!S||!S.length)return A;const B={},E={};return S.forEach(V=>{B[V.ref]=V,V.rules.forEach(X=>{const{x14Id:Q}=X;Q&&(E[Q]=X)})}),A.forEach(V=>{V.rules.forEach(X=>{const Q=E[X.x14Id];Q?((D,Z)=>{Object.keys(Z).forEach(L=>{const O=D[L],G=Z[L];O===void 0&&G!==void 0&&(D[L]=G)})})(Q,X):B[V.ref]?B[V.ref].rules.push(X):S.push({ref:V.ref,rules:[X]})})}),S};class x extends c{constructor(A){super();const{maxRows:B,maxCols:E,ignoreNodes:V}=A||{};this.ignoreNodes=V||[],this.map={sheetPr:new b,dimension:new p,sheetViews:new d({tag:"sheetViews",count:!1,childXform:new k}),sheetFormatPr:new v,cols:new d({tag:"cols",count:!1,childXform:new h}),sheetData:new d({tag:"sheetData",count:!1,empty:!0,childXform:new f({maxItems:E}),maxItems:B}),autoFilter:new z,mergeCells:new d({tag:"mergeCells",count:!0,childXform:new m}),rowBreaks:new T,hyperlinks:new d({tag:"hyperlinks",count:!1,childXform:new g}),pageMargins:new I,dataValidations:new y,pageSetup:new U,headerFooter:new N,printOptions:new P,picture:new q,drawing:new $,sheetProtection:new j,tableParts:new d({tag:"tableParts",count:!0,childXform:new F}),conditionalFormatting:new C,extLst:new w}}prepare(A,B){B.merges=new a,A.hyperlinks=B.hyperlinks=[],A.comments=B.comments=[],B.formulae={},B.siFormulae=0,this.map.cols.prepare(A.cols,B),this.map.sheetData.prepare(A.rows,B),this.map.conditionalFormatting.prepare(A.conditionalFormattings,B),A.mergeCells=B.merges.mergeCells;const E=A.rels=[];function V(D){return"rId"+(D.length+1)}if(A.hyperlinks.forEach(D=>{const Z=V(E);D.rId=Z,E.push({Id:Z,Type:l.Hyperlink,Target:D.target,TargetMode:"External"})}),A.comments.length>0){const D={Id:V(E),Type:l.Comments,Target:`../comments${A.id}.xml`};E.push(D);const Z={Id:V(E),Type:l.VmlDrawing,Target:`../drawings/vmlDrawing${A.id}.vml`};E.push(Z),A.comments.forEach(L=>{L.refAddress=o.decodeAddress(L.ref)}),B.commentRefs.push({commentName:"comments"+A.id,vmlDrawing:"vmlDrawing"+A.id})}const X=[];let Q;A.media.forEach(D=>{if(D.type==="background"){const Z=V(E);Q=B.media[D.imageId],E.push({Id:Z,Type:l.Image,Target:`../media/${Q.name}.${Q.extension}`}),A.background={rId:Z},A.image=B.media[D.imageId]}else if(D.type==="image"){let{drawing:Z}=A;Q=B.media[D.imageId],Z||(Z=A.drawing={rId:V(E),name:"drawing"+ ++B.drawingsCount,anchors:[],rels:[]},B.drawings.push(Z),E.push({Id:Z.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/${Z.name}.xml`}));let L=this.preImageId===D.imageId?X[D.imageId]:X[Z.rels.length];L||(L=V(Z.rels),X[Z.rels.length]=L,Z.rels.push({Id:L,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/${Q.name}.${Q.extension}`}));const O={picture:{rId:L},range:D.range};if(D.hyperlinks&&D.hyperlinks.hyperlink){const G=V(Z.rels);X[Z.rels.length]=G,O.picture.hyperlinks={tooltip:D.hyperlinks.tooltip,rId:G},Z.rels.push({Id:G,Type:l.Hyperlink,Target:D.hyperlinks.hyperlink,TargetMode:"External"})}this.preImageId=D.imageId,Z.anchors.push(O)}}),A.tables.forEach(D=>{const Z=V(E);D.rId=Z,E.push({Id:Z,Type:l.Table,Target:"../tables/"+D.target}),D.columns.forEach(L=>{const{style:O}=L;O&&(L.dxfId=B.styles.addDxfStyle(O))})}),this.map.extLst.prepare(A,B)}render(A,B){A.openXml(u.StdDocAttributes),A.openNode("worksheet",x.WORKSHEET_ATTRIBUTES);const E=B.properties?{defaultRowHeight:B.properties.defaultRowHeight,dyDescent:B.properties.dyDescent,outlineLevelCol:B.properties.outlineLevelCol,outlineLevelRow:B.properties.outlineLevelRow}:void 0;B.properties&&B.properties.defaultColWidth&&(E.defaultColWidth=B.properties.defaultColWidth);const V={outlineProperties:B.properties&&B.properties.outlineProperties,tabColor:B.properties&&B.properties.tabColor,pageSetup:B.pageSetup&&B.pageSetup.fitToPage?{fitToPage:B.pageSetup.fitToPage}:void 0},X=B.pageSetup&&B.pageSetup.margins,Q={showRowColHeaders:B.pageSetup&&B.pageSetup.showRowColHeaders,showGridLines:B.pageSetup&&B.pageSetup.showGridLines,horizontalCentered:B.pageSetup&&B.pageSetup.horizontalCentered,verticalCentered:B.pageSetup&&B.pageSetup.verticalCentered},D=B.sheetProtection;this.map.sheetPr.render(A,V),this.map.dimension.render(A,B.dimensions),this.map.sheetViews.render(A,B.views),this.map.sheetFormatPr.render(A,E),this.map.cols.render(A,B.cols),this.map.sheetData.render(A,B.rows),this.map.sheetProtection.render(A,D),this.map.autoFilter.render(A,B.autoFilter),this.map.mergeCells.render(A,B.mergeCells),this.map.conditionalFormatting.render(A,B.conditionalFormattings),this.map.dataValidations.render(A,B.dataValidations),this.map.hyperlinks.render(A,B.hyperlinks),this.map.printOptions.render(A,Q),this.map.pageMargins.render(A,X),this.map.pageSetup.render(A,B.pageSetup),this.map.headerFooter.render(A,B.headerFooter),this.map.rowBreaks.render(A,B.rowBreaks),this.map.drawing.render(A,B.drawing),this.map.picture.render(A,B.background),this.map.tableParts.render(A,B.tables),this.map.extLst.render(A,B),B.rels&&B.rels.forEach(Z=>{Z.Type===l.VmlDrawing&&A.leafNode("legacyDrawing",{"r:id":Z.Id})}),A.closeNode()}parseOpen(A){return this.parser?(this.parser.parseOpen(A),!0):A.name==="worksheet"?(i.each(this.map,B=>{B.reset()}),!0):(this.map[A.name]&&!this.ignoreNodes.includes(A.name)&&(this.parser=this.map[A.name],this.parser.parseOpen(A)),!0)}parseText(A){this.parser&&this.parser.parseText(A)}parseClose(A){if(this.parser)return this.parser.parseClose(A)||(this.parser=void 0),!0;switch(A){case"worksheet":{const B=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(B.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(B.outlineProperties=this.map.sheetPr.model.outlineProperties);const E={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},V=Object.assign(E,this.map.pageSetup.model,this.map.printOptions.model),X=_(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:B,views:this.map.sheetViews.model,pageSetup:V,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:X},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}default:return!0}}reconcile(A,B){const E=(A.relationships||[]).reduce((X,Q)=>{if(X[Q.Id]=Q,Q.Type===l.Comments&&(A.comments=B.comments[Q.Target].comments),Q.Type===l.VmlDrawing&&A.comments&&A.comments.length){const D=B.vmlDrawings[Q.Target].comments;A.comments.forEach((Z,L)=>{Z.note=Object.assign({},Z.note,D[L])})}return X},{});if(B.commentsMap=(A.comments||[]).reduce((X,Q)=>(Q.ref&&(X[Q.ref]=Q),X),{}),B.hyperlinkMap=(A.hyperlinks||[]).reduce((X,Q)=>(Q.rId&&(X[Q.address]=E[Q.rId].Target),X),{}),B.formulae={},A.rows=A.rows&&A.rows.filter(Boolean)||[],A.rows.forEach(X=>{X.cells=X.cells&&X.cells.filter(Boolean)||[]}),this.map.cols.reconcile(A.cols,B),this.map.sheetData.reconcile(A.rows,B),this.map.conditionalFormatting.reconcile(A.conditionalFormattings,B),A.media=[],A.drawing){const X=E[A.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if(X){const Q=X[1];B.drawings[Q].anchors.forEach(D=>{if(D.medium){const Z={type:"image",imageId:D.medium.index,range:D.range,hyperlinks:D.picture.hyperlinks};A.media.push(Z)}})}}const V=A.background&&E[A.background.rId];if(V){const X=V.Target.split("/media/")[1],Q=B.mediaIndex&&B.mediaIndex[X];Q!==void 0&&A.media.push({type:"background",imageId:Q})}A.tables=(A.tables||[]).map(X=>{const Q=E[X.rId];return B.tables[Q.Target]}),delete A.relationships,delete A.hyperlinks,delete A.comments}}x.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},r.exports=x},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../../rel-type":31,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":72,"./cf/conditional-formattings-xform":87,"./col-xform":92,"./data-validations-xform":93,"./dimension-xform":94,"./drawing-xform":95,"./ext-lst-xform":96,"./header-footer-xform":97,"./hyperlink-xform":98,"./merge-cell-xform":99,"./merges":100,"./page-margins-xform":103,"./page-setup-xform":105,"./picture-xform":106,"./print-options-xform":107,"./row-breaks-xform":108,"./row-xform":109,"./sheet-format-properties-xform":110,"./sheet-properties-xform":111,"./sheet-protection-xform":112,"./sheet-view-xform":113,"./table-part-xform":114}],116:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{constructor(o){super(),this.tag=o.tag,this.attr=o.attr}render(o,u){u&&(o.openNode(this.tag),o.closeNode())}parseOpen(o){o.name===this.tag&&(this.model=!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],117:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{constructor(o){super(),this.tag=o.tag,this.attr=o.attr,this.attrs=o.attrs,this._format=o.format||function(u){try{return Number.isNaN(u.getTime())?"":u.toISOString()}catch{return""}},this._parse=o.parse||function(u){return new Date(u)}}render(o,u){u&&(o.openNode(this.tag),this.attrs&&o.addAttributes(this.attrs),this.attr?o.addAttribute(this.attr,this._format(u)):o.writeText(this._format(u)),o.closeNode())}parseOpen(o){o.name===this.tag&&(this.attr?this.model=this._parse(o.attributes[this.attr]):this.text=[])}parseText(o){this.attr||this.text.push(o)}parseClose(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}},{"../base-xform":32}],118:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{constructor(o){super(),this.tag=o.tag,this.attr=o.attr,this.attrs=o.attrs,this.zero=o.zero}render(o,u){(u||this.zero)&&(o.openNode(this.tag),this.attrs&&o.addAttributes(this.attrs),this.attr?o.addAttribute(this.attr,u):o.writeText(u),o.closeNode())}parseOpen(o){return o.name===this.tag&&(this.attr?this.model=parseInt(o.attributes[this.attr],10):this.text=[],!0)}parseText(o){this.attr||this.text.push(o)}parseClose(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}},{"../base-xform":32}],119:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{constructor(o){super(),this.tag=o.tag,this.attr=o.attr,this.attrs=o.attrs}render(o,u){u!==void 0&&(o.openNode(this.tag),this.attrs&&o.addAttributes(this.attrs),this.attr?o.addAttribute(this.attr,u):o.writeText(u),o.closeNode())}parseOpen(o){o.name===this.tag&&(this.attr?this.model=o.attributes[this.attr]:this.text=[])}parseText(o){this.attr||this.text.push(o)}parseClose(){return this.attr||(this.model=this.text.join("")),!1}}},{"../base-xform":32}],120:[function(t,r,s){const i=t("./base-xform"),o=t("../../utils/xml-stream");r.exports=class extends i{constructor(u){super(),this._model=u}render(u){if(!this._xml){const l=new o;(function a(c,d){c.openNode(d.tag,d.$),d.c&&d.c.forEach(f=>{a(c,f)}),d.t&&c.writeText(d.t),c.closeNode()})(l,this._model),this._xml=l.xml}u.writeXml(this._xml)}parseOpen(){return!0}parseText(){}parseClose(u){switch(u){case this._model.tag:return!1;default:return!0}}}},{"../../utils/xml-stream":28,"./base-xform":32}],121:[function(t,r,s){const i=t("./text-xform"),o=t("./rich-text-xform"),u=t("../base-xform");r.exports=class extends u{constructor(){super(),this.map={r:new o,t:new i}}get tag(){return"rPh"}render(l,a){if(l.openNode(this.tag,{sb:a.sb||0,eb:a.eb||0}),a&&a.hasOwnProperty("richText")&&a.richText){const{r:c}=this.map;a.richText.forEach(d=>{c.render(l,d)})}else a&&this.map.t.render(l,a.text);l.closeNode()}parseOpen(l){const{name:a}=l;return this.parser?(this.parser.parseOpen(l),!0):a===this.tag?(this.model={sb:parseInt(l.attributes.sb,10),eb:parseInt(l.attributes.eb,10)},!0):(this.parser=this.map[a],!!this.parser&&(this.parser.parseOpen(l),!0))}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser){if(!this.parser.parseClose(l)){switch(l){case"r":{let a=this.model.richText;a||(a=this.model.richText=[]),a.push(this.parser.model);break}case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}switch(l){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./rich-text-xform":122,"./text-xform":125}],122:[function(t,r,s){const i=t("./text-xform"),o=t("../style/font-xform"),u=t("../base-xform");class l extends u{constructor(c){super(),this.model=c}get tag(){return"r"}get textXform(){return this._textXform||(this._textXform=new i)}get fontXform(){return this._fontXform||(this._fontXform=new o(l.FONT_OPTIONS))}render(c,d){d=d||this.model,c.openNode("r"),d.font&&this.fontXform.render(c,d.font),this.textXform.render(c,d.text),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(c),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(c),!0;default:return!1}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){switch(c){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(c),!0}}}l.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},r.exports=l},{"../base-xform":32,"../style/font-xform":131,"./text-xform":125}],123:[function(t,r,s){const i=t("./text-xform"),o=t("./rich-text-xform"),u=t("./phonetic-text-xform"),l=t("../base-xform");r.exports=class extends l{constructor(a){super(),this.model=a,this.map={r:new o,t:new i,rPh:new u}}get tag(){return"si"}render(a,c){a.openNode(this.tag),c&&c.hasOwnProperty("richText")&&c.richText?c.richText.length?c.richText.forEach(d=>{this.map.r.render(a,d)}):this.map.t.render(a,""):c!=null&&this.map.t.render(a,c),a.closeNode()}parseOpen(a){const{name:c}=a;return this.parser?(this.parser.parseOpen(a),!0):c===this.tag?(this.model={},!0):(this.parser=this.map[c],!!this.parser&&(this.parser.parseOpen(a),!0))}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser){if(!this.parser.parseClose(a)){switch(a){case"r":{let c=this.model.richText;c||(c=this.model.richText=[]),c.push(this.parser.model);break}case"t":this.model=this.parser.model}this.parser=void 0}return!0}switch(a){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./phonetic-text-xform":121,"./rich-text-xform":122,"./text-xform":125}],124:[function(t,r,s){const i=t("../../../utils/xml-stream"),o=t("../base-xform"),u=t("./shared-string-xform");r.exports=class extends o{constructor(l){super(),this.model=l||{values:[],count:0},this.hash=Object.create(null),this.rich=Object.create(null)}get sharedStringXform(){return this._sharedStringXform||(this._sharedStringXform=new u)}get values(){return this.model.values}get uniqueCount(){return this.model.values.length}get count(){return this.model.count}getString(l){return this.model.values[l]}add(l){return l.richText?this.addRichText(l):this.addText(l)}addText(l){let a=this.hash[l];return a===void 0&&(a=this.hash[l]=this.model.values.length,this.model.values.push(l)),this.model.count++,a}addRichText(l){const a=this.sharedStringXform.toXml(l);let c=this.rich[a];return c===void 0&&(c=this.rich[a]=this.model.values.length,this.model.values.push(l)),this.model.count++,c}render(l,a){a=a||this._values,l.openXml(i.StdDocAttributes),l.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:a.count,uniqueCount:a.values.length});const c=this.sharedStringXform;a.values.forEach(d=>{c.render(l,d)}),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(l),!0;default:throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(l))}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;switch(l){case"sst":return!1;default:throw new Error("Unexpected xml node in parseClose: "+l)}}}},{"../../../utils/xml-stream":28,"../base-xform":32,"./shared-string-xform":123}],125:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"t"}render(o,u){o.openNode("t"),/^\s|\n|\s$/.test(u)&&o.addAttribute("xml:space","preserve"),o.writeText(u),o.closeNode()}get model(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(o,u)=>String.fromCharCode(parseInt(u,16)))}parseOpen(o){switch(o.name){case"t":return this._text=[],!0;default:return!1}}parseText(o){this._text.push(o)}parseClose(){return!1}}},{"../base-xform":32}],126:[function(t,r,s){const i=t("../../../doc/enums"),o=t("../../../utils/utils"),u=t("../base-xform"),l={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((c,d)=>(c[d]=!0,c),{}),horizontal(c){return this.horizontalValues[c]?c:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((c,d)=>(c[d]=!0,c),{}),vertical(c){return c==="middle"?"center":this.verticalValues[c]?c:void 0},wrapText:c=>!!c||void 0,shrinkToFit:c=>!!c||void 0,textRotation(c){switch(c){case"vertical":return c;default:return(c=o.validInt(c))>=-90&&c<=90?c:void 0}},indent:c=>(c=o.validInt(c),Math.max(0,c)),readingOrder(c){switch(c){case"ltr":return i.ReadingOrder.LeftToRight;case"rtl":return i.ReadingOrder.RightToLeft;default:return}}},a={toXml(c){if(c=l.textRotation(c)){if(c==="vertical")return 255;const d=Math.round(c);if(d>=0&&d<=90)return d;if(d<0&&d>=-90)return 90-d}},toModel(c){const d=o.validInt(c);if(d!==void 0){if(d===255)return"vertical";if(d>=0&&d<=90)return d;if(d>90&&d<=180)return 90-d}}};r.exports=class extends u{get tag(){return"alignment"}render(c,d){c.addRollback(),c.openNode("alignment");let f=!1;function h(p,g){g&&(c.addAttribute(p,g),f=!0)}h("horizontal",l.horizontal(d.horizontal)),h("vertical",l.vertical(d.vertical)),h("wrapText",!!l.wrapText(d.wrapText)&&"1"),h("shrinkToFit",!!l.shrinkToFit(d.shrinkToFit)&&"1"),h("indent",l.indent(d.indent)),h("textRotation",a.toXml(d.textRotation)),h("readingOrder",l.readingOrder(d.readingOrder)),c.closeNode(),f?c.commit():c.rollback()}parseOpen(c){const d={};let f=!1;function h(p,g,m){p&&(d[g]=m,f=!0)}h(c.attributes.horizontal,"horizontal",c.attributes.horizontal),h(c.attributes.vertical,"vertical",c.attributes.vertical==="center"?"middle":c.attributes.vertical),h(c.attributes.wrapText,"wrapText",o.parseBoolean(c.attributes.wrapText)),h(c.attributes.shrinkToFit,"shrinkToFit",o.parseBoolean(c.attributes.shrinkToFit)),h(c.attributes.indent,"indent",parseInt(c.attributes.indent,10)),h(c.attributes.textRotation,"textRotation",a.toModel(c.attributes.textRotation)),h(c.attributes.readingOrder,"readingOrder",c.attributes.readingOrder==="2"?"rtl":"ltr"),this.model=f?d:null}parseText(){}parseClose(){return!1}}},{"../../../doc/enums":7,"../../../utils/utils":27,"../base-xform":32}],127:[function(t,r,s){const i=t("../base-xform"),o=t("../../../utils/utils"),u=t("./color-xform");class l extends i{constructor(c){super(),this.name=c,this.map={color:new u}}get tag(){return this.name}render(c,d,f){const h=d&&d.color||f||this.defaultColor;c.openNode(this.name),d&&d.style&&(c.addAttribute("style",d.style),h&&this.map.color.render(c,h)),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.name:{const{style:d}=c.attributes;return this.model=d?{style:d}:void 0,!0}case"color":return this.parser=this.map.color,this.parser.parseOpen(c),!0;default:return!1}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){return this.parser?(this.parser.parseClose(c)||(this.parser=void 0),!0):(c===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}validStyle(c){return l.validStyleValues[c]}}l.validStyleValues=["thin","dashed","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((a,c)=>(a[c]=!0,a),{}),r.exports=class extends i{constructor(){super(),this.map={top:new l("top"),left:new l("left"),bottom:new l("bottom"),right:new l("right"),diagonal:new l("diagonal")}}render(a,c){const{color:d}=c;function f(h,p){h&&!h.color&&c.color&&(h={...h,color:c.color}),p.render(a,h,d)}a.openNode("border"),c.diagonal&&c.diagonal.style&&(c.diagonal.up&&a.addAttribute("diagonalUp","1"),c.diagonal.down&&a.addAttribute("diagonalDown","1")),f(c.left,this.map.left),f(c.right,this.map.right),f(c.top,this.map.top),f(c.bottom,this.map.bottom),f(c.diagonal,this.map.diagonal),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"border":return this.reset(),this.diagonalUp=o.parseBoolean(a.attributes.diagonalUp),this.diagonalDown=o.parseBoolean(a.attributes.diagonalDown),!0;default:return this.parser=this.map[a.name],!!this.parser&&(this.parser.parseOpen(a),!0)}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;if(a==="border"){const c=this.model={},d=function(f,h,p){h&&(p&&Object.assign(h,p),c[f]=h)};d("left",this.map.left.model),d("right",this.map.right.model),d("top",this.map.top.model),d("bottom",this.map.bottom.model),d("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}},{"../../../utils/utils":27,"../base-xform":32,"./color-xform":128}],128:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{constructor(o){super(),this.name=o||"color"}get tag(){return this.name}render(o,u){return!!u&&(o.openNode(this.name),u.argb?o.addAttribute("rgb",u.argb):u.theme!==void 0?(o.addAttribute("theme",u.theme),u.tint!==void 0&&o.addAttribute("tint",u.tint)):u.indexed!==void 0?o.addAttribute("indexed",u.indexed):o.addAttribute("auto","1"),o.closeNode(),!0)}parseOpen(o){return o.name===this.name&&(o.attributes.rgb?this.model={argb:o.attributes.rgb}:o.attributes.theme?(this.model={theme:parseInt(o.attributes.theme,10)},o.attributes.tint&&(this.model.tint=parseFloat(o.attributes.tint))):o.attributes.indexed?this.model={indexed:parseInt(o.attributes.indexed,10)}:this.model=void 0,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],129:[function(t,r,s){const i=t("../base-xform"),o=t("./alignment-xform"),u=t("./border-xform"),l=t("./fill-xform"),a=t("./font-xform"),c=t("./numfmt-xform"),d=t("./protection-xform");r.exports=class extends i{constructor(){super(),this.map={alignment:new o,border:new u,fill:new l,font:new a,numFmt:new c,protection:new d}}get tag(){return"dxf"}render(f,h){if(f.openNode(this.tag),h.font&&this.map.font.render(f,h.font),h.numFmt&&h.numFmtId){const p={id:h.numFmtId,formatCode:h.numFmt};this.map.numFmt.render(f,p)}h.fill&&this.map.fill.render(f,h.fill),h.alignment&&this.map.alignment.render(f,h.alignment),h.border&&this.map.border.render(f,h.border),h.protection&&this.map.protection.render(f,h.protection),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case this.tag:return this.reset(),!0;default:return this.parser=this.map[f.name],this.parser&&this.parser.parseOpen(f),!0}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){return this.parser?(this.parser.parseClose(f)||(this.parser=void 0),!0):f!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}}},{"../base-xform":32,"./alignment-xform":126,"./border-xform":127,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./protection-xform":133}],130:[function(t,r,s){const i=t("../base-xform"),o=t("./color-xform");class u extends i{constructor(){super(),this.map={color:new o}}get tag(){return"stop"}render(f,h){f.openNode("stop"),f.addAttribute("position",h.position),this.map.color.render(f,h.color),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"stop":return this.model={position:parseFloat(f.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(f),!0;default:return!1}}parseText(){}parseClose(f){return!!this.parser&&(this.parser.parseClose(f)||(this.model.color=this.parser.model,this.parser=void 0),!0)}}class l extends i{constructor(){super(),this.map={fgColor:new o("fgColor"),bgColor:new o("bgColor")}}get name(){return"pattern"}get tag(){return"patternFill"}render(f,h){f.openNode("patternFill"),f.addAttribute("patternType",h.pattern),h.fgColor&&this.map.fgColor.render(f,h.fgColor),h.bgColor&&this.map.bgColor.render(f,h.bgColor),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"patternFill":return this.model={type:"pattern",pattern:f.attributes.patternType},!0;default:return this.parser=this.map[f.name],!!this.parser&&(this.parser.parseOpen(f),!0)}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){return!!this.parser&&(this.parser.parseClose(f)||(this.parser.model&&(this.model[f]=this.parser.model),this.parser=void 0),!0)}}class a extends i{constructor(){super(),this.map={stop:new u}}get name(){return"gradient"}get tag(){return"gradientFill"}render(f,h){switch(f.openNode("gradientFill"),h.gradient){case"angle":f.addAttribute("degree",h.degree);break;case"path":f.addAttribute("type","path"),h.center.left&&(f.addAttribute("left",h.center.left),h.center.right===void 0&&f.addAttribute("right",h.center.left)),h.center.right&&f.addAttribute("right",h.center.right),h.center.top&&(f.addAttribute("top",h.center.top),h.center.bottom===void 0&&f.addAttribute("bottom",h.center.top)),h.center.bottom&&f.addAttribute("bottom",h.center.bottom)}const p=this.map.stop;h.stops.forEach(g=>{p.render(f,g)}),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"gradientFill":{const h=this.model={stops:[]};return f.attributes.degree?(h.gradient="angle",h.degree=parseInt(f.attributes.degree,10)):f.attributes.type==="path"&&(h.gradient="path",h.center={left:f.attributes.left?parseFloat(f.attributes.left):0,top:f.attributes.top?parseFloat(f.attributes.top):0},f.attributes.right!==f.attributes.left&&(h.center.right=f.attributes.right?parseFloat(f.attributes.right):0),f.attributes.bottom!==f.attributes.top&&(h.center.bottom=f.attributes.bottom?parseFloat(f.attributes.bottom):0)),!0}case"stop":return this.parser=this.map.stop,this.parser.parseOpen(f),!0;default:return!1}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){return!!this.parser&&(this.parser.parseClose(f)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}}class c extends i{constructor(){super(),this.map={patternFill:new l,gradientFill:new a}}get tag(){return"fill"}render(f,h){switch(f.addRollback(),f.openNode("fill"),h.type){case"pattern":this.map.patternFill.render(f,h);break;case"gradient":this.map.gradientFill.render(f,h);break;default:return void f.rollback()}f.closeNode(),f.commit()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"fill":return this.model={},!0;default:return this.parser=this.map[f.name],!!this.parser&&(this.parser.parseOpen(f),!0)}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){return!!this.parser&&(this.parser.parseClose(f)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}validStyle(f){return c.validPatternValues[f]}}c.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((d,f)=>(d[f]=!0,d),{}),c.StopXform=u,c.PatternFillXform=l,c.GradientFillXform=a,r.exports=c},{"../base-xform":32,"./color-xform":128}],131:[function(t,r,s){const i=t("./color-xform"),o=t("../simple/boolean-xform"),u=t("../simple/integer-xform"),l=t("../simple/string-xform"),a=t("./underline-xform"),c=t("../../../utils/under-dash"),d=t("../base-xform");class f extends d{constructor(p){super(),this.options=p||f.OPTIONS,this.map={b:{prop:"bold",xform:new o({tag:"b",attr:"val"})},i:{prop:"italic",xform:new o({tag:"i",attr:"val"})},u:{prop:"underline",xform:new a},charset:{prop:"charset",xform:new u({tag:"charset",attr:"val"})},color:{prop:"color",xform:new i},condense:{prop:"condense",xform:new o({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new o({tag:"extend",attr:"val"})},family:{prop:"family",xform:new u({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new o({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new l({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new l({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new o({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new o({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new u({tag:"sz",attr:"val"})}},this.map[this.options.fontNameTag]={prop:"name",xform:new l({tag:this.options.fontNameTag,attr:"val"})}}get tag(){return this.options.tagName}render(p,g){const{map:m}=this;p.openNode(this.options.tagName),c.each(this.map,(y,b)=>{m[b].xform.render(p,g[y.prop])}),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;if(this.map[p.name])return this.parser=this.map[p.name].xform,this.parser.parseOpen(p);switch(p.name){case this.options.tagName:return this.model={},!0;default:return!1}}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){if(this.parser&&!this.parser.parseClose(p)){const g=this.map[p];return this.parser.model&&(this.model[g.prop]=this.parser.model),this.parser=void 0,!0}switch(p){case this.options.tagName:return!1;default:return!0}}}f.OPTIONS={tagName:"font",fontNameTag:"name"},r.exports=f},{"../../../utils/under-dash":26,"../base-xform":32,"../simple/boolean-xform":116,"../simple/integer-xform":118,"../simple/string-xform":119,"./color-xform":128,"./underline-xform":136}],132:[function(t,r,s){const i=t("../../../utils/under-dash"),o=t("../../defaultnumformats"),u=t("../base-xform"),l=function(){const c={};return i.each(o,(d,f)=>{d.f&&(c[d.f]=parseInt(f,10))}),c}();class a extends u{constructor(d,f){super(),this.id=d,this.formatCode=f}get tag(){return"numFmt"}render(d,f){d.leafNode("numFmt",{numFmtId:f.id,formatCode:f.formatCode})}parseOpen(d){switch(d.name){case"numFmt":return this.model={id:parseInt(d.attributes.numFmtId,10),formatCode:d.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0;default:return!1}}parseText(){}parseClose(){return!1}}a.getDefaultFmtId=function(c){return l[c]},a.getDefaultFmtCode=function(c){return o[c]&&o[c].f},r.exports=a},{"../../../utils/under-dash":26,"../../defaultnumformats":30,"../base-xform":32}],133:[function(t,r,s){const i=t("../base-xform"),o={boolean:(u,l)=>u===void 0?l:u};r.exports=class extends i{get tag(){return"protection"}render(u,l){u.addRollback(),u.openNode("protection");let a=!1;function c(d,f){f!==void 0&&(u.addAttribute(d,f),a=!0)}c("locked",o.boolean(l.locked,!0)?void 0:"0"),c("hidden",o.boolean(l.hidden,!1)?"1":void 0),u.closeNode(),a?u.commit():u.rollback()}parseOpen(u){const l={locked:u.attributes.locked!=="0",hidden:u.attributes.hidden==="1"},a=!l.locked||l.hidden;this.model=a?l:null}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],134:[function(t,r,s){const i=t("../base-xform"),o=t("./alignment-xform"),u=t("./protection-xform");r.exports=class extends i{constructor(l){super(),this.xfId=!(!l||!l.xfId),this.map={alignment:new o,protection:new u}}get tag(){return"xf"}render(l,a){l.openNode("xf",{numFmtId:a.numFmtId||0,fontId:a.fontId||0,fillId:a.fillId||0,borderId:a.borderId||0}),this.xfId&&l.addAttribute("xfId",a.xfId||0),a.numFmtId&&l.addAttribute("applyNumberFormat","1"),a.fontId&&l.addAttribute("applyFont","1"),a.fillId&&l.addAttribute("applyFill","1"),a.borderId&&l.addAttribute("applyBorder","1"),a.alignment&&l.addAttribute("applyAlignment","1"),a.protection&&l.addAttribute("applyProtection","1"),a.alignment&&this.map.alignment.render(l,a.alignment),a.protection&&this.map.protection.render(l,a.protection),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"xf":return this.model={numFmtId:parseInt(l.attributes.numFmtId,10),fontId:parseInt(l.attributes.fontId,10),fillId:parseInt(l.attributes.fillId,10),borderId:parseInt(l.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(l.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(l),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(l),!0;default:return!1}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){return this.parser?(this.parser.parseClose(l)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):l!=="xf"}}},{"../base-xform":32,"./alignment-xform":126,"./protection-xform":133}],135:[function(t,r,s){const i=t("../../../doc/enums"),o=t("../../../utils/xml-stream"),u=t("../base-xform"),l=t("../static-xform"),a=t("../list-xform"),c=t("./font-xform"),d=t("./fill-xform"),f=t("./border-xform"),h=t("./numfmt-xform"),p=t("./style-xform"),g=t("./dxf-xform");class m extends u{constructor(b){super(),this.map={numFmts:new a({tag:"numFmts",count:!0,childXform:new h}),fonts:new a({tag:"fonts",count:!0,childXform:new c,$:{"x14ac:knownFonts":1}}),fills:new a({tag:"fills",count:!0,childXform:new d}),borders:new a({tag:"borders",count:!0,childXform:new f}),cellStyleXfs:new a({tag:"cellStyleXfs",count:!0,childXform:new p}),cellXfs:new a({tag:"cellXfs",count:!0,childXform:new p({xfId:!0})}),dxfs:new a({tag:"dxfs",always:!0,count:!0,childXform:new g}),numFmt:new h,font:new c,fill:new d,border:new f,style:new p({xfId:!0}),cellStyles:m.STATIC_XFORMS.cellStyles,tableStyles:m.STATIC_XFORMS.tableStyles,extLst:m.STATIC_XFORMS.extLst},b&&this.init()}initIndex(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}init(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}render(b,v){v=v||this.model,b.openXml(o.StdDocAttributes),b.openNode("styleSheet",m.STYLESHEET_ATTRIBUTES),this.index?(v.numFmts&&v.numFmts.length&&(b.openNode("numFmts",{count:v.numFmts.length}),v.numFmts.forEach(k=>{b.writeXml(k)}),b.closeNode()),v.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),b.openNode("fonts",{count:v.fonts.length,"x14ac:knownFonts":1}),v.fonts.forEach(k=>{b.writeXml(k)}),b.closeNode(),b.openNode("fills",{count:v.fills.length}),v.fills.forEach(k=>{b.writeXml(k)}),b.closeNode(),b.openNode("borders",{count:v.borders.length}),v.borders.forEach(k=>{b.writeXml(k)}),b.closeNode(),this.map.cellStyleXfs.render(b,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),b.openNode("cellXfs",{count:v.styles.length}),v.styles.forEach(k=>{b.writeXml(k)}),b.closeNode()):(this.map.numFmts.render(b,v.numFmts),this.map.fonts.render(b,v.fonts),this.map.fills.render(b,v.fills),this.map.borders.render(b,v.borders),this.map.cellStyleXfs.render(b,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(b,v.styles)),m.STATIC_XFORMS.cellStyles.render(b),this.map.dxfs.render(b,v.dxfs),m.STATIC_XFORMS.tableStyles.render(b),m.STATIC_XFORMS.extLst.render(b),b.closeNode()}parseOpen(b){if(this.parser)return this.parser.parseOpen(b),!0;switch(b.name){case"styleSheet":return this.initIndex(),!0;default:return this.parser=this.map[b.name],this.parser&&this.parser.parseOpen(b),!0}}parseText(b){this.parser&&this.parser.parseText(b)}parseClose(b){if(this.parser)return this.parser.parseClose(b)||(this.parser=void 0),!0;switch(b){case"styleSheet":{this.model={};const v=(k,j)=>{j.model&&j.model.length&&(this.model[k]=j.model)};if(v("numFmts",this.map.numFmts),v("fonts",this.map.fonts),v("fills",this.map.fills),v("borders",this.map.borders),v("styles",this.map.cellXfs),v("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){const k=this.index.numFmt;this.model.numFmts.forEach(j=>{k[j.id]=j.formatCode})}return!1}default:return!0}}addStyleModel(b,v){if(!b)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(b))return this.weakMap.get(b);const k={};if(v=v||i.ValueType.Number,b.numFmt)k.numFmtId=this._addNumFmtStr(b.numFmt);else switch(v){case i.ValueType.Number:k.numFmtId=this._addNumFmtStr("General");break;case i.ValueType.Date:k.numFmtId=this._addNumFmtStr("mm-dd-yy")}b.font&&(k.fontId=this._addFont(b.font)),b.border&&(k.borderId=this._addBorder(b.border)),b.fill&&(k.fillId=this._addFill(b.fill)),b.alignment&&(k.alignment=b.alignment),b.protection&&(k.protection=b.protection);const j=this._addStyle(k);return this.weakMap&&this.weakMap.set(b,j),j}getStyleModel(b){const v=this.model.styles[b];if(!v)return null;let k=this.index.model[b];if(k)return k;if(k=this.index.model[b]={},v.numFmtId){const I=this.index.numFmt[v.numFmtId]||h.getDefaultFmtCode(v.numFmtId);I&&(k.numFmt=I)}function j(I,U,P){if(P||P===0){const z=U[P];z&&(k[I]=z)}}return j("font",this.model.fonts,v.fontId),j("border",this.model.borders,v.borderId),j("fill",this.model.fills,v.fillId),v.alignment&&(k.alignment=v.alignment),v.protection&&(k.protection=v.protection),k}addDxfStyle(b){return b.numFmt&&(b.numFmtId=this._addNumFmtStr(b.numFmt)),this.model.dxfs.push(b),this.model.dxfs.length-1}getDxfStyle(b){return this.model.dxfs[b]}_addStyle(b){const v=this.map.style.toXml(b);let k=this.index.style[v];return k===void 0&&(k=this.index.style[v]=this.model.styles.length,this.model.styles.push(v)),k}_addNumFmtStr(b){let v=h.getDefaultFmtId(b);if(v!==void 0||(v=this.index.numFmt[b],v!==void 0))return v;v=this.index.numFmt[b]=164+this.model.numFmts.length;const k=this.map.numFmt.toXml({id:v,formatCode:b});return this.model.numFmts.push(k),v}_addFont(b){const v=this.map.font.toXml(b);let k=this.index.font[v];return k===void 0&&(k=this.index.font[v]=this.model.fonts.length,this.model.fonts.push(v)),k}_addBorder(b){const v=this.map.border.toXml(b);let k=this.index.border[v];return k===void 0&&(k=this.index.border[v]=this.model.borders.length,this.model.borders.push(v)),k}_addFill(b){const v=this.map.fill.toXml(b);let k=this.index.fill[v];return k===void 0&&(k=this.index.fill[v]=this.model.fills.length,this.model.fills.push(v)),k}}m.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},m.STATIC_XFORMS={cellStyles:new l({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new l({tag:"dxfs",$:{count:0}}),tableStyles:new l({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new l({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})},m.Mock=class extends m{constructor(){super(),this.model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]}}parseStream(y){return y.autodrain(),Promise.resolve()}addStyleModel(y,b){switch(b){case i.ValueType.Date:return this.dateStyleId;default:return 0}}get dateStyleId(){if(!this._dateStyleId){const y={numFmtId:h.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(y)}return this._dateStyleId}getStyleModel(){return{}}},r.exports=m},{"../../../doc/enums":7,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./border-xform":127,"./dxf-xform":129,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./style-xform":134}],136:[function(t,r,s){const i=t("../base-xform");class o extends i{constructor(l){super(),this.model=l}get tag(){return"u"}render(l,a){if((a=a||this.model)===!0)l.leafNode("u");else{const c=o.Attributes[a];c&&l.leafNode("u",c)}}parseOpen(l){l.name==="u"&&(this.model=l.attributes.val||!0)}parseText(){}parseClose(){return!1}}o.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},r.exports=o},{"../base-xform":32}],137:[function(t,r,s){const i=t("../base-xform"),o=t("./filter-column-xform");r.exports=class extends i{constructor(){super(),this.map={filterColumn:new o}}get tag(){return"autoFilter"}prepare(u){u.columns.forEach((l,a)=>{this.map.filterColumn.prepare(l,{index:a})})}render(u,l){return u.openNode(this.tag,{ref:l.autoFilterRef}),l.columns.forEach(a=>{this.map.filterColumn.render(u,a)}),u.closeNode(),!0}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:return this.model={autoFilterRef:u.attributes.ref,columns:[]},!0;default:if(this.parser=this.map[u.name],this.parser)return this.parseOpen(u),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(u))}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;switch(u){case this.tag:return!1;default:throw new Error("Unexpected xml node in parseClose: "+u)}}}},{"../base-xform":32,"./filter-column-xform":139}],138:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"customFilter"}render(o,u){o.leafNode(this.tag,{val:u.val,operator:u.operator})}parseOpen(o){return o.name===this.tag&&(this.model={val:o.attributes.val,operator:o.attributes.operator},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],139:[function(t,r,s){const i=t("../base-xform"),o=t("../list-xform"),u=t("./custom-filter-xform"),l=t("./filter-xform");r.exports=class extends i{constructor(){super(),this.map={customFilters:new o({tag:"customFilters",count:!1,empty:!0,childXform:new u}),filters:new o({tag:"filters",count:!1,empty:!0,childXform:new l})}}get tag(){return"filterColumn"}prepare(a,c){a.colId=c.index.toString()}render(a,c){return c.customFilters?(a.openNode(this.tag,{colId:c.colId,hiddenButton:c.filterButton?"0":"1"}),this.map.customFilters.render(a,c.customFilters),a.closeNode(),!0):(a.leafNode(this.tag,{colId:c.colId,hiddenButton:c.filterButton?"0":"1"}),!0)}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;const{attributes:c}=a;switch(a.name){case this.tag:return this.model={filterButton:c.hiddenButton==="0"},!0;default:if(this.parser=this.map[a.name],this.parser)return this.parseOpen(a),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(a))}}parseText(){}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case this.tag:return this.model.customFilters=this.map.customFilters.model,!1;default:return!0}}}},{"../base-xform":32,"../list-xform":71,"./custom-filter-xform":138,"./filter-xform":140}],140:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"filter"}render(o,u){o.leafNode(this.tag,{val:u.val})}parseOpen(o){return o.name===this.tag&&(this.model={val:o.attributes.val},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],141:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"tableColumn"}prepare(o,u){o.id=u.index+1}render(o,u){return o.leafNode(this.tag,{id:u.id.toString(),name:u.name,totalsRowLabel:u.totalsRowLabel,totalsRowFunction:u.totalsRowFunction,dxfId:u.dxfId}),!0}parseOpen(o){if(o.name===this.tag){const{attributes:u}=o;return this.model={name:u.name,totalsRowLabel:u.totalsRowLabel,totalsRowFunction:u.totalsRowFunction,dxfId:u.dxfId},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],142:[function(t,r,s){const i=t("../base-xform");r.exports=class extends i{get tag(){return"tableStyleInfo"}render(o,u){return o.leafNode(this.tag,{name:u.theme?u.theme:void 0,showFirstColumn:u.showFirstColumn?"1":"0",showLastColumn:u.showLastColumn?"1":"0",showRowStripes:u.showRowStripes?"1":"0",showColumnStripes:u.showColumnStripes?"1":"0"}),!0}parseOpen(o){if(o.name===this.tag){const{attributes:u}=o;return this.model={theme:u.name?u.name:null,showFirstColumn:u.showFirstColumn==="1",showLastColumn:u.showLastColumn==="1",showRowStripes:u.showRowStripes==="1",showColumnStripes:u.showColumnStripes==="1"},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],143:[function(t,r,s){const i=t("../../../utils/xml-stream"),o=t("../base-xform"),u=t("../list-xform"),l=t("./auto-filter-xform"),a=t("./table-column-xform"),c=t("./table-style-info-xform");class d extends o{constructor(){super(),this.map={autoFilter:new l,tableColumns:new u({tag:"tableColumns",count:!0,empty:!0,childXform:new a}),tableStyleInfo:new c}}prepare(h,p){this.map.autoFilter.prepare(h),this.map.tableColumns.prepare(h.columns,p)}get tag(){return"table"}render(h,p){h.openXml(i.StdDocAttributes),h.openNode(this.tag,{...d.TABLE_ATTRIBUTES,id:p.id,name:p.name,displayName:p.displayName||p.name,ref:p.tableRef,totalsRowCount:p.totalsRow?"1":void 0,totalsRowShown:p.totalsRow?void 0:"1",headerRowCount:p.headerRow?"1":"0"}),this.map.autoFilter.render(h,p),this.map.tableColumns.render(h,p.columns),this.map.tableStyleInfo.render(h,p.style),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;const{name:p,attributes:g}=h;switch(p){case this.tag:this.reset(),this.model={name:g.name,displayName:g.displayName||g.name,tableRef:g.ref,totalsRow:g.totalsRowCount==="1",headerRow:g.headerRowCount==="1"};break;default:this.parser=this.map[h.name],this.parser&&this.parser.parseOpen(h)}return!0}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.parser=void 0),!0;switch(h){case this.tag:return this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((p,g)=>{this.model.columns[g].filterButton=p.filterButton})),this.model.style=this.map.tableStyleInfo.model,!1;default:return!0}}reconcile(h,p){h.columns.forEach(g=>{g.dxfId!==void 0&&(g.style=p.styles.getDxfStyle(g.dxfId))})}}d.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},r.exports=d},{"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":137,"./table-column-xform":141,"./table-style-info-xform":142}],144:[function(t,r,s){(function(i,o){(function(){const u=t("fs"),l=t("jszip"),{PassThrough:a}=t("readable-stream"),c=t("../utils/zip-stream"),d=t("../utils/stream-buf"),f=t("../utils/utils"),h=t("../utils/xml-stream"),{bufferToString:p}=t("../utils/browser-buffer-decode"),g=t("./xform/style/styles-xform"),m=t("./xform/core/core-xform"),y=t("./xform/strings/shared-strings-xform"),b=t("./xform/core/relationships-xform"),v=t("./xform/core/content-types-xform"),k=t("./xform/core/app-xform"),j=t("./xform/book/workbook-xform"),I=t("./xform/sheet/worksheet-xform"),U=t("./xform/drawing/drawing-xform"),P=t("./xform/table/table-xform"),z=t("./xform/comment/comments-xform"),q=t("./xform/comment/vml-notes-xform"),$=t("./xml/theme1");class F{constructor(N){this.workbook=N}async readFile(N,C){if(!await f.fs.exists(N))throw new Error("File not found: "+N);const w=u.createReadStream(N);try{const _=await this.read(w,C);return w.close(),_}catch(_){throw w.close(),_}}parseRels(N){return new b().parseStream(N)}parseWorkbook(N){return new j().parseStream(N)}parseSharedStrings(N){return new y().parseStream(N)}reconcile(N,C){const w=new j,_=new I(C),x=new U,S=new P;w.reconcile(N);const A={media:N.media,mediaIndex:N.mediaIndex};Object.keys(N.drawings).forEach(V=>{const X=N.drawings[V],Q=N.drawingRels[V];Q&&(A.rels=Q.reduce((D,Z)=>(D[Z.Id]=Z,D),{}),(X.anchors||[]).forEach(D=>{const Z=D.picture&&D.picture.hyperlinks;Z&&A.rels[Z.rId]&&(Z.hyperlink=A.rels[Z.rId].Target,delete Z.rId)}),x.reconcile(X,A))});const B={styles:N.styles};Object.values(N.tables).forEach(V=>{S.reconcile(V,B)});const E={styles:N.styles,sharedStrings:N.sharedStrings,media:N.media,mediaIndex:N.mediaIndex,date1904:N.properties&&N.properties.date1904,drawings:N.drawings,comments:N.comments,tables:N.tables,vmlDrawings:N.vmlDrawings};N.worksheets.forEach(V=>{V.relationships=N.worksheetRels[V.sheetNo],_.reconcile(V,E)}),delete N.worksheetHash,delete N.worksheetRels,delete N.globalRels,delete N.sharedStrings,delete N.workbookRels,delete N.sheetDefs,delete N.styles,delete N.mediaIndex,delete N.drawings,delete N.drawingRels,delete N.vmlDrawings}async _processWorksheetEntry(N,C,w,_,x){const S=new I(_),A=await S.parseStream(N);A.sheetNo=w,C.worksheetHash[x]=A,C.worksheets.push(A)}async _processCommentEntry(N,C,w){const _=new z,x=await _.parseStream(N);C.comments[`../${w}.xml`]=x}async _processTableEntry(N,C,w){const _=new P,x=await _.parseStream(N);C.tables[`../tables/${w}.xml`]=x}async _processWorksheetRelsEntry(N,C,w){const _=new b,x=await _.parseStream(N);C.worksheetRels[w]=x}async _processMediaEntry(N,C,w){const _=w.lastIndexOf(".");if(_>=1){const x=w.substr(_+1),S=w.substr(0,_);await new Promise((A,B)=>{const E=new d;E.on("finish",()=>{C.mediaIndex[w]=C.media.length,C.mediaIndex[S]=C.media.length;const V={type:"image",name:S,extension:x,buffer:E.toBuffer()};C.media.push(V),A()}),N.on("error",V=>{B(V)}),N.pipe(E)})}}async _processDrawingEntry(N,C,w){const _=new U,x=await _.parseStream(N);C.drawings[w]=x}async _processDrawingRelsEntry(N,C,w){const _=new b,x=await _.parseStream(N);C.drawingRels[w]=x}async _processVmlDrawingEntry(N,C,w){const _=new q,x=await _.parseStream(N);C.vmlDrawings[`../drawings/${w}.vml`]=x}async _processThemeEntry(N,C,w){await new Promise((_,x)=>{const S=new d;N.on("error",x),S.on("error",x),S.on("finish",()=>{C.themes[w]=S.read().toString(),_()}),N.pipe(S)})}createInputStream(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}async read(N,C){!N[Symbol.asyncIterator]&&N.pipe&&(N=N.pipe(new a));const w=[];for await(const _ of N)w.push(_);return this.load(o.concat(w),C)}async load(N,C){let w;w=C&&C.base64?o.from(N.toString(),"base64"):N;const _={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},x=await l.loadAsync(w);for(const S of Object.values(x.files))if(!S.dir){let A,B=S.name;if(B[0]==="/"&&(B=B.substr(1)),B.match(/xl\/media\//)||B.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))A=new a,A.write(await S.async("nodebuffer"));else{let E;A=new a({writableObjectMode:!0,readableObjectMode:!0}),E=i.browser?p(await S.async("nodebuffer")):await S.async("string");const V=16384;for(let X=0;X<E.length;X+=V)A.write(E.substring(X,X+V))}switch(A.end(),B){case"_rels/.rels":_.globalRels=await this.parseRels(A);break;case"xl/workbook.xml":{const E=await this.parseWorkbook(A);_.sheets=E.sheets,_.definedNames=E.definedNames,_.views=E.views,_.properties=E.properties,_.calcProperties=E.calcProperties;break}case"xl/_rels/workbook.xml.rels":_.workbookRels=await this.parseRels(A);break;case"xl/sharedStrings.xml":_.sharedStrings=new y,await _.sharedStrings.parseStream(A);break;case"xl/styles.xml":_.styles=new g,await _.styles.parseStream(A);break;case"docProps/app.xml":{const E=new k,V=await E.parseStream(A);_.company=V.company,_.manager=V.manager;break}case"docProps/core.xml":{const E=new m,V=await E.parseStream(A);Object.assign(_,V);break}default:{let E=B.match(/xl\/worksheets\/sheet(\d+)[.]xml/);if(E){await this._processWorksheetEntry(A,_,E[1],C,B);break}if(E=B.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/),E){await this._processWorksheetRelsEntry(A,_,E[1]);break}if(E=B.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/),E){await this._processThemeEntry(A,_,E[1]);break}if(E=B.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/),E){await this._processMediaEntry(A,_,E[1]);break}if(E=B.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/),E){await this._processDrawingEntry(A,_,E[1]);break}if(E=B.match(/xl\/(comments\d+)[.]xml/),E){await this._processCommentEntry(A,_,E[1]);break}if(E=B.match(/xl\/tables\/(table\d+)[.]xml/),E){await this._processTableEntry(A,_,E[1]);break}if(E=B.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/),E){await this._processDrawingRelsEntry(A,_,E[1]);break}if(E=B.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/),E){await this._processVmlDrawingEntry(A,_,E[1]);break}}}}return this.reconcile(_,C),this.workbook.model=_,this.workbook}async addMedia(N,C){await Promise.all(C.media.map(async w=>{if(w.type==="image"){const _=`xl/media/${w.name}.${w.extension}`;if(w.filename){const x=await function(S,A){return new Promise((B,E)=>{u.readFile(S,A,(V,X)=>{V?E(V):B(X)})})}(w.filename);return N.append(x,{name:_})}if(w.buffer)return N.append(w.buffer,{name:_});if(w.base64){const x=w.base64,S=x.substring(x.indexOf(",")+1);return N.append(S,{name:_,base64:!0})}}throw new Error("Unsupported media")}))}addDrawings(N,C){const w=new U,_=new b;C.worksheets.forEach(x=>{const{drawing:S}=x;if(S){w.prepare(S,{});let A=w.toXml(S);N.append(A,{name:`xl/drawings/${S.name}.xml`}),A=_.toXml(S.rels),N.append(A,{name:`xl/drawings/_rels/${S.name}.xml.rels`})}})}addTables(N,C){const w=new P;C.worksheets.forEach(_=>{const{tables:x}=_;x.forEach(S=>{w.prepare(S,{});const A=w.toXml(S);N.append(A,{name:"xl/tables/"+S.target})})})}async addContentTypes(N,C){const w=new v().toXml(C);N.append(w,{name:"[Content_Types].xml"})}async addApp(N,C){const w=new k().toXml(C);N.append(w,{name:"docProps/app.xml"})}async addCore(N,C){const w=new m;N.append(w.toXml(C),{name:"docProps/core.xml"})}async addThemes(N,C){const w=C.themes||{theme1:$};Object.keys(w).forEach(_=>{const x=w[_],S=`xl/theme/${_}.xml`;N.append(x,{name:S})})}async addOfficeRels(N){const C=new b().toXml([{Id:"rId1",Type:F.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:F.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:F.RelType.ExtenderProperties,Target:"docProps/app.xml"}]);N.append(C,{name:"_rels/.rels"})}async addWorkbookRels(N,C){let w=1;const _=[{Id:"rId"+w++,Type:F.RelType.Styles,Target:"styles.xml"},{Id:"rId"+w++,Type:F.RelType.Theme,Target:"theme/theme1.xml"}];C.sharedStrings.count&&_.push({Id:"rId"+w++,Type:F.RelType.SharedStrings,Target:"sharedStrings.xml"}),C.worksheets.forEach(S=>{S.rId="rId"+w++,_.push({Id:S.rId,Type:F.RelType.Worksheet,Target:`worksheets/sheet${S.id}.xml`})});const x=new b().toXml(_);N.append(x,{name:"xl/_rels/workbook.xml.rels"})}async addSharedStrings(N,C){C.sharedStrings&&C.sharedStrings.count&&N.append(C.sharedStrings.xml,{name:"xl/sharedStrings.xml"})}async addStyles(N,C){const{xml:w}=C.styles;w&&N.append(w,{name:"xl/styles.xml"})}async addWorkbook(N,C){const w=new j;N.append(w.toXml(C),{name:"xl/workbook.xml"})}async addWorksheets(N,C){const w=new I,_=new b,x=new z,S=new q;C.worksheets.forEach(A=>{let B=new h;w.render(B,A),N.append(B.xml,{name:`xl/worksheets/sheet${A.id}.xml`}),A.rels&&A.rels.length&&(B=new h,_.render(B,A.rels),N.append(B.xml,{name:`xl/worksheets/_rels/sheet${A.id}.xml.rels`})),A.comments.length>0&&(B=new h,x.render(B,A),N.append(B.xml,{name:`xl/comments${A.id}.xml`}),B=new h,S.render(B,A),N.append(B.xml,{name:`xl/drawings/vmlDrawing${A.id}.vml`}))})}_finalize(N){return new Promise((C,w)=>{N.on("finish",()=>{C(this)}),N.on("error",w),N.finalize()})}prepareModel(N,C){N.creator=N.creator||"ExcelJS",N.lastModifiedBy=N.lastModifiedBy||"ExcelJS",N.created=N.created||new Date,N.modified=N.modified||new Date,N.useSharedStrings=C.useSharedStrings===void 0||C.useSharedStrings,N.useStyles=C.useStyles===void 0||C.useStyles,N.sharedStrings=new y,N.styles=N.useStyles?new g(!0):new g.Mock;const w=new j,_=new I;w.prepare(N);const x={sharedStrings:N.sharedStrings,styles:N.styles,date1904:N.properties.date1904,drawingsCount:0,media:N.media};x.drawings=N.drawings=[],x.commentRefs=N.commentRefs=[];let S=0;N.tables=[],N.worksheets.forEach(A=>{A.tables.forEach(B=>{S++,B.target=`table${S}.xml`,B.id=S,N.tables.push(B)}),_.prepare(A,x)})}async write(N,C){C=C||{};const{model:w}=this.workbook,_=new c.ZipWriter(C.zip);return _.pipe(N),this.prepareModel(w,C),await this.addContentTypes(_,w),await this.addOfficeRels(_,w),await this.addWorkbookRels(_,w),await this.addWorksheets(_,w),await this.addSharedStrings(_,w),await this.addDrawings(_,w),await this.addTables(_,w),await Promise.all([this.addThemes(_,w),this.addStyles(_,w)]),await this.addMedia(_,w),await Promise.all([this.addApp(_,w),this.addCore(_,w)]),await this.addWorkbook(_,w),this._finalize(_)}writeFile(N,C){const w=u.createWriteStream(N);return new Promise((_,x)=>{w.on("finish",()=>{_()}),w.on("error",S=>{x(S)}),this.write(w,C).then(()=>{w.end()}).catch(S=>{x(S)})})}async writeBuffer(N){const C=new d;return await this.write(C,N),C.read()}}F.RelType=t("./rel-type"),r.exports=F}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":24,"../utils/utils":27,"../utils/xml-stream":28,"../utils/zip-stream":29,"./rel-type":31,"./xform/book/workbook-xform":38,"./xform/comment/comments-xform":40,"./xform/comment/vml-notes-xform":45,"./xform/core/app-xform":51,"./xform/core/content-types-xform":52,"./xform/core/core-xform":53,"./xform/core/relationships-xform":55,"./xform/drawing/drawing-xform":62,"./xform/sheet/worksheet-xform":115,"./xform/strings/shared-strings-xform":124,"./xform/style/styles-xform":135,"./xform/table/table-xform":143,"./xml/theme1":145,_process:467,buffer:220,fs:216,jszip:441,"readable-stream":491}],145:[function(t,r,s){r.exports=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>`},{}],146:[function(t,r,s){(function(i){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.CsvFormatterStream=void 0;const o=t("stream"),u=t("./formatter");class l extends o.Transform{constructor(c){super({writableObjectMode:c.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=c,this.rowFormatter=new u.RowFormatter(c),this.hasWrittenBOM=!c.writeBOM}transform(c){return this.rowFormatter.rowTransform=c,this}_transform(c,d,f){let h=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(c,(p,g)=>p?(h=!0,f(p)):(g&&g.forEach(m=>{this.push(i.from(m,"utf8"))}),h=!0,f()))}catch(p){if(h)throw p;f(p)}}_flush(c){this.rowFormatter.finish((d,f)=>d?c(d):(f&&f.forEach(h=>{this.push(i.from(h,"utf8"))}),c()))}}s.CsvFormatterStream=l}).call(this)}).call(this,t("buffer").Buffer)},{"./formatter":150,buffer:220,stream:505}],147:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.FormatterOptions=void 0,s.FormatterOptions=class{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var o;this.objectMode=!0,this.delimiter=",",this.rowDelimiter=`
`,this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\uFEFF",this.alwaysWriteHeaders=!1,Object.assign(this,i||{}),(i==null?void 0:i.quoteHeaders)===void 0&&(this.quoteHeaders=this.quoteColumns),(i==null?void 0:i.quote)===!0?this.quote='"':(i==null?void 0:i.quote)===!1&&(this.quote=""),typeof(i==null?void 0:i.escape)!="string"&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&((o=i.writeHeaders)===null||o===void 0||o),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote=`${this.escape}${this.quote}`}}},{}],148:[function(t,r,s){var i=function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(s,"__esModule",{value:!0}),s.FieldFormatter=void 0;const o=i(t("lodash.isboolean")),u=i(t("lodash.isnil")),l=i(t("lodash.escaperegexp"));s.FieldFormatter=class{constructor(a){this._headers=null,this.formatterOptions=a,a.headers!==null&&(this.headers=a.headers),this.REPLACE_REGEXP=new RegExp(a.quote,"g");const c=`[${a.delimiter}${l.default(a.rowDelimiter)}|\r|
]`;this.ESCAPE_REGEXP=new RegExp(c)}set headers(a){this._headers=a}shouldQuote(a,c){const d=c?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return o.default(d)?d:Array.isArray(d)?d[a]:this._headers!==null&&d[this._headers[a]]}format(a,c,d){const f=(""+(u.default(a)?"":a)).replace(/\0/g,""),{formatterOptions:h}=this;return h.quote!==""&&f.indexOf(h.quote)!==-1?this.quoteField(f.replace(this.REPLACE_REGEXP,h.escapedQuote)):f.search(this.ESCAPE_REGEXP)!==-1||this.shouldQuote(c,d)?this.quoteField(f):f}quoteField(a){const{quote:c}=this.formatterOptions;return`${c}${a}${c}`}}},{"lodash.escaperegexp":442,"lodash.isboolean":444,"lodash.isnil":447}],149:[function(t,r,s){var i=function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(s,"__esModule",{value:!0}),s.RowFormatter=void 0;const o=i(t("lodash.isfunction")),u=i(t("lodash.isequal")),l=t("./FieldFormatter"),a=t("../types");class c{constructor(f){this.rowCount=0,this.formatterOptions=f,this.fieldFormatter=new l.FieldFormatter(f),this.headers=f.headers,this.shouldWriteHeaders=f.shouldWriteHeaders,this.hasWrittenHeaders=!1,this.headers!==null&&(this.fieldFormatter.headers=this.headers),f.transform&&(this.rowTransform=f.transform)}static isRowHashArray(f){return!!Array.isArray(f)&&Array.isArray(f[0])&&f[0].length===2}static isRowArray(f){return Array.isArray(f)&&!this.isRowHashArray(f)}static gatherHeaders(f){return c.isRowHashArray(f)?f.map(h=>h[0]):Array.isArray(f)?f:Object.keys(f)}static createTransform(f){return a.isSyncTransform(f)?(h,p)=>{let g=null;try{g=f(h)}catch(m){return p(m)}return p(null,g)}:(h,p)=>{f(h,p)}}set rowTransform(f){if(!o.default(f))throw new TypeError("The transform should be a function");this._rowTransform=c.createTransform(f)}format(f,h){this.callTransformer(f,(p,g)=>{if(p)return h(p);if(!f)return h(null);const m=[];if(g){const{shouldFormatColumns:y,headers:b}=this.checkHeaders(g);if(this.shouldWriteHeaders&&b&&!this.hasWrittenHeaders&&(m.push(this.formatColumns(b,!0)),this.hasWrittenHeaders=!0),y){const v=this.gatherColumns(g);m.push(this.formatColumns(v,!1))}}return h(null,m)})}finish(f){const h=[];if(this.formatterOptions.alwaysWriteHeaders&&this.rowCount===0){if(!this.headers)return f(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));h.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&h.push(this.formatterOptions.rowDelimiter),f(null,h)}checkHeaders(f){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};const h=c.gatherHeaders(f);return this.headers=h,this.fieldFormatter.headers=h,this.shouldWriteHeaders?{shouldFormatColumns:!u.default(h,f),headers:h}:{shouldFormatColumns:!0,headers:null}}gatherColumns(f){if(this.headers===null)throw new Error("Headers is currently null");return Array.isArray(f)?c.isRowHashArray(f)?this.headers.map((h,p)=>{const g=f[p];return g?g[1]:""}):c.isRowArray(f)&&!this.shouldWriteHeaders?f:this.headers.map((h,p)=>f[p]):this.headers.map(h=>f[h])}callTransformer(f,h){return this._rowTransform?this._rowTransform(f,h):h(null,f)}formatColumns(f,h){const p=f.map((m,y)=>this.fieldFormatter.format(m,y,h)).join(this.formatterOptions.delimiter),{rowCount:g}=this;return this.rowCount+=1,g?[this.formatterOptions.rowDelimiter,p].join(""):p}}s.RowFormatter=c},{"../types":152,"./FieldFormatter":148,"lodash.isequal":445,"lodash.isfunction":446}],150:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.FieldFormatter=s.RowFormatter=void 0;var i=t("./RowFormatter");Object.defineProperty(s,"RowFormatter",{enumerable:!0,get:function(){return i.RowFormatter}});var o=t("./FieldFormatter");Object.defineProperty(s,"FieldFormatter",{enumerable:!0,get:function(){return o.FieldFormatter}})},{"./FieldFormatter":148,"./RowFormatter":149}],151:[function(t,r,s){(function(i){(function(){var o=Object.create?function(y,b,v,k){k===void 0&&(k=v),Object.defineProperty(y,k,{enumerable:!0,get:function(){return b[v]}})}:function(y,b,v,k){k===void 0&&(k=v),y[k]=b[v]},u=Object.create?function(y,b){Object.defineProperty(y,"default",{enumerable:!0,value:b})}:function(y,b){y.default=b},l=function(y){if(y&&y.__esModule)return y;var b={};if(y!=null)for(var v in y)v!=="default"&&Object.prototype.hasOwnProperty.call(y,v)&&o(b,y,v);return u(b,y),b},a=function(y,b){for(var v in y)v==="default"||Object.prototype.hasOwnProperty.call(b,v)||o(b,y,v)};Object.defineProperty(s,"__esModule",{value:!0}),s.writeToPath=s.writeToString=s.writeToBuffer=s.writeToStream=s.write=s.format=s.FormatterOptions=s.CsvFormatterStream=void 0;const c=t("util"),d=t("stream"),f=l(t("fs")),h=t("./FormatterOptions"),p=t("./CsvFormatterStream");a(t("./types"),s);var g=t("./CsvFormatterStream");Object.defineProperty(s,"CsvFormatterStream",{enumerable:!0,get:function(){return g.CsvFormatterStream}});var m=t("./FormatterOptions");Object.defineProperty(s,"FormatterOptions",{enumerable:!0,get:function(){return m.FormatterOptions}}),s.format=y=>new p.CsvFormatterStream(new h.FormatterOptions(y)),s.write=(y,b)=>{const v=s.format(b),k=c.promisify((j,I)=>{v.write(j,void 0,I)});return y.reduce((j,I)=>j.then(()=>k(I)),Promise.resolve()).then(()=>v.end()).catch(j=>{v.emit("error",j)}),v},s.writeToStream=(y,b,v)=>s.write(b,v).pipe(y),s.writeToBuffer=function(y){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const v=[],k=new d.Writable({write(j,I,U){v.push(j),U()}});return new Promise((j,I)=>{k.on("error",I).on("finish",()=>j(i.concat(v))),s.write(y,b).pipe(k)})},s.writeToString=(y,b)=>s.writeToBuffer(y,b).then(v=>v.toString()),s.writeToPath=(y,b,v)=>{const k=f.createWriteStream(y,{encoding:"utf8"});return s.write(b,v).pipe(k)}}).call(this)}).call(this,t("buffer").Buffer)},{"./CsvFormatterStream":146,"./FormatterOptions":147,"./types":152,buffer:220,fs:216,stream:505,util:527}],152:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.isSyncTransform=void 0,s.isSyncTransform=i=>i.length===1},{}],153:[function(t,r,s){(function(i){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.CsvParserStream=void 0;const o=t("string_decoder"),u=t("stream"),l=t("./transforms"),a=t("./parser");class c extends u.Transform{constructor(f){super({objectMode:f.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=f,this.parser=new a.Parser(f),this.headerTransformer=new l.HeaderTransformer(f),this.decoder=new o.StringDecoder(f.encoding),this.rowTransformerValidator=new l.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(f){return this.rowTransformerValidator.rowTransform=f,this}validate(f){return this.rowTransformerValidator.rowValidator=f,this}emit(f){if(f==="end")return this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1;for(var h=arguments.length,p=new Array(h>1?h-1:0),g=1;g<h;g++)p[g-1]=arguments[g];return super.emit(f,...p)}_transform(f,h,p){if(this.hasHitRowLimit)return p();const g=c.wrapDoneCallback(p);try{const{lines:m}=this,y=m+this.decoder.write(f),b=this.parse(y,!0);return this.processRows(b,g)}catch(m){return g(m)}}_flush(f){const h=c.wrapDoneCallback(f);if(this.hasHitRowLimit)return h();try{const p=this.lines+this.decoder.end(),g=this.parse(p,!1);return this.processRows(g,h)}catch(p){return h(p)}}parse(f,h){if(!f)return[];const{line:p,rows:g}=this.parser.parse(f,h);return this.lines=p,g}processRows(f,h){const p=f.length,g=m=>{const y=k=>k?h(k):m%100!=0?g(m+1):void i(()=>g(m+1));if(this.checkAndEmitHeaders(),m>=p||this.hasHitRowLimit)return h();if(this.parsedLineCount+=1,this.shouldSkipLine)return y();const b=f[m];this.rowCount+=1,this.parsedRowCount+=1;const v=this.rowCount;return this.transformRow(b,(k,j)=>{if(k)return this.rowCount-=1,y(k);if(!j)return y(new Error("expected transform result"));if(j.isValid){if(j.row)return this.pushRow(j.row,y)}else this.emit("data-invalid",j.row,v,j.reason);return y()})};g(0)}transformRow(f,h){try{this.headerTransformer.transform(f,(p,g)=>p?h(p):g?g.isValid?g.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(g.row,h):this.skipRow(h):(this.rowCount-=1,this.parsedRowCount-=1,h(null,{row:null,isValid:!0})):this.shouldEmitRows?h(null,{isValid:!1,row:f}):this.skipRow(h):h(new Error("Expected result from header transform")))}catch(p){h(p)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(f){return this.rowCount-=1,f(null,{row:null,isValid:!0})}pushRow(f,h){try{this.parserOptions.objectMode?this.push(f):this.push(JSON.stringify(f)),h()}catch(p){h(p)}}static wrapDoneCallback(f){let h=!1;return function(p){if(p){if(h)throw p;return h=!0,void f(p)}for(var g=arguments.length,m=new Array(g>1?g-1:0),y=1;y<g;y++)m[y-1]=arguments[y];f(...m)}}}s.CsvParserStream=c}).call(this)}).call(this,t("timers").setImmediate)},{"./parser":165,"./transforms":168,stream:505,string_decoder:218,timers:523}],154:[function(t,r,s){var i=function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(s,"__esModule",{value:!0}),s.ParserOptions=void 0;const o=i(t("lodash.escaperegexp")),u=i(t("lodash.isnil"));s.ParserOptions=class{constructor(l){var a;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,l||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=o.default(this.delimiter),this.escapeChar=(a=this.escape)!==null&&a!==void 0?a:this.quote,this.supportsComments=!u.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}}},{"lodash.escaperegexp":442,"lodash.isnil":447}],155:[function(t,r,s){var i=Object.create?function(g,m,y,b){b===void 0&&(b=y),Object.defineProperty(g,b,{enumerable:!0,get:function(){return m[y]}})}:function(g,m,y,b){b===void 0&&(b=y),g[b]=m[y]},o=Object.create?function(g,m){Object.defineProperty(g,"default",{enumerable:!0,value:m})}:function(g,m){g.default=m},u=function(g){if(g&&g.__esModule)return g;var m={};if(g!=null)for(var y in g)y!=="default"&&Object.prototype.hasOwnProperty.call(g,y)&&i(m,g,y);return o(m,g),m},l=function(g,m){for(var y in g)y==="default"||Object.prototype.hasOwnProperty.call(m,y)||i(m,g,y)};Object.defineProperty(s,"__esModule",{value:!0}),s.parseString=s.parseFile=s.parseStream=s.parse=s.ParserOptions=s.CsvParserStream=void 0;const a=u(t("fs")),c=t("stream"),d=t("./ParserOptions"),f=t("./CsvParserStream");l(t("./types"),s);var h=t("./CsvParserStream");Object.defineProperty(s,"CsvParserStream",{enumerable:!0,get:function(){return h.CsvParserStream}});var p=t("./ParserOptions");Object.defineProperty(s,"ParserOptions",{enumerable:!0,get:function(){return p.ParserOptions}}),s.parse=g=>new f.CsvParserStream(new d.ParserOptions(g)),s.parseStream=(g,m)=>g.pipe(new f.CsvParserStream(new d.ParserOptions(m))),s.parseFile=function(g){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a.createReadStream(g).pipe(new f.CsvParserStream(new d.ParserOptions(m)))},s.parseString=(g,m)=>{const y=new c.Readable;return y.push(g),y.push(null),y.pipe(new f.CsvParserStream(new d.ParserOptions(m)))}},{"./CsvParserStream":153,"./ParserOptions":154,"./types":169,fs:216,stream:505}],156:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.Parser=void 0;const i=t("./Scanner"),o=t("./RowParser"),u=t("./Token");class l{constructor(c){this.parserOptions=c,this.rowParser=new o.RowParser(this.parserOptions)}static removeBOM(c){return c&&c.charCodeAt(0)===65279?c.slice(1):c}parse(c,d){const f=new i.Scanner({line:l.removeBOM(c),parserOptions:this.parserOptions,hasMoreData:d});return this.parserOptions.supportsComments?this.parseWithComments(f):this.parseWithoutComments(f)}parseWithoutComments(c){const d=[];let f=!0;for(;f;)f=this.parseRow(c,d);return{line:c.line,rows:d}}parseWithComments(c){const{parserOptions:d}=this,f=[];for(let h=c.nextCharacterToken;h!==null;h=c.nextCharacterToken)if(u.Token.isTokenComment(h,d)){if(c.advancePastLine()===null)return{line:c.lineFromCursor,rows:f};if(!c.hasMoreCharacters)return{line:c.lineFromCursor,rows:f};c.truncateToCursor()}else if(!this.parseRow(c,f))break;return{line:c.line,rows:f}}parseRow(c,d){if(!c.nextNonSpaceToken)return!1;const f=this.rowParser.parse(c);return f!==null&&(this.parserOptions.ignoreEmpty&&o.RowParser.isEmptyRow(f)||d.push(f),!0)}}s.Parser=l},{"./RowParser":157,"./Scanner":158,"./Token":159}],157:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.RowParser=void 0;const i=t("./column"),o=t("./Token");s.RowParser=class{constructor(u){this.parserOptions=u,this.columnParser=new i.ColumnParser(u)}static isEmptyRow(u){return u.join("").replace(/\s+/g,"")===""}parse(u){const{parserOptions:l}=this,{hasMoreData:a}=u,c=u,d=[];let f=this.getStartToken(c,d);for(;f;){if(o.Token.isTokenRowDelimiter(f))return c.advancePastToken(f),!c.hasMoreCharacters&&o.Token.isTokenCarriageReturn(f,l)&&a?null:(c.truncateToCursor(),d);if(!this.shouldSkipColumnParse(c,f,d)){const h=this.columnParser.parse(c);if(h===null)return null;d.push(h)}f=c.nextNonSpaceToken}return a?null:(c.truncateToCursor(),d)}getStartToken(u,l){const a=u.nextNonSpaceToken;return a!==null&&o.Token.isTokenDelimiter(a,this.parserOptions)?(l.push(""),u.nextNonSpaceToken):a}shouldSkipColumnParse(u,l,a){const{parserOptions:c}=this;if(o.Token.isTokenDelimiter(l,c)){u.advancePastToken(l);const d=u.nextCharacterToken;if(!u.hasMoreCharacters||d!==null&&o.Token.isTokenRowDelimiter(d)||d!==null&&o.Token.isTokenDelimiter(d,c))return a.push(""),!0}return!1}}},{"./Token":159,"./column":164}],158:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.Scanner=void 0;const i=t("./Token"),o=/((?:\r\n)|\n|\r)/;s.Scanner=class{constructor(u){this.cursor=0,this.line=u.line,this.lineLength=this.line.length,this.parserOptions=u.parserOptions,this.hasMoreData=u.hasMoreData,this.cursor=u.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){const{lineFromCursor:u}=this,l=this.parserOptions.NEXT_TOKEN_REGEXP;if(u.search(l)===-1)return null;const a=l.exec(u);if(a==null)return null;const c=a[1],d=this.cursor+(a.index||0);return new i.Token({token:c,startCursor:d,endCursor:d+c.length-1})}get nextCharacterToken(){const{cursor:u,lineLength:l}=this;return l<=u?null:new i.Token({token:this.line[u],startCursor:u,endCursor:u})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){const u=o.exec(this.lineFromCursor);return u?(this.cursor+=(u.index||0)+u[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(u){return this.cursor=u,this}advanceToToken(u){return this.cursor=u.startCursor,this}advancePastToken(u){return this.cursor=u.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},{"./Token":159}],159:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.Token=void 0,s.Token=class{constructor(i){this.token=i.token,this.startCursor=i.startCursor,this.endCursor=i.endCursor}static isTokenRowDelimiter(i){const o=i.token;return o==="\r"||o===`
`||o===`\r
`}static isTokenCarriageReturn(i,o){return i.token===o.carriageReturn}static isTokenComment(i,o){return o.supportsComments&&!!i&&i.token===o.comment}static isTokenEscapeCharacter(i,o){return i.token===o.escapeChar}static isTokenQuote(i,o){return i.token===o.quote}static isTokenDelimiter(i,o){return i.token===o.delimiter}}},{}],160:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ColumnFormatter=void 0,s.ColumnFormatter=class{constructor(i){i.trim?this.format=o=>o.trim():i.ltrim?this.format=o=>o.trimLeft():i.rtrim?this.format=o=>o.trimRight():this.format=o=>o}}},{}],161:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ColumnParser=void 0;const i=t("./NonQuotedColumnParser"),o=t("./QuotedColumnParser"),u=t("../Token");s.ColumnParser=class{constructor(l){this.parserOptions=l,this.quotedColumnParser=new o.QuotedColumnParser(l),this.nonQuotedColumnParser=new i.NonQuotedColumnParser(l)}parse(l){const{nextNonSpaceToken:a}=l;return a!==null&&u.Token.isTokenQuote(a,this.parserOptions)?(l.advanceToToken(a),this.quotedColumnParser.parse(l)):this.nonQuotedColumnParser.parse(l)}}},{"../Token":159,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],162:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.NonQuotedColumnParser=void 0;const i=t("./ColumnFormatter"),o=t("../Token");s.NonQuotedColumnParser=class{constructor(u){this.parserOptions=u,this.columnFormatter=new i.ColumnFormatter(u)}parse(u){if(!u.hasMoreCharacters)return null;const{parserOptions:l}=this,a=[];let c=u.nextCharacterToken;for(;c&&!o.Token.isTokenDelimiter(c,l)&&!o.Token.isTokenRowDelimiter(c);c=u.nextCharacterToken)a.push(c.token),u.advancePastToken(c);return this.columnFormatter.format(a.join(""))}}},{"../Token":159,"./ColumnFormatter":160}],163:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.QuotedColumnParser=void 0;const i=t("./ColumnFormatter"),o=t("../Token");s.QuotedColumnParser=class{constructor(u){this.parserOptions=u,this.columnFormatter=new i.ColumnFormatter(u)}parse(u){if(!u.hasMoreCharacters)return null;const l=u.cursor,{foundClosingQuote:a,col:c}=this.gatherDataBetweenQuotes(u);if(!a){if(u.advanceTo(l),!u.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${u.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(u),c}gatherDataBetweenQuotes(u){const{parserOptions:l}=this;let a=!1,c=!1;const d=[];let f=u.nextCharacterToken;for(;!c&&f!==null;f=u.nextCharacterToken){const h=o.Token.isTokenQuote(f,l);if(!a&&h)a=!0;else if(a)if(o.Token.isTokenEscapeCharacter(f,l)){u.advancePastToken(f);const p=u.nextCharacterToken;p!==null&&(o.Token.isTokenQuote(p,l)||o.Token.isTokenEscapeCharacter(p,l))?(d.push(p.token),f=p):h?c=!0:d.push(f.token)}else h?c=!0:d.push(f.token);u.advancePastToken(f)}return{col:this.columnFormatter.format(d.join("")),foundClosingQuote:c}}checkForMalformedColumn(u){const{parserOptions:l}=this,{nextNonSpaceToken:a}=u;if(a){const c=o.Token.isTokenDelimiter(a,l),d=o.Token.isTokenRowDelimiter(a);if(!c&&!d){const f=u.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${l.escapedDelimiter}' OR new line got: '${a.token}'. at '${f}`)}u.advanceToToken(a)}else u.hasMoreData||u.advancePastLine()}}},{"../Token":159,"./ColumnFormatter":160}],164:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ColumnFormatter=s.QuotedColumnParser=s.NonQuotedColumnParser=s.ColumnParser=void 0;var i=t("./ColumnParser");Object.defineProperty(s,"ColumnParser",{enumerable:!0,get:function(){return i.ColumnParser}});var o=t("./NonQuotedColumnParser");Object.defineProperty(s,"NonQuotedColumnParser",{enumerable:!0,get:function(){return o.NonQuotedColumnParser}});var u=t("./QuotedColumnParser");Object.defineProperty(s,"QuotedColumnParser",{enumerable:!0,get:function(){return u.QuotedColumnParser}});var l=t("./ColumnFormatter");Object.defineProperty(s,"ColumnFormatter",{enumerable:!0,get:function(){return l.ColumnFormatter}})},{"./ColumnFormatter":160,"./ColumnParser":161,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],165:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.QuotedColumnParser=s.NonQuotedColumnParser=s.ColumnParser=s.Token=s.Scanner=s.RowParser=s.Parser=void 0;var i=t("./Parser");Object.defineProperty(s,"Parser",{enumerable:!0,get:function(){return i.Parser}});var o=t("./RowParser");Object.defineProperty(s,"RowParser",{enumerable:!0,get:function(){return o.RowParser}});var u=t("./Scanner");Object.defineProperty(s,"Scanner",{enumerable:!0,get:function(){return u.Scanner}});var l=t("./Token");Object.defineProperty(s,"Token",{enumerable:!0,get:function(){return l.Token}});var a=t("./column");Object.defineProperty(s,"ColumnParser",{enumerable:!0,get:function(){return a.ColumnParser}}),Object.defineProperty(s,"NonQuotedColumnParser",{enumerable:!0,get:function(){return a.NonQuotedColumnParser}}),Object.defineProperty(s,"QuotedColumnParser",{enumerable:!0,get:function(){return a.QuotedColumnParser}})},{"./Parser":156,"./RowParser":157,"./Scanner":158,"./Token":159,"./column":164}],166:[function(t,r,s){var i=function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(s,"__esModule",{value:!0}),s.HeaderTransformer=void 0;const o=i(t("lodash.isundefined")),u=i(t("lodash.isfunction")),l=i(t("lodash.uniq")),a=i(t("lodash.groupby"));s.HeaderTransformer=class{constructor(c){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=c,c.headers===!0?this.shouldUseFirstRow=!0:Array.isArray(c.headers)?this.setHeaders(c.headers):u.default(c.headers)&&(this.headersTransform=c.headers)}transform(c,d){return this.shouldMapRow(c)?d(null,this.processRow(c)):d(null,{row:null,isValid:!0})}shouldMapRow(c){const{parserOptions:d}=this;if(!this.headersTransform&&d.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(c)){if(this.headersTransform)this.setHeaders(this.headersTransform(c));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(c)}return!1}return!0}processRow(c){if(!this.headers)return{row:c,isValid:!0};const{parserOptions:d}=this;if(!d.discardUnmappedColumns&&c.length>this.headersLength){if(!d.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${c.length}`);return{row:c,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${c.length}`}}return d.strictColumnHandling&&c.length<this.headersLength?{row:c,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${c.length}`}:{row:this.mapHeaders(c),isValid:!0}}mapHeaders(c){const d={},{headers:f,headersLength:h}=this;for(let p=0;p<h;p+=1){const g=f[p];if(!o.default(g)){const m=c[p];o.default(m)?d[g]="":d[g]=m}}return d}setHeaders(c){var d;const f=c.filter(h=>!!h);if(l.default(f).length!==f.length){const h=a.default(f),p=Object.keys(h).filter(g=>h[g].length>1);throw new Error("Duplicate headers found "+JSON.stringify(p))}this.headers=c,this.receivedHeaders=!0,this.headersLength=((d=this.headers)===null||d===void 0?void 0:d.length)||0}}},{"lodash.groupby":443,"lodash.isfunction":446,"lodash.isundefined":448,"lodash.uniq":449}],167:[function(t,r,s){var i=function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(s,"__esModule",{value:!0}),s.RowTransformerValidator=void 0;const o=i(t("lodash.isfunction")),u=t("../types");class l{constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(c){return u.isSyncTransform(c)?(d,f)=>{let h=null;try{h=c(d)}catch(p){return f(p)}return f(null,h)}:c}static createValidator(c){return u.isSyncValidate(c)?(d,f)=>{f(null,{row:d,isValid:c(d)})}:(d,f)=>{c(d,(h,p,g)=>h?f(h):f(null,p?{row:d,isValid:p,reason:g}:{row:d,isValid:!1,reason:g}))}}set rowTransform(c){if(!o.default(c))throw new TypeError("The transform should be a function");this._rowTransform=l.createTransform(c)}set rowValidator(c){if(!o.default(c))throw new TypeError("The validate should be a function");this._rowValidator=l.createValidator(c)}transformAndValidate(c,d){return this.callTransformer(c,(f,h)=>f?d(f):h?this.callValidator(h,(p,g)=>p?d(p):g&&!g.isValid?d(null,{row:h,isValid:!1,reason:g.reason}):d(null,{row:h,isValid:!0})):d(null,{row:null,isValid:!0}))}callTransformer(c,d){return this._rowTransform?this._rowTransform(c,d):d(null,c)}callValidator(c,d){return this._rowValidator?this._rowValidator(c,d):d(null,{row:c,isValid:!0})}}s.RowTransformerValidator=l},{"../types":169,"lodash.isfunction":446}],168:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.HeaderTransformer=s.RowTransformerValidator=void 0;var i=t("./RowTransformerValidator");Object.defineProperty(s,"RowTransformerValidator",{enumerable:!0,get:function(){return i.RowTransformerValidator}});var o=t("./HeaderTransformer");Object.defineProperty(s,"HeaderTransformer",{enumerable:!0,get:function(){return o.HeaderTransformer}})},{"./HeaderTransformer":166,"./RowTransformerValidator":167}],169:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.isSyncValidate=s.isSyncTransform=void 0,s.isSyncTransform=i=>i.length===1,s.isSyncValidate=i=>i.length===1},{}],170:[function(t,r,s){const i=s;i.bignum=t("bn.js"),i.define=t("./asn1/api").define,i.base=t("./asn1/base"),i.constants=t("./asn1/constants"),i.decoders=t("./asn1/decoders"),i.encoders=t("./asn1/encoders")},{"./asn1/api":171,"./asn1/base":173,"./asn1/constants":177,"./asn1/decoders":179,"./asn1/encoders":182,"bn.js":184}],171:[function(t,r,s){const i=t("./encoders"),o=t("./decoders"),u=t("inherits");function l(a,c){this.name=a,this.body=c,this.decoders={},this.encoders={}}s.define=function(a,c){return new l(a,c)},l.prototype._createNamed=function(a){const c=this.name;function d(f){this._initNamed(f,c)}return u(d,a),d.prototype._initNamed=function(f,h){a.call(this,f,h)},new d(this)},l.prototype._getDecoder=function(a){return a=a||"der",this.decoders.hasOwnProperty(a)||(this.decoders[a]=this._createNamed(o[a])),this.decoders[a]},l.prototype.decode=function(a,c,d){return this._getDecoder(c).decode(a,d)},l.prototype._getEncoder=function(a){return a=a||"der",this.encoders.hasOwnProperty(a)||(this.encoders[a]=this._createNamed(i[a])),this.encoders[a]},l.prototype.encode=function(a,c,d){return this._getEncoder(c).encode(a,d)}},{"./decoders":179,"./encoders":182,inherits:440}],172:[function(t,r,s){const i=t("inherits"),o=t("../base/reporter").Reporter,u=t("safer-buffer").Buffer;function l(c,d){o.call(this,d),u.isBuffer(c)?(this.base=c,this.offset=0,this.length=c.length):this.error("Input not Buffer")}function a(c,d){if(Array.isArray(c))this.length=0,this.value=c.map(function(f){return a.isEncoderBuffer(f)||(f=new a(f,d)),this.length+=f.length,f},this);else if(typeof c=="number"){if(!(0<=c&&c<=255))return d.error("non-byte EncoderBuffer value");this.value=c,this.length=1}else if(typeof c=="string")this.value=c,this.length=u.byteLength(c);else{if(!u.isBuffer(c))return d.error("Unsupported type: "+typeof c);this.value=c,this.length=c.length}}i(l,o),s.DecoderBuffer=l,l.isDecoderBuffer=function(c){return c instanceof l?!0:typeof c=="object"&&u.isBuffer(c.base)&&c.constructor.name==="DecoderBuffer"&&typeof c.offset=="number"&&typeof c.length=="number"&&typeof c.save=="function"&&typeof c.restore=="function"&&typeof c.isEmpty=="function"&&typeof c.readUInt8=="function"&&typeof c.skip=="function"&&typeof c.raw=="function"},l.prototype.save=function(){return{offset:this.offset,reporter:o.prototype.save.call(this)}},l.prototype.restore=function(c){const d=new l(this.base);return d.offset=c.offset,d.length=this.offset,this.offset=c.offset,o.prototype.restore.call(this,c.reporter),d},l.prototype.isEmpty=function(){return this.offset===this.length},l.prototype.readUInt8=function(c){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(c||"DecoderBuffer overrun")},l.prototype.skip=function(c,d){if(!(this.offset+c<=this.length))return this.error(d||"DecoderBuffer overrun");const f=new l(this.base);return f._reporterState=this._reporterState,f.offset=this.offset,f.length=this.offset+c,this.offset+=c,f},l.prototype.raw=function(c){return this.base.slice(c?c.offset:this.offset,this.length)},s.EncoderBuffer=a,a.isEncoderBuffer=function(c){return c instanceof a?!0:typeof c=="object"&&c.constructor.name==="EncoderBuffer"&&typeof c.length=="number"&&typeof c.join=="function"},a.prototype.join=function(c,d){return c||(c=u.alloc(this.length)),d||(d=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(f){f.join(c,d),d+=f.length}):(typeof this.value=="number"?c[d]=this.value:typeof this.value=="string"?c.write(this.value,d):u.isBuffer(this.value)&&this.value.copy(c,d),d+=this.length)),c}},{"../base/reporter":175,inherits:440,"safer-buffer":495}],173:[function(t,r,s){const i=s;i.Reporter=t("./reporter").Reporter,i.DecoderBuffer=t("./buffer").DecoderBuffer,i.EncoderBuffer=t("./buffer").EncoderBuffer,i.Node=t("./node")},{"./buffer":172,"./node":174,"./reporter":175}],174:[function(t,r,s){const i=t("../base/reporter").Reporter,o=t("../base/buffer").EncoderBuffer,u=t("../base/buffer").DecoderBuffer,l=t("minimalistic-assert"),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],c=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function d(h,p,g){const m={};this._baseState=m,m.name=g,m.enc=h,m.parent=p||null,m.children=null,m.tag=null,m.args=null,m.reverseArgs=null,m.choice=null,m.optional=!1,m.any=!1,m.obj=!1,m.use=null,m.useDecoder=null,m.key=null,m.default=null,m.explicit=null,m.implicit=null,m.contains=null,m.parent||(m.children=[],this._wrap())}r.exports=d;const f=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];d.prototype.clone=function(){const h=this._baseState,p={};f.forEach(function(m){p[m]=h[m]});const g=new this.constructor(p.parent);return g._baseState=p,g},d.prototype._wrap=function(){const h=this._baseState;c.forEach(function(p){this[p]=function(){const g=new this.constructor(this);return h.children.push(g),g[p].apply(g,arguments)}},this)},d.prototype._init=function(h){const p=this._baseState;l(p.parent===null),h.call(this),p.children=p.children.filter(function(g){return g._baseState.parent===this},this),l.equal(p.children.length,1,"Root node can have only one child")},d.prototype._useArgs=function(h){const p=this._baseState,g=h.filter(function(m){return m instanceof this.constructor},this);h=h.filter(function(m){return!(m instanceof this.constructor)},this),g.length!==0&&(l(p.children===null),p.children=g,g.forEach(function(m){m._baseState.parent=this},this)),h.length!==0&&(l(p.args===null),p.args=h,p.reverseArgs=h.map(function(m){if(typeof m!="object"||m.constructor!==Object)return m;const y={};return Object.keys(m).forEach(function(b){b==(0|b)&&(b|=0);const v=m[b];y[v]=b}),y}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(h){d.prototype[h]=function(){const p=this._baseState;throw new Error(h+" not implemented for encoding: "+p.enc)}}),a.forEach(function(h){d.prototype[h]=function(){const p=this._baseState,g=Array.prototype.slice.call(arguments);return l(p.tag===null),p.tag=h,this._useArgs(g),this}}),d.prototype.use=function(h){l(h);const p=this._baseState;return l(p.use===null),p.use=h,this},d.prototype.optional=function(){return this._baseState.optional=!0,this},d.prototype.def=function(h){const p=this._baseState;return l(p.default===null),p.default=h,p.optional=!0,this},d.prototype.explicit=function(h){const p=this._baseState;return l(p.explicit===null&&p.implicit===null),p.explicit=h,this},d.prototype.implicit=function(h){const p=this._baseState;return l(p.explicit===null&&p.implicit===null),p.implicit=h,this},d.prototype.obj=function(){const h=this._baseState,p=Array.prototype.slice.call(arguments);return h.obj=!0,p.length!==0&&this._useArgs(p),this},d.prototype.key=function(h){const p=this._baseState;return l(p.key===null),p.key=h,this},d.prototype.any=function(){return this._baseState.any=!0,this},d.prototype.choice=function(h){const p=this._baseState;return l(p.choice===null),p.choice=h,this._useArgs(Object.keys(h).map(function(g){return h[g]})),this},d.prototype.contains=function(h){const p=this._baseState;return l(p.use===null),p.contains=h,this},d.prototype._decode=function(h,p){const g=this._baseState;if(g.parent===null)return h.wrapResult(g.children[0]._decode(h,p));let m,y=g.default,b=!0,v=null;if(g.key!==null&&(v=h.enterKey(g.key)),g.optional){let k=null;if(g.explicit!==null?k=g.explicit:g.implicit!==null?k=g.implicit:g.tag!==null&&(k=g.tag),k!==null||g.any){if(b=this._peekTag(h,k,g.any),h.isError(b))return b}else{const j=h.save();try{g.choice===null?this._decodeGeneric(g.tag,h,p):this._decodeChoice(h,p),b=!0}catch{b=!1}h.restore(j)}}if(g.obj&&b&&(m=h.enterObject()),b){if(g.explicit!==null){const j=this._decodeTag(h,g.explicit);if(h.isError(j))return j;h=j}const k=h.offset;if(g.use===null&&g.choice===null){let j;g.any&&(j=h.save());const I=this._decodeTag(h,g.implicit!==null?g.implicit:g.tag,g.any);if(h.isError(I))return I;g.any?y=h.raw(j):h=I}if(p&&p.track&&g.tag!==null&&p.track(h.path(),k,h.length,"tagged"),p&&p.track&&g.tag!==null&&p.track(h.path(),h.offset,h.length,"content"),g.any||(y=g.choice===null?this._decodeGeneric(g.tag,h,p):this._decodeChoice(h,p)),h.isError(y))return y;if(g.any||g.choice!==null||g.children===null||g.children.forEach(function(j){j._decode(h,p)}),g.contains&&(g.tag==="octstr"||g.tag==="bitstr")){const j=new u(y);y=this._getUse(g.contains,h._reporterState.obj)._decode(j,p)}}return g.obj&&b&&(y=h.leaveObject(m)),g.key===null||y===null&&b!==!0?v!==null&&h.exitKey(v):h.leaveKey(v,g.key,y),y},d.prototype._decodeGeneric=function(h,p,g){const m=this._baseState;return h==="seq"||h==="set"?null:h==="seqof"||h==="setof"?this._decodeList(p,h,m.args[0],g):/str$/.test(h)?this._decodeStr(p,h,g):h==="objid"&&m.args?this._decodeObjid(p,m.args[0],m.args[1],g):h==="objid"?this._decodeObjid(p,null,null,g):h==="gentime"||h==="utctime"?this._decodeTime(p,h,g):h==="null_"?this._decodeNull(p,g):h==="bool"?this._decodeBool(p,g):h==="objDesc"?this._decodeStr(p,h,g):h==="int"||h==="enum"?this._decodeInt(p,m.args&&m.args[0],g):m.use!==null?this._getUse(m.use,p._reporterState.obj)._decode(p,g):p.error("unknown tag: "+h)},d.prototype._getUse=function(h,p){const g=this._baseState;return g.useDecoder=this._use(h,p),l(g.useDecoder._baseState.parent===null),g.useDecoder=g.useDecoder._baseState.children[0],g.implicit!==g.useDecoder._baseState.implicit&&(g.useDecoder=g.useDecoder.clone(),g.useDecoder._baseState.implicit=g.implicit),g.useDecoder},d.prototype._decodeChoice=function(h,p){const g=this._baseState;let m=null,y=!1;return Object.keys(g.choice).some(function(b){const v=h.save(),k=g.choice[b];try{const j=k._decode(h,p);if(h.isError(j))return!1;m={type:b,value:j},y=!0}catch{return h.restore(v),!1}return!0},this),y?m:h.error("Choice not matched")},d.prototype._createEncoderBuffer=function(h){return new o(h,this.reporter)},d.prototype._encode=function(h,p,g){const m=this._baseState;if(m.default!==null&&m.default===h)return;const y=this._encodeValue(h,p,g);return y===void 0||this._skipDefault(y,p,g)?void 0:y},d.prototype._encodeValue=function(h,p,g){const m=this._baseState;if(m.parent===null)return m.children[0]._encode(h,p||new i);let y=null;if(this.reporter=p,m.optional&&h===void 0){if(m.default===null)return;h=m.default}let b=null,v=!1;if(m.any)y=this._createEncoderBuffer(h);else if(m.choice)y=this._encodeChoice(h,p);else if(m.contains)b=this._getUse(m.contains,g)._encode(h,p),v=!0;else if(m.children)b=m.children.map(function(k){if(k._baseState.tag==="null_")return k._encode(null,p,h);if(k._baseState.key===null)return p.error("Child should have a key");const j=p.enterKey(k._baseState.key);if(typeof h!="object")return p.error("Child expected, but input is not object");const I=k._encode(h[k._baseState.key],p,h);return p.leaveKey(j),I},this).filter(function(k){return k}),b=this._createEncoderBuffer(b);else if(m.tag==="seqof"||m.tag==="setof"){if(!m.args||m.args.length!==1)return p.error("Too many args for : "+m.tag);if(!Array.isArray(h))return p.error("seqof/setof, but data is not Array");const k=this.clone();k._baseState.implicit=null,b=this._createEncoderBuffer(h.map(function(j){const I=this._baseState;return this._getUse(I.args[0],h)._encode(j,p)},k))}else m.use!==null?y=this._getUse(m.use,g)._encode(h,p):(b=this._encodePrimitive(m.tag,h),v=!0);if(!m.any&&m.choice===null){const k=m.implicit!==null?m.implicit:m.tag,j=m.implicit===null?"universal":"context";k===null?m.use===null&&p.error("Tag could be omitted only for .use()"):m.use===null&&(y=this._encodeComposite(k,v,j,b))}return m.explicit!==null&&(y=this._encodeComposite(m.explicit,!1,"context",y)),y},d.prototype._encodeChoice=function(h,p){const g=this._baseState,m=g.choice[h.type];return m||l(!1,h.type+" not found in "+JSON.stringify(Object.keys(g.choice))),m._encode(h.value,p)},d.prototype._encodePrimitive=function(h,p){const g=this._baseState;if(/str$/.test(h))return this._encodeStr(p,h);if(h==="objid"&&g.args)return this._encodeObjid(p,g.reverseArgs[0],g.args[1]);if(h==="objid")return this._encodeObjid(p,null,null);if(h==="gentime"||h==="utctime")return this._encodeTime(p,h);if(h==="null_")return this._encodeNull();if(h==="int"||h==="enum")return this._encodeInt(p,g.args&&g.reverseArgs[0]);if(h==="bool")return this._encodeBool(p);if(h==="objDesc")return this._encodeStr(p,h);throw new Error("Unsupported tag: "+h)},d.prototype._isNumstr=function(h){return/^[0-9 ]*$/.test(h)},d.prototype._isPrintstr=function(h){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(h)}},{"../base/buffer":172,"../base/reporter":175,"minimalistic-assert":453}],175:[function(t,r,s){const i=t("inherits");function o(l){this._reporterState={obj:null,path:[],options:l||{},errors:[]}}function u(l,a){this.path=l,this.rethrow(a)}s.Reporter=o,o.prototype.isError=function(l){return l instanceof u},o.prototype.save=function(){const l=this._reporterState;return{obj:l.obj,pathLen:l.path.length}},o.prototype.restore=function(l){const a=this._reporterState;a.obj=l.obj,a.path=a.path.slice(0,l.pathLen)},o.prototype.enterKey=function(l){return this._reporterState.path.push(l)},o.prototype.exitKey=function(l){const a=this._reporterState;a.path=a.path.slice(0,l-1)},o.prototype.leaveKey=function(l,a,c){const d=this._reporterState;this.exitKey(l),d.obj!==null&&(d.obj[a]=c)},o.prototype.path=function(){return this._reporterState.path.join("/")},o.prototype.enterObject=function(){const l=this._reporterState,a=l.obj;return l.obj={},a},o.prototype.leaveObject=function(l){const a=this._reporterState,c=a.obj;return a.obj=l,c},o.prototype.error=function(l){let a;const c=this._reporterState,d=l instanceof u;if(a=d?l:new u(c.path.map(function(f){return"["+JSON.stringify(f)+"]"}).join(""),l.message||l,l.stack),!c.options.partial)throw a;return d||c.errors.push(a),a},o.prototype.wrapResult=function(l){const a=this._reporterState;return a.options.partial?{result:this.isError(l)?null:l,errors:a.errors}:l},i(u,Error),u.prototype.rethrow=function(l){if(this.message=l+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,u),!this.stack)try{throw new Error(this.message)}catch(a){this.stack=a.stack}return this}},{inherits:440}],176:[function(t,r,s){function i(o){const u={};return Object.keys(o).forEach(function(l){(0|l)==l&&(l|=0);const a=o[l];u[a]=l}),u}s.tagClass={0:"universal",1:"application",2:"context",3:"private"},s.tagClassByName=i(s.tagClass),s.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},s.tagByName=i(s.tag)},{}],177:[function(t,r,s){const i=s;i._reverse=function(o){const u={};return Object.keys(o).forEach(function(l){(0|l)==l&&(l|=0);const a=o[l];u[a]=l}),u},i.der=t("./der")},{"./der":176}],178:[function(t,r,s){const i=t("inherits"),o=t("bn.js"),u=t("../base/buffer").DecoderBuffer,l=t("../base/node"),a=t("../constants/der");function c(p){this.enc="der",this.name=p.name,this.entity=p,this.tree=new d,this.tree._init(p.body)}function d(p){l.call(this,"der",p)}function f(p,g){let m=p.readUInt8(g);if(p.isError(m))return m;const y=a.tagClass[m>>6],b=(32&m)==0;if((31&m)==31){let v=m;for(m=0;(128&v)==128;){if(v=p.readUInt8(g),p.isError(v))return v;m<<=7,m|=127&v}}else m&=31;return{cls:y,primitive:b,tag:m,tagStr:a.tag[m]}}function h(p,g,m){let y=p.readUInt8(m);if(p.isError(y))return y;if(!g&&y===128)return null;if(!(128&y))return y;const b=127&y;if(b>4)return p.error("length octect is too long");y=0;for(let v=0;v<b;v++){y<<=8;const k=p.readUInt8(m);if(p.isError(k))return k;y|=k}return y}r.exports=c,c.prototype.decode=function(p,g){return u.isDecoderBuffer(p)||(p=new u(p,g)),this.tree._decode(p,g)},i(d,l),d.prototype._peekTag=function(p,g,m){if(p.isEmpty())return!1;const y=p.save(),b=f(p,'Failed to peek tag: "'+g+'"');return p.isError(b)?b:(p.restore(y),b.tag===g||b.tagStr===g||b.tagStr+"of"===g||m)},d.prototype._decodeTag=function(p,g,m){const y=f(p,'Failed to decode tag of "'+g+'"');if(p.isError(y))return y;let b=h(p,y.primitive,'Failed to get length of "'+g+'"');if(p.isError(b))return b;if(!m&&y.tag!==g&&y.tagStr!==g&&y.tagStr+"of"!==g)return p.error('Failed to match tag: "'+g+'"');if(y.primitive||b!==null)return p.skip(b,'Failed to match body of: "'+g+'"');const v=p.save(),k=this._skipUntilEnd(p,'Failed to skip indefinite length body: "'+this.tag+'"');return p.isError(k)?k:(b=p.offset-v.offset,p.restore(v),p.skip(b,'Failed to match body of: "'+g+'"'))},d.prototype._skipUntilEnd=function(p,g){for(;;){const m=f(p,g);if(p.isError(m))return m;const y=h(p,m.primitive,g);if(p.isError(y))return y;let b;if(b=m.primitive||y!==null?p.skip(y):this._skipUntilEnd(p,g),p.isError(b))return b;if(m.tagStr==="end")break}},d.prototype._decodeList=function(p,g,m,y){const b=[];for(;!p.isEmpty();){const v=this._peekTag(p,"end");if(p.isError(v))return v;const k=m.decode(p,"der",y);if(p.isError(k)&&v)break;b.push(k)}return b},d.prototype._decodeStr=function(p,g){if(g==="bitstr"){const m=p.readUInt8();return p.isError(m)?m:{unused:m,data:p.raw()}}if(g==="bmpstr"){const m=p.raw();if(m.length%2==1)return p.error("Decoding of string type: bmpstr length mismatch");let y="";for(let b=0;b<m.length/2;b++)y+=String.fromCharCode(m.readUInt16BE(2*b));return y}if(g==="numstr"){const m=p.raw().toString("ascii");return this._isNumstr(m)?m:p.error("Decoding of string type: numstr unsupported characters")}if(g==="octstr"||g==="objDesc")return p.raw();if(g==="printstr"){const m=p.raw().toString("ascii");return this._isPrintstr(m)?m:p.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(g)?p.raw().toString():p.error("Decoding of string type: "+g+" unsupported")},d.prototype._decodeObjid=function(p,g,m){let y;const b=[];let v=0,k=0;for(;!p.isEmpty();)k=p.readUInt8(),v<<=7,v|=127&k,!(128&k)&&(b.push(v),v=0);128&k&&b.push(v);const j=b[0]/40|0,I=b[0]%40;if(y=m?b:[j,I].concat(b.slice(1)),g){let U=g[y.join(" ")];U===void 0&&(U=g[y.join(".")]),U!==void 0&&(y=U)}return y},d.prototype._decodeTime=function(p,g){const m=p.raw().toString();let y,b,v,k,j,I;if(g==="gentime")y=0|m.slice(0,4),b=0|m.slice(4,6),v=0|m.slice(6,8),k=0|m.slice(8,10),j=0|m.slice(10,12),I=0|m.slice(12,14);else{if(g!=="utctime")return p.error("Decoding "+g+" time is not supported yet");y=0|m.slice(0,2),b=0|m.slice(2,4),v=0|m.slice(4,6),k=0|m.slice(6,8),j=0|m.slice(8,10),I=0|m.slice(10,12),y=y<70?2e3+y:1900+y}return Date.UTC(y,b-1,v,k,j,I,0)},d.prototype._decodeNull=function(){return null},d.prototype._decodeBool=function(p){const g=p.readUInt8();return p.isError(g)?g:g!==0},d.prototype._decodeInt=function(p,g){const m=p.raw();let y=new o(m);return g&&(y=g[y.toString(10)]||y),y},d.prototype._use=function(p,g){return typeof p=="function"&&(p=p(g)),p._getDecoder("der").tree}},{"../base/buffer":172,"../base/node":174,"../constants/der":176,"bn.js":184,inherits:440}],179:[function(t,r,s){const i=s;i.der=t("./der"),i.pem=t("./pem")},{"./der":178,"./pem":180}],180:[function(t,r,s){const i=t("inherits"),o=t("safer-buffer").Buffer,u=t("./der");function l(a){u.call(this,a),this.enc="pem"}i(l,u),r.exports=l,l.prototype.decode=function(a,c){const d=a.toString().split(/[\r\n]+/g),f=c.label.toUpperCase(),h=/^-----(BEGIN|END) ([^-]+)-----$/;let p=-1,g=-1;for(let b=0;b<d.length;b++){const v=d[b].match(h);if(v!==null&&v[2]===f){if(p!==-1){if(v[1]!=="END")break;g=b;break}if(v[1]!=="BEGIN")break;p=b}}if(p===-1||g===-1)throw new Error("PEM section not found for: "+f);const m=d.slice(p+1,g).join("");m.replace(/[^a-z0-9+/=]+/gi,"");const y=o.from(m,"base64");return u.prototype.decode.call(this,y,c)}},{"./der":178,inherits:440,"safer-buffer":495}],181:[function(t,r,s){const i=t("inherits"),o=t("safer-buffer").Buffer,u=t("../base/node"),l=t("../constants/der");function a(f){this.enc="der",this.name=f.name,this.entity=f,this.tree=new c,this.tree._init(f.body)}function c(f){u.call(this,"der",f)}function d(f){return f<10?"0"+f:f}r.exports=a,a.prototype.encode=function(f,h){return this.tree._encode(f,h).join()},i(c,u),c.prototype._encodeComposite=function(f,h,p,g){const m=function(v,k,j,I){let U;if(v==="seqof"?v="seq":v==="setof"&&(v="set"),l.tagByName.hasOwnProperty(v))U=l.tagByName[v];else{if(typeof v!="number"||(0|v)!==v)return I.error("Unknown tag: "+v);U=v}return U>=31?I.error("Multi-octet tag encoding unsupported"):(k||(U|=32),U|=l.tagClassByName[j||"universal"]<<6,U)}(f,h,p,this.reporter);if(g.length<128){const v=o.alloc(2);return v[0]=m,v[1]=g.length,this._createEncoderBuffer([v,g])}let y=1;for(let v=g.length;v>=256;v>>=8)y++;const b=o.alloc(2+y);b[0]=m,b[1]=128|y;for(let v=1+y,k=g.length;k>0;v--,k>>=8)b[v]=255&k;return this._createEncoderBuffer([b,g])},c.prototype._encodeStr=function(f,h){if(h==="bitstr")return this._createEncoderBuffer([0|f.unused,f.data]);if(h==="bmpstr"){const p=o.alloc(2*f.length);for(let g=0;g<f.length;g++)p.writeUInt16BE(f.charCodeAt(g),2*g);return this._createEncoderBuffer(p)}return h==="numstr"?this._isNumstr(f)?this._createEncoderBuffer(f):this.reporter.error("Encoding of string type: numstr supports only digits and space"):h==="printstr"?this._isPrintstr(f)?this._createEncoderBuffer(f):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(h)||h==="objDesc"?this._createEncoderBuffer(f):this.reporter.error("Encoding of string type: "+h+" unsupported")},c.prototype._encodeObjid=function(f,h,p){if(typeof f=="string"){if(!h)return this.reporter.error("string objid given, but no values map found");if(!h.hasOwnProperty(f))return this.reporter.error("objid not found in values map");f=h[f].split(/[\s.]+/g);for(let b=0;b<f.length;b++)f[b]|=0}else if(Array.isArray(f)){f=f.slice();for(let b=0;b<f.length;b++)f[b]|=0}if(!Array.isArray(f))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(f));if(!p){if(f[1]>=40)return this.reporter.error("Second objid identifier OOB");f.splice(0,2,40*f[0]+f[1])}let g=0;for(let b=0;b<f.length;b++){let v=f[b];for(g++;v>=128;v>>=7)g++}const m=o.alloc(g);let y=m.length-1;for(let b=f.length-1;b>=0;b--){let v=f[b];for(m[y--]=127&v;(v>>=7)>0;)m[y--]=128|127&v}return this._createEncoderBuffer(m)},c.prototype._encodeTime=function(f,h){let p;const g=new Date(f);return h==="gentime"?p=[d(g.getUTCFullYear()),d(g.getUTCMonth()+1),d(g.getUTCDate()),d(g.getUTCHours()),d(g.getUTCMinutes()),d(g.getUTCSeconds()),"Z"].join(""):h==="utctime"?p=[d(g.getUTCFullYear()%100),d(g.getUTCMonth()+1),d(g.getUTCDate()),d(g.getUTCHours()),d(g.getUTCMinutes()),d(g.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+h+" time is not supported yet"),this._encodeStr(p,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(f,h){if(typeof f=="string"){if(!h)return this.reporter.error("String int or enum given, but no values map");if(!h.hasOwnProperty(f))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(f));f=h[f]}if(typeof f!="number"&&!o.isBuffer(f)){const m=f.toArray();!f.sign&&128&m[0]&&m.unshift(0),f=o.from(m)}if(o.isBuffer(f)){let m=f.length;f.length===0&&m++;const y=o.alloc(m);return f.copy(y),f.length===0&&(y[0]=0),this._createEncoderBuffer(y)}if(f<128)return this._createEncoderBuffer(f);if(f<256)return this._createEncoderBuffer([0,f]);let p=1;for(let m=f;m>=256;m>>=8)p++;const g=new Array(p);for(let m=g.length-1;m>=0;m--)g[m]=255&f,f>>=8;return 128&g[0]&&g.unshift(0),this._createEncoderBuffer(o.from(g))},c.prototype._encodeBool=function(f){return this._createEncoderBuffer(f?255:0)},c.prototype._use=function(f,h){return typeof f=="function"&&(f=f(h)),f._getEncoder("der").tree},c.prototype._skipDefault=function(f,h,p){const g=this._baseState;let m;if(g.default===null)return!1;const y=f.join();if(g.defaultBuffer===void 0&&(g.defaultBuffer=this._encodeValue(g.default,h,p).join()),y.length!==g.defaultBuffer.length)return!1;for(m=0;m<y.length;m++)if(y[m]!==g.defaultBuffer[m])return!1;return!0}},{"../base/node":174,"../constants/der":176,inherits:440,"safer-buffer":495}],182:[function(t,r,s){const i=s;i.der=t("./der"),i.pem=t("./pem")},{"./der":181,"./pem":183}],183:[function(t,r,s){const i=t("inherits"),o=t("./der");function u(l){o.call(this,l),this.enc="pem"}i(u,o),r.exports=u,u.prototype.encode=function(l,a){const c=o.prototype.encode.call(this,l).toString("base64"),d=["-----BEGIN "+a.label+"-----"];for(let f=0;f<c.length;f+=64)d.push(c.slice(f,f+64));return d.push("-----END "+a.label+"-----"),d.join(`
`)}},{"./der":181,inherits:440}],184:[function(t,r,s){(function(i,o){function u(T,N){if(!T)throw new Error(N||"Assertion failed")}function l(T,N){T.super_=N;var C=function(){};C.prototype=N.prototype,T.prototype=new C,T.prototype.constructor=T}function a(T,N,C){if(a.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&(N!=="le"&&N!=="be"||(C=N,N=10),this._init(T||0,N||10,C||"be"))}var c;typeof i=="object"?i.exports=a:(void 0).BN=a,a.BN=a,a.wordSize=26;try{c=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t("buffer").Buffer}catch{}function d(T,N){var C=T.charCodeAt(N);return C>=65&&C<=70?C-55:C>=97&&C<=102?C-87:C-48&15}function f(T,N,C){var w=d(T,C);return C-1>=N&&(w|=d(T,C-1)<<4),w}function h(T,N,C,w){for(var _=0,x=Math.min(T.length,C),S=N;S<x;S++){var A=T.charCodeAt(S)-48;_*=w,_+=A>=49?A-49+10:A>=17?A-17+10:A}return _}a.isBN=function(T){return T instanceof a||T!==null&&typeof T=="object"&&T.constructor.wordSize===a.wordSize&&Array.isArray(T.words)},a.max=function(T,N){return T.cmp(N)>0?T:N},a.min=function(T,N){return T.cmp(N)<0?T:N},a.prototype._init=function(T,N,C){if(typeof T=="number")return this._initNumber(T,N,C);if(typeof T=="object")return this._initArray(T,N,C);N==="hex"&&(N=16),u(N===(0|N)&&N>=2&&N<=36);var w=0;(T=T.toString().replace(/\s+/g,""))[0]==="-"&&(w++,this.negative=1),w<T.length&&(N===16?this._parseHex(T,w,C):(this._parseBase(T,N,w),C==="le"&&this._initArray(this.toArray(),N,C)))},a.prototype._initNumber=function(T,N,C){T<0&&(this.negative=1,T=-T),T<67108864?(this.words=[67108863&T],this.length=1):T<4503599627370496?(this.words=[67108863&T,T/67108864&67108863],this.length=2):(u(T<9007199254740992),this.words=[67108863&T,T/67108864&67108863,1],this.length=3),C==="le"&&this._initArray(this.toArray(),N,C)},a.prototype._initArray=function(T,N,C){if(u(typeof T.length=="number"),T.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(T.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var _,x,S=0;if(C==="be")for(w=T.length-1,_=0;w>=0;w-=3)x=T[w]|T[w-1]<<8|T[w-2]<<16,this.words[_]|=x<<S&67108863,this.words[_+1]=x>>>26-S&67108863,(S+=24)>=26&&(S-=26,_++);else if(C==="le")for(w=0,_=0;w<T.length;w+=3)x=T[w]|T[w+1]<<8|T[w+2]<<16,this.words[_]|=x<<S&67108863,this.words[_+1]=x>>>26-S&67108863,(S+=24)>=26&&(S-=26,_++);return this.strip()},a.prototype._parseHex=function(T,N,C){this.length=Math.ceil((T.length-N)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var _,x=0,S=0;if(C==="be")for(w=T.length-1;w>=N;w-=2)_=f(T,N,w)<<x,this.words[S]|=67108863&_,x>=18?(x-=18,S+=1,this.words[S]|=_>>>26):x+=8;else for(w=(T.length-N)%2==0?N+1:N;w<T.length;w+=2)_=f(T,N,w)<<x,this.words[S]|=67108863&_,x>=18?(x-=18,S+=1,this.words[S]|=_>>>26):x+=8;this.strip()},a.prototype._parseBase=function(T,N,C){this.words=[0],this.length=1;for(var w=0,_=1;_<=67108863;_*=N)w++;w--,_=_/N|0;for(var x=T.length-C,S=x%w,A=Math.min(x,x-S)+C,B=0,E=C;E<A;E+=w)B=h(T,E,E+w,N),this.imuln(_),this.words[0]+B<67108864?this.words[0]+=B:this._iaddn(B);if(S!==0){var V=1;for(B=h(T,E,T.length,N),E=0;E<S;E++)V*=N;this.imuln(V),this.words[0]+B<67108864?this.words[0]+=B:this._iaddn(B)}this.strip()},a.prototype.copy=function(T){T.words=new Array(this.length);for(var N=0;N<this.length;N++)T.words[N]=this.words[N];T.length=this.length,T.negative=this.negative,T.red=this.red},a.prototype.clone=function(){var T=new a(null);return this.copy(T),T},a.prototype._expand=function(T){for(;this.length<T;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function y(T,N,C){C.negative=N.negative^T.negative;var w=T.length+N.length|0;C.length=w,w=w-1|0;var _=0|T.words[0],x=0|N.words[0],S=_*x,A=67108863&S,B=S/67108864|0;C.words[0]=A;for(var E=1;E<w;E++){for(var V=B>>>26,X=67108863&B,Q=Math.min(E,N.length-1),D=Math.max(0,E-T.length+1);D<=Q;D++){var Z=E-D|0;V+=(S=(_=0|T.words[Z])*(x=0|N.words[D])+X)/67108864|0,X=67108863&S}C.words[E]=0|X,B=0|V}return B!==0?C.words[E]=0|B:C.length--,C.strip()}a.prototype.toString=function(T,N){var C;if(N=0|N||1,(T=T||10)===16||T==="hex"){C="";for(var w=0,_=0,x=0;x<this.length;x++){var S=this.words[x],A=(16777215&(S<<w|_)).toString(16);C=(_=S>>>24-w&16777215)!==0||x!==this.length-1?p[6-A.length]+A+C:A+C,(w+=2)>=26&&(w-=26,x--)}for(_!==0&&(C=_.toString(16)+C);C.length%N!=0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}if(T===(0|T)&&T>=2&&T<=36){var B=g[T],E=m[T];C="";var V=this.clone();for(V.negative=0;!V.isZero();){var X=V.modn(E).toString(T);C=(V=V.idivn(E)).isZero()?X+C:p[B-X.length]+X+C}for(this.isZero()&&(C="0"+C);C.length%N!=0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}u(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var T=this.words[0];return this.length===2?T+=67108864*this.words[1]:this.length===3&&this.words[2]===1?T+=4503599627370496+67108864*this.words[1]:this.length>2&&u(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-T:T},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(T,N){return u(c!==void 0),this.toArrayLike(c,T,N)},a.prototype.toArray=function(T,N){return this.toArrayLike(Array,T,N)},a.prototype.toArrayLike=function(T,N,C){var w=this.byteLength(),_=C||Math.max(1,w);u(w<=_,"byte array longer than desired length"),u(_>0,"Requested array length <= 0"),this.strip();var x,S,A=N==="le",B=new T(_),E=this.clone();if(A){for(S=0;!E.isZero();S++)x=E.andln(255),E.iushrn(8),B[S]=x;for(;S<_;S++)B[S]=0}else{for(S=0;S<_-w;S++)B[S]=0;for(S=0;!E.isZero();S++)x=E.andln(255),E.iushrn(8),B[_-S-1]=x}return B},Math.clz32?a.prototype._countBits=function(T){return 32-Math.clz32(T)}:a.prototype._countBits=function(T){var N=T,C=0;return N>=4096&&(C+=13,N>>>=13),N>=64&&(C+=7,N>>>=7),N>=8&&(C+=4,N>>>=4),N>=2&&(C+=2,N>>>=2),C+N},a.prototype._zeroBits=function(T){if(T===0)return 26;var N=T,C=0;return!(8191&N)&&(C+=13,N>>>=13),!(127&N)&&(C+=7,N>>>=7),!(15&N)&&(C+=4,N>>>=4),!(3&N)&&(C+=2,N>>>=2),!(1&N)&&C++,C},a.prototype.bitLength=function(){var T=this.words[this.length-1],N=this._countBits(T);return 26*(this.length-1)+N},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var T=0,N=0;N<this.length;N++){var C=this._zeroBits(this.words[N]);if(T+=C,C!==26)break}return T},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(T){return this.negative!==0?this.abs().inotn(T).iaddn(1):this.clone()},a.prototype.fromTwos=function(T){return this.testn(T-1)?this.notn(T).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(T){for(;this.length<T.length;)this.words[this.length++]=0;for(var N=0;N<T.length;N++)this.words[N]=this.words[N]|T.words[N];return this.strip()},a.prototype.ior=function(T){return u((this.negative|T.negative)==0),this.iuor(T)},a.prototype.or=function(T){return this.length>T.length?this.clone().ior(T):T.clone().ior(this)},a.prototype.uor=function(T){return this.length>T.length?this.clone().iuor(T):T.clone().iuor(this)},a.prototype.iuand=function(T){var N;N=this.length>T.length?T:this;for(var C=0;C<N.length;C++)this.words[C]=this.words[C]&T.words[C];return this.length=N.length,this.strip()},a.prototype.iand=function(T){return u((this.negative|T.negative)==0),this.iuand(T)},a.prototype.and=function(T){return this.length>T.length?this.clone().iand(T):T.clone().iand(this)},a.prototype.uand=function(T){return this.length>T.length?this.clone().iuand(T):T.clone().iuand(this)},a.prototype.iuxor=function(T){var N,C;this.length>T.length?(N=this,C=T):(N=T,C=this);for(var w=0;w<C.length;w++)this.words[w]=N.words[w]^C.words[w];if(this!==N)for(;w<N.length;w++)this.words[w]=N.words[w];return this.length=N.length,this.strip()},a.prototype.ixor=function(T){return u((this.negative|T.negative)==0),this.iuxor(T)},a.prototype.xor=function(T){return this.length>T.length?this.clone().ixor(T):T.clone().ixor(this)},a.prototype.uxor=function(T){return this.length>T.length?this.clone().iuxor(T):T.clone().iuxor(this)},a.prototype.inotn=function(T){u(typeof T=="number"&&T>=0);var N=0|Math.ceil(T/26),C=T%26;this._expand(N),C>0&&N--;for(var w=0;w<N;w++)this.words[w]=67108863&~this.words[w];return C>0&&(this.words[w]=~this.words[w]&67108863>>26-C),this.strip()},a.prototype.notn=function(T){return this.clone().inotn(T)},a.prototype.setn=function(T,N){u(typeof T=="number"&&T>=0);var C=T/26|0,w=T%26;return this._expand(C+1),this.words[C]=N?this.words[C]|1<<w:this.words[C]&~(1<<w),this.strip()},a.prototype.iadd=function(T){var N,C,w;if(this.negative!==0&&T.negative===0)return this.negative=0,N=this.isub(T),this.negative^=1,this._normSign();if(this.negative===0&&T.negative!==0)return T.negative=0,N=this.isub(T),T.negative=1,N._normSign();this.length>T.length?(C=this,w=T):(C=T,w=this);for(var _=0,x=0;x<w.length;x++)N=(0|C.words[x])+(0|w.words[x])+_,this.words[x]=67108863&N,_=N>>>26;for(;_!==0&&x<C.length;x++)N=(0|C.words[x])+_,this.words[x]=67108863&N,_=N>>>26;if(this.length=C.length,_!==0)this.words[this.length]=_,this.length++;else if(C!==this)for(;x<C.length;x++)this.words[x]=C.words[x];return this},a.prototype.add=function(T){var N;return T.negative!==0&&this.negative===0?(T.negative=0,N=this.sub(T),T.negative^=1,N):T.negative===0&&this.negative!==0?(this.negative=0,N=T.sub(this),this.negative=1,N):this.length>T.length?this.clone().iadd(T):T.clone().iadd(this)},a.prototype.isub=function(T){if(T.negative!==0){T.negative=0;var N=this.iadd(T);return T.negative=1,N._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(T),this.negative=1,this._normSign();var C,w,_=this.cmp(T);if(_===0)return this.negative=0,this.length=1,this.words[0]=0,this;_>0?(C=this,w=T):(C=T,w=this);for(var x=0,S=0;S<w.length;S++)x=(N=(0|C.words[S])-(0|w.words[S])+x)>>26,this.words[S]=67108863&N;for(;x!==0&&S<C.length;S++)x=(N=(0|C.words[S])+x)>>26,this.words[S]=67108863&N;if(x===0&&S<C.length&&C!==this)for(;S<C.length;S++)this.words[S]=C.words[S];return this.length=Math.max(this.length,S),C!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(T){return this.clone().isub(T)};var b=function(T,N,C){var w,_,x,S=T.words,A=N.words,B=C.words,E=0,V=0|S[0],X=8191&V,Q=V>>>13,D=0|S[1],Z=8191&D,L=D>>>13,O=0|S[2],G=8191&O,nt=O>>>13,ct=0|S[3],ot=8191&ct,mt=ct>>>13,pt=0|S[4],st=8191&pt,at=pt>>>13,vt=0|S[5],yt=8191&vt,kt=vt>>>13,St=0|S[6],Tt=8191&St,Lt=St>>>13,Xt=0|S[7],re=8191&Xt,ue=Xt>>>13,ce=0|S[8],de=8191&ce,ve=ce>>>13,Te=0|S[9],ie=8191&Te,ze=Te>>>13,me=0|A[0],ke=8191&me,we=me>>>13,ne=0|A[1],Be=8191&ne,$e=ne>>>13,Or=0|A[2],te=8191&Or,Sr=Or>>>13,br=0|A[3],Ye=8191&br,Ve=br>>>13,er=0|A[4],cr=8191&er,mr=er>>>13,jr=0|A[5],rr=8191&jr,Fe=jr>>>13,Nr=0|A[6],Ue=8191&Nr,Et=Nr>>>13,qt=0|A[7],ee=8191&qt,Ce=qt>>>13,sr=0|A[8],Oe=8191&sr,Je=sr>>>13,Ke=0|A[9],He=8191&Ke,hr=Ke>>>13;C.negative=T.negative^N.negative,C.length=19;var lr=(E+(w=Math.imul(X,ke))|0)+((8191&(_=(_=Math.imul(X,we))+Math.imul(Q,ke)|0))<<13)|0;E=((x=Math.imul(Q,we))+(_>>>13)|0)+(lr>>>26)|0,lr&=67108863,w=Math.imul(Z,ke),_=(_=Math.imul(Z,we))+Math.imul(L,ke)|0,x=Math.imul(L,we);var fr=(E+(w=w+Math.imul(X,Be)|0)|0)+((8191&(_=(_=_+Math.imul(X,$e)|0)+Math.imul(Q,Be)|0))<<13)|0;E=((x=x+Math.imul(Q,$e)|0)+(_>>>13)|0)+(fr>>>26)|0,fr&=67108863,w=Math.imul(G,ke),_=(_=Math.imul(G,we))+Math.imul(nt,ke)|0,x=Math.imul(nt,we),w=w+Math.imul(Z,Be)|0,_=(_=_+Math.imul(Z,$e)|0)+Math.imul(L,Be)|0,x=x+Math.imul(L,$e)|0;var Xr=(E+(w=w+Math.imul(X,te)|0)|0)+((8191&(_=(_=_+Math.imul(X,Sr)|0)+Math.imul(Q,te)|0))<<13)|0;E=((x=x+Math.imul(Q,Sr)|0)+(_>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,w=Math.imul(ot,ke),_=(_=Math.imul(ot,we))+Math.imul(mt,ke)|0,x=Math.imul(mt,we),w=w+Math.imul(G,Be)|0,_=(_=_+Math.imul(G,$e)|0)+Math.imul(nt,Be)|0,x=x+Math.imul(nt,$e)|0,w=w+Math.imul(Z,te)|0,_=(_=_+Math.imul(Z,Sr)|0)+Math.imul(L,te)|0,x=x+Math.imul(L,Sr)|0;var Rr=(E+(w=w+Math.imul(X,Ye)|0)|0)+((8191&(_=(_=_+Math.imul(X,Ve)|0)+Math.imul(Q,Ye)|0))<<13)|0;E=((x=x+Math.imul(Q,Ve)|0)+(_>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,w=Math.imul(st,ke),_=(_=Math.imul(st,we))+Math.imul(at,ke)|0,x=Math.imul(at,we),w=w+Math.imul(ot,Be)|0,_=(_=_+Math.imul(ot,$e)|0)+Math.imul(mt,Be)|0,x=x+Math.imul(mt,$e)|0,w=w+Math.imul(G,te)|0,_=(_=_+Math.imul(G,Sr)|0)+Math.imul(nt,te)|0,x=x+Math.imul(nt,Sr)|0,w=w+Math.imul(Z,Ye)|0,_=(_=_+Math.imul(Z,Ve)|0)+Math.imul(L,Ye)|0,x=x+Math.imul(L,Ve)|0;var en=(E+(w=w+Math.imul(X,cr)|0)|0)+((8191&(_=(_=_+Math.imul(X,mr)|0)+Math.imul(Q,cr)|0))<<13)|0;E=((x=x+Math.imul(Q,mr)|0)+(_>>>13)|0)+(en>>>26)|0,en&=67108863,w=Math.imul(yt,ke),_=(_=Math.imul(yt,we))+Math.imul(kt,ke)|0,x=Math.imul(kt,we),w=w+Math.imul(st,Be)|0,_=(_=_+Math.imul(st,$e)|0)+Math.imul(at,Be)|0,x=x+Math.imul(at,$e)|0,w=w+Math.imul(ot,te)|0,_=(_=_+Math.imul(ot,Sr)|0)+Math.imul(mt,te)|0,x=x+Math.imul(mt,Sr)|0,w=w+Math.imul(G,Ye)|0,_=(_=_+Math.imul(G,Ve)|0)+Math.imul(nt,Ye)|0,x=x+Math.imul(nt,Ve)|0,w=w+Math.imul(Z,cr)|0,_=(_=_+Math.imul(Z,mr)|0)+Math.imul(L,cr)|0,x=x+Math.imul(L,mr)|0;var Qr=(E+(w=w+Math.imul(X,rr)|0)|0)+((8191&(_=(_=_+Math.imul(X,Fe)|0)+Math.imul(Q,rr)|0))<<13)|0;E=((x=x+Math.imul(Q,Fe)|0)+(_>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,w=Math.imul(Tt,ke),_=(_=Math.imul(Tt,we))+Math.imul(Lt,ke)|0,x=Math.imul(Lt,we),w=w+Math.imul(yt,Be)|0,_=(_=_+Math.imul(yt,$e)|0)+Math.imul(kt,Be)|0,x=x+Math.imul(kt,$e)|0,w=w+Math.imul(st,te)|0,_=(_=_+Math.imul(st,Sr)|0)+Math.imul(at,te)|0,x=x+Math.imul(at,Sr)|0,w=w+Math.imul(ot,Ye)|0,_=(_=_+Math.imul(ot,Ve)|0)+Math.imul(mt,Ye)|0,x=x+Math.imul(mt,Ve)|0,w=w+Math.imul(G,cr)|0,_=(_=_+Math.imul(G,mr)|0)+Math.imul(nt,cr)|0,x=x+Math.imul(nt,mr)|0,w=w+Math.imul(Z,rr)|0,_=(_=_+Math.imul(Z,Fe)|0)+Math.imul(L,rr)|0,x=x+Math.imul(L,Fe)|0;var Lr=(E+(w=w+Math.imul(X,Ue)|0)|0)+((8191&(_=(_=_+Math.imul(X,Et)|0)+Math.imul(Q,Ue)|0))<<13)|0;E=((x=x+Math.imul(Q,Et)|0)+(_>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,w=Math.imul(re,ke),_=(_=Math.imul(re,we))+Math.imul(ue,ke)|0,x=Math.imul(ue,we),w=w+Math.imul(Tt,Be)|0,_=(_=_+Math.imul(Tt,$e)|0)+Math.imul(Lt,Be)|0,x=x+Math.imul(Lt,$e)|0,w=w+Math.imul(yt,te)|0,_=(_=_+Math.imul(yt,Sr)|0)+Math.imul(kt,te)|0,x=x+Math.imul(kt,Sr)|0,w=w+Math.imul(st,Ye)|0,_=(_=_+Math.imul(st,Ve)|0)+Math.imul(at,Ye)|0,x=x+Math.imul(at,Ve)|0,w=w+Math.imul(ot,cr)|0,_=(_=_+Math.imul(ot,mr)|0)+Math.imul(mt,cr)|0,x=x+Math.imul(mt,mr)|0,w=w+Math.imul(G,rr)|0,_=(_=_+Math.imul(G,Fe)|0)+Math.imul(nt,rr)|0,x=x+Math.imul(nt,Fe)|0,w=w+Math.imul(Z,Ue)|0,_=(_=_+Math.imul(Z,Et)|0)+Math.imul(L,Ue)|0,x=x+Math.imul(L,Et)|0;var xt=(E+(w=w+Math.imul(X,ee)|0)|0)+((8191&(_=(_=_+Math.imul(X,Ce)|0)+Math.imul(Q,ee)|0))<<13)|0;E=((x=x+Math.imul(Q,Ce)|0)+(_>>>13)|0)+(xt>>>26)|0,xt&=67108863,w=Math.imul(de,ke),_=(_=Math.imul(de,we))+Math.imul(ve,ke)|0,x=Math.imul(ve,we),w=w+Math.imul(re,Be)|0,_=(_=_+Math.imul(re,$e)|0)+Math.imul(ue,Be)|0,x=x+Math.imul(ue,$e)|0,w=w+Math.imul(Tt,te)|0,_=(_=_+Math.imul(Tt,Sr)|0)+Math.imul(Lt,te)|0,x=x+Math.imul(Lt,Sr)|0,w=w+Math.imul(yt,Ye)|0,_=(_=_+Math.imul(yt,Ve)|0)+Math.imul(kt,Ye)|0,x=x+Math.imul(kt,Ve)|0,w=w+Math.imul(st,cr)|0,_=(_=_+Math.imul(st,mr)|0)+Math.imul(at,cr)|0,x=x+Math.imul(at,mr)|0,w=w+Math.imul(ot,rr)|0,_=(_=_+Math.imul(ot,Fe)|0)+Math.imul(mt,rr)|0,x=x+Math.imul(mt,Fe)|0,w=w+Math.imul(G,Ue)|0,_=(_=_+Math.imul(G,Et)|0)+Math.imul(nt,Ue)|0,x=x+Math.imul(nt,Et)|0,w=w+Math.imul(Z,ee)|0,_=(_=_+Math.imul(Z,Ce)|0)+Math.imul(L,ee)|0,x=x+Math.imul(L,Ce)|0;var Yt=(E+(w=w+Math.imul(X,Oe)|0)|0)+((8191&(_=(_=_+Math.imul(X,Je)|0)+Math.imul(Q,Oe)|0))<<13)|0;E=((x=x+Math.imul(Q,Je)|0)+(_>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,w=Math.imul(ie,ke),_=(_=Math.imul(ie,we))+Math.imul(ze,ke)|0,x=Math.imul(ze,we),w=w+Math.imul(de,Be)|0,_=(_=_+Math.imul(de,$e)|0)+Math.imul(ve,Be)|0,x=x+Math.imul(ve,$e)|0,w=w+Math.imul(re,te)|0,_=(_=_+Math.imul(re,Sr)|0)+Math.imul(ue,te)|0,x=x+Math.imul(ue,Sr)|0,w=w+Math.imul(Tt,Ye)|0,_=(_=_+Math.imul(Tt,Ve)|0)+Math.imul(Lt,Ye)|0,x=x+Math.imul(Lt,Ve)|0,w=w+Math.imul(yt,cr)|0,_=(_=_+Math.imul(yt,mr)|0)+Math.imul(kt,cr)|0,x=x+Math.imul(kt,mr)|0,w=w+Math.imul(st,rr)|0,_=(_=_+Math.imul(st,Fe)|0)+Math.imul(at,rr)|0,x=x+Math.imul(at,Fe)|0,w=w+Math.imul(ot,Ue)|0,_=(_=_+Math.imul(ot,Et)|0)+Math.imul(mt,Ue)|0,x=x+Math.imul(mt,Et)|0,w=w+Math.imul(G,ee)|0,_=(_=_+Math.imul(G,Ce)|0)+Math.imul(nt,ee)|0,x=x+Math.imul(nt,Ce)|0,w=w+Math.imul(Z,Oe)|0,_=(_=_+Math.imul(Z,Je)|0)+Math.imul(L,Oe)|0,x=x+Math.imul(L,Je)|0;var he=(E+(w=w+Math.imul(X,He)|0)|0)+((8191&(_=(_=_+Math.imul(X,hr)|0)+Math.imul(Q,He)|0))<<13)|0;E=((x=x+Math.imul(Q,hr)|0)+(_>>>13)|0)+(he>>>26)|0,he&=67108863,w=Math.imul(ie,Be),_=(_=Math.imul(ie,$e))+Math.imul(ze,Be)|0,x=Math.imul(ze,$e),w=w+Math.imul(de,te)|0,_=(_=_+Math.imul(de,Sr)|0)+Math.imul(ve,te)|0,x=x+Math.imul(ve,Sr)|0,w=w+Math.imul(re,Ye)|0,_=(_=_+Math.imul(re,Ve)|0)+Math.imul(ue,Ye)|0,x=x+Math.imul(ue,Ve)|0,w=w+Math.imul(Tt,cr)|0,_=(_=_+Math.imul(Tt,mr)|0)+Math.imul(Lt,cr)|0,x=x+Math.imul(Lt,mr)|0,w=w+Math.imul(yt,rr)|0,_=(_=_+Math.imul(yt,Fe)|0)+Math.imul(kt,rr)|0,x=x+Math.imul(kt,Fe)|0,w=w+Math.imul(st,Ue)|0,_=(_=_+Math.imul(st,Et)|0)+Math.imul(at,Ue)|0,x=x+Math.imul(at,Et)|0,w=w+Math.imul(ot,ee)|0,_=(_=_+Math.imul(ot,Ce)|0)+Math.imul(mt,ee)|0,x=x+Math.imul(mt,Ce)|0,w=w+Math.imul(G,Oe)|0,_=(_=_+Math.imul(G,Je)|0)+Math.imul(nt,Oe)|0,x=x+Math.imul(nt,Je)|0;var ge=(E+(w=w+Math.imul(Z,He)|0)|0)+((8191&(_=(_=_+Math.imul(Z,hr)|0)+Math.imul(L,He)|0))<<13)|0;E=((x=x+Math.imul(L,hr)|0)+(_>>>13)|0)+(ge>>>26)|0,ge&=67108863,w=Math.imul(ie,te),_=(_=Math.imul(ie,Sr))+Math.imul(ze,te)|0,x=Math.imul(ze,Sr),w=w+Math.imul(de,Ye)|0,_=(_=_+Math.imul(de,Ve)|0)+Math.imul(ve,Ye)|0,x=x+Math.imul(ve,Ve)|0,w=w+Math.imul(re,cr)|0,_=(_=_+Math.imul(re,mr)|0)+Math.imul(ue,cr)|0,x=x+Math.imul(ue,mr)|0,w=w+Math.imul(Tt,rr)|0,_=(_=_+Math.imul(Tt,Fe)|0)+Math.imul(Lt,rr)|0,x=x+Math.imul(Lt,Fe)|0,w=w+Math.imul(yt,Ue)|0,_=(_=_+Math.imul(yt,Et)|0)+Math.imul(kt,Ue)|0,x=x+Math.imul(kt,Et)|0,w=w+Math.imul(st,ee)|0,_=(_=_+Math.imul(st,Ce)|0)+Math.imul(at,ee)|0,x=x+Math.imul(at,Ce)|0,w=w+Math.imul(ot,Oe)|0,_=(_=_+Math.imul(ot,Je)|0)+Math.imul(mt,Oe)|0,x=x+Math.imul(mt,Je)|0;var Ze=(E+(w=w+Math.imul(G,He)|0)|0)+((8191&(_=(_=_+Math.imul(G,hr)|0)+Math.imul(nt,He)|0))<<13)|0;E=((x=x+Math.imul(nt,hr)|0)+(_>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,w=Math.imul(ie,Ye),_=(_=Math.imul(ie,Ve))+Math.imul(ze,Ye)|0,x=Math.imul(ze,Ve),w=w+Math.imul(de,cr)|0,_=(_=_+Math.imul(de,mr)|0)+Math.imul(ve,cr)|0,x=x+Math.imul(ve,mr)|0,w=w+Math.imul(re,rr)|0,_=(_=_+Math.imul(re,Fe)|0)+Math.imul(ue,rr)|0,x=x+Math.imul(ue,Fe)|0,w=w+Math.imul(Tt,Ue)|0,_=(_=_+Math.imul(Tt,Et)|0)+Math.imul(Lt,Ue)|0,x=x+Math.imul(Lt,Et)|0,w=w+Math.imul(yt,ee)|0,_=(_=_+Math.imul(yt,Ce)|0)+Math.imul(kt,ee)|0,x=x+Math.imul(kt,Ce)|0,w=w+Math.imul(st,Oe)|0,_=(_=_+Math.imul(st,Je)|0)+Math.imul(at,Oe)|0,x=x+Math.imul(at,Je)|0;var je=(E+(w=w+Math.imul(ot,He)|0)|0)+((8191&(_=(_=_+Math.imul(ot,hr)|0)+Math.imul(mt,He)|0))<<13)|0;E=((x=x+Math.imul(mt,hr)|0)+(_>>>13)|0)+(je>>>26)|0,je&=67108863,w=Math.imul(ie,cr),_=(_=Math.imul(ie,mr))+Math.imul(ze,cr)|0,x=Math.imul(ze,mr),w=w+Math.imul(de,rr)|0,_=(_=_+Math.imul(de,Fe)|0)+Math.imul(ve,rr)|0,x=x+Math.imul(ve,Fe)|0,w=w+Math.imul(re,Ue)|0,_=(_=_+Math.imul(re,Et)|0)+Math.imul(ue,Ue)|0,x=x+Math.imul(ue,Et)|0,w=w+Math.imul(Tt,ee)|0,_=(_=_+Math.imul(Tt,Ce)|0)+Math.imul(Lt,ee)|0,x=x+Math.imul(Lt,Ce)|0,w=w+Math.imul(yt,Oe)|0,_=(_=_+Math.imul(yt,Je)|0)+Math.imul(kt,Oe)|0,x=x+Math.imul(kt,Je)|0;var Pe=(E+(w=w+Math.imul(st,He)|0)|0)+((8191&(_=(_=_+Math.imul(st,hr)|0)+Math.imul(at,He)|0))<<13)|0;E=((x=x+Math.imul(at,hr)|0)+(_>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,w=Math.imul(ie,rr),_=(_=Math.imul(ie,Fe))+Math.imul(ze,rr)|0,x=Math.imul(ze,Fe),w=w+Math.imul(de,Ue)|0,_=(_=_+Math.imul(de,Et)|0)+Math.imul(ve,Ue)|0,x=x+Math.imul(ve,Et)|0,w=w+Math.imul(re,ee)|0,_=(_=_+Math.imul(re,Ce)|0)+Math.imul(ue,ee)|0,x=x+Math.imul(ue,Ce)|0,w=w+Math.imul(Tt,Oe)|0,_=(_=_+Math.imul(Tt,Je)|0)+Math.imul(Lt,Oe)|0,x=x+Math.imul(Lt,Je)|0;var Ar=(E+(w=w+Math.imul(yt,He)|0)|0)+((8191&(_=(_=_+Math.imul(yt,hr)|0)+Math.imul(kt,He)|0))<<13)|0;E=((x=x+Math.imul(kt,hr)|0)+(_>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,w=Math.imul(ie,Ue),_=(_=Math.imul(ie,Et))+Math.imul(ze,Ue)|0,x=Math.imul(ze,Et),w=w+Math.imul(de,ee)|0,_=(_=_+Math.imul(de,Ce)|0)+Math.imul(ve,ee)|0,x=x+Math.imul(ve,Ce)|0,w=w+Math.imul(re,Oe)|0,_=(_=_+Math.imul(re,Je)|0)+Math.imul(ue,Oe)|0,x=x+Math.imul(ue,Je)|0;var wr=(E+(w=w+Math.imul(Tt,He)|0)|0)+((8191&(_=(_=_+Math.imul(Tt,hr)|0)+Math.imul(Lt,He)|0))<<13)|0;E=((x=x+Math.imul(Lt,hr)|0)+(_>>>13)|0)+(wr>>>26)|0,wr&=67108863,w=Math.imul(ie,ee),_=(_=Math.imul(ie,Ce))+Math.imul(ze,ee)|0,x=Math.imul(ze,Ce),w=w+Math.imul(de,Oe)|0,_=(_=_+Math.imul(de,Je)|0)+Math.imul(ve,Oe)|0,x=x+Math.imul(ve,Je)|0;var kr=(E+(w=w+Math.imul(re,He)|0)|0)+((8191&(_=(_=_+Math.imul(re,hr)|0)+Math.imul(ue,He)|0))<<13)|0;E=((x=x+Math.imul(ue,hr)|0)+(_>>>13)|0)+(kr>>>26)|0,kr&=67108863,w=Math.imul(ie,Oe),_=(_=Math.imul(ie,Je))+Math.imul(ze,Oe)|0,x=Math.imul(ze,Je);var ur=(E+(w=w+Math.imul(de,He)|0)|0)+((8191&(_=(_=_+Math.imul(de,hr)|0)+Math.imul(ve,He)|0))<<13)|0;E=((x=x+Math.imul(ve,hr)|0)+(_>>>13)|0)+(ur>>>26)|0,ur&=67108863;var Qe=(E+(w=Math.imul(ie,He))|0)+((8191&(_=(_=Math.imul(ie,hr))+Math.imul(ze,He)|0))<<13)|0;return E=((x=Math.imul(ze,hr))+(_>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,B[0]=lr,B[1]=fr,B[2]=Xr,B[3]=Rr,B[4]=en,B[5]=Qr,B[6]=Lr,B[7]=xt,B[8]=Yt,B[9]=he,B[10]=ge,B[11]=Ze,B[12]=je,B[13]=Pe,B[14]=Ar,B[15]=wr,B[16]=kr,B[17]=ur,B[18]=Qe,E!==0&&(B[19]=E,C.length++),C};function v(T,N,C){return new k().mulp(T,N,C)}function k(T,N){this.x=T,this.y=N}Math.imul||(b=y),a.prototype.mulTo=function(T,N){var C=this.length+T.length;return this.length===10&&T.length===10?b(this,T,N):C<63?y(this,T,N):C<1024?function(w,_,x){x.negative=_.negative^w.negative,x.length=w.length+_.length;for(var S=0,A=0,B=0;B<x.length-1;B++){var E=A;A=0;for(var V=67108863&S,X=Math.min(B,_.length-1),Q=Math.max(0,B-w.length+1);Q<=X;Q++){var D=B-Q,Z=(0|w.words[D])*(0|_.words[Q]),L=67108863&Z;V=67108863&(L=L+V|0),A+=(E=(E=E+(Z/67108864|0)|0)+(L>>>26)|0)>>>26,E&=67108863}x.words[B]=V,S=E,E=A}return S!==0?x.words[B]=S:x.length--,x.strip()}(this,T,N):v(this,T,N)},k.prototype.makeRBT=function(T){for(var N=new Array(T),C=a.prototype._countBits(T)-1,w=0;w<T;w++)N[w]=this.revBin(w,C,T);return N},k.prototype.revBin=function(T,N,C){if(T===0||T===C-1)return T;for(var w=0,_=0;_<N;_++)w|=(1&T)<<N-_-1,T>>=1;return w},k.prototype.permute=function(T,N,C,w,_,x){for(var S=0;S<x;S++)w[S]=N[T[S]],_[S]=C[T[S]]},k.prototype.transform=function(T,N,C,w,_,x){this.permute(x,T,N,C,w,_);for(var S=1;S<_;S<<=1)for(var A=S<<1,B=Math.cos(2*Math.PI/A),E=Math.sin(2*Math.PI/A),V=0;V<_;V+=A)for(var X=B,Q=E,D=0;D<S;D++){var Z=C[V+D],L=w[V+D],O=C[V+D+S],G=w[V+D+S],nt=X*O-Q*G;G=X*G+Q*O,O=nt,C[V+D]=Z+O,w[V+D]=L+G,C[V+D+S]=Z-O,w[V+D+S]=L-G,D!==A&&(nt=B*X-E*Q,Q=B*Q+E*X,X=nt)}},k.prototype.guessLen13b=function(T,N){var C=1|Math.max(N,T),w=1&C,_=0;for(C=C/2|0;C;C>>>=1)_++;return 1<<_+1+w},k.prototype.conjugate=function(T,N,C){if(!(C<=1))for(var w=0;w<C/2;w++){var _=T[w];T[w]=T[C-w-1],T[C-w-1]=_,_=N[w],N[w]=-N[C-w-1],N[C-w-1]=-_}},k.prototype.normalize13b=function(T,N){for(var C=0,w=0;w<N/2;w++){var _=8192*Math.round(T[2*w+1]/N)+Math.round(T[2*w]/N)+C;T[w]=67108863&_,C=_<67108864?0:_/67108864|0}return T},k.prototype.convert13b=function(T,N,C,w){for(var _=0,x=0;x<N;x++)_+=0|T[x],C[2*x]=8191&_,_>>>=13,C[2*x+1]=8191&_,_>>>=13;for(x=2*N;x<w;++x)C[x]=0;u(_===0),u((-8192&_)==0)},k.prototype.stub=function(T){for(var N=new Array(T),C=0;C<T;C++)N[C]=0;return N},k.prototype.mulp=function(T,N,C){var w=2*this.guessLen13b(T.length,N.length),_=this.makeRBT(w),x=this.stub(w),S=new Array(w),A=new Array(w),B=new Array(w),E=new Array(w),V=new Array(w),X=new Array(w),Q=C.words;Q.length=w,this.convert13b(T.words,T.length,S,w),this.convert13b(N.words,N.length,E,w),this.transform(S,x,A,B,w,_),this.transform(E,x,V,X,w,_);for(var D=0;D<w;D++){var Z=A[D]*V[D]-B[D]*X[D];B[D]=A[D]*X[D]+B[D]*V[D],A[D]=Z}return this.conjugate(A,B,w),this.transform(A,B,Q,x,w,_),this.conjugate(Q,x,w),this.normalize13b(Q,w),C.negative=T.negative^N.negative,C.length=T.length+N.length,C.strip()},a.prototype.mul=function(T){var N=new a(null);return N.words=new Array(this.length+T.length),this.mulTo(T,N)},a.prototype.mulf=function(T){var N=new a(null);return N.words=new Array(this.length+T.length),v(this,T,N)},a.prototype.imul=function(T){return this.clone().mulTo(T,this)},a.prototype.imuln=function(T){u(typeof T=="number"),u(T<67108864);for(var N=0,C=0;C<this.length;C++){var w=(0|this.words[C])*T,_=(67108863&w)+(67108863&N);N>>=26,N+=w/67108864|0,N+=_>>>26,this.words[C]=67108863&_}return N!==0&&(this.words[C]=N,this.length++),this},a.prototype.muln=function(T){return this.clone().imuln(T)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(T){var N=function(x){for(var S=new Array(x.bitLength()),A=0;A<S.length;A++){var B=A/26|0,E=A%26;S[A]=(x.words[B]&1<<E)>>>E}return S}(T);if(N.length===0)return new a(1);for(var C=this,w=0;w<N.length&&N[w]===0;w++,C=C.sqr());if(++w<N.length)for(var _=C.sqr();w<N.length;w++,_=_.sqr())N[w]!==0&&(C=C.mul(_));return C},a.prototype.iushln=function(T){u(typeof T=="number"&&T>=0);var N,C=T%26,w=(T-C)/26,_=67108863>>>26-C<<26-C;if(C!==0){var x=0;for(N=0;N<this.length;N++){var S=this.words[N]&_,A=(0|this.words[N])-S<<C;this.words[N]=A|x,x=S>>>26-C}x&&(this.words[N]=x,this.length++)}if(w!==0){for(N=this.length-1;N>=0;N--)this.words[N+w]=this.words[N];for(N=0;N<w;N++)this.words[N]=0;this.length+=w}return this.strip()},a.prototype.ishln=function(T){return u(this.negative===0),this.iushln(T)},a.prototype.iushrn=function(T,N,C){var w;u(typeof T=="number"&&T>=0),w=N?(N-N%26)/26:0;var _=T%26,x=Math.min((T-_)/26,this.length),S=67108863^67108863>>>_<<_,A=C;if(w-=x,w=Math.max(0,w),A){for(var B=0;B<x;B++)A.words[B]=this.words[B];A.length=x}if(x!==0)if(this.length>x)for(this.length-=x,B=0;B<this.length;B++)this.words[B]=this.words[B+x];else this.words[0]=0,this.length=1;var E=0;for(B=this.length-1;B>=0&&(E!==0||B>=w);B--){var V=0|this.words[B];this.words[B]=E<<26-_|V>>>_,E=V&S}return A&&E!==0&&(A.words[A.length++]=E),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(T,N,C){return u(this.negative===0),this.iushrn(T,N,C)},a.prototype.shln=function(T){return this.clone().ishln(T)},a.prototype.ushln=function(T){return this.clone().iushln(T)},a.prototype.shrn=function(T){return this.clone().ishrn(T)},a.prototype.ushrn=function(T){return this.clone().iushrn(T)},a.prototype.testn=function(T){u(typeof T=="number"&&T>=0);var N=T%26,C=(T-N)/26,w=1<<N;return!(this.length<=C)&&!!(this.words[C]&w)},a.prototype.imaskn=function(T){u(typeof T=="number"&&T>=0);var N=T%26,C=(T-N)/26;if(u(this.negative===0,"imaskn works only with positive numbers"),this.length<=C)return this;if(N!==0&&C++,this.length=Math.min(C,this.length),N!==0){var w=67108863^67108863>>>N<<N;this.words[this.length-1]&=w}return this.strip()},a.prototype.maskn=function(T){return this.clone().imaskn(T)},a.prototype.iaddn=function(T){return u(typeof T=="number"),u(T<67108864),T<0?this.isubn(-T):this.negative!==0?this.length===1&&(0|this.words[0])<T?(this.words[0]=T-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(T),this.negative=1,this):this._iaddn(T)},a.prototype._iaddn=function(T){this.words[0]+=T;for(var N=0;N<this.length&&this.words[N]>=67108864;N++)this.words[N]-=67108864,N===this.length-1?this.words[N+1]=1:this.words[N+1]++;return this.length=Math.max(this.length,N+1),this},a.prototype.isubn=function(T){if(u(typeof T=="number"),u(T<67108864),T<0)return this.iaddn(-T);if(this.negative!==0)return this.negative=0,this.iaddn(T),this.negative=1,this;if(this.words[0]-=T,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var N=0;N<this.length&&this.words[N]<0;N++)this.words[N]+=67108864,this.words[N+1]-=1;return this.strip()},a.prototype.addn=function(T){return this.clone().iaddn(T)},a.prototype.subn=function(T){return this.clone().isubn(T)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(T,N,C){var w,_,x=T.length+C;this._expand(x);var S=0;for(w=0;w<T.length;w++){_=(0|this.words[w+C])+S;var A=(0|T.words[w])*N;S=((_-=67108863&A)>>26)-(A/67108864|0),this.words[w+C]=67108863&_}for(;w<this.length-C;w++)S=(_=(0|this.words[w+C])+S)>>26,this.words[w+C]=67108863&_;if(S===0)return this.strip();for(u(S===-1),S=0,w=0;w<this.length;w++)S=(_=-(0|this.words[w])+S)>>26,this.words[w]=67108863&_;return this.negative=1,this.strip()},a.prototype._wordDiv=function(T,N){var C=(this.length,T.length),w=this.clone(),_=T,x=0|_.words[_.length-1];(C=26-this._countBits(x))!==0&&(_=_.ushln(C),w.iushln(C),x=0|_.words[_.length-1]);var S,A=w.length-_.length;if(N!=="mod"){(S=new a(null)).length=A+1,S.words=new Array(S.length);for(var B=0;B<S.length;B++)S.words[B]=0}var E=w.clone()._ishlnsubmul(_,1,A);E.negative===0&&(w=E,S&&(S.words[A]=1));for(var V=A-1;V>=0;V--){var X=67108864*(0|w.words[_.length+V])+(0|w.words[_.length+V-1]);for(X=Math.min(X/x|0,67108863),w._ishlnsubmul(_,X,V);w.negative!==0;)X--,w.negative=0,w._ishlnsubmul(_,1,V),w.isZero()||(w.negative^=1);S&&(S.words[V]=X)}return S&&S.strip(),w.strip(),N!=="div"&&C!==0&&w.iushrn(C),{div:S||null,mod:w}},a.prototype.divmod=function(T,N,C){return u(!T.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:this.negative!==0&&T.negative===0?(x=this.neg().divmod(T,N),N!=="mod"&&(w=x.div.neg()),N!=="div"&&(_=x.mod.neg(),C&&_.negative!==0&&_.iadd(T)),{div:w,mod:_}):this.negative===0&&T.negative!==0?(x=this.divmod(T.neg(),N),N!=="mod"&&(w=x.div.neg()),{div:w,mod:x.mod}):this.negative&T.negative?(x=this.neg().divmod(T.neg(),N),N!=="div"&&(_=x.mod.neg(),C&&_.negative!==0&&_.isub(T)),{div:x.div,mod:_}):T.length>this.length||this.cmp(T)<0?{div:new a(0),mod:this}:T.length===1?N==="div"?{div:this.divn(T.words[0]),mod:null}:N==="mod"?{div:null,mod:new a(this.modn(T.words[0]))}:{div:this.divn(T.words[0]),mod:new a(this.modn(T.words[0]))}:this._wordDiv(T,N);var w,_,x},a.prototype.div=function(T){return this.divmod(T,"div",!1).div},a.prototype.mod=function(T){return this.divmod(T,"mod",!1).mod},a.prototype.umod=function(T){return this.divmod(T,"mod",!0).mod},a.prototype.divRound=function(T){var N=this.divmod(T);if(N.mod.isZero())return N.div;var C=N.div.negative!==0?N.mod.isub(T):N.mod,w=T.ushrn(1),_=T.andln(1),x=C.cmp(w);return x<0||_===1&&x===0?N.div:N.div.negative!==0?N.div.isubn(1):N.div.iaddn(1)},a.prototype.modn=function(T){u(T<=67108863);for(var N=(1<<26)%T,C=0,w=this.length-1;w>=0;w--)C=(N*C+(0|this.words[w]))%T;return C},a.prototype.idivn=function(T){u(T<=67108863);for(var N=0,C=this.length-1;C>=0;C--){var w=(0|this.words[C])+67108864*N;this.words[C]=w/T|0,N=w%T}return this.strip()},a.prototype.divn=function(T){return this.clone().idivn(T)},a.prototype.egcd=function(T){u(T.negative===0),u(!T.isZero());var N=this,C=T.clone();N=N.negative!==0?N.umod(T):N.clone();for(var w=new a(1),_=new a(0),x=new a(0),S=new a(1),A=0;N.isEven()&&C.isEven();)N.iushrn(1),C.iushrn(1),++A;for(var B=C.clone(),E=N.clone();!N.isZero();){for(var V=0,X=1;!(N.words[0]&X)&&V<26;++V,X<<=1);if(V>0)for(N.iushrn(V);V-- >0;)(w.isOdd()||_.isOdd())&&(w.iadd(B),_.isub(E)),w.iushrn(1),_.iushrn(1);for(var Q=0,D=1;!(C.words[0]&D)&&Q<26;++Q,D<<=1);if(Q>0)for(C.iushrn(Q);Q-- >0;)(x.isOdd()||S.isOdd())&&(x.iadd(B),S.isub(E)),x.iushrn(1),S.iushrn(1);N.cmp(C)>=0?(N.isub(C),w.isub(x),_.isub(S)):(C.isub(N),x.isub(w),S.isub(_))}return{a:x,b:S,gcd:C.iushln(A)}},a.prototype._invmp=function(T){u(T.negative===0),u(!T.isZero());var N=this,C=T.clone();N=N.negative!==0?N.umod(T):N.clone();for(var w,_=new a(1),x=new a(0),S=C.clone();N.cmpn(1)>0&&C.cmpn(1)>0;){for(var A=0,B=1;!(N.words[0]&B)&&A<26;++A,B<<=1);if(A>0)for(N.iushrn(A);A-- >0;)_.isOdd()&&_.iadd(S),_.iushrn(1);for(var E=0,V=1;!(C.words[0]&V)&&E<26;++E,V<<=1);if(E>0)for(C.iushrn(E);E-- >0;)x.isOdd()&&x.iadd(S),x.iushrn(1);N.cmp(C)>=0?(N.isub(C),_.isub(x)):(C.isub(N),x.isub(_))}return(w=N.cmpn(1)===0?_:x).cmpn(0)<0&&w.iadd(T),w},a.prototype.gcd=function(T){if(this.isZero())return T.abs();if(T.isZero())return this.abs();var N=this.clone(),C=T.clone();N.negative=0,C.negative=0;for(var w=0;N.isEven()&&C.isEven();w++)N.iushrn(1),C.iushrn(1);for(;;){for(;N.isEven();)N.iushrn(1);for(;C.isEven();)C.iushrn(1);var _=N.cmp(C);if(_<0){var x=N;N=C,C=x}else if(_===0||C.cmpn(1)===0)break;N.isub(C)}return C.iushln(w)},a.prototype.invm=function(T){return this.egcd(T).a.umod(T)},a.prototype.isEven=function(){return(1&this.words[0])==0},a.prototype.isOdd=function(){return(1&this.words[0])==1},a.prototype.andln=function(T){return this.words[0]&T},a.prototype.bincn=function(T){u(typeof T=="number");var N=T%26,C=(T-N)/26,w=1<<N;if(this.length<=C)return this._expand(C+1),this.words[C]|=w,this;for(var _=w,x=C;_!==0&&x<this.length;x++){var S=0|this.words[x];_=(S+=_)>>>26,S&=67108863,this.words[x]=S}return _!==0&&(this.words[x]=_,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(T){var N,C=T<0;if(this.negative!==0&&!C)return-1;if(this.negative===0&&C)return 1;if(this.strip(),this.length>1)N=1;else{C&&(T=-T),u(T<=67108863,"Number is too big");var w=0|this.words[0];N=w===T?0:w<T?-1:1}return this.negative!==0?0|-N:N},a.prototype.cmp=function(T){if(this.negative!==0&&T.negative===0)return-1;if(this.negative===0&&T.negative!==0)return 1;var N=this.ucmp(T);return this.negative!==0?0|-N:N},a.prototype.ucmp=function(T){if(this.length>T.length)return 1;if(this.length<T.length)return-1;for(var N=0,C=this.length-1;C>=0;C--){var w=0|this.words[C],_=0|T.words[C];if(w!==_){w<_?N=-1:w>_&&(N=1);break}}return N},a.prototype.gtn=function(T){return this.cmpn(T)===1},a.prototype.gt=function(T){return this.cmp(T)===1},a.prototype.gten=function(T){return this.cmpn(T)>=0},a.prototype.gte=function(T){return this.cmp(T)>=0},a.prototype.ltn=function(T){return this.cmpn(T)===-1},a.prototype.lt=function(T){return this.cmp(T)===-1},a.prototype.lten=function(T){return this.cmpn(T)<=0},a.prototype.lte=function(T){return this.cmp(T)<=0},a.prototype.eqn=function(T){return this.cmpn(T)===0},a.prototype.eq=function(T){return this.cmp(T)===0},a.red=function(T){return new $(T)},a.prototype.toRed=function(T){return u(!this.red,"Already a number in reduction context"),u(this.negative===0,"red works only with positives"),T.convertTo(this)._forceRed(T)},a.prototype.fromRed=function(){return u(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(T){return this.red=T,this},a.prototype.forceRed=function(T){return u(!this.red,"Already a number in reduction context"),this._forceRed(T)},a.prototype.redAdd=function(T){return u(this.red,"redAdd works only with red numbers"),this.red.add(this,T)},a.prototype.redIAdd=function(T){return u(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,T)},a.prototype.redSub=function(T){return u(this.red,"redSub works only with red numbers"),this.red.sub(this,T)},a.prototype.redISub=function(T){return u(this.red,"redISub works only with red numbers"),this.red.isub(this,T)},a.prototype.redShl=function(T){return u(this.red,"redShl works only with red numbers"),this.red.shl(this,T)},a.prototype.redMul=function(T){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,T),this.red.mul(this,T)},a.prototype.redIMul=function(T){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,T),this.red.imul(this,T)},a.prototype.redSqr=function(){return u(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return u(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return u(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return u(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return u(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(T){return u(this.red&&!T.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,T)};var j={k256:null,p224:null,p192:null,p25519:null};function I(T,N){this.name=T,this.p=new a(N,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function U(){I.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P(){I.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function z(){I.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function q(){I.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function $(T){if(typeof T=="string"){var N=a._prime(T);this.m=N.p,this.prime=N}else u(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}function F(T){$.call(this,T),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}I.prototype._tmp=function(){var T=new a(null);return T.words=new Array(Math.ceil(this.n/13)),T},I.prototype.ireduce=function(T){var N,C=T;do this.split(C,this.tmp),N=(C=(C=this.imulK(C)).iadd(this.tmp)).bitLength();while(N>this.n);var w=N<this.n?-1:C.ucmp(this.p);return w===0?(C.words[0]=0,C.length=1):w>0?C.isub(this.p):C.strip!==void 0?C.strip():C._strip(),C},I.prototype.split=function(T,N){T.iushrn(this.n,0,N)},I.prototype.imulK=function(T){return T.imul(this.k)},l(U,I),U.prototype.split=function(T,N){for(var C=Math.min(T.length,9),w=0;w<C;w++)N.words[w]=T.words[w];if(N.length=C,T.length<=9)return T.words[0]=0,void(T.length=1);var _=T.words[9];for(N.words[N.length++]=4194303&_,w=10;w<T.length;w++){var x=0|T.words[w];T.words[w-10]=(4194303&x)<<4|_>>>22,_=x}_>>>=22,T.words[w-10]=_,_===0&&T.length>10?T.length-=10:T.length-=9},U.prototype.imulK=function(T){T.words[T.length]=0,T.words[T.length+1]=0,T.length+=2;for(var N=0,C=0;C<T.length;C++){var w=0|T.words[C];N+=977*w,T.words[C]=67108863&N,N=64*w+(N/67108864|0)}return T.words[T.length-1]===0&&(T.length--,T.words[T.length-1]===0&&T.length--),T},l(P,I),l(z,I),l(q,I),q.prototype.imulK=function(T){for(var N=0,C=0;C<T.length;C++){var w=19*(0|T.words[C])+N,_=67108863&w;w>>>=26,T.words[C]=_,N=w}return N!==0&&(T.words[T.length++]=N),T},a._prime=function(T){if(j[T])return j[T];var N;if(T==="k256")N=new U;else if(T==="p224")N=new P;else if(T==="p192")N=new z;else{if(T!=="p25519")throw new Error("Unknown prime "+T);N=new q}return j[T]=N,N},$.prototype._verify1=function(T){u(T.negative===0,"red works only with positives"),u(T.red,"red works only with red numbers")},$.prototype._verify2=function(T,N){u((T.negative|N.negative)==0,"red works only with positives"),u(T.red&&T.red===N.red,"red works only with red numbers")},$.prototype.imod=function(T){return this.prime?this.prime.ireduce(T)._forceRed(this):T.umod(this.m)._forceRed(this)},$.prototype.neg=function(T){return T.isZero()?T.clone():this.m.sub(T)._forceRed(this)},$.prototype.add=function(T,N){this._verify2(T,N);var C=T.add(N);return C.cmp(this.m)>=0&&C.isub(this.m),C._forceRed(this)},$.prototype.iadd=function(T,N){this._verify2(T,N);var C=T.iadd(N);return C.cmp(this.m)>=0&&C.isub(this.m),C},$.prototype.sub=function(T,N){this._verify2(T,N);var C=T.sub(N);return C.cmpn(0)<0&&C.iadd(this.m),C._forceRed(this)},$.prototype.isub=function(T,N){this._verify2(T,N);var C=T.isub(N);return C.cmpn(0)<0&&C.iadd(this.m),C},$.prototype.shl=function(T,N){return this._verify1(T),this.imod(T.ushln(N))},$.prototype.imul=function(T,N){return this._verify2(T,N),this.imod(T.imul(N))},$.prototype.mul=function(T,N){return this._verify2(T,N),this.imod(T.mul(N))},$.prototype.isqr=function(T){return this.imul(T,T.clone())},$.prototype.sqr=function(T){return this.mul(T,T)},$.prototype.sqrt=function(T){if(T.isZero())return T.clone();var N=this.m.andln(3);if(u(N%2==1),N===3){var C=this.m.add(new a(1)).iushrn(2);return this.pow(T,C)}for(var w=this.m.subn(1),_=0;!w.isZero()&&w.andln(1)===0;)_++,w.iushrn(1);u(!w.isZero());var x=new a(1).toRed(this),S=x.redNeg(),A=this.m.subn(1).iushrn(1),B=this.m.bitLength();for(B=new a(2*B*B).toRed(this);this.pow(B,A).cmp(S)!==0;)B.redIAdd(S);for(var E=this.pow(B,w),V=this.pow(T,w.addn(1).iushrn(1)),X=this.pow(T,w),Q=_;X.cmp(x)!==0;){for(var D=X,Z=0;D.cmp(x)!==0;Z++)D=D.redSqr();u(Z<Q);var L=this.pow(E,new a(1).iushln(Q-Z-1));V=V.redMul(L),E=L.redSqr(),X=X.redMul(E),Q=Z}return V},$.prototype.invm=function(T){var N=T._invmp(this.m);return N.negative!==0?(N.negative=0,this.imod(N).redNeg()):this.imod(N)},$.prototype.pow=function(T,N){if(N.isZero())return new a(1).toRed(this);if(N.cmpn(1)===0)return T.clone();var C=new Array(16);C[0]=new a(1).toRed(this),C[1]=T;for(var w=2;w<C.length;w++)C[w]=this.mul(C[w-1],T);var _=C[0],x=0,S=0,A=N.bitLength()%26;for(A===0&&(A=26),w=N.length-1;w>=0;w--){for(var B=N.words[w],E=A-1;E>=0;E--){var V=B>>E&1;_!==C[0]&&(_=this.sqr(_)),V!==0||x!==0?(x<<=1,x|=V,(++S===4||w===0&&E===0)&&(_=this.mul(_,C[x]),S=0,x=0)):S=0}A=26}return _},$.prototype.convertTo=function(T){var N=T.umod(this.m);return N===T?N.clone():N},$.prototype.convertFrom=function(T){var N=T.clone();return N.red=null,N},a.mont=function(T){return new F(T)},l(F,$),F.prototype.convertTo=function(T){return this.imod(T.ushln(this.shift))},F.prototype.convertFrom=function(T){var N=this.imod(T.mul(this.rinv));return N.red=null,N},F.prototype.imul=function(T,N){if(T.isZero()||N.isZero())return T.words[0]=0,T.length=1,T;var C=T.imul(N),w=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=C.isub(w).iushrn(this.shift),x=_;return _.cmp(this.m)>=0?x=_.isub(this.m):_.cmpn(0)<0&&(x=_.iadd(this.m)),x._forceRed(this)},F.prototype.mul=function(T,N){if(T.isZero()||N.isZero())return new a(0)._forceRed(this);var C=T.mul(N),w=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=C.isub(w).iushrn(this.shift),x=_;return _.cmp(this.m)>=0?x=_.isub(this.m):_.cmpn(0)<0&&(x=_.iadd(this.m)),x._forceRed(this)},F.prototype.invm=function(T){return this.imod(T._invmp(this.m).mul(this.r2))._forceRed(this)}})(r===void 0||r)},{buffer:188}],185:[function(t,r,s){s.byteLength=function(h){var p=d(h),g=p[0],m=p[1];return 3*(g+m)/4-m},s.toByteArray=function(h){var p,g,m=d(h),y=m[0],b=m[1],v=new u(function(I,U,P){return 3*(U+P)/4-P}(0,y,b)),k=0,j=b>0?y-4:y;for(g=0;g<j;g+=4)p=o[h.charCodeAt(g)]<<18|o[h.charCodeAt(g+1)]<<12|o[h.charCodeAt(g+2)]<<6|o[h.charCodeAt(g+3)],v[k++]=p>>16&255,v[k++]=p>>8&255,v[k++]=255&p;return b===2&&(p=o[h.charCodeAt(g)]<<2|o[h.charCodeAt(g+1)]>>4,v[k++]=255&p),b===1&&(p=o[h.charCodeAt(g)]<<10|o[h.charCodeAt(g+1)]<<4|o[h.charCodeAt(g+2)]>>2,v[k++]=p>>8&255,v[k++]=255&p),v},s.fromByteArray=function(h){for(var p,g=h.length,m=g%3,y=[],b=0,v=g-m;b<v;b+=16383)y.push(f(h,b,b+16383>v?v:b+16383));return m===1?(p=h[g-1],y.push(i[p>>2]+i[p<<4&63]+"==")):m===2&&(p=(h[g-2]<<8)+h[g-1],y.push(i[p>>10]+i[p>>4&63]+i[p<<2&63]+"=")),y.join("")};for(var i=[],o=[],u=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=l.length;a<c;++a)i[a]=l[a],o[l.charCodeAt(a)]=a;function d(h){var p=h.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=h.indexOf("=");return g===-1&&(g=p),[g,g===p?0:4-g%4]}function f(h,p,g){for(var m,y,b=[],v=p;v<g;v+=3)m=(h[v]<<16&16711680)+(h[v+1]<<8&65280)+(255&h[v+2]),b.push(i[(y=m)>>18&63]+i[y>>12&63]+i[y>>6&63]+i[63&y]);return b.join("")}o[45]=62,o[95]=63},{}],186:[function(t,r,s){(function(i,o){function u(C,w){if(!C)throw new Error(w||"Assertion failed")}function l(C,w){C.super_=w;var _=function(){};_.prototype=w.prototype,C.prototype=new _,C.prototype.constructor=C}function a(C,w,_){if(a.isBN(C))return C;this.negative=0,this.words=null,this.length=0,this.red=null,C!==null&&(w!=="le"&&w!=="be"||(_=w,w=10),this._init(C||0,w||10,_||"be"))}var c;typeof i=="object"?i.exports=a:(void 0).BN=a,a.BN=a,a.wordSize=26;try{c=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t("buffer").Buffer}catch{}function d(C,w){var _=C.charCodeAt(w);return _>=48&&_<=57?_-48:_>=65&&_<=70?_-55:_>=97&&_<=102?_-87:void u(!1,"Invalid character in "+C)}function f(C,w,_){var x=d(C,_);return _-1>=w&&(x|=d(C,_-1)<<4),x}function h(C,w,_,x){for(var S=0,A=0,B=Math.min(C.length,_),E=w;E<B;E++){var V=C.charCodeAt(E)-48;S*=x,A=V>=49?V-49+10:V>=17?V-17+10:V,u(V>=0&&A<x,"Invalid character"),S+=A}return S}function p(C,w){C.words=w.words,C.length=w.length,C.negative=w.negative,C.red=w.red}if(a.isBN=function(C){return C instanceof a||C!==null&&typeof C=="object"&&C.constructor.wordSize===a.wordSize&&Array.isArray(C.words)},a.max=function(C,w){return C.cmp(w)>0?C:w},a.min=function(C,w){return C.cmp(w)<0?C:w},a.prototype._init=function(C,w,_){if(typeof C=="number")return this._initNumber(C,w,_);if(typeof C=="object")return this._initArray(C,w,_);w==="hex"&&(w=16),u(w===(0|w)&&w>=2&&w<=36);var x=0;(C=C.toString().replace(/\s+/g,""))[0]==="-"&&(x++,this.negative=1),x<C.length&&(w===16?this._parseHex(C,x,_):(this._parseBase(C,w,x),_==="le"&&this._initArray(this.toArray(),w,_)))},a.prototype._initNumber=function(C,w,_){C<0&&(this.negative=1,C=-C),C<67108864?(this.words=[67108863&C],this.length=1):C<4503599627370496?(this.words=[67108863&C,C/67108864&67108863],this.length=2):(u(C<9007199254740992),this.words=[67108863&C,C/67108864&67108863,1],this.length=3),_==="le"&&this._initArray(this.toArray(),w,_)},a.prototype._initArray=function(C,w,_){if(u(typeof C.length=="number"),C.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(C.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var S,A,B=0;if(_==="be")for(x=C.length-1,S=0;x>=0;x-=3)A=C[x]|C[x-1]<<8|C[x-2]<<16,this.words[S]|=A<<B&67108863,this.words[S+1]=A>>>26-B&67108863,(B+=24)>=26&&(B-=26,S++);else if(_==="le")for(x=0,S=0;x<C.length;x+=3)A=C[x]|C[x+1]<<8|C[x+2]<<16,this.words[S]|=A<<B&67108863,this.words[S+1]=A>>>26-B&67108863,(B+=24)>=26&&(B-=26,S++);return this._strip()},a.prototype._parseHex=function(C,w,_){this.length=Math.ceil((C.length-w)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var S,A=0,B=0;if(_==="be")for(x=C.length-1;x>=w;x-=2)S=f(C,w,x)<<A,this.words[B]|=67108863&S,A>=18?(A-=18,B+=1,this.words[B]|=S>>>26):A+=8;else for(x=(C.length-w)%2==0?w+1:w;x<C.length;x+=2)S=f(C,w,x)<<A,this.words[B]|=67108863&S,A>=18?(A-=18,B+=1,this.words[B]|=S>>>26):A+=8;this._strip()},a.prototype._parseBase=function(C,w,_){this.words=[0],this.length=1;for(var x=0,S=1;S<=67108863;S*=w)x++;x--,S=S/w|0;for(var A=C.length-_,B=A%x,E=Math.min(A,A-B)+_,V=0,X=_;X<E;X+=x)V=h(C,X,X+x,w),this.imuln(S),this.words[0]+V<67108864?this.words[0]+=V:this._iaddn(V);if(B!==0){var Q=1;for(V=h(C,X,C.length,w),X=0;X<B;X++)Q*=w;this.imuln(Q),this.words[0]+V<67108864?this.words[0]+=V:this._iaddn(V)}this._strip()},a.prototype.copy=function(C){C.words=new Array(this.length);for(var w=0;w<this.length;w++)C.words[w]=this.words[w];C.length=this.length,C.negative=this.negative,C.red=this.red},a.prototype._move=function(C){p(C,this)},a.prototype.clone=function(){var C=new a(null);return this.copy(C),C},a.prototype._expand=function(C){for(;this.length<C;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=g}catch{a.prototype.inspect=g}else a.prototype.inspect=g;function g(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],y=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(C,w){var _;if(w=0|w||1,(C=C||10)===16||C==="hex"){_="";for(var x=0,S=0,A=0;A<this.length;A++){var B=this.words[A],E=(16777215&(B<<x|S)).toString(16);S=B>>>24-x&16777215,(x+=2)>=26&&(x-=26,A--),_=S!==0||A!==this.length-1?m[6-E.length]+E+_:E+_}for(S!==0&&(_=S.toString(16)+_);_.length%w!=0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}if(C===(0|C)&&C>=2&&C<=36){var V=y[C],X=b[C];_="";var Q=this.clone();for(Q.negative=0;!Q.isZero();){var D=Q.modrn(X).toString(C);_=(Q=Q.idivn(X)).isZero()?D+_:m[V-D.length]+D+_}for(this.isZero()&&(_="0"+_);_.length%w!=0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}u(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var C=this.words[0];return this.length===2?C+=67108864*this.words[1]:this.length===3&&this.words[2]===1?C+=4503599627370496+67108864*this.words[1]:this.length>2&&u(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-C:C},a.prototype.toJSON=function(){return this.toString(16,2)},c&&(a.prototype.toBuffer=function(C,w){return this.toArrayLike(c,C,w)}),a.prototype.toArray=function(C,w){return this.toArrayLike(Array,C,w)};function v(C,w,_){_.negative=w.negative^C.negative;var x=C.length+w.length|0;_.length=x,x=x-1|0;var S=0|C.words[0],A=0|w.words[0],B=S*A,E=67108863&B,V=B/67108864|0;_.words[0]=E;for(var X=1;X<x;X++){for(var Q=V>>>26,D=67108863&V,Z=Math.min(X,w.length-1),L=Math.max(0,X-C.length+1);L<=Z;L++){var O=X-L|0;Q+=(B=(S=0|C.words[O])*(A=0|w.words[L])+D)/67108864|0,D=67108863&B}_.words[X]=0|D,V=0|Q}return V!==0?_.words[X]=0|V:_.length--,_._strip()}a.prototype.toArrayLike=function(C,w,_){this._strip();var x=this.byteLength(),S=_||Math.max(1,x);u(x<=S,"byte array longer than desired length"),u(S>0,"Requested array length <= 0");var A=function(B,E){return B.allocUnsafe?B.allocUnsafe(E):new B(E)}(C,S);return this["_toArrayLike"+(w==="le"?"LE":"BE")](A,x),A},a.prototype._toArrayLikeLE=function(C,w){for(var _=0,x=0,S=0,A=0;S<this.length;S++){var B=this.words[S]<<A|x;C[_++]=255&B,_<C.length&&(C[_++]=B>>8&255),_<C.length&&(C[_++]=B>>16&255),A===6?(_<C.length&&(C[_++]=B>>24&255),x=0,A=0):(x=B>>>24,A+=2)}if(_<C.length)for(C[_++]=x;_<C.length;)C[_++]=0},a.prototype._toArrayLikeBE=function(C,w){for(var _=C.length-1,x=0,S=0,A=0;S<this.length;S++){var B=this.words[S]<<A|x;C[_--]=255&B,_>=0&&(C[_--]=B>>8&255),_>=0&&(C[_--]=B>>16&255),A===6?(_>=0&&(C[_--]=B>>24&255),x=0,A=0):(x=B>>>24,A+=2)}if(_>=0)for(C[_--]=x;_>=0;)C[_--]=0},Math.clz32?a.prototype._countBits=function(C){return 32-Math.clz32(C)}:a.prototype._countBits=function(C){var w=C,_=0;return w>=4096&&(_+=13,w>>>=13),w>=64&&(_+=7,w>>>=7),w>=8&&(_+=4,w>>>=4),w>=2&&(_+=2,w>>>=2),_+w},a.prototype._zeroBits=function(C){if(C===0)return 26;var w=C,_=0;return!(8191&w)&&(_+=13,w>>>=13),!(127&w)&&(_+=7,w>>>=7),!(15&w)&&(_+=4,w>>>=4),!(3&w)&&(_+=2,w>>>=2),!(1&w)&&_++,_},a.prototype.bitLength=function(){var C=this.words[this.length-1],w=this._countBits(C);return 26*(this.length-1)+w},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var C=0,w=0;w<this.length;w++){var _=this._zeroBits(this.words[w]);if(C+=_,_!==26)break}return C},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(C){return this.negative!==0?this.abs().inotn(C).iaddn(1):this.clone()},a.prototype.fromTwos=function(C){return this.testn(C-1)?this.notn(C).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(C){for(;this.length<C.length;)this.words[this.length++]=0;for(var w=0;w<C.length;w++)this.words[w]=this.words[w]|C.words[w];return this._strip()},a.prototype.ior=function(C){return u((this.negative|C.negative)==0),this.iuor(C)},a.prototype.or=function(C){return this.length>C.length?this.clone().ior(C):C.clone().ior(this)},a.prototype.uor=function(C){return this.length>C.length?this.clone().iuor(C):C.clone().iuor(this)},a.prototype.iuand=function(C){var w;w=this.length>C.length?C:this;for(var _=0;_<w.length;_++)this.words[_]=this.words[_]&C.words[_];return this.length=w.length,this._strip()},a.prototype.iand=function(C){return u((this.negative|C.negative)==0),this.iuand(C)},a.prototype.and=function(C){return this.length>C.length?this.clone().iand(C):C.clone().iand(this)},a.prototype.uand=function(C){return this.length>C.length?this.clone().iuand(C):C.clone().iuand(this)},a.prototype.iuxor=function(C){var w,_;this.length>C.length?(w=this,_=C):(w=C,_=this);for(var x=0;x<_.length;x++)this.words[x]=w.words[x]^_.words[x];if(this!==w)for(;x<w.length;x++)this.words[x]=w.words[x];return this.length=w.length,this._strip()},a.prototype.ixor=function(C){return u((this.negative|C.negative)==0),this.iuxor(C)},a.prototype.xor=function(C){return this.length>C.length?this.clone().ixor(C):C.clone().ixor(this)},a.prototype.uxor=function(C){return this.length>C.length?this.clone().iuxor(C):C.clone().iuxor(this)},a.prototype.inotn=function(C){u(typeof C=="number"&&C>=0);var w=0|Math.ceil(C/26),_=C%26;this._expand(w),_>0&&w--;for(var x=0;x<w;x++)this.words[x]=67108863&~this.words[x];return _>0&&(this.words[x]=~this.words[x]&67108863>>26-_),this._strip()},a.prototype.notn=function(C){return this.clone().inotn(C)},a.prototype.setn=function(C,w){u(typeof C=="number"&&C>=0);var _=C/26|0,x=C%26;return this._expand(_+1),this.words[_]=w?this.words[_]|1<<x:this.words[_]&~(1<<x),this._strip()},a.prototype.iadd=function(C){var w,_,x;if(this.negative!==0&&C.negative===0)return this.negative=0,w=this.isub(C),this.negative^=1,this._normSign();if(this.negative===0&&C.negative!==0)return C.negative=0,w=this.isub(C),C.negative=1,w._normSign();this.length>C.length?(_=this,x=C):(_=C,x=this);for(var S=0,A=0;A<x.length;A++)w=(0|_.words[A])+(0|x.words[A])+S,this.words[A]=67108863&w,S=w>>>26;for(;S!==0&&A<_.length;A++)w=(0|_.words[A])+S,this.words[A]=67108863&w,S=w>>>26;if(this.length=_.length,S!==0)this.words[this.length]=S,this.length++;else if(_!==this)for(;A<_.length;A++)this.words[A]=_.words[A];return this},a.prototype.add=function(C){var w;return C.negative!==0&&this.negative===0?(C.negative=0,w=this.sub(C),C.negative^=1,w):C.negative===0&&this.negative!==0?(this.negative=0,w=C.sub(this),this.negative=1,w):this.length>C.length?this.clone().iadd(C):C.clone().iadd(this)},a.prototype.isub=function(C){if(C.negative!==0){C.negative=0;var w=this.iadd(C);return C.negative=1,w._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(C),this.negative=1,this._normSign();var _,x,S=this.cmp(C);if(S===0)return this.negative=0,this.length=1,this.words[0]=0,this;S>0?(_=this,x=C):(_=C,x=this);for(var A=0,B=0;B<x.length;B++)A=(w=(0|_.words[B])-(0|x.words[B])+A)>>26,this.words[B]=67108863&w;for(;A!==0&&B<_.length;B++)A=(w=(0|_.words[B])+A)>>26,this.words[B]=67108863&w;if(A===0&&B<_.length&&_!==this)for(;B<_.length;B++)this.words[B]=_.words[B];return this.length=Math.max(this.length,B),_!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(C){return this.clone().isub(C)};var k=function(C,w,_){var x,S,A,B=C.words,E=w.words,V=_.words,X=0,Q=0|B[0],D=8191&Q,Z=Q>>>13,L=0|B[1],O=8191&L,G=L>>>13,nt=0|B[2],ct=8191&nt,ot=nt>>>13,mt=0|B[3],pt=8191&mt,st=mt>>>13,at=0|B[4],vt=8191&at,yt=at>>>13,kt=0|B[5],St=8191&kt,Tt=kt>>>13,Lt=0|B[6],Xt=8191&Lt,re=Lt>>>13,ue=0|B[7],ce=8191&ue,de=ue>>>13,ve=0|B[8],Te=8191&ve,ie=ve>>>13,ze=0|B[9],me=8191&ze,ke=ze>>>13,we=0|E[0],ne=8191&we,Be=we>>>13,$e=0|E[1],Or=8191&$e,te=$e>>>13,Sr=0|E[2],br=8191&Sr,Ye=Sr>>>13,Ve=0|E[3],er=8191&Ve,cr=Ve>>>13,mr=0|E[4],jr=8191&mr,rr=mr>>>13,Fe=0|E[5],Nr=8191&Fe,Ue=Fe>>>13,Et=0|E[6],qt=8191&Et,ee=Et>>>13,Ce=0|E[7],sr=8191&Ce,Oe=Ce>>>13,Je=0|E[8],Ke=8191&Je,He=Je>>>13,hr=0|E[9],lr=8191&hr,fr=hr>>>13;_.negative=C.negative^w.negative,_.length=19;var Xr=(X+(x=Math.imul(D,ne))|0)+((8191&(S=(S=Math.imul(D,Be))+Math.imul(Z,ne)|0))<<13)|0;X=((A=Math.imul(Z,Be))+(S>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,x=Math.imul(O,ne),S=(S=Math.imul(O,Be))+Math.imul(G,ne)|0,A=Math.imul(G,Be);var Rr=(X+(x=x+Math.imul(D,Or)|0)|0)+((8191&(S=(S=S+Math.imul(D,te)|0)+Math.imul(Z,Or)|0))<<13)|0;X=((A=A+Math.imul(Z,te)|0)+(S>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,x=Math.imul(ct,ne),S=(S=Math.imul(ct,Be))+Math.imul(ot,ne)|0,A=Math.imul(ot,Be),x=x+Math.imul(O,Or)|0,S=(S=S+Math.imul(O,te)|0)+Math.imul(G,Or)|0,A=A+Math.imul(G,te)|0;var en=(X+(x=x+Math.imul(D,br)|0)|0)+((8191&(S=(S=S+Math.imul(D,Ye)|0)+Math.imul(Z,br)|0))<<13)|0;X=((A=A+Math.imul(Z,Ye)|0)+(S>>>13)|0)+(en>>>26)|0,en&=67108863,x=Math.imul(pt,ne),S=(S=Math.imul(pt,Be))+Math.imul(st,ne)|0,A=Math.imul(st,Be),x=x+Math.imul(ct,Or)|0,S=(S=S+Math.imul(ct,te)|0)+Math.imul(ot,Or)|0,A=A+Math.imul(ot,te)|0,x=x+Math.imul(O,br)|0,S=(S=S+Math.imul(O,Ye)|0)+Math.imul(G,br)|0,A=A+Math.imul(G,Ye)|0;var Qr=(X+(x=x+Math.imul(D,er)|0)|0)+((8191&(S=(S=S+Math.imul(D,cr)|0)+Math.imul(Z,er)|0))<<13)|0;X=((A=A+Math.imul(Z,cr)|0)+(S>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,x=Math.imul(vt,ne),S=(S=Math.imul(vt,Be))+Math.imul(yt,ne)|0,A=Math.imul(yt,Be),x=x+Math.imul(pt,Or)|0,S=(S=S+Math.imul(pt,te)|0)+Math.imul(st,Or)|0,A=A+Math.imul(st,te)|0,x=x+Math.imul(ct,br)|0,S=(S=S+Math.imul(ct,Ye)|0)+Math.imul(ot,br)|0,A=A+Math.imul(ot,Ye)|0,x=x+Math.imul(O,er)|0,S=(S=S+Math.imul(O,cr)|0)+Math.imul(G,er)|0,A=A+Math.imul(G,cr)|0;var Lr=(X+(x=x+Math.imul(D,jr)|0)|0)+((8191&(S=(S=S+Math.imul(D,rr)|0)+Math.imul(Z,jr)|0))<<13)|0;X=((A=A+Math.imul(Z,rr)|0)+(S>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,x=Math.imul(St,ne),S=(S=Math.imul(St,Be))+Math.imul(Tt,ne)|0,A=Math.imul(Tt,Be),x=x+Math.imul(vt,Or)|0,S=(S=S+Math.imul(vt,te)|0)+Math.imul(yt,Or)|0,A=A+Math.imul(yt,te)|0,x=x+Math.imul(pt,br)|0,S=(S=S+Math.imul(pt,Ye)|0)+Math.imul(st,br)|0,A=A+Math.imul(st,Ye)|0,x=x+Math.imul(ct,er)|0,S=(S=S+Math.imul(ct,cr)|0)+Math.imul(ot,er)|0,A=A+Math.imul(ot,cr)|0,x=x+Math.imul(O,jr)|0,S=(S=S+Math.imul(O,rr)|0)+Math.imul(G,jr)|0,A=A+Math.imul(G,rr)|0;var xt=(X+(x=x+Math.imul(D,Nr)|0)|0)+((8191&(S=(S=S+Math.imul(D,Ue)|0)+Math.imul(Z,Nr)|0))<<13)|0;X=((A=A+Math.imul(Z,Ue)|0)+(S>>>13)|0)+(xt>>>26)|0,xt&=67108863,x=Math.imul(Xt,ne),S=(S=Math.imul(Xt,Be))+Math.imul(re,ne)|0,A=Math.imul(re,Be),x=x+Math.imul(St,Or)|0,S=(S=S+Math.imul(St,te)|0)+Math.imul(Tt,Or)|0,A=A+Math.imul(Tt,te)|0,x=x+Math.imul(vt,br)|0,S=(S=S+Math.imul(vt,Ye)|0)+Math.imul(yt,br)|0,A=A+Math.imul(yt,Ye)|0,x=x+Math.imul(pt,er)|0,S=(S=S+Math.imul(pt,cr)|0)+Math.imul(st,er)|0,A=A+Math.imul(st,cr)|0,x=x+Math.imul(ct,jr)|0,S=(S=S+Math.imul(ct,rr)|0)+Math.imul(ot,jr)|0,A=A+Math.imul(ot,rr)|0,x=x+Math.imul(O,Nr)|0,S=(S=S+Math.imul(O,Ue)|0)+Math.imul(G,Nr)|0,A=A+Math.imul(G,Ue)|0;var Yt=(X+(x=x+Math.imul(D,qt)|0)|0)+((8191&(S=(S=S+Math.imul(D,ee)|0)+Math.imul(Z,qt)|0))<<13)|0;X=((A=A+Math.imul(Z,ee)|0)+(S>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,x=Math.imul(ce,ne),S=(S=Math.imul(ce,Be))+Math.imul(de,ne)|0,A=Math.imul(de,Be),x=x+Math.imul(Xt,Or)|0,S=(S=S+Math.imul(Xt,te)|0)+Math.imul(re,Or)|0,A=A+Math.imul(re,te)|0,x=x+Math.imul(St,br)|0,S=(S=S+Math.imul(St,Ye)|0)+Math.imul(Tt,br)|0,A=A+Math.imul(Tt,Ye)|0,x=x+Math.imul(vt,er)|0,S=(S=S+Math.imul(vt,cr)|0)+Math.imul(yt,er)|0,A=A+Math.imul(yt,cr)|0,x=x+Math.imul(pt,jr)|0,S=(S=S+Math.imul(pt,rr)|0)+Math.imul(st,jr)|0,A=A+Math.imul(st,rr)|0,x=x+Math.imul(ct,Nr)|0,S=(S=S+Math.imul(ct,Ue)|0)+Math.imul(ot,Nr)|0,A=A+Math.imul(ot,Ue)|0,x=x+Math.imul(O,qt)|0,S=(S=S+Math.imul(O,ee)|0)+Math.imul(G,qt)|0,A=A+Math.imul(G,ee)|0;var he=(X+(x=x+Math.imul(D,sr)|0)|0)+((8191&(S=(S=S+Math.imul(D,Oe)|0)+Math.imul(Z,sr)|0))<<13)|0;X=((A=A+Math.imul(Z,Oe)|0)+(S>>>13)|0)+(he>>>26)|0,he&=67108863,x=Math.imul(Te,ne),S=(S=Math.imul(Te,Be))+Math.imul(ie,ne)|0,A=Math.imul(ie,Be),x=x+Math.imul(ce,Or)|0,S=(S=S+Math.imul(ce,te)|0)+Math.imul(de,Or)|0,A=A+Math.imul(de,te)|0,x=x+Math.imul(Xt,br)|0,S=(S=S+Math.imul(Xt,Ye)|0)+Math.imul(re,br)|0,A=A+Math.imul(re,Ye)|0,x=x+Math.imul(St,er)|0,S=(S=S+Math.imul(St,cr)|0)+Math.imul(Tt,er)|0,A=A+Math.imul(Tt,cr)|0,x=x+Math.imul(vt,jr)|0,S=(S=S+Math.imul(vt,rr)|0)+Math.imul(yt,jr)|0,A=A+Math.imul(yt,rr)|0,x=x+Math.imul(pt,Nr)|0,S=(S=S+Math.imul(pt,Ue)|0)+Math.imul(st,Nr)|0,A=A+Math.imul(st,Ue)|0,x=x+Math.imul(ct,qt)|0,S=(S=S+Math.imul(ct,ee)|0)+Math.imul(ot,qt)|0,A=A+Math.imul(ot,ee)|0,x=x+Math.imul(O,sr)|0,S=(S=S+Math.imul(O,Oe)|0)+Math.imul(G,sr)|0,A=A+Math.imul(G,Oe)|0;var ge=(X+(x=x+Math.imul(D,Ke)|0)|0)+((8191&(S=(S=S+Math.imul(D,He)|0)+Math.imul(Z,Ke)|0))<<13)|0;X=((A=A+Math.imul(Z,He)|0)+(S>>>13)|0)+(ge>>>26)|0,ge&=67108863,x=Math.imul(me,ne),S=(S=Math.imul(me,Be))+Math.imul(ke,ne)|0,A=Math.imul(ke,Be),x=x+Math.imul(Te,Or)|0,S=(S=S+Math.imul(Te,te)|0)+Math.imul(ie,Or)|0,A=A+Math.imul(ie,te)|0,x=x+Math.imul(ce,br)|0,S=(S=S+Math.imul(ce,Ye)|0)+Math.imul(de,br)|0,A=A+Math.imul(de,Ye)|0,x=x+Math.imul(Xt,er)|0,S=(S=S+Math.imul(Xt,cr)|0)+Math.imul(re,er)|0,A=A+Math.imul(re,cr)|0,x=x+Math.imul(St,jr)|0,S=(S=S+Math.imul(St,rr)|0)+Math.imul(Tt,jr)|0,A=A+Math.imul(Tt,rr)|0,x=x+Math.imul(vt,Nr)|0,S=(S=S+Math.imul(vt,Ue)|0)+Math.imul(yt,Nr)|0,A=A+Math.imul(yt,Ue)|0,x=x+Math.imul(pt,qt)|0,S=(S=S+Math.imul(pt,ee)|0)+Math.imul(st,qt)|0,A=A+Math.imul(st,ee)|0,x=x+Math.imul(ct,sr)|0,S=(S=S+Math.imul(ct,Oe)|0)+Math.imul(ot,sr)|0,A=A+Math.imul(ot,Oe)|0,x=x+Math.imul(O,Ke)|0,S=(S=S+Math.imul(O,He)|0)+Math.imul(G,Ke)|0,A=A+Math.imul(G,He)|0;var Ze=(X+(x=x+Math.imul(D,lr)|0)|0)+((8191&(S=(S=S+Math.imul(D,fr)|0)+Math.imul(Z,lr)|0))<<13)|0;X=((A=A+Math.imul(Z,fr)|0)+(S>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,x=Math.imul(me,Or),S=(S=Math.imul(me,te))+Math.imul(ke,Or)|0,A=Math.imul(ke,te),x=x+Math.imul(Te,br)|0,S=(S=S+Math.imul(Te,Ye)|0)+Math.imul(ie,br)|0,A=A+Math.imul(ie,Ye)|0,x=x+Math.imul(ce,er)|0,S=(S=S+Math.imul(ce,cr)|0)+Math.imul(de,er)|0,A=A+Math.imul(de,cr)|0,x=x+Math.imul(Xt,jr)|0,S=(S=S+Math.imul(Xt,rr)|0)+Math.imul(re,jr)|0,A=A+Math.imul(re,rr)|0,x=x+Math.imul(St,Nr)|0,S=(S=S+Math.imul(St,Ue)|0)+Math.imul(Tt,Nr)|0,A=A+Math.imul(Tt,Ue)|0,x=x+Math.imul(vt,qt)|0,S=(S=S+Math.imul(vt,ee)|0)+Math.imul(yt,qt)|0,A=A+Math.imul(yt,ee)|0,x=x+Math.imul(pt,sr)|0,S=(S=S+Math.imul(pt,Oe)|0)+Math.imul(st,sr)|0,A=A+Math.imul(st,Oe)|0,x=x+Math.imul(ct,Ke)|0,S=(S=S+Math.imul(ct,He)|0)+Math.imul(ot,Ke)|0,A=A+Math.imul(ot,He)|0;var je=(X+(x=x+Math.imul(O,lr)|0)|0)+((8191&(S=(S=S+Math.imul(O,fr)|0)+Math.imul(G,lr)|0))<<13)|0;X=((A=A+Math.imul(G,fr)|0)+(S>>>13)|0)+(je>>>26)|0,je&=67108863,x=Math.imul(me,br),S=(S=Math.imul(me,Ye))+Math.imul(ke,br)|0,A=Math.imul(ke,Ye),x=x+Math.imul(Te,er)|0,S=(S=S+Math.imul(Te,cr)|0)+Math.imul(ie,er)|0,A=A+Math.imul(ie,cr)|0,x=x+Math.imul(ce,jr)|0,S=(S=S+Math.imul(ce,rr)|0)+Math.imul(de,jr)|0,A=A+Math.imul(de,rr)|0,x=x+Math.imul(Xt,Nr)|0,S=(S=S+Math.imul(Xt,Ue)|0)+Math.imul(re,Nr)|0,A=A+Math.imul(re,Ue)|0,x=x+Math.imul(St,qt)|0,S=(S=S+Math.imul(St,ee)|0)+Math.imul(Tt,qt)|0,A=A+Math.imul(Tt,ee)|0,x=x+Math.imul(vt,sr)|0,S=(S=S+Math.imul(vt,Oe)|0)+Math.imul(yt,sr)|0,A=A+Math.imul(yt,Oe)|0,x=x+Math.imul(pt,Ke)|0,S=(S=S+Math.imul(pt,He)|0)+Math.imul(st,Ke)|0,A=A+Math.imul(st,He)|0;var Pe=(X+(x=x+Math.imul(ct,lr)|0)|0)+((8191&(S=(S=S+Math.imul(ct,fr)|0)+Math.imul(ot,lr)|0))<<13)|0;X=((A=A+Math.imul(ot,fr)|0)+(S>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,x=Math.imul(me,er),S=(S=Math.imul(me,cr))+Math.imul(ke,er)|0,A=Math.imul(ke,cr),x=x+Math.imul(Te,jr)|0,S=(S=S+Math.imul(Te,rr)|0)+Math.imul(ie,jr)|0,A=A+Math.imul(ie,rr)|0,x=x+Math.imul(ce,Nr)|0,S=(S=S+Math.imul(ce,Ue)|0)+Math.imul(de,Nr)|0,A=A+Math.imul(de,Ue)|0,x=x+Math.imul(Xt,qt)|0,S=(S=S+Math.imul(Xt,ee)|0)+Math.imul(re,qt)|0,A=A+Math.imul(re,ee)|0,x=x+Math.imul(St,sr)|0,S=(S=S+Math.imul(St,Oe)|0)+Math.imul(Tt,sr)|0,A=A+Math.imul(Tt,Oe)|0,x=x+Math.imul(vt,Ke)|0,S=(S=S+Math.imul(vt,He)|0)+Math.imul(yt,Ke)|0,A=A+Math.imul(yt,He)|0;var Ar=(X+(x=x+Math.imul(pt,lr)|0)|0)+((8191&(S=(S=S+Math.imul(pt,fr)|0)+Math.imul(st,lr)|0))<<13)|0;X=((A=A+Math.imul(st,fr)|0)+(S>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,x=Math.imul(me,jr),S=(S=Math.imul(me,rr))+Math.imul(ke,jr)|0,A=Math.imul(ke,rr),x=x+Math.imul(Te,Nr)|0,S=(S=S+Math.imul(Te,Ue)|0)+Math.imul(ie,Nr)|0,A=A+Math.imul(ie,Ue)|0,x=x+Math.imul(ce,qt)|0,S=(S=S+Math.imul(ce,ee)|0)+Math.imul(de,qt)|0,A=A+Math.imul(de,ee)|0,x=x+Math.imul(Xt,sr)|0,S=(S=S+Math.imul(Xt,Oe)|0)+Math.imul(re,sr)|0,A=A+Math.imul(re,Oe)|0,x=x+Math.imul(St,Ke)|0,S=(S=S+Math.imul(St,He)|0)+Math.imul(Tt,Ke)|0,A=A+Math.imul(Tt,He)|0;var wr=(X+(x=x+Math.imul(vt,lr)|0)|0)+((8191&(S=(S=S+Math.imul(vt,fr)|0)+Math.imul(yt,lr)|0))<<13)|0;X=((A=A+Math.imul(yt,fr)|0)+(S>>>13)|0)+(wr>>>26)|0,wr&=67108863,x=Math.imul(me,Nr),S=(S=Math.imul(me,Ue))+Math.imul(ke,Nr)|0,A=Math.imul(ke,Ue),x=x+Math.imul(Te,qt)|0,S=(S=S+Math.imul(Te,ee)|0)+Math.imul(ie,qt)|0,A=A+Math.imul(ie,ee)|0,x=x+Math.imul(ce,sr)|0,S=(S=S+Math.imul(ce,Oe)|0)+Math.imul(de,sr)|0,A=A+Math.imul(de,Oe)|0,x=x+Math.imul(Xt,Ke)|0,S=(S=S+Math.imul(Xt,He)|0)+Math.imul(re,Ke)|0,A=A+Math.imul(re,He)|0;var kr=(X+(x=x+Math.imul(St,lr)|0)|0)+((8191&(S=(S=S+Math.imul(St,fr)|0)+Math.imul(Tt,lr)|0))<<13)|0;X=((A=A+Math.imul(Tt,fr)|0)+(S>>>13)|0)+(kr>>>26)|0,kr&=67108863,x=Math.imul(me,qt),S=(S=Math.imul(me,ee))+Math.imul(ke,qt)|0,A=Math.imul(ke,ee),x=x+Math.imul(Te,sr)|0,S=(S=S+Math.imul(Te,Oe)|0)+Math.imul(ie,sr)|0,A=A+Math.imul(ie,Oe)|0,x=x+Math.imul(ce,Ke)|0,S=(S=S+Math.imul(ce,He)|0)+Math.imul(de,Ke)|0,A=A+Math.imul(de,He)|0;var ur=(X+(x=x+Math.imul(Xt,lr)|0)|0)+((8191&(S=(S=S+Math.imul(Xt,fr)|0)+Math.imul(re,lr)|0))<<13)|0;X=((A=A+Math.imul(re,fr)|0)+(S>>>13)|0)+(ur>>>26)|0,ur&=67108863,x=Math.imul(me,sr),S=(S=Math.imul(me,Oe))+Math.imul(ke,sr)|0,A=Math.imul(ke,Oe),x=x+Math.imul(Te,Ke)|0,S=(S=S+Math.imul(Te,He)|0)+Math.imul(ie,Ke)|0,A=A+Math.imul(ie,He)|0;var Qe=(X+(x=x+Math.imul(ce,lr)|0)|0)+((8191&(S=(S=S+Math.imul(ce,fr)|0)+Math.imul(de,lr)|0))<<13)|0;X=((A=A+Math.imul(de,fr)|0)+(S>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,x=Math.imul(me,Ke),S=(S=Math.imul(me,He))+Math.imul(ke,Ke)|0,A=Math.imul(ke,He);var gr=(X+(x=x+Math.imul(Te,lr)|0)|0)+((8191&(S=(S=S+Math.imul(Te,fr)|0)+Math.imul(ie,lr)|0))<<13)|0;X=((A=A+Math.imul(ie,fr)|0)+(S>>>13)|0)+(gr>>>26)|0,gr&=67108863;var Hr=(X+(x=Math.imul(me,lr))|0)+((8191&(S=(S=Math.imul(me,fr))+Math.imul(ke,lr)|0))<<13)|0;return X=((A=Math.imul(ke,fr))+(S>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,V[0]=Xr,V[1]=Rr,V[2]=en,V[3]=Qr,V[4]=Lr,V[5]=xt,V[6]=Yt,V[7]=he,V[8]=ge,V[9]=Ze,V[10]=je,V[11]=Pe,V[12]=Ar,V[13]=wr,V[14]=kr,V[15]=ur,V[16]=Qe,V[17]=gr,V[18]=Hr,X!==0&&(V[19]=X,_.length++),_};function j(C,w,_){_.negative=w.negative^C.negative,_.length=C.length+w.length;for(var x=0,S=0,A=0;A<_.length-1;A++){var B=S;S=0;for(var E=67108863&x,V=Math.min(A,w.length-1),X=Math.max(0,A-C.length+1);X<=V;X++){var Q=A-X,D=(0|C.words[Q])*(0|w.words[X]),Z=67108863&D;E=67108863&(Z=Z+E|0),S+=(B=(B=B+(D/67108864|0)|0)+(Z>>>26)|0)>>>26,B&=67108863}_.words[A]=E,x=B,B=S}return x!==0?_.words[A]=x:_.length--,_._strip()}function I(C,w,_){return j(C,w,_)}Math.imul||(k=v),a.prototype.mulTo=function(C,w){var _=this.length+C.length;return this.length===10&&C.length===10?k(this,C,w):_<63?v(this,C,w):_<1024?j(this,C,w):I(this,C,w)},a.prototype.mul=function(C){var w=new a(null);return w.words=new Array(this.length+C.length),this.mulTo(C,w)},a.prototype.mulf=function(C){var w=new a(null);return w.words=new Array(this.length+C.length),I(this,C,w)},a.prototype.imul=function(C){return this.clone().mulTo(C,this)},a.prototype.imuln=function(C){var w=C<0;w&&(C=-C),u(typeof C=="number"),u(C<67108864);for(var _=0,x=0;x<this.length;x++){var S=(0|this.words[x])*C,A=(67108863&S)+(67108863&_);_>>=26,_+=S/67108864|0,_+=A>>>26,this.words[x]=67108863&A}return _!==0&&(this.words[x]=_,this.length++),w?this.ineg():this},a.prototype.muln=function(C){return this.clone().imuln(C)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(C){var w=function(A){for(var B=new Array(A.bitLength()),E=0;E<B.length;E++){var V=E/26|0,X=E%26;B[E]=A.words[V]>>>X&1}return B}(C);if(w.length===0)return new a(1);for(var _=this,x=0;x<w.length&&w[x]===0;x++,_=_.sqr());if(++x<w.length)for(var S=_.sqr();x<w.length;x++,S=S.sqr())w[x]!==0&&(_=_.mul(S));return _},a.prototype.iushln=function(C){u(typeof C=="number"&&C>=0);var w,_=C%26,x=(C-_)/26,S=67108863>>>26-_<<26-_;if(_!==0){var A=0;for(w=0;w<this.length;w++){var B=this.words[w]&S,E=(0|this.words[w])-B<<_;this.words[w]=E|A,A=B>>>26-_}A&&(this.words[w]=A,this.length++)}if(x!==0){for(w=this.length-1;w>=0;w--)this.words[w+x]=this.words[w];for(w=0;w<x;w++)this.words[w]=0;this.length+=x}return this._strip()},a.prototype.ishln=function(C){return u(this.negative===0),this.iushln(C)},a.prototype.iushrn=function(C,w,_){var x;u(typeof C=="number"&&C>=0),x=w?(w-w%26)/26:0;var S=C%26,A=Math.min((C-S)/26,this.length),B=67108863^67108863>>>S<<S,E=_;if(x-=A,x=Math.max(0,x),E){for(var V=0;V<A;V++)E.words[V]=this.words[V];E.length=A}if(A!==0)if(this.length>A)for(this.length-=A,V=0;V<this.length;V++)this.words[V]=this.words[V+A];else this.words[0]=0,this.length=1;var X=0;for(V=this.length-1;V>=0&&(X!==0||V>=x);V--){var Q=0|this.words[V];this.words[V]=X<<26-S|Q>>>S,X=Q&B}return E&&X!==0&&(E.words[E.length++]=X),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(C,w,_){return u(this.negative===0),this.iushrn(C,w,_)},a.prototype.shln=function(C){return this.clone().ishln(C)},a.prototype.ushln=function(C){return this.clone().iushln(C)},a.prototype.shrn=function(C){return this.clone().ishrn(C)},a.prototype.ushrn=function(C){return this.clone().iushrn(C)},a.prototype.testn=function(C){u(typeof C=="number"&&C>=0);var w=C%26,_=(C-w)/26,x=1<<w;return!(this.length<=_)&&!!(this.words[_]&x)},a.prototype.imaskn=function(C){u(typeof C=="number"&&C>=0);var w=C%26,_=(C-w)/26;if(u(this.negative===0,"imaskn works only with positive numbers"),this.length<=_)return this;if(w!==0&&_++,this.length=Math.min(_,this.length),w!==0){var x=67108863^67108863>>>w<<w;this.words[this.length-1]&=x}return this._strip()},a.prototype.maskn=function(C){return this.clone().imaskn(C)},a.prototype.iaddn=function(C){return u(typeof C=="number"),u(C<67108864),C<0?this.isubn(-C):this.negative!==0?this.length===1&&(0|this.words[0])<=C?(this.words[0]=C-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(C),this.negative=1,this):this._iaddn(C)},a.prototype._iaddn=function(C){this.words[0]+=C;for(var w=0;w<this.length&&this.words[w]>=67108864;w++)this.words[w]-=67108864,w===this.length-1?this.words[w+1]=1:this.words[w+1]++;return this.length=Math.max(this.length,w+1),this},a.prototype.isubn=function(C){if(u(typeof C=="number"),u(C<67108864),C<0)return this.iaddn(-C);if(this.negative!==0)return this.negative=0,this.iaddn(C),this.negative=1,this;if(this.words[0]-=C,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var w=0;w<this.length&&this.words[w]<0;w++)this.words[w]+=67108864,this.words[w+1]-=1;return this._strip()},a.prototype.addn=function(C){return this.clone().iaddn(C)},a.prototype.subn=function(C){return this.clone().isubn(C)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(C,w,_){var x,S,A=C.length+_;this._expand(A);var B=0;for(x=0;x<C.length;x++){S=(0|this.words[x+_])+B;var E=(0|C.words[x])*w;B=((S-=67108863&E)>>26)-(E/67108864|0),this.words[x+_]=67108863&S}for(;x<this.length-_;x++)B=(S=(0|this.words[x+_])+B)>>26,this.words[x+_]=67108863&S;if(B===0)return this._strip();for(u(B===-1),B=0,x=0;x<this.length;x++)B=(S=-(0|this.words[x])+B)>>26,this.words[x]=67108863&S;return this.negative=1,this._strip()},a.prototype._wordDiv=function(C,w){var _=(this.length,C.length),x=this.clone(),S=C,A=0|S.words[S.length-1];(_=26-this._countBits(A))!==0&&(S=S.ushln(_),x.iushln(_),A=0|S.words[S.length-1]);var B,E=x.length-S.length;if(w!=="mod"){(B=new a(null)).length=E+1,B.words=new Array(B.length);for(var V=0;V<B.length;V++)B.words[V]=0}var X=x.clone()._ishlnsubmul(S,1,E);X.negative===0&&(x=X,B&&(B.words[E]=1));for(var Q=E-1;Q>=0;Q--){var D=67108864*(0|x.words[S.length+Q])+(0|x.words[S.length+Q-1]);for(D=Math.min(D/A|0,67108863),x._ishlnsubmul(S,D,Q);x.negative!==0;)D--,x.negative=0,x._ishlnsubmul(S,1,Q),x.isZero()||(x.negative^=1);B&&(B.words[Q]=D)}return B&&B._strip(),x._strip(),w!=="div"&&_!==0&&x.iushrn(_),{div:B||null,mod:x}},a.prototype.divmod=function(C,w,_){return u(!C.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:this.negative!==0&&C.negative===0?(A=this.neg().divmod(C,w),w!=="mod"&&(x=A.div.neg()),w!=="div"&&(S=A.mod.neg(),_&&S.negative!==0&&S.iadd(C)),{div:x,mod:S}):this.negative===0&&C.negative!==0?(A=this.divmod(C.neg(),w),w!=="mod"&&(x=A.div.neg()),{div:x,mod:A.mod}):this.negative&C.negative?(A=this.neg().divmod(C.neg(),w),w!=="div"&&(S=A.mod.neg(),_&&S.negative!==0&&S.isub(C)),{div:A.div,mod:S}):C.length>this.length||this.cmp(C)<0?{div:new a(0),mod:this}:C.length===1?w==="div"?{div:this.divn(C.words[0]),mod:null}:w==="mod"?{div:null,mod:new a(this.modrn(C.words[0]))}:{div:this.divn(C.words[0]),mod:new a(this.modrn(C.words[0]))}:this._wordDiv(C,w);var x,S,A},a.prototype.div=function(C){return this.divmod(C,"div",!1).div},a.prototype.mod=function(C){return this.divmod(C,"mod",!1).mod},a.prototype.umod=function(C){return this.divmod(C,"mod",!0).mod},a.prototype.divRound=function(C){var w=this.divmod(C);if(w.mod.isZero())return w.div;var _=w.div.negative!==0?w.mod.isub(C):w.mod,x=C.ushrn(1),S=C.andln(1),A=_.cmp(x);return A<0||S===1&&A===0?w.div:w.div.negative!==0?w.div.isubn(1):w.div.iaddn(1)},a.prototype.modrn=function(C){var w=C<0;w&&(C=-C),u(C<=67108863);for(var _=(1<<26)%C,x=0,S=this.length-1;S>=0;S--)x=(_*x+(0|this.words[S]))%C;return w?-x:x},a.prototype.modn=function(C){return this.modrn(C)},a.prototype.idivn=function(C){var w=C<0;w&&(C=-C),u(C<=67108863);for(var _=0,x=this.length-1;x>=0;x--){var S=(0|this.words[x])+67108864*_;this.words[x]=S/C|0,_=S%C}return this._strip(),w?this.ineg():this},a.prototype.divn=function(C){return this.clone().idivn(C)},a.prototype.egcd=function(C){u(C.negative===0),u(!C.isZero());var w=this,_=C.clone();w=w.negative!==0?w.umod(C):w.clone();for(var x=new a(1),S=new a(0),A=new a(0),B=new a(1),E=0;w.isEven()&&_.isEven();)w.iushrn(1),_.iushrn(1),++E;for(var V=_.clone(),X=w.clone();!w.isZero();){for(var Q=0,D=1;!(w.words[0]&D)&&Q<26;++Q,D<<=1);if(Q>0)for(w.iushrn(Q);Q-- >0;)(x.isOdd()||S.isOdd())&&(x.iadd(V),S.isub(X)),x.iushrn(1),S.iushrn(1);for(var Z=0,L=1;!(_.words[0]&L)&&Z<26;++Z,L<<=1);if(Z>0)for(_.iushrn(Z);Z-- >0;)(A.isOdd()||B.isOdd())&&(A.iadd(V),B.isub(X)),A.iushrn(1),B.iushrn(1);w.cmp(_)>=0?(w.isub(_),x.isub(A),S.isub(B)):(_.isub(w),A.isub(x),B.isub(S))}return{a:A,b:B,gcd:_.iushln(E)}},a.prototype._invmp=function(C){u(C.negative===0),u(!C.isZero());var w=this,_=C.clone();w=w.negative!==0?w.umod(C):w.clone();for(var x,S=new a(1),A=new a(0),B=_.clone();w.cmpn(1)>0&&_.cmpn(1)>0;){for(var E=0,V=1;!(w.words[0]&V)&&E<26;++E,V<<=1);if(E>0)for(w.iushrn(E);E-- >0;)S.isOdd()&&S.iadd(B),S.iushrn(1);for(var X=0,Q=1;!(_.words[0]&Q)&&X<26;++X,Q<<=1);if(X>0)for(_.iushrn(X);X-- >0;)A.isOdd()&&A.iadd(B),A.iushrn(1);w.cmp(_)>=0?(w.isub(_),S.isub(A)):(_.isub(w),A.isub(S))}return(x=w.cmpn(1)===0?S:A).cmpn(0)<0&&x.iadd(C),x},a.prototype.gcd=function(C){if(this.isZero())return C.abs();if(C.isZero())return this.abs();var w=this.clone(),_=C.clone();w.negative=0,_.negative=0;for(var x=0;w.isEven()&&_.isEven();x++)w.iushrn(1),_.iushrn(1);for(;;){for(;w.isEven();)w.iushrn(1);for(;_.isEven();)_.iushrn(1);var S=w.cmp(_);if(S<0){var A=w;w=_,_=A}else if(S===0||_.cmpn(1)===0)break;w.isub(_)}return _.iushln(x)},a.prototype.invm=function(C){return this.egcd(C).a.umod(C)},a.prototype.isEven=function(){return(1&this.words[0])==0},a.prototype.isOdd=function(){return(1&this.words[0])==1},a.prototype.andln=function(C){return this.words[0]&C},a.prototype.bincn=function(C){u(typeof C=="number");var w=C%26,_=(C-w)/26,x=1<<w;if(this.length<=_)return this._expand(_+1),this.words[_]|=x,this;for(var S=x,A=_;S!==0&&A<this.length;A++){var B=0|this.words[A];S=(B+=S)>>>26,B&=67108863,this.words[A]=B}return S!==0&&(this.words[A]=S,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(C){var w,_=C<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;if(this._strip(),this.length>1)w=1;else{_&&(C=-C),u(C<=67108863,"Number is too big");var x=0|this.words[0];w=x===C?0:x<C?-1:1}return this.negative!==0?0|-w:w},a.prototype.cmp=function(C){if(this.negative!==0&&C.negative===0)return-1;if(this.negative===0&&C.negative!==0)return 1;var w=this.ucmp(C);return this.negative!==0?0|-w:w},a.prototype.ucmp=function(C){if(this.length>C.length)return 1;if(this.length<C.length)return-1;for(var w=0,_=this.length-1;_>=0;_--){var x=0|this.words[_],S=0|C.words[_];if(x!==S){x<S?w=-1:x>S&&(w=1);break}}return w},a.prototype.gtn=function(C){return this.cmpn(C)===1},a.prototype.gt=function(C){return this.cmp(C)===1},a.prototype.gten=function(C){return this.cmpn(C)>=0},a.prototype.gte=function(C){return this.cmp(C)>=0},a.prototype.ltn=function(C){return this.cmpn(C)===-1},a.prototype.lt=function(C){return this.cmp(C)===-1},a.prototype.lten=function(C){return this.cmpn(C)<=0},a.prototype.lte=function(C){return this.cmp(C)<=0},a.prototype.eqn=function(C){return this.cmpn(C)===0},a.prototype.eq=function(C){return this.cmp(C)===0},a.red=function(C){return new T(C)},a.prototype.toRed=function(C){return u(!this.red,"Already a number in reduction context"),u(this.negative===0,"red works only with positives"),C.convertTo(this)._forceRed(C)},a.prototype.fromRed=function(){return u(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(C){return this.red=C,this},a.prototype.forceRed=function(C){return u(!this.red,"Already a number in reduction context"),this._forceRed(C)},a.prototype.redAdd=function(C){return u(this.red,"redAdd works only with red numbers"),this.red.add(this,C)},a.prototype.redIAdd=function(C){return u(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,C)},a.prototype.redSub=function(C){return u(this.red,"redSub works only with red numbers"),this.red.sub(this,C)},a.prototype.redISub=function(C){return u(this.red,"redISub works only with red numbers"),this.red.isub(this,C)},a.prototype.redShl=function(C){return u(this.red,"redShl works only with red numbers"),this.red.shl(this,C)},a.prototype.redMul=function(C){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.mul(this,C)},a.prototype.redIMul=function(C){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.imul(this,C)},a.prototype.redSqr=function(){return u(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return u(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return u(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return u(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return u(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(C){return u(this.red&&!C.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,C)};var U={k256:null,p224:null,p192:null,p25519:null};function P(C,w){this.name=C,this.p=new a(w,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function z(){P.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function q(){P.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function $(){P.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function F(){P.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(C){if(typeof C=="string"){var w=a._prime(C);this.m=w.p,this.prime=w}else u(C.gtn(1),"modulus must be greater than 1"),this.m=C,this.prime=null}function N(C){T.call(this,C),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}P.prototype._tmp=function(){var C=new a(null);return C.words=new Array(Math.ceil(this.n/13)),C},P.prototype.ireduce=function(C){var w,_=C;do this.split(_,this.tmp),w=(_=(_=this.imulK(_)).iadd(this.tmp)).bitLength();while(w>this.n);var x=w<this.n?-1:_.ucmp(this.p);return x===0?(_.words[0]=0,_.length=1):x>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},P.prototype.split=function(C,w){C.iushrn(this.n,0,w)},P.prototype.imulK=function(C){return C.imul(this.k)},l(z,P),z.prototype.split=function(C,w){for(var _=Math.min(C.length,9),x=0;x<_;x++)w.words[x]=C.words[x];if(w.length=_,C.length<=9)return C.words[0]=0,void(C.length=1);var S=C.words[9];for(w.words[w.length++]=4194303&S,x=10;x<C.length;x++){var A=0|C.words[x];C.words[x-10]=(4194303&A)<<4|S>>>22,S=A}S>>>=22,C.words[x-10]=S,S===0&&C.length>10?C.length-=10:C.length-=9},z.prototype.imulK=function(C){C.words[C.length]=0,C.words[C.length+1]=0,C.length+=2;for(var w=0,_=0;_<C.length;_++){var x=0|C.words[_];w+=977*x,C.words[_]=67108863&w,w=64*x+(w/67108864|0)}return C.words[C.length-1]===0&&(C.length--,C.words[C.length-1]===0&&C.length--),C},l(q,P),l($,P),l(F,P),F.prototype.imulK=function(C){for(var w=0,_=0;_<C.length;_++){var x=19*(0|C.words[_])+w,S=67108863&x;x>>>=26,C.words[_]=S,w=x}return w!==0&&(C.words[C.length++]=w),C},a._prime=function(C){if(U[C])return U[C];var w;if(C==="k256")w=new z;else if(C==="p224")w=new q;else if(C==="p192")w=new $;else{if(C!=="p25519")throw new Error("Unknown prime "+C);w=new F}return U[C]=w,w},T.prototype._verify1=function(C){u(C.negative===0,"red works only with positives"),u(C.red,"red works only with red numbers")},T.prototype._verify2=function(C,w){u((C.negative|w.negative)==0,"red works only with positives"),u(C.red&&C.red===w.red,"red works only with red numbers")},T.prototype.imod=function(C){return this.prime?this.prime.ireduce(C)._forceRed(this):(p(C,C.umod(this.m)._forceRed(this)),C)},T.prototype.neg=function(C){return C.isZero()?C.clone():this.m.sub(C)._forceRed(this)},T.prototype.add=function(C,w){this._verify2(C,w);var _=C.add(w);return _.cmp(this.m)>=0&&_.isub(this.m),_._forceRed(this)},T.prototype.iadd=function(C,w){this._verify2(C,w);var _=C.iadd(w);return _.cmp(this.m)>=0&&_.isub(this.m),_},T.prototype.sub=function(C,w){this._verify2(C,w);var _=C.sub(w);return _.cmpn(0)<0&&_.iadd(this.m),_._forceRed(this)},T.prototype.isub=function(C,w){this._verify2(C,w);var _=C.isub(w);return _.cmpn(0)<0&&_.iadd(this.m),_},T.prototype.shl=function(C,w){return this._verify1(C),this.imod(C.ushln(w))},T.prototype.imul=function(C,w){return this._verify2(C,w),this.imod(C.imul(w))},T.prototype.mul=function(C,w){return this._verify2(C,w),this.imod(C.mul(w))},T.prototype.isqr=function(C){return this.imul(C,C.clone())},T.prototype.sqr=function(C){return this.mul(C,C)},T.prototype.sqrt=function(C){if(C.isZero())return C.clone();var w=this.m.andln(3);if(u(w%2==1),w===3){var _=this.m.add(new a(1)).iushrn(2);return this.pow(C,_)}for(var x=this.m.subn(1),S=0;!x.isZero()&&x.andln(1)===0;)S++,x.iushrn(1);u(!x.isZero());var A=new a(1).toRed(this),B=A.redNeg(),E=this.m.subn(1).iushrn(1),V=this.m.bitLength();for(V=new a(2*V*V).toRed(this);this.pow(V,E).cmp(B)!==0;)V.redIAdd(B);for(var X=this.pow(V,x),Q=this.pow(C,x.addn(1).iushrn(1)),D=this.pow(C,x),Z=S;D.cmp(A)!==0;){for(var L=D,O=0;L.cmp(A)!==0;O++)L=L.redSqr();u(O<Z);var G=this.pow(X,new a(1).iushln(Z-O-1));Q=Q.redMul(G),X=G.redSqr(),D=D.redMul(X),Z=O}return Q},T.prototype.invm=function(C){var w=C._invmp(this.m);return w.negative!==0?(w.negative=0,this.imod(w).redNeg()):this.imod(w)},T.prototype.pow=function(C,w){if(w.isZero())return new a(1).toRed(this);if(w.cmpn(1)===0)return C.clone();var _=new Array(16);_[0]=new a(1).toRed(this),_[1]=C;for(var x=2;x<_.length;x++)_[x]=this.mul(_[x-1],C);var S=_[0],A=0,B=0,E=w.bitLength()%26;for(E===0&&(E=26),x=w.length-1;x>=0;x--){for(var V=w.words[x],X=E-1;X>=0;X--){var Q=V>>X&1;S!==_[0]&&(S=this.sqr(S)),Q!==0||A!==0?(A<<=1,A|=Q,(++B===4||x===0&&X===0)&&(S=this.mul(S,_[A]),B=0,A=0)):B=0}E=26}return S},T.prototype.convertTo=function(C){var w=C.umod(this.m);return w===C?w.clone():w},T.prototype.convertFrom=function(C){var w=C.clone();return w.red=null,w},a.mont=function(C){return new N(C)},l(N,T),N.prototype.convertTo=function(C){return this.imod(C.ushln(this.shift))},N.prototype.convertFrom=function(C){var w=this.imod(C.mul(this.rinv));return w.red=null,w},N.prototype.imul=function(C,w){if(C.isZero()||w.isZero())return C.words[0]=0,C.length=1,C;var _=C.imul(w),x=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=_.isub(x).iushrn(this.shift),A=S;return S.cmp(this.m)>=0?A=S.isub(this.m):S.cmpn(0)<0&&(A=S.iadd(this.m)),A._forceRed(this)},N.prototype.mul=function(C,w){if(C.isZero()||w.isZero())return new a(0)._forceRed(this);var _=C.mul(w),x=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=_.isub(x).iushrn(this.shift),A=S;return S.cmp(this.m)>=0?A=S.isub(this.m):S.cmpn(0)<0&&(A=S.iadd(this.m)),A._forceRed(this)},N.prototype.invm=function(C){return this.imod(C._invmp(this.m).mul(this.r2))._forceRed(this)}})(r===void 0||r)},{buffer:188}],187:[function(t,r,s){var i;function o(l){this.rand=l}if(r.exports=function(l){return i||(i=new o(null)),i.generate(l)},r.exports.Rand=o,o.prototype.generate=function(l){return this._rand(l)},o.prototype._rand=function(l){if(this.rand.getBytes)return this.rand.getBytes(l);for(var a=new Uint8Array(l),c=0;c<a.length;c++)a[c]=this.rand.getByte();return a},typeof self=="object")self.crypto&&self.crypto.getRandomValues?o.prototype._rand=function(l){var a=new Uint8Array(l);return self.crypto.getRandomValues(a),a}:self.msCrypto&&self.msCrypto.getRandomValues?o.prototype._rand=function(l){var a=new Uint8Array(l);return self.msCrypto.getRandomValues(a),a}:typeof window=="object"&&(o.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var u=t("crypto");if(typeof u.randomBytes!="function")throw new Error("Not supported");o.prototype._rand=function(l){return u.randomBytes(l)}}catch{}},{crypto:188}],188:[function(t,r,s){},{}],189:[function(t,r,s){var i=t("safe-buffer").Buffer;function o(f){i.isBuffer(f)||(f=i.from(f));for(var h=f.length/4|0,p=new Array(h),g=0;g<h;g++)p[g]=f.readUInt32BE(4*g);return p}function u(f){for(;0<f.length;f++)f[0]=0}function l(f,h,p,g,m){for(var y,b,v,k,j=p[0],I=p[1],U=p[2],P=p[3],z=f[0]^h[0],q=f[1]^h[1],$=f[2]^h[2],F=f[3]^h[3],T=4,N=1;N<m;N++)y=j[z>>>24]^I[q>>>16&255]^U[$>>>8&255]^P[255&F]^h[T++],b=j[q>>>24]^I[$>>>16&255]^U[F>>>8&255]^P[255&z]^h[T++],v=j[$>>>24]^I[F>>>16&255]^U[z>>>8&255]^P[255&q]^h[T++],k=j[F>>>24]^I[z>>>16&255]^U[q>>>8&255]^P[255&$]^h[T++],z=y,q=b,$=v,F=k;return y=(g[z>>>24]<<24|g[q>>>16&255]<<16|g[$>>>8&255]<<8|g[255&F])^h[T++],b=(g[q>>>24]<<24|g[$>>>16&255]<<16|g[F>>>8&255]<<8|g[255&z])^h[T++],v=(g[$>>>24]<<24|g[F>>>16&255]<<16|g[z>>>8&255]<<8|g[255&q])^h[T++],k=(g[F>>>24]<<24|g[z>>>16&255]<<16|g[q>>>8&255]<<8|g[255&$])^h[T++],[y>>>=0,b>>>=0,v>>>=0,k>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],c=function(){for(var f=new Array(256),h=0;h<256;h++)f[h]=h<128?h<<1:h<<1^283;for(var p=[],g=[],m=[[],[],[],[]],y=[[],[],[],[]],b=0,v=0,k=0;k<256;++k){var j=v^v<<1^v<<2^v<<3^v<<4;j=j>>>8^255&j^99,p[b]=j,g[j]=b;var I=f[b],U=f[I],P=f[U],z=257*f[j]^16843008*j;m[0][b]=z<<24|z>>>8,m[1][b]=z<<16|z>>>16,m[2][b]=z<<8|z>>>24,m[3][b]=z,z=16843009*P^65537*U^257*I^16843008*b,y[0][j]=z<<24|z>>>8,y[1][j]=z<<16|z>>>16,y[2][j]=z<<8|z>>>24,y[3][j]=z,b===0?b=v=1:(b=I^f[f[f[P^I]]],v^=f[f[v]])}return{SBOX:p,INV_SBOX:g,SUB_MIX:m,INV_SUB_MIX:y}}();function d(f){this._key=o(f),this._reset()}d.blockSize=16,d.keySize=32,d.prototype.blockSize=d.blockSize,d.prototype.keySize=d.keySize,d.prototype._reset=function(){for(var f=this._key,h=f.length,p=h+6,g=4*(p+1),m=[],y=0;y<h;y++)m[y]=f[y];for(y=h;y<g;y++){var b=m[y-1];y%h==0?(b=b<<8|b>>>24,b=c.SBOX[b>>>24]<<24|c.SBOX[b>>>16&255]<<16|c.SBOX[b>>>8&255]<<8|c.SBOX[255&b],b^=a[y/h|0]<<24):h>6&&y%h==4&&(b=c.SBOX[b>>>24]<<24|c.SBOX[b>>>16&255]<<16|c.SBOX[b>>>8&255]<<8|c.SBOX[255&b]),m[y]=m[y-h]^b}for(var v=[],k=0;k<g;k++){var j=g-k,I=m[j-(k%4?0:4)];v[k]=k<4||j<=4?I:c.INV_SUB_MIX[0][c.SBOX[I>>>24]]^c.INV_SUB_MIX[1][c.SBOX[I>>>16&255]]^c.INV_SUB_MIX[2][c.SBOX[I>>>8&255]]^c.INV_SUB_MIX[3][c.SBOX[255&I]]}this._nRounds=p,this._keySchedule=m,this._invKeySchedule=v},d.prototype.encryptBlockRaw=function(f){return l(f=o(f),this._keySchedule,c.SUB_MIX,c.SBOX,this._nRounds)},d.prototype.encryptBlock=function(f){var h=this.encryptBlockRaw(f),p=i.allocUnsafe(16);return p.writeUInt32BE(h[0],0),p.writeUInt32BE(h[1],4),p.writeUInt32BE(h[2],8),p.writeUInt32BE(h[3],12),p},d.prototype.decryptBlock=function(f){var h=(f=o(f))[1];f[1]=f[3],f[3]=h;var p=l(f,this._invKeySchedule,c.INV_SUB_MIX,c.INV_SBOX,this._nRounds),g=i.allocUnsafe(16);return g.writeUInt32BE(p[0],0),g.writeUInt32BE(p[3],4),g.writeUInt32BE(p[2],8),g.writeUInt32BE(p[1],12),g},d.prototype.scrub=function(){u(this._keySchedule),u(this._invKeySchedule),u(this._key)},r.exports.AES=d},{"safe-buffer":494}],190:[function(t,r,s){var i=t("./aes"),o=t("safe-buffer").Buffer,u=t("cipher-base"),l=t("inherits"),a=t("./ghash"),c=t("buffer-xor"),d=t("./incr32");function f(h,p,g,m){u.call(this);var y=o.alloc(4,0);this._cipher=new i.AES(p);var b=this._cipher.encryptBlock(y);this._ghash=new a(b),g=function(v,k,j){if(k.length===12)return v._finID=o.concat([k,o.from([0,0,0,1])]),o.concat([k,o.from([0,0,0,2])]);var I=new a(j),U=k.length,P=U%16;I.update(k),P&&(P=16-P,I.update(o.alloc(P,0))),I.update(o.alloc(8,0));var z=8*U,q=o.alloc(8);q.writeUIntBE(z,0,8),I.update(q),v._finID=I.state;var $=o.from(v._finID);return d($),$}(this,g,b),this._prev=o.from(g),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=m,this._alen=0,this._len=0,this._mode=h,this._authTag=null,this._called=!1}l(f,u),f.prototype._update=function(h){if(!this._called&&this._alen){var p=16-this._alen%16;p<16&&(p=o.alloc(p,0),this._ghash.update(p))}this._called=!0;var g=this._mode.encrypt(this,h);return this._decrypt?this._ghash.update(h):this._ghash.update(g),this._len+=h.length,g},f.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var h=c(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(p,g){var m=0;p.length!==g.length&&m++;for(var y=Math.min(p.length,g.length),b=0;b<y;++b)m+=p[b]^g[b];return m}(h,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=h,this._cipher.scrub()},f.prototype.getAuthTag=function(){if(this._decrypt||!o.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},f.prototype.setAuthTag=function(h){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=h},f.prototype.setAAD=function(h){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(h),this._alen+=h.length},r.exports=f},{"./aes":189,"./ghash":194,"./incr32":195,"buffer-xor":219,"cipher-base":221,inherits:440,"safe-buffer":494}],191:[function(t,r,s){var i=t("./encrypter"),o=t("./decrypter"),u=t("./modes/list.json");s.createCipher=s.Cipher=i.createCipher,s.createCipheriv=s.Cipheriv=i.createCipheriv,s.createDecipher=s.Decipher=o.createDecipher,s.createDecipheriv=s.Decipheriv=o.createDecipheriv,s.listCiphers=s.getCiphers=function(){return Object.keys(u)}},{"./decrypter":192,"./encrypter":193,"./modes/list.json":203}],192:[function(t,r,s){var i=t("./authCipher"),o=t("safe-buffer").Buffer,u=t("./modes"),l=t("./streamCipher"),a=t("cipher-base"),c=t("./aes"),d=t("evp_bytestokey");function f(g,m,y){a.call(this),this._cache=new h,this._last=void 0,this._cipher=new c.AES(m),this._prev=o.from(y),this._mode=g,this._autopadding=!0}function h(){this.cache=o.allocUnsafe(0)}function p(g,m,y){var b=u[g.toLowerCase()];if(!b)throw new TypeError("invalid suite type");if(typeof y=="string"&&(y=o.from(y)),b.mode!=="GCM"&&y.length!==b.iv)throw new TypeError("invalid iv length "+y.length);if(typeof m=="string"&&(m=o.from(m)),m.length!==b.key/8)throw new TypeError("invalid key length "+m.length);return b.type==="stream"?new l(b.module,m,y,!0):b.type==="auth"?new i(b.module,m,y,!0):new f(b.module,m,y)}t("inherits")(f,a),f.prototype._update=function(g){var m,y;this._cache.add(g);for(var b=[];m=this._cache.get(this._autopadding);)y=this._mode.decrypt(this,m),b.push(y);return o.concat(b)},f.prototype._final=function(){var g=this._cache.flush();if(this._autopadding)return function(m){var y=m[15];if(y<1||y>16)throw new Error("unable to decrypt data");for(var b=-1;++b<y;)if(m[b+(16-y)]!==y)throw new Error("unable to decrypt data");if(y!==16)return m.slice(0,16-y)}(this._mode.decrypt(this,g));if(g)throw new Error("data not multiple of block length")},f.prototype.setAutoPadding=function(g){return this._autopadding=!!g,this},h.prototype.add=function(g){this.cache=o.concat([this.cache,g])},h.prototype.get=function(g){var m;if(g){if(this.cache.length>16)return m=this.cache.slice(0,16),this.cache=this.cache.slice(16),m}else if(this.cache.length>=16)return m=this.cache.slice(0,16),this.cache=this.cache.slice(16),m;return null},h.prototype.flush=function(){if(this.cache.length)return this.cache},s.createDecipher=function(g,m){var y=u[g.toLowerCase()];if(!y)throw new TypeError("invalid suite type");var b=d(m,!1,y.key,y.iv);return p(g,b.key,b.iv)},s.createDecipheriv=p},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],193:[function(t,r,s){var i=t("./modes"),o=t("./authCipher"),u=t("safe-buffer").Buffer,l=t("./streamCipher"),a=t("cipher-base"),c=t("./aes"),d=t("evp_bytestokey");function f(m,y,b){a.call(this),this._cache=new p,this._cipher=new c.AES(y),this._prev=u.from(b),this._mode=m,this._autopadding=!0}t("inherits")(f,a),f.prototype._update=function(m){var y,b;this._cache.add(m);for(var v=[];y=this._cache.get();)b=this._mode.encrypt(this,y),v.push(b);return u.concat(v)};var h=u.alloc(16,16);function p(){this.cache=u.allocUnsafe(0)}function g(m,y,b){var v=i[m.toLowerCase()];if(!v)throw new TypeError("invalid suite type");if(typeof y=="string"&&(y=u.from(y)),y.length!==v.key/8)throw new TypeError("invalid key length "+y.length);if(typeof b=="string"&&(b=u.from(b)),v.mode!=="GCM"&&b.length!==v.iv)throw new TypeError("invalid iv length "+b.length);return v.type==="stream"?new l(v.module,y,b):v.type==="auth"?new o(v.module,y,b):new f(v.module,y,b)}f.prototype._final=function(){var m=this._cache.flush();if(this._autopadding)return m=this._mode.encrypt(this,m),this._cipher.scrub(),m;if(!m.equals(h))throw this._cipher.scrub(),new Error("data not multiple of block length")},f.prototype.setAutoPadding=function(m){return this._autopadding=!!m,this},p.prototype.add=function(m){this.cache=u.concat([this.cache,m])},p.prototype.get=function(){if(this.cache.length>15){var m=this.cache.slice(0,16);return this.cache=this.cache.slice(16),m}return null},p.prototype.flush=function(){for(var m=16-this.cache.length,y=u.allocUnsafe(m),b=-1;++b<m;)y.writeUInt8(m,b);return u.concat([this.cache,y])},s.createCipheriv=g,s.createCipher=function(m,y){var b=i[m.toLowerCase()];if(!b)throw new TypeError("invalid suite type");var v=d(y,!1,b.key,b.iv);return g(m,v.key,v.iv)}},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],194:[function(t,r,s){var i=t("safe-buffer").Buffer,o=i.alloc(16,0);function u(a){var c=i.allocUnsafe(16);return c.writeUInt32BE(a[0]>>>0,0),c.writeUInt32BE(a[1]>>>0,4),c.writeUInt32BE(a[2]>>>0,8),c.writeUInt32BE(a[3]>>>0,12),c}function l(a){this.h=a,this.state=i.alloc(16,0),this.cache=i.allocUnsafe(0)}l.prototype.ghash=function(a){for(var c=-1;++c<a.length;)this.state[c]^=a[c];this._multiply()},l.prototype._multiply=function(){for(var a,c,d,f=[(a=this.h).readUInt32BE(0),a.readUInt32BE(4),a.readUInt32BE(8),a.readUInt32BE(12)],h=[0,0,0,0],p=-1;++p<128;){for(this.state[~~(p/8)]&1<<7-p%8&&(h[0]^=f[0],h[1]^=f[1],h[2]^=f[2],h[3]^=f[3]),d=(1&f[3])!=0,c=3;c>0;c--)f[c]=f[c]>>>1|(1&f[c-1])<<31;f[0]=f[0]>>>1,d&&(f[0]=f[0]^225<<24)}this.state=u(h)},l.prototype.update=function(a){var c;for(this.cache=i.concat([this.cache,a]);this.cache.length>=16;)c=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(c)},l.prototype.final=function(a,c){return this.cache.length&&this.ghash(i.concat([this.cache,o],16)),this.ghash(u([0,a,0,c])),this.state},r.exports=l},{"safe-buffer":494}],195:[function(t,r,s){r.exports=function(i){for(var o,u=i.length;u--;){if((o=i.readUInt8(u))!==255){o++,i.writeUInt8(o,u);break}i.writeUInt8(0,u)}}},{}],196:[function(t,r,s){var i=t("buffer-xor");s.encrypt=function(o,u){var l=i(u,o._prev);return o._prev=o._cipher.encryptBlock(l),o._prev},s.decrypt=function(o,u){var l=o._prev;o._prev=u;var a=o._cipher.decryptBlock(u);return i(a,l)}},{"buffer-xor":219}],197:[function(t,r,s){var i=t("safe-buffer").Buffer,o=t("buffer-xor");function u(l,a,c){var d=a.length,f=o(a,l._cache);return l._cache=l._cache.slice(d),l._prev=i.concat([l._prev,c?a:f]),f}s.encrypt=function(l,a,c){for(var d,f=i.allocUnsafe(0);a.length;){if(l._cache.length===0&&(l._cache=l._cipher.encryptBlock(l._prev),l._prev=i.allocUnsafe(0)),!(l._cache.length<=a.length)){f=i.concat([f,u(l,a,c)]);break}d=l._cache.length,f=i.concat([f,u(l,a.slice(0,d),c)]),a=a.slice(d)}return f}},{"buffer-xor":219,"safe-buffer":494}],198:[function(t,r,s){var i=t("safe-buffer").Buffer;function o(l,a,c){for(var d,f,h=-1,p=0;++h<8;)d=a&1<<7-h?128:0,p+=(128&(f=l._cipher.encryptBlock(l._prev)[0]^d))>>h%8,l._prev=u(l._prev,c?d:f);return p}function u(l,a){var c=l.length,d=-1,f=i.allocUnsafe(l.length);for(l=i.concat([l,i.from([a])]);++d<c;)f[d]=l[d]<<1|l[d+1]>>7;return f}s.encrypt=function(l,a,c){for(var d=a.length,f=i.allocUnsafe(d),h=-1;++h<d;)f[h]=o(l,a[h],c);return f}},{"safe-buffer":494}],199:[function(t,r,s){var i=t("safe-buffer").Buffer;function o(u,l,a){var c=u._cipher.encryptBlock(u._prev)[0]^l;return u._prev=i.concat([u._prev.slice(1),i.from([a?l:c])]),c}s.encrypt=function(u,l,a){for(var c=l.length,d=i.allocUnsafe(c),f=-1;++f<c;)d[f]=o(u,l[f],a);return d}},{"safe-buffer":494}],200:[function(t,r,s){var i=t("buffer-xor"),o=t("safe-buffer").Buffer,u=t("../incr32");function l(a){var c=a._cipher.encryptBlockRaw(a._prev);return u(a._prev),c}s.encrypt=function(a,c){var d=Math.ceil(c.length/16),f=a._cache.length;a._cache=o.concat([a._cache,o.allocUnsafe(16*d)]);for(var h=0;h<d;h++){var p=l(a),g=f+16*h;a._cache.writeUInt32BE(p[0],g+0),a._cache.writeUInt32BE(p[1],g+4),a._cache.writeUInt32BE(p[2],g+8),a._cache.writeUInt32BE(p[3],g+12)}var m=a._cache.slice(0,c.length);return a._cache=a._cache.slice(c.length),i(c,m)}},{"../incr32":195,"buffer-xor":219,"safe-buffer":494}],201:[function(t,r,s){s.encrypt=function(i,o){return i._cipher.encryptBlock(o)},s.decrypt=function(i,o){return i._cipher.decryptBlock(o)}},{}],202:[function(t,r,s){var i={ECB:t("./ecb"),CBC:t("./cbc"),CFB:t("./cfb"),CFB8:t("./cfb8"),CFB1:t("./cfb1"),OFB:t("./ofb"),CTR:t("./ctr"),GCM:t("./ctr")},o=t("./list.json");for(var u in o)o[u].module=i[o[u].mode];r.exports=o},{"./cbc":196,"./cfb":197,"./cfb1":198,"./cfb8":199,"./ctr":200,"./ecb":201,"./list.json":203,"./ofb":204}],203:[function(t,r,s){r.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],204:[function(t,r,s){(function(i){(function(){var o=t("buffer-xor");function u(l){return l._prev=l._cipher.encryptBlock(l._prev),l._prev}s.encrypt=function(l,a){for(;l._cache.length<a.length;)l._cache=i.concat([l._cache,u(l)]);var c=l._cache.slice(0,a.length);return l._cache=l._cache.slice(a.length),o(a,c)}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220,"buffer-xor":219}],205:[function(t,r,s){var i=t("./aes"),o=t("safe-buffer").Buffer,u=t("cipher-base");function l(a,c,d,f){u.call(this),this._cipher=new i.AES(c),this._prev=o.from(d),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=f,this._mode=a}t("inherits")(l,u),l.prototype._update=function(a){return this._mode.encrypt(this,a,this._decrypt)},l.prototype._final=function(){this._cipher.scrub()},r.exports=l},{"./aes":189,"cipher-base":221,inherits:440,"safe-buffer":494}],206:[function(t,r,s){var i=t("browserify-des"),o=t("browserify-aes/browser"),u=t("browserify-aes/modes"),l=t("browserify-des/modes"),a=t("evp_bytestokey");function c(f,h,p){if(f=f.toLowerCase(),u[f])return o.createCipheriv(f,h,p);if(l[f])return new i({key:h,iv:p,mode:f});throw new TypeError("invalid suite type")}function d(f,h,p){if(f=f.toLowerCase(),u[f])return o.createDecipheriv(f,h,p);if(l[f])return new i({key:h,iv:p,mode:f,decrypt:!0});throw new TypeError("invalid suite type")}s.createCipher=s.Cipher=function(f,h){var p,g;if(f=f.toLowerCase(),u[f])p=u[f].key,g=u[f].iv;else{if(!l[f])throw new TypeError("invalid suite type");p=8*l[f].key,g=l[f].iv}var m=a(h,!1,p,g);return c(f,m.key,m.iv)},s.createCipheriv=s.Cipheriv=c,s.createDecipher=s.Decipher=function(f,h){var p,g;if(f=f.toLowerCase(),u[f])p=u[f].key,g=u[f].iv;else{if(!l[f])throw new TypeError("invalid suite type");p=8*l[f].key,g=l[f].iv}var m=a(h,!1,p,g);return d(f,m.key,m.iv)},s.createDecipheriv=s.Decipheriv=d,s.listCiphers=s.getCiphers=function(){return Object.keys(l).concat(o.getCiphers())}},{"browserify-aes/browser":191,"browserify-aes/modes":202,"browserify-des":207,"browserify-des/modes":208,evp_bytestokey:423}],207:[function(t,r,s){var i=t("cipher-base"),o=t("des.js"),u=t("inherits"),l=t("safe-buffer").Buffer,a={"des-ede3-cbc":o.CBC.instantiate(o.EDE),"des-ede3":o.EDE,"des-ede-cbc":o.CBC.instantiate(o.EDE),"des-ede":o.EDE,"des-cbc":o.CBC.instantiate(o.DES),"des-ecb":o.DES};function c(d){i.call(this);var f,h=d.mode.toLowerCase(),p=a[h];f=d.decrypt?"decrypt":"encrypt";var g=d.key;l.isBuffer(g)||(g=l.from(g)),h!=="des-ede"&&h!=="des-ede-cbc"||(g=l.concat([g,g.slice(0,8)]));var m=d.iv;l.isBuffer(m)||(m=l.from(m)),this._des=p.create({key:g,iv:m,type:f})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],r.exports=c,u(c,i),c.prototype._update=function(d){return l.from(this._des.update(d))},c.prototype._final=function(){return l.from(this._des.final())}},{"cipher-base":221,"des.js":394,inherits:440,"safe-buffer":494}],208:[function(t,r,s){s["des-ecb"]={key:8,iv:0},s["des-cbc"]=s.des={key:8,iv:8},s["des-ede3-cbc"]=s.des3={key:24,iv:8},s["des-ede3"]={key:24,iv:0},s["des-ede-cbc"]={key:16,iv:8},s["des-ede"]={key:16,iv:0}},{}],209:[function(t,r,s){(function(i){(function(){var o=t("bn.js"),u=t("randombytes");function l(c){var d,f=c.modulus.byteLength();do d=new o(u(f));while(d.cmp(c.modulus)>=0||!d.umod(c.prime1)||!d.umod(c.prime2));return d}function a(c,d){var f=function(U){var P=l(U);return{blinder:P.toRed(o.mont(U.modulus)).redPow(new o(U.publicExponent)).fromRed(),unblinder:P.invm(U.modulus)}}(d),h=d.modulus.byteLength(),p=new o(c).mul(f.blinder).umod(d.modulus),g=p.toRed(o.mont(d.prime1)),m=p.toRed(o.mont(d.prime2)),y=d.coefficient,b=d.prime1,v=d.prime2,k=g.redPow(d.exponent1).fromRed(),j=m.redPow(d.exponent2).fromRed(),I=k.isub(j).imul(y).umod(b).imul(v);return j.iadd(I).imul(f.unblinder).umod(d.modulus).toArrayLike(i,"be",h)}a.getr=l,r.exports=a}).call(this)}).call(this,t("buffer").Buffer)},{"bn.js":186,buffer:220,randombytes:475}],210:[function(t,r,s){r.exports=t("./browser/algorithms.json")},{"./browser/algorithms.json":211}],211:[function(t,r,s){r.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],212:[function(t,r,s){r.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],213:[function(t,r,s){var i=t("safe-buffer").Buffer,o=t("create-hash"),u=t("readable-stream"),l=t("inherits"),a=t("./sign"),c=t("./verify"),d=t("./algorithms.json");function f(m){u.Writable.call(this);var y=d[m];if(!y)throw new Error("Unknown message digest");this._hashType=y.hash,this._hash=o(y.hash),this._tag=y.id,this._signType=y.sign}function h(m){u.Writable.call(this);var y=d[m];if(!y)throw new Error("Unknown message digest");this._hash=o(y.hash),this._tag=y.id,this._signType=y.sign}function p(m){return new f(m)}function g(m){return new h(m)}Object.keys(d).forEach(function(m){d[m].id=i.from(d[m].id,"hex"),d[m.toLowerCase()]=d[m]}),l(f,u.Writable),f.prototype._write=function(m,y,b){this._hash.update(m),b()},f.prototype.update=function(m,y){return typeof m=="string"&&(m=i.from(m,y)),this._hash.update(m),this},f.prototype.sign=function(m,y){this.end();var b=this._hash.digest(),v=a(b,m,this._hashType,this._signType,this._tag);return y?v.toString(y):v},l(h,u.Writable),h.prototype._write=function(m,y,b){this._hash.update(m),b()},h.prototype.update=function(m,y){return typeof m=="string"&&(m=i.from(m,y)),this._hash.update(m),this},h.prototype.verify=function(m,y,b){typeof y=="string"&&(y=i.from(y,b)),this.end();var v=this._hash.digest();return c(y,v,m,this._signType,this._tag)},r.exports={Sign:p,Verify:g,createSign:p,createVerify:g}},{"./algorithms.json":211,"./sign":214,"./verify":215,"create-hash":386,inherits:440,"readable-stream":491,"safe-buffer":494}],214:[function(t,r,s){var i=t("safe-buffer").Buffer,o=t("create-hmac"),u=t("browserify-rsa"),l=t("elliptic").ec,a=t("bn.js"),c=t("parse-asn1"),d=t("./curves.json");function f(m,y,b,v){if((m=i.from(m.toArray())).length<y.byteLength()){var k=i.alloc(y.byteLength()-m.length);m=i.concat([k,m])}var j=b.length,I=function(z,q){z=(z=h(z,q)).mod(q);var $=i.from(z.toArray());if($.length<q.byteLength()){var F=i.alloc(q.byteLength()-$.length);$=i.concat([F,$])}return $}(b,y),U=i.alloc(j);U.fill(1);var P=i.alloc(j);return P=o(v,P).update(U).update(i.from([0])).update(m).update(I).digest(),U=o(v,P).update(U).digest(),{k:P=o(v,P).update(U).update(i.from([1])).update(m).update(I).digest(),v:U=o(v,P).update(U).digest()}}function h(m,y){var b=new a(m),v=(m.length<<3)-y.bitLength();return v>0&&b.ishrn(v),b}function p(m,y,b){var v,k;do{for(v=i.alloc(0);8*v.length<m.bitLength();)y.v=o(b,y.k).update(y.v).digest(),v=i.concat([v,y.v]);k=h(v,m),y.k=o(b,y.k).update(y.v).update(i.from([0])).digest(),y.v=o(b,y.k).update(y.v).digest()}while(k.cmp(m)!==-1);return k}function g(m,y,b,v){return m.toRed(a.mont(b)).redPow(y).fromRed().mod(v)}r.exports=function(m,y,b,v,k){var j=c(y);if(j.curve){if(v!=="ecdsa"&&v!=="ecdsa/rsa")throw new Error("wrong private key type");return function(z,q){var $=d[q.curve.join(".")];if(!$)throw new Error("unknown curve "+q.curve.join("."));var F=new l($).keyFromPrivate(q.privateKey).sign(z);return i.from(F.toDER())}(m,j)}if(j.type==="dsa"){if(v!=="dsa")throw new Error("wrong private key type");return function(z,q,$){for(var F,T=q.params.priv_key,N=q.params.p,C=q.params.q,w=q.params.g,_=new a(0),x=h(z,C).mod(C),S=!1,A=f(T,C,z,$);S===!1;)F=p(C,A,$),_=g(w,F,N,C),(S=F.invm(C).imul(x.add(T.mul(_))).mod(C)).cmpn(0)===0&&(S=!1,_=new a(0));return function(B,E){B=B.toArray(),E=E.toArray(),128&B[0]&&(B=[0].concat(B)),128&E[0]&&(E=[0].concat(E));var V=[48,B.length+E.length+4,2,B.length];return V=V.concat(B,[2,E.length],E),i.from(V)}(_,S)}(m,j,b)}if(v!=="rsa"&&v!=="ecdsa/rsa")throw new Error("wrong private key type");m=i.concat([k,m]);for(var I=j.modulus.byteLength(),U=[0,1];m.length+U.length+1<I;)U.push(255);U.push(0);for(var P=-1;++P<m.length;)U.push(m[P]);return u(U,j)},r.exports.getKey=f,r.exports.makeKey=p},{"./curves.json":212,"bn.js":186,"browserify-rsa":209,"create-hmac":388,elliptic:405,"parse-asn1":459,"safe-buffer":494}],215:[function(t,r,s){var i=t("safe-buffer").Buffer,o=t("bn.js"),u=t("elliptic").ec,l=t("parse-asn1"),a=t("./curves.json");function c(d,f){if(d.cmpn(0)<=0)throw new Error("invalid sig");if(d.cmp(f)>=f)throw new Error("invalid sig")}r.exports=function(d,f,h,p,g){var m=l(h);if(m.type==="ec"){if(p!=="ecdsa"&&p!=="ecdsa/rsa")throw new Error("wrong public key type");return function(U,P,z){var q=a[z.data.algorithm.curve.join(".")];if(!q)throw new Error("unknown curve "+z.data.algorithm.curve.join("."));var $=new u(q),F=z.data.subjectPrivateKey.data;return $.verify(P,U,F)}(d,f,m)}if(m.type==="dsa"){if(p!=="dsa")throw new Error("wrong public key type");return function(U,P,z){var q=z.data.p,$=z.data.q,F=z.data.g,T=z.data.pub_key,N=l.signature.decode(U,"der"),C=N.s,w=N.r;c(C,$),c(w,$);var _=o.mont(q),x=C.invm($);return F.toRed(_).redPow(new o(P).mul(x).mod($)).fromRed().mul(T.toRed(_).redPow(w.mul(x).mod($)).fromRed()).mod(q).mod($).cmp(w)===0}(d,f,m)}if(p!=="rsa"&&p!=="ecdsa/rsa")throw new Error("wrong public key type");f=i.concat([g,f]);for(var y=m.modulus.byteLength(),b=[1],v=0;f.length+b.length+2<y;)b.push(255),v++;b.push(0);for(var k=-1;++k<f.length;)b.push(f[k]);b=i.from(b);var j=o.mont(m.modulus);d=(d=new o(d).toRed(j)).redPow(new o(m.publicExponent)),d=i.from(d.fromRed().toArray());var I=v<8?1:0;for(y=Math.min(d.length,b.length),d.length!==b.length&&(I=1),k=-1;++k<y;)I|=d[k]^b[k];return I===0}},{"./curves.json":212,"bn.js":186,elliptic:405,"parse-asn1":459,"safe-buffer":494}],216:[function(t,r,s){},{}],217:[function(t,r,s){var i=t("buffer"),o=i.Buffer;function u(a,c){for(var d in a)c[d]=a[d]}function l(a,c,d){return o(a,c,d)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?r.exports=i:(u(i,s),s.Buffer=l),u(o,l),l.from=function(a,c,d){if(typeof a=="number")throw new TypeError("Argument must not be a number");return o(a,c,d)},l.alloc=function(a,c,d){if(typeof a!="number")throw new TypeError("Argument must be a number");var f=o(a);return c!==void 0?typeof d=="string"?f.fill(c,d):f.fill(c):f.fill(0),f},l.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return o(a)},l.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(a)}},{buffer:220}],218:[function(t,r,s){var i=t("safe-buffer").Buffer,o=i.isEncoding||function(m){switch((m=""+m)&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function u(m){var y;switch(this.encoding=function(b){var v=function(k){if(!k)return"utf8";for(var j;;)switch(k){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return k;default:if(j)return;k=(""+k).toLowerCase(),j=!0}}(b);if(typeof v!="string"&&(i.isEncoding===o||!o(b)))throw new Error("Unknown encoding: "+b);return v||b}(m),this.encoding){case"utf16le":this.text=c,this.end=d,y=4;break;case"utf8":this.fillLast=a,y=4;break;case"base64":this.text=f,this.end=h,y=3;break;default:return this.write=p,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(y)}function l(m){return m<=127?0:m>>5==6?2:m>>4==14?3:m>>3==30?4:m>>6==2?-1:-2}function a(m){var y=this.lastTotal-this.lastNeed,b=function(v,k,j){if((192&k[0])!=128)return v.lastNeed=0,"";if(v.lastNeed>1&&k.length>1){if((192&k[1])!=128)return v.lastNeed=1,"";if(v.lastNeed>2&&k.length>2&&(192&k[2])!=128)return v.lastNeed=2,""}}(this,m);return b!==void 0?b:this.lastNeed<=m.length?(m.copy(this.lastChar,y,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(m.copy(this.lastChar,y,0,m.length),void(this.lastNeed-=m.length))}function c(m,y){if((m.length-y)%2==0){var b=m.toString("utf16le",y);if(b){var v=b.charCodeAt(b.length-1);if(v>=55296&&v<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=m[m.length-1],m.toString("utf16le",y,m.length-1)}function d(m){var y=m&&m.length?this.write(m):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return y+this.lastChar.toString("utf16le",0,b)}return y}function f(m,y){var b=(m.length-y)%3;return b===0?m.toString("base64",y):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=m[m.length-1]:(this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1]),m.toString("base64",y,m.length-b))}function h(m){var y=m&&m.length?this.write(m):"";return this.lastNeed?y+this.lastChar.toString("base64",0,3-this.lastNeed):y}function p(m){return m.toString(this.encoding)}function g(m){return m&&m.length?this.write(m):""}s.StringDecoder=u,u.prototype.write=function(m){if(m.length===0)return"";var y,b;if(this.lastNeed){if((y=this.fillLast(m))===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<m.length?y?y+this.text(m,b):this.text(m,b):y||""},u.prototype.end=function(m){var y=m&&m.length?this.write(m):"";return this.lastNeed?y+"":y},u.prototype.text=function(m,y){var b=function(k,j,I){var U=j.length-1;if(U<I)return 0;var P=l(j[U]);return P>=0?(P>0&&(k.lastNeed=P-1),P):--U<I||P===-2?0:(P=l(j[U]))>=0?(P>0&&(k.lastNeed=P-2),P):--U<I||P===-2?0:(P=l(j[U]))>=0?(P>0&&(P===2?P=0:k.lastNeed=P-3),P):0}(this,m,y);if(!this.lastNeed)return m.toString("utf8",y);this.lastTotal=b;var v=m.length-(b-this.lastNeed);return m.copy(this.lastChar,0,v),m.toString("utf8",y,v)},u.prototype.fillLast=function(m){if(this.lastNeed<=m.length)return m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,m.length),this.lastNeed-=m.length}},{"safe-buffer":217}],219:[function(t,r,s){(function(i){(function(){r.exports=function(o,u){for(var l=Math.min(o.length,u.length),a=new i(l),c=0;c<l;++c)a[c]=o[c]^u[c];return a}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220}],220:[function(t,r,s){(function(i){(function(){var o=t("base64-js"),u=t("ieee754");s.Buffer=a,s.SlowBuffer=function(L){return+L!=L&&(L=0),a.alloc(+L)},s.INSPECT_MAX_BYTES=50;function l(L){if(L>2147483647)throw new RangeError('The value "'+L+'" is invalid for option "size"');var O=new Uint8Array(L);return O.__proto__=a.prototype,O}function a(L,O,G){if(typeof L=="number"){if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(L)}return c(L,O,G)}function c(L,O,G){if(typeof L=="string")return function(ot,mt){if(typeof mt=="string"&&mt!==""||(mt="utf8"),!a.isEncoding(mt))throw new TypeError("Unknown encoding: "+mt);var pt=0|g(ot,mt),st=l(pt),at=st.write(ot,mt);return at!==pt&&(st=st.slice(0,at)),st}(L,O);if(ArrayBuffer.isView(L))return h(L);if(L==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(D(L,ArrayBuffer)||L&&D(L.buffer,ArrayBuffer))return function(ot,mt,pt){if(mt<0||ot.byteLength<mt)throw new RangeError('"offset" is outside of buffer bounds');if(ot.byteLength<mt+(pt||0))throw new RangeError('"length" is outside of buffer bounds');var st;return st=mt===void 0&&pt===void 0?new Uint8Array(ot):pt===void 0?new Uint8Array(ot,mt):new Uint8Array(ot,mt,pt),st.__proto__=a.prototype,st}(L,O,G);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var nt=L.valueOf&&L.valueOf();if(nt!=null&&nt!==L)return a.from(nt,O,G);var ct=function(ot){if(a.isBuffer(ot)){var mt=0|p(ot.length),pt=l(mt);return pt.length===0||ot.copy(pt,0,0,mt),pt}if(ot.length!==void 0)return typeof ot.length!="number"||Z(ot.length)?l(0):h(ot);if(ot.type==="Buffer"&&Array.isArray(ot.data))return h(ot.data)}(L);if(ct)return ct;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return a.from(L[Symbol.toPrimitive]("string"),O,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}function d(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function f(L){return d(L),l(L<0?0:0|p(L))}function h(L){for(var O=L.length<0?0:0|p(L.length),G=l(O),nt=0;nt<O;nt+=1)G[nt]=255&L[nt];return G}function p(L){if(L>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|L}function g(L,O){if(a.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||D(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);var G=L.length,nt=arguments.length>2&&arguments[2]===!0;if(!nt&&G===0)return 0;for(var ct=!1;;)switch(O){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return V(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*G;case"hex":return G>>>1;case"base64":return X(L).length;default:if(ct)return nt?-1:V(L).length;O=(""+O).toLowerCase(),ct=!0}}function m(L,O,G){var nt=!1;if((O===void 0||O<0)&&(O=0),O>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0)<=(O>>>=0))return"";for(L||(L="utf8");;)switch(L){case"hex":return N(this,O,G);case"utf8":case"utf-8":return $(this,O,G);case"ascii":return F(this,O,G);case"latin1":case"binary":return T(this,O,G);case"base64":return q(this,O,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,O,G);default:if(nt)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),nt=!0}}function y(L,O,G){var nt=L[O];L[O]=L[G],L[G]=nt}function b(L,O,G,nt,ct){if(L.length===0)return-1;if(typeof G=="string"?(nt=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),Z(G=+G)&&(G=ct?0:L.length-1),G<0&&(G=L.length+G),G>=L.length){if(ct)return-1;G=L.length-1}else if(G<0){if(!ct)return-1;G=0}if(typeof O=="string"&&(O=a.from(O,nt)),a.isBuffer(O))return O.length===0?-1:v(L,O,G,nt,ct);if(typeof O=="number")return O&=255,typeof Uint8Array.prototype.indexOf=="function"?ct?Uint8Array.prototype.indexOf.call(L,O,G):Uint8Array.prototype.lastIndexOf.call(L,O,G):v(L,[O],G,nt,ct);throw new TypeError("val must be string, number or Buffer")}function v(L,O,G,nt,ct){var ot,mt=1,pt=L.length,st=O.length;if(nt!==void 0&&((nt=String(nt).toLowerCase())==="ucs2"||nt==="ucs-2"||nt==="utf16le"||nt==="utf-16le")){if(L.length<2||O.length<2)return-1;mt=2,pt/=2,st/=2,G/=2}function at(St,Tt){return mt===1?St[Tt]:St.readUInt16BE(Tt*mt)}if(ct){var vt=-1;for(ot=G;ot<pt;ot++)if(at(L,ot)===at(O,vt===-1?0:ot-vt)){if(vt===-1&&(vt=ot),ot-vt+1===st)return vt*mt}else vt!==-1&&(ot-=ot-vt),vt=-1}else for(G+st>pt&&(G=pt-st),ot=G;ot>=0;ot--){for(var yt=!0,kt=0;kt<st;kt++)if(at(L,ot+kt)!==at(O,kt)){yt=!1;break}if(yt)return ot}return-1}function k(L,O,G,nt){G=Number(G)||0;var ct=L.length-G;nt?(nt=Number(nt))>ct&&(nt=ct):nt=ct;var ot=O.length;nt>ot/2&&(nt=ot/2);for(var mt=0;mt<nt;++mt){var pt=parseInt(O.substr(2*mt,2),16);if(Z(pt))return mt;L[G+mt]=pt}return mt}function j(L,O,G,nt){return Q(V(O,L.length-G),L,G,nt)}function I(L,O,G,nt){return Q(function(ct){for(var ot=[],mt=0;mt<ct.length;++mt)ot.push(255&ct.charCodeAt(mt));return ot}(O),L,G,nt)}function U(L,O,G,nt){return I(L,O,G,nt)}function P(L,O,G,nt){return Q(X(O),L,G,nt)}function z(L,O,G,nt){return Q(function(ct,ot){for(var mt,pt,st,at=[],vt=0;vt<ct.length&&!((ot-=2)<0);++vt)mt=ct.charCodeAt(vt),pt=mt>>8,st=mt%256,at.push(st),at.push(pt);return at}(O,L.length-G),L,G,nt)}function q(L,O,G){return O===0&&G===L.length?o.fromByteArray(L):o.fromByteArray(L.slice(O,G))}function $(L,O,G){G=Math.min(L.length,G);for(var nt=[],ct=O;ct<G;){var ot,mt,pt,st,at=L[ct],vt=null,yt=at>239?4:at>223?3:at>191?2:1;if(ct+yt<=G)switch(yt){case 1:at<128&&(vt=at);break;case 2:(192&(ot=L[ct+1]))==128&&(st=(31&at)<<6|63&ot)>127&&(vt=st);break;case 3:ot=L[ct+1],mt=L[ct+2],(192&ot)==128&&(192&mt)==128&&(st=(15&at)<<12|(63&ot)<<6|63&mt)>2047&&(st<55296||st>57343)&&(vt=st);break;case 4:ot=L[ct+1],mt=L[ct+2],pt=L[ct+3],(192&ot)==128&&(192&mt)==128&&(192&pt)==128&&(st=(15&at)<<18|(63&ot)<<12|(63&mt)<<6|63&pt)>65535&&st<1114112&&(vt=st)}vt===null?(vt=65533,yt=1):vt>65535&&(vt-=65536,nt.push(vt>>>10&1023|55296),vt=56320|1023&vt),nt.push(vt),ct+=yt}return function(kt){var St=kt.length;if(St<=4096)return String.fromCharCode.apply(String,kt);for(var Tt="",Lt=0;Lt<St;)Tt+=String.fromCharCode.apply(String,kt.slice(Lt,Lt+=4096));return Tt}(nt)}s.kMaxLength=2147483647,a.TYPED_ARRAY_SUPPORT=function(){try{var L=new Uint8Array(1);return L.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},L.foo()===42}catch{return!1}}(),a.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function(L,O,G){return c(L,O,G)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(L,O,G){return function(nt,ct,ot){return d(nt),nt<=0?l(nt):ct!==void 0?typeof ot=="string"?l(nt).fill(ct,ot):l(nt).fill(ct):l(nt)}(L,O,G)},a.allocUnsafe=function(L){return f(L)},a.allocUnsafeSlow=function(L){return f(L)},a.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==a.prototype},a.compare=function(L,O){if(D(L,Uint8Array)&&(L=a.from(L,L.offset,L.byteLength)),D(O,Uint8Array)&&(O=a.from(O,O.offset,O.byteLength)),!a.isBuffer(L)||!a.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===O)return 0;for(var G=L.length,nt=O.length,ct=0,ot=Math.min(G,nt);ct<ot;++ct)if(L[ct]!==O[ct]){G=L[ct],nt=O[ct];break}return G<nt?-1:nt<G?1:0},a.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(L,O){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return a.alloc(0);var G;if(O===void 0)for(O=0,G=0;G<L.length;++G)O+=L[G].length;var nt=a.allocUnsafe(O),ct=0;for(G=0;G<L.length;++G){var ot=L[G];if(D(ot,Uint8Array)&&(ot=a.from(ot)),!a.isBuffer(ot))throw new TypeError('"list" argument must be an Array of Buffers');ot.copy(nt,ct),ct+=ot.length}return nt},a.byteLength=g,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var L=this.length;if(L%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<L;O+=2)y(this,O,O+1);return this},a.prototype.swap32=function(){var L=this.length;if(L%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<L;O+=4)y(this,O,O+3),y(this,O+1,O+2);return this},a.prototype.swap64=function(){var L=this.length;if(L%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<L;O+=8)y(this,O,O+7),y(this,O+1,O+6),y(this,O+2,O+5),y(this,O+3,O+4);return this},a.prototype.toString=function(){var L=this.length;return L===0?"":arguments.length===0?$(this,0,L):m.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(L){if(!a.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L||a.compare(this,L)===0},a.prototype.inspect=function(){var L="",O=s.INSPECT_MAX_BYTES;return L=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(L+=" ... "),"<Buffer "+L+">"},a.prototype.compare=function(L,O,G,nt,ct){if(D(L,Uint8Array)&&(L=a.from(L,L.offset,L.byteLength)),!a.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(O===void 0&&(O=0),G===void 0&&(G=L?L.length:0),nt===void 0&&(nt=0),ct===void 0&&(ct=this.length),O<0||G>L.length||nt<0||ct>this.length)throw new RangeError("out of range index");if(nt>=ct&&O>=G)return 0;if(nt>=ct)return-1;if(O>=G)return 1;if(this===L)return 0;for(var ot=(ct>>>=0)-(nt>>>=0),mt=(G>>>=0)-(O>>>=0),pt=Math.min(ot,mt),st=this.slice(nt,ct),at=L.slice(O,G),vt=0;vt<pt;++vt)if(st[vt]!==at[vt]){ot=st[vt],mt=at[vt];break}return ot<mt?-1:mt<ot?1:0},a.prototype.includes=function(L,O,G){return this.indexOf(L,O,G)!==-1},a.prototype.indexOf=function(L,O,G){return b(this,L,O,G,!0)},a.prototype.lastIndexOf=function(L,O,G){return b(this,L,O,G,!1)},a.prototype.write=function(L,O,G,nt){if(O===void 0)nt="utf8",G=this.length,O=0;else if(G===void 0&&typeof O=="string")nt=O,G=this.length,O=0;else{if(!isFinite(O))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");O>>>=0,isFinite(G)?(G>>>=0,nt===void 0&&(nt="utf8")):(nt=G,G=void 0)}var ct=this.length-O;if((G===void 0||G>ct)&&(G=ct),L.length>0&&(G<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");nt||(nt="utf8");for(var ot=!1;;)switch(nt){case"hex":return k(this,L,O,G);case"utf8":case"utf-8":return j(this,L,O,G);case"ascii":return I(this,L,O,G);case"latin1":case"binary":return U(this,L,O,G);case"base64":return P(this,L,O,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,L,O,G);default:if(ot)throw new TypeError("Unknown encoding: "+nt);nt=(""+nt).toLowerCase(),ot=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F(L,O,G){var nt="";G=Math.min(L.length,G);for(var ct=O;ct<G;++ct)nt+=String.fromCharCode(127&L[ct]);return nt}function T(L,O,G){var nt="";G=Math.min(L.length,G);for(var ct=O;ct<G;++ct)nt+=String.fromCharCode(L[ct]);return nt}function N(L,O,G){var nt=L.length;(!O||O<0)&&(O=0),(!G||G<0||G>nt)&&(G=nt);for(var ct="",ot=O;ot<G;++ot)ct+=E(L[ot]);return ct}function C(L,O,G){for(var nt=L.slice(O,G),ct="",ot=0;ot<nt.length;ot+=2)ct+=String.fromCharCode(nt[ot]+256*nt[ot+1]);return ct}function w(L,O,G){if(L%1!=0||L<0)throw new RangeError("offset is not uint");if(L+O>G)throw new RangeError("Trying to access beyond buffer length")}function _(L,O,G,nt,ct,ot){if(!a.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>ct||O<ot)throw new RangeError('"value" argument is out of bounds');if(G+nt>L.length)throw new RangeError("Index out of range")}function x(L,O,G,nt,ct,ot){if(G+nt>L.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function S(L,O,G,nt,ct){return O=+O,G>>>=0,ct||x(L,0,G,4),u.write(L,O,G,nt,23,4),G+4}function A(L,O,G,nt,ct){return O=+O,G>>>=0,ct||x(L,0,G,8),u.write(L,O,G,nt,52,8),G+8}a.prototype.slice=function(L,O){var G=this.length;(L=~~L)<0?(L+=G)<0&&(L=0):L>G&&(L=G),(O=O===void 0?G:~~O)<0?(O+=G)<0&&(O=0):O>G&&(O=G),O<L&&(O=L);var nt=this.subarray(L,O);return nt.__proto__=a.prototype,nt},a.prototype.readUIntLE=function(L,O,G){L>>>=0,O>>>=0,G||w(L,O,this.length);for(var nt=this[L],ct=1,ot=0;++ot<O&&(ct*=256);)nt+=this[L+ot]*ct;return nt},a.prototype.readUIntBE=function(L,O,G){L>>>=0,O>>>=0,G||w(L,O,this.length);for(var nt=this[L+--O],ct=1;O>0&&(ct*=256);)nt+=this[L+--O]*ct;return nt},a.prototype.readUInt8=function(L,O){return L>>>=0,O||w(L,1,this.length),this[L]},a.prototype.readUInt16LE=function(L,O){return L>>>=0,O||w(L,2,this.length),this[L]|this[L+1]<<8},a.prototype.readUInt16BE=function(L,O){return L>>>=0,O||w(L,2,this.length),this[L]<<8|this[L+1]},a.prototype.readUInt32LE=function(L,O){return L>>>=0,O||w(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+16777216*this[L+3]},a.prototype.readUInt32BE=function(L,O){return L>>>=0,O||w(L,4,this.length),16777216*this[L]+(this[L+1]<<16|this[L+2]<<8|this[L+3])},a.prototype.readIntLE=function(L,O,G){L>>>=0,O>>>=0,G||w(L,O,this.length);for(var nt=this[L],ct=1,ot=0;++ot<O&&(ct*=256);)nt+=this[L+ot]*ct;return nt>=(ct*=128)&&(nt-=Math.pow(2,8*O)),nt},a.prototype.readIntBE=function(L,O,G){L>>>=0,O>>>=0,G||w(L,O,this.length);for(var nt=O,ct=1,ot=this[L+--nt];nt>0&&(ct*=256);)ot+=this[L+--nt]*ct;return ot>=(ct*=128)&&(ot-=Math.pow(2,8*O)),ot},a.prototype.readInt8=function(L,O){return L>>>=0,O||w(L,1,this.length),128&this[L]?-1*(255-this[L]+1):this[L]},a.prototype.readInt16LE=function(L,O){L>>>=0,O||w(L,2,this.length);var G=this[L]|this[L+1]<<8;return 32768&G?4294901760|G:G},a.prototype.readInt16BE=function(L,O){L>>>=0,O||w(L,2,this.length);var G=this[L+1]|this[L]<<8;return 32768&G?4294901760|G:G},a.prototype.readInt32LE=function(L,O){return L>>>=0,O||w(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},a.prototype.readInt32BE=function(L,O){return L>>>=0,O||w(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},a.prototype.readFloatLE=function(L,O){return L>>>=0,O||w(L,4,this.length),u.read(this,L,!0,23,4)},a.prototype.readFloatBE=function(L,O){return L>>>=0,O||w(L,4,this.length),u.read(this,L,!1,23,4)},a.prototype.readDoubleLE=function(L,O){return L>>>=0,O||w(L,8,this.length),u.read(this,L,!0,52,8)},a.prototype.readDoubleBE=function(L,O){return L>>>=0,O||w(L,8,this.length),u.read(this,L,!1,52,8)},a.prototype.writeUIntLE=function(L,O,G,nt){L=+L,O>>>=0,G>>>=0,nt||_(this,L,O,G,Math.pow(2,8*G)-1,0);var ct=1,ot=0;for(this[O]=255&L;++ot<G&&(ct*=256);)this[O+ot]=L/ct&255;return O+G},a.prototype.writeUIntBE=function(L,O,G,nt){L=+L,O>>>=0,G>>>=0,nt||_(this,L,O,G,Math.pow(2,8*G)-1,0);var ct=G-1,ot=1;for(this[O+ct]=255&L;--ct>=0&&(ot*=256);)this[O+ct]=L/ot&255;return O+G},a.prototype.writeUInt8=function(L,O,G){return L=+L,O>>>=0,G||_(this,L,O,1,255,0),this[O]=255&L,O+1},a.prototype.writeUInt16LE=function(L,O,G){return L=+L,O>>>=0,G||_(this,L,O,2,65535,0),this[O]=255&L,this[O+1]=L>>>8,O+2},a.prototype.writeUInt16BE=function(L,O,G){return L=+L,O>>>=0,G||_(this,L,O,2,65535,0),this[O]=L>>>8,this[O+1]=255&L,O+2},a.prototype.writeUInt32LE=function(L,O,G){return L=+L,O>>>=0,G||_(this,L,O,4,4294967295,0),this[O+3]=L>>>24,this[O+2]=L>>>16,this[O+1]=L>>>8,this[O]=255&L,O+4},a.prototype.writeUInt32BE=function(L,O,G){return L=+L,O>>>=0,G||_(this,L,O,4,4294967295,0),this[O]=L>>>24,this[O+1]=L>>>16,this[O+2]=L>>>8,this[O+3]=255&L,O+4},a.prototype.writeIntLE=function(L,O,G,nt){if(L=+L,O>>>=0,!nt){var ct=Math.pow(2,8*G-1);_(this,L,O,G,ct-1,-ct)}var ot=0,mt=1,pt=0;for(this[O]=255&L;++ot<G&&(mt*=256);)L<0&&pt===0&&this[O+ot-1]!==0&&(pt=1),this[O+ot]=(L/mt>>0)-pt&255;return O+G},a.prototype.writeIntBE=function(L,O,G,nt){if(L=+L,O>>>=0,!nt){var ct=Math.pow(2,8*G-1);_(this,L,O,G,ct-1,-ct)}var ot=G-1,mt=1,pt=0;for(this[O+ot]=255&L;--ot>=0&&(mt*=256);)L<0&&pt===0&&this[O+ot+1]!==0&&(pt=1),this[O+ot]=(L/mt>>0)-pt&255;return O+G},a.prototype.writeInt8=function(L,O,G){return L=+L,O>>>=0,G||_(this,L,O,1,127,-128),L<0&&(L=255+L+1),this[O]=255&L,O+1},a.prototype.writeInt16LE=function(L,O,G){return L=+L,O>>>=0,G||_(this,L,O,2,32767,-32768),this[O]=255&L,this[O+1]=L>>>8,O+2},a.prototype.writeInt16BE=function(L,O,G){return L=+L,O>>>=0,G||_(this,L,O,2,32767,-32768),this[O]=L>>>8,this[O+1]=255&L,O+2},a.prototype.writeInt32LE=function(L,O,G){return L=+L,O>>>=0,G||_(this,L,O,4,2147483647,-2147483648),this[O]=255&L,this[O+1]=L>>>8,this[O+2]=L>>>16,this[O+3]=L>>>24,O+4},a.prototype.writeInt32BE=function(L,O,G){return L=+L,O>>>=0,G||_(this,L,O,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[O]=L>>>24,this[O+1]=L>>>16,this[O+2]=L>>>8,this[O+3]=255&L,O+4},a.prototype.writeFloatLE=function(L,O,G){return S(this,L,O,!0,G)},a.prototype.writeFloatBE=function(L,O,G){return S(this,L,O,!1,G)},a.prototype.writeDoubleLE=function(L,O,G){return A(this,L,O,!0,G)},a.prototype.writeDoubleBE=function(L,O,G){return A(this,L,O,!1,G)},a.prototype.copy=function(L,O,G,nt){if(!a.isBuffer(L))throw new TypeError("argument should be a Buffer");if(G||(G=0),nt||nt===0||(nt=this.length),O>=L.length&&(O=L.length),O||(O=0),nt>0&&nt<G&&(nt=G),nt===G||L.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(nt<0)throw new RangeError("sourceEnd out of bounds");nt>this.length&&(nt=this.length),L.length-O<nt-G&&(nt=L.length-O+G);var ct=nt-G;if(this===L&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(O,G,nt);else if(this===L&&G<O&&O<nt)for(var ot=ct-1;ot>=0;--ot)L[ot+O]=this[ot+G];else Uint8Array.prototype.set.call(L,this.subarray(G,nt),O);return ct},a.prototype.fill=function(L,O,G,nt){if(typeof L=="string"){if(typeof O=="string"?(nt=O,O=0,G=this.length):typeof G=="string"&&(nt=G,G=this.length),nt!==void 0&&typeof nt!="string")throw new TypeError("encoding must be a string");if(typeof nt=="string"&&!a.isEncoding(nt))throw new TypeError("Unknown encoding: "+nt);if(L.length===1){var ct=L.charCodeAt(0);(nt==="utf8"&&ct<128||nt==="latin1")&&(L=ct)}}else typeof L=="number"&&(L&=255);if(O<0||this.length<O||this.length<G)throw new RangeError("Out of range index");if(G<=O)return this;var ot;if(O>>>=0,G=G===void 0?this.length:G>>>0,L||(L=0),typeof L=="number")for(ot=O;ot<G;++ot)this[ot]=L;else{var mt=a.isBuffer(L)?L:a.from(L,nt),pt=mt.length;if(pt===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(ot=0;ot<G-O;++ot)this[ot+O]=mt[ot%pt]}return this};var B=/[^+/0-9A-Za-z-_]/g;function E(L){return L<16?"0"+L.toString(16):L.toString(16)}function V(L,O){var G;O=O||1/0;for(var nt=L.length,ct=null,ot=[],mt=0;mt<nt;++mt){if((G=L.charCodeAt(mt))>55295&&G<57344){if(!ct){if(G>56319){(O-=3)>-1&&ot.push(239,191,189);continue}if(mt+1===nt){(O-=3)>-1&&ot.push(239,191,189);continue}ct=G;continue}if(G<56320){(O-=3)>-1&&ot.push(239,191,189),ct=G;continue}G=65536+(ct-55296<<10|G-56320)}else ct&&(O-=3)>-1&&ot.push(239,191,189);if(ct=null,G<128){if((O-=1)<0)break;ot.push(G)}else if(G<2048){if((O-=2)<0)break;ot.push(G>>6|192,63&G|128)}else if(G<65536){if((O-=3)<0)break;ot.push(G>>12|224,G>>6&63|128,63&G|128)}else{if(!(G<1114112))throw new Error("Invalid code point");if((O-=4)<0)break;ot.push(G>>18|240,G>>12&63|128,G>>6&63|128,63&G|128)}}return ot}function X(L){return o.toByteArray(function(O){if((O=(O=O.split("=")[0]).trim().replace(B,"")).length<2)return"";for(;O.length%4!=0;)O+="=";return O}(L))}function Q(L,O,G,nt){for(var ct=0;ct<nt&&!(ct+G>=O.length||ct>=L.length);++ct)O[ct+G]=L[ct];return ct}function D(L,O){return L instanceof O||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===O.name}function Z(L){return L!=L}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":185,buffer:220,ieee754:439}],221:[function(t,r,s){var i=t("safe-buffer").Buffer,o=t("stream").Transform,u=t("string_decoder").StringDecoder;function l(a){o.call(this),this.hashMode=typeof a=="string",this.hashMode?this[a]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}t("inherits")(l,o),l.prototype.update=function(a,c,d){typeof a=="string"&&(a=i.from(a,c));var f=this._update(a);return this.hashMode?this:(d&&(f=this._toString(f,d)),f)},l.prototype.setAutoPadding=function(){},l.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},l.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},l.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},l.prototype._transform=function(a,c,d){var f;try{this.hashMode?this._update(a):this.push(this._update(a))}catch(h){f=h}finally{d(f)}},l.prototype._flush=function(a){var c;try{this.push(this.__final())}catch(d){c=d}a(c)},l.prototype._finalOrDigest=function(a){var c=this.__final()||i.alloc(0);return a&&(c=this._toString(c,a,!0)),c},l.prototype._toString=function(a,c,d){if(this._decoder||(this._decoder=new u(c),this._encoding=c),this._encoding!==c)throw new Error("can't switch encodings");var f=this._decoder.write(a);return d&&(f+=this._decoder.end()),f},r.exports=l},{inherits:440,"safe-buffer":494,stream:505,string_decoder:218}],222:[function(t,r,s){var i=t("../internals/is-callable"),o=t("../internals/try-to-string"),u=TypeError;r.exports=function(l){if(i(l))return l;throw new u(o(l)+" is not a function")}},{"../internals/is-callable":285,"../internals/try-to-string":349}],223:[function(t,r,s){var i=t("../internals/is-constructor"),o=t("../internals/try-to-string"),u=TypeError;r.exports=function(l){if(i(l))return l;throw new u(o(l)+" is not a constructor")}},{"../internals/is-constructor":286,"../internals/try-to-string":349}],224:[function(t,r,s){var i=t("../internals/is-callable"),o=String,u=TypeError;r.exports=function(l){if(typeof l=="object"||i(l))return l;throw new u("Can't set "+o(l)+" as a prototype")}},{"../internals/is-callable":285}],225:[function(t,r,s){var i=t("../internals/well-known-symbol"),o=t("../internals/object-create"),u=t("../internals/object-define-property").f,l=i("unscopables"),a=Array.prototype;a[l]===void 0&&u(a,l,{configurable:!0,value:o(null)}),r.exports=function(c){a[l][c]=!0}},{"../internals/object-create":306,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],226:[function(t,r,s){var i=t("../internals/object-is-prototype-of"),o=TypeError;r.exports=function(u,l){if(i(l,u))return u;throw new o("Incorrect invocation")}},{"../internals/object-is-prototype-of":314}],227:[function(t,r,s){var i=t("../internals/is-object"),o=String,u=TypeError;r.exports=function(l){if(i(l))return l;throw new u(o(l)+" is not an object")}},{"../internals/is-object":289}],228:[function(t,r,s){var i=t("../internals/to-indexed-object"),o=t("../internals/to-absolute-index"),u=t("../internals/length-of-array-like"),l=function(a){return function(c,d,f){var h,p=i(c),g=u(p),m=o(f,g);if(a&&d!=d){for(;g>m;)if((h=p[m++])!=h)return!0}else for(;g>m;m++)if((a||m in p)&&p[m]===d)return a||m||0;return!a&&-1}};r.exports={includes:l(!0),indexOf:l(!1)}},{"../internals/length-of-array-like":299,"../internals/to-absolute-index":340,"../internals/to-indexed-object":341}],229:[function(t,r,s){var i=t("../internals/function-bind-context"),o=t("../internals/function-uncurry-this"),u=t("../internals/indexed-object"),l=t("../internals/to-object"),a=t("../internals/length-of-array-like"),c=t("../internals/array-species-create"),d=o([].push),f=function(h){var p=h===1,g=h===2,m=h===3,y=h===4,b=h===6,v=h===7,k=h===5||b;return function(j,I,U,P){for(var z,q,$=l(j),F=u($),T=i(I,U),N=a(F),C=0,w=P||c,_=p?w(j,N):g||v?w(j,0):void 0;N>C;C++)if((k||C in F)&&(q=T(z=F[C],C,$),h))if(p)_[C]=q;else if(q)switch(h){case 3:return!0;case 5:return z;case 6:return C;case 2:d(_,z)}else switch(h){case 4:return!1;case 7:d(_,z)}return b?-1:m||y?y:_}};r.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},{"../internals/array-species-create":233,"../internals/function-bind-context":262,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/length-of-array-like":299,"../internals/to-object":344}],230:[function(t,r,s){var i=t("../internals/to-absolute-index"),o=t("../internals/length-of-array-like"),u=t("../internals/create-property"),l=Array,a=Math.max;r.exports=function(c,d,f){for(var h=o(c),p=i(d,h),g=i(f===void 0?h:f,h),m=l(a(g-p,0)),y=0;p<g;p++,y++)u(m,y,c[p]);return m.length=y,m}},{"../internals/create-property":243,"../internals/length-of-array-like":299,"../internals/to-absolute-index":340}],231:[function(t,r,s){var i=t("../internals/function-uncurry-this");r.exports=i([].slice)},{"../internals/function-uncurry-this":268}],232:[function(t,r,s){var i=t("../internals/is-array"),o=t("../internals/is-constructor"),u=t("../internals/is-object"),l=t("../internals/well-known-symbol")("species"),a=Array;r.exports=function(c){var d;return i(c)&&(d=c.constructor,(o(d)&&(d===a||i(d.prototype))||u(d)&&(d=d[l])===null)&&(d=void 0)),d===void 0?a:d}},{"../internals/is-array":284,"../internals/is-constructor":286,"../internals/is-object":289,"../internals/well-known-symbol":357}],233:[function(t,r,s){var i=t("../internals/array-species-constructor");r.exports=function(o,u){return new(i(o))(u===0?0:u)}},{"../internals/array-species-constructor":232}],234:[function(t,r,s){var i=t("../internals/well-known-symbol")("iterator"),o=!1;try{var u=0,l={next:function(){return{done:!!u++}},return:function(){o=!0}};l[i]=function(){return this},Array.from(l,function(){throw 2})}catch{}r.exports=function(a,c){try{if(!c&&!o)return!1}catch{return!1}var d=!1;try{var f={};f[i]=function(){return{next:function(){return{done:d=!0}}}},a(f)}catch{}return d}},{"../internals/well-known-symbol":357}],235:[function(t,r,s){var i=t("../internals/function-uncurry-this"),o=i({}.toString),u=i("".slice);r.exports=function(l){return u(o(l),8,-1)}},{"../internals/function-uncurry-this":268}],236:[function(t,r,s){var i=t("../internals/to-string-tag-support"),o=t("../internals/is-callable"),u=t("../internals/classof-raw"),l=t("../internals/well-known-symbol")("toStringTag"),a=Object,c=u(function(){return arguments}())==="Arguments";r.exports=i?u:function(d){var f,h,p;return d===void 0?"Undefined":d===null?"Null":typeof(h=function(g,m){try{return g[m]}catch{}}(f=a(d),l))=="string"?h:c?u(f):(p=u(f))==="Object"&&o(f.callee)?"Arguments":p}},{"../internals/classof-raw":235,"../internals/is-callable":285,"../internals/to-string-tag-support":347,"../internals/well-known-symbol":357}],237:[function(t,r,s){var i=t("../internals/has-own-property"),o=t("../internals/own-keys"),u=t("../internals/object-get-own-property-descriptor"),l=t("../internals/object-define-property");r.exports=function(a,c,d){for(var f=o(c),h=l.f,p=u.f,g=0;g<f.length;g++){var m=f[g];i(a,m)||d&&i(d,m)||h(a,m,p(c,m))}}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/own-keys":321}],238:[function(t,r,s){var i=t("../internals/well-known-symbol")("match");r.exports=function(o){var u=/./;try{"/./"[o](u)}catch{try{return u[i]=!1,"/./"[o](u)}catch{}}return!1}},{"../internals/well-known-symbol":357}],239:[function(t,r,s){var i=t("../internals/fails");r.exports=!i(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},{"../internals/fails":260}],240:[function(t,r,s){r.exports=function(i,o){return{value:i,done:o}}},{}],241:[function(t,r,s){var i=t("../internals/descriptors"),o=t("../internals/object-define-property"),u=t("../internals/create-property-descriptor");r.exports=i?function(l,a,c){return o.f(l,a,u(1,c))}:function(l,a,c){return l[a]=c,l}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/object-define-property":308}],242:[function(t,r,s){r.exports=function(i,o){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:o}}},{}],243:[function(t,r,s){var i=t("../internals/to-property-key"),o=t("../internals/object-define-property"),u=t("../internals/create-property-descriptor");r.exports=function(l,a,c){var d=i(a);d in l?o.f(l,d,u(0,c)):l[d]=c}},{"../internals/create-property-descriptor":242,"../internals/object-define-property":308,"../internals/to-property-key":346}],244:[function(t,r,s){var i=t("../internals/make-built-in"),o=t("../internals/object-define-property");r.exports=function(u,l,a){return a.get&&i(a.get,l,{getter:!0}),a.set&&i(a.set,l,{setter:!0}),o.f(u,l,a)}},{"../internals/make-built-in":300,"../internals/object-define-property":308}],245:[function(t,r,s){var i=t("../internals/is-callable"),o=t("../internals/object-define-property"),u=t("../internals/make-built-in"),l=t("../internals/define-global-property");r.exports=function(a,c,d,f){f||(f={});var h=f.enumerable,p=f.name!==void 0?f.name:c;if(i(d)&&u(d,p,f),f.global)h?a[c]=d:l(c,d);else{try{f.unsafe?a[c]&&(h=!0):delete a[c]}catch{}h?a[c]=d:o.f(a,c,{value:d,enumerable:!1,configurable:!f.nonConfigurable,writable:!f.nonWritable})}return a}},{"../internals/define-global-property":246,"../internals/is-callable":285,"../internals/make-built-in":300,"../internals/object-define-property":308}],246:[function(t,r,s){var i=t("../internals/global"),o=Object.defineProperty;r.exports=function(u,l){try{o(i,u,{value:l,configurable:!0,writable:!0})}catch{i[u]=l}return l}},{"../internals/global":274}],247:[function(t,r,s){var i=t("../internals/fails");r.exports=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},{"../internals/fails":260}],248:[function(t,r,s){var i=typeof document=="object"&&document.all,o=i===void 0&&i!==void 0;r.exports={all:i,IS_HTMLDDA:o}},{}],249:[function(t,r,s){var i=t("../internals/global"),o=t("../internals/is-object"),u=i.document,l=o(u)&&o(u.createElement);r.exports=function(a){return l?u.createElement(a):{}}},{"../internals/global":274,"../internals/is-object":289}],250:[function(t,r,s){var i=t("../internals/engine-is-deno"),o=t("../internals/engine-is-node");r.exports=!i&&!o&&typeof window=="object"&&typeof document=="object"},{"../internals/engine-is-deno":251,"../internals/engine-is-node":254}],251:[function(t,r,s){r.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},{}],252:[function(t,r,s){var i=t("../internals/engine-user-agent");r.exports=/ipad|iphone|ipod/i.test(i)&&typeof Pebble<"u"},{"../internals/engine-user-agent":256}],253:[function(t,r,s){var i=t("../internals/engine-user-agent");r.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},{"../internals/engine-user-agent":256}],254:[function(t,r,s){var i=t("../internals/global"),o=t("../internals/classof-raw");r.exports=o(i.process)==="process"},{"../internals/classof-raw":235,"../internals/global":274}],255:[function(t,r,s){var i=t("../internals/engine-user-agent");r.exports=/web0s(?!.*chrome)/i.test(i)},{"../internals/engine-user-agent":256}],256:[function(t,r,s){r.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},{}],257:[function(t,r,s){var i,o,u=t("../internals/global"),l=t("../internals/engine-user-agent"),a=u.process,c=u.Deno,d=a&&a.versions||c&&c.version,f=d&&d.v8;f&&(o=(i=f.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!o&&l&&(!(i=l.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=l.match(/Chrome\/(\d+)/))&&(o=+i[1]),r.exports=o},{"../internals/engine-user-agent":256,"../internals/global":274}],258:[function(t,r,s){r.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],259:[function(t,r,s){var i=t("../internals/global"),o=t("../internals/object-get-own-property-descriptor").f,u=t("../internals/create-non-enumerable-property"),l=t("../internals/define-built-in"),a=t("../internals/define-global-property"),c=t("../internals/copy-constructor-properties"),d=t("../internals/is-forced");r.exports=function(f,h){var p,g,m,y,b,v=f.target,k=f.global,j=f.stat;if(p=k?i:j?i[v]||a(v,{}):(i[v]||{}).prototype)for(g in h){if(y=h[g],m=f.dontCallGetSet?(b=o(p,g))&&b.value:p[g],!d(k?g:v+(j?".":"#")+g,f.forced)&&m!==void 0){if(typeof y==typeof m)continue;c(y,m)}(f.sham||m&&m.sham)&&u(y,"sham",!0),l(p,g,y,f)}}},{"../internals/copy-constructor-properties":237,"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/define-global-property":246,"../internals/global":274,"../internals/is-forced":287,"../internals/object-get-own-property-descriptor":309}],260:[function(t,r,s){r.exports=function(i){try{return!!i()}catch{return!0}}},{}],261:[function(t,r,s){var i=t("../internals/function-bind-native"),o=Function.prototype,u=o.apply,l=o.call;r.exports=typeof Reflect=="object"&&Reflect.apply||(i?l.bind(u):function(){return l.apply(u,arguments)})},{"../internals/function-bind-native":263}],262:[function(t,r,s){var i=t("../internals/function-uncurry-this-clause"),o=t("../internals/a-callable"),u=t("../internals/function-bind-native"),l=i(i.bind);r.exports=function(a,c){return o(a),c===void 0?a:u?l(a,c):function(){return a.apply(c,arguments)}}},{"../internals/a-callable":222,"../internals/function-bind-native":263,"../internals/function-uncurry-this-clause":267}],263:[function(t,r,s){var i=t("../internals/fails");r.exports=!i(function(){var o=(function(){}).bind();return typeof o!="function"||o.hasOwnProperty("prototype")})},{"../internals/fails":260}],264:[function(t,r,s){var i=t("../internals/function-bind-native"),o=Function.prototype.call;r.exports=i?o.bind(o):function(){return o.apply(o,arguments)}},{"../internals/function-bind-native":263}],265:[function(t,r,s){var i=t("../internals/descriptors"),o=t("../internals/has-own-property"),u=Function.prototype,l=i&&Object.getOwnPropertyDescriptor,a=o(u,"name"),c=a&&(function(){}).name==="something",d=a&&(!i||i&&l(u,"name").configurable);r.exports={EXISTS:a,PROPER:c,CONFIGURABLE:d}},{"../internals/descriptors":247,"../internals/has-own-property":275}],266:[function(t,r,s){var i=t("../internals/function-uncurry-this"),o=t("../internals/a-callable");r.exports=function(u,l,a){try{return i(o(Object.getOwnPropertyDescriptor(u,l)[a]))}catch{}}},{"../internals/a-callable":222,"../internals/function-uncurry-this":268}],267:[function(t,r,s){var i=t("../internals/classof-raw"),o=t("../internals/function-uncurry-this");r.exports=function(u){if(i(u)==="Function")return o(u)}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268}],268:[function(t,r,s){var i=t("../internals/function-bind-native"),o=Function.prototype,u=o.call,l=i&&o.bind.bind(u,u);r.exports=i?l:function(a){return function(){return u.apply(a,arguments)}}},{"../internals/function-bind-native":263}],269:[function(t,r,s){var i=t("../internals/global"),o=t("../internals/is-callable"),u=function(l){return o(l)?l:void 0};r.exports=function(l,a){return arguments.length<2?u(i[l]):i[l]&&i[l][a]}},{"../internals/global":274,"../internals/is-callable":285}],270:[function(t,r,s){var i=t("../internals/classof"),o=t("../internals/get-method"),u=t("../internals/is-null-or-undefined"),l=t("../internals/iterators"),a=t("../internals/well-known-symbol")("iterator");r.exports=function(c){if(!u(c))return o(c,a)||o(c,"@@iterator")||l[i(c)]}},{"../internals/classof":236,"../internals/get-method":273,"../internals/is-null-or-undefined":288,"../internals/iterators":298,"../internals/well-known-symbol":357}],271:[function(t,r,s){var i=t("../internals/function-call"),o=t("../internals/a-callable"),u=t("../internals/an-object"),l=t("../internals/try-to-string"),a=t("../internals/get-iterator-method"),c=TypeError;r.exports=function(d,f){var h=arguments.length<2?a(d):f;if(o(h))return u(i(h,d));throw new c(l(d)+" is not iterable")}},{"../internals/a-callable":222,"../internals/an-object":227,"../internals/function-call":264,"../internals/get-iterator-method":270,"../internals/try-to-string":349}],272:[function(t,r,s){var i=t("../internals/function-uncurry-this"),o=t("../internals/is-array"),u=t("../internals/is-callable"),l=t("../internals/classof-raw"),a=t("../internals/to-string"),c=i([].push);r.exports=function(d){if(u(d))return d;if(o(d)){for(var f=d.length,h=[],p=0;p<f;p++){var g=d[p];typeof g=="string"?c(h,g):typeof g!="number"&&l(g)!=="Number"&&l(g)!=="String"||c(h,a(g))}var m=h.length,y=!0;return function(b,v){if(y)return y=!1,v;if(o(this))return v;for(var k=0;k<m;k++)if(h[k]===b)return v}}}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268,"../internals/is-array":284,"../internals/is-callable":285,"../internals/to-string":348}],273:[function(t,r,s){var i=t("../internals/a-callable"),o=t("../internals/is-null-or-undefined");r.exports=function(u,l){var a=u[l];return o(a)?void 0:i(a)}},{"../internals/a-callable":222,"../internals/is-null-or-undefined":288}],274:[function(t,r,s){(function(i){(function(){var o=function(u){return u&&u.Math===Math&&u};r.exports=o(typeof globalThis=="object"&&globalThis)||o(typeof window=="object"&&window)||o(typeof self=="object"&&self)||o(typeof i=="object"&&i)||function(){return this}()||this||Function("return this")()}).call(this)}).call(this,typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],275:[function(t,r,s){var i=t("../internals/function-uncurry-this"),o=t("../internals/to-object"),u=i({}.hasOwnProperty);r.exports=Object.hasOwn||function(l,a){return u(o(l),a)}},{"../internals/function-uncurry-this":268,"../internals/to-object":344}],276:[function(t,r,s){r.exports={}},{}],277:[function(t,r,s){r.exports=function(i,o){try{arguments.length===1?console.error(i):console.error(i,o)}catch{}}},{}],278:[function(t,r,s){var i=t("../internals/get-built-in");r.exports=i("document","documentElement")},{"../internals/get-built-in":269}],279:[function(t,r,s){var i=t("../internals/descriptors"),o=t("../internals/fails"),u=t("../internals/document-create-element");r.exports=!i&&!o(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!==7})},{"../internals/descriptors":247,"../internals/document-create-element":249,"../internals/fails":260}],280:[function(t,r,s){var i=t("../internals/function-uncurry-this"),o=t("../internals/fails"),u=t("../internals/classof-raw"),l=Object,a=i("".split);r.exports=o(function(){return!l("z").propertyIsEnumerable(0)})?function(c){return u(c)==="String"?a(c,""):l(c)}:l},{"../internals/classof-raw":235,"../internals/fails":260,"../internals/function-uncurry-this":268}],281:[function(t,r,s){var i=t("../internals/function-uncurry-this"),o=t("../internals/is-callable"),u=t("../internals/shared-store"),l=i(Function.toString);o(u.inspectSource)||(u.inspectSource=function(a){return l(a)}),r.exports=u.inspectSource},{"../internals/function-uncurry-this":268,"../internals/is-callable":285,"../internals/shared-store":333}],282:[function(t,r,s){var i,o,u,l=t("../internals/weak-map-basic-detection"),a=t("../internals/global"),c=t("../internals/is-object"),d=t("../internals/create-non-enumerable-property"),f=t("../internals/has-own-property"),h=t("../internals/shared-store"),p=t("../internals/shared-key"),g=t("../internals/hidden-keys"),m=a.TypeError,y=a.WeakMap;if(l||h.state){var b=h.state||(h.state=new y);b.get=b.get,b.has=b.has,b.set=b.set,i=function(k,j){if(b.has(k))throw new m("Object already initialized");return j.facade=k,b.set(k,j),j},o=function(k){return b.get(k)||{}},u=function(k){return b.has(k)}}else{var v=p("state");g[v]=!0,i=function(k,j){if(f(k,v))throw new m("Object already initialized");return j.facade=k,d(k,v,j),j},o=function(k){return f(k,v)?k[v]:{}},u=function(k){return f(k,v)}}r.exports={set:i,get:o,has:u,enforce:function(k){return u(k)?o(k):i(k,{})},getterFor:function(k){return function(j){var I;if(!c(j)||(I=o(j)).type!==k)throw new m("Incompatible receiver, "+k+" required");return I}}}},{"../internals/create-non-enumerable-property":241,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/is-object":289,"../internals/shared-key":332,"../internals/shared-store":333,"../internals/weak-map-basic-detection":354}],283:[function(t,r,s){var i=t("../internals/well-known-symbol"),o=t("../internals/iterators"),u=i("iterator"),l=Array.prototype;r.exports=function(a){return a!==void 0&&(o.Array===a||l[u]===a)}},{"../internals/iterators":298,"../internals/well-known-symbol":357}],284:[function(t,r,s){var i=t("../internals/classof-raw");r.exports=Array.isArray||function(o){return i(o)==="Array"}},{"../internals/classof-raw":235}],285:[function(t,r,s){var i=t("../internals/document-all"),o=i.all;r.exports=i.IS_HTMLDDA?function(u){return typeof u=="function"||u===o}:function(u){return typeof u=="function"}},{"../internals/document-all":248}],286:[function(t,r,s){var i=t("../internals/function-uncurry-this"),o=t("../internals/fails"),u=t("../internals/is-callable"),l=t("../internals/classof"),a=t("../internals/get-built-in"),c=t("../internals/inspect-source"),d=function(){},f=[],h=a("Reflect","construct"),p=/^\s*(?:class|function)\b/,g=i(p.exec),m=!p.test(d),y=function(v){if(!u(v))return!1;try{return h(d,f,v),!0}catch{return!1}},b=function(v){if(!u(v))return!1;switch(l(v)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return m||!!g(p,c(v))}catch{return!0}};b.sham=!0,r.exports=!h||o(function(){var v;return y(y.call)||!y(Object)||!y(function(){v=!0})||v})?b:y},{"../internals/classof":236,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/inspect-source":281,"../internals/is-callable":285}],287:[function(t,r,s){var i=t("../internals/fails"),o=t("../internals/is-callable"),u=/#|\.prototype\./,l=function(h,p){var g=c[a(h)];return g===f||g!==d&&(o(p)?i(p):!!p)},a=l.normalize=function(h){return String(h).replace(u,".").toLowerCase()},c=l.data={},d=l.NATIVE="N",f=l.POLYFILL="P";r.exports=l},{"../internals/fails":260,"../internals/is-callable":285}],288:[function(t,r,s){r.exports=function(i){return i==null}},{}],289:[function(t,r,s){var i=t("../internals/is-callable"),o=t("../internals/document-all"),u=o.all;r.exports=o.IS_HTMLDDA?function(l){return typeof l=="object"?l!==null:i(l)||l===u}:function(l){return typeof l=="object"?l!==null:i(l)}},{"../internals/document-all":248,"../internals/is-callable":285}],290:[function(t,r,s){r.exports=!1},{}],291:[function(t,r,s){var i=t("../internals/is-object"),o=t("../internals/classof-raw"),u=t("../internals/well-known-symbol")("match");r.exports=function(l){var a;return i(l)&&((a=l[u])!==void 0?!!a:o(l)==="RegExp")}},{"../internals/classof-raw":235,"../internals/is-object":289,"../internals/well-known-symbol":357}],292:[function(t,r,s){var i=t("../internals/get-built-in"),o=t("../internals/is-callable"),u=t("../internals/object-is-prototype-of"),l=t("../internals/use-symbol-as-uid"),a=Object;r.exports=l?function(c){return typeof c=="symbol"}:function(c){var d=i("Symbol");return o(d)&&u(d.prototype,a(c))}},{"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/object-is-prototype-of":314,"../internals/use-symbol-as-uid":351}],293:[function(t,r,s){var i=t("../internals/function-bind-context"),o=t("../internals/function-call"),u=t("../internals/an-object"),l=t("../internals/try-to-string"),a=t("../internals/is-array-iterator-method"),c=t("../internals/length-of-array-like"),d=t("../internals/object-is-prototype-of"),f=t("../internals/get-iterator"),h=t("../internals/get-iterator-method"),p=t("../internals/iterator-close"),g=TypeError,m=function(b,v){this.stopped=b,this.result=v},y=m.prototype;r.exports=function(b,v,k){var j,I,U,P,z,q,$,F=k&&k.that,T=!(!k||!k.AS_ENTRIES),N=!(!k||!k.IS_RECORD),C=!(!k||!k.IS_ITERATOR),w=!(!k||!k.INTERRUPTED),_=i(v,F),x=function(A){return j&&p(j,"normal",A),new m(!0,A)},S=function(A){return T?(u(A),w?_(A[0],A[1],x):_(A[0],A[1])):w?_(A,x):_(A)};if(N)j=b.iterator;else if(C)j=b;else{if(!(I=h(b)))throw new g(l(b)+" is not iterable");if(a(I)){for(U=0,P=c(b);P>U;U++)if((z=S(b[U]))&&d(y,z))return z;return new m(!1)}j=f(b,I)}for(q=N?b.next:j.next;!($=o(q,j)).done;){try{z=S($.value)}catch(A){p(j,"throw",A)}if(typeof z=="object"&&z&&d(y,z))return z}return new m(!1)}},{"../internals/an-object":227,"../internals/function-bind-context":262,"../internals/function-call":264,"../internals/get-iterator":271,"../internals/get-iterator-method":270,"../internals/is-array-iterator-method":283,"../internals/iterator-close":294,"../internals/length-of-array-like":299,"../internals/object-is-prototype-of":314,"../internals/try-to-string":349}],294:[function(t,r,s){var i=t("../internals/function-call"),o=t("../internals/an-object"),u=t("../internals/get-method");r.exports=function(l,a,c){var d,f;o(l);try{if(!(d=u(l,"return"))){if(a==="throw")throw c;return c}d=i(d,l)}catch(h){f=!0,d=h}if(a==="throw")throw c;if(f)throw d;return o(d),c}},{"../internals/an-object":227,"../internals/function-call":264,"../internals/get-method":273}],295:[function(t,r,s){var i=t("../internals/iterators-core").IteratorPrototype,o=t("../internals/object-create"),u=t("../internals/create-property-descriptor"),l=t("../internals/set-to-string-tag"),a=t("../internals/iterators"),c=function(){return this};r.exports=function(d,f,h,p){var g=f+" Iterator";return d.prototype=o(i,{next:u(+!p,h)}),l(d,g,!1,!0),a[g]=c,d}},{"../internals/create-property-descriptor":242,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-create":306,"../internals/set-to-string-tag":331}],296:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/function-call"),u=t("../internals/is-pure"),l=t("../internals/function-name"),a=t("../internals/is-callable"),c=t("../internals/iterator-create-constructor"),d=t("../internals/object-get-prototype-of"),f=t("../internals/object-set-prototype-of"),h=t("../internals/set-to-string-tag"),p=t("../internals/create-non-enumerable-property"),g=t("../internals/define-built-in"),m=t("../internals/well-known-symbol"),y=t("../internals/iterators"),b=t("../internals/iterators-core"),v=l.PROPER,k=l.CONFIGURABLE,j=b.IteratorPrototype,I=b.BUGGY_SAFARI_ITERATORS,U=m("iterator"),P=function(){return this};r.exports=function(z,q,$,F,T,N,C){c($,q,F);var w,_,x,S=function(D){if(D===T&&X)return X;if(!I&&D&&D in E)return E[D];switch(D){case"keys":case"values":case"entries":return function(){return new $(this,D)}}return function(){return new $(this)}},A=q+" Iterator",B=!1,E=z.prototype,V=E[U]||E["@@iterator"]||T&&E[T],X=!I&&V||S(T),Q=q==="Array"&&E.entries||V;if(Q&&(w=d(Q.call(new z)))!==Object.prototype&&w.next&&(u||d(w)===j||(f?f(w,j):a(w[U])||g(w,U,P)),h(w,A,!0,!0),u&&(y[A]=P)),v&&T==="values"&&V&&V.name!=="values"&&(!u&&k?p(E,"name","values"):(B=!0,X=function(){return o(V,this)})),T)if(_={values:S("values"),keys:N?X:S("keys"),entries:S("entries")},C)for(x in _)(I||B||!(x in E))&&g(E,x,_[x]);else i({target:q,proto:!0,forced:I||B},_);return u&&!C||E[U]===X||g(E,U,X,{name:T}),y[q]=X,_}},{"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/export":259,"../internals/function-call":264,"../internals/function-name":265,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/iterator-create-constructor":295,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-get-prototype-of":313,"../internals/object-set-prototype-of":318,"../internals/set-to-string-tag":331,"../internals/well-known-symbol":357}],297:[function(t,r,s){var i,o,u,l=t("../internals/fails"),a=t("../internals/is-callable"),c=t("../internals/is-object"),d=t("../internals/object-create"),f=t("../internals/object-get-prototype-of"),h=t("../internals/define-built-in"),p=t("../internals/well-known-symbol"),g=t("../internals/is-pure"),m=p("iterator"),y=!1;[].keys&&("next"in(u=[].keys())?(o=f(f(u)))!==Object.prototype&&(i=o):y=!0),!c(i)||l(function(){var b={};return i[m].call(b)!==b})?i={}:g&&(i=d(i)),a(i[m])||h(i,m,function(){return this}),r.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:y}},{"../internals/define-built-in":245,"../internals/fails":260,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-get-prototype-of":313,"../internals/well-known-symbol":357}],298:[function(t,r,s){arguments[4][276][0].apply(s,arguments)},{dup:276}],299:[function(t,r,s){var i=t("../internals/to-length");r.exports=function(o){return i(o.length)}},{"../internals/to-length":343}],300:[function(t,r,s){var i=t("../internals/function-uncurry-this"),o=t("../internals/fails"),u=t("../internals/is-callable"),l=t("../internals/has-own-property"),a=t("../internals/descriptors"),c=t("../internals/function-name").CONFIGURABLE,d=t("../internals/inspect-source"),f=t("../internals/internal-state"),h=f.enforce,p=f.get,g=String,m=Object.defineProperty,y=i("".slice),b=i("".replace),v=i([].join),k=a&&!o(function(){return m(function(){},"length",{value:8}).length!==8}),j=String(String).split("String"),I=r.exports=function(U,P,z){y(g(P),0,7)==="Symbol("&&(P="["+b(g(P),/^Symbol\(([^)]*)\)/,"$1")+"]"),z&&z.getter&&(P="get "+P),z&&z.setter&&(P="set "+P),(!l(U,"name")||c&&U.name!==P)&&(a?m(U,"name",{value:P,configurable:!0}):U.name=P),k&&z&&l(z,"arity")&&U.length!==z.arity&&m(U,"length",{value:z.arity});try{z&&l(z,"constructor")&&z.constructor?a&&m(U,"prototype",{writable:!1}):U.prototype&&(U.prototype=void 0)}catch{}var q=h(U);return l(q,"source")||(q.source=v(j,typeof P=="string"?P:"")),U};Function.prototype.toString=I(function(){return u(this)&&p(this).source||d(this)},"toString")},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-name":265,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/inspect-source":281,"../internals/internal-state":282,"../internals/is-callable":285}],301:[function(t,r,s){var i=Math.ceil,o=Math.floor;r.exports=Math.trunc||function(u){var l=+u;return(l>0?o:i)(l)}},{}],302:[function(t,r,s){var i,o,u,l,a,c=t("../internals/global"),d=t("../internals/function-bind-context"),f=t("../internals/object-get-own-property-descriptor").f,h=t("../internals/task").set,p=t("../internals/queue"),g=t("../internals/engine-is-ios"),m=t("../internals/engine-is-ios-pebble"),y=t("../internals/engine-is-webos-webkit"),b=t("../internals/engine-is-node"),v=c.MutationObserver||c.WebKitMutationObserver,k=c.document,j=c.process,I=c.Promise,U=f(c,"queueMicrotask"),P=U&&U.value;if(!P){var z=new p,q=function(){var $,F;for(b&&($=j.domain)&&$.exit();F=z.get();)try{F()}catch(T){throw z.head&&i(),T}$&&$.enter()};g||b||y||!v||!k?!m&&I&&I.resolve?((l=I.resolve(void 0)).constructor=I,a=d(l.then,l),i=function(){a(q)}):b?i=function(){j.nextTick(q)}:(h=d(h,c),i=function(){h(q)}):(o=!0,u=k.createTextNode(""),new v(q).observe(u,{characterData:!0}),i=function(){u.data=o=!o}),P=function($){z.head||i(),z.add($)}}r.exports=P},{"../internals/engine-is-ios":253,"../internals/engine-is-ios-pebble":252,"../internals/engine-is-node":254,"../internals/engine-is-webos-webkit":255,"../internals/function-bind-context":262,"../internals/global":274,"../internals/object-get-own-property-descriptor":309,"../internals/queue":328,"../internals/task":339}],303:[function(t,r,s){var i=t("../internals/a-callable"),o=TypeError,u=function(l){var a,c;this.promise=new l(function(d,f){if(a!==void 0||c!==void 0)throw new o("Bad Promise constructor");a=d,c=f}),this.resolve=i(a),this.reject=i(c)};r.exports.f=function(l){return new u(l)}},{"../internals/a-callable":222}],304:[function(t,r,s){var i=t("../internals/is-regexp"),o=TypeError;r.exports=function(u){if(i(u))throw new o("The method doesn't accept regular expressions");return u}},{"../internals/is-regexp":291}],305:[function(t,r,s){var i=t("../internals/descriptors"),o=t("../internals/function-uncurry-this"),u=t("../internals/function-call"),l=t("../internals/fails"),a=t("../internals/object-keys"),c=t("../internals/object-get-own-property-symbols"),d=t("../internals/object-property-is-enumerable"),f=t("../internals/to-object"),h=t("../internals/indexed-object"),p=Object.assign,g=Object.defineProperty,m=o([].concat);r.exports=!p||l(function(){if(i&&p({b:1},p(g({},"a",{enumerable:!0,get:function(){g(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var y={},b={},v=Symbol("assign detection");return y[v]=7,"abcdefghijklmnopqrst".split("").forEach(function(k){b[k]=k}),p({},y)[v]!==7||a(p({},b)).join("")!=="abcdefghijklmnopqrst"})?function(y,b){for(var v=f(y),k=arguments.length,j=1,I=c.f,U=d.f;k>j;)for(var P,z=h(arguments[j++]),q=I?m(a(z),I(z)):a(z),$=q.length,F=0;$>F;)P=q[F++],i&&!u(U,z,P)||(v[P]=z[P]);return v}:p},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/object-get-own-property-symbols":312,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-object":344}],306:[function(t,r,s){var i,o=t("../internals/an-object"),u=t("../internals/object-define-properties"),l=t("../internals/enum-bug-keys"),a=t("../internals/hidden-keys"),c=t("../internals/html"),d=t("../internals/document-create-element"),f=t("../internals/shared-key"),h=f("IE_PROTO"),p=function(){},g=function(b){return"<script>"+b+"<\/script>"},m=function(b){b.write(g("")),b.close();var v=b.parentWindow.Object;return b=null,v},y=function(){try{i=new ActiveXObject("htmlfile")}catch{}var b,v;y=typeof document<"u"?document.domain&&i?m(i):((v=d("iframe")).style.display="none",c.appendChild(v),v.src="javascript:",(b=v.contentWindow.document).open(),b.write(g("document.F=Object")),b.close(),b.F):m(i);for(var k=l.length;k--;)delete y.prototype[l[k]];return y()};a[h]=!0,r.exports=Object.create||function(b,v){var k;return b!==null?(p.prototype=o(b),k=new p,p.prototype=null,k[h]=b):k=y(),v===void 0?k:u.f(k,v)}},{"../internals/an-object":227,"../internals/document-create-element":249,"../internals/enum-bug-keys":258,"../internals/hidden-keys":276,"../internals/html":278,"../internals/object-define-properties":307,"../internals/shared-key":332}],307:[function(t,r,s){var i=t("../internals/descriptors"),o=t("../internals/v8-prototype-define-bug"),u=t("../internals/object-define-property"),l=t("../internals/an-object"),a=t("../internals/to-indexed-object"),c=t("../internals/object-keys");s.f=i&&!o?Object.defineProperties:function(d,f){l(d);for(var h,p=a(f),g=c(f),m=g.length,y=0;m>y;)u.f(d,h=g[y++],p[h]);return d}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/object-define-property":308,"../internals/object-keys":316,"../internals/to-indexed-object":341,"../internals/v8-prototype-define-bug":352}],308:[function(t,r,s){var i=t("../internals/descriptors"),o=t("../internals/ie8-dom-define"),u=t("../internals/v8-prototype-define-bug"),l=t("../internals/an-object"),a=t("../internals/to-property-key"),c=TypeError,d=Object.defineProperty,f=Object.getOwnPropertyDescriptor;s.f=i?u?function(h,p,g){if(l(h),p=a(p),l(g),typeof h=="function"&&p==="prototype"&&"value"in g&&"writable"in g&&!g.writable){var m=f(h,p);m&&m.writable&&(h[p]=g.value,g={configurable:"configurable"in g?g.configurable:m.configurable,enumerable:"enumerable"in g?g.enumerable:m.enumerable,writable:!1})}return d(h,p,g)}:d:function(h,p,g){if(l(h),p=a(p),l(g),o)try{return d(h,p,g)}catch{}if("get"in g||"set"in g)throw new c("Accessors not supported");return"value"in g&&(h[p]=g.value),h}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/ie8-dom-define":279,"../internals/to-property-key":346,"../internals/v8-prototype-define-bug":352}],309:[function(t,r,s){var i=t("../internals/descriptors"),o=t("../internals/function-call"),u=t("../internals/object-property-is-enumerable"),l=t("../internals/create-property-descriptor"),a=t("../internals/to-indexed-object"),c=t("../internals/to-property-key"),d=t("../internals/has-own-property"),f=t("../internals/ie8-dom-define"),h=Object.getOwnPropertyDescriptor;s.f=i?h:function(p,g){if(p=a(p),g=c(g),f)try{return h(p,g)}catch{}if(d(p,g))return l(!o(u.f,p,g),p[g])}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/function-call":264,"../internals/has-own-property":275,"../internals/ie8-dom-define":279,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341,"../internals/to-property-key":346}],310:[function(t,r,s){var i=t("../internals/classof-raw"),o=t("../internals/to-indexed-object"),u=t("../internals/object-get-own-property-names").f,l=t("../internals/array-slice-simple"),a=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];r.exports.f=function(c){return a&&i(c)==="Window"?function(d){try{return u(d)}catch{return l(a)}}(c):u(o(c))}},{"../internals/array-slice-simple":230,"../internals/classof-raw":235,"../internals/object-get-own-property-names":311,"../internals/to-indexed-object":341}],311:[function(t,r,s){var i=t("../internals/object-keys-internal"),o=t("../internals/enum-bug-keys").concat("length","prototype");s.f=Object.getOwnPropertyNames||function(u){return i(u,o)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],312:[function(t,r,s){s.f=Object.getOwnPropertySymbols},{}],313:[function(t,r,s){var i=t("../internals/has-own-property"),o=t("../internals/is-callable"),u=t("../internals/to-object"),l=t("../internals/shared-key"),a=t("../internals/correct-prototype-getter"),c=l("IE_PROTO"),d=Object,f=d.prototype;r.exports=a?d.getPrototypeOf:function(h){var p=u(h);if(i(p,c))return p[c];var g=p.constructor;return o(g)&&p instanceof g?g.prototype:p instanceof d?f:null}},{"../internals/correct-prototype-getter":239,"../internals/has-own-property":275,"../internals/is-callable":285,"../internals/shared-key":332,"../internals/to-object":344}],314:[function(t,r,s){var i=t("../internals/function-uncurry-this");r.exports=i({}.isPrototypeOf)},{"../internals/function-uncurry-this":268}],315:[function(t,r,s){var i=t("../internals/function-uncurry-this"),o=t("../internals/has-own-property"),u=t("../internals/to-indexed-object"),l=t("../internals/array-includes").indexOf,a=t("../internals/hidden-keys"),c=i([].push);r.exports=function(d,f){var h,p=u(d),g=0,m=[];for(h in p)!o(a,h)&&o(p,h)&&c(m,h);for(;f.length>g;)o(p,h=f[g++])&&(~l(m,h)||c(m,h));return m}},{"../internals/array-includes":228,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/to-indexed-object":341}],316:[function(t,r,s){var i=t("../internals/object-keys-internal"),o=t("../internals/enum-bug-keys");r.exports=Object.keys||function(u){return i(u,o)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],317:[function(t,r,s){var i={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,u=o&&!i.call({1:2},1);s.f=u?function(l){var a=o(this,l);return!!a&&a.enumerable}:i},{}],318:[function(t,r,s){var i=t("../internals/function-uncurry-this-accessor"),o=t("../internals/an-object"),u=t("../internals/a-possible-prototype");r.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l,a=!1,c={};try{(l=i(Object.prototype,"__proto__","set"))(c,[]),a=c instanceof Array}catch{}return function(d,f){return o(d),u(f),a?l(d,f):d.__proto__=f,d}}():void 0)},{"../internals/a-possible-prototype":224,"../internals/an-object":227,"../internals/function-uncurry-this-accessor":266}],319:[function(t,r,s){var i=t("../internals/descriptors"),o=t("../internals/fails"),u=t("../internals/function-uncurry-this"),l=t("../internals/object-get-prototype-of"),a=t("../internals/object-keys"),c=t("../internals/to-indexed-object"),d=u(t("../internals/object-property-is-enumerable").f),f=u([].push),h=i&&o(function(){var g=Object.create(null);return g[2]=2,!d(g,2)}),p=function(g){return function(m){for(var y,b=c(m),v=a(b),k=h&&l(b)===null,j=v.length,I=0,U=[];j>I;)y=v[I++],i&&!(k?y in b:d(b,y))||f(U,g?[y,b[y]]:b[y]);return U}};r.exports={entries:p(!0),values:p(!1)}},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/object-get-prototype-of":313,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341}],320:[function(t,r,s){var i=t("../internals/function-call"),o=t("../internals/is-callable"),u=t("../internals/is-object"),l=TypeError;r.exports=function(a,c){var d,f;if(c==="string"&&o(d=a.toString)&&!u(f=i(d,a))||o(d=a.valueOf)&&!u(f=i(d,a))||c!=="string"&&o(d=a.toString)&&!u(f=i(d,a)))return f;throw new l("Can't convert object to primitive value")}},{"../internals/function-call":264,"../internals/is-callable":285,"../internals/is-object":289}],321:[function(t,r,s){var i=t("../internals/get-built-in"),o=t("../internals/function-uncurry-this"),u=t("../internals/object-get-own-property-names"),l=t("../internals/object-get-own-property-symbols"),a=t("../internals/an-object"),c=o([].concat);r.exports=i("Reflect","ownKeys")||function(d){var f=u.f(a(d)),h=l.f;return h?c(f,h(d)):f}},{"../internals/an-object":227,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-symbols":312}],322:[function(t,r,s){var i=t("../internals/global");r.exports=i},{"../internals/global":274}],323:[function(t,r,s){r.exports=function(i){try{return{error:!1,value:i()}}catch(o){return{error:!0,value:o}}}},{}],324:[function(t,r,s){var i=t("../internals/global"),o=t("../internals/promise-native-constructor"),u=t("../internals/is-callable"),l=t("../internals/is-forced"),a=t("../internals/inspect-source"),c=t("../internals/well-known-symbol"),d=t("../internals/engine-is-browser"),f=t("../internals/engine-is-deno"),h=t("../internals/is-pure"),p=t("../internals/engine-v8-version"),g=o&&o.prototype,m=c("species"),y=!1,b=u(i.PromiseRejectionEvent),v=l("Promise",function(){var k=a(o),j=k!==String(o);if(!j&&p===66||h&&(!g.catch||!g.finally))return!0;if(!p||p<51||!/native code/.test(k)){var I=new o(function(P){P(1)}),U=function(P){P(function(){},function(){})};if((I.constructor={})[m]=U,!(y=I.then(function(){})instanceof U))return!0}return!j&&(d||f)&&!b});r.exports={CONSTRUCTOR:v,REJECTION_EVENT:b,SUBCLASSING:y}},{"../internals/engine-is-browser":250,"../internals/engine-is-deno":251,"../internals/engine-v8-version":257,"../internals/global":274,"../internals/inspect-source":281,"../internals/is-callable":285,"../internals/is-forced":287,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/well-known-symbol":357}],325:[function(t,r,s){var i=t("../internals/global");r.exports=i.Promise},{"../internals/global":274}],326:[function(t,r,s){var i=t("../internals/an-object"),o=t("../internals/is-object"),u=t("../internals/new-promise-capability");r.exports=function(l,a){if(i(l),o(a)&&a.constructor===l)return a;var c=u.f(l);return(0,c.resolve)(a),c.promise}},{"../internals/an-object":227,"../internals/is-object":289,"../internals/new-promise-capability":303}],327:[function(t,r,s){var i=t("../internals/promise-native-constructor"),o=t("../internals/check-correctness-of-iteration"),u=t("../internals/promise-constructor-detection").CONSTRUCTOR;r.exports=u||!o(function(l){i.all(l).then(void 0,function(){})})},{"../internals/check-correctness-of-iteration":234,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],328:[function(t,r,s){var i=function(){this.head=null,this.tail=null};i.prototype={add:function(o){var u={item:o,next:null},l=this.tail;l?l.next=u:this.head=u,this.tail=u},get:function(){var o=this.head;if(o)return(this.head=o.next)===null&&(this.tail=null),o.item}},r.exports=i},{}],329:[function(t,r,s){var i=t("../internals/is-null-or-undefined"),o=TypeError;r.exports=function(u){if(i(u))throw new o("Can't call method on "+u);return u}},{"../internals/is-null-or-undefined":288}],330:[function(t,r,s){var i=t("../internals/get-built-in"),o=t("../internals/define-built-in-accessor"),u=t("../internals/well-known-symbol"),l=t("../internals/descriptors"),a=u("species");r.exports=function(c){var d=i(c);l&&d&&!d[a]&&o(d,a,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],331:[function(t,r,s){var i=t("../internals/object-define-property").f,o=t("../internals/has-own-property"),u=t("../internals/well-known-symbol")("toStringTag");r.exports=function(l,a,c){l&&!c&&(l=l.prototype),l&&!o(l,u)&&i(l,u,{configurable:!0,value:a})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],332:[function(t,r,s){var i=t("../internals/shared"),o=t("../internals/uid"),u=i("keys");r.exports=function(l){return u[l]||(u[l]=o(l))}},{"../internals/shared":334,"../internals/uid":350}],333:[function(t,r,s){var i=t("../internals/global"),o=t("../internals/define-global-property"),u=i["__core-js_shared__"]||o("__core-js_shared__",{});r.exports=u},{"../internals/define-global-property":246,"../internals/global":274}],334:[function(t,r,s){var i=t("../internals/is-pure"),o=t("../internals/shared-store");(r.exports=function(u,l){return o[u]||(o[u]=l!==void 0?l:{})})("versions",[]).push({version:"3.33.0",mode:i?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/is-pure":290,"../internals/shared-store":333}],335:[function(t,r,s){var i=t("../internals/an-object"),o=t("../internals/a-constructor"),u=t("../internals/is-null-or-undefined"),l=t("../internals/well-known-symbol")("species");r.exports=function(a,c){var d,f=i(a).constructor;return f===void 0||u(d=i(f)[l])?c:o(d)}},{"../internals/a-constructor":223,"../internals/an-object":227,"../internals/is-null-or-undefined":288,"../internals/well-known-symbol":357}],336:[function(t,r,s){var i=t("../internals/engine-v8-version"),o=t("../internals/fails"),u=t("../internals/global").String;r.exports=!!Object.getOwnPropertySymbols&&!o(function(){var l=Symbol("symbol detection");return!u(l)||!(Object(l)instanceof Symbol)||!Symbol.sham&&i&&i<41})},{"../internals/engine-v8-version":257,"../internals/fails":260,"../internals/global":274}],337:[function(t,r,s){var i=t("../internals/function-call"),o=t("../internals/get-built-in"),u=t("../internals/well-known-symbol"),l=t("../internals/define-built-in");r.exports=function(){var a=o("Symbol"),c=a&&a.prototype,d=c&&c.valueOf,f=u("toPrimitive");c&&!c[f]&&l(c,f,function(h){return i(d,this)},{arity:1})}},{"../internals/define-built-in":245,"../internals/function-call":264,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],338:[function(t,r,s){var i=t("../internals/symbol-constructor-detection");r.exports=i&&!!Symbol.for&&!!Symbol.keyFor},{"../internals/symbol-constructor-detection":336}],339:[function(t,r,s){var i,o,u,l,a=t("../internals/global"),c=t("../internals/function-apply"),d=t("../internals/function-bind-context"),f=t("../internals/is-callable"),h=t("../internals/has-own-property"),p=t("../internals/fails"),g=t("../internals/html"),m=t("../internals/array-slice"),y=t("../internals/document-create-element"),b=t("../internals/validate-arguments-length"),v=t("../internals/engine-is-ios"),k=t("../internals/engine-is-node"),j=a.setImmediate,I=a.clearImmediate,U=a.process,P=a.Dispatch,z=a.Function,q=a.MessageChannel,$=a.String,F=0,T={};p(function(){i=a.location});var N=function(x){if(h(T,x)){var S=T[x];delete T[x],S()}},C=function(x){return function(){N(x)}},w=function(x){N(x.data)},_=function(x){a.postMessage($(x),i.protocol+"//"+i.host)};j&&I||(j=function(x){b(arguments.length,1);var S=f(x)?x:z(x),A=m(arguments,1);return T[++F]=function(){c(S,void 0,A)},o(F),F},I=function(x){delete T[x]},k?o=function(x){U.nextTick(C(x))}:P&&P.now?o=function(x){P.now(C(x))}:q&&!v?(l=(u=new q).port2,u.port1.onmessage=w,o=d(l.postMessage,l)):a.addEventListener&&f(a.postMessage)&&!a.importScripts&&i&&i.protocol!=="file:"&&!p(_)?(o=_,a.addEventListener("message",w,!1)):o="onreadystatechange"in y("script")?function(x){g.appendChild(y("script")).onreadystatechange=function(){g.removeChild(this),N(x)}}:function(x){setTimeout(C(x),0)}),r.exports={set:j,clear:I}},{"../internals/array-slice":231,"../internals/document-create-element":249,"../internals/engine-is-ios":253,"../internals/engine-is-node":254,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-bind-context":262,"../internals/global":274,"../internals/has-own-property":275,"../internals/html":278,"../internals/is-callable":285,"../internals/validate-arguments-length":353}],340:[function(t,r,s){var i=t("../internals/to-integer-or-infinity"),o=Math.max,u=Math.min;r.exports=function(l,a){var c=i(l);return c<0?o(c+a,0):u(c,a)}},{"../internals/to-integer-or-infinity":342}],341:[function(t,r,s){var i=t("../internals/indexed-object"),o=t("../internals/require-object-coercible");r.exports=function(u){return i(o(u))}},{"../internals/indexed-object":280,"../internals/require-object-coercible":329}],342:[function(t,r,s){var i=t("../internals/math-trunc");r.exports=function(o){var u=+o;return u!=u||u===0?0:i(u)}},{"../internals/math-trunc":301}],343:[function(t,r,s){var i=t("../internals/to-integer-or-infinity"),o=Math.min;r.exports=function(u){return u>0?o(i(u),9007199254740991):0}},{"../internals/to-integer-or-infinity":342}],344:[function(t,r,s){var i=t("../internals/require-object-coercible"),o=Object;r.exports=function(u){return o(i(u))}},{"../internals/require-object-coercible":329}],345:[function(t,r,s){var i=t("../internals/function-call"),o=t("../internals/is-object"),u=t("../internals/is-symbol"),l=t("../internals/get-method"),a=t("../internals/ordinary-to-primitive"),c=t("../internals/well-known-symbol"),d=TypeError,f=c("toPrimitive");r.exports=function(h,p){if(!o(h)||u(h))return h;var g,m=l(h,f);if(m){if(p===void 0&&(p="default"),g=i(m,h,p),!o(g)||u(g))return g;throw new d("Can't convert object to primitive value")}return p===void 0&&(p="number"),a(h,p)}},{"../internals/function-call":264,"../internals/get-method":273,"../internals/is-object":289,"../internals/is-symbol":292,"../internals/ordinary-to-primitive":320,"../internals/well-known-symbol":357}],346:[function(t,r,s){var i=t("../internals/to-primitive"),o=t("../internals/is-symbol");r.exports=function(u){var l=i(u,"string");return o(l)?l:l+""}},{"../internals/is-symbol":292,"../internals/to-primitive":345}],347:[function(t,r,s){var i={};i[t("../internals/well-known-symbol")("toStringTag")]="z",r.exports=String(i)==="[object z]"},{"../internals/well-known-symbol":357}],348:[function(t,r,s){var i=t("../internals/classof"),o=String;r.exports=function(u){if(i(u)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return o(u)}},{"../internals/classof":236}],349:[function(t,r,s){var i=String;r.exports=function(o){try{return i(o)}catch{return"Object"}}},{}],350:[function(t,r,s){var i=t("../internals/function-uncurry-this"),o=0,u=Math.random(),l=i(1 .toString);r.exports=function(a){return"Symbol("+(a===void 0?"":a)+")_"+l(++o+u,36)}},{"../internals/function-uncurry-this":268}],351:[function(t,r,s){var i=t("../internals/symbol-constructor-detection");r.exports=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/symbol-constructor-detection":336}],352:[function(t,r,s){var i=t("../internals/descriptors"),o=t("../internals/fails");r.exports=i&&o(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},{"../internals/descriptors":247,"../internals/fails":260}],353:[function(t,r,s){var i=TypeError;r.exports=function(o,u){if(o<u)throw new i("Not enough arguments");return o}},{}],354:[function(t,r,s){var i=t("../internals/global"),o=t("../internals/is-callable"),u=i.WeakMap;r.exports=o(u)&&/native code/.test(String(u))},{"../internals/global":274,"../internals/is-callable":285}],355:[function(t,r,s){var i=t("../internals/path"),o=t("../internals/has-own-property"),u=t("../internals/well-known-symbol-wrapped"),l=t("../internals/object-define-property").f;r.exports=function(a){var c=i.Symbol||(i.Symbol={});o(c,a)||l(c,a,{value:u.f(a)})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/path":322,"../internals/well-known-symbol-wrapped":356}],356:[function(t,r,s){var i=t("../internals/well-known-symbol");s.f=i},{"../internals/well-known-symbol":357}],357:[function(t,r,s){var i=t("../internals/global"),o=t("../internals/shared"),u=t("../internals/has-own-property"),l=t("../internals/uid"),a=t("../internals/symbol-constructor-detection"),c=t("../internals/use-symbol-as-uid"),d=i.Symbol,f=o("wks"),h=c?d.for||d:d&&d.withoutSetter||l;r.exports=function(p){return u(f,p)||(f[p]=a&&u(d,p)?d[p]:h("Symbol."+p)),f[p]}},{"../internals/global":274,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-constructor-detection":336,"../internals/uid":350,"../internals/use-symbol-as-uid":351}],358:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/array-iteration").findIndex,u=t("../internals/add-to-unscopables"),l=!0;"findIndex"in[]&&Array(1).findIndex(function(){l=!1}),i({target:"Array",proto:!0,forced:l},{findIndex:function(a){return o(this,a,arguments.length>1?arguments[1]:void 0)}}),u("findIndex")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],359:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/array-iteration").find,u=t("../internals/add-to-unscopables"),l=!0;"find"in[]&&Array(1).find(function(){l=!1}),i({target:"Array",proto:!0,forced:l},{find:function(a){return o(this,a,arguments.length>1?arguments[1]:void 0)}}),u("find")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],360:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/array-includes").includes,u=t("../internals/fails"),l=t("../internals/add-to-unscopables");i({target:"Array",proto:!0,forced:u(function(){return!Array(1).includes()})},{includes:function(a){return o(this,a,arguments.length>1?arguments[1]:void 0)}}),l("includes")},{"../internals/add-to-unscopables":225,"../internals/array-includes":228,"../internals/export":259,"../internals/fails":260}],361:[function(t,r,s){var i=t("../internals/to-indexed-object"),o=t("../internals/add-to-unscopables"),u=t("../internals/iterators"),l=t("../internals/internal-state"),a=t("../internals/object-define-property").f,c=t("../internals/iterator-define"),d=t("../internals/create-iter-result-object"),f=t("../internals/is-pure"),h=t("../internals/descriptors"),p=l.set,g=l.getterFor("Array Iterator");r.exports=c(Array,"Array",function(y,b){p(this,{type:"Array Iterator",target:i(y),index:0,kind:b})},function(){var y=g(this),b=y.target,v=y.kind,k=y.index++;if(!b||k>=b.length)return y.target=void 0,d(void 0,!0);switch(v){case"keys":return d(k,!1);case"values":return d(b[k],!1)}return d([k,b[k]],!1)},"values");var m=u.Arguments=u.Array;if(o("keys"),o("values"),o("entries"),!f&&h&&m.name!=="values")try{a(m,"name",{value:"values"})}catch{}},{"../internals/add-to-unscopables":225,"../internals/create-iter-result-object":240,"../internals/descriptors":247,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/iterator-define":296,"../internals/iterators":298,"../internals/object-define-property":308,"../internals/to-indexed-object":341}],362:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/get-built-in"),u=t("../internals/function-apply"),l=t("../internals/function-call"),a=t("../internals/function-uncurry-this"),c=t("../internals/fails"),d=t("../internals/is-callable"),f=t("../internals/is-symbol"),h=t("../internals/array-slice"),p=t("../internals/get-json-replacer-function"),g=t("../internals/symbol-constructor-detection"),m=String,y=o("JSON","stringify"),b=a(/./.exec),v=a("".charAt),k=a("".charCodeAt),j=a("".replace),I=a(1 .toString),U=/[\uD800-\uDFFF]/g,P=/^[\uD800-\uDBFF]$/,z=/^[\uDC00-\uDFFF]$/,q=!g||c(function(){var N=o("Symbol")("stringify detection");return y([N])!=="[null]"||y({a:N})!=="{}"||y(Object(N))!=="{}"}),$=c(function(){return y("\uDF06\uD834")!=='"\\udf06\\ud834"'||y("\uDEAD")!=='"\\udead"'}),F=function(N,C){var w=h(arguments),_=p(C);if(d(_)||N!==void 0&&!f(N))return w[1]=function(x,S){if(d(_)&&(S=l(_,this,m(x),S)),!f(S))return S},u(y,null,w)},T=function(N,C,w){var _=v(w,C-1),x=v(w,C+1);return b(P,N)&&!b(z,x)||b(z,N)&&!b(P,_)?"\\u"+I(k(N,0),16):N};y&&i({target:"JSON",stat:!0,arity:3,forced:q||$},{stringify:function(N,C,w){var _=h(arguments),x=u(q?F:y,null,_);return $&&typeof x=="string"?j(x,U,T):x}})},{"../internals/array-slice":231,"../internals/export":259,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/get-json-replacer-function":272,"../internals/is-callable":285,"../internals/is-symbol":292,"../internals/symbol-constructor-detection":336}],363:[function(t,r,s){t("../internals/export")({target:"Number",stat:!0},{isNaN:function(i){return i!=i}})},{"../internals/export":259}],364:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/object-assign");i({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},{"../internals/export":259,"../internals/object-assign":305}],365:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/symbol-constructor-detection"),u=t("../internals/fails"),l=t("../internals/object-get-own-property-symbols"),a=t("../internals/to-object");i({target:"Object",stat:!0,forced:!o||u(function(){l.f(1)})},{getOwnPropertySymbols:function(c){var d=l.f;return d?d(a(c)):[]}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-get-own-property-symbols":312,"../internals/symbol-constructor-detection":336,"../internals/to-object":344}],366:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/to-object"),u=t("../internals/object-keys");i({target:"Object",stat:!0,forced:t("../internals/fails")(function(){u(1)})},{keys:function(l){return u(o(l))}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-keys":316,"../internals/to-object":344}],367:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/object-to-array").values;i({target:"Object",stat:!0},{values:function(u){return o(u)}})},{"../internals/export":259,"../internals/object-to-array":319}],368:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/function-call"),u=t("../internals/a-callable"),l=t("../internals/new-promise-capability"),a=t("../internals/perform"),c=t("../internals/iterate");i({target:"Promise",stat:!0,forced:t("../internals/promise-statics-incorrect-iteration")},{all:function(d){var f=this,h=l.f(f),p=h.resolve,g=h.reject,m=a(function(){var y=u(f.resolve),b=[],v=0,k=1;c(d,function(j){var I=v++,U=!1;k++,o(y,f,j).then(function(P){U||(U=!0,b[I]=P,--k||p(b))},g)}),--k||p(b)});return m.error&&g(m.value),h.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],369:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/is-pure"),u=t("../internals/promise-constructor-detection").CONSTRUCTOR,l=t("../internals/promise-native-constructor"),a=t("../internals/get-built-in"),c=t("../internals/is-callable"),d=t("../internals/define-built-in"),f=l&&l.prototype;if(i({target:"Promise",proto:!0,forced:u,real:!0},{catch:function(p){return this.then(void 0,p)}}),!o&&c(l)){var h=a("Promise").prototype.catch;f.catch!==h&&d(f,"catch",h,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],370:[function(t,r,s){var i,o,u,l=t("../internals/export"),a=t("../internals/is-pure"),c=t("../internals/engine-is-node"),d=t("../internals/global"),f=t("../internals/function-call"),h=t("../internals/define-built-in"),p=t("../internals/object-set-prototype-of"),g=t("../internals/set-to-string-tag"),m=t("../internals/set-species"),y=t("../internals/a-callable"),b=t("../internals/is-callable"),v=t("../internals/is-object"),k=t("../internals/an-instance"),j=t("../internals/species-constructor"),I=t("../internals/task").set,U=t("../internals/microtask"),P=t("../internals/host-report-errors"),z=t("../internals/perform"),q=t("../internals/queue"),$=t("../internals/internal-state"),F=t("../internals/promise-native-constructor"),T=t("../internals/promise-constructor-detection"),N=t("../internals/new-promise-capability"),C=T.CONSTRUCTOR,w=T.REJECTION_EVENT,_=T.SUBCLASSING,x=$.getterFor("Promise"),S=$.set,A=F&&F.prototype,B=F,E=A,V=d.TypeError,X=d.document,Q=d.process,D=N.f,Z=D,L=!!(X&&X.createEvent&&d.dispatchEvent),O=function(yt){var kt;return!(!v(yt)||!b(kt=yt.then))&&kt},G=function(yt,kt){var St,Tt,Lt,Xt=kt.value,re=kt.state===1,ue=re?yt.ok:yt.fail,ce=yt.resolve,de=yt.reject,ve=yt.domain;try{ue?(re||(kt.rejection===2&&pt(kt),kt.rejection=1),ue===!0?St=Xt:(ve&&ve.enter(),St=ue(Xt),ve&&(ve.exit(),Lt=!0)),St===yt.promise?de(new V("Promise-chain cycle")):(Tt=O(St))?f(Tt,St,ce,de):ce(St)):de(Xt)}catch(Te){ve&&!Lt&&ve.exit(),de(Te)}},nt=function(yt,kt){yt.notified||(yt.notified=!0,U(function(){for(var St,Tt=yt.reactions;St=Tt.get();)G(St,yt);yt.notified=!1,kt&&!yt.rejection&&ot(yt)}))},ct=function(yt,kt,St){var Tt,Lt;L?((Tt=X.createEvent("Event")).promise=kt,Tt.reason=St,Tt.initEvent(yt,!1,!0),d.dispatchEvent(Tt)):Tt={promise:kt,reason:St},!w&&(Lt=d["on"+yt])?Lt(Tt):yt==="unhandledrejection"&&P("Unhandled promise rejection",St)},ot=function(yt){f(I,d,function(){var kt,St=yt.facade,Tt=yt.value;if(mt(yt)&&(kt=z(function(){c?Q.emit("unhandledRejection",Tt,St):ct("unhandledrejection",St,Tt)}),yt.rejection=c||mt(yt)?2:1,kt.error))throw kt.value})},mt=function(yt){return yt.rejection!==1&&!yt.parent},pt=function(yt){f(I,d,function(){var kt=yt.facade;c?Q.emit("rejectionHandled",kt):ct("rejectionhandled",kt,yt.value)})},st=function(yt,kt,St){return function(Tt){yt(kt,Tt,St)}},at=function(yt,kt,St){yt.done||(yt.done=!0,St&&(yt=St),yt.value=kt,yt.state=2,nt(yt,!0))},vt=function(yt,kt,St){if(!yt.done){yt.done=!0,St&&(yt=St);try{if(yt.facade===kt)throw new V("Promise can't be resolved itself");var Tt=O(kt);Tt?U(function(){var Lt={done:!1};try{f(Tt,kt,st(vt,Lt,yt),st(at,Lt,yt))}catch(Xt){at(Lt,Xt,yt)}}):(yt.value=kt,yt.state=1,nt(yt,!1))}catch(Lt){at({done:!1},Lt,yt)}}};if(C&&(E=(B=function(yt){k(this,E),y(yt),f(i,this);var kt=x(this);try{yt(st(vt,kt),st(at,kt))}catch(St){at(kt,St)}}).prototype,(i=function(yt){S(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new q,rejection:!1,state:0,value:void 0})}).prototype=h(E,"then",function(yt,kt){var St=x(this),Tt=D(j(this,B));return St.parent=!0,Tt.ok=!b(yt)||yt,Tt.fail=b(kt)&&kt,Tt.domain=c?Q.domain:void 0,St.state===0?St.reactions.add(Tt):U(function(){G(Tt,St)}),Tt.promise}),o=function(){var yt=new i,kt=x(yt);this.promise=yt,this.resolve=st(vt,kt),this.reject=st(at,kt)},N.f=D=function(yt){return yt===B||yt===void 0?new o(yt):Z(yt)},!a&&b(F)&&A!==Object.prototype)){u=A.then,_||h(A,"then",function(yt,kt){var St=this;return new B(function(Tt,Lt){f(u,St,Tt,Lt)}).then(yt,kt)},{unsafe:!0});try{delete A.constructor}catch{}p&&p(A,E)}l({global:!0,constructor:!0,wrap:!0,forced:C},{Promise:B}),g(B,"Promise",!1,!0),m("Promise")},{"../internals/a-callable":222,"../internals/an-instance":226,"../internals/define-built-in":245,"../internals/engine-is-node":254,"../internals/export":259,"../internals/function-call":264,"../internals/global":274,"../internals/host-report-errors":277,"../internals/internal-state":282,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/microtask":302,"../internals/new-promise-capability":303,"../internals/object-set-prototype-of":318,"../internals/perform":323,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/queue":328,"../internals/set-species":330,"../internals/set-to-string-tag":331,"../internals/species-constructor":335,"../internals/task":339}],371:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/is-pure"),u=t("../internals/promise-native-constructor"),l=t("../internals/fails"),a=t("../internals/get-built-in"),c=t("../internals/is-callable"),d=t("../internals/species-constructor"),f=t("../internals/promise-resolve"),h=t("../internals/define-built-in"),p=u&&u.prototype;if(i({target:"Promise",proto:!0,real:!0,forced:!!u&&l(function(){p.finally.call({then:function(){}},function(){})})},{finally:function(m){var y=d(this,a("Promise")),b=c(m);return this.then(b?function(v){return f(y,m()).then(function(){return v})}:m,b?function(v){return f(y,m()).then(function(){throw v})}:m)}}),!o&&c(u)){var g=a("Promise").prototype.finally;p.finally!==g&&h(p,"finally",g,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/fails":260,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326,"../internals/species-constructor":335}],372:[function(t,r,s){t("../modules/es.promise.constructor"),t("../modules/es.promise.all"),t("../modules/es.promise.catch"),t("../modules/es.promise.race"),t("../modules/es.promise.reject"),t("../modules/es.promise.resolve")},{"../modules/es.promise.all":368,"../modules/es.promise.catch":369,"../modules/es.promise.constructor":370,"../modules/es.promise.race":373,"../modules/es.promise.reject":374,"../modules/es.promise.resolve":375}],373:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/function-call"),u=t("../internals/a-callable"),l=t("../internals/new-promise-capability"),a=t("../internals/perform"),c=t("../internals/iterate");i({target:"Promise",stat:!0,forced:t("../internals/promise-statics-incorrect-iteration")},{race:function(d){var f=this,h=l.f(f),p=h.reject,g=a(function(){var m=u(f.resolve);c(d,function(y){o(m,f,y).then(h.resolve,p)})});return g.error&&p(g.value),h.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],374:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/function-call"),u=t("../internals/new-promise-capability");i({target:"Promise",stat:!0,forced:t("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(l){var a=u.f(this);return o(a.reject,void 0,l),a.promise}})},{"../internals/export":259,"../internals/function-call":264,"../internals/new-promise-capability":303,"../internals/promise-constructor-detection":324}],375:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/get-built-in"),u=t("../internals/is-pure"),l=t("../internals/promise-native-constructor"),a=t("../internals/promise-constructor-detection").CONSTRUCTOR,c=t("../internals/promise-resolve"),d=o("Promise"),f=u&&!a;i({target:"Promise",stat:!0,forced:u||a},{resolve:function(h){return c(f&&this===d?l:this,h)}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326}],376:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/function-uncurry-this"),u=t("../internals/to-absolute-index"),l=RangeError,a=String.fromCharCode,c=String.fromCodePoint,d=o([].join);i({target:"String",stat:!0,arity:1,forced:!!c&&c.length!==1},{fromCodePoint:function(f){for(var h,p=[],g=arguments.length,m=0;g>m;){if(h=+arguments[m++],u(h,1114111)!==h)throw new l(h+" is not a valid code point");p[m]=h<65536?a(h):a(55296+((h-=65536)>>10),h%1024+56320)}return d(p,"")}})},{"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/to-absolute-index":340}],377:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/function-uncurry-this"),u=t("../internals/not-a-regexp"),l=t("../internals/require-object-coercible"),a=t("../internals/to-string"),c=t("../internals/correct-is-regexp-logic"),d=o("".indexOf);i({target:"String",proto:!0,forced:!c("includes")},{includes:function(f){return!!~d(a(l(this)),a(u(f)),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":238,"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/not-a-regexp":304,"../internals/require-object-coercible":329,"../internals/to-string":348}],378:[function(t,r,s){t("../internals/well-known-symbol-define")("asyncIterator")},{"../internals/well-known-symbol-define":355}],379:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/global"),u=t("../internals/function-call"),l=t("../internals/function-uncurry-this"),a=t("../internals/is-pure"),c=t("../internals/descriptors"),d=t("../internals/symbol-constructor-detection"),f=t("../internals/fails"),h=t("../internals/has-own-property"),p=t("../internals/object-is-prototype-of"),g=t("../internals/an-object"),m=t("../internals/to-indexed-object"),y=t("../internals/to-property-key"),b=t("../internals/to-string"),v=t("../internals/create-property-descriptor"),k=t("../internals/object-create"),j=t("../internals/object-keys"),I=t("../internals/object-get-own-property-names"),U=t("../internals/object-get-own-property-names-external"),P=t("../internals/object-get-own-property-symbols"),z=t("../internals/object-get-own-property-descriptor"),q=t("../internals/object-define-property"),$=t("../internals/object-define-properties"),F=t("../internals/object-property-is-enumerable"),T=t("../internals/define-built-in"),N=t("../internals/define-built-in-accessor"),C=t("../internals/shared"),w=t("../internals/shared-key"),_=t("../internals/hidden-keys"),x=t("../internals/uid"),S=t("../internals/well-known-symbol"),A=t("../internals/well-known-symbol-wrapped"),B=t("../internals/well-known-symbol-define"),E=t("../internals/symbol-define-to-primitive"),V=t("../internals/set-to-string-tag"),X=t("../internals/internal-state"),Q=t("../internals/array-iteration").forEach,D=w("hidden"),Z=X.set,L=X.getterFor("Symbol"),O=Object.prototype,G=o.Symbol,nt=G&&G.prototype,ct=o.RangeError,ot=o.TypeError,mt=o.QObject,pt=z.f,st=q.f,at=U.f,vt=F.f,yt=l([].push),kt=C("symbols"),St=C("op-symbols"),Tt=C("wks"),Lt=!mt||!mt.prototype||!mt.prototype.findChild,Xt=function(me,ke,we){var ne=pt(O,ke);ne&&delete O[ke],st(me,ke,we),ne&&me!==O&&st(O,ke,ne)},re=c&&f(function(){return k(st({},"a",{get:function(){return st(this,"a",{value:7}).a}})).a!==7})?Xt:st,ue=function(me,ke){var we=kt[me]=k(nt);return Z(we,{type:"Symbol",tag:me,description:ke}),c||(we.description=ke),we},ce=function(me,ke,we){me===O&&ce(St,ke,we),g(me);var ne=y(ke);return g(we),h(kt,ne)?(we.enumerable?(h(me,D)&&me[D][ne]&&(me[D][ne]=!1),we=k(we,{enumerable:v(0,!1)})):(h(me,D)||st(me,D,v(1,{})),me[D][ne]=!0),re(me,ne,we)):st(me,ne,we)},de=function(me,ke){g(me);var we=m(ke),ne=j(we).concat(ze(we));return Q(ne,function(Be){c&&!u(ve,we,Be)||ce(me,Be,we[Be])}),me},ve=function(me){var ke=y(me),we=u(vt,this,ke);return!(this===O&&h(kt,ke)&&!h(St,ke))&&(!(we||!h(this,ke)||!h(kt,ke)||h(this,D)&&this[D][ke])||we)},Te=function(me,ke){var we=m(me),ne=y(ke);if(we!==O||!h(kt,ne)||h(St,ne)){var Be=pt(we,ne);return!Be||!h(kt,ne)||h(we,D)&&we[D][ne]||(Be.enumerable=!0),Be}},ie=function(me){var ke=at(m(me)),we=[];return Q(ke,function(ne){h(kt,ne)||h(_,ne)||yt(we,ne)}),we},ze=function(me){var ke=me===O,we=at(ke?St:m(me)),ne=[];return Q(we,function(Be){!h(kt,Be)||ke&&!h(O,Be)||yt(ne,kt[Be])}),ne};d||(T(nt=(G=function(){if(p(nt,this))throw new ot("Symbol is not a constructor");var me=arguments.length&&arguments[0]!==void 0?b(arguments[0]):void 0,ke=x(me),we=function(ne){this===O&&u(we,St,ne),h(this,D)&&h(this[D],ke)&&(this[D][ke]=!1);var Be=v(1,ne);try{re(this,ke,Be)}catch($e){if(!($e instanceof ct))throw $e;Xt(this,ke,Be)}};return c&&Lt&&re(O,ke,{configurable:!0,set:we}),ue(ke,me)}).prototype,"toString",function(){return L(this).tag}),T(G,"withoutSetter",function(me){return ue(x(me),me)}),F.f=ve,q.f=ce,$.f=de,z.f=Te,I.f=U.f=ie,P.f=ze,A.f=function(me){return ue(S(me),me)},c&&(N(nt,"description",{configurable:!0,get:function(){return L(this).description}}),a||T(O,"propertyIsEnumerable",ve,{unsafe:!0}))),i({global:!0,constructor:!0,wrap:!0,forced:!d,sham:!d},{Symbol:G}),Q(j(Tt),function(me){B(me)}),i({target:"Symbol",stat:!0,forced:!d},{useSetter:function(){Lt=!0},useSimple:function(){Lt=!1}}),i({target:"Object",stat:!0,forced:!d,sham:!c},{create:function(me,ke){return ke===void 0?k(me):de(k(me),ke)},defineProperty:ce,defineProperties:de,getOwnPropertyDescriptor:Te}),i({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:ie}),E(),V(G,"Symbol"),_[D]=!0},{"../internals/an-object":227,"../internals/array-iteration":229,"../internals/create-property-descriptor":242,"../internals/define-built-in":245,"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/export":259,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-define-properties":307,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-names-external":310,"../internals/object-get-own-property-symbols":312,"../internals/object-is-prototype-of":314,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/set-to-string-tag":331,"../internals/shared":334,"../internals/shared-key":332,"../internals/symbol-constructor-detection":336,"../internals/symbol-define-to-primitive":337,"../internals/to-indexed-object":341,"../internals/to-property-key":346,"../internals/to-string":348,"../internals/uid":350,"../internals/well-known-symbol":357,"../internals/well-known-symbol-define":355,"../internals/well-known-symbol-wrapped":356}],380:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/get-built-in"),u=t("../internals/has-own-property"),l=t("../internals/to-string"),a=t("../internals/shared"),c=t("../internals/symbol-registry-detection"),d=a("string-to-symbol-registry"),f=a("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!c},{for:function(h){var p=l(h);if(u(d,p))return d[p];var g=o("Symbol")(p);return d[p]=g,f[g]=p,g}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/to-string":348}],381:[function(t,r,s){t("../modules/es.symbol.constructor"),t("../modules/es.symbol.for"),t("../modules/es.symbol.key-for"),t("../modules/es.json.stringify"),t("../modules/es.object.get-own-property-symbols")},{"../modules/es.json.stringify":362,"../modules/es.object.get-own-property-symbols":365,"../modules/es.symbol.constructor":379,"../modules/es.symbol.for":380,"../modules/es.symbol.key-for":382}],382:[function(t,r,s){var i=t("../internals/export"),o=t("../internals/has-own-property"),u=t("../internals/is-symbol"),l=t("../internals/try-to-string"),a=t("../internals/shared"),c=t("../internals/symbol-registry-detection"),d=a("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!c},{keyFor:function(f){if(!u(f))throw new TypeError(l(f)+" is not a symbol");if(o(d,f))return d[f]}})},{"../internals/export":259,"../internals/has-own-property":275,"../internals/is-symbol":292,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/try-to-string":349}],383:[function(t,r,s){function i(o){return Object.prototype.toString.call(o)}s.isArray=function(o){return Array.isArray?Array.isArray(o):i(o)==="[object Array]"},s.isBoolean=function(o){return typeof o=="boolean"},s.isNull=function(o){return o===null},s.isNullOrUndefined=function(o){return o==null},s.isNumber=function(o){return typeof o=="number"},s.isString=function(o){return typeof o=="string"},s.isSymbol=function(o){return typeof o=="symbol"},s.isUndefined=function(o){return o===void 0},s.isRegExp=function(o){return i(o)==="[object RegExp]"},s.isObject=function(o){return typeof o=="object"&&o!==null},s.isDate=function(o){return i(o)==="[object Date]"},s.isError=function(o){return i(o)==="[object Error]"||o instanceof Error},s.isFunction=function(o){return typeof o=="function"},s.isPrimitive=function(o){return o===null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||typeof o=="symbol"||o===void 0},s.isBuffer=t("buffer").Buffer.isBuffer},{buffer:220}],384:[function(t,r,s){(function(i){(function(){var o=t("elliptic"),u=t("bn.js");r.exports=function(d){return new a(d)};var l={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(d){this.curveType=l[d],this.curveType||(this.curveType={name:d}),this.curve=new o.ec(this.curveType.name),this.keys=void 0}function c(d,f,h){Array.isArray(d)||(d=d.toArray());var p=new i(d);if(h&&p.length<h){var g=new i(h-p.length);g.fill(0),p=i.concat([g,p])}return f?p.toString(f):p}l.p224=l.secp224r1,l.p256=l.secp256r1=l.prime256v1,l.p192=l.secp192r1=l.prime192v1,l.p384=l.secp384r1,l.p521=l.secp521r1,a.prototype.generateKeys=function(d,f){return this.keys=this.curve.genKeyPair(),this.getPublicKey(d,f)},a.prototype.computeSecret=function(d,f,h){return f=f||"utf8",i.isBuffer(d)||(d=new i(d,f)),c(this.curve.keyFromPublic(d).getPublic().mul(this.keys.getPrivate()).getX(),h,this.curveType.byteLength)},a.prototype.getPublicKey=function(d,f){var h=this.keys.getPublic(f==="compressed",!0);return f==="hybrid"&&(h[h.length-1]%2?h[0]=7:h[0]=6),c(h,d)},a.prototype.getPrivateKey=function(d){return c(this.keys.getPrivate(),d)},a.prototype.setPublicKey=function(d,f){return f=f||"utf8",i.isBuffer(d)||(d=new i(d,f)),this.keys._importPublic(d),this},a.prototype.setPrivateKey=function(d,f){f=f||"utf8",i.isBuffer(d)||(d=new i(d,f));var h=new u(d);return h=h.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(h),this}}).call(this)}).call(this,t("buffer").Buffer)},{"bn.js":385,buffer:220,elliptic:405}],385:[function(t,r,s){arguments[4][184][0].apply(s,arguments)},{buffer:188,dup:184}],386:[function(t,r,s){var i=t("inherits"),o=t("md5.js"),u=t("ripemd160"),l=t("sha.js"),a=t("cipher-base");function c(d){a.call(this,"digest"),this._hash=d}i(c,a),c.prototype._update=function(d){this._hash.update(d)},c.prototype._final=function(){return this._hash.digest()},r.exports=function(d){return(d=d.toLowerCase())==="md5"?new o:d==="rmd160"||d==="ripemd160"?new u:new c(l(d))}},{"cipher-base":221,inherits:440,"md5.js":450,ripemd160:493,"sha.js":498}],387:[function(t,r,s){var i=t("md5.js");r.exports=function(o){return new i().update(o).digest()}},{"md5.js":450}],388:[function(t,r,s){var i=t("inherits"),o=t("./legacy"),u=t("cipher-base"),l=t("safe-buffer").Buffer,a=t("create-hash/md5"),c=t("ripemd160"),d=t("sha.js"),f=l.alloc(128);function h(p,g){u.call(this,"digest"),typeof g=="string"&&(g=l.from(g));var m=p==="sha512"||p==="sha384"?128:64;this._alg=p,this._key=g,g.length>m?g=(p==="rmd160"?new c:d(p)).update(g).digest():g.length<m&&(g=l.concat([g,f],m));for(var y=this._ipad=l.allocUnsafe(m),b=this._opad=l.allocUnsafe(m),v=0;v<m;v++)y[v]=54^g[v],b[v]=92^g[v];this._hash=p==="rmd160"?new c:d(p),this._hash.update(y)}i(h,u),h.prototype._update=function(p){this._hash.update(p)},h.prototype._final=function(){var p=this._hash.digest();return(this._alg==="rmd160"?new c:d(this._alg)).update(this._opad).update(p).digest()},r.exports=function(p,g){return(p=p.toLowerCase())==="rmd160"||p==="ripemd160"?new h("rmd160",g):p==="md5"?new o(a,g):new h(p,g)}},{"./legacy":389,"cipher-base":221,"create-hash/md5":387,inherits:440,ripemd160:493,"safe-buffer":494,"sha.js":498}],389:[function(t,r,s){var i=t("inherits"),o=t("safe-buffer").Buffer,u=t("cipher-base"),l=o.alloc(128);function a(c,d){u.call(this,"digest"),typeof d=="string"&&(d=o.from(d)),this._alg=c,this._key=d,d.length>64?d=c(d):d.length<64&&(d=o.concat([d,l],64));for(var f=this._ipad=o.allocUnsafe(64),h=this._opad=o.allocUnsafe(64),p=0;p<64;p++)f[p]=54^d[p],h[p]=92^d[p];this._hash=[f]}i(a,u),a.prototype._update=function(c){this._hash.push(c)},a.prototype._final=function(){var c=this._alg(o.concat(this._hash));return this._alg(o.concat([this._opad,c]))},r.exports=a},{"cipher-base":221,inherits:440,"safe-buffer":494}],390:[function(t,r,s){s.randomBytes=s.rng=s.pseudoRandomBytes=s.prng=t("randombytes"),s.createHash=s.Hash=t("create-hash"),s.createHmac=s.Hmac=t("create-hmac");var i=t("browserify-sign/algos"),o=Object.keys(i),u=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(o);s.getHashes=function(){return u};var l=t("pbkdf2");s.pbkdf2=l.pbkdf2,s.pbkdf2Sync=l.pbkdf2Sync;var a=t("browserify-cipher");s.Cipher=a.Cipher,s.createCipher=a.createCipher,s.Cipheriv=a.Cipheriv,s.createCipheriv=a.createCipheriv,s.Decipher=a.Decipher,s.createDecipher=a.createDecipher,s.Decipheriv=a.Decipheriv,s.createDecipheriv=a.createDecipheriv,s.getCiphers=a.getCiphers,s.listCiphers=a.listCiphers;var c=t("diffie-hellman");s.DiffieHellmanGroup=c.DiffieHellmanGroup,s.createDiffieHellmanGroup=c.createDiffieHellmanGroup,s.getDiffieHellman=c.getDiffieHellman,s.createDiffieHellman=c.createDiffieHellman,s.DiffieHellman=c.DiffieHellman;var d=t("browserify-sign");s.createSign=d.createSign,s.Sign=d.Sign,s.createVerify=d.createVerify,s.Verify=d.Verify,s.createECDH=t("create-ecdh");var f=t("public-encrypt");s.publicEncrypt=f.publicEncrypt,s.privateEncrypt=f.privateEncrypt,s.publicDecrypt=f.publicDecrypt,s.privateDecrypt=f.privateDecrypt;var h=t("randomfill");s.randomFill=h.randomFill,s.randomFillSync=h.randomFillSync,s.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},s.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":206,"browserify-sign":213,"browserify-sign/algos":210,"create-ecdh":384,"create-hash":386,"create-hmac":388,"diffie-hellman":400,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],391:[function(t,r,s){(function(i,o){typeof s=="object"&&r!==void 0?r.exports=o():(i=typeof globalThis<"u"?globalThis:i||self).dayjs=o()})(void 0,function(){var i=6e4,o=36e5,u="millisecond",l="second",a="minute",c="hour",d="day",f="week",h="month",p="quarter",g="year",m="date",y="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,k={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(w){var _=["th","st","nd","rd"],x=w%100;return"["+w+(_[(x-20)%10]||_[x]||_[0])+"]"}},j=function(w,_,x){var S=String(w);return!S||S.length>=_?w:""+Array(_+1-S.length).join(x)+w},I={s:j,z:function(w){var _=-w.utcOffset(),x=Math.abs(_),S=Math.floor(x/60),A=x%60;return(_<=0?"+":"-")+j(S,2,"0")+":"+j(A,2,"0")},m:function w(_,x){if(_.date()<x.date())return-w(x,_);var S=12*(x.year()-_.year())+(x.month()-_.month()),A=_.clone().add(S,h),B=x-A<0,E=_.clone().add(S+(B?-1:1),h);return+(-(S+(x-A)/(B?A-E:E-A))||0)},a:function(w){return w<0?Math.ceil(w)||0:Math.floor(w)},p:function(w){return{M:h,y:g,w:f,d,D:m,h:c,m:a,s:l,ms:u,Q:p}[w]||String(w||"").toLowerCase().replace(/s$/,"")},u:function(w){return w===void 0}},U="en",P={};P[U]=k;var z="$isDayjsObject",q=function(w){return w instanceof N||!(!w||!w[z])},$=function w(_,x,S){var A;if(!_)return U;if(typeof _=="string"){var B=_.toLowerCase();P[B]&&(A=B),x&&(P[B]=x,A=B);var E=_.split("-");if(!A&&E.length>1)return w(E[0])}else{var V=_.name;P[V]=_,A=V}return!S&&A&&(U=A),A||!S&&U},F=function(w,_){if(q(w))return w.clone();var x=typeof _=="object"?_:{};return x.date=w,x.args=arguments,new N(x)},T=I;T.l=$,T.i=q,T.w=function(w,_){return F(w,{locale:_.$L,utc:_.$u,x:_.$x,$offset:_.$offset})};var N=function(){function w(x){this.$L=$(x.locale,null,!0),this.parse(x),this.$x=this.$x||x.x||{},this[z]=!0}var _=w.prototype;return _.parse=function(x){this.$d=function(S){var A=S.date,B=S.utc;if(A===null)return new Date(NaN);if(T.u(A))return new Date;if(A instanceof Date)return new Date(A);if(typeof A=="string"&&!/Z$/i.test(A)){var E=A.match(b);if(E){var V=E[2]-1||0,X=(E[7]||"0").substring(0,3);return B?new Date(Date.UTC(E[1],V,E[3]||1,E[4]||0,E[5]||0,E[6]||0,X)):new Date(E[1],V,E[3]||1,E[4]||0,E[5]||0,E[6]||0,X)}}return new Date(A)}(x),this.init()},_.init=function(){var x=this.$d;this.$y=x.getFullYear(),this.$M=x.getMonth(),this.$D=x.getDate(),this.$W=x.getDay(),this.$H=x.getHours(),this.$m=x.getMinutes(),this.$s=x.getSeconds(),this.$ms=x.getMilliseconds()},_.$utils=function(){return T},_.isValid=function(){return this.$d.toString()!==y},_.isSame=function(x,S){var A=F(x);return this.startOf(S)<=A&&A<=this.endOf(S)},_.isAfter=function(x,S){return F(x)<this.startOf(S)},_.isBefore=function(x,S){return this.endOf(S)<F(x)},_.$g=function(x,S,A){return T.u(x)?this[S]:this.set(A,x)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(x,S){var A=this,B=!!T.u(S)||S,E=T.p(x),V=function(nt,ct){var ot=T.w(A.$u?Date.UTC(A.$y,ct,nt):new Date(A.$y,ct,nt),A);return B?ot:ot.endOf(d)},X=function(nt,ct){return T.w(A.toDate()[nt].apply(A.toDate("s"),(B?[0,0,0,0]:[23,59,59,999]).slice(ct)),A)},Q=this.$W,D=this.$M,Z=this.$D,L="set"+(this.$u?"UTC":"");switch(E){case g:return B?V(1,0):V(31,11);case h:return B?V(1,D):V(0,D+1);case f:var O=this.$locale().weekStart||0,G=(Q<O?Q+7:Q)-O;return V(B?Z-G:Z+(6-G),D);case d:case m:return X(L+"Hours",0);case c:return X(L+"Minutes",1);case a:return X(L+"Seconds",2);case l:return X(L+"Milliseconds",3);default:return this.clone()}},_.endOf=function(x){return this.startOf(x,!1)},_.$set=function(x,S){var A,B=T.p(x),E="set"+(this.$u?"UTC":""),V=(A={},A[d]=E+"Date",A[m]=E+"Date",A[h]=E+"Month",A[g]=E+"FullYear",A[c]=E+"Hours",A[a]=E+"Minutes",A[l]=E+"Seconds",A[u]=E+"Milliseconds",A)[B],X=B===d?this.$D+(S-this.$W):S;if(B===h||B===g){var Q=this.clone().set(m,1);Q.$d[V](X),Q.init(),this.$d=Q.set(m,Math.min(this.$D,Q.daysInMonth())).$d}else V&&this.$d[V](X);return this.init(),this},_.set=function(x,S){return this.clone().$set(x,S)},_.get=function(x){return this[T.p(x)]()},_.add=function(x,S){var A,B=this;x=Number(x);var E=T.p(S),V=function(D){var Z=F(B);return T.w(Z.date(Z.date()+Math.round(D*x)),B)};if(E===h)return this.set(h,this.$M+x);if(E===g)return this.set(g,this.$y+x);if(E===d)return V(1);if(E===f)return V(7);var X=(A={},A[a]=i,A[c]=o,A[l]=1e3,A)[E]||1,Q=this.$d.getTime()+x*X;return T.w(Q,this)},_.subtract=function(x,S){return this.add(-1*x,S)},_.format=function(x){var S=this,A=this.$locale();if(!this.isValid())return A.invalidDate||y;var B=x||"YYYY-MM-DDTHH:mm:ssZ",E=T.z(this),V=this.$H,X=this.$m,Q=this.$M,D=A.weekdays,Z=A.months,L=A.meridiem,O=function(ct,ot,mt,pt){return ct&&(ct[ot]||ct(S,B))||mt[ot].slice(0,pt)},G=function(ct){return T.s(V%12||12,ct,"0")},nt=L||function(ct,ot,mt){var pt=ct<12?"AM":"PM";return mt?pt.toLowerCase():pt};return B.replace(v,function(ct,ot){return ot||function(mt){switch(mt){case"YY":return String(S.$y).slice(-2);case"YYYY":return T.s(S.$y,4,"0");case"M":return Q+1;case"MM":return T.s(Q+1,2,"0");case"MMM":return O(A.monthsShort,Q,Z,3);case"MMMM":return O(Z,Q);case"D":return S.$D;case"DD":return T.s(S.$D,2,"0");case"d":return String(S.$W);case"dd":return O(A.weekdaysMin,S.$W,D,2);case"ddd":return O(A.weekdaysShort,S.$W,D,3);case"dddd":return D[S.$W];case"H":return String(V);case"HH":return T.s(V,2,"0");case"h":return G(1);case"hh":return G(2);case"a":return nt(V,X,!0);case"A":return nt(V,X,!1);case"m":return String(X);case"mm":return T.s(X,2,"0");case"s":return String(S.$s);case"ss":return T.s(S.$s,2,"0");case"SSS":return T.s(S.$ms,3,"0");case"Z":return E}return null}(ct)||E.replace(":","")})},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(x,S,A){var B,E=this,V=T.p(S),X=F(x),Q=(X.utcOffset()-this.utcOffset())*i,D=this-X,Z=function(){return T.m(E,X)};switch(V){case g:B=Z()/12;break;case h:B=Z();break;case p:B=Z()/3;break;case f:B=(D-Q)/6048e5;break;case d:B=(D-Q)/864e5;break;case c:B=D/o;break;case a:B=D/i;break;case l:B=D/1e3;break;default:B=D}return A?B:T.a(B)},_.daysInMonth=function(){return this.endOf(h).$D},_.$locale=function(){return P[this.$L]},_.locale=function(x,S){if(!x)return this.$L;var A=this.clone(),B=$(x,S,!0);return B&&(A.$L=B),A},_.clone=function(){return T.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},w}(),C=N.prototype;return F.prototype=C,[["$ms",u],["$s",l],["$m",a],["$H",c],["$W",d],["$M",h],["$y",g],["$D",m]].forEach(function(w){C[w[1]]=function(_){return this.$g(_,w[0],w[1])}}),F.extend=function(w,_){return w.$i||(w(_,N,F),w.$i=!0),F},F.locale=$,F.isDayjs=q,F.unix=function(w){return F(1e3*w)},F.en=P[U],F.Ls=P,F.p={},F})},{}],392:[function(t,r,s){(function(i,o){typeof s=="object"&&r!==void 0?r.exports=o():(i=typeof globalThis<"u"?globalThis:i||self).dayjs_plugin_customParseFormat=o()})(void 0,function(){var i={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},o=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,u=/\d\d/,l=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,c={},d=function(b){return(b=+b)+(b>68?1900:2e3)},f=function(b){return function(v){this[b]=+v}},h=[/[+-]\d\d:?(\d\d)?|Z/,function(b){(this.zone||(this.zone={})).offset=function(v){if(!v||v==="Z")return 0;var k=v.match(/([+-]|\d\d)/g),j=60*k[1]+(+k[2]||0);return j===0?0:k[0]==="+"?-j:j}(b)}],p=function(b){var v=c[b];return v&&(v.indexOf?v:v.s.concat(v.f))},g=function(b,v){var k,j=c.meridiem;if(j){for(var I=1;I<=24;I+=1)if(b.indexOf(j(I,0,v))>-1){k=I>12;break}}else k=b===(v?"pm":"PM");return k},m={A:[a,function(b){this.afternoon=g(b,!1)}],a:[a,function(b){this.afternoon=g(b,!0)}],S:[/\d/,function(b){this.milliseconds=100*+b}],SS:[u,function(b){this.milliseconds=10*+b}],SSS:[/\d{3}/,function(b){this.milliseconds=+b}],s:[l,f("seconds")],ss:[l,f("seconds")],m:[l,f("minutes")],mm:[l,f("minutes")],H:[l,f("hours")],h:[l,f("hours")],HH:[l,f("hours")],hh:[l,f("hours")],D:[l,f("day")],DD:[u,f("day")],Do:[a,function(b){var v=c.ordinal,k=b.match(/\d+/);if(this.day=k[0],v)for(var j=1;j<=31;j+=1)v(j).replace(/\[|\]/g,"")===b&&(this.day=j)}],M:[l,f("month")],MM:[u,f("month")],MMM:[a,function(b){var v=p("months"),k=(p("monthsShort")||v.map(function(j){return j.slice(0,3)})).indexOf(b)+1;if(k<1)throw new Error;this.month=k%12||k}],MMMM:[a,function(b){var v=p("months").indexOf(b)+1;if(v<1)throw new Error;this.month=v%12||v}],Y:[/[+-]?\d+/,f("year")],YY:[u,function(b){this.year=d(b)}],YYYY:[/\d{4}/,f("year")],Z:h,ZZ:h};function y(b){var v,k;v=b,k=c&&c.formats;for(var j=(b=v.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(F,T,N){var C=N&&N.toUpperCase();return T||k[N]||i[N]||k[C].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(w,_,x){return _||x.slice(1)})})).match(o),I=j.length,U=0;U<I;U+=1){var P=j[U],z=m[P],q=z&&z[0],$=z&&z[1];j[U]=$?{regex:q,parser:$}:P.replace(/^\[|\]$/g,"")}return function(F){for(var T={},N=0,C=0;N<I;N+=1){var w=j[N];if(typeof w=="string")C+=w.length;else{var _=w.regex,x=w.parser,S=F.slice(C),A=_.exec(S)[0];x.call(T,A),F=F.replace(A,"")}}return function(B){var E=B.afternoon;if(E!==void 0){var V=B.hours;E?V<12&&(B.hours+=12):V===12&&(B.hours=0),delete B.afternoon}}(T),T}}return function(b,v,k){k.p.customParseFormat=!0,b&&b.parseTwoDigitYear&&(d=b.parseTwoDigitYear);var j=v.prototype,I=j.parse;j.parse=function(U){var P=U.date,z=U.utc,q=U.args;this.$u=z;var $=q[1];if(typeof $=="string"){var F=q[2]===!0,T=q[3]===!0,N=F||T,C=q[2];T&&(C=q[2]),c=this.$locale(),!F&&C&&(c=k.Ls[C]),this.$d=function(S,A,B){try{if(["x","X"].indexOf(A)>-1)return new Date((A==="X"?1e3:1)*S);var E=y(A)(S),V=E.year,X=E.month,Q=E.day,D=E.hours,Z=E.minutes,L=E.seconds,O=E.milliseconds,G=E.zone,nt=new Date,ct=Q||(V||X?1:nt.getDate()),ot=V||nt.getFullYear(),mt=0;V&&!X||(mt=X>0?X-1:nt.getMonth());var pt=D||0,st=Z||0,at=L||0,vt=O||0;return G?new Date(Date.UTC(ot,mt,ct,pt,st,at,vt+60*G.offset*1e3)):B?new Date(Date.UTC(ot,mt,ct,pt,st,at,vt)):new Date(ot,mt,ct,pt,st,at,vt)}catch{return new Date("")}}(P,$,z),this.init(),C&&C!==!0&&(this.$L=this.locale(C).$L),N&&P!=this.format($)&&(this.$d=new Date("")),c={}}else if($ instanceof Array)for(var w=$.length,_=1;_<=w;_+=1){q[1]=$[_-1];var x=k.apply(this,q);if(x.isValid()){this.$d=x.$d,this.$L=x.$L,this.init();break}_===w&&(this.$d=new Date(""))}else I.call(this,U)}}})},{}],393:[function(t,r,s){(function(i,o){typeof s=="object"&&r!==void 0?r.exports=o():(i=typeof globalThis<"u"?globalThis:i||self).dayjs_plugin_utc=o()})(void 0,function(){var i="minute",o=/[+-]\d\d(?::?\d\d)?/g,u=/([+-]|\d\d)/g;return function(l,a,c){var d=a.prototype;c.utc=function(b){var v={date:b,utc:!0,args:arguments};return new a(v)},d.utc=function(b){var v=c(this.toDate(),{locale:this.$L,utc:!0});return b?v.add(this.utcOffset(),i):v},d.local=function(){return c(this.toDate(),{locale:this.$L,utc:!1})};var f=d.parse;d.parse=function(b){b.utc&&(this.$u=!0),this.$utils().u(b.$offset)||(this.$offset=b.$offset),f.call(this,b)};var h=d.init;d.init=function(){if(this.$u){var b=this.$d;this.$y=b.getUTCFullYear(),this.$M=b.getUTCMonth(),this.$D=b.getUTCDate(),this.$W=b.getUTCDay(),this.$H=b.getUTCHours(),this.$m=b.getUTCMinutes(),this.$s=b.getUTCSeconds(),this.$ms=b.getUTCMilliseconds()}else h.call(this)};var p=d.utcOffset;d.utcOffset=function(b,v){var k=this.$utils().u;if(k(b))return this.$u?0:k(this.$offset)?p.call(this):this.$offset;if(typeof b=="string"&&(b=function(P){P===void 0&&(P="");var z=P.match(o);if(!z)return null;var q=(""+z[0]).match(u)||["-",0,0],$=q[0],F=60*+q[1]+ +q[2];return F===0?0:$==="+"?F:-F}(b))===null)return this;var j=Math.abs(b)<=16?60*b:b,I=this;if(v)return I.$offset=j,I.$u=b===0,I;if(b!==0){var U=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(I=this.local().add(j+U,i)).$offset=j,I.$x.$localOffset=U}else I=this.utc();return I};var g=d.format;d.format=function(b){var v=b||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,v)},d.valueOf=function(){var b=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*b},d.isUTC=function(){return!!this.$u},d.toISOString=function(){return this.toDate().toISOString()},d.toString=function(){return this.toDate().toUTCString()};var m=d.toDate;d.toDate=function(b){return b==="s"&&this.$offset?c(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():m.call(this)};var y=d.diff;d.diff=function(b,v,k){if(b&&this.$u===b.$u)return y.call(this,b,v,k);var j=this.local(),I=c(b).local();return y.call(j,I,v,k)}}})},{}],394:[function(t,r,s){s.utils=t("./des/utils"),s.Cipher=t("./des/cipher"),s.DES=t("./des/des"),s.CBC=t("./des/cbc"),s.EDE=t("./des/ede")},{"./des/cbc":395,"./des/cipher":396,"./des/des":397,"./des/ede":398,"./des/utils":399}],395:[function(t,r,s){var i=t("minimalistic-assert"),o=t("inherits"),u={};function l(a){i.equal(a.length,8,"Invalid IV length"),this.iv=new Array(8);for(var c=0;c<this.iv.length;c++)this.iv[c]=a[c]}s.instantiate=function(a){function c(p){a.call(this,p),this._cbcInit()}o(c,a);for(var d=Object.keys(u),f=0;f<d.length;f++){var h=d[f];c.prototype[h]=u[h]}return c.create=function(p){return new c(p)},c},u._cbcInit=function(){var a=new l(this.options.iv);this._cbcState=a},u._update=function(a,c,d,f){var h=this._cbcState,p=this.constructor.super_.prototype,g=h.iv;if(this.type==="encrypt"){for(var m=0;m<this.blockSize;m++)g[m]^=a[c+m];for(p._update.call(this,g,0,d,f),m=0;m<this.blockSize;m++)g[m]=d[f+m]}else{for(p._update.call(this,a,c,d,f),m=0;m<this.blockSize;m++)d[f+m]^=g[m];for(m=0;m<this.blockSize;m++)g[m]=a[c+m]}}},{inherits:440,"minimalistic-assert":453}],396:[function(t,r,s){var i=t("minimalistic-assert");function o(u){this.options=u,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=u.padding!==!1}r.exports=o,o.prototype._init=function(){},o.prototype.update=function(u){return u.length===0?[]:this.type==="decrypt"?this._updateDecrypt(u):this._updateEncrypt(u)},o.prototype._buffer=function(u,l){for(var a=Math.min(this.buffer.length-this.bufferOff,u.length-l),c=0;c<a;c++)this.buffer[this.bufferOff+c]=u[l+c];return this.bufferOff+=a,a},o.prototype._flushBuffer=function(u,l){return this._update(this.buffer,0,u,l),this.bufferOff=0,this.blockSize},o.prototype._updateEncrypt=function(u){var l=0,a=0,c=(this.bufferOff+u.length)/this.blockSize|0,d=new Array(c*this.blockSize);this.bufferOff!==0&&(l+=this._buffer(u,l),this.bufferOff===this.buffer.length&&(a+=this._flushBuffer(d,a)));for(var f=u.length-(u.length-l)%this.blockSize;l<f;l+=this.blockSize)this._update(u,l,d,a),a+=this.blockSize;for(;l<u.length;l++,this.bufferOff++)this.buffer[this.bufferOff]=u[l];return d},o.prototype._updateDecrypt=function(u){for(var l=0,a=0,c=Math.ceil((this.bufferOff+u.length)/this.blockSize)-1,d=new Array(c*this.blockSize);c>0;c--)l+=this._buffer(u,l),a+=this._flushBuffer(d,a);return l+=this._buffer(u,l),d},o.prototype.final=function(u){var l,a;return u&&(l=this.update(u)),a=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),l?l.concat(a):a},o.prototype._pad=function(u,l){if(l===0)return!1;for(;l<u.length;)u[l++]=0;return!0},o.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var u=new Array(this.blockSize);return this._update(this.buffer,0,u,0),u},o.prototype._unpad=function(u){return u},o.prototype._finalDecrypt=function(){i.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var u=new Array(this.blockSize);return this._flushBuffer(u,0),this._unpad(u)}},{"minimalistic-assert":453}],397:[function(t,r,s){var i=t("minimalistic-assert"),o=t("inherits"),u=t("./utils"),l=t("./cipher");function a(){this.tmp=new Array(2),this.keys=null}function c(f){l.call(this,f);var h=new a;this._desState=h,this.deriveKeys(h,f.key)}o(c,l),r.exports=c,c.create=function(f){return new c(f)};var d=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];c.prototype.deriveKeys=function(f,h){f.keys=new Array(32),i.equal(h.length,this.blockSize,"Invalid key length");var p=u.readUInt32BE(h,0),g=u.readUInt32BE(h,4);u.pc1(p,g,f.tmp,0),p=f.tmp[0],g=f.tmp[1];for(var m=0;m<f.keys.length;m+=2){var y=d[m>>>1];p=u.r28shl(p,y),g=u.r28shl(g,y),u.pc2(p,g,f.keys,m)}},c.prototype._update=function(f,h,p,g){var m=this._desState,y=u.readUInt32BE(f,h),b=u.readUInt32BE(f,h+4);u.ip(y,b,m.tmp,0),y=m.tmp[0],b=m.tmp[1],this.type==="encrypt"?this._encrypt(m,y,b,m.tmp,0):this._decrypt(m,y,b,m.tmp,0),y=m.tmp[0],b=m.tmp[1],u.writeUInt32BE(p,y,g),u.writeUInt32BE(p,b,g+4)},c.prototype._pad=function(f,h){if(this.padding===!1)return!1;for(var p=f.length-h,g=h;g<f.length;g++)f[g]=p;return!0},c.prototype._unpad=function(f){if(this.padding===!1)return f;for(var h=f[f.length-1],p=f.length-h;p<f.length;p++)i.equal(f[p],h);return f.slice(0,f.length-h)},c.prototype._encrypt=function(f,h,p,g,m){for(var y=h,b=p,v=0;v<f.keys.length;v+=2){var k=f.keys[v],j=f.keys[v+1];u.expand(b,f.tmp,0),k^=f.tmp[0],j^=f.tmp[1];var I=u.substitute(k,j),U=b;b=(y^u.permute(I))>>>0,y=U}u.rip(b,y,g,m)},c.prototype._decrypt=function(f,h,p,g,m){for(var y=p,b=h,v=f.keys.length-2;v>=0;v-=2){var k=f.keys[v],j=f.keys[v+1];u.expand(y,f.tmp,0),k^=f.tmp[0],j^=f.tmp[1];var I=u.substitute(k,j),U=y;y=(b^u.permute(I))>>>0,b=U}u.rip(y,b,g,m)}},{"./cipher":396,"./utils":399,inherits:440,"minimalistic-assert":453}],398:[function(t,r,s){var i=t("minimalistic-assert"),o=t("inherits"),u=t("./cipher"),l=t("./des");function a(d,f){i.equal(f.length,24,"Invalid key length");var h=f.slice(0,8),p=f.slice(8,16),g=f.slice(16,24);this.ciphers=d==="encrypt"?[l.create({type:"encrypt",key:h}),l.create({type:"decrypt",key:p}),l.create({type:"encrypt",key:g})]:[l.create({type:"decrypt",key:g}),l.create({type:"encrypt",key:p}),l.create({type:"decrypt",key:h})]}function c(d){u.call(this,d);var f=new a(this.type,this.options.key);this._edeState=f}o(c,u),r.exports=c,c.create=function(d){return new c(d)},c.prototype._update=function(d,f,h,p){var g=this._edeState;g.ciphers[0]._update(d,f,h,p),g.ciphers[1]._update(h,p,h,p),g.ciphers[2]._update(h,p,h,p)},c.prototype._pad=l.prototype._pad,c.prototype._unpad=l.prototype._unpad},{"./cipher":396,"./des":397,inherits:440,"minimalistic-assert":453}],399:[function(t,r,s){s.readUInt32BE=function(l,a){return(l[0+a]<<24|l[1+a]<<16|l[2+a]<<8|l[3+a])>>>0},s.writeUInt32BE=function(l,a,c){l[0+c]=a>>>24,l[1+c]=a>>>16&255,l[2+c]=a>>>8&255,l[3+c]=255&a},s.ip=function(l,a,c,d){for(var f=0,h=0,p=6;p>=0;p-=2){for(var g=0;g<=24;g+=8)f<<=1,f|=a>>>g+p&1;for(g=0;g<=24;g+=8)f<<=1,f|=l>>>g+p&1}for(p=6;p>=0;p-=2){for(g=1;g<=25;g+=8)h<<=1,h|=a>>>g+p&1;for(g=1;g<=25;g+=8)h<<=1,h|=l>>>g+p&1}c[d+0]=f>>>0,c[d+1]=h>>>0},s.rip=function(l,a,c,d){for(var f=0,h=0,p=0;p<4;p++)for(var g=24;g>=0;g-=8)f<<=1,f|=a>>>g+p&1,f<<=1,f|=l>>>g+p&1;for(p=4;p<8;p++)for(g=24;g>=0;g-=8)h<<=1,h|=a>>>g+p&1,h<<=1,h|=l>>>g+p&1;c[d+0]=f>>>0,c[d+1]=h>>>0},s.pc1=function(l,a,c,d){for(var f=0,h=0,p=7;p>=5;p--){for(var g=0;g<=24;g+=8)f<<=1,f|=a>>g+p&1;for(g=0;g<=24;g+=8)f<<=1,f|=l>>g+p&1}for(g=0;g<=24;g+=8)f<<=1,f|=a>>g+p&1;for(p=1;p<=3;p++){for(g=0;g<=24;g+=8)h<<=1,h|=a>>g+p&1;for(g=0;g<=24;g+=8)h<<=1,h|=l>>g+p&1}for(g=0;g<=24;g+=8)h<<=1,h|=l>>g+p&1;c[d+0]=f>>>0,c[d+1]=h>>>0},s.r28shl=function(l,a){return l<<a&268435455|l>>>28-a};var i=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];s.pc2=function(l,a,c,d){for(var f=0,h=0,p=i.length>>>1,g=0;g<p;g++)f<<=1,f|=l>>>i[g]&1;for(g=p;g<i.length;g++)h<<=1,h|=a>>>i[g]&1;c[d+0]=f>>>0,c[d+1]=h>>>0},s.expand=function(l,a,c){var d=0,f=0;d=(1&l)<<5|l>>>27;for(var h=23;h>=15;h-=4)d<<=6,d|=l>>>h&63;for(h=11;h>=3;h-=4)f|=l>>>h&63,f<<=6;f|=(31&l)<<1|l>>>31,a[c+0]=d>>>0,a[c+1]=f>>>0};var o=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];s.substitute=function(l,a){for(var c=0,d=0;d<4;d++)c<<=4,c|=o[64*d+(l>>>18-6*d&63)];for(d=0;d<4;d++)c<<=4,c|=o[256+64*d+(a>>>18-6*d&63)];return c>>>0};var u=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];s.permute=function(l){for(var a=0,c=0;c<u.length;c++)a<<=1,a|=l>>>u[c]&1;return a>>>0},s.padSplit=function(l,a,c){for(var d=l.toString(2);d.length<a;)d="0"+d;for(var f=[],h=0;h<a;h+=c)f.push(d.slice(h,h+c));return f.join(" ")}},{}],400:[function(t,r,s){(function(i){(function(){var o=t("./lib/generatePrime"),u=t("./lib/primes.json"),l=t("./lib/dh"),a={binary:!0,hex:!0,base64:!0};s.DiffieHellmanGroup=s.createDiffieHellmanGroup=s.getDiffieHellman=function(c){var d=new i(u[c].prime,"hex"),f=new i(u[c].gen,"hex");return new l(d,f)},s.createDiffieHellman=s.DiffieHellman=function c(d,f,h,p){return i.isBuffer(f)||a[f]===void 0?c(d,"binary",f,h):(f=f||"binary",p=p||"binary",h=h||new i([2]),i.isBuffer(h)||(h=new i(h,p)),typeof d=="number"?new l(o(d,h),h,!0):(i.isBuffer(d)||(d=new i(d,f)),new l(d,h,!0)))}}).call(this)}).call(this,t("buffer").Buffer)},{"./lib/dh":401,"./lib/generatePrime":402,"./lib/primes.json":403,buffer:220}],401:[function(t,r,s){(function(i){(function(){var o=t("bn.js"),u=new(t("miller-rabin")),l=new o(24),a=new o(11),c=new o(10),d=new o(3),f=new o(7),h=t("./generatePrime"),p=t("randombytes");function g(k,j){return j=j||"utf8",i.isBuffer(k)||(k=new i(k,j)),this._pub=new o(k),this}function m(k,j){return j=j||"utf8",i.isBuffer(k)||(k=new i(k,j)),this._priv=new o(k),this}r.exports=b;var y={};function b(k,j,I){this.setGenerator(j),this.__prime=new o(k),this._prime=o.mont(this.__prime),this._primeLen=k.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,I?(this.setPublicKey=g,this.setPrivateKey=m):this._primeCode=8}function v(k,j){var I=new i(k.toArray());return j?I.toString(j):I}Object.defineProperty(b.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=function(k,j){var I=j.toString("hex"),U=[I,k.toString(16)].join("_");if(U in y)return y[U];var P,z=0;if(k.isEven()||!h.simpleSieve||!h.fermatTest(k)||!u.test(k))return z+=1,z+=I==="02"||I==="05"?8:4,y[U]=z,z;switch(u.test(k.shrn(1))||(z+=2),I){case"02":k.mod(l).cmp(a)&&(z+=8);break;case"05":(P=k.mod(c)).cmp(d)&&P.cmp(f)&&(z+=8);break;default:z+=4}return y[U]=z,z}(this.__prime,this.__gen)),this._primeCode}}),b.prototype.generateKeys=function(){return this._priv||(this._priv=new o(p(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},b.prototype.computeSecret=function(k){var j=(k=(k=new o(k)).toRed(this._prime)).redPow(this._priv).fromRed(),I=new i(j.toArray()),U=this.getPrime();if(I.length<U.length){var P=new i(U.length-I.length);P.fill(0),I=i.concat([P,I])}return I},b.prototype.getPublicKey=function(k){return v(this._pub,k)},b.prototype.getPrivateKey=function(k){return v(this._priv,k)},b.prototype.getPrime=function(k){return v(this.__prime,k)},b.prototype.getGenerator=function(k){return v(this._gen,k)},b.prototype.setGenerator=function(k,j){return j=j||"utf8",i.isBuffer(k)||(k=new i(k,j)),this.__gen=k,this._gen=new o(k),this}}).call(this)}).call(this,t("buffer").Buffer)},{"./generatePrime":402,"bn.js":404,buffer:220,"miller-rabin":451,randombytes:475}],402:[function(t,r,s){var i=t("randombytes");r.exports=k,k.simpleSieve=b,k.fermatTest=v;var o=t("bn.js"),u=new o(24),l=new(t("miller-rabin")),a=new o(1),c=new o(2),d=new o(5),f=(new o(16),new o(8),new o(10)),h=new o(3),p=(new o(7),new o(11)),g=new o(4),m=(new o(12),null);function y(){if(m!==null)return m;var j=[];j[0]=2;for(var I=1,U=3;U<1048576;U+=2){for(var P=Math.ceil(Math.sqrt(U)),z=0;z<I&&j[z]<=P&&U%j[z]!=0;z++);I!==z&&j[z]<=P||(j[I++]=U)}return m=j,j}function b(j){for(var I=y(),U=0;U<I.length;U++)if(j.modn(I[U])===0)return j.cmpn(I[U])===0;return!0}function v(j){var I=o.mont(j);return c.toRed(I).redPow(j.subn(1)).fromRed().cmpn(1)===0}function k(j,I){if(j<16)return new o(I===2||I===5?[140,123]:[140,39]);var U,P;for(I=new o(I);;){for(U=new o(i(Math.ceil(j/8)));U.bitLength()>j;)U.ishrn(1);if(U.isEven()&&U.iadd(a),U.testn(1)||U.iadd(c),I.cmp(c)){if(!I.cmp(d))for(;U.mod(f).cmp(h);)U.iadd(g)}else for(;U.mod(u).cmp(p);)U.iadd(g);if(b(P=U.shrn(1))&&b(U)&&v(P)&&v(U)&&l.test(P)&&l.test(U))return U}}},{"bn.js":404,"miller-rabin":451,randombytes:475}],403:[function(t,r,s){r.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],404:[function(t,r,s){arguments[4][184][0].apply(s,arguments)},{buffer:188,dup:184}],405:[function(t,r,s){var i=s;i.version=t("../package.json").version,i.utils=t("./elliptic/utils"),i.rand=t("brorand"),i.curve=t("./elliptic/curve"),i.curves=t("./elliptic/curves"),i.ec=t("./elliptic/ec"),i.eddsa=t("./elliptic/eddsa")},{"../package.json":421,"./elliptic/curve":408,"./elliptic/curves":411,"./elliptic/ec":412,"./elliptic/eddsa":415,"./elliptic/utils":419,brorand:187}],406:[function(t,r,s){var i=t("bn.js"),o=t("../utils"),u=o.getNAF,l=o.getJSF,a=o.assert;function c(f,h){this.type=f,this.p=new i(h.p,16),this.red=h.prime?i.red(h.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=h.n&&new i(h.n,16),this.g=h.g&&this.pointFromJSON(h.g,h.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var p=this.n&&this.p.div(this.n);!p||p.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function d(f,h){this.curve=f,this.type=h,this.precomputed=null}r.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(f,h){a(f.precomputed);var p=f._getDoubles(),g=u(h,1,this._bitLength),m=(1<<p.step+1)-(p.step%2==0?2:1);m/=3;var y,b,v=[];for(y=0;y<g.length;y+=p.step){b=0;for(var k=y+p.step-1;k>=y;k--)b=(b<<1)+g[k];v.push(b)}for(var j=this.jpoint(null,null,null),I=this.jpoint(null,null,null),U=m;U>0;U--){for(y=0;y<v.length;y++)(b=v[y])===U?I=I.mixedAdd(p.points[y]):b===-U&&(I=I.mixedAdd(p.points[y].neg()));j=j.add(I)}return j.toP()},c.prototype._wnafMul=function(f,h){var p=4,g=f._getNAFPoints(p);p=g.wnd;for(var m=g.points,y=u(h,p,this._bitLength),b=this.jpoint(null,null,null),v=y.length-1;v>=0;v--){for(var k=0;v>=0&&y[v]===0;v--)k++;if(v>=0&&k++,b=b.dblp(k),v<0)break;var j=y[v];a(j!==0),b=f.type==="affine"?j>0?b.mixedAdd(m[j-1>>1]):b.mixedAdd(m[-j-1>>1].neg()):j>0?b.add(m[j-1>>1]):b.add(m[-j-1>>1].neg())}return f.type==="affine"?b.toP():b},c.prototype._wnafMulAdd=function(f,h,p,g,m){var y,b,v,k=this._wnafT1,j=this._wnafT2,I=this._wnafT3,U=0;for(y=0;y<g;y++){var P=(v=h[y])._getNAFPoints(f);k[y]=P.wnd,j[y]=P.points}for(y=g-1;y>=1;y-=2){var z=y-1,q=y;if(k[z]===1&&k[q]===1){var $=[h[z],null,null,h[q]];h[z].y.cmp(h[q].y)===0?($[1]=h[z].add(h[q]),$[2]=h[z].toJ().mixedAdd(h[q].neg())):h[z].y.cmp(h[q].y.redNeg())===0?($[1]=h[z].toJ().mixedAdd(h[q]),$[2]=h[z].add(h[q].neg())):($[1]=h[z].toJ().mixedAdd(h[q]),$[2]=h[z].toJ().mixedAdd(h[q].neg()));var F=[-3,-1,-5,-7,0,7,5,1,3],T=l(p[z],p[q]);for(U=Math.max(T[0].length,U),I[z]=new Array(U),I[q]=new Array(U),b=0;b<U;b++){var N=0|T[0][b],C=0|T[1][b];I[z][b]=F[3*(N+1)+(C+1)],I[q][b]=0,j[z]=$}}else I[z]=u(p[z],k[z],this._bitLength),I[q]=u(p[q],k[q],this._bitLength),U=Math.max(I[z].length,U),U=Math.max(I[q].length,U)}var w=this.jpoint(null,null,null),_=this._wnafT4;for(y=U;y>=0;y--){for(var x=0;y>=0;){var S=!0;for(b=0;b<g;b++)_[b]=0|I[b][y],_[b]!==0&&(S=!1);if(!S)break;x++,y--}if(y>=0&&x++,w=w.dblp(x),y<0)break;for(b=0;b<g;b++){var A=_[b];A!==0&&(A>0?v=j[b][A-1>>1]:A<0&&(v=j[b][-A-1>>1].neg()),w=v.type==="affine"?w.mixedAdd(v):w.add(v))}}for(y=0;y<g;y++)j[y]=null;return m?w:w.toP()},c.BasePoint=d,d.prototype.eq=function(){throw new Error("Not implemented")},d.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(f,h){f=o.toArray(f,h);var p=this.p.byteLength();if((f[0]===4||f[0]===6||f[0]===7)&&f.length-1==2*p)return f[0]===6?a(f[f.length-1]%2==0):f[0]===7&&a(f[f.length-1]%2==1),this.point(f.slice(1,1+p),f.slice(1+p,1+2*p));if((f[0]===2||f[0]===3)&&f.length-1===p)return this.pointFromX(f.slice(1,1+p),f[0]===3);throw new Error("Unknown point format")},d.prototype.encodeCompressed=function(f){return this.encode(f,!0)},d.prototype._encode=function(f){var h=this.curve.p.byteLength(),p=this.getX().toArray("be",h);return f?[this.getY().isEven()?2:3].concat(p):[4].concat(p,this.getY().toArray("be",h))},d.prototype.encode=function(f,h){return o.encode(this._encode(h),f)},d.prototype.precompute=function(f){if(this.precomputed)return this;var h={doubles:null,naf:null,beta:null};return h.naf=this._getNAFPoints(8),h.doubles=this._getDoubles(4,f),h.beta=this._getBeta(),this.precomputed=h,this},d.prototype._hasDoubles=function(f){if(!this.precomputed)return!1;var h=this.precomputed.doubles;return!!h&&h.points.length>=Math.ceil((f.bitLength()+1)/h.step)},d.prototype._getDoubles=function(f,h){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var p=[this],g=this,m=0;m<h;m+=f){for(var y=0;y<f;y++)g=g.dbl();p.push(g)}return{step:f,points:p}},d.prototype._getNAFPoints=function(f){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var h=[this],p=(1<<f)-1,g=p===1?null:this.dbl(),m=1;m<p;m++)h[m]=h[m-1].add(g);return{wnd:f,points:h}},d.prototype._getBeta=function(){return null},d.prototype.dblp=function(f){for(var h=this,p=0;p<f;p++)h=h.dbl();return h}},{"../utils":419,"bn.js":420}],407:[function(t,r,s){var i=t("../utils"),o=t("bn.js"),u=t("inherits"),l=t("./base"),a=i.assert;function c(f){this.twisted=(0|f.a)!=1,this.mOneA=this.twisted&&(0|f.a)==-1,this.extended=this.mOneA,l.call(this,"edwards",f),this.a=new o(f.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new o(f.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new o(f.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|f.c)==1}function d(f,h,p,g,m){l.BasePoint.call(this,f,"projective"),h===null&&p===null&&g===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new o(h,16),this.y=new o(p,16),this.z=g?new o(g,16):this.curve.one,this.t=m&&new o(m,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}u(c,l),r.exports=c,c.prototype._mulA=function(f){return this.mOneA?f.redNeg():this.a.redMul(f)},c.prototype._mulC=function(f){return this.oneC?f:this.c.redMul(f)},c.prototype.jpoint=function(f,h,p,g){return this.point(f,h,p,g)},c.prototype.pointFromX=function(f,h){(f=new o(f,16)).red||(f=f.toRed(this.red));var p=f.redSqr(),g=this.c2.redSub(this.a.redMul(p)),m=this.one.redSub(this.c2.redMul(this.d).redMul(p)),y=g.redMul(m.redInvm()),b=y.redSqrt();if(b.redSqr().redSub(y).cmp(this.zero)!==0)throw new Error("invalid point");var v=b.fromRed().isOdd();return(h&&!v||!h&&v)&&(b=b.redNeg()),this.point(f,b)},c.prototype.pointFromY=function(f,h){(f=new o(f,16)).red||(f=f.toRed(this.red));var p=f.redSqr(),g=p.redSub(this.c2),m=p.redMul(this.d).redMul(this.c2).redSub(this.a),y=g.redMul(m.redInvm());if(y.cmp(this.zero)===0){if(h)throw new Error("invalid point");return this.point(this.zero,f)}var b=y.redSqrt();if(b.redSqr().redSub(y).cmp(this.zero)!==0)throw new Error("invalid point");return b.fromRed().isOdd()!==h&&(b=b.redNeg()),this.point(b,f)},c.prototype.validate=function(f){if(f.isInfinity())return!0;f.normalize();var h=f.x.redSqr(),p=f.y.redSqr(),g=h.redMul(this.a).redAdd(p),m=this.c2.redMul(this.one.redAdd(this.d.redMul(h).redMul(p)));return g.cmp(m)===0},u(d,l.BasePoint),c.prototype.pointFromJSON=function(f){return d.fromJSON(this,f)},c.prototype.point=function(f,h,p,g){return new d(this,f,h,p,g)},d.fromJSON=function(f,h){return new d(f,h[0],h[1],h[2])},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},d.prototype._extDbl=function(){var f=this.x.redSqr(),h=this.y.redSqr(),p=this.z.redSqr();p=p.redIAdd(p);var g=this.curve._mulA(f),m=this.x.redAdd(this.y).redSqr().redISub(f).redISub(h),y=g.redAdd(h),b=y.redSub(p),v=g.redSub(h),k=m.redMul(b),j=y.redMul(v),I=m.redMul(v),U=b.redMul(y);return this.curve.point(k,j,U,I)},d.prototype._projDbl=function(){var f,h,p,g,m,y,b=this.x.redAdd(this.y).redSqr(),v=this.x.redSqr(),k=this.y.redSqr();if(this.curve.twisted){var j=(g=this.curve._mulA(v)).redAdd(k);this.zOne?(f=b.redSub(v).redSub(k).redMul(j.redSub(this.curve.two)),h=j.redMul(g.redSub(k)),p=j.redSqr().redSub(j).redSub(j)):(m=this.z.redSqr(),y=j.redSub(m).redISub(m),f=b.redSub(v).redISub(k).redMul(y),h=j.redMul(g.redSub(k)),p=j.redMul(y))}else g=v.redAdd(k),m=this.curve._mulC(this.z).redSqr(),y=g.redSub(m).redSub(m),f=this.curve._mulC(b.redISub(g)).redMul(y),h=this.curve._mulC(g).redMul(v.redISub(k)),p=g.redMul(y);return this.curve.point(f,h,p)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},d.prototype._extAdd=function(f){var h=this.y.redSub(this.x).redMul(f.y.redSub(f.x)),p=this.y.redAdd(this.x).redMul(f.y.redAdd(f.x)),g=this.t.redMul(this.curve.dd).redMul(f.t),m=this.z.redMul(f.z.redAdd(f.z)),y=p.redSub(h),b=m.redSub(g),v=m.redAdd(g),k=p.redAdd(h),j=y.redMul(b),I=v.redMul(k),U=y.redMul(k),P=b.redMul(v);return this.curve.point(j,I,P,U)},d.prototype._projAdd=function(f){var h,p,g=this.z.redMul(f.z),m=g.redSqr(),y=this.x.redMul(f.x),b=this.y.redMul(f.y),v=this.curve.d.redMul(y).redMul(b),k=m.redSub(v),j=m.redAdd(v),I=this.x.redAdd(this.y).redMul(f.x.redAdd(f.y)).redISub(y).redISub(b),U=g.redMul(k).redMul(I);return this.curve.twisted?(h=g.redMul(j).redMul(b.redSub(this.curve._mulA(y))),p=k.redMul(j)):(h=g.redMul(j).redMul(b.redSub(y)),p=this.curve._mulC(k).redMul(j)),this.curve.point(U,h,p)},d.prototype.add=function(f){return this.isInfinity()?f:f.isInfinity()?this:this.curve.extended?this._extAdd(f):this._projAdd(f)},d.prototype.mul=function(f){return this._hasDoubles(f)?this.curve._fixedNafMul(this,f):this.curve._wnafMul(this,f)},d.prototype.mulAdd=function(f,h,p){return this.curve._wnafMulAdd(1,[this,h],[f,p],2,!1)},d.prototype.jmulAdd=function(f,h,p){return this.curve._wnafMulAdd(1,[this,h],[f,p],2,!0)},d.prototype.normalize=function(){if(this.zOne)return this;var f=this.z.redInvm();return this.x=this.x.redMul(f),this.y=this.y.redMul(f),this.t&&(this.t=this.t.redMul(f)),this.z=this.curve.one,this.zOne=!0,this},d.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()},d.prototype.getY=function(){return this.normalize(),this.y.fromRed()},d.prototype.eq=function(f){return this===f||this.getX().cmp(f.getX())===0&&this.getY().cmp(f.getY())===0},d.prototype.eqXToP=function(f){var h=f.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(h)===0)return!0;for(var p=f.clone(),g=this.curve.redN.redMul(this.z);;){if(p.iadd(this.curve.n),p.cmp(this.curve.p)>=0)return!1;if(h.redIAdd(g),this.x.cmp(h)===0)return!0}},d.prototype.toP=d.prototype.normalize,d.prototype.mixedAdd=d.prototype.add},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],408:[function(t,r,s){var i=s;i.base=t("./base"),i.short=t("./short"),i.mont=t("./mont"),i.edwards=t("./edwards")},{"./base":406,"./edwards":407,"./mont":409,"./short":410}],409:[function(t,r,s){var i=t("bn.js"),o=t("inherits"),u=t("./base"),l=t("../utils");function a(d){u.call(this,"mont",d),this.a=new i(d.a,16).toRed(this.red),this.b=new i(d.b,16).toRed(this.red),this.i4=new i(4).toRed(this.red).redInvm(),this.two=new i(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(d,f,h){u.BasePoint.call(this,d,"projective"),f===null&&h===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new i(f,16),this.z=new i(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}o(a,u),r.exports=a,a.prototype.validate=function(d){var f=d.normalize().x,h=f.redSqr(),p=h.redMul(f).redAdd(h.redMul(this.a)).redAdd(f);return p.redSqrt().redSqr().cmp(p)===0},o(c,u.BasePoint),a.prototype.decodePoint=function(d,f){return this.point(l.toArray(d,f),1)},a.prototype.point=function(d,f){return new c(this,d,f)},a.prototype.pointFromJSON=function(d){return c.fromJSON(this,d)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(d,f){return new c(d,f[0],f[1]||d.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.z.cmpn(0)===0},c.prototype.dbl=function(){var d=this.x.redAdd(this.z).redSqr(),f=this.x.redSub(this.z).redSqr(),h=d.redSub(f),p=d.redMul(f),g=h.redMul(f.redAdd(this.curve.a24.redMul(h)));return this.curve.point(p,g)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(d,f){var h=this.x.redAdd(this.z),p=this.x.redSub(this.z),g=d.x.redAdd(d.z),m=d.x.redSub(d.z).redMul(h),y=g.redMul(p),b=f.z.redMul(m.redAdd(y).redSqr()),v=f.x.redMul(m.redISub(y).redSqr());return this.curve.point(b,v)},c.prototype.mul=function(d){for(var f=d.clone(),h=this,p=this.curve.point(null,null),g=[];f.cmpn(0)!==0;f.iushrn(1))g.push(f.andln(1));for(var m=g.length-1;m>=0;m--)g[m]===0?(h=h.diffAdd(p,this),p=p.dbl()):(p=h.diffAdd(p,this),h=h.dbl());return p},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(d){return this.getX().cmp(d.getX())===0},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],410:[function(t,r,s){var i=t("../utils"),o=t("bn.js"),u=t("inherits"),l=t("./base"),a=i.assert;function c(h){l.call(this,"short",h),this.a=new o(h.a,16).toRed(this.red),this.b=new o(h.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(h),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function d(h,p,g,m){l.BasePoint.call(this,h,"affine"),p===null&&g===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new o(p,16),this.y=new o(g,16),m&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function f(h,p,g,m){l.BasePoint.call(this,h,"jacobian"),p===null&&g===null&&m===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new o(0)):(this.x=new o(p,16),this.y=new o(g,16),this.z=new o(m,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}u(c,l),r.exports=c,c.prototype._getEndomorphism=function(h){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var p,g;if(h.beta)p=new o(h.beta,16).toRed(this.red);else{var m=this._getEndoRoots(this.p);p=(p=m[0].cmp(m[1])<0?m[0]:m[1]).toRed(this.red)}if(h.lambda)g=new o(h.lambda,16);else{var y=this._getEndoRoots(this.n);this.g.mul(y[0]).x.cmp(this.g.x.redMul(p))===0?g=y[0]:(g=y[1],a(this.g.mul(g).x.cmp(this.g.x.redMul(p))===0))}return{beta:p,lambda:g,basis:h.basis?h.basis.map(function(b){return{a:new o(b.a,16),b:new o(b.b,16)}}):this._getEndoBasis(g)}}},c.prototype._getEndoRoots=function(h){var p=h===this.p?this.red:o.mont(h),g=new o(2).toRed(p).redInvm(),m=g.redNeg(),y=new o(3).toRed(p).redNeg().redSqrt().redMul(g);return[m.redAdd(y).fromRed(),m.redSub(y).fromRed()]},c.prototype._getEndoBasis=function(h){for(var p,g,m,y,b,v,k,j,I,U=this.n.ushrn(Math.floor(this.n.bitLength()/2)),P=h,z=this.n.clone(),q=new o(1),$=new o(0),F=new o(0),T=new o(1),N=0;P.cmpn(0)!==0;){var C=z.div(P);j=z.sub(C.mul(P)),I=F.sub(C.mul(q));var w=T.sub(C.mul($));if(!m&&j.cmp(U)<0)p=k.neg(),g=q,m=j.neg(),y=I;else if(m&&++N==2)break;k=j,z=P,P=j,F=q,q=I,T=$,$=w}b=j.neg(),v=I;var _=m.sqr().add(y.sqr());return b.sqr().add(v.sqr()).cmp(_)>=0&&(b=p,v=g),m.negative&&(m=m.neg(),y=y.neg()),b.negative&&(b=b.neg(),v=v.neg()),[{a:m,b:y},{a:b,b:v}]},c.prototype._endoSplit=function(h){var p=this.endo.basis,g=p[0],m=p[1],y=m.b.mul(h).divRound(this.n),b=g.b.neg().mul(h).divRound(this.n),v=y.mul(g.a),k=b.mul(m.a),j=y.mul(g.b),I=b.mul(m.b);return{k1:h.sub(v).sub(k),k2:j.add(I).neg()}},c.prototype.pointFromX=function(h,p){(h=new o(h,16)).red||(h=h.toRed(this.red));var g=h.redSqr().redMul(h).redIAdd(h.redMul(this.a)).redIAdd(this.b),m=g.redSqrt();if(m.redSqr().redSub(g).cmp(this.zero)!==0)throw new Error("invalid point");var y=m.fromRed().isOdd();return(p&&!y||!p&&y)&&(m=m.redNeg()),this.point(h,m)},c.prototype.validate=function(h){if(h.inf)return!0;var p=h.x,g=h.y,m=this.a.redMul(p),y=p.redSqr().redMul(p).redIAdd(m).redIAdd(this.b);return g.redSqr().redISub(y).cmpn(0)===0},c.prototype._endoWnafMulAdd=function(h,p,g){for(var m=this._endoWnafT1,y=this._endoWnafT2,b=0;b<h.length;b++){var v=this._endoSplit(p[b]),k=h[b],j=k._getBeta();v.k1.negative&&(v.k1.ineg(),k=k.neg(!0)),v.k2.negative&&(v.k2.ineg(),j=j.neg(!0)),m[2*b]=k,m[2*b+1]=j,y[2*b]=v.k1,y[2*b+1]=v.k2}for(var I=this._wnafMulAdd(1,m,y,2*b,g),U=0;U<2*b;U++)m[U]=null,y[U]=null;return I},u(d,l.BasePoint),c.prototype.point=function(h,p,g){return new d(this,h,p,g)},c.prototype.pointFromJSON=function(h,p){return d.fromJSON(this,h,p)},d.prototype._getBeta=function(){if(this.curve.endo){var h=this.precomputed;if(h&&h.beta)return h.beta;var p=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(h){var g=this.curve,m=function(y){return g.point(y.x.redMul(g.endo.beta),y.y)};h.beta=p,p.precomputed={beta:null,naf:h.naf&&{wnd:h.naf.wnd,points:h.naf.points.map(m)},doubles:h.doubles&&{step:h.doubles.step,points:h.doubles.points.map(m)}}}return p}},d.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},d.fromJSON=function(h,p,g){typeof p=="string"&&(p=JSON.parse(p));var m=h.point(p[0],p[1],g);if(!p[2])return m;function y(v){return h.point(v[0],v[1],g)}var b=p[2];return m.precomputed={beta:null,doubles:b.doubles&&{step:b.doubles.step,points:[m].concat(b.doubles.points.map(y))},naf:b.naf&&{wnd:b.naf.wnd,points:[m].concat(b.naf.points.map(y))}},m},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.inf},d.prototype.add=function(h){if(this.inf)return h;if(h.inf)return this;if(this.eq(h))return this.dbl();if(this.neg().eq(h))return this.curve.point(null,null);if(this.x.cmp(h.x)===0)return this.curve.point(null,null);var p=this.y.redSub(h.y);p.cmpn(0)!==0&&(p=p.redMul(this.x.redSub(h.x).redInvm()));var g=p.redSqr().redISub(this.x).redISub(h.x),m=p.redMul(this.x.redSub(g)).redISub(this.y);return this.curve.point(g,m)},d.prototype.dbl=function(){if(this.inf)return this;var h=this.y.redAdd(this.y);if(h.cmpn(0)===0)return this.curve.point(null,null);var p=this.curve.a,g=this.x.redSqr(),m=h.redInvm(),y=g.redAdd(g).redIAdd(g).redIAdd(p).redMul(m),b=y.redSqr().redISub(this.x.redAdd(this.x)),v=y.redMul(this.x.redSub(b)).redISub(this.y);return this.curve.point(b,v)},d.prototype.getX=function(){return this.x.fromRed()},d.prototype.getY=function(){return this.y.fromRed()},d.prototype.mul=function(h){return h=new o(h,16),this.isInfinity()?this:this._hasDoubles(h)?this.curve._fixedNafMul(this,h):this.curve.endo?this.curve._endoWnafMulAdd([this],[h]):this.curve._wnafMul(this,h)},d.prototype.mulAdd=function(h,p,g){var m=[this,p],y=[h,g];return this.curve.endo?this.curve._endoWnafMulAdd(m,y):this.curve._wnafMulAdd(1,m,y,2)},d.prototype.jmulAdd=function(h,p,g){var m=[this,p],y=[h,g];return this.curve.endo?this.curve._endoWnafMulAdd(m,y,!0):this.curve._wnafMulAdd(1,m,y,2,!0)},d.prototype.eq=function(h){return this===h||this.inf===h.inf&&(this.inf||this.x.cmp(h.x)===0&&this.y.cmp(h.y)===0)},d.prototype.neg=function(h){if(this.inf)return this;var p=this.curve.point(this.x,this.y.redNeg());if(h&&this.precomputed){var g=this.precomputed,m=function(y){return y.neg()};p.precomputed={naf:g.naf&&{wnd:g.naf.wnd,points:g.naf.points.map(m)},doubles:g.doubles&&{step:g.doubles.step,points:g.doubles.points.map(m)}}}return p},d.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},u(f,l.BasePoint),c.prototype.jpoint=function(h,p,g){return new f(this,h,p,g)},f.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var h=this.z.redInvm(),p=h.redSqr(),g=this.x.redMul(p),m=this.y.redMul(p).redMul(h);return this.curve.point(g,m)},f.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},f.prototype.add=function(h){if(this.isInfinity())return h;if(h.isInfinity())return this;var p=h.z.redSqr(),g=this.z.redSqr(),m=this.x.redMul(p),y=h.x.redMul(g),b=this.y.redMul(p.redMul(h.z)),v=h.y.redMul(g.redMul(this.z)),k=m.redSub(y),j=b.redSub(v);if(k.cmpn(0)===0)return j.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var I=k.redSqr(),U=I.redMul(k),P=m.redMul(I),z=j.redSqr().redIAdd(U).redISub(P).redISub(P),q=j.redMul(P.redISub(z)).redISub(b.redMul(U)),$=this.z.redMul(h.z).redMul(k);return this.curve.jpoint(z,q,$)},f.prototype.mixedAdd=function(h){if(this.isInfinity())return h.toJ();if(h.isInfinity())return this;var p=this.z.redSqr(),g=this.x,m=h.x.redMul(p),y=this.y,b=h.y.redMul(p).redMul(this.z),v=g.redSub(m),k=y.redSub(b);if(v.cmpn(0)===0)return k.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var j=v.redSqr(),I=j.redMul(v),U=g.redMul(j),P=k.redSqr().redIAdd(I).redISub(U).redISub(U),z=k.redMul(U.redISub(P)).redISub(y.redMul(I)),q=this.z.redMul(v);return this.curve.jpoint(P,z,q)},f.prototype.dblp=function(h){if(h===0)return this;if(this.isInfinity())return this;if(!h)return this.dbl();var p;if(this.curve.zeroA||this.curve.threeA){var g=this;for(p=0;p<h;p++)g=g.dbl();return g}var m=this.curve.a,y=this.curve.tinv,b=this.x,v=this.y,k=this.z,j=k.redSqr().redSqr(),I=v.redAdd(v);for(p=0;p<h;p++){var U=b.redSqr(),P=I.redSqr(),z=P.redSqr(),q=U.redAdd(U).redIAdd(U).redIAdd(m.redMul(j)),$=b.redMul(P),F=q.redSqr().redISub($.redAdd($)),T=$.redISub(F),N=q.redMul(T);N=N.redIAdd(N).redISub(z);var C=I.redMul(k);p+1<h&&(j=j.redMul(z)),b=F,k=C,I=N}return this.curve.jpoint(b,I.redMul(y),k)},f.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},f.prototype._zeroDbl=function(){var h,p,g;if(this.zOne){var m=this.x.redSqr(),y=this.y.redSqr(),b=y.redSqr(),v=this.x.redAdd(y).redSqr().redISub(m).redISub(b);v=v.redIAdd(v);var k=m.redAdd(m).redIAdd(m),j=k.redSqr().redISub(v).redISub(v),I=b.redIAdd(b);I=(I=I.redIAdd(I)).redIAdd(I),h=j,p=k.redMul(v.redISub(j)).redISub(I),g=this.y.redAdd(this.y)}else{var U=this.x.redSqr(),P=this.y.redSqr(),z=P.redSqr(),q=this.x.redAdd(P).redSqr().redISub(U).redISub(z);q=q.redIAdd(q);var $=U.redAdd(U).redIAdd(U),F=$.redSqr(),T=z.redIAdd(z);T=(T=T.redIAdd(T)).redIAdd(T),h=F.redISub(q).redISub(q),p=$.redMul(q.redISub(h)).redISub(T),g=(g=this.y.redMul(this.z)).redIAdd(g)}return this.curve.jpoint(h,p,g)},f.prototype._threeDbl=function(){var h,p,g;if(this.zOne){var m=this.x.redSqr(),y=this.y.redSqr(),b=y.redSqr(),v=this.x.redAdd(y).redSqr().redISub(m).redISub(b);v=v.redIAdd(v);var k=m.redAdd(m).redIAdd(m).redIAdd(this.curve.a),j=k.redSqr().redISub(v).redISub(v);h=j;var I=b.redIAdd(b);I=(I=I.redIAdd(I)).redIAdd(I),p=k.redMul(v.redISub(j)).redISub(I),g=this.y.redAdd(this.y)}else{var U=this.z.redSqr(),P=this.y.redSqr(),z=this.x.redMul(P),q=this.x.redSub(U).redMul(this.x.redAdd(U));q=q.redAdd(q).redIAdd(q);var $=z.redIAdd(z),F=($=$.redIAdd($)).redAdd($);h=q.redSqr().redISub(F),g=this.y.redAdd(this.z).redSqr().redISub(P).redISub(U);var T=P.redSqr();T=(T=(T=T.redIAdd(T)).redIAdd(T)).redIAdd(T),p=q.redMul($.redISub(h)).redISub(T)}return this.curve.jpoint(h,p,g)},f.prototype._dbl=function(){var h=this.curve.a,p=this.x,g=this.y,m=this.z,y=m.redSqr().redSqr(),b=p.redSqr(),v=g.redSqr(),k=b.redAdd(b).redIAdd(b).redIAdd(h.redMul(y)),j=p.redAdd(p),I=(j=j.redIAdd(j)).redMul(v),U=k.redSqr().redISub(I.redAdd(I)),P=I.redISub(U),z=v.redSqr();z=(z=(z=z.redIAdd(z)).redIAdd(z)).redIAdd(z);var q=k.redMul(P).redISub(z),$=g.redAdd(g).redMul(m);return this.curve.jpoint(U,q,$)},f.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var h=this.x.redSqr(),p=this.y.redSqr(),g=this.z.redSqr(),m=p.redSqr(),y=h.redAdd(h).redIAdd(h),b=y.redSqr(),v=this.x.redAdd(p).redSqr().redISub(h).redISub(m),k=(v=(v=(v=v.redIAdd(v)).redAdd(v).redIAdd(v)).redISub(b)).redSqr(),j=m.redIAdd(m);j=(j=(j=j.redIAdd(j)).redIAdd(j)).redIAdd(j);var I=y.redIAdd(v).redSqr().redISub(b).redISub(k).redISub(j),U=p.redMul(I);U=(U=U.redIAdd(U)).redIAdd(U);var P=this.x.redMul(k).redISub(U);P=(P=P.redIAdd(P)).redIAdd(P);var z=this.y.redMul(I.redMul(j.redISub(I)).redISub(v.redMul(k)));z=(z=(z=z.redIAdd(z)).redIAdd(z)).redIAdd(z);var q=this.z.redAdd(v).redSqr().redISub(g).redISub(k);return this.curve.jpoint(P,z,q)},f.prototype.mul=function(h,p){return h=new o(h,p),this.curve._wnafMul(this,h)},f.prototype.eq=function(h){if(h.type==="affine")return this.eq(h.toJ());if(this===h)return!0;var p=this.z.redSqr(),g=h.z.redSqr();if(this.x.redMul(g).redISub(h.x.redMul(p)).cmpn(0)!==0)return!1;var m=p.redMul(this.z),y=g.redMul(h.z);return this.y.redMul(y).redISub(h.y.redMul(m)).cmpn(0)===0},f.prototype.eqXToP=function(h){var p=this.z.redSqr(),g=h.toRed(this.curve.red).redMul(p);if(this.x.cmp(g)===0)return!0;for(var m=h.clone(),y=this.curve.redN.redMul(p);;){if(m.iadd(this.curve.n),m.cmp(this.curve.p)>=0)return!1;if(g.redIAdd(y),this.x.cmp(g)===0)return!0}},f.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},f.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],411:[function(t,r,s){var i,o=s,u=t("hash.js"),l=t("./curve"),a=t("./utils").assert;function c(f){f.type==="short"?this.curve=new l.short(f):f.type==="edwards"?this.curve=new l.edwards(f):this.curve=new l.mont(f),this.g=this.curve.g,this.n=this.curve.n,this.hash=f.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function d(f,h){Object.defineProperty(o,f,{configurable:!0,enumerable:!0,get:function(){var p=new c(h);return Object.defineProperty(o,f,{configurable:!0,enumerable:!0,value:p}),p}})}o.PresetCurve=c,d("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:u.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),d("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:u.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),d("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:u.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),d("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:u.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),d("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:u.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),d("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:u.sha256,gRed:!1,g:["9"]}),d("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:u.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=t("./precomputed/secp256k1")}catch{i=void 0}d("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:u.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},{"./curve":408,"./precomputed/secp256k1":418,"./utils":419,"hash.js":426}],412:[function(t,r,s){var i=t("bn.js"),o=t("hmac-drbg"),u=t("../utils"),l=t("../curves"),a=t("brorand"),c=u.assert,d=t("./key"),f=t("./signature");function h(p){if(!(this instanceof h))return new h(p);typeof p=="string"&&(c(Object.prototype.hasOwnProperty.call(l,p),"Unknown curve "+p),p=l[p]),p instanceof l.PresetCurve&&(p={curve:p}),this.curve=p.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=p.curve.g,this.g.precompute(p.curve.n.bitLength()+1),this.hash=p.hash||p.curve.hash}r.exports=h,h.prototype.keyPair=function(p){return new d(this,p)},h.prototype.keyFromPrivate=function(p,g){return d.fromPrivate(this,p,g)},h.prototype.keyFromPublic=function(p,g){return d.fromPublic(this,p,g)},h.prototype.genKeyPair=function(p){p||(p={});for(var g=new o({hash:this.hash,pers:p.pers,persEnc:p.persEnc||"utf8",entropy:p.entropy||a(this.hash.hmacStrength),entropyEnc:p.entropy&&p.entropyEnc||"utf8",nonce:this.n.toArray()}),m=this.n.byteLength(),y=this.n.sub(new i(2));;){var b=new i(g.generate(m));if(!(b.cmp(y)>0))return b.iaddn(1),this.keyFromPrivate(b)}},h.prototype._truncateToN=function(p,g){var m=8*p.byteLength()-this.n.bitLength();return m>0&&(p=p.ushrn(m)),!g&&p.cmp(this.n)>=0?p.sub(this.n):p},h.prototype.sign=function(p,g,m,y){typeof m=="object"&&(y=m,m=null),y||(y={}),g=this.keyFromPrivate(g,m),p=this._truncateToN(new i(p,16));for(var b=this.n.byteLength(),v=g.getPrivate().toArray("be",b),k=p.toArray("be",b),j=new o({hash:this.hash,entropy:v,nonce:k,pers:y.pers,persEnc:y.persEnc||"utf8"}),I=this.n.sub(new i(1)),U=0;;U++){var P=y.k?y.k(U):new i(j.generate(this.n.byteLength()));if(!((P=this._truncateToN(P,!0)).cmpn(1)<=0||P.cmp(I)>=0)){var z=this.g.mul(P);if(!z.isInfinity()){var q=z.getX(),$=q.umod(this.n);if($.cmpn(0)!==0){var F=P.invm(this.n).mul($.mul(g.getPrivate()).iadd(p));if((F=F.umod(this.n)).cmpn(0)!==0){var T=(z.getY().isOdd()?1:0)|(q.cmp($)!==0?2:0);return y.canonical&&F.cmp(this.nh)>0&&(F=this.n.sub(F),T^=1),new f({r:$,s:F,recoveryParam:T})}}}}}},h.prototype.verify=function(p,g,m,y){p=this._truncateToN(new i(p,16)),m=this.keyFromPublic(m,y);var b=(g=new f(g,"hex")).r,v=g.s;if(b.cmpn(1)<0||b.cmp(this.n)>=0||v.cmpn(1)<0||v.cmp(this.n)>=0)return!1;var k,j=v.invm(this.n),I=j.mul(p).umod(this.n),U=j.mul(b).umod(this.n);return this.curve._maxwellTrick?!(k=this.g.jmulAdd(I,m.getPublic(),U)).isInfinity()&&k.eqXToP(b):!(k=this.g.mulAdd(I,m.getPublic(),U)).isInfinity()&&k.getX().umod(this.n).cmp(b)===0},h.prototype.recoverPubKey=function(p,g,m,y){c((3&m)===m,"The recovery param is more than two bits"),g=new f(g,y);var b=this.n,v=new i(p),k=g.r,j=g.s,I=1&m,U=m>>1;if(k.cmp(this.curve.p.umod(this.curve.n))>=0&&U)throw new Error("Unable to find sencond key candinate");k=U?this.curve.pointFromX(k.add(this.curve.n),I):this.curve.pointFromX(k,I);var P=g.r.invm(b),z=b.sub(v).mul(P).umod(b),q=j.mul(P).umod(b);return this.g.mulAdd(z,k,q)},h.prototype.getKeyRecoveryParam=function(p,g,m,y){if((g=new f(g,y)).recoveryParam!==null)return g.recoveryParam;for(var b=0;b<4;b++){var v;try{v=this.recoverPubKey(p,g,b)}catch{continue}if(v.eq(m))return b}throw new Error("Unable to find valid recovery factor")}},{"../curves":411,"../utils":419,"./key":413,"./signature":414,"bn.js":420,brorand:187,"hmac-drbg":438}],413:[function(t,r,s){var i=t("bn.js"),o=t("../utils").assert;function u(l,a){this.ec=l,this.priv=null,this.pub=null,a.priv&&this._importPrivate(a.priv,a.privEnc),a.pub&&this._importPublic(a.pub,a.pubEnc)}r.exports=u,u.fromPublic=function(l,a,c){return a instanceof u?a:new u(l,{pub:a,pubEnc:c})},u.fromPrivate=function(l,a,c){return a instanceof u?a:new u(l,{priv:a,privEnc:c})},u.prototype.validate=function(){var l=this.getPublic();return l.isInfinity()?{result:!1,reason:"Invalid public key"}:l.validate()?l.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},u.prototype.getPublic=function(l,a){return typeof l=="string"&&(a=l,l=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),a?this.pub.encode(a,l):this.pub},u.prototype.getPrivate=function(l){return l==="hex"?this.priv.toString(16,2):this.priv},u.prototype._importPrivate=function(l,a){this.priv=new i(l,a||16),this.priv=this.priv.umod(this.ec.curve.n)},u.prototype._importPublic=function(l,a){if(l.x||l.y)return this.ec.curve.type==="mont"?o(l.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||o(l.x&&l.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(l.x,l.y));this.pub=this.ec.curve.decodePoint(l,a)},u.prototype.derive=function(l){return l.validate()||o(l.validate(),"public point not validated"),l.mul(this.priv).getX()},u.prototype.sign=function(l,a,c){return this.ec.sign(l,this,a,c)},u.prototype.verify=function(l,a){return this.ec.verify(l,a,this)},u.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":419,"bn.js":420}],414:[function(t,r,s){var i=t("bn.js"),o=t("../utils"),u=o.assert;function l(h,p){if(h instanceof l)return h;this._importDER(h,p)||(u(h.r&&h.s,"Signature without r or s"),this.r=new i(h.r,16),this.s=new i(h.s,16),h.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=h.recoveryParam)}function a(){this.place=0}function c(h,p){var g=h[p.place++];if(!(128&g))return g;var m=15&g;if(m===0||m>4)return!1;for(var y=0,b=0,v=p.place;b<m;b++,v++)y<<=8,y|=h[v],y>>>=0;return!(y<=127)&&(p.place=v,y)}function d(h){for(var p=0,g=h.length-1;!h[p]&&!(128&h[p+1])&&p<g;)p++;return p===0?h:h.slice(p)}function f(h,p){if(p<128)h.push(p);else{var g=1+(Math.log(p)/Math.LN2>>>3);for(h.push(128|g);--g;)h.push(p>>>(g<<3)&255);h.push(p)}}r.exports=l,l.prototype._importDER=function(h,p){h=o.toArray(h,p);var g=new a;if(h[g.place++]!==48)return!1;var m=c(h,g);if(m===!1||m+g.place!==h.length||h[g.place++]!==2)return!1;var y=c(h,g);if(y===!1)return!1;var b=h.slice(g.place,y+g.place);if(g.place+=y,h[g.place++]!==2)return!1;var v=c(h,g);if(v===!1||h.length!==v+g.place)return!1;var k=h.slice(g.place,v+g.place);if(b[0]===0){if(!(128&b[1]))return!1;b=b.slice(1)}if(k[0]===0){if(!(128&k[1]))return!1;k=k.slice(1)}return this.r=new i(b),this.s=new i(k),this.recoveryParam=null,!0},l.prototype.toDER=function(h){var p=this.r.toArray(),g=this.s.toArray();for(128&p[0]&&(p=[0].concat(p)),128&g[0]&&(g=[0].concat(g)),p=d(p),g=d(g);!(g[0]||128&g[1]);)g=g.slice(1);var m=[2];f(m,p.length),(m=m.concat(p)).push(2),f(m,g.length);var y=m.concat(g),b=[48];return f(b,y.length),b=b.concat(y),o.encode(b,h)}},{"../utils":419,"bn.js":420}],415:[function(t,r,s){var i=t("hash.js"),o=t("../curves"),u=t("../utils"),l=u.assert,a=u.parseBytes,c=t("./key"),d=t("./signature");function f(h){if(l(h==="ed25519","only tested with ed25519 so far"),!(this instanceof f))return new f(h);h=o[h].curve,this.curve=h,this.g=h.g,this.g.precompute(h.n.bitLength()+1),this.pointClass=h.point().constructor,this.encodingLength=Math.ceil(h.n.bitLength()/8),this.hash=i.sha512}r.exports=f,f.prototype.sign=function(h,p){h=a(h);var g=this.keyFromSecret(p),m=this.hashInt(g.messagePrefix(),h),y=this.g.mul(m),b=this.encodePoint(y),v=this.hashInt(b,g.pubBytes(),h).mul(g.priv()),k=m.add(v).umod(this.curve.n);return this.makeSignature({R:y,S:k,Rencoded:b})},f.prototype.verify=function(h,p,g){h=a(h),p=this.makeSignature(p);var m=this.keyFromPublic(g),y=this.hashInt(p.Rencoded(),m.pubBytes(),h),b=this.g.mul(p.S());return p.R().add(m.pub().mul(y)).eq(b)},f.prototype.hashInt=function(){for(var h=this.hash(),p=0;p<arguments.length;p++)h.update(arguments[p]);return u.intFromLE(h.digest()).umod(this.curve.n)},f.prototype.keyFromPublic=function(h){return c.fromPublic(this,h)},f.prototype.keyFromSecret=function(h){return c.fromSecret(this,h)},f.prototype.makeSignature=function(h){return h instanceof d?h:new d(this,h)},f.prototype.encodePoint=function(h){var p=h.getY().toArray("le",this.encodingLength);return p[this.encodingLength-1]|=h.getX().isOdd()?128:0,p},f.prototype.decodePoint=function(h){var p=(h=u.parseBytes(h)).length-1,g=h.slice(0,p).concat(-129&h[p]),m=(128&h[p])!=0,y=u.intFromLE(g);return this.curve.pointFromY(y,m)},f.prototype.encodeInt=function(h){return h.toArray("le",this.encodingLength)},f.prototype.decodeInt=function(h){return u.intFromLE(h)},f.prototype.isPoint=function(h){return h instanceof this.pointClass}},{"../curves":411,"../utils":419,"./key":416,"./signature":417,"hash.js":426}],416:[function(t,r,s){var i=t("../utils"),o=i.assert,u=i.parseBytes,l=i.cachedProperty;function a(c,d){this.eddsa=c,this._secret=u(d.secret),c.isPoint(d.pub)?this._pub=d.pub:this._pubBytes=u(d.pub)}a.fromPublic=function(c,d){return d instanceof a?d:new a(c,{pub:d})},a.fromSecret=function(c,d){return d instanceof a?d:new a(c,{secret:d})},a.prototype.secret=function(){return this._secret},l(a,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),l(a,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),l(a,"privBytes",function(){var c=this.eddsa,d=this.hash(),f=c.encodingLength-1,h=d.slice(0,c.encodingLength);return h[0]&=248,h[f]&=127,h[f]|=64,h}),l(a,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),l(a,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),l(a,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),a.prototype.sign=function(c){return o(this._secret,"KeyPair can only verify"),this.eddsa.sign(c,this)},a.prototype.verify=function(c,d){return this.eddsa.verify(c,d,this)},a.prototype.getSecret=function(c){return o(this._secret,"KeyPair is public only"),i.encode(this.secret(),c)},a.prototype.getPublic=function(c){return i.encode(this.pubBytes(),c)},r.exports=a},{"../utils":419}],417:[function(t,r,s){var i=t("bn.js"),o=t("../utils"),u=o.assert,l=o.cachedProperty,a=o.parseBytes;function c(d,f){this.eddsa=d,typeof f!="object"&&(f=a(f)),Array.isArray(f)&&(f={R:f.slice(0,d.encodingLength),S:f.slice(d.encodingLength)}),u(f.R&&f.S,"Signature without R or S"),d.isPoint(f.R)&&(this._R=f.R),f.S instanceof i&&(this._S=f.S),this._Rencoded=Array.isArray(f.R)?f.R:f.Rencoded,this._Sencoded=Array.isArray(f.S)?f.S:f.Sencoded}l(c,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),l(c,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),l(c,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),l(c,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return o.encode(this.toBytes(),"hex").toUpperCase()},r.exports=c},{"../utils":419,"bn.js":420}],418:[function(t,r,s){r.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],419:[function(t,r,s){var i=s,o=t("bn.js"),u=t("minimalistic-assert"),l=t("minimalistic-crypto-utils");i.assert=u,i.toArray=l.toArray,i.zero2=l.zero2,i.toHex=l.toHex,i.encode=l.encode,i.getNAF=function(a,c,d){var f=new Array(Math.max(a.bitLength(),d)+1);f.fill(0);for(var h=1<<c+1,p=a.clone(),g=0;g<f.length;g++){var m,y=p.andln(h-1);p.isOdd()?(m=y>(h>>1)-1?(h>>1)-y:y,p.isubn(m)):m=0,f[g]=m,p.iushrn(1)}return f},i.getJSF=function(a,c){var d=[[],[]];a=a.clone(),c=c.clone();for(var f,h=0,p=0;a.cmpn(-h)>0||c.cmpn(-p)>0;){var g,m,y=a.andln(3)+h&3,b=c.andln(3)+p&3;y===3&&(y=-1),b===3&&(b=-1),g=1&y?(f=a.andln(7)+h&7)!==3&&f!==5||b!==2?y:-y:0,d[0].push(g),m=1&b?(f=c.andln(7)+p&7)!==3&&f!==5||y!==2?b:-b:0,d[1].push(m),2*h===g+1&&(h=1-h),2*p===m+1&&(p=1-p),a.iushrn(1),c.iushrn(1)}return d},i.cachedProperty=function(a,c,d){var f="_"+c;a.prototype[c]=function(){return this[f]!==void 0?this[f]:this[f]=d.call(this)}},i.parseBytes=function(a){return typeof a=="string"?i.toArray(a,"hex"):a},i.intFromLE=function(a){return new o(a,"hex","le")}},{"bn.js":420,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],420:[function(t,r,s){arguments[4][184][0].apply(s,arguments)},{buffer:188,dup:184}],421:[function(t,r,s){r.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],422:[function(t,r,s){var i=Object.create||function(P){var z=function(){};return z.prototype=P,new z},o=Object.keys||function(P){var z=[];for(var q in P)Object.prototype.hasOwnProperty.call(P,q)&&z.push(q);return q},u=Function.prototype.bind||function(P){var z=this;return function(){return z.apply(P,arguments)}};function l(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=i(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}r.exports=l,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._maxListeners=void 0;var a,c=10;try{var d={};Object.defineProperty&&Object.defineProperty(d,"x",{value:0}),a=d.x===0}catch{a=!1}function f(P){return P._maxListeners===void 0?l.defaultMaxListeners:P._maxListeners}function h(P,z,q){if(z)P.call(q);else for(var $=P.length,F=U(P,$),T=0;T<$;++T)F[T].call(q)}function p(P,z,q,$){if(z)P.call(q,$);else for(var F=P.length,T=U(P,F),N=0;N<F;++N)T[N].call(q,$)}function g(P,z,q,$,F){if(z)P.call(q,$,F);else for(var T=P.length,N=U(P,T),C=0;C<T;++C)N[C].call(q,$,F)}function m(P,z,q,$,F,T){if(z)P.call(q,$,F,T);else for(var N=P.length,C=U(P,N),w=0;w<N;++w)C[w].call(q,$,F,T)}function y(P,z,q,$){if(z)P.apply(q,$);else for(var F=P.length,T=U(P,F),N=0;N<F;++N)T[N].apply(q,$)}function b(P,z,q,$){var F,T,N;if(typeof q!="function")throw new TypeError('"listener" argument must be a function');if((T=P._events)?(T.newListener&&(P.emit("newListener",z,q.listener?q.listener:q),T=P._events),N=T[z]):(T=P._events=i(null),P._eventsCount=0),N){if(typeof N=="function"?N=T[z]=$?[q,N]:[N,q]:$?N.unshift(q):N.push(q),!N.warned&&(F=f(P))&&F>0&&N.length>F){N.warned=!0;var C=new Error("Possible EventEmitter memory leak detected. "+N.length+' "'+String(z)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');C.name="MaxListenersExceededWarning",C.emitter=P,C.type=z,C.count=N.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",C.name,C.message)}}else N=T[z]=q,++P._eventsCount;return P}function v(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var P=new Array(arguments.length),z=0;z<P.length;++z)P[z]=arguments[z];this.listener.apply(this.target,P)}}function k(P,z,q){var $={fired:!1,wrapFn:void 0,target:P,type:z,listener:q},F=u.call(v,$);return F.listener=q,$.wrapFn=F,F}function j(P,z,q){var $=P._events;if(!$)return[];var F=$[z];return F?typeof F=="function"?q?[F.listener||F]:[F]:q?function(T){for(var N=new Array(T.length),C=0;C<N.length;++C)N[C]=T[C].listener||T[C];return N}(F):U(F,F.length):[]}function I(P){var z=this._events;if(z){var q=z[P];if(typeof q=="function")return 1;if(q)return q.length}return 0}function U(P,z){for(var q=new Array(z),$=0;$<z;++$)q[$]=P[$];return q}a?Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(P){if(typeof P!="number"||P<0||P!=P)throw new TypeError('"defaultMaxListeners" must be a positive number');c=P}}):l.defaultMaxListeners=c,l.prototype.setMaxListeners=function(P){if(typeof P!="number"||P<0||isNaN(P))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=P,this},l.prototype.getMaxListeners=function(){return f(this)},l.prototype.emit=function(P){var z,q,$,F,T,N,C=P==="error";if(N=this._events)C=C&&N.error==null;else if(!C)return!1;if(C){if(arguments.length>1&&(z=arguments[1]),z instanceof Error)throw z;var w=new Error('Unhandled "error" event. ('+z+")");throw w.context=z,w}if(!(q=N[P]))return!1;var _=typeof q=="function";switch($=arguments.length){case 1:h(q,_,this);break;case 2:p(q,_,this,arguments[1]);break;case 3:g(q,_,this,arguments[1],arguments[2]);break;case 4:m(q,_,this,arguments[1],arguments[2],arguments[3]);break;default:for(F=new Array($-1),T=1;T<$;T++)F[T-1]=arguments[T];y(q,_,this,F)}return!0},l.prototype.addListener=function(P,z){return b(this,P,z,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(P,z){return b(this,P,z,!0)},l.prototype.once=function(P,z){if(typeof z!="function")throw new TypeError('"listener" argument must be a function');return this.on(P,k(this,P,z)),this},l.prototype.prependOnceListener=function(P,z){if(typeof z!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(P,k(this,P,z)),this},l.prototype.removeListener=function(P,z){var q,$,F,T,N;if(typeof z!="function")throw new TypeError('"listener" argument must be a function');if(!($=this._events))return this;if(!(q=$[P]))return this;if(q===z||q.listener===z)--this._eventsCount==0?this._events=i(null):(delete $[P],$.removeListener&&this.emit("removeListener",P,q.listener||z));else if(typeof q!="function"){for(F=-1,T=q.length-1;T>=0;T--)if(q[T]===z||q[T].listener===z){N=q[T].listener,F=T;break}if(F<0)return this;F===0?q.shift():function(C,w){for(var _=w,x=_+1,S=C.length;x<S;_+=1,x+=1)C[_]=C[x];C.pop()}(q,F),q.length===1&&($[P]=q[0]),$.removeListener&&this.emit("removeListener",P,N||z)}return this},l.prototype.removeAllListeners=function(P){var z,q,$;if(!(q=this._events))return this;if(!q.removeListener)return arguments.length===0?(this._events=i(null),this._eventsCount=0):q[P]&&(--this._eventsCount==0?this._events=i(null):delete q[P]),this;if(arguments.length===0){var F,T=o(q);for($=0;$<T.length;++$)(F=T[$])!=="removeListener"&&this.removeAllListeners(F);return this.removeAllListeners("removeListener"),this._events=i(null),this._eventsCount=0,this}if(typeof(z=q[P])=="function")this.removeListener(P,z);else if(z)for($=z.length-1;$>=0;$--)this.removeListener(P,z[$]);return this},l.prototype.listeners=function(P){return j(this,P,!0)},l.prototype.rawListeners=function(P){return j(this,P,!1)},l.listenerCount=function(P,z){return typeof P.listenerCount=="function"?P.listenerCount(z):I.call(P,z)},l.prototype.listenerCount=I,l.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],423:[function(t,r,s){var i=t("safe-buffer").Buffer,o=t("md5.js");r.exports=function(u,l,a,c){if(i.isBuffer(u)||(u=i.from(u,"binary")),l&&(i.isBuffer(l)||(l=i.from(l,"binary")),l.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var d=a/8,f=i.alloc(d),h=i.alloc(c||0),p=i.alloc(0);d>0||c>0;){var g=new o;g.update(p),g.update(u),l&&g.update(l),p=g.digest();var m=0;if(d>0){var y=f.length-d;m=Math.min(d,p.length),p.copy(f,y,0,m),d-=m}if(m<p.length&&c>0){var b=h.length-c,v=Math.min(c,p.length-m);p.copy(h,b,m,m+v),c-=v}}return p.fill(0),{key:f,iv:h}}},{"md5.js":450,"safe-buffer":494}],424:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.CsvParserStream=s.ParserOptions=s.parseFile=s.parseStream=s.parseString=s.parse=s.FormatterOptions=s.CsvFormatterStream=s.writeToPath=s.writeToString=s.writeToBuffer=s.writeToStream=s.write=s.format=void 0;var i=t("@fast-csv/format");Object.defineProperty(s,"format",{enumerable:!0,get:function(){return i.format}}),Object.defineProperty(s,"write",{enumerable:!0,get:function(){return i.write}}),Object.defineProperty(s,"writeToStream",{enumerable:!0,get:function(){return i.writeToStream}}),Object.defineProperty(s,"writeToBuffer",{enumerable:!0,get:function(){return i.writeToBuffer}}),Object.defineProperty(s,"writeToString",{enumerable:!0,get:function(){return i.writeToString}}),Object.defineProperty(s,"writeToPath",{enumerable:!0,get:function(){return i.writeToPath}}),Object.defineProperty(s,"CsvFormatterStream",{enumerable:!0,get:function(){return i.CsvFormatterStream}}),Object.defineProperty(s,"FormatterOptions",{enumerable:!0,get:function(){return i.FormatterOptions}});var o=t("@fast-csv/parse");Object.defineProperty(s,"parse",{enumerable:!0,get:function(){return o.parse}}),Object.defineProperty(s,"parseString",{enumerable:!0,get:function(){return o.parseString}}),Object.defineProperty(s,"parseStream",{enumerable:!0,get:function(){return o.parseStream}}),Object.defineProperty(s,"parseFile",{enumerable:!0,get:function(){return o.parseFile}}),Object.defineProperty(s,"ParserOptions",{enumerable:!0,get:function(){return o.ParserOptions}}),Object.defineProperty(s,"CsvParserStream",{enumerable:!0,get:function(){return o.CsvParserStream}})},{"@fast-csv/format":151,"@fast-csv/parse":155}],425:[function(t,r,s){var i=t("safe-buffer").Buffer,o=t("readable-stream").Transform;function u(l){o.call(this),this._block=i.allocUnsafe(l),this._blockSize=l,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}t("inherits")(u,o),u.prototype._transform=function(l,a,c){var d=null;try{this.update(l,a)}catch(f){d=f}c(d)},u.prototype._flush=function(l){var a=null;try{this.push(this.digest())}catch(c){a=c}l(a)},u.prototype.update=function(l,a){if(function(g,m){if(!i.isBuffer(g)&&typeof g!="string")throw new TypeError(m+" must be a string or a buffer")}(l,"Data"),this._finalized)throw new Error("Digest already called");i.isBuffer(l)||(l=i.from(l,a));for(var c=this._block,d=0;this._blockOffset+l.length-d>=this._blockSize;){for(var f=this._blockOffset;f<this._blockSize;)c[f++]=l[d++];this._update(),this._blockOffset=0}for(;d<l.length;)c[this._blockOffset++]=l[d++];for(var h=0,p=8*l.length;p>0;++h)this._length[h]+=p,(p=this._length[h]/4294967296|0)>0&&(this._length[h]-=4294967296*p);return this},u.prototype._update=function(){throw new Error("_update is not implemented")},u.prototype.digest=function(l){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var a=this._digest();l!==void 0&&(a=a.toString(l)),this._block.fill(0),this._blockOffset=0;for(var c=0;c<4;++c)this._length[c]=0;return a},u.prototype._digest=function(){throw new Error("_digest is not implemented")},r.exports=u},{inherits:440,"readable-stream":491,"safe-buffer":494}],426:[function(t,r,s){var i=s;i.utils=t("./hash/utils"),i.common=t("./hash/common"),i.sha=t("./hash/sha"),i.ripemd=t("./hash/ripemd"),i.hmac=t("./hash/hmac"),i.sha1=i.sha.sha1,i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.sha384=i.sha.sha384,i.sha512=i.sha.sha512,i.ripemd160=i.ripemd.ripemd160},{"./hash/common":427,"./hash/hmac":428,"./hash/ripemd":429,"./hash/sha":430,"./hash/utils":437}],427:[function(t,r,s){var i=t("./utils"),o=t("minimalistic-assert");function u(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}s.BlockHash=u,u.prototype.update=function(l,a){if(l=i.toArray(l,a),this.pending?this.pending=this.pending.concat(l):this.pending=l,this.pendingTotal+=l.length,this.pending.length>=this._delta8){var c=(l=this.pending).length%this._delta8;this.pending=l.slice(l.length-c,l.length),this.pending.length===0&&(this.pending=null),l=i.join32(l,0,l.length-c,this.endian);for(var d=0;d<l.length;d+=this._delta32)this._update(l,d,d+this._delta32)}return this},u.prototype.digest=function(l){return this.update(this._pad()),o(this.pending===null),this._digest(l)},u.prototype._pad=function(){var l=this.pendingTotal,a=this._delta8,c=a-(l+this.padLength)%a,d=new Array(c+this.padLength);d[0]=128;for(var f=1;f<c;f++)d[f]=0;if(l<<=3,this.endian==="big"){for(var h=8;h<this.padLength;h++)d[f++]=0;d[f++]=0,d[f++]=0,d[f++]=0,d[f++]=0,d[f++]=l>>>24&255,d[f++]=l>>>16&255,d[f++]=l>>>8&255,d[f++]=255&l}else for(d[f++]=255&l,d[f++]=l>>>8&255,d[f++]=l>>>16&255,d[f++]=l>>>24&255,d[f++]=0,d[f++]=0,d[f++]=0,d[f++]=0,h=8;h<this.padLength;h++)d[f++]=0;return d}},{"./utils":437,"minimalistic-assert":453}],428:[function(t,r,s){var i=t("./utils"),o=t("minimalistic-assert");function u(l,a,c){if(!(this instanceof u))return new u(l,a,c);this.Hash=l,this.blockSize=l.blockSize/8,this.outSize=l.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(a,c))}r.exports=u,u.prototype._init=function(l){l.length>this.blockSize&&(l=new this.Hash().update(l).digest()),o(l.length<=this.blockSize);for(var a=l.length;a<this.blockSize;a++)l.push(0);for(a=0;a<l.length;a++)l[a]^=54;for(this.inner=new this.Hash().update(l),a=0;a<l.length;a++)l[a]^=106;this.outer=new this.Hash().update(l)},u.prototype.update=function(l,a){return this.inner.update(l,a),this},u.prototype.digest=function(l){return this.outer.update(this.inner.digest()),this.outer.digest(l)}},{"./utils":437,"minimalistic-assert":453}],429:[function(t,r,s){var i=t("./utils"),o=t("./common"),u=i.rotl32,l=i.sum32,a=i.sum32_3,c=i.sum32_4,d=o.BlockHash;function f(){if(!(this instanceof f))return new f;d.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(k,j,I,U){return k<=15?j^I^U:k<=31?j&I|~j&U:k<=47?(j|~I)^U:k<=63?j&U|I&~U:j^(I|~U)}function p(k){return k<=15?0:k<=31?1518500249:k<=47?1859775393:k<=63?2400959708:2840853838}function g(k){return k<=15?1352829926:k<=31?1548603684:k<=47?1836072691:k<=63?2053994217:0}i.inherits(f,d),s.ripemd160=f,f.blockSize=512,f.outSize=160,f.hmacStrength=192,f.padLength=64,f.prototype._update=function(k,j){for(var I=this.h[0],U=this.h[1],P=this.h[2],z=this.h[3],q=this.h[4],$=I,F=U,T=P,N=z,C=q,w=0;w<80;w++){var _=l(u(c(I,h(w,U,P,z),k[m[w]+j],p(w)),b[w]),q);I=q,q=z,z=u(P,10),P=U,U=_,_=l(u(c($,h(79-w,F,T,N),k[y[w]+j],g(w)),v[w]),C),$=C,C=N,N=u(T,10),T=F,F=_}_=a(this.h[1],P,N),this.h[1]=a(this.h[2],z,C),this.h[2]=a(this.h[3],q,$),this.h[3]=a(this.h[4],I,F),this.h[4]=a(this.h[0],U,T),this.h[0]=_},f.prototype._digest=function(k){return k==="hex"?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var m=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],b=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":427,"./utils":437}],430:[function(t,r,s){s.sha1=t("./sha/1"),s.sha224=t("./sha/224"),s.sha256=t("./sha/256"),s.sha384=t("./sha/384"),s.sha512=t("./sha/512")},{"./sha/1":431,"./sha/224":432,"./sha/256":433,"./sha/384":434,"./sha/512":435}],431:[function(t,r,s){var i=t("../utils"),o=t("../common"),u=t("./common"),l=i.rotl32,a=i.sum32,c=i.sum32_5,d=u.ft_1,f=o.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function p(){if(!(this instanceof p))return new p;f.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}i.inherits(p,f),r.exports=p,p.blockSize=512,p.outSize=160,p.hmacStrength=80,p.padLength=64,p.prototype._update=function(g,m){for(var y=this.W,b=0;b<16;b++)y[b]=g[m+b];for(;b<y.length;b++)y[b]=l(y[b-3]^y[b-8]^y[b-14]^y[b-16],1);var v=this.h[0],k=this.h[1],j=this.h[2],I=this.h[3],U=this.h[4];for(b=0;b<y.length;b++){var P=~~(b/20),z=c(l(v,5),d(P,k,j,I),U,y[b],h[P]);U=I,I=j,j=l(k,30),k=v,v=z}this.h[0]=a(this.h[0],v),this.h[1]=a(this.h[1],k),this.h[2]=a(this.h[2],j),this.h[3]=a(this.h[3],I),this.h[4]=a(this.h[4],U)},p.prototype._digest=function(g){return g==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436}],432:[function(t,r,s){var i=t("../utils"),o=t("./256");function u(){if(!(this instanceof u))return new u;o.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}i.inherits(u,o),r.exports=u,u.blockSize=512,u.outSize=224,u.hmacStrength=192,u.padLength=64,u.prototype._digest=function(l){return l==="hex"?i.toHex32(this.h.slice(0,7),"big"):i.split32(this.h.slice(0,7),"big")}},{"../utils":437,"./256":433}],433:[function(t,r,s){var i=t("../utils"),o=t("../common"),u=t("./common"),l=t("minimalistic-assert"),a=i.sum32,c=i.sum32_4,d=i.sum32_5,f=u.ch32,h=u.maj32,p=u.s0_256,g=u.s1_256,m=u.g0_256,y=u.g1_256,b=o.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function k(){if(!(this instanceof k))return new k;b.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}i.inherits(k,b),r.exports=k,k.blockSize=512,k.outSize=256,k.hmacStrength=192,k.padLength=64,k.prototype._update=function(j,I){for(var U=this.W,P=0;P<16;P++)U[P]=j[I+P];for(;P<U.length;P++)U[P]=c(y(U[P-2]),U[P-7],m(U[P-15]),U[P-16]);var z=this.h[0],q=this.h[1],$=this.h[2],F=this.h[3],T=this.h[4],N=this.h[5],C=this.h[6],w=this.h[7];for(l(this.k.length===U.length),P=0;P<U.length;P++){var _=d(w,g(T),f(T,N,C),this.k[P],U[P]),x=a(p(z),h(z,q,$));w=C,C=N,N=T,T=a(F,_),F=$,$=q,q=z,z=a(_,x)}this.h[0]=a(this.h[0],z),this.h[1]=a(this.h[1],q),this.h[2]=a(this.h[2],$),this.h[3]=a(this.h[3],F),this.h[4]=a(this.h[4],T),this.h[5]=a(this.h[5],N),this.h[6]=a(this.h[6],C),this.h[7]=a(this.h[7],w)},k.prototype._digest=function(j){return j==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436,"minimalistic-assert":453}],434:[function(t,r,s){var i=t("../utils"),o=t("./512");function u(){if(!(this instanceof u))return new u;o.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}i.inherits(u,o),r.exports=u,u.blockSize=1024,u.outSize=384,u.hmacStrength=192,u.padLength=128,u.prototype._digest=function(l){return l==="hex"?i.toHex32(this.h.slice(0,12),"big"):i.split32(this.h.slice(0,12),"big")}},{"../utils":437,"./512":435}],435:[function(t,r,s){var i=t("../utils"),o=t("../common"),u=t("minimalistic-assert"),l=i.rotr64_hi,a=i.rotr64_lo,c=i.shr64_hi,d=i.shr64_lo,f=i.sum64,h=i.sum64_hi,p=i.sum64_lo,g=i.sum64_4_hi,m=i.sum64_4_lo,y=i.sum64_5_hi,b=i.sum64_5_lo,v=o.BlockHash,k=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function j(){if(!(this instanceof j))return new j;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=k,this.W=new Array(160)}function I(x,S,A,B,E){var V=x&A^~x&E;return V<0&&(V+=4294967296),V}function U(x,S,A,B,E,V){var X=S&B^~S&V;return X<0&&(X+=4294967296),X}function P(x,S,A,B,E){var V=x&A^x&E^A&E;return V<0&&(V+=4294967296),V}function z(x,S,A,B,E,V){var X=S&B^S&V^B&V;return X<0&&(X+=4294967296),X}function q(x,S){var A=l(x,S,28)^l(S,x,2)^l(S,x,7);return A<0&&(A+=4294967296),A}function $(x,S){var A=a(x,S,28)^a(S,x,2)^a(S,x,7);return A<0&&(A+=4294967296),A}function F(x,S){var A=l(x,S,14)^l(x,S,18)^l(S,x,9);return A<0&&(A+=4294967296),A}function T(x,S){var A=a(x,S,14)^a(x,S,18)^a(S,x,9);return A<0&&(A+=4294967296),A}function N(x,S){var A=l(x,S,1)^l(x,S,8)^c(x,S,7);return A<0&&(A+=4294967296),A}function C(x,S){var A=a(x,S,1)^a(x,S,8)^d(x,S,7);return A<0&&(A+=4294967296),A}function w(x,S){var A=l(x,S,19)^l(S,x,29)^c(x,S,6);return A<0&&(A+=4294967296),A}function _(x,S){var A=a(x,S,19)^a(S,x,29)^d(x,S,6);return A<0&&(A+=4294967296),A}i.inherits(j,v),r.exports=j,j.blockSize=1024,j.outSize=512,j.hmacStrength=192,j.padLength=128,j.prototype._prepareBlock=function(x,S){for(var A=this.W,B=0;B<32;B++)A[B]=x[S+B];for(;B<A.length;B+=2){var E=w(A[B-4],A[B-3]),V=_(A[B-4],A[B-3]),X=A[B-14],Q=A[B-13],D=N(A[B-30],A[B-29]),Z=C(A[B-30],A[B-29]),L=A[B-32],O=A[B-31];A[B]=g(E,V,X,Q,D,Z,L,O),A[B+1]=m(E,V,X,Q,D,Z,L,O)}},j.prototype._update=function(x,S){this._prepareBlock(x,S);var A=this.W,B=this.h[0],E=this.h[1],V=this.h[2],X=this.h[3],Q=this.h[4],D=this.h[5],Z=this.h[6],L=this.h[7],O=this.h[8],G=this.h[9],nt=this.h[10],ct=this.h[11],ot=this.h[12],mt=this.h[13],pt=this.h[14],st=this.h[15];u(this.k.length===A.length);for(var at=0;at<A.length;at+=2){var vt=pt,yt=st,kt=F(O,G),St=T(O,G),Tt=I(O,G,nt,ct,ot),Lt=U(O,G,nt,ct,ot,mt),Xt=this.k[at],re=this.k[at+1],ue=A[at],ce=A[at+1],de=y(vt,yt,kt,St,Tt,Lt,Xt,re,ue,ce),ve=b(vt,yt,kt,St,Tt,Lt,Xt,re,ue,ce);vt=q(B,E),yt=$(B,E),kt=P(B,E,V,X,Q),St=z(B,E,V,X,Q,D);var Te=h(vt,yt,kt,St),ie=p(vt,yt,kt,St);pt=ot,st=mt,ot=nt,mt=ct,nt=O,ct=G,O=h(Z,L,de,ve),G=p(L,L,de,ve),Z=Q,L=D,Q=V,D=X,V=B,X=E,B=h(de,ve,Te,ie),E=p(de,ve,Te,ie)}f(this.h,0,B,E),f(this.h,2,V,X),f(this.h,4,Q,D),f(this.h,6,Z,L),f(this.h,8,O,G),f(this.h,10,nt,ct),f(this.h,12,ot,mt),f(this.h,14,pt,st)},j.prototype._digest=function(x){return x==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},{"../common":427,"../utils":437,"minimalistic-assert":453}],436:[function(t,r,s){var i=t("../utils").rotr32;function o(a,c,d){return a&c^~a&d}function u(a,c,d){return a&c^a&d^c&d}function l(a,c,d){return a^c^d}s.ft_1=function(a,c,d,f){return a===0?o(c,d,f):a===1||a===3?l(c,d,f):a===2?u(c,d,f):void 0},s.ch32=o,s.maj32=u,s.p32=l,s.s0_256=function(a){return i(a,2)^i(a,13)^i(a,22)},s.s1_256=function(a){return i(a,6)^i(a,11)^i(a,25)},s.g0_256=function(a){return i(a,7)^i(a,18)^a>>>3},s.g1_256=function(a){return i(a,17)^i(a,19)^a>>>10}},{"../utils":437}],437:[function(t,r,s){var i=t("minimalistic-assert"),o=t("inherits");function u(d,f){return(64512&d.charCodeAt(f))==55296&&!(f<0||f+1>=d.length)&&(64512&d.charCodeAt(f+1))==56320}function l(d){return(d>>>24|d>>>8&65280|d<<8&16711680|(255&d)<<24)>>>0}function a(d){return d.length===1?"0"+d:d}function c(d){return d.length===7?"0"+d:d.length===6?"00"+d:d.length===5?"000"+d:d.length===4?"0000"+d:d.length===3?"00000"+d:d.length===2?"000000"+d:d.length===1?"0000000"+d:d}s.inherits=o,s.toArray=function(d,f){if(Array.isArray(d))return d.slice();if(!d)return[];var h=[];if(typeof d=="string")if(f){if(f==="hex")for((d=d.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(d="0"+d),g=0;g<d.length;g+=2)h.push(parseInt(d[g]+d[g+1],16))}else for(var p=0,g=0;g<d.length;g++){var m=d.charCodeAt(g);m<128?h[p++]=m:m<2048?(h[p++]=m>>6|192,h[p++]=63&m|128):u(d,g)?(m=65536+((1023&m)<<10)+(1023&d.charCodeAt(++g)),h[p++]=m>>18|240,h[p++]=m>>12&63|128,h[p++]=m>>6&63|128,h[p++]=63&m|128):(h[p++]=m>>12|224,h[p++]=m>>6&63|128,h[p++]=63&m|128)}else for(g=0;g<d.length;g++)h[g]=0|d[g];return h},s.toHex=function(d){for(var f="",h=0;h<d.length;h++)f+=a(d[h].toString(16));return f},s.htonl=l,s.toHex32=function(d,f){for(var h="",p=0;p<d.length;p++){var g=d[p];f==="little"&&(g=l(g)),h+=c(g.toString(16))}return h},s.zero2=a,s.zero8=c,s.join32=function(d,f,h,p){var g=h-f;i(g%4==0);for(var m=new Array(g/4),y=0,b=f;y<m.length;y++,b+=4){var v;v=p==="big"?d[b]<<24|d[b+1]<<16|d[b+2]<<8|d[b+3]:d[b+3]<<24|d[b+2]<<16|d[b+1]<<8|d[b],m[y]=v>>>0}return m},s.split32=function(d,f){for(var h=new Array(4*d.length),p=0,g=0;p<d.length;p++,g+=4){var m=d[p];f==="big"?(h[g]=m>>>24,h[g+1]=m>>>16&255,h[g+2]=m>>>8&255,h[g+3]=255&m):(h[g+3]=m>>>24,h[g+2]=m>>>16&255,h[g+1]=m>>>8&255,h[g]=255&m)}return h},s.rotr32=function(d,f){return d>>>f|d<<32-f},s.rotl32=function(d,f){return d<<f|d>>>32-f},s.sum32=function(d,f){return d+f>>>0},s.sum32_3=function(d,f,h){return d+f+h>>>0},s.sum32_4=function(d,f,h,p){return d+f+h+p>>>0},s.sum32_5=function(d,f,h,p,g){return d+f+h+p+g>>>0},s.sum64=function(d,f,h,p){var g=d[f],m=p+d[f+1]>>>0,y=(m<p?1:0)+h+g;d[f]=y>>>0,d[f+1]=m},s.sum64_hi=function(d,f,h,p){return(f+p>>>0<f?1:0)+d+h>>>0},s.sum64_lo=function(d,f,h,p){return f+p>>>0},s.sum64_4_hi=function(d,f,h,p,g,m,y,b){var v=0,k=f;return v+=(k=k+p>>>0)<f?1:0,v+=(k=k+m>>>0)<m?1:0,d+h+g+y+(v+=(k=k+b>>>0)<b?1:0)>>>0},s.sum64_4_lo=function(d,f,h,p,g,m,y,b){return f+p+m+b>>>0},s.sum64_5_hi=function(d,f,h,p,g,m,y,b,v,k){var j=0,I=f;return j+=(I=I+p>>>0)<f?1:0,j+=(I=I+m>>>0)<m?1:0,j+=(I=I+b>>>0)<b?1:0,d+h+g+y+v+(j+=(I=I+k>>>0)<k?1:0)>>>0},s.sum64_5_lo=function(d,f,h,p,g,m,y,b,v,k){return f+p+m+b+k>>>0},s.rotr64_hi=function(d,f,h){return(f<<32-h|d>>>h)>>>0},s.rotr64_lo=function(d,f,h){return(d<<32-h|f>>>h)>>>0},s.shr64_hi=function(d,f,h){return d>>>h},s.shr64_lo=function(d,f,h){return(d<<32-h|f>>>h)>>>0}},{inherits:440,"minimalistic-assert":453}],438:[function(t,r,s){var i=t("hash.js"),o=t("minimalistic-crypto-utils"),u=t("minimalistic-assert");function l(a){if(!(this instanceof l))return new l(a);this.hash=a.hash,this.predResist=!!a.predResist,this.outLen=this.hash.outSize,this.minEntropy=a.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var c=o.toArray(a.entropy,a.entropyEnc||"hex"),d=o.toArray(a.nonce,a.nonceEnc||"hex"),f=o.toArray(a.pers,a.persEnc||"hex");u(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(c,d,f)}r.exports=l,l.prototype._init=function(a,c,d){var f=a.concat(c).concat(d);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var h=0;h<this.V.length;h++)this.K[h]=0,this.V[h]=1;this._update(f),this._reseed=1,this.reseedInterval=281474976710656},l.prototype._hmac=function(){return new i.hmac(this.hash,this.K)},l.prototype._update=function(a){var c=this._hmac().update(this.V).update([0]);a&&(c=c.update(a)),this.K=c.digest(),this.V=this._hmac().update(this.V).digest(),a&&(this.K=this._hmac().update(this.V).update([1]).update(a).digest(),this.V=this._hmac().update(this.V).digest())},l.prototype.reseed=function(a,c,d,f){typeof c!="string"&&(f=d,d=c,c=null),a=o.toArray(a,c),d=o.toArray(d,f),u(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(a.concat(d||[])),this._reseed=1},l.prototype.generate=function(a,c,d,f){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof c!="string"&&(f=d,d=c,c=null),d&&(d=o.toArray(d,f||"hex"),this._update(d));for(var h=[];h.length<a;)this.V=this._hmac().update(this.V).digest(),h=h.concat(this.V);var p=h.slice(0,a);return this._update(d),this._reseed++,o.encode(p,c)}},{"hash.js":426,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],439:[function(t,r,s){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */s.read=function(i,o,u,l,a){var c,d,f=8*a-l-1,h=(1<<f)-1,p=h>>1,g=-7,m=u?a-1:0,y=u?-1:1,b=i[o+m];for(m+=y,c=b&(1<<-g)-1,b>>=-g,g+=f;g>0;c=256*c+i[o+m],m+=y,g-=8);for(d=c&(1<<-g)-1,c>>=-g,g+=l;g>0;d=256*d+i[o+m],m+=y,g-=8);if(c===0)c=1-p;else{if(c===h)return d?NaN:1/0*(b?-1:1);d+=Math.pow(2,l),c-=p}return(b?-1:1)*d*Math.pow(2,c-l)},s.write=function(i,o,u,l,a,c){var d,f,h,p=8*c-a-1,g=(1<<p)-1,m=g>>1,y=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=l?0:c-1,v=l?1:-1,k=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(f=isNaN(o)?1:0,d=g):(d=Math.floor(Math.log(o)/Math.LN2),o*(h=Math.pow(2,-d))<1&&(d--,h*=2),(o+=d+m>=1?y/h:y*Math.pow(2,1-m))*h>=2&&(d++,h/=2),d+m>=g?(f=0,d=g):d+m>=1?(f=(o*h-1)*Math.pow(2,a),d+=m):(f=o*Math.pow(2,m-1)*Math.pow(2,a),d=0));a>=8;i[u+b]=255&f,b+=v,f/=256,a-=8);for(d=d<<a|f,p+=a;p>0;i[u+b]=255&d,b+=v,d/=256,p-=8);i[u+b-v]|=128*k}},{}],440:[function(t,r,s){typeof Object.create=="function"?r.exports=function(i,o){o&&(i.super_=o,i.prototype=Object.create(o.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(i,o){if(o){i.super_=o;var u=function(){};u.prototype=o.prototype,i.prototype=new u,i.prototype.constructor=i}}},{}],441:[function(t,r,s){(function(i,o,u,l,a,c,d,f){(function(){/*!

	JSZip v3.10.1 - A JavaScript class for generating and reading zip files
	<http://stuartk.com/jszip>

	(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
	Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

	JSZip uses the library pako released under the MIT license :
	https://github.com/nodeca/pako/blob/main/LICENSE
	*/(function(h){typeof s=="object"&&r!==void 0?r.exports=h():(typeof window<"u"?window:o!==void 0?o:typeof self<"u"?self:this).JSZip=h()})(function(){return function h(p,g,m){function y(k,j){if(!g[k]){if(!p[k]){var I=typeof t=="function"&&t;if(!j&&I)return I(k,!0);if(b)return b(k,!0);var U=new Error("Cannot find module '"+k+"'");throw U.code="MODULE_NOT_FOUND",U}var P=g[k]={exports:{}};p[k][0].call(P.exports,function(z){return y(p[k][1][z]||z)},P,P.exports,h,p,g,m)}return g[k].exports}for(var b=typeof t=="function"&&t,v=0;v<m.length;v++)y(m[v]);return y}({1:[function(h,p,g){var m=h("./utils"),y=h("./support"),b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";g.encode=function(v){for(var k,j,I,U,P,z,q,$=[],F=0,T=v.length,N=T,C=m.getTypeOf(v)!=="string";F<v.length;)N=T-F,I=C?(k=v[F++],j=F<T?v[F++]:0,F<T?v[F++]:0):(k=v.charCodeAt(F++),j=F<T?v.charCodeAt(F++):0,F<T?v.charCodeAt(F++):0),U=k>>2,P=(3&k)<<4|j>>4,z=1<N?(15&j)<<2|I>>6:64,q=2<N?63&I:64,$.push(b.charAt(U)+b.charAt(P)+b.charAt(z)+b.charAt(q));return $.join("")},g.decode=function(v){var k,j,I,U,P,z,q=0,$=0,F="data:";if(v.substr(0,F.length)===F)throw new Error("Invalid base64 input, it looks like a data url.");var T,N=3*(v=v.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(v.charAt(v.length-1)===b.charAt(64)&&N--,v.charAt(v.length-2)===b.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(T=y.uint8array?new Uint8Array(0|N):new Array(0|N);q<v.length;)k=b.indexOf(v.charAt(q++))<<2|(U=b.indexOf(v.charAt(q++)))>>4,j=(15&U)<<4|(P=b.indexOf(v.charAt(q++)))>>2,I=(3&P)<<6|(z=b.indexOf(v.charAt(q++))),T[$++]=k,P!==64&&(T[$++]=j),z!==64&&(T[$++]=I);return T}},{"./support":30,"./utils":32}],2:[function(h,p,g){var m=h("./external"),y=h("./stream/DataWorker"),b=h("./stream/Crc32Probe"),v=h("./stream/DataLengthProbe");function k(j,I,U,P,z){this.compressedSize=j,this.uncompressedSize=I,this.crc32=U,this.compression=P,this.compressedContent=z}k.prototype={getContentWorker:function(){var j=new y(m.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new v("data_length")),I=this;return j.on("end",function(){if(this.streamInfo.data_length!==I.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),j},getCompressedWorker:function(){return new y(m.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},k.createWorkerFrom=function(j,I,U){return j.pipe(new b).pipe(new v("uncompressedSize")).pipe(I.compressWorker(U)).pipe(new v("compressedSize")).withStreamInfo("compression",I)},p.exports=k},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(h,p,g){var m=h("./stream/GenericWorker");g.STORE={magic:"\0\0",compressWorker:function(){return new m("STORE compression")},uncompressWorker:function(){return new m("STORE decompression")}},g.DEFLATE=h("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(h,p,g){var m=h("./utils"),y=function(){for(var b,v=[],k=0;k<256;k++){b=k;for(var j=0;j<8;j++)b=1&b?3988292384^b>>>1:b>>>1;v[k]=b}return v}();p.exports=function(b,v){return b!==void 0&&b.length?m.getTypeOf(b)!=="string"?function(k,j,I,U){var P=y,z=0+I;k^=-1;for(var q=0;q<z;q++)k=k>>>8^P[255&(k^j[q])];return-1^k}(0|v,b,b.length):function(k,j,I,U){var P=y,z=0+I;k^=-1;for(var q=0;q<z;q++)k=k>>>8^P[255&(k^j.charCodeAt(q))];return-1^k}(0|v,b,b.length):0}},{"./utils":32}],5:[function(h,p,g){g.base64=!1,g.binary=!1,g.dir=!1,g.createFolders=!0,g.date=null,g.compression=null,g.compressionOptions=null,g.comment=null,g.unixPermissions=null,g.dosPermissions=null},{}],6:[function(h,p,g){var m;m=typeof Promise<"u"?Promise:h("lie"),p.exports={Promise:m}},{lie:37}],7:[function(h,p,g){var m=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",y=h("pako"),b=h("./utils"),v=h("./stream/GenericWorker"),k=m?"uint8array":"array";function j(I,U){v.call(this,"FlateWorker/"+I),this._pako=null,this._pakoAction=I,this._pakoOptions=U,this.meta={}}g.magic="\b\0",b.inherits(j,v),j.prototype.processChunk=function(I){this.meta=I.meta,this._pako===null&&this._createPako(),this._pako.push(b.transformTo(k,I.data),!1)},j.prototype.flush=function(){v.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},j.prototype.cleanUp=function(){v.prototype.cleanUp.call(this),this._pako=null},j.prototype._createPako=function(){this._pako=new y[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var I=this;this._pako.onData=function(U){I.push({data:U,meta:I.meta})}},g.compressWorker=function(I){return new j("Deflate",I)},g.uncompressWorker=function(){return new j("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(h,p,g){function m(P,z){var q,$="";for(q=0;q<z;q++)$+=String.fromCharCode(255&P),P>>>=8;return $}function y(P,z,q,$,F,T){var N,C,w=P.file,_=P.compression,x=T!==k.utf8encode,S=b.transformTo("string",T(w.name)),A=b.transformTo("string",k.utf8encode(w.name)),B=w.comment,E=b.transformTo("string",T(B)),V=b.transformTo("string",k.utf8encode(B)),X=A.length!==w.name.length,Q=V.length!==B.length,D="",Z="",L="",O=w.dir,G=w.date,nt={crc32:0,compressedSize:0,uncompressedSize:0};z&&!q||(nt.crc32=P.crc32,nt.compressedSize=P.compressedSize,nt.uncompressedSize=P.uncompressedSize);var ct=0;z&&(ct|=8),x||!X&&!Q||(ct|=2048);var ot=0,mt=0;O&&(ot|=16),F==="UNIX"?(mt=798,ot|=function(st,at){var vt=st;return st||(vt=at?16893:33204),(65535&vt)<<16}(w.unixPermissions,O)):(mt=20,ot|=function(st){return 63&(st||0)}(w.dosPermissions)),N=G.getUTCHours(),N<<=6,N|=G.getUTCMinutes(),N<<=5,N|=G.getUTCSeconds()/2,C=G.getUTCFullYear()-1980,C<<=4,C|=G.getUTCMonth()+1,C<<=5,C|=G.getUTCDate(),X&&(Z=m(1,1)+m(j(S),4)+A,D+="up"+m(Z.length,2)+Z),Q&&(L=m(1,1)+m(j(E),4)+V,D+="uc"+m(L.length,2)+L);var pt="";return pt+=`
\0`,pt+=m(ct,2),pt+=_.magic,pt+=m(N,2),pt+=m(C,2),pt+=m(nt.crc32,4),pt+=m(nt.compressedSize,4),pt+=m(nt.uncompressedSize,4),pt+=m(S.length,2),pt+=m(D.length,2),{fileRecord:I.LOCAL_FILE_HEADER+pt+S+D,dirRecord:I.CENTRAL_FILE_HEADER+m(mt,2)+pt+m(E.length,2)+"\0\0\0\0"+m(ot,4)+m($,4)+S+D+E}}var b=h("../utils"),v=h("../stream/GenericWorker"),k=h("../utf8"),j=h("../crc32"),I=h("../signature");function U(P,z,q,$){v.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=z,this.zipPlatform=q,this.encodeFileName=$,this.streamFiles=P,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}b.inherits(U,v),U.prototype.push=function(P){var z=P.meta.percent||0,q=this.entriesCount,$=this._sources.length;this.accumulate?this.contentBuffer.push(P):(this.bytesWritten+=P.data.length,v.prototype.push.call(this,{data:P.data,meta:{currentFile:this.currentFile,percent:q?(z+100*(q-$-1))/q:100}}))},U.prototype.openedSource=function(P){this.currentSourceOffset=this.bytesWritten,this.currentFile=P.file.name;var z=this.streamFiles&&!P.file.dir;if(z){var q=y(P,z,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:q.fileRecord,meta:{percent:0}})}else this.accumulate=!0},U.prototype.closedSource=function(P){this.accumulate=!1;var z=this.streamFiles&&!P.file.dir,q=y(P,z,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(q.dirRecord),z)this.push({data:function($){return I.DATA_DESCRIPTOR+m($.crc32,4)+m($.compressedSize,4)+m($.uncompressedSize,4)}(P),meta:{percent:100}});else for(this.push({data:q.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},U.prototype.flush=function(){for(var P=this.bytesWritten,z=0;z<this.dirRecords.length;z++)this.push({data:this.dirRecords[z],meta:{percent:100}});var q=this.bytesWritten-P,$=function(F,T,N,C,w){var _=b.transformTo("string",w(C));return I.CENTRAL_DIRECTORY_END+"\0\0\0\0"+m(F,2)+m(F,2)+m(T,4)+m(N,4)+m(_.length,2)+_}(this.dirRecords.length,q,P,this.zipComment,this.encodeFileName);this.push({data:$,meta:{percent:100}})},U.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},U.prototype.registerPrevious=function(P){this._sources.push(P);var z=this;return P.on("data",function(q){z.processChunk(q)}),P.on("end",function(){z.closedSource(z.previous.streamInfo),z._sources.length?z.prepareNextSource():z.end()}),P.on("error",function(q){z.error(q)}),this},U.prototype.resume=function(){return!!v.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},U.prototype.error=function(P){var z=this._sources;if(!v.prototype.error.call(this,P))return!1;for(var q=0;q<z.length;q++)try{z[q].error(P)}catch{}return!0},U.prototype.lock=function(){v.prototype.lock.call(this);for(var P=this._sources,z=0;z<P.length;z++)P[z].lock()},p.exports=U},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(h,p,g){var m=h("../compressions"),y=h("./ZipFileWorker");g.generateWorker=function(b,v,k){var j=new y(v.streamFiles,k,v.platform,v.encodeFileName),I=0;try{b.forEach(function(U,P){I++;var z=function(T,N){var C=T||N,w=m[C];if(!w)throw new Error(C+" is not a valid compression method !");return w}(P.options.compression,v.compression),q=P.options.compressionOptions||v.compressionOptions||{},$=P.dir,F=P.date;P._compressWorker(z,q).withStreamInfo("file",{name:U,dir:$,date:F,comment:P.comment||"",unixPermissions:P.unixPermissions,dosPermissions:P.dosPermissions}).pipe(j)}),j.entriesCount=I}catch(U){j.error(U)}return j}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(h,p,g){function m(){if(!(this instanceof m))return new m;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var y=new m;for(var b in this)typeof this[b]!="function"&&(y[b]=this[b]);return y}}(m.prototype=h("./object")).loadAsync=h("./load"),m.support=h("./support"),m.defaults=h("./defaults"),m.version="3.10.1",m.loadAsync=function(y,b){return new m().loadAsync(y,b)},m.external=h("./external"),p.exports=m},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(h,p,g){var m=h("./utils"),y=h("./external"),b=h("./utf8"),v=h("./zipEntries"),k=h("./stream/Crc32Probe"),j=h("./nodejsUtils");function I(U){return new y.Promise(function(P,z){var q=U.decompressed.getContentWorker().pipe(new k);q.on("error",function($){z($)}).on("end",function(){q.streamInfo.crc32!==U.decompressed.crc32?z(new Error("Corrupted zip : CRC32 mismatch")):P()}).resume()})}p.exports=function(U,P){var z=this;return P=m.extend(P||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:b.utf8decode}),j.isNode&&j.isStream(U)?y.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):m.prepareContent("the loaded zip file",U,!0,P.optimizedBinaryString,P.base64).then(function(q){var $=new v(P);return $.load(q),$}).then(function(q){var $=[y.Promise.resolve(q)],F=q.files;if(P.checkCRC32)for(var T=0;T<F.length;T++)$.push(I(F[T]));return y.Promise.all($)}).then(function(q){for(var $=q.shift(),F=$.files,T=0;T<F.length;T++){var N=F[T],C=N.fileNameStr,w=m.resolve(N.fileNameStr);z.file(w,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:P.createFolders}),N.dir||(z.file(w).unsafeOriginalName=C)}return $.zipComment.length&&(z.comment=$.zipComment),z})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(h,p,g){var m=h("../utils"),y=h("../stream/GenericWorker");function b(v,k){y.call(this,"Nodejs stream input adapter for "+v),this._upstreamEnded=!1,this._bindStream(k)}m.inherits(b,y),b.prototype._bindStream=function(v){var k=this;(this._stream=v).pause(),v.on("data",function(j){k.push({data:j,meta:{percent:0}})}).on("error",function(j){k.isPaused?this.generatedError=j:k.error(j)}).on("end",function(){k.isPaused?k._upstreamEnded=!0:k.end()})},b.prototype.pause=function(){return!!y.prototype.pause.call(this)&&(this._stream.pause(),!0)},b.prototype.resume=function(){return!!y.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},p.exports=b},{"../stream/GenericWorker":28,"../utils":32}],13:[function(h,p,g){var m=h("readable-stream").Readable;function y(b,v,k){m.call(this,v),this._helper=b;var j=this;b.on("data",function(I,U){j.push(I)||j._helper.pause(),k&&k(U)}).on("error",function(I){j.emit("error",I)}).on("end",function(){j.push(null)})}h("../utils").inherits(y,m),y.prototype._read=function(){this._helper.resume()},p.exports=y},{"../utils":32,"readable-stream":16}],14:[function(h,p,g){p.exports={isNode:u!==void 0,newBufferFrom:function(m,y){if(u.from&&u.from!==Uint8Array.from)return u.from(m,y);if(typeof m=="number")throw new Error('The "data" argument must not be a number');return new u(m,y)},allocBuffer:function(m){if(u.alloc)return u.alloc(m);var y=new u(m);return y.fill(0),y},isBuffer:function(m){return u.isBuffer(m)},isStream:function(m){return m&&typeof m.on=="function"&&typeof m.pause=="function"&&typeof m.resume=="function"}}},{}],15:[function(h,p,g){function m(w,_,x){var S,A=b.getTypeOf(_),B=b.extend(x||{},j);B.date=B.date||new Date,B.compression!==null&&(B.compression=B.compression.toUpperCase()),typeof B.unixPermissions=="string"&&(B.unixPermissions=parseInt(B.unixPermissions,8)),B.unixPermissions&&16384&B.unixPermissions&&(B.dir=!0),B.dosPermissions&&16&B.dosPermissions&&(B.dir=!0),B.dir&&(w=F(w)),B.createFolders&&(S=$(w))&&T.call(this,S,!0);var E=A==="string"&&B.binary===!1&&B.base64===!1;x&&x.binary!==void 0||(B.binary=!E),(_ instanceof I&&_.uncompressedSize===0||B.dir||!_||_.length===0)&&(B.base64=!1,B.binary=!0,_="",B.compression="STORE",A="string");var V;V=_ instanceof I||_ instanceof v?_:z.isNode&&z.isStream(_)?new q(w,_):b.prepareContent(w,_,B.binary,B.optimizedBinaryString,B.base64);var X=new U(w,V,B);this.files[w]=X}var y=h("./utf8"),b=h("./utils"),v=h("./stream/GenericWorker"),k=h("./stream/StreamHelper"),j=h("./defaults"),I=h("./compressedObject"),U=h("./zipObject"),P=h("./generate"),z=h("./nodejsUtils"),q=h("./nodejs/NodejsStreamInputAdapter"),$=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var _=w.lastIndexOf("/");return 0<_?w.substring(0,_):""},F=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},T=function(w,_){return _=_!==void 0?_:j.createFolders,w=F(w),this.files[w]||m.call(this,w,null,{dir:!0,createFolders:_}),this.files[w]};function N(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var _,x,S;for(_ in this.files)S=this.files[_],(x=_.slice(this.root.length,_.length))&&_.slice(0,this.root.length)===this.root&&w(x,S)},filter:function(w){var _=[];return this.forEach(function(x,S){w(x,S)&&_.push(S)}),_},file:function(w,_,x){if(arguments.length!==1)return w=this.root+w,m.call(this,w,_,x),this;if(N(w)){var S=w;return this.filter(function(B,E){return!E.dir&&S.test(B)})}var A=this.files[this.root+w];return A&&!A.dir?A:null},folder:function(w){if(!w)return this;if(N(w))return this.filter(function(A,B){return B.dir&&w.test(A)});var _=this.root+w,x=T.call(this,_),S=this.clone();return S.root=x.name,S},remove:function(w){w=this.root+w;var _=this.files[w];if(_||(w.slice(-1)!=="/"&&(w+="/"),_=this.files[w]),_&&!_.dir)delete this.files[w];else for(var x=this.filter(function(A,B){return B.name.slice(0,w.length)===w}),S=0;S<x.length;S++)delete this.files[x[S].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var _,x={};try{if((x=b.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:y.utf8encode})).type=x.type.toLowerCase(),x.compression=x.compression.toUpperCase(),x.type==="binarystring"&&(x.type="string"),!x.type)throw new Error("No output type specified.");b.checkSupport(x.type),x.platform!=="darwin"&&x.platform!=="freebsd"&&x.platform!=="linux"&&x.platform!=="sunos"||(x.platform="UNIX"),x.platform==="win32"&&(x.platform="DOS");var S=x.comment||this.comment||"";_=P.generateWorker(this,x,S)}catch(A){(_=new v("error")).error(A)}return new k(_,x.type||"string",x.mimeType)},generateAsync:function(w,_){return this.generateInternalStream(w).accumulate(_)},generateNodeStream:function(w,_){return(w=w||{}).type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(_)}};p.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(h,p,g){p.exports=h("stream")},{stream:void 0}],17:[function(h,p,g){var m=h("./DataReader");function y(b){m.call(this,b);for(var v=0;v<this.data.length;v++)b[v]=255&b[v]}h("../utils").inherits(y,m),y.prototype.byteAt=function(b){return this.data[this.zero+b]},y.prototype.lastIndexOfSignature=function(b){for(var v=b.charCodeAt(0),k=b.charCodeAt(1),j=b.charCodeAt(2),I=b.charCodeAt(3),U=this.length-4;0<=U;--U)if(this.data[U]===v&&this.data[U+1]===k&&this.data[U+2]===j&&this.data[U+3]===I)return U-this.zero;return-1},y.prototype.readAndCheckSignature=function(b){var v=b.charCodeAt(0),k=b.charCodeAt(1),j=b.charCodeAt(2),I=b.charCodeAt(3),U=this.readData(4);return v===U[0]&&k===U[1]&&j===U[2]&&I===U[3]},y.prototype.readData=function(b){if(this.checkOffset(b),b===0)return[];var v=this.data.slice(this.zero+this.index,this.zero+this.index+b);return this.index+=b,v},p.exports=y},{"../utils":32,"./DataReader":18}],18:[function(h,p,g){var m=h("../utils");function y(b){this.data=b,this.length=b.length,this.index=0,this.zero=0}y.prototype={checkOffset:function(b){this.checkIndex(this.index+b)},checkIndex:function(b){if(this.length<this.zero+b||b<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+b+"). Corrupted zip ?")},setIndex:function(b){this.checkIndex(b),this.index=b},skip:function(b){this.setIndex(this.index+b)},byteAt:function(){},readInt:function(b){var v,k=0;for(this.checkOffset(b),v=this.index+b-1;v>=this.index;v--)k=(k<<8)+this.byteAt(v);return this.index+=b,k},readString:function(b){return m.transformTo("string",this.readData(b))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var b=this.readInt(4);return new Date(Date.UTC(1980+(b>>25&127),(b>>21&15)-1,b>>16&31,b>>11&31,b>>5&63,(31&b)<<1))}},p.exports=y},{"../utils":32}],19:[function(h,p,g){var m=h("./Uint8ArrayReader");function y(b){m.call(this,b)}h("../utils").inherits(y,m),y.prototype.readData=function(b){this.checkOffset(b);var v=this.data.slice(this.zero+this.index,this.zero+this.index+b);return this.index+=b,v},p.exports=y},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(h,p,g){var m=h("./DataReader");function y(b){m.call(this,b)}h("../utils").inherits(y,m),y.prototype.byteAt=function(b){return this.data.charCodeAt(this.zero+b)},y.prototype.lastIndexOfSignature=function(b){return this.data.lastIndexOf(b)-this.zero},y.prototype.readAndCheckSignature=function(b){return b===this.readData(4)},y.prototype.readData=function(b){this.checkOffset(b);var v=this.data.slice(this.zero+this.index,this.zero+this.index+b);return this.index+=b,v},p.exports=y},{"../utils":32,"./DataReader":18}],21:[function(h,p,g){var m=h("./ArrayReader");function y(b){m.call(this,b)}h("../utils").inherits(y,m),y.prototype.readData=function(b){if(this.checkOffset(b),b===0)return new Uint8Array(0);var v=this.data.subarray(this.zero+this.index,this.zero+this.index+b);return this.index+=b,v},p.exports=y},{"../utils":32,"./ArrayReader":17}],22:[function(h,p,g){var m=h("../utils"),y=h("../support"),b=h("./ArrayReader"),v=h("./StringReader"),k=h("./NodeBufferReader"),j=h("./Uint8ArrayReader");p.exports=function(I){var U=m.getTypeOf(I);return m.checkSupport(U),U!=="string"||y.uint8array?U==="nodebuffer"?new k(I):y.uint8array?new j(m.transformTo("uint8array",I)):new b(m.transformTo("array",I)):new v(I)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(h,p,g){g.LOCAL_FILE_HEADER="PK",g.CENTRAL_FILE_HEADER="PK",g.CENTRAL_DIRECTORY_END="PK",g.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",g.ZIP64_CENTRAL_DIRECTORY_END="PK",g.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(h,p,g){var m=h("./GenericWorker"),y=h("../utils");function b(v){m.call(this,"ConvertWorker to "+v),this.destType=v}y.inherits(b,m),b.prototype.processChunk=function(v){this.push({data:y.transformTo(this.destType,v.data),meta:v.meta})},p.exports=b},{"../utils":32,"./GenericWorker":28}],25:[function(h,p,g){var m=h("./GenericWorker"),y=h("../crc32");function b(){m.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}h("../utils").inherits(b,m),b.prototype.processChunk=function(v){this.streamInfo.crc32=y(v.data,this.streamInfo.crc32||0),this.push(v)},p.exports=b},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(h,p,g){var m=h("../utils"),y=h("./GenericWorker");function b(v){y.call(this,"DataLengthProbe for "+v),this.propName=v,this.withStreamInfo(v,0)}m.inherits(b,y),b.prototype.processChunk=function(v){if(v){var k=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=k+v.data.length}y.prototype.processChunk.call(this,v)},p.exports=b},{"../utils":32,"./GenericWorker":28}],27:[function(h,p,g){var m=h("../utils"),y=h("./GenericWorker");function b(v){y.call(this,"DataWorker");var k=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,v.then(function(j){k.dataIsReady=!0,k.data=j,k.max=j&&j.length||0,k.type=m.getTypeOf(j),k.isPaused||k._tickAndRepeat()},function(j){k.error(j)})}m.inherits(b,y),b.prototype.cleanUp=function(){y.prototype.cleanUp.call(this),this.data=null},b.prototype.resume=function(){return!!y.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,m.delay(this._tickAndRepeat,[],this)),!0)},b.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(m.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},b.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var v=null,k=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":v=this.data.substring(this.index,k);break;case"uint8array":v=this.data.subarray(this.index,k);break;case"array":case"nodebuffer":v=this.data.slice(this.index,k)}return this.index=k,this.push({data:v,meta:{percent:this.max?this.index/this.max*100:0}})},p.exports=b},{"../utils":32,"./GenericWorker":28}],28:[function(h,p,g){function m(y){this.name=y||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}m.prototype={push:function(y){this.emit("data",y)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(y){this.emit("error",y)}return!0},error:function(y){return!this.isFinished&&(this.isPaused?this.generatedError=y:(this.isFinished=!0,this.emit("error",y),this.previous&&this.previous.error(y),this.cleanUp()),!0)},on:function(y,b){return this._listeners[y].push(b),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(y,b){if(this._listeners[y])for(var v=0;v<this._listeners[y].length;v++)this._listeners[y][v].call(this,b)},pipe:function(y){return y.registerPrevious(this)},registerPrevious:function(y){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=y.streamInfo,this.mergeStreamInfo(),this.previous=y;var b=this;return y.on("data",function(v){b.processChunk(v)}),y.on("end",function(){b.end()}),y.on("error",function(v){b.error(v)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var y=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),y=!0),this.previous&&this.previous.resume(),!y},flush:function(){},processChunk:function(y){this.push(y)},withStreamInfo:function(y,b){return this.extraStreamInfo[y]=b,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var y in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,y)&&(this.streamInfo[y]=this.extraStreamInfo[y])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var y="Worker "+this.name;return this.previous?this.previous+" -> "+y:y}},p.exports=m},{}],29:[function(h,p,g){var m=h("../utils"),y=h("./ConvertWorker"),b=h("./GenericWorker"),v=h("../base64"),k=h("../support"),j=h("../external"),I=null;if(k.nodestream)try{I=h("../nodejs/NodejsStreamOutputAdapter")}catch{}function U(P,z,q){var $=z;switch(z){case"blob":case"arraybuffer":$="uint8array";break;case"base64":$="string"}try{this._internalType=$,this._outputType=z,this._mimeType=q,m.checkSupport($),this._worker=P.pipe(new y($)),P.lock()}catch(F){this._worker=new b("error"),this._worker.error(F)}}U.prototype={accumulate:function(P){return function(z,q){return new j.Promise(function($,F){var T=[],N=z._internalType,C=z._outputType,w=z._mimeType;z.on("data",function(_,x){T.push(_),q&&q(x)}).on("error",function(_){T=[],F(_)}).on("end",function(){try{var _=function(x,S,A){switch(x){case"blob":return m.newBlob(m.transformTo("arraybuffer",S),A);case"base64":return v.encode(S);default:return m.transformTo(x,S)}}(C,function(x,S){var A,B=0,E=null,V=0;for(A=0;A<S.length;A++)V+=S[A].length;switch(x){case"string":return S.join("");case"array":return Array.prototype.concat.apply([],S);case"uint8array":for(E=new Uint8Array(V),A=0;A<S.length;A++)E.set(S[A],B),B+=S[A].length;return E;case"nodebuffer":return u.concat(S);default:throw new Error("concat : unsupported type '"+x+"'")}}(N,T),w);$(_)}catch(x){F(x)}T=[]}).resume()})}(this,P)},on:function(P,z){var q=this;return P==="data"?this._worker.on(P,function($){z.call(q,$.data,$.meta)}):this._worker.on(P,function(){m.delay(z,arguments,q)}),this},resume:function(){return m.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(P){if(m.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new I(this,{objectMode:this._outputType!=="nodebuffer"},P)}},p.exports=U},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(h,p,g){if(g.base64=!0,g.array=!0,g.string=!0,g.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",g.nodebuffer=u!==void 0,g.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")g.blob=!1;else{var m=new ArrayBuffer(0);try{g.blob=new Blob([m],{type:"application/zip"}).size===0}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);y.append(m),g.blob=y.getBlob("application/zip").size===0}catch{g.blob=!1}}}try{g.nodestream=!!h("readable-stream").Readable}catch{g.nodestream=!1}},{"readable-stream":16}],31:[function(h,p,g){for(var m=h("./utils"),y=h("./support"),b=h("./nodejsUtils"),v=h("./stream/GenericWorker"),k=new Array(256),j=0;j<256;j++)k[j]=252<=j?6:248<=j?5:240<=j?4:224<=j?3:192<=j?2:1;function I(){v.call(this,"utf-8 decode"),this.leftOver=null}function U(){v.call(this,"utf-8 encode")}k[254]=k[254]=1,g.utf8encode=function(P){return y.nodebuffer?b.newBufferFrom(P,"utf-8"):function(z){var q,$,F,T,N,C=z.length,w=0;for(T=0;T<C;T++)(64512&($=z.charCodeAt(T)))==55296&&T+1<C&&(64512&(F=z.charCodeAt(T+1)))==56320&&($=65536+($-55296<<10)+(F-56320),T++),w+=$<128?1:$<2048?2:$<65536?3:4;for(q=y.uint8array?new Uint8Array(w):new Array(w),T=N=0;N<w;T++)(64512&($=z.charCodeAt(T)))==55296&&T+1<C&&(64512&(F=z.charCodeAt(T+1)))==56320&&($=65536+($-55296<<10)+(F-56320),T++),$<128?q[N++]=$:($<2048?q[N++]=192|$>>>6:($<65536?q[N++]=224|$>>>12:(q[N++]=240|$>>>18,q[N++]=128|$>>>12&63),q[N++]=128|$>>>6&63),q[N++]=128|63&$);return q}(P)},g.utf8decode=function(P){return y.nodebuffer?m.transformTo("nodebuffer",P).toString("utf-8"):function(z){var q,$,F,T,N=z.length,C=new Array(2*N);for(q=$=0;q<N;)if((F=z[q++])<128)C[$++]=F;else if(4<(T=k[F]))C[$++]=65533,q+=T-1;else{for(F&=T===2?31:T===3?15:7;1<T&&q<N;)F=F<<6|63&z[q++],T--;1<T?C[$++]=65533:F<65536?C[$++]=F:(F-=65536,C[$++]=55296|F>>10&1023,C[$++]=56320|1023&F)}return C.length!==$&&(C.subarray?C=C.subarray(0,$):C.length=$),m.applyFromCharCode(C)}(P=m.transformTo(y.uint8array?"uint8array":"array",P))},m.inherits(I,v),I.prototype.processChunk=function(P){var z=m.transformTo(y.uint8array?"uint8array":"array",P.data);if(this.leftOver&&this.leftOver.length){if(y.uint8array){var q=z;(z=new Uint8Array(q.length+this.leftOver.length)).set(this.leftOver,0),z.set(q,this.leftOver.length)}else z=this.leftOver.concat(z);this.leftOver=null}var $=function(T,N){var C;for((N=N||T.length)>T.length&&(N=T.length),C=N-1;0<=C&&(192&T[C])==128;)C--;return C<0||C===0?N:C+k[T[C]]>N?C:N}(z),F=z;$!==z.length&&(y.uint8array?(F=z.subarray(0,$),this.leftOver=z.subarray($,z.length)):(F=z.slice(0,$),this.leftOver=z.slice($,z.length))),this.push({data:g.utf8decode(F),meta:P.meta})},I.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:g.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},g.Utf8DecodeWorker=I,m.inherits(U,v),U.prototype.processChunk=function(P){this.push({data:g.utf8encode(P.data),meta:P.meta})},g.Utf8EncodeWorker=U},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(h,p,g){var m=h("./support"),y=h("./base64"),b=h("./nodejsUtils"),v=h("./external");function k(q){return q}function j(q,$){for(var F=0;F<q.length;++F)$[F]=255&q.charCodeAt(F);return $}h("setimmediate"),g.newBlob=function(q,$){g.checkSupport("blob");try{return new Blob([q],{type:$})}catch{try{var F=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return F.append(q),F.getBlob($)}catch{throw new Error("Bug : can't construct the Blob.")}}};var I={stringifyByChunk:function(q,$,F){var T=[],N=0,C=q.length;if(C<=F)return String.fromCharCode.apply(null,q);for(;N<C;)$==="array"||$==="nodebuffer"?T.push(String.fromCharCode.apply(null,q.slice(N,Math.min(N+F,C)))):T.push(String.fromCharCode.apply(null,q.subarray(N,Math.min(N+F,C)))),N+=F;return T.join("")},stringifyByChar:function(q){for(var $="",F=0;F<q.length;F++)$+=String.fromCharCode(q[F]);return $},applyCanBeUsed:{uint8array:function(){try{return m.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return m.nodebuffer&&String.fromCharCode.apply(null,b.allocBuffer(1)).length===1}catch{return!1}}()}};function U(q){var $=65536,F=g.getTypeOf(q),T=!0;if(F==="uint8array"?T=I.applyCanBeUsed.uint8array:F==="nodebuffer"&&(T=I.applyCanBeUsed.nodebuffer),T)for(;1<$;)try{return I.stringifyByChunk(q,F,$)}catch{$=Math.floor($/2)}return I.stringifyByChar(q)}function P(q,$){for(var F=0;F<q.length;F++)$[F]=q[F];return $}g.applyFromCharCode=U;var z={};z.string={string:k,array:function(q){return j(q,new Array(q.length))},arraybuffer:function(q){return z.string.uint8array(q).buffer},uint8array:function(q){return j(q,new Uint8Array(q.length))},nodebuffer:function(q){return j(q,b.allocBuffer(q.length))}},z.array={string:U,array:k,arraybuffer:function(q){return new Uint8Array(q).buffer},uint8array:function(q){return new Uint8Array(q)},nodebuffer:function(q){return b.newBufferFrom(q)}},z.arraybuffer={string:function(q){return U(new Uint8Array(q))},array:function(q){return P(new Uint8Array(q),new Array(q.byteLength))},arraybuffer:k,uint8array:function(q){return new Uint8Array(q)},nodebuffer:function(q){return b.newBufferFrom(new Uint8Array(q))}},z.uint8array={string:U,array:function(q){return P(q,new Array(q.length))},arraybuffer:function(q){return q.buffer},uint8array:k,nodebuffer:function(q){return b.newBufferFrom(q)}},z.nodebuffer={string:U,array:function(q){return P(q,new Array(q.length))},arraybuffer:function(q){return z.nodebuffer.uint8array(q).buffer},uint8array:function(q){return P(q,new Uint8Array(q.length))},nodebuffer:k},g.transformTo=function(q,$){if($=$||"",!q)return $;g.checkSupport(q);var F=g.getTypeOf($);return z[F][q]($)},g.resolve=function(q){for(var $=q.split("/"),F=[],T=0;T<$.length;T++){var N=$[T];N==="."||N===""&&T!==0&&T!==$.length-1||(N===".."?F.pop():F.push(N))}return F.join("/")},g.getTypeOf=function(q){return typeof q=="string"?"string":Object.prototype.toString.call(q)==="[object Array]"?"array":m.nodebuffer&&b.isBuffer(q)?"nodebuffer":m.uint8array&&q instanceof Uint8Array?"uint8array":m.arraybuffer&&q instanceof ArrayBuffer?"arraybuffer":void 0},g.checkSupport=function(q){if(!m[q.toLowerCase()])throw new Error(q+" is not supported by this platform")},g.MAX_VALUE_16BITS=65535,g.MAX_VALUE_32BITS=-1,g.pretty=function(q){var $,F,T="";for(F=0;F<(q||"").length;F++)T+="\\x"+(($=q.charCodeAt(F))<16?"0":"")+$.toString(16).toUpperCase();return T},g.delay=function(q,$,F){f(function(){q.apply(F||null,$||[])})},g.inherits=function(q,$){function F(){}F.prototype=$.prototype,q.prototype=new F},g.extend=function(){var q,$,F={};for(q=0;q<arguments.length;q++)for($ in arguments[q])Object.prototype.hasOwnProperty.call(arguments[q],$)&&F[$]===void 0&&(F[$]=arguments[q][$]);return F},g.prepareContent=function(q,$,F,T,N){return v.Promise.resolve($).then(function(C){return m.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new v.Promise(function(w,_){var x=new FileReader;x.onload=function(S){w(S.target.result)},x.onerror=function(S){_(S.target.error)},x.readAsArrayBuffer(C)}):C}).then(function(C){var w=g.getTypeOf(C);return w?(w==="arraybuffer"?C=g.transformTo("uint8array",C):w==="string"&&(N?C=y.decode(C):F&&T!==!0&&(C=function(_){return j(_,m.uint8array?new Uint8Array(_.length):new Array(_.length))}(C))),C):v.Promise.reject(new Error("Can't read the data of '"+q+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(h,p,g){var m=h("./reader/readerFor"),y=h("./utils"),b=h("./signature"),v=h("./zipEntry"),k=h("./support");function j(I){this.files=[],this.loadOptions=I}j.prototype={checkSignature:function(I){if(!this.reader.readAndCheckSignature(I)){this.reader.index-=4;var U=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+y.pretty(U)+", expected "+y.pretty(I)+")")}},isSignature:function(I,U){var P=this.reader.index;this.reader.setIndex(I);var z=this.reader.readString(4)===U;return this.reader.setIndex(P),z},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var I=this.reader.readData(this.zipCommentLength),U=k.uint8array?"uint8array":"array",P=y.transformTo(U,I);this.zipComment=this.loadOptions.decodeFileName(P)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var I,U,P,z=this.zip64EndOfCentralSize-44;0<z;)I=this.reader.readInt(2),U=this.reader.readInt(4),P=this.reader.readData(U),this.zip64ExtensibleData[I]={id:I,length:U,value:P}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var I,U;for(I=0;I<this.files.length;I++)U=this.files[I],this.reader.setIndex(U.localHeaderOffset),this.checkSignature(b.LOCAL_FILE_HEADER),U.readLocalPart(this.reader),U.handleUTF8(),U.processAttributes()},readCentralDir:function(){var I;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(b.CENTRAL_FILE_HEADER);)(I=new v({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(I);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var I=this.reader.lastIndexOfSignature(b.CENTRAL_DIRECTORY_END);if(I<0)throw this.isSignature(0,b.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(I);var U=I;if(this.checkSignature(b.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===y.MAX_VALUE_16BITS||this.diskWithCentralDirStart===y.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===y.MAX_VALUE_16BITS||this.centralDirRecords===y.MAX_VALUE_16BITS||this.centralDirSize===y.MAX_VALUE_32BITS||this.centralDirOffset===y.MAX_VALUE_32BITS){if(this.zip64=!0,(I=this.reader.lastIndexOfSignature(b.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(I),this.checkSignature(b.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,b.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(b.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(b.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var P=this.centralDirOffset+this.centralDirSize;this.zip64&&(P+=20,P+=12+this.zip64EndOfCentralSize);var z=U-P;if(0<z)this.isSignature(U,b.CENTRAL_FILE_HEADER)||(this.reader.zero=z);else if(z<0)throw new Error("Corrupted zip: missing "+Math.abs(z)+" bytes.")},prepareReader:function(I){this.reader=m(I)},load:function(I){this.prepareReader(I),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},p.exports=j},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(h,p,g){var m=h("./reader/readerFor"),y=h("./utils"),b=h("./compressedObject"),v=h("./crc32"),k=h("./utf8"),j=h("./compressions"),I=h("./support");function U(P,z){this.options=P,this.loadOptions=z}U.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(P){var z,q;if(P.skip(22),this.fileNameLength=P.readInt(2),q=P.readInt(2),this.fileName=P.readData(this.fileNameLength),P.skip(q),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((z=function($){for(var F in j)if(Object.prototype.hasOwnProperty.call(j,F)&&j[F].magic===$)return j[F];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+y.pretty(this.compressionMethod)+" unknown (inner file : "+y.transformTo("string",this.fileName)+")");this.decompressed=new b(this.compressedSize,this.uncompressedSize,this.crc32,z,P.readData(this.compressedSize))},readCentralPart:function(P){this.versionMadeBy=P.readInt(2),P.skip(2),this.bitFlag=P.readInt(2),this.compressionMethod=P.readString(2),this.date=P.readDate(),this.crc32=P.readInt(4),this.compressedSize=P.readInt(4),this.uncompressedSize=P.readInt(4);var z=P.readInt(2);if(this.extraFieldsLength=P.readInt(2),this.fileCommentLength=P.readInt(2),this.diskNumberStart=P.readInt(2),this.internalFileAttributes=P.readInt(2),this.externalFileAttributes=P.readInt(4),this.localHeaderOffset=P.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");P.skip(z),this.readExtraFields(P),this.parseZIP64ExtraField(P),this.fileComment=P.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var P=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),P==0&&(this.dosPermissions=63&this.externalFileAttributes),P==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var P=m(this.extraFields[1].value);this.uncompressedSize===y.MAX_VALUE_32BITS&&(this.uncompressedSize=P.readInt(8)),this.compressedSize===y.MAX_VALUE_32BITS&&(this.compressedSize=P.readInt(8)),this.localHeaderOffset===y.MAX_VALUE_32BITS&&(this.localHeaderOffset=P.readInt(8)),this.diskNumberStart===y.MAX_VALUE_32BITS&&(this.diskNumberStart=P.readInt(4))}},readExtraFields:function(P){var z,q,$,F=P.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});P.index+4<F;)z=P.readInt(2),q=P.readInt(2),$=P.readData(q),this.extraFields[z]={id:z,length:q,value:$};P.setIndex(F)},handleUTF8:function(){var P=I.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=k.utf8decode(this.fileName),this.fileCommentStr=k.utf8decode(this.fileComment);else{var z=this.findExtraFieldUnicodePath();if(z!==null)this.fileNameStr=z;else{var q=y.transformTo(P,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(q)}var $=this.findExtraFieldUnicodeComment();if($!==null)this.fileCommentStr=$;else{var F=y.transformTo(P,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(F)}}},findExtraFieldUnicodePath:function(){var P=this.extraFields[28789];if(P){var z=m(P.value);return z.readInt(1)!==1||v(this.fileName)!==z.readInt(4)?null:k.utf8decode(z.readData(P.length-5))}return null},findExtraFieldUnicodeComment:function(){var P=this.extraFields[25461];if(P){var z=m(P.value);return z.readInt(1)!==1||v(this.fileComment)!==z.readInt(4)?null:k.utf8decode(z.readData(P.length-5))}return null}},p.exports=U},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(h,p,g){function m(z,q,$){this.name=z,this.dir=$.dir,this.date=$.date,this.comment=$.comment,this.unixPermissions=$.unixPermissions,this.dosPermissions=$.dosPermissions,this._data=q,this._dataBinary=$.binary,this.options={compression:$.compression,compressionOptions:$.compressionOptions}}var y=h("./stream/StreamHelper"),b=h("./stream/DataWorker"),v=h("./utf8"),k=h("./compressedObject"),j=h("./stream/GenericWorker");m.prototype={internalStream:function(z){var q=null,$="string";try{if(!z)throw new Error("No output type specified.");var F=($=z.toLowerCase())==="string"||$==="text";$!=="binarystring"&&$!=="text"||($="string"),q=this._decompressWorker();var T=!this._dataBinary;T&&!F&&(q=q.pipe(new v.Utf8EncodeWorker)),!T&&F&&(q=q.pipe(new v.Utf8DecodeWorker))}catch(N){(q=new j("error")).error(N)}return new y(q,$,"")},async:function(z,q){return this.internalStream(z).accumulate(q)},nodeStream:function(z,q){return this.internalStream(z||"nodebuffer").toNodejsStream(q)},_compressWorker:function(z,q){if(this._data instanceof k&&this._data.compression.magic===z.magic)return this._data.getCompressedWorker();var $=this._decompressWorker();return this._dataBinary||($=$.pipe(new v.Utf8EncodeWorker)),k.createWorkerFrom($,z,q)},_decompressWorker:function(){return this._data instanceof k?this._data.getContentWorker():this._data instanceof j?this._data:new b(this._data)}};for(var I=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],U=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},P=0;P<I.length;P++)m.prototype[I[P]]=U;p.exports=m},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(h,p,g){(function(m){var y,b,v=m.MutationObserver||m.WebKitMutationObserver;if(v){var k=0,j=new v(z),I=m.document.createTextNode("");j.observe(I,{characterData:!0}),y=function(){I.data=k=++k%2}}else if(m.setImmediate||m.MessageChannel===void 0)y="document"in m&&"onreadystatechange"in m.document.createElement("script")?function(){var q=m.document.createElement("script");q.onreadystatechange=function(){z(),q.onreadystatechange=null,q.parentNode.removeChild(q),q=null},m.document.documentElement.appendChild(q)}:function(){setTimeout(z,0)};else{var U=new m.MessageChannel;U.port1.onmessage=z,y=function(){U.port2.postMessage(0)}}var P=[];function z(){var q,$;b=!0;for(var F=P.length;F;){for($=P,P=[],q=-1;++q<F;)$[q]();F=P.length}b=!1}p.exports=function(q){P.push(q)!==1||b||y()}}).call(this,o!==void 0?o:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(h,p,g){var m=h("immediate");function y(){}var b={},v=["REJECTED"],k=["FULFILLED"],j=["PENDING"];function I(F){if(typeof F!="function")throw new TypeError("resolver must be a function");this.state=j,this.queue=[],this.outcome=void 0,F!==y&&q(this,F)}function U(F,T,N){this.promise=F,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function P(F,T,N){m(function(){var C;try{C=T(N)}catch(w){return b.reject(F,w)}C===F?b.reject(F,new TypeError("Cannot resolve promise with itself")):b.resolve(F,C)})}function z(F){var T=F&&F.then;if(F&&(typeof F=="object"||typeof F=="function")&&typeof T=="function")return function(){T.apply(F,arguments)}}function q(F,T){var N=!1;function C(x){N||(N=!0,b.reject(F,x))}function w(x){N||(N=!0,b.resolve(F,x))}var _=$(function(){T(w,C)});_.status==="error"&&C(_.value)}function $(F,T){var N={};try{N.value=F(T),N.status="success"}catch(C){N.status="error",N.value=C}return N}(p.exports=I).prototype.finally=function(F){if(typeof F!="function")return this;var T=this.constructor;return this.then(function(N){return T.resolve(F()).then(function(){return N})},function(N){return T.resolve(F()).then(function(){throw N})})},I.prototype.catch=function(F){return this.then(null,F)},I.prototype.then=function(F,T){if(typeof F!="function"&&this.state===k||typeof T!="function"&&this.state===v)return this;var N=new this.constructor(y);return this.state!==j?P(N,this.state===k?F:T,this.outcome):this.queue.push(new U(N,F,T)),N},U.prototype.callFulfilled=function(F){b.resolve(this.promise,F)},U.prototype.otherCallFulfilled=function(F){P(this.promise,this.onFulfilled,F)},U.prototype.callRejected=function(F){b.reject(this.promise,F)},U.prototype.otherCallRejected=function(F){P(this.promise,this.onRejected,F)},b.resolve=function(F,T){var N=$(z,T);if(N.status==="error")return b.reject(F,N.value);var C=N.value;if(C)q(F,C);else{F.state=k,F.outcome=T;for(var w=-1,_=F.queue.length;++w<_;)F.queue[w].callFulfilled(T)}return F},b.reject=function(F,T){F.state=v,F.outcome=T;for(var N=-1,C=F.queue.length;++N<C;)F.queue[N].callRejected(T);return F},I.resolve=function(F){return F instanceof this?F:b.resolve(new this(y),F)},I.reject=function(F){var T=new this(y);return b.reject(T,F)},I.all=function(F){var T=this;if(Object.prototype.toString.call(F)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=F.length,C=!1;if(!N)return this.resolve([]);for(var w=new Array(N),_=0,x=-1,S=new this(y);++x<N;)A(F[x],x);return S;function A(B,E){T.resolve(B).then(function(V){w[E]=V,++_!==N||C||(C=!0,b.resolve(S,w))},function(V){C||(C=!0,b.reject(S,V))})}},I.race=function(F){if(Object.prototype.toString.call(F)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=F.length,N=!1;if(!T)return this.resolve([]);for(var C,w=-1,_=new this(y);++w<T;)C=F[w],this.resolve(C).then(function(x){N||(N=!0,b.resolve(_,x))},function(x){N||(N=!0,b.reject(_,x))});return _}},{immediate:36}],38:[function(h,p,g){var m={};(0,h("./lib/utils/common").assign)(m,h("./lib/deflate"),h("./lib/inflate"),h("./lib/zlib/constants")),p.exports=m},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(h,p,g){var m=h("./zlib/deflate"),y=h("./utils/common"),b=h("./utils/strings"),v=h("./zlib/messages"),k=h("./zlib/zstream"),j=Object.prototype.toString;function I(P){if(!(this instanceof I))return new I(P);this.options=y.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},P||{});var z=this.options;z.raw&&0<z.windowBits?z.windowBits=-z.windowBits:z.gzip&&0<z.windowBits&&z.windowBits<16&&(z.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var q=m.deflateInit2(this.strm,z.level,z.method,z.windowBits,z.memLevel,z.strategy);if(q!==0)throw new Error(v[q]);if(z.header&&m.deflateSetHeader(this.strm,z.header),z.dictionary){var $;if($=typeof z.dictionary=="string"?b.string2buf(z.dictionary):j.call(z.dictionary)==="[object ArrayBuffer]"?new Uint8Array(z.dictionary):z.dictionary,(q=m.deflateSetDictionary(this.strm,$))!==0)throw new Error(v[q]);this._dict_set=!0}}function U(P,z){var q=new I(z);if(q.push(P,!0),q.err)throw q.msg||v[q.err];return q.result}I.prototype.push=function(P,z){var q,$,F=this.strm,T=this.options.chunkSize;if(this.ended)return!1;$=z===~~z?z:z===!0?4:0,typeof P=="string"?F.input=b.string2buf(P):j.call(P)==="[object ArrayBuffer]"?F.input=new Uint8Array(P):F.input=P,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new y.Buf8(T),F.next_out=0,F.avail_out=T),(q=m.deflate(F,$))!==1&&q!==0)return this.onEnd(q),!(this.ended=!0);F.avail_out!==0&&(F.avail_in!==0||$!==4&&$!==2)||(this.options.to==="string"?this.onData(b.buf2binstring(y.shrinkBuf(F.output,F.next_out))):this.onData(y.shrinkBuf(F.output,F.next_out)))}while((0<F.avail_in||F.avail_out===0)&&q!==1);return $===4?(q=m.deflateEnd(this.strm),this.onEnd(q),this.ended=!0,q===0):$!==2||(this.onEnd(0),!(F.avail_out=0))},I.prototype.onData=function(P){this.chunks.push(P)},I.prototype.onEnd=function(P){P===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=y.flattenChunks(this.chunks)),this.chunks=[],this.err=P,this.msg=this.strm.msg},g.Deflate=I,g.deflate=U,g.deflateRaw=function(P,z){return(z=z||{}).raw=!0,U(P,z)},g.gzip=function(P,z){return(z=z||{}).gzip=!0,U(P,z)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(h,p,g){var m=h("./zlib/inflate"),y=h("./utils/common"),b=h("./utils/strings"),v=h("./zlib/constants"),k=h("./zlib/messages"),j=h("./zlib/zstream"),I=h("./zlib/gzheader"),U=Object.prototype.toString;function P(q){if(!(this instanceof P))return new P(q);this.options=y.assign({chunkSize:16384,windowBits:0,to:""},q||{});var $=this.options;$.raw&&0<=$.windowBits&&$.windowBits<16&&($.windowBits=-$.windowBits,$.windowBits===0&&($.windowBits=-15)),!(0<=$.windowBits&&$.windowBits<16)||q&&q.windowBits||($.windowBits+=32),15<$.windowBits&&$.windowBits<48&&!(15&$.windowBits)&&($.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new j,this.strm.avail_out=0;var F=m.inflateInit2(this.strm,$.windowBits);if(F!==v.Z_OK)throw new Error(k[F]);this.header=new I,m.inflateGetHeader(this.strm,this.header)}function z(q,$){var F=new P($);if(F.push(q,!0),F.err)throw F.msg||k[F.err];return F.result}P.prototype.push=function(q,$){var F,T,N,C,w,_,x=this.strm,S=this.options.chunkSize,A=this.options.dictionary,B=!1;if(this.ended)return!1;T=$===~~$?$:$===!0?v.Z_FINISH:v.Z_NO_FLUSH,typeof q=="string"?x.input=b.binstring2buf(q):U.call(q)==="[object ArrayBuffer]"?x.input=new Uint8Array(q):x.input=q,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new y.Buf8(S),x.next_out=0,x.avail_out=S),(F=m.inflate(x,v.Z_NO_FLUSH))===v.Z_NEED_DICT&&A&&(_=typeof A=="string"?b.string2buf(A):U.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,F=m.inflateSetDictionary(this.strm,_)),F===v.Z_BUF_ERROR&&B===!0&&(F=v.Z_OK,B=!1),F!==v.Z_STREAM_END&&F!==v.Z_OK)return this.onEnd(F),!(this.ended=!0);x.next_out&&(x.avail_out!==0&&F!==v.Z_STREAM_END&&(x.avail_in!==0||T!==v.Z_FINISH&&T!==v.Z_SYNC_FLUSH)||(this.options.to==="string"?(N=b.utf8border(x.output,x.next_out),C=x.next_out-N,w=b.buf2string(x.output,N),x.next_out=C,x.avail_out=S-C,C&&y.arraySet(x.output,x.output,N,C,0),this.onData(w)):this.onData(y.shrinkBuf(x.output,x.next_out)))),x.avail_in===0&&x.avail_out===0&&(B=!0)}while((0<x.avail_in||x.avail_out===0)&&F!==v.Z_STREAM_END);return F===v.Z_STREAM_END&&(T=v.Z_FINISH),T===v.Z_FINISH?(F=m.inflateEnd(this.strm),this.onEnd(F),this.ended=!0,F===v.Z_OK):T!==v.Z_SYNC_FLUSH||(this.onEnd(v.Z_OK),!(x.avail_out=0))},P.prototype.onData=function(q){this.chunks.push(q)},P.prototype.onEnd=function(q){q===v.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=y.flattenChunks(this.chunks)),this.chunks=[],this.err=q,this.msg=this.strm.msg},g.Inflate=P,g.inflate=z,g.inflateRaw=function(q,$){return($=$||{}).raw=!0,z(q,$)},g.ungzip=z},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(h,p,g){var m=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";g.assign=function(v){for(var k=Array.prototype.slice.call(arguments,1);k.length;){var j=k.shift();if(j){if(typeof j!="object")throw new TypeError(j+"must be non-object");for(var I in j)j.hasOwnProperty(I)&&(v[I]=j[I])}}return v},g.shrinkBuf=function(v,k){return v.length===k?v:v.subarray?v.subarray(0,k):(v.length=k,v)};var y={arraySet:function(v,k,j,I,U){if(k.subarray&&v.subarray)v.set(k.subarray(j,j+I),U);else for(var P=0;P<I;P++)v[U+P]=k[j+P]},flattenChunks:function(v){var k,j,I,U,P,z;for(k=I=0,j=v.length;k<j;k++)I+=v[k].length;for(z=new Uint8Array(I),k=U=0,j=v.length;k<j;k++)P=v[k],z.set(P,U),U+=P.length;return z}},b={arraySet:function(v,k,j,I,U){for(var P=0;P<I;P++)v[U+P]=k[j+P]},flattenChunks:function(v){return[].concat.apply([],v)}};g.setTyped=function(v){v?(g.Buf8=Uint8Array,g.Buf16=Uint16Array,g.Buf32=Int32Array,g.assign(g,y)):(g.Buf8=Array,g.Buf16=Array,g.Buf32=Array,g.assign(g,b))},g.setTyped(m)},{}],42:[function(h,p,g){var m=h("./common"),y=!0,b=!0;try{String.fromCharCode.apply(null,[0])}catch{y=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{b=!1}for(var v=new m.Buf8(256),k=0;k<256;k++)v[k]=252<=k?6:248<=k?5:240<=k?4:224<=k?3:192<=k?2:1;function j(I,U){if(U<65537&&(I.subarray&&b||!I.subarray&&y))return String.fromCharCode.apply(null,m.shrinkBuf(I,U));for(var P="",z=0;z<U;z++)P+=String.fromCharCode(I[z]);return P}v[254]=v[254]=1,g.string2buf=function(I){var U,P,z,q,$,F=I.length,T=0;for(q=0;q<F;q++)(64512&(P=I.charCodeAt(q)))==55296&&q+1<F&&(64512&(z=I.charCodeAt(q+1)))==56320&&(P=65536+(P-55296<<10)+(z-56320),q++),T+=P<128?1:P<2048?2:P<65536?3:4;for(U=new m.Buf8(T),q=$=0;$<T;q++)(64512&(P=I.charCodeAt(q)))==55296&&q+1<F&&(64512&(z=I.charCodeAt(q+1)))==56320&&(P=65536+(P-55296<<10)+(z-56320),q++),P<128?U[$++]=P:(P<2048?U[$++]=192|P>>>6:(P<65536?U[$++]=224|P>>>12:(U[$++]=240|P>>>18,U[$++]=128|P>>>12&63),U[$++]=128|P>>>6&63),U[$++]=128|63&P);return U},g.buf2binstring=function(I){return j(I,I.length)},g.binstring2buf=function(I){for(var U=new m.Buf8(I.length),P=0,z=U.length;P<z;P++)U[P]=I.charCodeAt(P);return U},g.buf2string=function(I,U){var P,z,q,$,F=U||I.length,T=new Array(2*F);for(P=z=0;P<F;)if((q=I[P++])<128)T[z++]=q;else if(4<($=v[q]))T[z++]=65533,P+=$-1;else{for(q&=$===2?31:$===3?15:7;1<$&&P<F;)q=q<<6|63&I[P++],$--;1<$?T[z++]=65533:q<65536?T[z++]=q:(q-=65536,T[z++]=55296|q>>10&1023,T[z++]=56320|1023&q)}return j(T,z)},g.utf8border=function(I,U){var P;for((U=U||I.length)>I.length&&(U=I.length),P=U-1;0<=P&&(192&I[P])==128;)P--;return P<0||P===0?U:P+v[I[P]]>U?P:U}},{"./common":41}],43:[function(h,p,g){p.exports=function(m,y,b,v){for(var k=65535&m|0,j=m>>>16&65535|0,I=0;b!==0;){for(b-=I=2e3<b?2e3:b;j=j+(k=k+y[v++]|0)|0,--I;);k%=65521,j%=65521}return k|j<<16|0}},{}],44:[function(h,p,g){p.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(h,p,g){var m=function(){for(var y,b=[],v=0;v<256;v++){y=v;for(var k=0;k<8;k++)y=1&y?3988292384^y>>>1:y>>>1;b[v]=y}return b}();p.exports=function(y,b,v,k){var j=m,I=k+v;y^=-1;for(var U=k;U<I;U++)y=y>>>8^j[255&(y^b[U])];return-1^y}},{}],46:[function(h,p,g){var m,y=h("../utils/common"),b=h("./trees"),v=h("./adler32"),k=h("./crc32"),j=h("./messages"),I=-2,U=258,P=262,z=113;function q(D,Z){return D.msg=j[Z],Z}function $(D){return(D<<1)-(4<D?9:0)}function F(D){for(var Z=D.length;0<=--Z;)D[Z]=0}function T(D){var Z=D.state,L=Z.pending;L>D.avail_out&&(L=D.avail_out),L!==0&&(y.arraySet(D.output,Z.pending_buf,Z.pending_out,L,D.next_out),D.next_out+=L,Z.pending_out+=L,D.total_out+=L,D.avail_out-=L,Z.pending-=L,Z.pending===0&&(Z.pending_out=0))}function N(D,Z){b._tr_flush_block(D,0<=D.block_start?D.block_start:-1,D.strstart-D.block_start,Z),D.block_start=D.strstart,T(D.strm)}function C(D,Z){D.pending_buf[D.pending++]=Z}function w(D,Z){D.pending_buf[D.pending++]=Z>>>8&255,D.pending_buf[D.pending++]=255&Z}function _(D,Z){var L,O,G=D.max_chain_length,nt=D.strstart,ct=D.prev_length,ot=D.nice_match,mt=D.strstart>D.w_size-P?D.strstart-(D.w_size-P):0,pt=D.window,st=D.w_mask,at=D.prev,vt=D.strstart+U,yt=pt[nt+ct-1],kt=pt[nt+ct];D.prev_length>=D.good_match&&(G>>=2),ot>D.lookahead&&(ot=D.lookahead);do if(pt[(L=Z)+ct]===kt&&pt[L+ct-1]===yt&&pt[L]===pt[nt]&&pt[++L]===pt[nt+1]){nt+=2,L++;do;while(pt[++nt]===pt[++L]&&pt[++nt]===pt[++L]&&pt[++nt]===pt[++L]&&pt[++nt]===pt[++L]&&pt[++nt]===pt[++L]&&pt[++nt]===pt[++L]&&pt[++nt]===pt[++L]&&pt[++nt]===pt[++L]&&nt<vt);if(O=U-(vt-nt),nt=vt-U,ct<O){if(D.match_start=Z,ot<=(ct=O))break;yt=pt[nt+ct-1],kt=pt[nt+ct]}}while((Z=at[Z&st])>mt&&--G!=0);return ct<=D.lookahead?ct:D.lookahead}function x(D){var Z,L,O,G,nt,ct,ot,mt,pt,st,at=D.w_size;do{if(G=D.window_size-D.lookahead-D.strstart,D.strstart>=at+(at-P)){for(y.arraySet(D.window,D.window,at,at,0),D.match_start-=at,D.strstart-=at,D.block_start-=at,Z=L=D.hash_size;O=D.head[--Z],D.head[Z]=at<=O?O-at:0,--L;);for(Z=L=at;O=D.prev[--Z],D.prev[Z]=at<=O?O-at:0,--L;);G+=at}if(D.strm.avail_in===0)break;if(ct=D.strm,ot=D.window,mt=D.strstart+D.lookahead,st=void 0,(pt=G)<(st=ct.avail_in)&&(st=pt),L=st===0?0:(ct.avail_in-=st,y.arraySet(ot,ct.input,ct.next_in,st,mt),ct.state.wrap===1?ct.adler=v(ct.adler,ot,st,mt):ct.state.wrap===2&&(ct.adler=k(ct.adler,ot,st,mt)),ct.next_in+=st,ct.total_in+=st,st),D.lookahead+=L,D.lookahead+D.insert>=3)for(nt=D.strstart-D.insert,D.ins_h=D.window[nt],D.ins_h=(D.ins_h<<D.hash_shift^D.window[nt+1])&D.hash_mask;D.insert&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[nt+3-1])&D.hash_mask,D.prev[nt&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=nt,nt++,D.insert--,!(D.lookahead+D.insert<3)););}while(D.lookahead<P&&D.strm.avail_in!==0)}function S(D,Z){for(var L,O;;){if(D.lookahead<P){if(x(D),D.lookahead<P&&Z===0)return 1;if(D.lookahead===0)break}if(L=0,D.lookahead>=3&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+3-1])&D.hash_mask,L=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),L!==0&&D.strstart-L<=D.w_size-P&&(D.match_length=_(D,L)),D.match_length>=3)if(O=b._tr_tally(D,D.strstart-D.match_start,D.match_length-3),D.lookahead-=D.match_length,D.match_length<=D.max_lazy_match&&D.lookahead>=3){for(D.match_length--;D.strstart++,D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+3-1])&D.hash_mask,L=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart,--D.match_length!=0;);D.strstart++}else D.strstart+=D.match_length,D.match_length=0,D.ins_h=D.window[D.strstart],D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+1])&D.hash_mask;else O=b._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++;if(O&&(N(D,!1),D.strm.avail_out===0))return 1}return D.insert=D.strstart<2?D.strstart:2,Z===4?(N(D,!0),D.strm.avail_out===0?3:4):D.last_lit&&(N(D,!1),D.strm.avail_out===0)?1:2}function A(D,Z){for(var L,O,G;;){if(D.lookahead<P){if(x(D),D.lookahead<P&&Z===0)return 1;if(D.lookahead===0)break}if(L=0,D.lookahead>=3&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+3-1])&D.hash_mask,L=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),D.prev_length=D.match_length,D.prev_match=D.match_start,D.match_length=2,L!==0&&D.prev_length<D.max_lazy_match&&D.strstart-L<=D.w_size-P&&(D.match_length=_(D,L),D.match_length<=5&&(D.strategy===1||D.match_length===3&&4096<D.strstart-D.match_start)&&(D.match_length=2)),D.prev_length>=3&&D.match_length<=D.prev_length){for(G=D.strstart+D.lookahead-3,O=b._tr_tally(D,D.strstart-1-D.prev_match,D.prev_length-3),D.lookahead-=D.prev_length-1,D.prev_length-=2;++D.strstart<=G&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+3-1])&D.hash_mask,L=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),--D.prev_length!=0;);if(D.match_available=0,D.match_length=2,D.strstart++,O&&(N(D,!1),D.strm.avail_out===0))return 1}else if(D.match_available){if((O=b._tr_tally(D,0,D.window[D.strstart-1]))&&N(D,!1),D.strstart++,D.lookahead--,D.strm.avail_out===0)return 1}else D.match_available=1,D.strstart++,D.lookahead--}return D.match_available&&(O=b._tr_tally(D,0,D.window[D.strstart-1]),D.match_available=0),D.insert=D.strstart<2?D.strstart:2,Z===4?(N(D,!0),D.strm.avail_out===0?3:4):D.last_lit&&(N(D,!1),D.strm.avail_out===0)?1:2}function B(D,Z,L,O,G){this.good_length=D,this.max_lazy=Z,this.nice_length=L,this.max_chain=O,this.func=G}function E(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new y.Buf16(1146),this.dyn_dtree=new y.Buf16(122),this.bl_tree=new y.Buf16(78),F(this.dyn_ltree),F(this.dyn_dtree),F(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new y.Buf16(16),this.heap=new y.Buf16(573),F(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new y.Buf16(573),F(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function V(D){var Z;return D&&D.state?(D.total_in=D.total_out=0,D.data_type=2,(Z=D.state).pending=0,Z.pending_out=0,Z.wrap<0&&(Z.wrap=-Z.wrap),Z.status=Z.wrap?42:z,D.adler=Z.wrap===2?0:1,Z.last_flush=0,b._tr_init(Z),0):q(D,I)}function X(D){var Z=V(D);return Z===0&&function(L){L.window_size=2*L.w_size,F(L.head),L.max_lazy_match=m[L.level].max_lazy,L.good_match=m[L.level].good_length,L.nice_match=m[L.level].nice_length,L.max_chain_length=m[L.level].max_chain,L.strstart=0,L.block_start=0,L.lookahead=0,L.insert=0,L.match_length=L.prev_length=2,L.match_available=0,L.ins_h=0}(D.state),Z}function Q(D,Z,L,O,G,nt){if(!D)return I;var ct=1;if(Z===-1&&(Z=6),O<0?(ct=0,O=-O):15<O&&(ct=2,O-=16),G<1||9<G||L!==8||O<8||15<O||Z<0||9<Z||nt<0||4<nt)return q(D,I);O===8&&(O=9);var ot=new E;return(D.state=ot).strm=D,ot.wrap=ct,ot.gzhead=null,ot.w_bits=O,ot.w_size=1<<ot.w_bits,ot.w_mask=ot.w_size-1,ot.hash_bits=G+7,ot.hash_size=1<<ot.hash_bits,ot.hash_mask=ot.hash_size-1,ot.hash_shift=~~((ot.hash_bits+3-1)/3),ot.window=new y.Buf8(2*ot.w_size),ot.head=new y.Buf16(ot.hash_size),ot.prev=new y.Buf16(ot.w_size),ot.lit_bufsize=1<<G+6,ot.pending_buf_size=4*ot.lit_bufsize,ot.pending_buf=new y.Buf8(ot.pending_buf_size),ot.d_buf=1*ot.lit_bufsize,ot.l_buf=3*ot.lit_bufsize,ot.level=Z,ot.strategy=nt,ot.method=L,X(D)}m=[new B(0,0,0,0,function(D,Z){var L=65535;for(L>D.pending_buf_size-5&&(L=D.pending_buf_size-5);;){if(D.lookahead<=1){if(x(D),D.lookahead===0&&Z===0)return 1;if(D.lookahead===0)break}D.strstart+=D.lookahead,D.lookahead=0;var O=D.block_start+L;if((D.strstart===0||D.strstart>=O)&&(D.lookahead=D.strstart-O,D.strstart=O,N(D,!1),D.strm.avail_out===0)||D.strstart-D.block_start>=D.w_size-P&&(N(D,!1),D.strm.avail_out===0))return 1}return D.insert=0,Z===4?(N(D,!0),D.strm.avail_out===0?3:4):(D.strstart>D.block_start&&(N(D,!1),D.strm.avail_out),1)}),new B(4,4,8,4,S),new B(4,5,16,8,S),new B(4,6,32,32,S),new B(4,4,16,16,A),new B(8,16,32,32,A),new B(8,16,128,128,A),new B(8,32,128,256,A),new B(32,128,258,1024,A),new B(32,258,258,4096,A)],g.deflateInit=function(D,Z){return Q(D,Z,8,15,8,0)},g.deflateInit2=Q,g.deflateReset=X,g.deflateResetKeep=V,g.deflateSetHeader=function(D,Z){return D&&D.state?D.state.wrap!==2?I:(D.state.gzhead=Z,0):I},g.deflate=function(D,Z){var L,O,G,nt;if(!D||!D.state||5<Z||Z<0)return D?q(D,I):I;if(O=D.state,!D.output||!D.input&&D.avail_in!==0||O.status===666&&Z!==4)return q(D,D.avail_out===0?-5:I);if(O.strm=D,L=O.last_flush,O.last_flush=Z,O.status===42)if(O.wrap===2)D.adler=0,C(O,31),C(O,139),C(O,8),O.gzhead?(C(O,(O.gzhead.text?1:0)+(O.gzhead.hcrc?2:0)+(O.gzhead.extra?4:0)+(O.gzhead.name?8:0)+(O.gzhead.comment?16:0)),C(O,255&O.gzhead.time),C(O,O.gzhead.time>>8&255),C(O,O.gzhead.time>>16&255),C(O,O.gzhead.time>>24&255),C(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),C(O,255&O.gzhead.os),O.gzhead.extra&&O.gzhead.extra.length&&(C(O,255&O.gzhead.extra.length),C(O,O.gzhead.extra.length>>8&255)),O.gzhead.hcrc&&(D.adler=k(D.adler,O.pending_buf,O.pending,0)),O.gzindex=0,O.status=69):(C(O,0),C(O,0),C(O,0),C(O,0),C(O,0),C(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),C(O,3),O.status=z);else{var ct=8+(O.w_bits-8<<4)<<8;ct|=(2<=O.strategy||O.level<2?0:O.level<6?1:O.level===6?2:3)<<6,O.strstart!==0&&(ct|=32),ct+=31-ct%31,O.status=z,w(O,ct),O.strstart!==0&&(w(O,D.adler>>>16),w(O,65535&D.adler)),D.adler=1}if(O.status===69)if(O.gzhead.extra){for(G=O.pending;O.gzindex<(65535&O.gzhead.extra.length)&&(O.pending!==O.pending_buf_size||(O.gzhead.hcrc&&O.pending>G&&(D.adler=k(D.adler,O.pending_buf,O.pending-G,G)),T(D),G=O.pending,O.pending!==O.pending_buf_size));)C(O,255&O.gzhead.extra[O.gzindex]),O.gzindex++;O.gzhead.hcrc&&O.pending>G&&(D.adler=k(D.adler,O.pending_buf,O.pending-G,G)),O.gzindex===O.gzhead.extra.length&&(O.gzindex=0,O.status=73)}else O.status=73;if(O.status===73)if(O.gzhead.name){G=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>G&&(D.adler=k(D.adler,O.pending_buf,O.pending-G,G)),T(D),G=O.pending,O.pending===O.pending_buf_size)){nt=1;break}nt=O.gzindex<O.gzhead.name.length?255&O.gzhead.name.charCodeAt(O.gzindex++):0,C(O,nt)}while(nt!==0);O.gzhead.hcrc&&O.pending>G&&(D.adler=k(D.adler,O.pending_buf,O.pending-G,G)),nt===0&&(O.gzindex=0,O.status=91)}else O.status=91;if(O.status===91)if(O.gzhead.comment){G=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>G&&(D.adler=k(D.adler,O.pending_buf,O.pending-G,G)),T(D),G=O.pending,O.pending===O.pending_buf_size)){nt=1;break}nt=O.gzindex<O.gzhead.comment.length?255&O.gzhead.comment.charCodeAt(O.gzindex++):0,C(O,nt)}while(nt!==0);O.gzhead.hcrc&&O.pending>G&&(D.adler=k(D.adler,O.pending_buf,O.pending-G,G)),nt===0&&(O.status=103)}else O.status=103;if(O.status===103&&(O.gzhead.hcrc?(O.pending+2>O.pending_buf_size&&T(D),O.pending+2<=O.pending_buf_size&&(C(O,255&D.adler),C(O,D.adler>>8&255),D.adler=0,O.status=z)):O.status=z),O.pending!==0){if(T(D),D.avail_out===0)return O.last_flush=-1,0}else if(D.avail_in===0&&$(Z)<=$(L)&&Z!==4)return q(D,-5);if(O.status===666&&D.avail_in!==0)return q(D,-5);if(D.avail_in!==0||O.lookahead!==0||Z!==0&&O.status!==666){var ot=O.strategy===2?function(mt,pt){for(var st;;){if(mt.lookahead===0&&(x(mt),mt.lookahead===0)){if(pt===0)return 1;break}if(mt.match_length=0,st=b._tr_tally(mt,0,mt.window[mt.strstart]),mt.lookahead--,mt.strstart++,st&&(N(mt,!1),mt.strm.avail_out===0))return 1}return mt.insert=0,pt===4?(N(mt,!0),mt.strm.avail_out===0?3:4):mt.last_lit&&(N(mt,!1),mt.strm.avail_out===0)?1:2}(O,Z):O.strategy===3?function(mt,pt){for(var st,at,vt,yt,kt=mt.window;;){if(mt.lookahead<=U){if(x(mt),mt.lookahead<=U&&pt===0)return 1;if(mt.lookahead===0)break}if(mt.match_length=0,mt.lookahead>=3&&0<mt.strstart&&(at=kt[vt=mt.strstart-1])===kt[++vt]&&at===kt[++vt]&&at===kt[++vt]){yt=mt.strstart+U;do;while(at===kt[++vt]&&at===kt[++vt]&&at===kt[++vt]&&at===kt[++vt]&&at===kt[++vt]&&at===kt[++vt]&&at===kt[++vt]&&at===kt[++vt]&&vt<yt);mt.match_length=U-(yt-vt),mt.match_length>mt.lookahead&&(mt.match_length=mt.lookahead)}if(mt.match_length>=3?(st=b._tr_tally(mt,1,mt.match_length-3),mt.lookahead-=mt.match_length,mt.strstart+=mt.match_length,mt.match_length=0):(st=b._tr_tally(mt,0,mt.window[mt.strstart]),mt.lookahead--,mt.strstart++),st&&(N(mt,!1),mt.strm.avail_out===0))return 1}return mt.insert=0,pt===4?(N(mt,!0),mt.strm.avail_out===0?3:4):mt.last_lit&&(N(mt,!1),mt.strm.avail_out===0)?1:2}(O,Z):m[O.level].func(O,Z);if(ot!==3&&ot!==4||(O.status=666),ot===1||ot===3)return D.avail_out===0&&(O.last_flush=-1),0;if(ot===2&&(Z===1?b._tr_align(O):Z!==5&&(b._tr_stored_block(O,0,0,!1),Z===3&&(F(O.head),O.lookahead===0&&(O.strstart=0,O.block_start=0,O.insert=0))),T(D),D.avail_out===0))return O.last_flush=-1,0}return Z!==4?0:O.wrap<=0?1:(O.wrap===2?(C(O,255&D.adler),C(O,D.adler>>8&255),C(O,D.adler>>16&255),C(O,D.adler>>24&255),C(O,255&D.total_in),C(O,D.total_in>>8&255),C(O,D.total_in>>16&255),C(O,D.total_in>>24&255)):(w(O,D.adler>>>16),w(O,65535&D.adler)),T(D),0<O.wrap&&(O.wrap=-O.wrap),O.pending!==0?0:1)},g.deflateEnd=function(D){var Z;return D&&D.state?(Z=D.state.status)!==42&&Z!==69&&Z!==73&&Z!==91&&Z!==103&&Z!==z&&Z!==666?q(D,I):(D.state=null,Z===z?q(D,-3):0):I},g.deflateSetDictionary=function(D,Z){var L,O,G,nt,ct,ot,mt,pt,st=Z.length;if(!D||!D.state||(nt=(L=D.state).wrap)===2||nt===1&&L.status!==42||L.lookahead)return I;for(nt===1&&(D.adler=v(D.adler,Z,st,0)),L.wrap=0,st>=L.w_size&&(nt===0&&(F(L.head),L.strstart=0,L.block_start=0,L.insert=0),pt=new y.Buf8(L.w_size),y.arraySet(pt,Z,st-L.w_size,L.w_size,0),Z=pt,st=L.w_size),ct=D.avail_in,ot=D.next_in,mt=D.input,D.avail_in=st,D.next_in=0,D.input=Z,x(L);L.lookahead>=3;){for(O=L.strstart,G=L.lookahead-2;L.ins_h=(L.ins_h<<L.hash_shift^L.window[O+3-1])&L.hash_mask,L.prev[O&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=O,O++,--G;);L.strstart=O,L.lookahead=2,x(L)}return L.strstart+=L.lookahead,L.block_start=L.strstart,L.insert=L.lookahead,L.lookahead=0,L.match_length=L.prev_length=2,L.match_available=0,D.next_in=ot,D.input=mt,D.avail_in=ct,L.wrap=nt,0},g.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(h,p,g){p.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(h,p,g){p.exports=function(m,y){var b,v,k,j,I,U,P,z,q,$,F,T,N,C,w,_,x,S,A,B,E,V,X,Q,D;b=m.state,v=m.next_in,Q=m.input,k=v+(m.avail_in-5),j=m.next_out,D=m.output,I=j-(y-m.avail_out),U=j+(m.avail_out-257),P=b.dmax,z=b.wsize,q=b.whave,$=b.wnext,F=b.window,T=b.hold,N=b.bits,C=b.lencode,w=b.distcode,_=(1<<b.lenbits)-1,x=(1<<b.distbits)-1;t:do{N<15&&(T+=Q[v++]<<N,N+=8,T+=Q[v++]<<N,N+=8),S=C[T&_];e:for(;;){if(T>>>=A=S>>>24,N-=A,(A=S>>>16&255)==0)D[j++]=65535&S;else{if(!(16&A)){if(!(64&A)){S=C[(65535&S)+(T&(1<<A)-1)];continue e}if(32&A){b.mode=12;break t}m.msg="invalid literal/length code",b.mode=30;break t}B=65535&S,(A&=15)&&(N<A&&(T+=Q[v++]<<N,N+=8),B+=T&(1<<A)-1,T>>>=A,N-=A),N<15&&(T+=Q[v++]<<N,N+=8,T+=Q[v++]<<N,N+=8),S=w[T&x];r:for(;;){if(T>>>=A=S>>>24,N-=A,!(16&(A=S>>>16&255))){if(!(64&A)){S=w[(65535&S)+(T&(1<<A)-1)];continue r}m.msg="invalid distance code",b.mode=30;break t}if(E=65535&S,N<(A&=15)&&(T+=Q[v++]<<N,(N+=8)<A&&(T+=Q[v++]<<N,N+=8)),P<(E+=T&(1<<A)-1)){m.msg="invalid distance too far back",b.mode=30;break t}if(T>>>=A,N-=A,(A=j-I)<E){if(q<(A=E-A)&&b.sane){m.msg="invalid distance too far back",b.mode=30;break t}if(X=F,(V=0)===$){if(V+=z-A,A<B){for(B-=A;D[j++]=F[V++],--A;);V=j-E,X=D}}else if($<A){if(V+=z+$-A,(A-=$)<B){for(B-=A;D[j++]=F[V++],--A;);if(V=0,$<B){for(B-=A=$;D[j++]=F[V++],--A;);V=j-E,X=D}}}else if(V+=$-A,A<B){for(B-=A;D[j++]=F[V++],--A;);V=j-E,X=D}for(;2<B;)D[j++]=X[V++],D[j++]=X[V++],D[j++]=X[V++],B-=3;B&&(D[j++]=X[V++],1<B&&(D[j++]=X[V++]))}else{for(V=j-E;D[j++]=D[V++],D[j++]=D[V++],D[j++]=D[V++],2<(B-=3););B&&(D[j++]=D[V++],1<B&&(D[j++]=D[V++]))}break}}break}}while(v<k&&j<U);v-=B=N>>3,T&=(1<<(N-=B<<3))-1,m.next_in=v,m.next_out=j,m.avail_in=v<k?k-v+5:5-(v-k),m.avail_out=j<U?U-j+257:257-(j-U),b.hold=T,b.bits=N}},{}],49:[function(h,p,g){var m=h("../utils/common"),y=h("./adler32"),b=h("./crc32"),v=h("./inffast"),k=h("./inftrees"),j=-2;function I(_){return(_>>>24&255)+(_>>>8&65280)+((65280&_)<<8)+((255&_)<<24)}function U(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function P(_){var x;return _&&_.state?(x=_.state,_.total_in=_.total_out=x.total=0,_.msg="",x.wrap&&(_.adler=1&x.wrap),x.mode=1,x.last=0,x.havedict=0,x.dmax=32768,x.head=null,x.hold=0,x.bits=0,x.lencode=x.lendyn=new m.Buf32(852),x.distcode=x.distdyn=new m.Buf32(592),x.sane=1,x.back=-1,0):j}function z(_){var x;return _&&_.state?((x=_.state).wsize=0,x.whave=0,x.wnext=0,P(_)):j}function q(_,x){var S,A;return _&&_.state?(A=_.state,x<0?(S=0,x=-x):(S=1+(x>>4),x<48&&(x&=15)),x&&(x<8||15<x)?j:(A.window!==null&&A.wbits!==x&&(A.window=null),A.wrap=S,A.wbits=x,z(_))):j}function $(_,x){var S,A;return _?(A=new U,(_.state=A).window=null,(S=q(_,x))!==0&&(_.state=null),S):j}var F,T,N=!0;function C(_){if(N){var x;for(F=new m.Buf32(512),T=new m.Buf32(32),x=0;x<144;)_.lens[x++]=8;for(;x<256;)_.lens[x++]=9;for(;x<280;)_.lens[x++]=7;for(;x<288;)_.lens[x++]=8;for(k(1,_.lens,0,288,F,0,_.work,{bits:9}),x=0;x<32;)_.lens[x++]=5;k(2,_.lens,0,32,T,0,_.work,{bits:5}),N=!1}_.lencode=F,_.lenbits=9,_.distcode=T,_.distbits=5}function w(_,x,S,A){var B,E=_.state;return E.window===null&&(E.wsize=1<<E.wbits,E.wnext=0,E.whave=0,E.window=new m.Buf8(E.wsize)),A>=E.wsize?(m.arraySet(E.window,x,S-E.wsize,E.wsize,0),E.wnext=0,E.whave=E.wsize):(A<(B=E.wsize-E.wnext)&&(B=A),m.arraySet(E.window,x,S-A,B,E.wnext),(A-=B)?(m.arraySet(E.window,x,S-A,A,0),E.wnext=A,E.whave=E.wsize):(E.wnext+=B,E.wnext===E.wsize&&(E.wnext=0),E.whave<E.wsize&&(E.whave+=B))),0}g.inflateReset=z,g.inflateReset2=q,g.inflateResetKeep=P,g.inflateInit=function(_){return $(_,15)},g.inflateInit2=$,g.inflate=function(_,x){var S,A,B,E,V,X,Q,D,Z,L,O,G,nt,ct,ot,mt,pt,st,at,vt,yt,kt,St,Tt,Lt=0,Xt=new m.Buf8(4),re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_||!_.state||!_.output||!_.input&&_.avail_in!==0)return j;(S=_.state).mode===12&&(S.mode=13),V=_.next_out,B=_.output,Q=_.avail_out,E=_.next_in,A=_.input,X=_.avail_in,D=S.hold,Z=S.bits,L=X,O=Q,kt=0;t:for(;;)switch(S.mode){case 1:if(S.wrap===0){S.mode=13;break}for(;Z<16;){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}if(2&S.wrap&&D===35615){Xt[S.check=0]=255&D,Xt[1]=D>>>8&255,S.check=b(S.check,Xt,2,0),Z=D=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&D)<<8)+(D>>8))%31){_.msg="incorrect header check",S.mode=30;break}if((15&D)!=8){_.msg="unknown compression method",S.mode=30;break}if(Z-=4,yt=8+(15&(D>>>=4)),S.wbits===0)S.wbits=yt;else if(yt>S.wbits){_.msg="invalid window size",S.mode=30;break}S.dmax=1<<yt,_.adler=S.check=1,S.mode=512&D?10:12,Z=D=0;break;case 2:for(;Z<16;){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}if(S.flags=D,(255&S.flags)!=8){_.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){_.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=D>>8&1),512&S.flags&&(Xt[0]=255&D,Xt[1]=D>>>8&255,S.check=b(S.check,Xt,2,0)),Z=D=0,S.mode=3;case 3:for(;Z<32;){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}S.head&&(S.head.time=D),512&S.flags&&(Xt[0]=255&D,Xt[1]=D>>>8&255,Xt[2]=D>>>16&255,Xt[3]=D>>>24&255,S.check=b(S.check,Xt,4,0)),Z=D=0,S.mode=4;case 4:for(;Z<16;){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}S.head&&(S.head.xflags=255&D,S.head.os=D>>8),512&S.flags&&(Xt[0]=255&D,Xt[1]=D>>>8&255,S.check=b(S.check,Xt,2,0)),Z=D=0,S.mode=5;case 5:if(1024&S.flags){for(;Z<16;){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}S.length=D,S.head&&(S.head.extra_len=D),512&S.flags&&(Xt[0]=255&D,Xt[1]=D>>>8&255,S.check=b(S.check,Xt,2,0)),Z=D=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(X<(G=S.length)&&(G=X),G&&(S.head&&(yt=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),m.arraySet(S.head.extra,A,E,G,yt)),512&S.flags&&(S.check=b(S.check,A,G,E)),X-=G,E+=G,S.length-=G),S.length))break t;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(X===0)break t;for(G=0;yt=A[E+G++],S.head&&yt&&S.length<65536&&(S.head.name+=String.fromCharCode(yt)),yt&&G<X;);if(512&S.flags&&(S.check=b(S.check,A,G,E)),X-=G,E+=G,yt)break t}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(X===0)break t;for(G=0;yt=A[E+G++],S.head&&yt&&S.length<65536&&(S.head.comment+=String.fromCharCode(yt)),yt&&G<X;);if(512&S.flags&&(S.check=b(S.check,A,G,E)),X-=G,E+=G,yt)break t}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;Z<16;){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}if(D!==(65535&S.check)){_.msg="header crc mismatch",S.mode=30;break}Z=D=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),_.adler=S.check=0,S.mode=12;break;case 10:for(;Z<32;){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}_.adler=S.check=I(D),Z=D=0,S.mode=11;case 11:if(S.havedict===0)return _.next_out=V,_.avail_out=Q,_.next_in=E,_.avail_in=X,S.hold=D,S.bits=Z,2;_.adler=S.check=1,S.mode=12;case 12:if(x===5||x===6)break t;case 13:if(S.last){D>>>=7&Z,Z-=7&Z,S.mode=27;break}for(;Z<3;){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}switch(S.last=1&D,Z-=1,3&(D>>>=1)){case 0:S.mode=14;break;case 1:if(C(S),S.mode=20,x!==6)break;D>>>=2,Z-=2;break t;case 2:S.mode=17;break;case 3:_.msg="invalid block type",S.mode=30}D>>>=2,Z-=2;break;case 14:for(D>>>=7&Z,Z-=7&Z;Z<32;){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}if((65535&D)!=(D>>>16^65535)){_.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&D,Z=D=0,S.mode=15,x===6)break t;case 15:S.mode=16;case 16:if(G=S.length){if(X<G&&(G=X),Q<G&&(G=Q),G===0)break t;m.arraySet(B,A,E,G,V),X-=G,E+=G,Q-=G,V+=G,S.length-=G;break}S.mode=12;break;case 17:for(;Z<14;){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}if(S.nlen=257+(31&D),D>>>=5,Z-=5,S.ndist=1+(31&D),D>>>=5,Z-=5,S.ncode=4+(15&D),D>>>=4,Z-=4,286<S.nlen||30<S.ndist){_.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;Z<3;){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}S.lens[re[S.have++]]=7&D,D>>>=3,Z-=3}for(;S.have<19;)S.lens[re[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,St={bits:S.lenbits},kt=k(0,S.lens,0,19,S.lencode,0,S.work,St),S.lenbits=St.bits,kt){_.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;mt=(Lt=S.lencode[D&(1<<S.lenbits)-1])>>>16&255,pt=65535&Lt,!((ot=Lt>>>24)<=Z);){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}if(pt<16)D>>>=ot,Z-=ot,S.lens[S.have++]=pt;else{if(pt===16){for(Tt=ot+2;Z<Tt;){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}if(D>>>=ot,Z-=ot,S.have===0){_.msg="invalid bit length repeat",S.mode=30;break}yt=S.lens[S.have-1],G=3+(3&D),D>>>=2,Z-=2}else if(pt===17){for(Tt=ot+3;Z<Tt;){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}Z-=ot,yt=0,G=3+(7&(D>>>=ot)),D>>>=3,Z-=3}else{for(Tt=ot+7;Z<Tt;){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}Z-=ot,yt=0,G=11+(127&(D>>>=ot)),D>>>=7,Z-=7}if(S.have+G>S.nlen+S.ndist){_.msg="invalid bit length repeat",S.mode=30;break}for(;G--;)S.lens[S.have++]=yt}}if(S.mode===30)break;if(S.lens[256]===0){_.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,St={bits:S.lenbits},kt=k(1,S.lens,0,S.nlen,S.lencode,0,S.work,St),S.lenbits=St.bits,kt){_.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,St={bits:S.distbits},kt=k(2,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,St),S.distbits=St.bits,kt){_.msg="invalid distances set",S.mode=30;break}if(S.mode=20,x===6)break t;case 20:S.mode=21;case 21:if(6<=X&&258<=Q){_.next_out=V,_.avail_out=Q,_.next_in=E,_.avail_in=X,S.hold=D,S.bits=Z,v(_,O),V=_.next_out,B=_.output,Q=_.avail_out,E=_.next_in,A=_.input,X=_.avail_in,D=S.hold,Z=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;mt=(Lt=S.lencode[D&(1<<S.lenbits)-1])>>>16&255,pt=65535&Lt,!((ot=Lt>>>24)<=Z);){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}if(mt&&!(240&mt)){for(st=ot,at=mt,vt=pt;mt=(Lt=S.lencode[vt+((D&(1<<st+at)-1)>>st)])>>>16&255,pt=65535&Lt,!(st+(ot=Lt>>>24)<=Z);){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}D>>>=st,Z-=st,S.back+=st}if(D>>>=ot,Z-=ot,S.back+=ot,S.length=pt,mt===0){S.mode=26;break}if(32&mt){S.back=-1,S.mode=12;break}if(64&mt){_.msg="invalid literal/length code",S.mode=30;break}S.extra=15&mt,S.mode=22;case 22:if(S.extra){for(Tt=S.extra;Z<Tt;){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}S.length+=D&(1<<S.extra)-1,D>>>=S.extra,Z-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;mt=(Lt=S.distcode[D&(1<<S.distbits)-1])>>>16&255,pt=65535&Lt,!((ot=Lt>>>24)<=Z);){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}if(!(240&mt)){for(st=ot,at=mt,vt=pt;mt=(Lt=S.distcode[vt+((D&(1<<st+at)-1)>>st)])>>>16&255,pt=65535&Lt,!(st+(ot=Lt>>>24)<=Z);){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}D>>>=st,Z-=st,S.back+=st}if(D>>>=ot,Z-=ot,S.back+=ot,64&mt){_.msg="invalid distance code",S.mode=30;break}S.offset=pt,S.extra=15&mt,S.mode=24;case 24:if(S.extra){for(Tt=S.extra;Z<Tt;){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}S.offset+=D&(1<<S.extra)-1,D>>>=S.extra,Z-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){_.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(Q===0)break t;if(G=O-Q,S.offset>G){if((G=S.offset-G)>S.whave&&S.sane){_.msg="invalid distance too far back",S.mode=30;break}nt=G>S.wnext?(G-=S.wnext,S.wsize-G):S.wnext-G,G>S.length&&(G=S.length),ct=S.window}else ct=B,nt=V-S.offset,G=S.length;for(Q<G&&(G=Q),Q-=G,S.length-=G;B[V++]=ct[nt++],--G;);S.length===0&&(S.mode=21);break;case 26:if(Q===0)break t;B[V++]=S.length,Q--,S.mode=21;break;case 27:if(S.wrap){for(;Z<32;){if(X===0)break t;X--,D|=A[E++]<<Z,Z+=8}if(O-=Q,_.total_out+=O,S.total+=O,O&&(_.adler=S.check=S.flags?b(S.check,B,O,V-O):y(S.check,B,O,V-O)),O=Q,(S.flags?D:I(D))!==S.check){_.msg="incorrect data check",S.mode=30;break}Z=D=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;Z<32;){if(X===0)break t;X--,D+=A[E++]<<Z,Z+=8}if(D!==(4294967295&S.total)){_.msg="incorrect length check",S.mode=30;break}Z=D=0}S.mode=29;case 29:kt=1;break t;case 30:kt=-3;break t;case 31:return-4;case 32:default:return j}return _.next_out=V,_.avail_out=Q,_.next_in=E,_.avail_in=X,S.hold=D,S.bits=Z,(S.wsize||O!==_.avail_out&&S.mode<30&&(S.mode<27||x!==4))&&w(_,_.output,_.next_out,O-_.avail_out)?(S.mode=31,-4):(L-=_.avail_in,O-=_.avail_out,_.total_in+=L,_.total_out+=O,S.total+=O,S.wrap&&O&&(_.adler=S.check=S.flags?b(S.check,B,O,_.next_out-O):y(S.check,B,O,_.next_out-O)),_.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(L==0&&O===0||x===4)&&kt===0&&(kt=-5),kt)},g.inflateEnd=function(_){if(!_||!_.state)return j;var x=_.state;return x.window&&(x.window=null),_.state=null,0},g.inflateGetHeader=function(_,x){var S;return _&&_.state&&2&(S=_.state).wrap?((S.head=x).done=!1,0):j},g.inflateSetDictionary=function(_,x){var S,A=x.length;return _&&_.state?(S=_.state).wrap!==0&&S.mode!==11?j:S.mode===11&&y(1,x,A,0)!==S.check?-3:w(_,x,A,A)?(S.mode=31,-4):(S.havedict=1,0):j},g.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(h,p,g){var m=h("../utils/common"),y=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],b=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],v=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],k=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];p.exports=function(j,I,U,P,z,q,$,F){var T,N,C,w,_,x,S,A,B,E=F.bits,V=0,X=0,Q=0,D=0,Z=0,L=0,O=0,G=0,nt=0,ct=0,ot=null,mt=0,pt=new m.Buf16(16),st=new m.Buf16(16),at=null,vt=0;for(V=0;V<=15;V++)pt[V]=0;for(X=0;X<P;X++)pt[I[U+X]]++;for(Z=E,D=15;1<=D&&pt[D]===0;D--);if(D<Z&&(Z=D),D===0)return z[q++]=20971520,z[q++]=20971520,F.bits=1,0;for(Q=1;Q<D&&pt[Q]===0;Q++);for(Z<Q&&(Z=Q),V=G=1;V<=15;V++)if(G<<=1,(G-=pt[V])<0)return-1;if(0<G&&(j===0||D!==1))return-1;for(st[1]=0,V=1;V<15;V++)st[V+1]=st[V]+pt[V];for(X=0;X<P;X++)I[U+X]!==0&&($[st[I[U+X]]++]=X);if(x=j===0?(ot=at=$,19):j===1?(ot=y,mt-=257,at=b,vt-=257,256):(ot=v,at=k,-1),V=Q,_=q,O=X=ct=0,C=-1,w=(nt=1<<(L=Z))-1,j===1&&852<nt||j===2&&592<nt)return 1;for(;;){for(S=V-O,B=$[X]<x?(A=0,$[X]):$[X]>x?(A=at[vt+$[X]],ot[mt+$[X]]):(A=96,0),T=1<<V-O,Q=N=1<<L;z[_+(ct>>O)+(N-=T)]=S<<24|A<<16|B|0,N!==0;);for(T=1<<V-1;ct&T;)T>>=1;if(T!==0?(ct&=T-1,ct+=T):ct=0,X++,--pt[V]==0){if(V===D)break;V=I[U+$[X]]}if(Z<V&&(ct&w)!==C){for(O===0&&(O=Z),_+=Q,G=1<<(L=V-O);L+O<D&&!((G-=pt[L+O])<=0);)L++,G<<=1;if(nt+=1<<L,j===1&&852<nt||j===2&&592<nt)return 1;z[C=ct&w]=Z<<24|L<<16|_-q|0}}return ct!==0&&(z[_+ct]=V-O<<24|64<<16|0),F.bits=Z,0}},{"../utils/common":41}],51:[function(h,p,g){p.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(h,p,g){var m=h("../utils/common");function y(at){for(var vt=at.length;0<=--vt;)at[vt]=0}var b=256,v=286,k=30,j=15,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],U=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(576);y(q);var $=new Array(60);y($);var F=new Array(512);y(F);var T=new Array(256);y(T);var N=new Array(29);y(N);var C,w,_,x=new Array(k);function S(at,vt,yt,kt,St){this.static_tree=at,this.extra_bits=vt,this.extra_base=yt,this.elems=kt,this.max_length=St,this.has_stree=at&&at.length}function A(at,vt){this.dyn_tree=at,this.max_code=0,this.stat_desc=vt}function B(at){return at<256?F[at]:F[256+(at>>>7)]}function E(at,vt){at.pending_buf[at.pending++]=255&vt,at.pending_buf[at.pending++]=vt>>>8&255}function V(at,vt,yt){at.bi_valid>16-yt?(at.bi_buf|=vt<<at.bi_valid&65535,E(at,at.bi_buf),at.bi_buf=vt>>16-at.bi_valid,at.bi_valid+=yt-16):(at.bi_buf|=vt<<at.bi_valid&65535,at.bi_valid+=yt)}function X(at,vt,yt){V(at,yt[2*vt],yt[2*vt+1])}function Q(at,vt){for(var yt=0;yt|=1&at,at>>>=1,yt<<=1,0<--vt;);return yt>>>1}function D(at,vt,yt){var kt,St,Tt=new Array(16),Lt=0;for(kt=1;kt<=j;kt++)Tt[kt]=Lt=Lt+yt[kt-1]<<1;for(St=0;St<=vt;St++){var Xt=at[2*St+1];Xt!==0&&(at[2*St]=Q(Tt[Xt]++,Xt))}}function Z(at){var vt;for(vt=0;vt<v;vt++)at.dyn_ltree[2*vt]=0;for(vt=0;vt<k;vt++)at.dyn_dtree[2*vt]=0;for(vt=0;vt<19;vt++)at.bl_tree[2*vt]=0;at.dyn_ltree[512]=1,at.opt_len=at.static_len=0,at.last_lit=at.matches=0}function L(at){8<at.bi_valid?E(at,at.bi_buf):0<at.bi_valid&&(at.pending_buf[at.pending++]=at.bi_buf),at.bi_buf=0,at.bi_valid=0}function O(at,vt,yt,kt){var St=2*vt,Tt=2*yt;return at[St]<at[Tt]||at[St]===at[Tt]&&kt[vt]<=kt[yt]}function G(at,vt,yt){for(var kt=at.heap[yt],St=yt<<1;St<=at.heap_len&&(St<at.heap_len&&O(vt,at.heap[St+1],at.heap[St],at.depth)&&St++,!O(vt,kt,at.heap[St],at.depth));)at.heap[yt]=at.heap[St],yt=St,St<<=1;at.heap[yt]=kt}function nt(at,vt,yt){var kt,St,Tt,Lt,Xt=0;if(at.last_lit!==0)for(;kt=at.pending_buf[at.d_buf+2*Xt]<<8|at.pending_buf[at.d_buf+2*Xt+1],St=at.pending_buf[at.l_buf+Xt],Xt++,kt===0?X(at,St,vt):(X(at,(Tt=T[St])+b+1,vt),(Lt=I[Tt])!==0&&V(at,St-=N[Tt],Lt),X(at,Tt=B(--kt),yt),(Lt=U[Tt])!==0&&V(at,kt-=x[Tt],Lt)),Xt<at.last_lit;);X(at,256,vt)}function ct(at,vt){var yt,kt,St,Tt=vt.dyn_tree,Lt=vt.stat_desc.static_tree,Xt=vt.stat_desc.has_stree,re=vt.stat_desc.elems,ue=-1;for(at.heap_len=0,at.heap_max=573,yt=0;yt<re;yt++)Tt[2*yt]!==0?(at.heap[++at.heap_len]=ue=yt,at.depth[yt]=0):Tt[2*yt+1]=0;for(;at.heap_len<2;)Tt[2*(St=at.heap[++at.heap_len]=ue<2?++ue:0)]=1,at.depth[St]=0,at.opt_len--,Xt&&(at.static_len-=Lt[2*St+1]);for(vt.max_code=ue,yt=at.heap_len>>1;1<=yt;yt--)G(at,Tt,yt);for(St=re;yt=at.heap[1],at.heap[1]=at.heap[at.heap_len--],G(at,Tt,1),kt=at.heap[1],at.heap[--at.heap_max]=yt,at.heap[--at.heap_max]=kt,Tt[2*St]=Tt[2*yt]+Tt[2*kt],at.depth[St]=(at.depth[yt]>=at.depth[kt]?at.depth[yt]:at.depth[kt])+1,Tt[2*yt+1]=Tt[2*kt+1]=St,at.heap[1]=St++,G(at,Tt,1),2<=at.heap_len;);at.heap[--at.heap_max]=at.heap[1],function(ce,de){var ve,Te,ie,ze,me,ke,we=de.dyn_tree,ne=de.max_code,Be=de.stat_desc.static_tree,$e=de.stat_desc.has_stree,Or=de.stat_desc.extra_bits,te=de.stat_desc.extra_base,Sr=de.stat_desc.max_length,br=0;for(ze=0;ze<=j;ze++)ce.bl_count[ze]=0;for(we[2*ce.heap[ce.heap_max]+1]=0,ve=ce.heap_max+1;ve<573;ve++)Sr<(ze=we[2*we[2*(Te=ce.heap[ve])+1]+1]+1)&&(ze=Sr,br++),we[2*Te+1]=ze,ne<Te||(ce.bl_count[ze]++,me=0,te<=Te&&(me=Or[Te-te]),ke=we[2*Te],ce.opt_len+=ke*(ze+me),$e&&(ce.static_len+=ke*(Be[2*Te+1]+me)));if(br!==0){do{for(ze=Sr-1;ce.bl_count[ze]===0;)ze--;ce.bl_count[ze]--,ce.bl_count[ze+1]+=2,ce.bl_count[Sr]--,br-=2}while(0<br);for(ze=Sr;ze!==0;ze--)for(Te=ce.bl_count[ze];Te!==0;)ne<(ie=ce.heap[--ve])||(we[2*ie+1]!==ze&&(ce.opt_len+=(ze-we[2*ie+1])*we[2*ie],we[2*ie+1]=ze),Te--)}}(at,vt),D(Tt,ue,at.bl_count)}function ot(at,vt,yt){var kt,St,Tt=-1,Lt=vt[1],Xt=0,re=7,ue=4;for(Lt===0&&(re=138,ue=3),vt[2*(yt+1)+1]=65535,kt=0;kt<=yt;kt++)St=Lt,Lt=vt[2*(kt+1)+1],++Xt<re&&St===Lt||(Xt<ue?at.bl_tree[2*St]+=Xt:St!==0?(St!==Tt&&at.bl_tree[2*St]++,at.bl_tree[32]++):Xt<=10?at.bl_tree[34]++:at.bl_tree[36]++,Tt=St,ue=(Xt=0)===Lt?(re=138,3):St===Lt?(re=6,3):(re=7,4))}function mt(at,vt,yt){var kt,St,Tt=-1,Lt=vt[1],Xt=0,re=7,ue=4;for(Lt===0&&(re=138,ue=3),kt=0;kt<=yt;kt++)if(St=Lt,Lt=vt[2*(kt+1)+1],!(++Xt<re&&St===Lt)){if(Xt<ue)for(;X(at,St,at.bl_tree),--Xt!=0;);else St!==0?(St!==Tt&&(X(at,St,at.bl_tree),Xt--),X(at,16,at.bl_tree),V(at,Xt-3,2)):Xt<=10?(X(at,17,at.bl_tree),V(at,Xt-3,3)):(X(at,18,at.bl_tree),V(at,Xt-11,7));Tt=St,ue=(Xt=0)===Lt?(re=138,3):St===Lt?(re=6,3):(re=7,4)}}y(x);var pt=!1;function st(at,vt,yt,kt){V(at,0+(kt?1:0),3),function(St,Tt,Lt,Xt){L(St),E(St,Lt),E(St,~Lt),m.arraySet(St.pending_buf,St.window,Tt,Lt,St.pending),St.pending+=Lt}(at,vt,yt)}g._tr_init=function(at){pt||(function(){var vt,yt,kt,St,Tt,Lt=new Array(16);for(St=kt=0;St<28;St++)for(N[St]=kt,vt=0;vt<1<<I[St];vt++)T[kt++]=St;for(T[kt-1]=St,St=Tt=0;St<16;St++)for(x[St]=Tt,vt=0;vt<1<<U[St];vt++)F[Tt++]=St;for(Tt>>=7;St<k;St++)for(x[St]=Tt<<7,vt=0;vt<1<<U[St]-7;vt++)F[256+Tt++]=St;for(yt=0;yt<=j;yt++)Lt[yt]=0;for(vt=0;vt<=143;)q[2*vt+1]=8,vt++,Lt[8]++;for(;vt<=255;)q[2*vt+1]=9,vt++,Lt[9]++;for(;vt<=279;)q[2*vt+1]=7,vt++,Lt[7]++;for(;vt<=287;)q[2*vt+1]=8,vt++,Lt[8]++;for(D(q,287,Lt),vt=0;vt<k;vt++)$[2*vt+1]=5,$[2*vt]=Q(vt,5);C=new S(q,I,257,v,j),w=new S($,U,0,k,j),_=new S(new Array(0),P,0,19,7)}(),pt=!0),at.l_desc=new A(at.dyn_ltree,C),at.d_desc=new A(at.dyn_dtree,w),at.bl_desc=new A(at.bl_tree,_),at.bi_buf=0,at.bi_valid=0,Z(at)},g._tr_stored_block=st,g._tr_flush_block=function(at,vt,yt,kt){var St,Tt,Lt=0;0<at.level?(at.strm.data_type===2&&(at.strm.data_type=function(Xt){var re,ue=4093624447;for(re=0;re<=31;re++,ue>>>=1)if(1&ue&&Xt.dyn_ltree[2*re]!==0)return 0;if(Xt.dyn_ltree[18]!==0||Xt.dyn_ltree[20]!==0||Xt.dyn_ltree[26]!==0)return 1;for(re=32;re<b;re++)if(Xt.dyn_ltree[2*re]!==0)return 1;return 0}(at)),ct(at,at.l_desc),ct(at,at.d_desc),Lt=function(Xt){var re;for(ot(Xt,Xt.dyn_ltree,Xt.l_desc.max_code),ot(Xt,Xt.dyn_dtree,Xt.d_desc.max_code),ct(Xt,Xt.bl_desc),re=18;3<=re&&Xt.bl_tree[2*z[re]+1]===0;re--);return Xt.opt_len+=3*(re+1)+5+5+4,re}(at),St=at.opt_len+3+7>>>3,(Tt=at.static_len+3+7>>>3)<=St&&(St=Tt)):St=Tt=yt+5,yt+4<=St&&vt!==-1?st(at,vt,yt,kt):at.strategy===4||Tt===St?(V(at,2+(kt?1:0),3),nt(at,q,$)):(V(at,4+(kt?1:0),3),function(Xt,re,ue,ce){var de;for(V(Xt,re-257,5),V(Xt,ue-1,5),V(Xt,ce-4,4),de=0;de<ce;de++)V(Xt,Xt.bl_tree[2*z[de]+1],3);mt(Xt,Xt.dyn_ltree,re-1),mt(Xt,Xt.dyn_dtree,ue-1)}(at,at.l_desc.max_code+1,at.d_desc.max_code+1,Lt+1),nt(at,at.dyn_ltree,at.dyn_dtree)),Z(at),kt&&L(at)},g._tr_tally=function(at,vt,yt){return at.pending_buf[at.d_buf+2*at.last_lit]=vt>>>8&255,at.pending_buf[at.d_buf+2*at.last_lit+1]=255&vt,at.pending_buf[at.l_buf+at.last_lit]=255&yt,at.last_lit++,vt===0?at.dyn_ltree[2*yt]++:(at.matches++,vt--,at.dyn_ltree[2*(T[yt]+b+1)]++,at.dyn_dtree[2*B(vt)]++),at.last_lit===at.lit_bufsize-1},g._tr_align=function(at){V(at,2,3),X(at,256,q),function(vt){vt.bi_valid===16?(E(vt,vt.bi_buf),vt.bi_buf=0,vt.bi_valid=0):8<=vt.bi_valid&&(vt.pending_buf[vt.pending++]=255&vt.bi_buf,vt.bi_buf>>=8,vt.bi_valid-=8)}(at)}},{"../utils/common":41}],53:[function(h,p,g){p.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(h,p,g){(function(m){(function(y,b){if(!y.setImmediate){var v,k,j,I,U=1,P={},z=!1,q=y.document,$=Object.getPrototypeOf&&Object.getPrototypeOf(y);$=$&&$.setTimeout?$:y,v={}.toString.call(y.process)==="[object process]"?function(C){i.nextTick(function(){T(C)})}:function(){if(y.postMessage&&!y.importScripts){var C=!0,w=y.onmessage;return y.onmessage=function(){C=!1},y.postMessage("","*"),y.onmessage=w,C}}()?(I="setImmediate$"+Math.random()+"$",y.addEventListener?y.addEventListener("message",N,!1):y.attachEvent("onmessage",N),function(C){y.postMessage(I+C,"*")}):y.MessageChannel?((j=new MessageChannel).port1.onmessage=function(C){T(C.data)},function(C){j.port2.postMessage(C)}):q&&"onreadystatechange"in q.createElement("script")?(k=q.documentElement,function(C){var w=q.createElement("script");w.onreadystatechange=function(){T(C),w.onreadystatechange=null,k.removeChild(w),w=null},k.appendChild(w)}):function(C){setTimeout(T,0,C)},$.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var w=new Array(arguments.length-1),_=0;_<w.length;_++)w[_]=arguments[_+1];var x={callback:C,args:w};return P[U]=x,v(U),U++},$.clearImmediate=F}function F(C){delete P[C]}function T(C){if(z)setTimeout(T,0,C);else{var w=P[C];if(w){z=!0;try{(function(_){var x=_.callback,S=_.args;switch(S.length){case 0:x();break;case 1:x(S[0]);break;case 2:x(S[0],S[1]);break;case 3:x(S[0],S[1],S[2]);break;default:x.apply(void 0,S)}})(w)}finally{F(C),z=!1}}}}function N(C){C.source===y&&typeof C.data=="string"&&C.data.indexOf(I)===0&&T(+C.data.slice(I.length))}})(typeof self>"u"?m===void 0?this:m:self)}).call(this,o!==void 0?o:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}).call(this)}).call(this,t("_process"),typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],t("timers").setImmediate)},{_process:467,buffer:220,timers:523}],442:[function(t,r,s){(function(i){(function(){var o=/[\\^$.*+?()[\]{}|]/g,u=RegExp(o.source),l=typeof i=="object"&&i&&i.Object===Object&&i,a=typeof self=="object"&&self&&self.Object===Object&&self,c=l||a||Function("return this")(),d=Object.prototype.toString,f=c.Symbol,h=f?f.prototype:void 0,p=h?h.toString:void 0;function g(m){if(typeof m=="string")return m;if(function(b){return typeof b=="symbol"||function(v){return!!v&&typeof v=="object"}(b)&&d.call(b)=="[object Symbol]"}(m))return p?p.call(m):"";var y=m+"";return y=="0"&&1/m==-1/0?"-0":y}r.exports=function(m){var y;return(m=(y=m)==null?"":g(y))&&u.test(m)?m.replace(o,"\\$&"):m}}).call(this)}).call(this,typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],443:[function(t,r,s){(function(i){(function(){var o="[object Arguments]",u="[object Map]",l="[object Object]",a="[object Set]",c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/,f=/^\./,h=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,g=/^\[object .+?Constructor\]$/,m=/^(?:0|[1-9]\d*)$/,y={};y["[object Float32Array]"]=y["[object Float64Array]"]=y["[object Int8Array]"]=y["[object Int16Array]"]=y["[object Int32Array]"]=y["[object Uint8Array]"]=y["[object Uint8ClampedArray]"]=y["[object Uint16Array]"]=y["[object Uint32Array]"]=!0,y[o]=y["[object Array]"]=y["[object ArrayBuffer]"]=y["[object Boolean]"]=y["[object DataView]"]=y["[object Date]"]=y["[object Error]"]=y["[object Function]"]=y[u]=y["[object Number]"]=y[l]=y["[object RegExp]"]=y[a]=y["[object String]"]=y["[object WeakMap]"]=!1;var b=typeof i=="object"&&i&&i.Object===Object&&i,v=typeof self=="object"&&self&&self.Object===Object&&self,k=b||v||Function("return this")(),j=typeof s=="object"&&s&&!s.nodeType&&s,I=j&&typeof r=="object"&&r&&!r.nodeType&&r,U=I&&I.exports===j&&b.process,P=function(){try{return U&&U.binding("util")}catch{}}(),z=P&&P.isTypedArray;function q(xt,Yt,he,ge){for(var Ze=-1,je=xt?xt.length:0;++Ze<je;){var Pe=xt[Ze];Yt(ge,Pe,he(Pe),xt)}return ge}function $(xt,Yt){for(var he=-1,ge=xt?xt.length:0;++he<ge;)if(Yt(xt[he],he,xt))return!0;return!1}function F(xt){var Yt=!1;if(xt!=null&&typeof xt.toString!="function")try{Yt=!!(xt+"")}catch{}return Yt}function T(xt){var Yt=-1,he=Array(xt.size);return xt.forEach(function(ge,Ze){he[++Yt]=[Ze,ge]}),he}function N(xt){var Yt=-1,he=Array(xt.size);return xt.forEach(function(ge){he[++Yt]=ge}),he}var C,w,_,x=Array.prototype,S=Function.prototype,A=Object.prototype,B=k["__core-js_shared__"],E=(C=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",V=S.toString,X=A.hasOwnProperty,Q=A.toString,D=RegExp("^"+V.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Z=k.Symbol,L=k.Uint8Array,O=A.propertyIsEnumerable,G=x.splice,nt=(w=Object.keys,_=Object,function(xt){return w(_(xt))}),ct=cr(k,"DataView"),ot=cr(k,"Map"),mt=cr(k,"Promise"),pt=cr(k,"Set"),st=cr(k,"WeakMap"),at=cr(Object,"create"),vt=qt(ct),yt=qt(ot),kt=qt(mt),St=qt(pt),Tt=qt(st),Lt=Z?Z.prototype:void 0,Xt=Lt?Lt.valueOf:void 0,re=Lt?Lt.toString:void 0;function ue(xt){var Yt=-1,he=xt?xt.length:0;for(this.clear();++Yt<he;){var ge=xt[Yt];this.set(ge[0],ge[1])}}function ce(xt){var Yt=-1,he=xt?xt.length:0;for(this.clear();++Yt<he;){var ge=xt[Yt];this.set(ge[0],ge[1])}}function de(xt){var Yt=-1,he=xt?xt.length:0;for(this.clear();++Yt<he;){var ge=xt[Yt];this.set(ge[0],ge[1])}}function ve(xt){var Yt=-1,he=xt?xt.length:0;for(this.__data__=new de;++Yt<he;)this.add(xt[Yt])}function Te(xt){this.__data__=new ce(xt)}function ie(xt,Yt){var he=Ke(xt)||Je(xt)?function(Pe,Ar){for(var wr=-1,kr=Array(Pe);++wr<Pe;)kr[wr]=Ar(wr);return kr}(xt.length,String):[],ge=he.length,Ze=!!ge;for(var je in xt)!X.call(xt,je)||Ze&&(je=="length"||jr(je,ge))||he.push(je);return he}function ze(xt,Yt){for(var he=xt.length;he--;)if(Oe(xt[he][0],Yt))return he;return-1}function me(xt,Yt,he,ge){return we(xt,function(Ze,je,Pe){Yt(ge,Ze,he(Ze),Pe)}),ge}ue.prototype.clear=function(){this.__data__=at?at(null):{}},ue.prototype.delete=function(xt){return this.has(xt)&&delete this.__data__[xt]},ue.prototype.get=function(xt){var Yt=this.__data__;if(at){var he=Yt[xt];return he==="__lodash_hash_undefined__"?void 0:he}return X.call(Yt,xt)?Yt[xt]:void 0},ue.prototype.has=function(xt){var Yt=this.__data__;return at?Yt[xt]!==void 0:X.call(Yt,xt)},ue.prototype.set=function(xt,Yt){return this.__data__[xt]=at&&Yt===void 0?"__lodash_hash_undefined__":Yt,this},ce.prototype.clear=function(){this.__data__=[]},ce.prototype.delete=function(xt){var Yt=this.__data__,he=ze(Yt,xt);return!(he<0)&&(he==Yt.length-1?Yt.pop():G.call(Yt,he,1),!0)},ce.prototype.get=function(xt){var Yt=this.__data__,he=ze(Yt,xt);return he<0?void 0:Yt[he][1]},ce.prototype.has=function(xt){return ze(this.__data__,xt)>-1},ce.prototype.set=function(xt,Yt){var he=this.__data__,ge=ze(he,xt);return ge<0?he.push([xt,Yt]):he[ge][1]=Yt,this},de.prototype.clear=function(){this.__data__={hash:new ue,map:new(ot||ce),string:new ue}},de.prototype.delete=function(xt){return er(this,xt).delete(xt)},de.prototype.get=function(xt){return er(this,xt).get(xt)},de.prototype.has=function(xt){return er(this,xt).has(xt)},de.prototype.set=function(xt,Yt){return er(this,xt).set(xt,Yt),this},ve.prototype.add=ve.prototype.push=function(xt){return this.__data__.set(xt,"__lodash_hash_undefined__"),this},ve.prototype.has=function(xt){return this.__data__.has(xt)},Te.prototype.clear=function(){this.__data__=new ce},Te.prototype.delete=function(xt){return this.__data__.delete(xt)},Te.prototype.get=function(xt){return this.__data__.get(xt)},Te.prototype.has=function(xt){return this.__data__.has(xt)},Te.prototype.set=function(xt,Yt){var he=this.__data__;if(he instanceof ce){var ge=he.__data__;if(!ot||ge.length<199)return ge.push([xt,Yt]),this;he=this.__data__=new de(ge)}return he.set(xt,Yt),this};var ke,we=(ke=function(xt,Yt){return xt&&ne(xt,Yt,Qr)},function(xt,Yt){if(xt==null)return xt;if(!He(xt))return ke(xt,Yt);for(var he=xt.length,ge=-1,Ze=Object(xt);++ge<he&&Yt(Ze[ge],ge,Ze)!==!1;);return xt}),ne=function(xt){return function(Yt,he,ge){for(var Ze=-1,je=Object(Yt),Pe=ge(Yt),Ar=Pe.length;Ar--;){var wr=Pe[++Ze];if(he(je[wr],wr,je)===!1)break}return Yt}}();function Be(xt,Yt){for(var he=0,ge=(Yt=rr(Yt,xt)?[Yt]:Ye(Yt)).length;xt!=null&&he<ge;)xt=xt[Et(Yt[he++])];return he&&he==ge?xt:void 0}function $e(xt,Yt){return xt!=null&&Yt in Object(xt)}function Or(xt,Yt,he,ge,Ze){return xt===Yt||(xt==null||Yt==null||!fr(xt)&&!Xr(Yt)?xt!=xt&&Yt!=Yt:function(je,Pe,Ar,wr,kr,ur){var Qe=Ke(je),gr=Ke(Pe),Hr="[object Array]",Yr="[object Array]";Qe||(Hr=(Hr=mr(je))==o?l:Hr),gr||(Yr=(Yr=mr(Pe))==o?l:Yr);var rn=Hr==l&&!F(je),Tn=Yr==l&&!F(Pe),li=Hr==Yr;if(li&&!rn)return ur||(ur=new Te),Qe||en(je)?Ve(je,Pe,Ar,wr,kr,ur):function(Dr,Ir,bi,Ei,Os,Ln,ci){switch(bi){case"[object DataView]":if(Dr.byteLength!=Ir.byteLength||Dr.byteOffset!=Ir.byteOffset)return!1;Dr=Dr.buffer,Ir=Ir.buffer;case"[object ArrayBuffer]":return!(Dr.byteLength!=Ir.byteLength||!Ei(new L(Dr),new L(Ir)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Oe(+Dr,+Ir);case"[object Error]":return Dr.name==Ir.name&&Dr.message==Ir.message;case"[object RegExp]":case"[object String]":return Dr==Ir+"";case u:var rs=T;case a:var Fr=2&Ln;if(rs||(rs=N),Dr.size!=Ir.size&&!Fr)return!1;var eo=ci.get(Dr);if(eo)return eo==Ir;Ln|=1,ci.set(Dr,Ir);var hi=Ve(rs(Dr),rs(Ir),Ei,Os,Ln,ci);return ci.delete(Dr),hi;case"[object Symbol]":if(Xt)return Xt.call(Dr)==Xt.call(Ir)}return!1}(je,Pe,Hr,Ar,wr,kr,ur);if(!(2&kr)){var Pn=rn&&X.call(je,"__wrapped__"),zr=Tn&&X.call(Pe,"__wrapped__");if(Pn||zr){var fn=Pn?je.value():je,ui=zr?Pe.value():Pe;return ur||(ur=new Te),Ar(fn,ui,wr,kr,ur)}}return li?(ur||(ur=new Te),function(Dr,Ir,bi,Ei,Os,Ln){var ci=2&Os,rs=Qr(Dr),Fr=rs.length,eo=Qr(Ir).length;if(Fr!=eo&&!ci)return!1;for(var hi=Fr;hi--;){var vi=rs[hi];if(!(ci?vi in Ir:X.call(Ir,vi)))return!1}var En=Ln.get(Dr);if(En&&Ln.get(Ir))return En==Ir;var ji=!0;Ln.set(Dr,Ir),Ln.set(Ir,Dr);for(var xn=ci;++hi<Fr;){vi=rs[hi];var wi=Dr[vi],Ps=Ir[vi];if(Ei)var vr=ci?Ei(Ps,wi,vi,Ir,Dr,Ln):Ei(wi,Ps,vi,Dr,Ir,Ln);if(!(vr===void 0?wi===Ps||bi(wi,Ps,Ei,Os,Ln):vr)){ji=!1;break}xn||(xn=vi=="constructor")}if(ji&&!xn){var dn=Dr.constructor,ei=Ir.constructor;dn==ei||!("constructor"in Dr)||!("constructor"in Ir)||typeof dn=="function"&&dn instanceof dn&&typeof ei=="function"&&ei instanceof ei||(ji=!1)}return Ln.delete(Dr),Ln.delete(Ir),ji}(je,Pe,Ar,wr,kr,ur)):!1}(xt,Yt,Or,he,ge,Ze))}function te(xt){return!(!fr(xt)||function(Yt){return!!E&&E in Yt}(xt))&&(hr(xt)||F(xt)?D:g).test(qt(xt))}function Sr(xt){return typeof xt=="function"?xt:xt==null?Lr:typeof xt=="object"?Ke(xt)?function(ge,Ze){return rr(ge)&&Fe(Ze)?Nr(Et(ge),Ze):function(je){var Pe=function(Ar,wr,kr){var ur=Ar==null?void 0:Be(Ar,wr);return ur===void 0?kr:ur}(je,ge);return Pe===void 0&&Pe===Ze?function(Ar,wr){return Ar!=null&&function(kr,ur,Qe){ur=rr(ur,kr)?[ur]:Ye(ur);for(var gr,Hr=-1,Yr=ur.length;++Hr<Yr;){var rn=Et(ur[Hr]);if(!(gr=kr!=null&&Qe(kr,rn)))break;kr=kr[rn]}return gr||!!(Yr=kr?kr.length:0)&&lr(Yr)&&jr(rn,Yr)&&(Ke(kr)||Je(kr))}(Ar,wr,$e)}(je,ge):Or(Ze,Pe,void 0,3)}}(xt[0],xt[1]):function(ge){var Ze=function(je){for(var Pe=Qr(je),Ar=Pe.length;Ar--;){var wr=Pe[Ar],kr=je[wr];Pe[Ar]=[wr,kr,Fe(kr)]}return Pe}(ge);return Ze.length==1&&Ze[0][2]?Nr(Ze[0][0],Ze[0][1]):function(je){return je===ge||function(Pe,Ar,wr,kr){var ur=wr.length,Qe=ur;if(Pe==null)return!Qe;for(Pe=Object(Pe);ur--;){var gr=wr[ur];if(gr[2]?gr[1]!==Pe[gr[0]]:!(gr[0]in Pe))return!1}for(;++ur<Qe;){var Hr=(gr=wr[ur])[0],Yr=Pe[Hr],rn=gr[1];if(gr[2]){if(Yr===void 0&&!(Hr in Pe))return!1}else{var Tn=new Te,li;if(!(li===void 0?Or(rn,Yr,kr,3,Tn):li))return!1}}return!0}(je,ge,Ze)}}(xt):rr(Yt=xt)?(he=Et(Yt),function(ge){return ge==null?void 0:ge[he]}):function(ge){return function(Ze){return Be(Ze,ge)}}(Yt);var Yt,he}function br(xt){if(he=(Yt=xt)&&Yt.constructor,ge=typeof he=="function"&&he.prototype||A,Yt!==ge)return nt(xt);var Yt,he,ge,Ze=[];for(var je in Object(xt))X.call(xt,je)&&je!="constructor"&&Ze.push(je);return Ze}function Ye(xt){return Ke(xt)?xt:Ue(xt)}function Ve(xt,Yt,he,ge,Ze,je){var Pe=2&Ze,Ar=xt.length,wr=Yt.length;if(Ar!=wr&&!(Pe&&wr>Ar))return!1;var kr=je.get(xt);if(kr&&je.get(Yt))return kr==Yt;var ur=-1,Qe=!0,gr=1&Ze?new ve:void 0;for(je.set(xt,Yt),je.set(Yt,xt);++ur<Ar;){var Hr=xt[ur],Yr=Yt[ur];if(ge)var rn=Pe?ge(Yr,Hr,ur,Yt,xt,je):ge(Hr,Yr,ur,xt,Yt,je);if(rn!==void 0){if(rn)continue;Qe=!1;break}if(gr){if(!$(Yt,function(Tn,li){if(!gr.has(li)&&(Hr===Tn||he(Hr,Tn,ge,Ze,je)))return gr.add(li)})){Qe=!1;break}}else if(Hr!==Yr&&!he(Hr,Yr,ge,Ze,je)){Qe=!1;break}}return je.delete(xt),je.delete(Yt),Qe}function er(xt,Yt){var he,ge,Ze=xt.__data__;return((ge=typeof(he=Yt))=="string"||ge=="number"||ge=="symbol"||ge=="boolean"?he!=="__proto__":he===null)?Ze[typeof Yt=="string"?"string":"hash"]:Ze.map}function cr(xt,Yt){var he=function(ge,Ze){return ge==null?void 0:ge[Ze]}(xt,Yt);return te(he)?he:void 0}var mr=function(xt){return Q.call(xt)};function jr(xt,Yt){return!!(Yt=Yt??9007199254740991)&&(typeof xt=="number"||m.test(xt))&&xt>-1&&xt%1==0&&xt<Yt}function rr(xt,Yt){if(Ke(xt))return!1;var he=typeof xt;return!(he!="number"&&he!="symbol"&&he!="boolean"&&xt!=null&&!Rr(xt))||d.test(xt)||!c.test(xt)||Yt!=null&&xt in Object(Yt)}function Fe(xt){return xt==xt&&!fr(xt)}function Nr(xt,Yt){return function(he){return he!=null&&he[xt]===Yt&&(Yt!==void 0||xt in Object(he))}}(ct&&mr(new ct(new ArrayBuffer(1)))!="[object DataView]"||ot&&mr(new ot)!=u||mt&&mr(mt.resolve())!="[object Promise]"||pt&&mr(new pt)!=a||st&&mr(new st)!="[object WeakMap]")&&(mr=function(xt){var Yt=Q.call(xt),he=Yt==l?xt.constructor:void 0,ge=he?qt(he):void 0;if(ge)switch(ge){case vt:return"[object DataView]";case yt:return u;case kt:return"[object Promise]";case St:return a;case Tt:return"[object WeakMap]"}return Yt});var Ue=sr(function(xt){var Yt;xt=(Yt=xt)==null?"":function(ge){if(typeof ge=="string")return ge;if(Rr(ge))return re?re.call(ge):"";var Ze=ge+"";return Ze=="0"&&1/ge==-1/0?"-0":Ze}(Yt);var he=[];return f.test(xt)&&he.push(""),xt.replace(h,function(ge,Ze,je,Pe){he.push(je?Pe.replace(p,"$1"):Ze||ge)}),he});function Et(xt){if(typeof xt=="string"||Rr(xt))return xt;var Yt=xt+"";return Yt=="0"&&1/xt==-1/0?"-0":Yt}function qt(xt){if(xt!=null){try{return V.call(xt)}catch{}try{return xt+""}catch{}}return""}var ee,Ce=(ee=function(xt,Yt,he){X.call(xt,he)?xt[he].push(Yt):xt[he]=[Yt]},function(xt,Yt){var he=Ke(xt)?q:me,ge={};return he(xt,ee,Sr(Yt),ge)});function sr(xt,Yt){if(typeof xt!="function"||Yt&&typeof Yt!="function")throw new TypeError("Expected a function");var he=function(){var ge=arguments,Ze=Yt?Yt.apply(this,ge):ge[0],je=he.cache;if(je.has(Ze))return je.get(Ze);var Pe=xt.apply(this,ge);return he.cache=je.set(Ze,Pe),Pe};return he.cache=new(sr.Cache||de),he}function Oe(xt,Yt){return xt===Yt||xt!=xt&&Yt!=Yt}function Je(xt){return function(Yt){return Xr(Yt)&&He(Yt)}(xt)&&X.call(xt,"callee")&&(!O.call(xt,"callee")||Q.call(xt)==o)}sr.Cache=de;var Ke=Array.isArray;function He(xt){return xt!=null&&lr(xt.length)&&!hr(xt)}function hr(xt){var Yt=fr(xt)?Q.call(xt):"";return Yt=="[object Function]"||Yt=="[object GeneratorFunction]"}function lr(xt){return typeof xt=="number"&&xt>-1&&xt%1==0&&xt<=9007199254740991}function fr(xt){var Yt=typeof xt;return!!xt&&(Yt=="object"||Yt=="function")}function Xr(xt){return!!xt&&typeof xt=="object"}function Rr(xt){return typeof xt=="symbol"||Xr(xt)&&Q.call(xt)=="[object Symbol]"}var en=z?function(xt){return function(Yt){return xt(Yt)}}(z):function(xt){return Xr(xt)&&lr(xt.length)&&!!y[Q.call(xt)]};function Qr(xt){return He(xt)?ie(xt):br(xt)}function Lr(xt){return xt}r.exports=Ce}).call(this)}).call(this,typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],444:[function(t,r,s){var i=Object.prototype.toString;r.exports=function(o){return o===!0||o===!1||function(u){return!!u&&typeof u=="object"}(o)&&i.call(o)=="[object Boolean]"}},{}],445:[function(t,r,s){(function(i){(function(){var o="[object Arguments]",u="[object Map]",l="[object Object]",a="[object Set]",c=/^\[object .+?Constructor\]$/,d=/^(?:0|[1-9]\d*)$/,f={};f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f[o]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object Boolean]"]=f["[object DataView]"]=f["[object Date]"]=f["[object Error]"]=f["[object Function]"]=f[u]=f["[object Number]"]=f[l]=f["[object RegExp]"]=f[a]=f["[object String]"]=f["[object WeakMap]"]=!1;var h=typeof i=="object"&&i&&i.Object===Object&&i,p=typeof self=="object"&&self&&self.Object===Object&&self,g=h||p||Function("return this")(),m=typeof s=="object"&&s&&!s.nodeType&&s,y=m&&typeof r=="object"&&r&&!r.nodeType&&r,b=y&&y.exports===m,v=b&&h.process,k=function(){try{return v&&v.binding&&v.binding("util")}catch{}}(),j=k&&k.isTypedArray;function I(Et,qt){for(var ee=-1,Ce=Et==null?0:Et.length;++ee<Ce;)if(qt(Et[ee],ee,Et))return!0;return!1}function U(Et){var qt=-1,ee=Array(Et.size);return Et.forEach(function(Ce,sr){ee[++qt]=[sr,Ce]}),ee}function P(Et){var qt=-1,ee=Array(Et.size);return Et.forEach(function(Ce){ee[++qt]=Ce}),ee}var z,q,$,F=Array.prototype,T=Function.prototype,N=Object.prototype,C=g["__core-js_shared__"],w=T.toString,_=N.hasOwnProperty,x=(z=/[^.]+$/.exec(C&&C.keys&&C.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"",S=N.toString,A=RegExp("^"+w.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=b?g.Buffer:void 0,E=g.Symbol,V=g.Uint8Array,X=N.propertyIsEnumerable,Q=F.splice,D=E?E.toStringTag:void 0,Z=Object.getOwnPropertySymbols,L=B?B.isBuffer:void 0,O=(q=Object.keys,$=Object,function(Et){return q($(Et))}),G=$e(g,"DataView"),nt=$e(g,"Map"),ct=$e(g,"Promise"),ot=$e(g,"Set"),mt=$e(g,"WeakMap"),pt=$e(Object,"create"),st=br(G),at=br(nt),vt=br(ct),yt=br(ot),kt=br(mt),St=E?E.prototype:void 0,Tt=St?St.valueOf:void 0;function Lt(Et){var qt=-1,ee=Et==null?0:Et.length;for(this.clear();++qt<ee;){var Ce=Et[qt];this.set(Ce[0],Ce[1])}}function Xt(Et){var qt=-1,ee=Et==null?0:Et.length;for(this.clear();++qt<ee;){var Ce=Et[qt];this.set(Ce[0],Ce[1])}}function re(Et){var qt=-1,ee=Et==null?0:Et.length;for(this.clear();++qt<ee;){var Ce=Et[qt];this.set(Ce[0],Ce[1])}}function ue(Et){var qt=-1,ee=Et==null?0:Et.length;for(this.__data__=new re;++qt<ee;)this.add(Et[qt])}function ce(Et){var qt=this.__data__=new Xt(Et);this.size=qt.size}function de(Et,qt){var ee=er(Et),Ce=!ee&&Ve(Et),sr=!ee&&!Ce&&cr(Et),Oe=!ee&&!Ce&&!sr&&Nr(Et),Je=ee||Ce||sr||Oe,Ke=Je?function(lr,fr){for(var Xr=-1,Rr=Array(lr);++Xr<lr;)Rr[Xr]=fr(Xr);return Rr}(Et.length,String):[],He=Ke.length;for(var hr in Et)!_.call(Et,hr)||Je&&(hr=="length"||sr&&(hr=="offset"||hr=="parent")||Oe&&(hr=="buffer"||hr=="byteLength"||hr=="byteOffset")||Sr(hr,He))||Ke.push(hr);return Ke}function ve(Et,qt){for(var ee=Et.length;ee--;)if(Ye(Et[ee][0],qt))return ee;return-1}function Te(Et){return Et==null?Et===void 0?"[object Undefined]":"[object Null]":D&&D in Object(Et)?function(qt){var ee=_.call(qt,D),Ce=qt[D];try{qt[D]=void 0;var sr=!0}catch{}var Oe=S.call(qt);return sr&&(ee?qt[D]=Ce:delete qt[D]),Oe}(Et):function(qt){return S.call(qt)}(Et)}function ie(Et){return Fe(Et)&&Te(Et)==o}function ze(Et,qt,ee,Ce,sr){return Et===qt||(Et==null||qt==null||!Fe(Et)&&!Fe(qt)?Et!=Et&&qt!=qt:function(Oe,Je,Ke,He,hr,lr){var fr=er(Oe),Xr=er(Je),Rr=fr?"[object Array]":te(Oe),en=Xr?"[object Array]":te(Je),Qr=(Rr=Rr==o?l:Rr)==l,Lr=(en=en==o?l:en)==l,xt=Rr==en;if(xt&&cr(Oe)){if(!cr(Je))return!1;fr=!0,Qr=!1}if(xt&&!Qr)return lr||(lr=new ce),fr||Nr(Oe)?we(Oe,Je,Ke,He,hr,lr):function(je,Pe,Ar,wr,kr,ur,Qe){switch(Ar){case"[object DataView]":if(je.byteLength!=Pe.byteLength||je.byteOffset!=Pe.byteOffset)return!1;je=je.buffer,Pe=Pe.buffer;case"[object ArrayBuffer]":return!(je.byteLength!=Pe.byteLength||!ur(new V(je),new V(Pe)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ye(+je,+Pe);case"[object Error]":return je.name==Pe.name&&je.message==Pe.message;case"[object RegExp]":case"[object String]":return je==Pe+"";case u:var gr=U;case a:var Hr=1&wr;if(gr||(gr=P),je.size!=Pe.size&&!Hr)return!1;var Yr=Qe.get(je);if(Yr)return Yr==Pe;wr|=2,Qe.set(je,Pe);var rn=we(gr(je),gr(Pe),wr,kr,ur,Qe);return Qe.delete(je),rn;case"[object Symbol]":if(Tt)return Tt.call(je)==Tt.call(Pe)}return!1}(Oe,Je,Rr,Ke,He,hr,lr);if(!(1&Ke)){var Yt=Qr&&_.call(Oe,"__wrapped__"),he=Lr&&_.call(Je,"__wrapped__");if(Yt||he){var ge=Yt?Oe.value():Oe,Ze=he?Je.value():Je;return lr||(lr=new ce),hr(ge,Ze,Ke,He,lr)}}return xt?(lr||(lr=new ce),function(je,Pe,Ar,wr,kr,ur){var Qe=1&Ar,gr=ne(je),Hr=gr.length,Yr=ne(Pe).length;if(Hr!=Yr&&!Qe)return!1;for(var rn=Hr;rn--;){var Tn=gr[rn];if(!(Qe?Tn in Pe:_.call(Pe,Tn)))return!1}var li=ur.get(je);if(li&&ur.get(Pe))return li==Pe;var Pn=!0;ur.set(je,Pe),ur.set(Pe,je);for(var zr=Qe;++rn<Hr;){Tn=gr[rn];var fn=je[Tn],ui=Pe[Tn];if(wr)var Dr=Qe?wr(ui,fn,Tn,Pe,je,ur):wr(fn,ui,Tn,je,Pe,ur);if(!(Dr===void 0?fn===ui||kr(fn,ui,Ar,wr,ur):Dr)){Pn=!1;break}zr||(zr=Tn=="constructor")}if(Pn&&!zr){var Ir=je.constructor,bi=Pe.constructor;Ir==bi||!("constructor"in je)||!("constructor"in Pe)||typeof Ir=="function"&&Ir instanceof Ir&&typeof bi=="function"&&bi instanceof bi||(Pn=!1)}return ur.delete(je),ur.delete(Pe),Pn}(Oe,Je,Ke,He,hr,lr)):!1}(Et,qt,ee,Ce,ze,sr))}function me(Et){return!(!rr(Et)||function(qt){return!!x&&x in qt}(Et))&&(mr(Et)?A:c).test(br(Et))}function ke(Et){if(ee=(qt=Et)&&qt.constructor,Ce=typeof ee=="function"&&ee.prototype||N,qt!==Ce)return O(Et);var qt,ee,Ce,sr=[];for(var Oe in Object(Et))_.call(Et,Oe)&&Oe!="constructor"&&sr.push(Oe);return sr}function we(Et,qt,ee,Ce,sr,Oe){var Je=1&ee,Ke=Et.length,He=qt.length;if(Ke!=He&&!(Je&&He>Ke))return!1;var hr=Oe.get(Et);if(hr&&Oe.get(qt))return hr==qt;var lr=-1,fr=!0,Xr=2&ee?new ue:void 0;for(Oe.set(Et,qt),Oe.set(qt,Et);++lr<Ke;){var Rr=Et[lr],en=qt[lr];if(Ce)var Qr=Je?Ce(en,Rr,lr,qt,Et,Oe):Ce(Rr,en,lr,Et,qt,Oe);if(Qr!==void 0){if(Qr)continue;fr=!1;break}if(Xr){if(!I(qt,function(Lr,xt){if(Yt=xt,!Xr.has(Yt)&&(Rr===Lr||sr(Rr,Lr,ee,Ce,Oe)))return Xr.push(xt);var Yt})){fr=!1;break}}else if(Rr!==en&&!sr(Rr,en,ee,Ce,Oe)){fr=!1;break}}return Oe.delete(Et),Oe.delete(qt),fr}function ne(Et){return function(qt,ee,Ce){var sr=ee(qt);return er(qt)?sr:function(Oe,Je){for(var Ke=-1,He=Je.length,hr=Oe.length;++Ke<He;)Oe[hr+Ke]=Je[Ke];return Oe}(sr,Ce(qt))}(Et,Ue,Or)}function Be(Et,qt){var ee,Ce,sr=Et.__data__;return((Ce=typeof(ee=qt))=="string"||Ce=="number"||Ce=="symbol"||Ce=="boolean"?ee!=="__proto__":ee===null)?sr[typeof qt=="string"?"string":"hash"]:sr.map}function $e(Et,qt){var ee=function(Ce,sr){return Ce==null?void 0:Ce[sr]}(Et,qt);return me(ee)?ee:void 0}Lt.prototype.clear=function(){this.__data__=pt?pt(null):{},this.size=0},Lt.prototype.delete=function(Et){var qt=this.has(Et)&&delete this.__data__[Et];return this.size-=qt?1:0,qt},Lt.prototype.get=function(Et){var qt=this.__data__;if(pt){var ee=qt[Et];return ee==="__lodash_hash_undefined__"?void 0:ee}return _.call(qt,Et)?qt[Et]:void 0},Lt.prototype.has=function(Et){var qt=this.__data__;return pt?qt[Et]!==void 0:_.call(qt,Et)},Lt.prototype.set=function(Et,qt){var ee=this.__data__;return this.size+=this.has(Et)?0:1,ee[Et]=pt&&qt===void 0?"__lodash_hash_undefined__":qt,this},Xt.prototype.clear=function(){this.__data__=[],this.size=0},Xt.prototype.delete=function(Et){var qt=this.__data__,ee=ve(qt,Et);return!(ee<0)&&(ee==qt.length-1?qt.pop():Q.call(qt,ee,1),--this.size,!0)},Xt.prototype.get=function(Et){var qt=this.__data__,ee=ve(qt,Et);return ee<0?void 0:qt[ee][1]},Xt.prototype.has=function(Et){return ve(this.__data__,Et)>-1},Xt.prototype.set=function(Et,qt){var ee=this.__data__,Ce=ve(ee,Et);return Ce<0?(++this.size,ee.push([Et,qt])):ee[Ce][1]=qt,this},re.prototype.clear=function(){this.size=0,this.__data__={hash:new Lt,map:new(nt||Xt),string:new Lt}},re.prototype.delete=function(Et){var qt=Be(this,Et).delete(Et);return this.size-=qt?1:0,qt},re.prototype.get=function(Et){return Be(this,Et).get(Et)},re.prototype.has=function(Et){return Be(this,Et).has(Et)},re.prototype.set=function(Et,qt){var ee=Be(this,Et),Ce=ee.size;return ee.set(Et,qt),this.size+=ee.size==Ce?0:1,this},ue.prototype.add=ue.prototype.push=function(Et){return this.__data__.set(Et,"__lodash_hash_undefined__"),this},ue.prototype.has=function(Et){return this.__data__.has(Et)},ce.prototype.clear=function(){this.__data__=new Xt,this.size=0},ce.prototype.delete=function(Et){var qt=this.__data__,ee=qt.delete(Et);return this.size=qt.size,ee},ce.prototype.get=function(Et){return this.__data__.get(Et)},ce.prototype.has=function(Et){return this.__data__.has(Et)},ce.prototype.set=function(Et,qt){var ee=this.__data__;if(ee instanceof Xt){var Ce=ee.__data__;if(!nt||Ce.length<199)return Ce.push([Et,qt]),this.size=++ee.size,this;ee=this.__data__=new re(Ce)}return ee.set(Et,qt),this.size=ee.size,this};var Or=Z?function(Et){return Et==null?[]:(Et=Object(Et),function(qt,ee){for(var Ce=-1,sr=qt==null?0:qt.length,Oe=0,Je=[];++Ce<sr;){var Ke=qt[Ce];ee(Ke,Ce,qt)&&(Je[Oe++]=Ke)}return Je}(Z(Et),function(qt){return X.call(Et,qt)}))}:function(){return[]},te=Te;function Sr(Et,qt){return!!(qt=qt??9007199254740991)&&(typeof Et=="number"||d.test(Et))&&Et>-1&&Et%1==0&&Et<qt}function br(Et){if(Et!=null){try{return w.call(Et)}catch{}try{return Et+""}catch{}}return""}function Ye(Et,qt){return Et===qt||Et!=Et&&qt!=qt}(G&&te(new G(new ArrayBuffer(1)))!="[object DataView]"||nt&&te(new nt)!=u||ct&&te(ct.resolve())!="[object Promise]"||ot&&te(new ot)!=a||mt&&te(new mt)!="[object WeakMap]")&&(te=function(Et){var qt=Te(Et),ee=qt==l?Et.constructor:void 0,Ce=ee?br(ee):"";if(Ce)switch(Ce){case st:return"[object DataView]";case at:return u;case vt:return"[object Promise]";case yt:return a;case kt:return"[object WeakMap]"}return qt});var Ve=ie(function(){return arguments}())?ie:function(Et){return Fe(Et)&&_.call(Et,"callee")&&!X.call(Et,"callee")},er=Array.isArray,cr=L||function(){return!1};function mr(Et){if(!rr(Et))return!1;var qt=Te(Et);return qt=="[object Function]"||qt=="[object GeneratorFunction]"||qt=="[object AsyncFunction]"||qt=="[object Proxy]"}function jr(Et){return typeof Et=="number"&&Et>-1&&Et%1==0&&Et<=9007199254740991}function rr(Et){var qt=typeof Et;return Et!=null&&(qt=="object"||qt=="function")}function Fe(Et){return Et!=null&&typeof Et=="object"}var Nr=j?function(Et){return function(qt){return Et(qt)}}(j):function(Et){return Fe(Et)&&jr(Et.length)&&!!f[Te(Et)]};function Ue(Et){return(qt=Et)!=null&&jr(qt.length)&&!mr(qt)?de(Et):ke(Et);var qt}r.exports=function(Et,qt){return ze(Et,qt)}}).call(this)}).call(this,typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],446:[function(t,r,s){(function(i){(function(){var o=typeof i=="object"&&i&&i.Object===Object&&i,u=typeof self=="object"&&self&&self.Object===Object&&self,l=o||u||Function("return this")(),a=Object.prototype,c=a.hasOwnProperty,d=a.toString,f=l.Symbol,h=f?f.toStringTag:void 0;function p(g){return g==null?g===void 0?"[object Undefined]":"[object Null]":h&&h in Object(g)?function(m){var y=c.call(m,h),b=m[h];try{m[h]=void 0;var v=!0}catch{}var k=d.call(m);return v&&(y?m[h]=b:delete m[h]),k}(g):function(m){return d.call(m)}(g)}r.exports=function(g){if(!function(y){var b=typeof y;return y!=null&&(b=="object"||b=="function")}(g))return!1;var m=p(g);return m=="[object Function]"||m=="[object GeneratorFunction]"||m=="[object AsyncFunction]"||m=="[object Proxy]"}}).call(this)}).call(this,typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],447:[function(t,r,s){r.exports=function(i){return i==null}},{}],448:[function(t,r,s){r.exports=function(i){return i===void 0}},{}],449:[function(t,r,s){(function(i){(function(){var o=/^\[object .+?Constructor\]$/,u=typeof i=="object"&&i&&i.Object===Object&&i,l=typeof self=="object"&&self&&self.Object===Object&&self,a=u||l||Function("return this")();function c(E,V){return!!(E&&E.length)&&function(X,Q,D){if(Q!=Q)return function(O,G,nt,ct){for(var ot=O.length,mt=nt+-1;++mt<ot;)if(G(O[mt],mt,O))return mt;return-1}(X,d,D);for(var Z=D-1,L=X.length;++Z<L;)if(X[Z]===Q)return Z;return-1}(E,V,0)>-1}function d(E){return E!=E}function f(E,V){return E.has(V)}function h(E){var V=-1,X=Array(E.size);return E.forEach(function(Q){X[++V]=Q}),X}var p,g=Array.prototype,m=Function.prototype,y=Object.prototype,b=a["__core-js_shared__"],v=(p=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+p:"",k=m.toString,j=y.hasOwnProperty,I=y.toString,U=RegExp("^"+k.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=g.splice,z=A(a,"Map"),q=A(a,"Set"),$=A(Object,"create");function F(E){var V=-1,X=E?E.length:0;for(this.clear();++V<X;){var Q=E[V];this.set(Q[0],Q[1])}}function T(E){var V=-1,X=E?E.length:0;for(this.clear();++V<X;){var Q=E[V];this.set(Q[0],Q[1])}}function N(E){var V=-1,X=E?E.length:0;for(this.clear();++V<X;){var Q=E[V];this.set(Q[0],Q[1])}}function C(E){var V=-1,X=E?E.length:0;for(this.__data__=new N;++V<X;)this.add(E[V])}function w(E,V){for(var X,Q,D=E.length;D--;)if((X=E[D][0])===(Q=V)||X!=X&&Q!=Q)return D;return-1}function _(E){return!(!B(E)||(V=E,v&&v in V))&&(function(X){var Q=B(X)?I.call(X):"";return Q=="[object Function]"||Q=="[object GeneratorFunction]"}(E)||function(X){var Q=!1;if(X!=null&&typeof X.toString!="function")try{Q=!!(X+"")}catch{}return Q}(E)?U:o).test(function(X){if(X!=null){try{return k.call(X)}catch{}try{return X+""}catch{}}return""}(E));var V}F.prototype.clear=function(){this.__data__=$?$(null):{}},F.prototype.delete=function(E){return this.has(E)&&delete this.__data__[E]},F.prototype.get=function(E){var V=this.__data__;if($){var X=V[E];return X==="__lodash_hash_undefined__"?void 0:X}return j.call(V,E)?V[E]:void 0},F.prototype.has=function(E){var V=this.__data__;return $?V[E]!==void 0:j.call(V,E)},F.prototype.set=function(E,V){return this.__data__[E]=$&&V===void 0?"__lodash_hash_undefined__":V,this},T.prototype.clear=function(){this.__data__=[]},T.prototype.delete=function(E){var V=this.__data__,X=w(V,E);return!(X<0)&&(X==V.length-1?V.pop():P.call(V,X,1),!0)},T.prototype.get=function(E){var V=this.__data__,X=w(V,E);return X<0?void 0:V[X][1]},T.prototype.has=function(E){return w(this.__data__,E)>-1},T.prototype.set=function(E,V){var X=this.__data__,Q=w(X,E);return Q<0?X.push([E,V]):X[Q][1]=V,this},N.prototype.clear=function(){this.__data__={hash:new F,map:new(z||T),string:new F}},N.prototype.delete=function(E){return S(this,E).delete(E)},N.prototype.get=function(E){return S(this,E).get(E)},N.prototype.has=function(E){return S(this,E).has(E)},N.prototype.set=function(E,V){return S(this,E).set(E,V),this},C.prototype.add=C.prototype.push=function(E){return this.__data__.set(E,"__lodash_hash_undefined__"),this},C.prototype.has=function(E){return this.__data__.has(E)};var x=q&&1/h(new q([,-0]))[1]==1/0?function(E){return new q(E)}:function(){};function S(E,V){var X,Q,D=E.__data__;return((Q=typeof(X=V))=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?X!=="__proto__":X===null)?D[typeof V=="string"?"string":"hash"]:D.map}function A(E,V){var X=function(Q,D){return Q==null?void 0:Q[D]}(E,V);return _(X)?X:void 0}function B(E){var V=typeof E;return!!E&&(V=="object"||V=="function")}r.exports=function(E){return E&&E.length?function(V,X,Q){var D=-1,Z=c,L=V.length,O=!0,G=[],nt=G;if(L>=200){var ct=x(V);if(ct)return h(ct);O=!1,Z=f,nt=new C}else nt=G;t:for(;++D<L;){var ot=V[D],mt=ot;if(ot=ot!==0?ot:0,O&&mt==mt){for(var pt=nt.length;pt--;)if(nt[pt]===mt)continue t;G.push(ot)}else Z(nt,mt,Q)||(nt!==G&&nt.push(mt),G.push(ot))}return G}(E):[]}}).call(this)}).call(this,typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],450:[function(t,r,s){var i=t("inherits"),o=t("hash-base"),u=t("safe-buffer").Buffer,l=new Array(16);function a(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function c(g,m){return g<<m|g>>>32-m}function d(g,m,y,b,v,k,j){return c(g+(m&y|~m&b)+v+k|0,j)+m|0}function f(g,m,y,b,v,k,j){return c(g+(m&b|y&~b)+v+k|0,j)+m|0}function h(g,m,y,b,v,k,j){return c(g+(m^y^b)+v+k|0,j)+m|0}function p(g,m,y,b,v,k,j){return c(g+(y^(m|~b))+v+k|0,j)+m|0}i(a,o),a.prototype._update=function(){for(var g=l,m=0;m<16;++m)g[m]=this._block.readInt32LE(4*m);var y=this._a,b=this._b,v=this._c,k=this._d;y=d(y,b,v,k,g[0],3614090360,7),k=d(k,y,b,v,g[1],3905402710,12),v=d(v,k,y,b,g[2],606105819,17),b=d(b,v,k,y,g[3],3250441966,22),y=d(y,b,v,k,g[4],4118548399,7),k=d(k,y,b,v,g[5],1200080426,12),v=d(v,k,y,b,g[6],2821735955,17),b=d(b,v,k,y,g[7],4249261313,22),y=d(y,b,v,k,g[8],1770035416,7),k=d(k,y,b,v,g[9],2336552879,12),v=d(v,k,y,b,g[10],4294925233,17),b=d(b,v,k,y,g[11],2304563134,22),y=d(y,b,v,k,g[12],1804603682,7),k=d(k,y,b,v,g[13],4254626195,12),v=d(v,k,y,b,g[14],2792965006,17),y=f(y,b=d(b,v,k,y,g[15],1236535329,22),v,k,g[1],4129170786,5),k=f(k,y,b,v,g[6],3225465664,9),v=f(v,k,y,b,g[11],643717713,14),b=f(b,v,k,y,g[0],3921069994,20),y=f(y,b,v,k,g[5],3593408605,5),k=f(k,y,b,v,g[10],38016083,9),v=f(v,k,y,b,g[15],3634488961,14),b=f(b,v,k,y,g[4],3889429448,20),y=f(y,b,v,k,g[9],568446438,5),k=f(k,y,b,v,g[14],3275163606,9),v=f(v,k,y,b,g[3],4107603335,14),b=f(b,v,k,y,g[8],1163531501,20),y=f(y,b,v,k,g[13],2850285829,5),k=f(k,y,b,v,g[2],4243563512,9),v=f(v,k,y,b,g[7],1735328473,14),y=h(y,b=f(b,v,k,y,g[12],2368359562,20),v,k,g[5],4294588738,4),k=h(k,y,b,v,g[8],2272392833,11),v=h(v,k,y,b,g[11],1839030562,16),b=h(b,v,k,y,g[14],4259657740,23),y=h(y,b,v,k,g[1],2763975236,4),k=h(k,y,b,v,g[4],1272893353,11),v=h(v,k,y,b,g[7],4139469664,16),b=h(b,v,k,y,g[10],3200236656,23),y=h(y,b,v,k,g[13],681279174,4),k=h(k,y,b,v,g[0],3936430074,11),v=h(v,k,y,b,g[3],3572445317,16),b=h(b,v,k,y,g[6],76029189,23),y=h(y,b,v,k,g[9],3654602809,4),k=h(k,y,b,v,g[12],3873151461,11),v=h(v,k,y,b,g[15],530742520,16),y=p(y,b=h(b,v,k,y,g[2],3299628645,23),v,k,g[0],4096336452,6),k=p(k,y,b,v,g[7],1126891415,10),v=p(v,k,y,b,g[14],2878612391,15),b=p(b,v,k,y,g[5],4237533241,21),y=p(y,b,v,k,g[12],1700485571,6),k=p(k,y,b,v,g[3],2399980690,10),v=p(v,k,y,b,g[10],4293915773,15),b=p(b,v,k,y,g[1],2240044497,21),y=p(y,b,v,k,g[8],1873313359,6),k=p(k,y,b,v,g[15],4264355552,10),v=p(v,k,y,b,g[6],2734768916,15),b=p(b,v,k,y,g[13],1309151649,21),y=p(y,b,v,k,g[4],4149444226,6),k=p(k,y,b,v,g[11],3174756917,10),v=p(v,k,y,b,g[2],718787259,15),b=p(b,v,k,y,g[9],3951481745,21),this._a=this._a+y|0,this._b=this._b+b|0,this._c=this._c+v|0,this._d=this._d+k|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var g=u.allocUnsafe(16);return g.writeInt32LE(this._a,0),g.writeInt32LE(this._b,4),g.writeInt32LE(this._c,8),g.writeInt32LE(this._d,12),g},r.exports=a},{"hash-base":425,inherits:440,"safe-buffer":494}],451:[function(t,r,s){var i=t("bn.js"),o=t("brorand");function u(l){this.rand=l||new o.Rand}r.exports=u,u.create=function(l){return new u(l)},u.prototype._randbelow=function(l){var a=l.bitLength(),c=Math.ceil(a/8);do var d=new i(this.rand.generate(c));while(d.cmp(l)>=0);return d},u.prototype._randrange=function(l,a){var c=a.sub(l);return l.add(this._randbelow(c))},u.prototype.test=function(l,a,c){var d=l.bitLength(),f=i.mont(l),h=new i(1).toRed(f);a||(a=Math.max(1,d/48|0));for(var p=l.subn(1),g=0;!p.testn(g);g++);for(var m=l.shrn(g),y=p.toRed(f);a>0;a--){var b=this._randrange(new i(2),p);c&&c(b);var v=b.toRed(f).redPow(m);if(v.cmp(h)!==0&&v.cmp(y)!==0){for(var k=1;k<g;k++){if((v=v.redSqr()).cmp(h)===0)return!1;if(v.cmp(y)===0)break}if(k===g)return!1}}return!0},u.prototype.getDivisor=function(l,a){var c=l.bitLength(),d=i.mont(l),f=new i(1).toRed(d);a||(a=Math.max(1,c/48|0));for(var h=l.subn(1),p=0;!h.testn(p);p++);for(var g=l.shrn(p),m=h.toRed(d);a>0;a--){var y=this._randrange(new i(2),h),b=l.gcd(y);if(b.cmpn(1)!==0)return b;var v=y.toRed(d).redPow(g);if(v.cmp(f)!==0&&v.cmp(m)!==0){for(var k=1;k<p;k++){if((v=v.redSqr()).cmp(f)===0)return v.fromRed().subn(1).gcd(l);if(v.cmp(m)===0)break}if(k===p)return(v=v.redSqr()).fromRed().subn(1).gcd(l)}}return!1}},{"bn.js":452,brorand:187}],452:[function(t,r,s){arguments[4][184][0].apply(s,arguments)},{buffer:188,dup:184}],453:[function(t,r,s){function i(o,u){if(!o)throw new Error(u||"Assertion failed")}r.exports=i,i.equal=function(o,u,l){if(o!=u)throw new Error(l||"Assertion failed: "+o+" != "+u)}},{}],454:[function(t,r,s){var i=s;function o(l){return l.length===1?"0"+l:l}function u(l){for(var a="",c=0;c<l.length;c++)a+=o(l[c].toString(16));return a}i.toArray=function(l,a){if(Array.isArray(l))return l.slice();if(!l)return[];var c=[];if(typeof l!="string"){for(var d=0;d<l.length;d++)c[d]=0|l[d];return c}if(a==="hex")for((l=l.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(l="0"+l),d=0;d<l.length;d+=2)c.push(parseInt(l[d]+l[d+1],16));else for(d=0;d<l.length;d++){var f=l.charCodeAt(d),h=f>>8,p=255&f;h?c.push(h,p):c.push(p)}return c},i.zero2=o,i.toHex=u,i.encode=function(l,a){return a==="hex"?u(l):l}},{}],455:[function(t,r,s){r.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(t,r,s){var i=t("asn1.js");s.certificate=t("./certificate");var o=i.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});s.RSAPrivateKey=o;var u=i.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});s.RSAPublicKey=u;var l=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())});s.PublicKey=l;var a=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),c=i.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(a),this.key("subjectPrivateKey").octstr())});s.PrivateKey=c;var d=i.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});s.EncryptedPrivateKey=d;var f=i.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});s.DSAPrivateKey=f,s.DSAparam=i.define("DSAparam",function(){this.int()});var h=i.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(p),this.key("publicKey").optional().explicit(1).bitstr())});s.ECPrivateKey=h;var p=i.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});s.signature=i.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":457,"asn1.js":170}],457:[function(t,r,s){var i=t("asn1.js"),o=i.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),u=i.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),l=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),a=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(l),this.key("subjectPublicKey").bitstr())}),c=i.define("RelativeDistinguishedName",function(){this.setof(u)}),d=i.define("RDNSequence",function(){this.seqof(c)}),f=i.define("Name",function(){this.choice({rdnSequence:this.use(d)})}),h=i.define("Validity",function(){this.seq().obj(this.key("notBefore").use(o),this.key("notAfter").use(o))}),p=i.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),g=i.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(l),this.key("issuer").use(f),this.key("validity").use(h),this.key("subject").use(f),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(p).optional())}),m=i.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(g),this.key("signatureAlgorithm").use(l),this.key("signatureValue").bitstr())});r.exports=m},{"asn1.js":170}],458:[function(t,r,s){var i=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,u=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,l=t("evp_bytestokey"),a=t("browserify-aes"),c=t("safe-buffer").Buffer;r.exports=function(d,f){var h,p=d.toString(),g=p.match(i);if(g){var m="aes"+g[1],y=c.from(g[2],"hex"),b=c.from(g[3].replace(/[\r\n]/g,""),"base64"),v=l(f,y.slice(0,8),parseInt(g[1],10)).key,k=[],j=a.createDecipheriv(m,v,y);k.push(j.update(b)),k.push(j.final()),h=c.concat(k)}else{var I=p.match(u);h=c.from(I[2].replace(/[\r\n]/g,""),"base64")}return{tag:p.match(o)[1],data:h}}},{"browserify-aes":191,evp_bytestokey:423,"safe-buffer":494}],459:[function(t,r,s){var i=t("./asn1"),o=t("./aesid.json"),u=t("./fixProc"),l=t("browserify-aes"),a=t("pbkdf2"),c=t("safe-buffer").Buffer;function d(f){var h;typeof f!="object"||c.isBuffer(f)||(h=f.passphrase,f=f.key),typeof f=="string"&&(f=c.from(f));var p,g,m=u(f,h),y=m.tag,b=m.data;switch(y){case"CERTIFICATE":g=i.certificate.decode(b,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(g||(g=i.PublicKey.decode(b,"der")),p=g.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPublicKey.decode(g.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return g.subjectPrivateKey=g.subjectPublicKey,{type:"ec",data:g};case"1.2.840.10040.4.1":return g.algorithm.params.pub_key=i.DSAparam.decode(g.subjectPublicKey.data,"der"),{type:"dsa",data:g.algorithm.params};default:throw new Error("unknown key id "+p)}case"ENCRYPTED PRIVATE KEY":b=function(v,k){var j=v.algorithm.decrypt.kde.kdeparams.salt,I=parseInt(v.algorithm.decrypt.kde.kdeparams.iters.toString(),10),U=o[v.algorithm.decrypt.cipher.algo.join(".")],P=v.algorithm.decrypt.cipher.iv,z=v.subjectPrivateKey,q=parseInt(U.split("-")[1],10)/8,$=a.pbkdf2Sync(k,j,I,q,"sha1"),F=l.createDecipheriv(U,$,P),T=[];return T.push(F.update(z)),T.push(F.final()),c.concat(T)}(b=i.EncryptedPrivateKey.decode(b,"der"),h);case"PRIVATE KEY":switch(p=(g=i.PrivateKey.decode(b,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPrivateKey.decode(g.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:g.algorithm.curve,privateKey:i.ECPrivateKey.decode(g.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return g.algorithm.params.priv_key=i.DSAparam.decode(g.subjectPrivateKey,"der"),{type:"dsa",params:g.algorithm.params};default:throw new Error("unknown key id "+p)}case"RSA PUBLIC KEY":return i.RSAPublicKey.decode(b,"der");case"RSA PRIVATE KEY":return i.RSAPrivateKey.decode(b,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:i.DSAPrivateKey.decode(b,"der")};case"EC PRIVATE KEY":return{curve:(b=i.ECPrivateKey.decode(b,"der")).parameters.value,privateKey:b.privateKey};default:throw new Error("unknown key type "+y)}}r.exports=d,d.signature=i.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":191,pbkdf2:460,"safe-buffer":494}],460:[function(t,r,s){s.pbkdf2=t("./lib/async"),s.pbkdf2Sync=t("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(t,r,s){(function(i){(function(){var o,u,l=t("safe-buffer").Buffer,a=t("./precondition"),c=t("./default-encoding"),d=t("./sync"),f=t("./to-buffer"),h=i.crypto&&i.crypto.subtle,p={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},g=[];function m(){return u||(u=i.process&&i.process.nextTick?i.process.nextTick:i.queueMicrotask?i.queueMicrotask:i.setImmediate?i.setImmediate:i.setTimeout)}function y(b,v,k,j,I){return h.importKey("raw",b,{name:"PBKDF2"},!1,["deriveBits"]).then(function(U){return h.deriveBits({name:"PBKDF2",salt:v,iterations:k,hash:{name:I}},U,j<<3)}).then(function(U){return l.from(U)})}r.exports=function(b,v,k,j,I,U){typeof I=="function"&&(U=I,I=void 0);var P=p[(I=I||"sha1").toLowerCase()];if(P&&typeof i.Promise=="function"){if(a(k,j),b=f(b,c,"Password"),v=f(v,c,"Salt"),typeof U!="function")throw new Error("No callback provided to pbkdf2");(function(z,q){z.then(function($){m()(function(){q(null,$)})},function($){m()(function(){q($)})})})(function(z){if(i.process&&!i.process.browser||!h||!h.importKey||!h.deriveBits)return Promise.resolve(!1);if(g[z]!==void 0)return g[z];var q=y(o=o||l.alloc(8),o,10,128,z).then(function(){return!0}).catch(function(){return!1});return g[z]=q,q}(P).then(function(z){return z?y(b,v,k,j,P):d(b,v,k,j,I)}),U)}else m()(function(){var z;try{z=d(b,v,k,j,I)}catch(q){return U(q)}U(null,z)})}}).call(this)}).call(this,typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,"safe-buffer":494}],462:[function(t,r,s){(function(i,o){(function(){var u;o.process&&o.process.browser?u="utf-8":o.process&&o.process.version?u=parseInt(i.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":u="utf-8",r.exports=u}).call(this)}).call(this,t("_process"),typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467}],463:[function(t,r,s){var i=Math.pow(2,30)-1;r.exports=function(o,u){if(typeof o!="number")throw new TypeError("Iterations not a number");if(o<0)throw new TypeError("Bad iterations");if(typeof u!="number")throw new TypeError("Key length not a number");if(u<0||u>i||u!=u)throw new TypeError("Bad key length")}},{}],464:[function(t,r,s){var i=t("create-hash/md5"),o=t("ripemd160"),u=t("sha.js"),l=t("safe-buffer").Buffer,a=t("./precondition"),c=t("./default-encoding"),d=t("./to-buffer"),f=l.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function p(g,m,y){var b=function(P){function z(q){return u(P).update(q).digest()}return P==="rmd160"||P==="ripemd160"?function(q){return new o().update(q).digest()}:P==="md5"?i:z}(g),v=g==="sha512"||g==="sha384"?128:64;m.length>v?m=b(m):m.length<v&&(m=l.concat([m,f],v));for(var k=l.allocUnsafe(v+h[g]),j=l.allocUnsafe(v+h[g]),I=0;I<v;I++)k[I]=54^m[I],j[I]=92^m[I];var U=l.allocUnsafe(v+y+4);k.copy(U,0,0,v),this.ipad1=U,this.ipad2=k,this.opad=j,this.alg=g,this.blocksize=v,this.hash=b,this.size=h[g]}p.prototype.run=function(g,m){return g.copy(m,this.blocksize),this.hash(m).copy(this.opad,this.blocksize),this.hash(this.opad)},r.exports=function(g,m,y,b,v){a(y,b);var k=new p(v=v||"sha1",g=d(g,c,"Password"),(m=d(m,c,"Salt")).length),j=l.allocUnsafe(b),I=l.allocUnsafe(m.length+4);m.copy(I,0,0,m.length);for(var U=0,P=h[v],z=Math.ceil(b/P),q=1;q<=z;q++){I.writeUInt32BE(q,m.length);for(var $=k.run(I,k.ipad1),F=$,T=1;T<y;T++){F=k.run(F,k.ipad2);for(var N=0;N<P;N++)$[N]^=F[N]}$.copy(j,U),U+=P}return j}},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":387,ripemd160:493,"safe-buffer":494,"sha.js":498}],465:[function(t,r,s){var i=t("safe-buffer").Buffer;r.exports=function(o,u,l){if(i.isBuffer(o))return o;if(typeof o=="string")return i.from(o,u);if(ArrayBuffer.isView(o))return i.from(o.buffer);throw new TypeError(l+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(t,r,s){(function(i){(function(){i===void 0||!i.version||i.version.indexOf("v0.")===0||i.version.indexOf("v1.")===0&&i.version.indexOf("v1.8.")!==0?r.exports={nextTick:function(o,u,l,a){if(typeof o!="function")throw new TypeError('"callback" argument must be a function');var c,d,f=arguments.length;switch(f){case 0:case 1:return i.nextTick(o);case 2:return i.nextTick(function(){o.call(null,u)});case 3:return i.nextTick(function(){o.call(null,u,l)});case 4:return i.nextTick(function(){o.call(null,u,l,a)});default:for(c=new Array(f-1),d=0;d<c.length;)c[d++]=arguments[d];return i.nextTick(function(){o.apply(null,c)})}}}:r.exports=i}).call(this)}).call(this,t("_process"))},{_process:467}],467:[function(t,r,s){var i,o,u=r.exports={};function l(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(v){if(i===setTimeout)return setTimeout(v,0);if((i===l||!i)&&setTimeout)return i=setTimeout,setTimeout(v,0);try{return i(v,0)}catch{try{return i.call(null,v,0)}catch{return i.call(this,v,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:l}catch{i=l}try{o=typeof clearTimeout=="function"?clearTimeout:a}catch{o=a}})();var d,f=[],h=!1,p=-1;function g(){h&&d&&(h=!1,d.length?f=d.concat(f):p=-1,f.length&&m())}function m(){if(!h){var v=c(g);h=!0;for(var k=f.length;k;){for(d=f,f=[];++p<k;)d&&d[p].run();p=-1,k=f.length}d=null,h=!1,function(j){if(o===clearTimeout)return clearTimeout(j);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(j);try{o(j)}catch{try{return o.call(null,j)}catch{return o.call(this,j)}}}(v)}}function y(v,k){this.fun=v,this.array=k}function b(){}u.nextTick=function(v){var k=new Array(arguments.length-1);if(arguments.length>1)for(var j=1;j<arguments.length;j++)k[j-1]=arguments[j];f.push(new y(v,k)),f.length!==1||h||c(m)},y.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=b,u.addListener=b,u.once=b,u.off=b,u.removeListener=b,u.removeAllListeners=b,u.emit=b,u.prependListener=b,u.prependOnceListener=b,u.listeners=function(v){return[]},u.binding=function(v){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(v){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],468:[function(t,r,s){s.publicEncrypt=t("./publicEncrypt"),s.privateDecrypt=t("./privateDecrypt"),s.privateEncrypt=function(i,o){return s.publicEncrypt(i,o,!0)},s.publicDecrypt=function(i,o){return s.privateDecrypt(i,o,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(t,r,s){var i=t("create-hash"),o=t("safe-buffer").Buffer;function u(l){var a=o.allocUnsafe(4);return a.writeUInt32BE(l,0),a}r.exports=function(l,a){for(var c,d=o.alloc(0),f=0;d.length<a;)c=u(f++),d=o.concat([d,i("sha1").update(l).update(c).digest()]);return d.slice(0,a)}},{"create-hash":386,"safe-buffer":494}],470:[function(t,r,s){arguments[4][184][0].apply(s,arguments)},{buffer:188,dup:184}],471:[function(t,r,s){var i=t("parse-asn1"),o=t("./mgf"),u=t("./xor"),l=t("bn.js"),a=t("browserify-rsa"),c=t("create-hash"),d=t("./withPublic"),f=t("safe-buffer").Buffer;r.exports=function(h,p,g){var m;m=h.padding?h.padding:g?1:4;var y,b=i(h),v=b.modulus.byteLength();if(p.length>v||new l(p).cmp(b.modulus)>=0)throw new Error("decryption error");y=g?d(new l(p),b):a(p,b);var k=f.alloc(v-y.length);if(y=f.concat([k,y],v),m===4)return function(j,I){var U=j.modulus.byteLength(),P=c("sha1").update(f.alloc(0)).digest(),z=P.length;if(I[0]!==0)throw new Error("decryption error");var q=I.slice(1,z+1),$=I.slice(z+1),F=u(q,o($,z)),T=u($,o(F,U-z-1));if(function(C,w){C=f.from(C),w=f.from(w);var _=0,x=C.length;C.length!==w.length&&(_++,x=Math.min(C.length,w.length));for(var S=-1;++S<x;)_+=C[S]^w[S];return _}(P,T.slice(0,z)))throw new Error("decryption error");for(var N=z;T[N]===0;)N++;if(T[N++]!==1)throw new Error("decryption error");return T.slice(N)}(b,y);if(m===1)return function(j,I,U){for(var P=I.slice(0,2),z=2,q=0;I[z++]!==0;)if(z>=I.length){q++;break}var $=I.slice(2,z-1);if((P.toString("hex")!=="0002"&&!U||P.toString("hex")!=="0001"&&U)&&q++,$.length<8&&q++,q)throw new Error("decryption error");return I.slice(z)}(0,y,g);if(m===3)return y;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,"safe-buffer":494}],472:[function(t,r,s){var i=t("parse-asn1"),o=t("randombytes"),u=t("create-hash"),l=t("./mgf"),a=t("./xor"),c=t("bn.js"),d=t("./withPublic"),f=t("browserify-rsa"),h=t("safe-buffer").Buffer;r.exports=function(p,g,m){var y;y=p.padding?p.padding:m?1:4;var b,v=i(p);if(y===4)b=function(k,j){var I=k.modulus.byteLength(),U=j.length,P=u("sha1").update(h.alloc(0)).digest(),z=P.length,q=2*z;if(U>I-q-2)throw new Error("message too long");var $=h.alloc(I-U-q-2),F=I-z-1,T=o(z),N=a(h.concat([P,$,h.alloc(1,1),j],F),l(T,F)),C=a(T,l(N,z));return new c(h.concat([h.alloc(1),C,N],I))}(v,g);else if(y===1)b=function(k,j,I){var U,P=j.length,z=k.modulus.byteLength();if(P>z-11)throw new Error("message too long");return U=I?h.alloc(z-P-3,255):function(q){for(var $,F=h.allocUnsafe(q),T=0,N=o(2*q),C=0;T<q;)C===N.length&&(N=o(2*q),C=0),($=N[C++])&&(F[T++]=$);return F}(z-P-3),new c(h.concat([h.from([0,I?1:2]),U,h.alloc(1),j],z))}(v,g,m);else{if(y!==3)throw new Error("unknown padding");if((b=new c(g)).cmp(v.modulus)>=0)throw new Error("data too long for modulus")}return m?f(b,v):d(b,v)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(t,r,s){var i=t("bn.js"),o=t("safe-buffer").Buffer;r.exports=function(u,l){return o.from(u.toRed(i.mont(l.modulus)).redPow(new i(l.publicExponent)).fromRed().toArray())}},{"bn.js":470,"safe-buffer":494}],474:[function(t,r,s){r.exports=function(i,o){for(var u=i.length,l=-1;++l<u;)i[l]^=o[l];return i}},{}],475:[function(t,r,s){(function(i,o){(function(){var u=t("safe-buffer").Buffer,l=o.crypto||o.msCrypto;l&&l.getRandomValues?r.exports=function(a,c){if(a>4294967295)throw new RangeError("requested too many random bytes");var d=u.allocUnsafe(a);if(a>0)if(a>65536)for(var f=0;f<a;f+=65536)l.getRandomValues(d.slice(f,f+65536));else l.getRandomValues(d);return typeof c=="function"?i.nextTick(function(){c(null,d)}):d}:r.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,t("_process"),typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,"safe-buffer":494}],476:[function(t,r,s){(function(i,o){(function(){function u(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var l=t("safe-buffer"),a=t("randombytes"),c=l.Buffer,d=l.kMaxLength,f=o.crypto||o.msCrypto,h=Math.pow(2,32)-1;function p(y,b){if(typeof y!="number"||y!=y)throw new TypeError("offset must be a number");if(y>h||y<0)throw new TypeError("offset must be a uint32");if(y>d||y>b)throw new RangeError("offset out of range")}function g(y,b,v){if(typeof y!="number"||y!=y)throw new TypeError("size must be a number");if(y>h||y<0)throw new TypeError("size must be a uint32");if(y+b>v||y>d)throw new RangeError("buffer too small")}function m(y,b,v,k){if(i.browser){var j=y.buffer,I=new Uint8Array(j,b,v);return f.getRandomValues(I),k?void i.nextTick(function(){k(null,y)}):y}if(!k)return a(v).copy(y,b),y;a(v,function(U,P){if(U)return k(U);P.copy(y,b),k(null,y)})}f&&f.getRandomValues||!i.browser?(s.randomFill=function(y,b,v,k){if(!(c.isBuffer(y)||y instanceof o.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof b=="function")k=b,b=0,v=y.length;else if(typeof v=="function")k=v,v=y.length-b;else if(typeof k!="function")throw new TypeError('"cb" argument must be a function');return p(b,y.length),g(v,b,y.length),m(y,b,v,k)},s.randomFillSync=function(y,b,v){if(b===void 0&&(b=0),!(c.isBuffer(y)||y instanceof o.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return p(b,y.length),v===void 0&&(v=y.length-b),g(v,b,y.length),m(y,b,v)}):(s.randomFill=u,s.randomFillSync=u)}).call(this)}).call(this,t("_process"),typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(t,r,s){var i={};function o(l,a,c){c||(c=Error);var d=function(f){var h,p;function g(m,y,b){return f.call(this,function(v,k,j){return typeof a=="string"?a:a(v,k,j)}(m,y,b))||this}return p=f,(h=g).prototype=Object.create(p.prototype),h.prototype.constructor=h,h.__proto__=p,g}(c);d.prototype.name=c.name,d.prototype.code=l,i[l]=d}function u(l,a){if(Array.isArray(l)){var c=l.length;return l=l.map(function(d){return String(d)}),c>2?"one of ".concat(a," ").concat(l.slice(0,c-1).join(", "),", or ")+l[c-1]:c===2?"one of ".concat(a," ").concat(l[0]," or ").concat(l[1]):"of ".concat(a," ").concat(l[0])}return"of ".concat(a," ").concat(String(l))}o("ERR_INVALID_OPT_VALUE",function(l,a){return'The value "'+a+'" is invalid for option "'+l+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(l,a,c){var d,f,h;if(typeof a=="string"&&(f="not ",a.substr(0,f.length)===f)?(d="must not be",a=a.replace(/^not /,"")):d="must be",function(g,m,y){return(y===void 0||y>g.length)&&(y=g.length),g.substring(y-m.length,y)===m}(l," argument"))h="The ".concat(l," ").concat(d," ").concat(u(a,"type"));else{var p=function(g,m,y){return typeof y!="number"&&(y=0),!(y+m.length>g.length)&&g.indexOf(m,y)!==-1}(l,".")?"property":"argument";h='The "'.concat(l,'" ').concat(p," ").concat(d," ").concat(u(a,"type"))}return h+=". Received type ".concat(typeof c)},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(l){return"The "+l+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(l){return"Cannot call "+l+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(l){return"Unknown encoding: "+l},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),r.exports.codes=i},{}],478:[function(t,r,s){(function(i){(function(){var o=Object.keys||function(g){var m=[];for(var y in g)m.push(y);return m};r.exports=f;var u=t("./_stream_readable"),l=t("./_stream_writable");t("inherits")(f,u);for(var a=o(l.prototype),c=0;c<a.length;c++){var d=a[c];f.prototype[d]||(f.prototype[d]=l.prototype[d])}function f(g){if(!(this instanceof f))return new f(g);u.call(this,g),l.call(this,g),this.allowHalfOpen=!0,g&&(g.readable===!1&&(this.readable=!1),g.writable===!1&&(this.writable=!1),g.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||i.nextTick(p,this)}function p(g){g.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:440}],479:[function(t,r,s){r.exports=o;var i=t("./_stream_transform");function o(u){if(!(this instanceof o))return new o(u);i.call(this,u)}t("inherits")(o,i),o.prototype._transform=function(u,l,a){a(null,u)}},{"./_stream_transform":481,inherits:440}],480:[function(t,r,s){(function(i,o){(function(){var u;r.exports=F,F.ReadableState=$,t("events").EventEmitter;var l=function(L,O){return L.listeners(O).length},a=t("./internal/streams/stream"),c=t("buffer").Buffer,d=(o!==void 0?o:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},f,h=t("util");f=h&&h.debuglog?h.debuglog("stream"):function(){};var p,g,m,y=t("./internal/streams/buffer_list"),b=t("./internal/streams/destroy"),v=t("./internal/streams/state").getHighWaterMark,k=t("../errors").codes,j=k.ERR_INVALID_ARG_TYPE,I=k.ERR_STREAM_PUSH_AFTER_EOF,U=k.ERR_METHOD_NOT_IMPLEMENTED,P=k.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t("inherits")(F,a);var z=b.errorOrDestroy,q=["error","close","destroy","pause","resume"];function $(L,O,G){u=u||t("./_stream_duplex"),L=L||{},typeof G!="boolean"&&(G=O instanceof u),this.objectMode=!!L.objectMode,G&&(this.objectMode=this.objectMode||!!L.readableObjectMode),this.highWaterMark=v(this,L,"readableHighWaterMark",G),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=L.emitClose!==!1,this.autoDestroy=!!L.autoDestroy,this.destroyed=!1,this.defaultEncoding=L.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,L.encoding&&(p||(p=t("string_decoder/").StringDecoder),this.decoder=new p(L.encoding),this.encoding=L.encoding)}function F(L){if(u=u||t("./_stream_duplex"),!(this instanceof F))return new F(L);var O=this instanceof u;this._readableState=new $(L,this,O),this.readable=!0,L&&(typeof L.read=="function"&&(this._read=L.read),typeof L.destroy=="function"&&(this._destroy=L.destroy)),a.call(this)}function T(L,O,G,nt,ct){f("readableAddChunk",O);var ot,mt=L._readableState;if(O===null)mt.reading=!1,function(pt,st){if(f("onEofChunk"),!st.ended){if(st.decoder){var at=st.decoder.end();at&&at.length&&(st.buffer.push(at),st.length+=st.objectMode?1:at.length)}st.ended=!0,st.sync?w(pt):(st.needReadable=!1,st.emittedReadable||(st.emittedReadable=!0,_(pt)))}}(L,mt);else if(ct||(ot=function(pt,st){var at;vt=st,c.isBuffer(vt)||vt instanceof d||typeof st=="string"||st===void 0||pt.objectMode||(at=new j("chunk",["string","Buffer","Uint8Array"],st));var vt;return at}(mt,O)),ot)z(L,ot);else if(mt.objectMode||O&&O.length>0)if(typeof O=="string"||mt.objectMode||Object.getPrototypeOf(O)===c.prototype||(O=function(pt){return c.from(pt)}(O)),nt)mt.endEmitted?z(L,new P):N(L,mt,O,!0);else if(mt.ended)z(L,new I);else{if(mt.destroyed)return!1;mt.reading=!1,mt.decoder&&!G?(O=mt.decoder.write(O),mt.objectMode||O.length!==0?N(L,mt,O,!1):x(L,mt)):N(L,mt,O,!1)}else nt||(mt.reading=!1,x(L,mt));return!mt.ended&&(mt.length<mt.highWaterMark||mt.length===0)}function N(L,O,G,nt){O.flowing&&O.length===0&&!O.sync?(O.awaitDrain=0,L.emit("data",G)):(O.length+=O.objectMode?1:G.length,nt?O.buffer.unshift(G):O.buffer.push(G),O.needReadable&&w(L)),x(L,O)}Object.defineProperty(F.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(L){this._readableState&&(this._readableState.destroyed=L)}}),F.prototype.destroy=b.destroy,F.prototype._undestroy=b.undestroy,F.prototype._destroy=function(L,O){O(L)},F.prototype.push=function(L,O){var G,nt=this._readableState;return nt.objectMode?G=!0:typeof L=="string"&&((O=O||nt.defaultEncoding)!==nt.encoding&&(L=c.from(L,O),O=""),G=!0),T(this,L,O,!1,G)},F.prototype.unshift=function(L){return T(this,L,null,!0,!1)},F.prototype.isPaused=function(){return this._readableState.flowing===!1},F.prototype.setEncoding=function(L){p||(p=t("string_decoder/").StringDecoder);var O=new p(L);this._readableState.decoder=O,this._readableState.encoding=this._readableState.decoder.encoding;for(var G=this._readableState.buffer.head,nt="";G!==null;)nt+=O.write(G.data),G=G.next;return this._readableState.buffer.clear(),nt!==""&&this._readableState.buffer.push(nt),this._readableState.length=nt.length,this};function C(L,O){return L<=0||O.length===0&&O.ended?0:O.objectMode?1:L!=L?O.flowing&&O.length?O.buffer.head.data.length:O.length:(L>O.highWaterMark&&(O.highWaterMark=function(G){return G>=1073741824?G=1073741824:(G--,G|=G>>>1,G|=G>>>2,G|=G>>>4,G|=G>>>8,G|=G>>>16,G++),G}(L)),L<=O.length?L:O.ended?O.length:(O.needReadable=!0,0))}function w(L){var O=L._readableState;f("emitReadable",O.needReadable,O.emittedReadable),O.needReadable=!1,O.emittedReadable||(f("emitReadable",O.flowing),O.emittedReadable=!0,i.nextTick(_,L))}function _(L){var O=L._readableState;f("emitReadable_",O.destroyed,O.length,O.ended),O.destroyed||!O.length&&!O.ended||(L.emit("readable"),O.emittedReadable=!1),O.needReadable=!O.flowing&&!O.ended&&O.length<=O.highWaterMark,V(L)}function x(L,O){O.readingMore||(O.readingMore=!0,i.nextTick(S,L,O))}function S(L,O){for(;!O.reading&&!O.ended&&(O.length<O.highWaterMark||O.flowing&&O.length===0);){var G=O.length;if(f("maybeReadMore read 0"),L.read(0),G===O.length)break}O.readingMore=!1}function A(L){var O=L._readableState;O.readableListening=L.listenerCount("readable")>0,O.resumeScheduled&&!O.paused?O.flowing=!0:L.listenerCount("data")>0&&L.resume()}function B(L){f("readable nexttick read 0"),L.read(0)}function E(L,O){f("resume",O.reading),O.reading||L.read(0),O.resumeScheduled=!1,L.emit("resume"),V(L),O.flowing&&!O.reading&&L.read(0)}function V(L){var O=L._readableState;for(f("flow",O.flowing);O.flowing&&L.read()!==null;);}function X(L,O){return O.length===0?null:(O.objectMode?G=O.buffer.shift():!L||L>=O.length?(G=O.decoder?O.buffer.join(""):O.buffer.length===1?O.buffer.first():O.buffer.concat(O.length),O.buffer.clear()):G=O.buffer.consume(L,O.decoder),G);var G}function Q(L){var O=L._readableState;f("endReadable",O.endEmitted),O.endEmitted||(O.ended=!0,i.nextTick(D,O,L))}function D(L,O){if(f("endReadableNT",L.endEmitted,L.length),!L.endEmitted&&L.length===0&&(L.endEmitted=!0,O.readable=!1,O.emit("end"),L.autoDestroy)){var G=O._writableState;(!G||G.autoDestroy&&G.finished)&&O.destroy()}}function Z(L,O){for(var G=0,nt=L.length;G<nt;G++)if(L[G]===O)return G;return-1}F.prototype.read=function(L){f("read",L),L=parseInt(L,10);var O=this._readableState,G=L;if(L!==0&&(O.emittedReadable=!1),L===0&&O.needReadable&&((O.highWaterMark!==0?O.length>=O.highWaterMark:O.length>0)||O.ended))return f("read: emitReadable",O.length,O.ended),O.length===0&&O.ended?Q(this):w(this),null;if((L=C(L,O))===0&&O.ended)return O.length===0&&Q(this),null;var nt,ct=O.needReadable;return f("need readable",ct),(O.length===0||O.length-L<O.highWaterMark)&&f("length less than watermark",ct=!0),O.ended||O.reading?f("reading or ended",ct=!1):ct&&(f("do read"),O.reading=!0,O.sync=!0,O.length===0&&(O.needReadable=!0),this._read(O.highWaterMark),O.sync=!1,O.reading||(L=C(G,O))),(nt=L>0?X(L,O):null)===null?(O.needReadable=O.length<=O.highWaterMark,L=0):(O.length-=L,O.awaitDrain=0),O.length===0&&(O.ended||(O.needReadable=!0),G!==L&&O.ended&&Q(this)),nt!==null&&this.emit("data",nt),nt},F.prototype._read=function(L){z(this,new U("_read()"))},F.prototype.pipe=function(L,O){var G=this,nt=this._readableState;switch(nt.pipesCount){case 0:nt.pipes=L;break;case 1:nt.pipes=[nt.pipes,L];break;default:nt.pipes.push(L)}nt.pipesCount+=1,f("pipe count=%d opts=%j",nt.pipesCount,O);var ct=(!O||O.end!==!1)&&L!==i.stdout&&L!==i.stderr?mt:St;function ot(Tt,Lt){f("onunpipe"),Tt===G&&Lt&&Lt.hasUnpiped===!1&&(Lt.hasUnpiped=!0,f("cleanup"),L.removeListener("close",yt),L.removeListener("finish",kt),L.removeListener("drain",pt),L.removeListener("error",vt),L.removeListener("unpipe",ot),G.removeListener("end",mt),G.removeListener("end",St),G.removeListener("data",at),st=!0,!nt.awaitDrain||L._writableState&&!L._writableState.needDrain||pt())}function mt(){f("onend"),L.end()}nt.endEmitted?i.nextTick(ct):G.once("end",ct),L.on("unpipe",ot);var pt=function(Tt){return function(){var Lt=Tt._readableState;f("pipeOnDrain",Lt.awaitDrain),Lt.awaitDrain&&Lt.awaitDrain--,Lt.awaitDrain===0&&l(Tt,"data")&&(Lt.flowing=!0,V(Tt))}}(G);L.on("drain",pt);var st=!1;function at(Tt){f("ondata");var Lt=L.write(Tt);f("dest.write",Lt),Lt===!1&&((nt.pipesCount===1&&nt.pipes===L||nt.pipesCount>1&&Z(nt.pipes,L)!==-1)&&!st&&(f("false write response, pause",nt.awaitDrain),nt.awaitDrain++),G.pause())}function vt(Tt){f("onerror",Tt),St(),L.removeListener("error",vt),l(L,"error")===0&&z(L,Tt)}function yt(){L.removeListener("finish",kt),St()}function kt(){f("onfinish"),L.removeListener("close",yt),St()}function St(){f("unpipe"),G.unpipe(L)}return G.on("data",at),function(Tt,Lt,Xt){if(typeof Tt.prependListener=="function")return Tt.prependListener(Lt,Xt);Tt._events&&Tt._events[Lt]?Array.isArray(Tt._events[Lt])?Tt._events[Lt].unshift(Xt):Tt._events[Lt]=[Xt,Tt._events[Lt]]:Tt.on(Lt,Xt)}(L,"error",vt),L.once("close",yt),L.once("finish",kt),L.emit("pipe",G),nt.flowing||(f("pipe resume"),G.resume()),L},F.prototype.unpipe=function(L){var O=this._readableState,G={hasUnpiped:!1};if(O.pipesCount===0)return this;if(O.pipesCount===1)return L&&L!==O.pipes||(L||(L=O.pipes),O.pipes=null,O.pipesCount=0,O.flowing=!1,L&&L.emit("unpipe",this,G)),this;if(!L){var nt=O.pipes,ct=O.pipesCount;O.pipes=null,O.pipesCount=0,O.flowing=!1;for(var ot=0;ot<ct;ot++)nt[ot].emit("unpipe",this,{hasUnpiped:!1});return this}var mt=Z(O.pipes,L);return mt===-1||(O.pipes.splice(mt,1),O.pipesCount-=1,O.pipesCount===1&&(O.pipes=O.pipes[0]),L.emit("unpipe",this,G)),this},F.prototype.on=function(L,O){var G=a.prototype.on.call(this,L,O),nt=this._readableState;return L==="data"?(nt.readableListening=this.listenerCount("readable")>0,nt.flowing!==!1&&this.resume()):L==="readable"&&(nt.endEmitted||nt.readableListening||(nt.readableListening=nt.needReadable=!0,nt.flowing=!1,nt.emittedReadable=!1,f("on readable",nt.length,nt.reading),nt.length?w(this):nt.reading||i.nextTick(B,this))),G},F.prototype.addListener=F.prototype.on,F.prototype.removeListener=function(L,O){var G=a.prototype.removeListener.call(this,L,O);return L==="readable"&&i.nextTick(A,this),G},F.prototype.removeAllListeners=function(L){var O=a.prototype.removeAllListeners.apply(this,arguments);return L!=="readable"&&L!==void 0||i.nextTick(A,this),O},F.prototype.resume=function(){var L=this._readableState;return L.flowing||(f("resume"),L.flowing=!L.readableListening,function(O,G){G.resumeScheduled||(G.resumeScheduled=!0,i.nextTick(E,O,G))}(this,L)),L.paused=!1,this},F.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},F.prototype.wrap=function(L){var O=this,G=this._readableState,nt=!1;for(var ct in L.on("end",function(){if(f("wrapped end"),G.decoder&&!G.ended){var mt=G.decoder.end();mt&&mt.length&&O.push(mt)}O.push(null)}),L.on("data",function(mt){f("wrapped data"),G.decoder&&(mt=G.decoder.write(mt)),G.objectMode&&mt==null||(G.objectMode||mt&&mt.length)&&(O.push(mt)||(nt=!0,L.pause()))}),L)this[ct]===void 0&&typeof L[ct]=="function"&&(this[ct]=function(mt){return function(){return L[mt].apply(L,arguments)}}(ct));for(var ot=0;ot<q.length;ot++)L.on(q[ot],this.emit.bind(this,q[ot]));return this._read=function(mt){f("wrapped _read",mt),nt&&(nt=!1,L.resume())},this},typeof Symbol=="function"&&(F.prototype[Symbol.asyncIterator]=function(){return g===void 0&&(g=t("./internal/streams/async_iterator")),g(this)}),Object.defineProperty(F.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(F.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(F.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(L){this._readableState&&(this._readableState.flowing=L)}}),F._fromList=X,Object.defineProperty(F.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(F.from=function(L,O){return m===void 0&&(m=t("./internal/streams/from")),m(F,L,O)})}).call(this)}).call(this,t("_process"),typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,events:422,inherits:440,"string_decoder/":522,util:188}],481:[function(t,r,s){r.exports=f;var i=t("../errors").codes,o=i.ERR_METHOD_NOT_IMPLEMENTED,u=i.ERR_MULTIPLE_CALLBACK,l=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=i.ERR_TRANSFORM_WITH_LENGTH_0,c=t("./_stream_duplex");function d(g,m){var y=this._transformState;y.transforming=!1;var b=y.writecb;if(b===null)return this.emit("error",new u);y.writechunk=null,y.writecb=null,m!=null&&this.push(m),b(g);var v=this._readableState;v.reading=!1,(v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}function f(g){if(!(this instanceof f))return new f(g);c.call(this,g),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,g&&(typeof g.transform=="function"&&(this._transform=g.transform),typeof g.flush=="function"&&(this._flush=g.flush)),this.on("prefinish",h)}function h(){var g=this;typeof this._flush!="function"||this._readableState.destroyed?p(this,null,null):this._flush(function(m,y){p(g,m,y)})}function p(g,m,y){if(m)return g.emit("error",m);if(y!=null&&g.push(y),g._writableState.length)throw new a;if(g._transformState.transforming)throw new l;return g.push(null)}t("inherits")(f,c),f.prototype.push=function(g,m){return this._transformState.needTransform=!1,c.prototype.push.call(this,g,m)},f.prototype._transform=function(g,m,y){y(new o("_transform()"))},f.prototype._write=function(g,m,y){var b=this._transformState;if(b.writecb=y,b.writechunk=g,b.writeencoding=m,!b.transforming){var v=this._readableState;(b.needTransform||v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}},f.prototype._read=function(g){var m=this._transformState;m.writechunk===null||m.transforming?m.needTransform=!0:(m.transforming=!0,this._transform(m.writechunk,m.writeencoding,m.afterTransform))},f.prototype._destroy=function(g,m){c.prototype._destroy.call(this,g,function(y){m(y)})}},{"../errors":477,"./_stream_duplex":478,inherits:440}],482:[function(t,r,s){(function(i,o){(function(){function u(S){var A=this;this.next=null,this.entry=null,this.finish=function(){(function(B,E,V){var X=B.entry;for(B.entry=null;X;){var Q=X.callback;E.pendingcb--,Q(V),X=X.next}E.corkedRequestsFree.next=B})(A,S)}}var l;r.exports=F,F.WritableState=$;var a={deprecate:t("util-deprecate")},c=t("./internal/streams/stream"),d=t("buffer").Buffer,f=(o!==void 0?o:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},h,p=t("./internal/streams/destroy"),g=t("./internal/streams/state").getHighWaterMark,m=t("../errors").codes,y=m.ERR_INVALID_ARG_TYPE,b=m.ERR_METHOD_NOT_IMPLEMENTED,v=m.ERR_MULTIPLE_CALLBACK,k=m.ERR_STREAM_CANNOT_PIPE,j=m.ERR_STREAM_DESTROYED,I=m.ERR_STREAM_NULL_VALUES,U=m.ERR_STREAM_WRITE_AFTER_END,P=m.ERR_UNKNOWN_ENCODING,z=p.errorOrDestroy;function q(){}function $(S,A,B){l=l||t("./_stream_duplex"),S=S||{},typeof B!="boolean"&&(B=A instanceof l),this.objectMode=!!S.objectMode,B&&(this.objectMode=this.objectMode||!!S.writableObjectMode),this.highWaterMark=g(this,S,"writableHighWaterMark",B),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var E=S.decodeStrings===!1;this.decodeStrings=!E,this.defaultEncoding=S.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(V){(function(X,Q){var D=X._writableState,Z=D.sync,L=D.writecb;if(typeof L!="function")throw new v;if(function(G){G.writing=!1,G.writecb=null,G.length-=G.writelen,G.writelen=0}(D),Q)(function(G,nt,ct,ot,mt){--nt.pendingcb,ct?(i.nextTick(mt,ot),i.nextTick(x,G,nt),G._writableState.errorEmitted=!0,z(G,ot)):(mt(ot),G._writableState.errorEmitted=!0,z(G,ot),x(G,nt))})(X,D,Z,Q,L);else{var O=w(D)||X.destroyed;O||D.corked||D.bufferProcessing||!D.bufferedRequest||C(X,D),Z?i.nextTick(N,X,D,O,L):N(X,D,O,L)}})(A,V)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=S.emitClose!==!1,this.autoDestroy=!!S.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new u(this)}function F(S){var A=this instanceof(l=l||t("./_stream_duplex"));if(!A&&!h.call(F,this))return new F(S);this._writableState=new $(S,this,A),this.writable=!0,S&&(typeof S.write=="function"&&(this._write=S.write),typeof S.writev=="function"&&(this._writev=S.writev),typeof S.destroy=="function"&&(this._destroy=S.destroy),typeof S.final=="function"&&(this._final=S.final)),c.call(this)}function T(S,A,B,E,V,X,Q){A.writelen=E,A.writecb=Q,A.writing=!0,A.sync=!0,A.destroyed?A.onwrite(new j("write")):B?S._writev(V,A.onwrite):S._write(V,X,A.onwrite),A.sync=!1}function N(S,A,B,E){B||function(V,X){X.length===0&&X.needDrain&&(X.needDrain=!1,V.emit("drain"))}(S,A),A.pendingcb--,E(),x(S,A)}function C(S,A){A.bufferProcessing=!0;var B=A.bufferedRequest;if(S._writev&&B&&B.next){var E=A.bufferedRequestCount,V=new Array(E),X=A.corkedRequestsFree;X.entry=B;for(var Q=0,D=!0;B;)V[Q]=B,B.isBuf||(D=!1),B=B.next,Q+=1;V.allBuffers=D,T(S,A,!0,A.length,V,"",X.finish),A.pendingcb++,A.lastBufferedRequest=null,X.next?(A.corkedRequestsFree=X.next,X.next=null):A.corkedRequestsFree=new u(A),A.bufferedRequestCount=0}else{for(;B;){var Z=B.chunk,L=B.encoding,O=B.callback;if(T(S,A,!1,A.objectMode?1:Z.length,Z,L,O),B=B.next,A.bufferedRequestCount--,A.writing)break}B===null&&(A.lastBufferedRequest=null)}A.bufferedRequest=B,A.bufferProcessing=!1}function w(S){return S.ending&&S.length===0&&S.bufferedRequest===null&&!S.finished&&!S.writing}function _(S,A){S._final(function(B){A.pendingcb--,B&&z(S,B),A.prefinished=!0,S.emit("prefinish"),x(S,A)})}function x(S,A){var B=w(A);if(B&&(function(V,X){X.prefinished||X.finalCalled||(typeof V._final!="function"||X.destroyed?(X.prefinished=!0,V.emit("prefinish")):(X.pendingcb++,X.finalCalled=!0,i.nextTick(_,V,X)))}(S,A),A.pendingcb===0&&(A.finished=!0,S.emit("finish"),A.autoDestroy))){var E=S._readableState;(!E||E.autoDestroy&&E.endEmitted)&&S.destroy()}return B}t("inherits")(F,c),$.prototype.getBuffer=function(){for(var S=this.bufferedRequest,A=[];S;)A.push(S),S=S.next;return A},function(){try{Object.defineProperty($.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(F,Symbol.hasInstance,{value:function(S){return!!h.call(this,S)||this===F&&S&&S._writableState instanceof $}})):h=function(S){return S instanceof this},F.prototype.pipe=function(){z(this,new k)},F.prototype.write=function(S,A,B){var E,V=this._writableState,X=!1,Q=!V.objectMode&&(E=S,d.isBuffer(E)||E instanceof f);return Q&&!d.isBuffer(S)&&(S=function(D){return d.from(D)}(S)),typeof A=="function"&&(B=A,A=null),Q?A="buffer":A||(A=V.defaultEncoding),typeof B!="function"&&(B=q),V.ending?function(D,Z){var L=new U;z(D,L),i.nextTick(Z,L)}(this,B):(Q||function(D,Z,L,O){var G;return L===null?G=new I:typeof L=="string"||Z.objectMode||(G=new y("chunk",["string","Buffer"],L)),!G||(z(D,G),i.nextTick(O,G),!1)}(this,V,S,B))&&(V.pendingcb++,X=function(D,Z,L,O,G,nt){if(!L){var ct=function(st,at,vt){return st.objectMode||st.decodeStrings===!1||typeof at!="string"||(at=d.from(at,vt)),at}(Z,O,G);O!==ct&&(L=!0,G="buffer",O=ct)}var ot=Z.objectMode?1:O.length;Z.length+=ot;var mt=Z.length<Z.highWaterMark;if(mt||(Z.needDrain=!0),Z.writing||Z.corked){var pt=Z.lastBufferedRequest;Z.lastBufferedRequest={chunk:O,encoding:G,isBuf:L,callback:nt,next:null},pt?pt.next=Z.lastBufferedRequest:Z.bufferedRequest=Z.lastBufferedRequest,Z.bufferedRequestCount+=1}else T(D,Z,!1,ot,O,G,nt);return mt}(this,V,Q,S,A,B)),X},F.prototype.cork=function(){this._writableState.corked++},F.prototype.uncork=function(){var S=this._writableState;S.corked&&(S.corked--,S.writing||S.corked||S.bufferProcessing||!S.bufferedRequest||C(this,S))},F.prototype.setDefaultEncoding=function(S){if(typeof S=="string"&&(S=S.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((S+"").toLowerCase())>-1))throw new P(S);return this._writableState.defaultEncoding=S,this},Object.defineProperty(F.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(F.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),F.prototype._write=function(S,A,B){B(new b("_write()"))},F.prototype._writev=null,F.prototype.end=function(S,A,B){var E=this._writableState;return typeof S=="function"?(B=S,S=null,A=null):typeof A=="function"&&(B=A,A=null),S!=null&&this.write(S,A),E.corked&&(E.corked=1,this.uncork()),E.ending||function(V,X,Q){X.ending=!0,x(V,X),Q&&(X.finished?i.nextTick(Q):V.once("finish",Q)),X.ended=!0,V.writable=!1}(this,E,B),this},Object.defineProperty(F.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(F.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(S){this._writableState&&(this._writableState.destroyed=S)}}),F.prototype.destroy=p.destroy,F.prototype._undestroy=p.undestroy,F.prototype._destroy=function(S,A){A(S)}}).call(this)}).call(this,t("_process"),typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,inherits:440,"util-deprecate":524}],483:[function(t,r,s){(function(i){(function(){var o;function u(j,I,U){return(I=function(P){var z=function(q,$){if(typeof q!="object"||q===null)return q;var F=q[Symbol.toPrimitive];if(F!==void 0){var T=F.call(q,$);if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(q)}(P,"string");return typeof z=="symbol"?z:String(z)}(I))in j?Object.defineProperty(j,I,{value:U,enumerable:!0,configurable:!0,writable:!0}):j[I]=U,j}var l=t("./end-of-stream"),a=Symbol("lastResolve"),c=Symbol("lastReject"),d=Symbol("error"),f=Symbol("ended"),h=Symbol("lastPromise"),p=Symbol("handlePromise"),g=Symbol("stream");function m(j,I){return{value:j,done:I}}function y(j){var I=j[a];if(I!==null){var U=j[g].read();U!==null&&(j[h]=null,j[a]=null,j[c]=null,I(m(U,!1)))}}function b(j){i.nextTick(y,j)}var v=Object.getPrototypeOf(function(){}),k=Object.setPrototypeOf((u(o={get stream(){return this[g]},next:function(){var j=this,I=this[d];if(I!==null)return Promise.reject(I);if(this[f])return Promise.resolve(m(void 0,!0));if(this[g].destroyed)return new Promise(function(q,$){i.nextTick(function(){j[d]?$(j[d]):q(m(void 0,!0))})});var U,P=this[h];if(P)U=new Promise(function(q,$){return function(F,T){q.then(function(){$[f]?F(m(void 0,!0)):$[p](F,T)},T)}}(P,this));else{var z=this[g].read();if(z!==null)return Promise.resolve(m(z,!1));U=new Promise(this[p])}return this[h]=U,U}},Symbol.asyncIterator,function(){return this}),u(o,"return",function(){var j=this;return new Promise(function(I,U){j[g].destroy(null,function(P){P?U(P):I(m(void 0,!0))})})}),o),v);r.exports=function(j){var I,U=Object.create(k,(u(I={},g,{value:j,writable:!0}),u(I,a,{value:null,writable:!0}),u(I,c,{value:null,writable:!0}),u(I,d,{value:null,writable:!0}),u(I,f,{value:j._readableState.endEmitted,writable:!0}),u(I,p,{value:function(P,z){var q=U[g].read();q?(U[h]=null,U[a]=null,U[c]=null,P(m(q,!1))):(U[a]=P,U[c]=z)},writable:!0}),I));return U[h]=null,l(j,function(P){if(P&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"){var z=U[c];return z!==null&&(U[h]=null,U[a]=null,U[c]=null,z(P)),void(U[d]=P)}var q=U[a];q!==null&&(U[h]=null,U[a]=null,U[c]=null,q(m(void 0,!0))),U[f]=!0}),j.on("readable",b.bind(null,U)),U}}).call(this)}).call(this,t("_process"))},{"./end-of-stream":486,_process:467}],484:[function(t,r,s){function i(h,p){var g=Object.keys(h);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(h);p&&(m=m.filter(function(y){return Object.getOwnPropertyDescriptor(h,y).enumerable})),g.push.apply(g,m)}return g}function o(h){for(var p=1;p<arguments.length;p++){var g=arguments[p]!=null?arguments[p]:{};p%2?i(Object(g),!0).forEach(function(m){u(h,m,g[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(g)):i(Object(g)).forEach(function(m){Object.defineProperty(h,m,Object.getOwnPropertyDescriptor(g,m))})}return h}function u(h,p,g){return(p=a(p))in h?Object.defineProperty(h,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):h[p]=g,h}function l(h,p){for(var g=0;g<p.length;g++){var m=p[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(h,a(m.key),m)}}function a(h){var p=function(g,m){if(typeof g!="object"||g===null)return g;var y=g[Symbol.toPrimitive];if(y!==void 0){var b=y.call(g,m);if(typeof b!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(g)}(h,"string");return typeof p=="symbol"?p:String(p)}var c=t("buffer").Buffer,d=t("util").inspect,f=d&&d.custom||"inspect";r.exports=function(){function h(){(function(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")})(this,h),this.head=null,this.tail=null,this.length=0}var p,g;return p=h,(g=[{key:"push",value:function(m){var y={data:m,next:null};this.length>0?this.tail.next=y:this.head=y,this.tail=y,++this.length}},{key:"unshift",value:function(m){var y={data:m,next:this.head};this.length===0&&(this.tail=y),this.head=y,++this.length}},{key:"shift",value:function(){if(this.length!==0){var m=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,m}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(m){if(this.length===0)return"";for(var y=this.head,b=""+y.data;y=y.next;)b+=m+y.data;return b}},{key:"concat",value:function(m){if(this.length===0)return c.alloc(0);for(var y,b,v,k=c.allocUnsafe(m>>>0),j=this.head,I=0;j;)y=j.data,b=k,v=I,c.prototype.copy.call(y,b,v),I+=j.data.length,j=j.next;return k}},{key:"consume",value:function(m,y){var b;return m<this.head.data.length?(b=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):b=m===this.head.data.length?this.shift():y?this._getString(m):this._getBuffer(m),b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var y=this.head,b=1,v=y.data;for(m-=v.length;y=y.next;){var k=y.data,j=m>k.length?k.length:m;if(j===k.length?v+=k:v+=k.slice(0,m),(m-=j)==0){j===k.length?(++b,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=k.slice(j));break}++b}return this.length-=b,v}},{key:"_getBuffer",value:function(m){var y=c.allocUnsafe(m),b=this.head,v=1;for(b.data.copy(y),m-=b.data.length;b=b.next;){var k=b.data,j=m>k.length?k.length:m;if(k.copy(y,y.length-m,0,j),(m-=j)==0){j===k.length?(++v,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=k.slice(j));break}++v}return this.length-=v,y}},{key:f,value:function(m,y){return d(this,o(o({},y),{},{depth:0,customInspect:!1}))}}])&&l(p.prototype,g),Object.defineProperty(p,"prototype",{writable:!1}),h}()},{buffer:220,util:188}],485:[function(t,r,s){(function(i){(function(){function o(a,c){l(a,c),u(a)}function u(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||a.emit("close")}function l(a,c){a.emit("error",c)}r.exports={destroy:function(a,c){var d=this,f=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return f||h?(c?c(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(l,this,a)):i.nextTick(l,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(p){!c&&p?d._writableState?d._writableState.errorEmitted?i.nextTick(u,d):(d._writableState.errorEmitted=!0,i.nextTick(o,d,p)):i.nextTick(o,d,p):c?(i.nextTick(u,d),c(p)):i.nextTick(u,d)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(a,c){var d=a._readableState,f=a._writableState;d&&d.autoDestroy||f&&f.autoDestroy?a.destroy(c):a.emit("error",c)}}}).call(this)}).call(this,t("_process"))},{_process:467}],486:[function(t,r,s){var i=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function o(){}r.exports=function u(l,a,c){if(typeof a=="function")return u(l,null,a);a||(a={}),c=function(j){var I=!1;return function(){if(!I){I=!0;for(var U=arguments.length,P=new Array(U),z=0;z<U;z++)P[z]=arguments[z];j.apply(this,P)}}}(c||o);var d=a.readable||a.readable!==!1&&l.readable,f=a.writable||a.writable!==!1&&l.writable,h=function(){l.writable||g()},p=l._writableState&&l._writableState.finished,g=function(){f=!1,p=!0,d||c.call(l)},m=l._readableState&&l._readableState.endEmitted,y=function(){d=!1,m=!0,f||c.call(l)},b=function(j){c.call(l,j)},v=function(){var j;return d&&!m?(l._readableState&&l._readableState.ended||(j=new i),c.call(l,j)):f&&!p?(l._writableState&&l._writableState.ended||(j=new i),c.call(l,j)):void 0},k=function(){l.req.on("finish",g)};return function(j){return j.setHeader&&typeof j.abort=="function"}(l)?(l.on("complete",g),l.on("abort",v),l.req?k():l.on("request",k)):f&&!l._writableState&&(l.on("end",h),l.on("close",h)),l.on("end",y),l.on("finish",g),a.error!==!1&&l.on("error",b),l.on("close",v),function(){l.removeListener("complete",g),l.removeListener("abort",v),l.removeListener("request",k),l.req&&l.req.removeListener("finish",g),l.removeListener("end",h),l.removeListener("close",h),l.removeListener("finish",g),l.removeListener("end",y),l.removeListener("error",b),l.removeListener("close",v)}}},{"../../../errors":477}],487:[function(t,r,s){r.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(t,r,s){var i,o=t("../../../errors").codes,u=o.ERR_MISSING_ARGS,l=o.ERR_STREAM_DESTROYED;function a(p){if(p)throw p}function c(p,g,m,y){y=function(k){var j=!1;return function(){j||(j=!0,k.apply(void 0,arguments))}}(y);var b=!1;p.on("close",function(){b=!0}),i===void 0&&(i=t("./end-of-stream")),i(p,{readable:g,writable:m},function(k){if(k)return y(k);b=!0,y()});var v=!1;return function(k){if(!b&&!v)return v=!0,function(j){return j.setHeader&&typeof j.abort=="function"}(p)?p.abort():typeof p.destroy=="function"?p.destroy():void y(k||new l("pipe"))}}function d(p){p()}function f(p,g){return p.pipe(g)}function h(p){return p.length?typeof p[p.length-1]!="function"?a:p.pop():a}r.exports=function(){for(var p=arguments.length,g=new Array(p),m=0;m<p;m++)g[m]=arguments[m];var y,b=h(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new u("streams");var v=g.map(function(k,j){var I=j<g.length-1;return c(k,I,j>0,function(U){y||(y=U),U&&v.forEach(d),I||(v.forEach(d),b(y))})});return g.reduce(f)}},{"../../../errors":477,"./end-of-stream":486}],489:[function(t,r,s){var i=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;r.exports={getHighWaterMark:function(o,u,l,a){var c=function(d,f,h){return d.highWaterMark!=null?d.highWaterMark:f?d[h]:null}(u,a,l);if(c!=null){if(!isFinite(c)||Math.floor(c)!==c||c<0)throw new i(a?l:"highWaterMark",c);return Math.floor(c)}return o.objectMode?16:16384}}},{"../../../errors":477}],490:[function(t,r,s){r.exports=t("events").EventEmitter},{events:422}],491:[function(t,r,s){(s=r.exports=t("./lib/_stream_readable.js")).Stream=s,s.Readable=s,s.Writable=t("./lib/_stream_writable.js"),s.Duplex=t("./lib/_stream_duplex.js"),s.Transform=t("./lib/_stream_transform.js"),s.PassThrough=t("./lib/_stream_passthrough.js"),s.finished=t("./lib/internal/streams/end-of-stream.js"),s.pipeline=t("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(t,r,s){var i=function(o){var u=Object.prototype,l=u.hasOwnProperty,a=Object.defineProperty||function(x,S,A){x[S]=A.value},c=typeof Symbol=="function"?Symbol:{},d=c.iterator||"@@iterator",f=c.asyncIterator||"@@asyncIterator",h=c.toStringTag||"@@toStringTag";function p(x,S,A){return Object.defineProperty(x,S,{value:A,enumerable:!0,configurable:!0,writable:!0}),x[S]}try{p({},"")}catch{p=function(S,A,B){return S[A]=B}}function g(x,S,A,B){var E=S&&S.prototype instanceof b?S:b,V=Object.create(E.prototype),X=new C(B||[]);return a(V,"_invoke",{value:$(x,A,X)}),V}function m(x,S,A){try{return{type:"normal",arg:x.call(S,A)}}catch(B){return{type:"throw",arg:B}}}o.wrap=g;var y={};function b(){}function v(){}function k(){}var j={};p(j,d,function(){return this});var I=Object.getPrototypeOf,U=I&&I(I(w([])));U&&U!==u&&l.call(U,d)&&(j=U);var P=k.prototype=b.prototype=Object.create(j);function z(x){["next","throw","return"].forEach(function(S){p(x,S,function(A){return this._invoke(S,A)})})}function q(x,S){var A;a(this,"_invoke",{value:function(B,E){function V(){return new S(function(X,Q){(function D(Z,L,O,G){var nt=m(x[Z],x,L);if(nt.type!=="throw"){var ct=nt.arg,ot=ct.value;return ot&&typeof ot=="object"&&l.call(ot,"__await")?S.resolve(ot.__await).then(function(mt){D("next",mt,O,G)},function(mt){D("throw",mt,O,G)}):S.resolve(ot).then(function(mt){ct.value=mt,O(ct)},function(mt){return D("throw",mt,O,G)})}G(nt.arg)})(B,E,X,Q)})}return A=A?A.then(V,V):V()}})}function $(x,S,A){var B="suspendedStart";return function(E,V){if(B==="executing")throw new Error("Generator is already running");if(B==="completed"){if(E==="throw")throw V;return _()}for(A.method=E,A.arg=V;;){var X=A.delegate;if(X){var Q=F(X,A);if(Q){if(Q===y)continue;return Q}}if(A.method==="next")A.sent=A._sent=A.arg;else if(A.method==="throw"){if(B==="suspendedStart")throw B="completed",A.arg;A.dispatchException(A.arg)}else A.method==="return"&&A.abrupt("return",A.arg);B="executing";var D=m(x,S,A);if(D.type==="normal"){if(B=A.done?"completed":"suspendedYield",D.arg===y)continue;return{value:D.arg,done:A.done}}D.type==="throw"&&(B="completed",A.method="throw",A.arg=D.arg)}}}function F(x,S){var A=S.method,B=x.iterator[A];if(B===void 0)return S.delegate=null,A==="throw"&&x.iterator.return&&(S.method="return",S.arg=void 0,F(x,S),S.method==="throw")||A!=="return"&&(S.method="throw",S.arg=new TypeError("The iterator does not provide a '"+A+"' method")),y;var E=m(B,x.iterator,S.arg);if(E.type==="throw")return S.method="throw",S.arg=E.arg,S.delegate=null,y;var V=E.arg;return V?V.done?(S[x.resultName]=V.value,S.next=x.nextLoc,S.method!=="return"&&(S.method="next",S.arg=void 0),S.delegate=null,y):V:(S.method="throw",S.arg=new TypeError("iterator result is not an object"),S.delegate=null,y)}function T(x){var S={tryLoc:x[0]};1 in x&&(S.catchLoc=x[1]),2 in x&&(S.finallyLoc=x[2],S.afterLoc=x[3]),this.tryEntries.push(S)}function N(x){var S=x.completion||{};S.type="normal",delete S.arg,x.completion=S}function C(x){this.tryEntries=[{tryLoc:"root"}],x.forEach(T,this),this.reset(!0)}function w(x){if(x){var S=x[d];if(S)return S.call(x);if(typeof x.next=="function")return x;if(!isNaN(x.length)){var A=-1,B=function E(){for(;++A<x.length;)if(l.call(x,A))return E.value=x[A],E.done=!1,E;return E.value=void 0,E.done=!0,E};return B.next=B}}return{next:_}}function _(){return{value:void 0,done:!0}}return v.prototype=k,a(P,"constructor",{value:k,configurable:!0}),a(k,"constructor",{value:v,configurable:!0}),v.displayName=p(k,h,"GeneratorFunction"),o.isGeneratorFunction=function(x){var S=typeof x=="function"&&x.constructor;return!!S&&(S===v||(S.displayName||S.name)==="GeneratorFunction")},o.mark=function(x){return Object.setPrototypeOf?Object.setPrototypeOf(x,k):(x.__proto__=k,p(x,h,"GeneratorFunction")),x.prototype=Object.create(P),x},o.awrap=function(x){return{__await:x}},z(q.prototype),p(q.prototype,f,function(){return this}),o.AsyncIterator=q,o.async=function(x,S,A,B,E){E===void 0&&(E=Promise);var V=new q(g(x,S,A,B),E);return o.isGeneratorFunction(S)?V:V.next().then(function(X){return X.done?X.value:V.next()})},z(P),p(P,h,"Generator"),p(P,d,function(){return this}),p(P,"toString",function(){return"[object Generator]"}),o.keys=function(x){var S=Object(x),A=[];for(var B in S)A.push(B);return A.reverse(),function E(){for(;A.length;){var V=A.pop();if(V in S)return E.value=V,E.done=!1,E}return E.done=!0,E}},o.values=w,C.prototype={constructor:C,reset:function(x){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!x)for(var S in this)S.charAt(0)==="t"&&l.call(this,S)&&!isNaN(+S.slice(1))&&(this[S]=void 0)},stop:function(){this.done=!0;var x=this.tryEntries[0].completion;if(x.type==="throw")throw x.arg;return this.rval},dispatchException:function(x){if(this.done)throw x;var S=this;function A(D,Z){return V.type="throw",V.arg=x,S.next=D,Z&&(S.method="next",S.arg=void 0),!!Z}for(var B=this.tryEntries.length-1;B>=0;--B){var E=this.tryEntries[B],V=E.completion;if(E.tryLoc==="root")return A("end");if(E.tryLoc<=this.prev){var X=l.call(E,"catchLoc"),Q=l.call(E,"finallyLoc");if(X&&Q){if(this.prev<E.catchLoc)return A(E.catchLoc,!0);if(this.prev<E.finallyLoc)return A(E.finallyLoc)}else if(X){if(this.prev<E.catchLoc)return A(E.catchLoc,!0)}else{if(!Q)throw new Error("try statement without catch or finally");if(this.prev<E.finallyLoc)return A(E.finallyLoc)}}}},abrupt:function(x,S){for(var A=this.tryEntries.length-1;A>=0;--A){var B=this.tryEntries[A];if(B.tryLoc<=this.prev&&l.call(B,"finallyLoc")&&this.prev<B.finallyLoc){var E=B;break}}E&&(x==="break"||x==="continue")&&E.tryLoc<=S&&S<=E.finallyLoc&&(E=null);var V=E?E.completion:{};return V.type=x,V.arg=S,E?(this.method="next",this.next=E.finallyLoc,y):this.complete(V)},complete:function(x,S){if(x.type==="throw")throw x.arg;return x.type==="break"||x.type==="continue"?this.next=x.arg:x.type==="return"?(this.rval=this.arg=x.arg,this.method="return",this.next="end"):x.type==="normal"&&S&&(this.next=S),y},finish:function(x){for(var S=this.tryEntries.length-1;S>=0;--S){var A=this.tryEntries[S];if(A.finallyLoc===x)return this.complete(A.completion,A.afterLoc),N(A),y}},catch:function(x){for(var S=this.tryEntries.length-1;S>=0;--S){var A=this.tryEntries[S];if(A.tryLoc===x){var B=A.completion;if(B.type==="throw"){var E=B.arg;N(A)}return E}}throw new Error("illegal catch attempt")},delegateYield:function(x,S,A){return this.delegate={iterator:w(x),resultName:S,nextLoc:A},this.method==="next"&&(this.arg=void 0),y}},o}(typeof r=="object"?r.exports:{});try{regeneratorRuntime=i}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},{}],493:[function(t,r,s){var i=t("buffer").Buffer,o=t("inherits"),u=t("hash-base"),l=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],c=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],d=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],f=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],p=[1352829926,1548603684,1836072691,2053994217,0];function g(){u.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function m(I,U){return I<<U|I>>>32-U}function y(I,U,P,z,q,$,F,T){return m(I+(U^P^z)+$+F|0,T)+q|0}function b(I,U,P,z,q,$,F,T){return m(I+(U&P|~U&z)+$+F|0,T)+q|0}function v(I,U,P,z,q,$,F,T){return m(I+((U|~P)^z)+$+F|0,T)+q|0}function k(I,U,P,z,q,$,F,T){return m(I+(U&z|P&~z)+$+F|0,T)+q|0}function j(I,U,P,z,q,$,F,T){return m(I+(U^(P|~z))+$+F|0,T)+q|0}o(g,u),g.prototype._update=function(){for(var I=l,U=0;U<16;++U)I[U]=this._block.readInt32LE(4*U);for(var P=0|this._a,z=0|this._b,q=0|this._c,$=0|this._d,F=0|this._e,T=0|this._a,N=0|this._b,C=0|this._c,w=0|this._d,_=0|this._e,x=0;x<80;x+=1){var S,A;x<16?(S=y(P,z,q,$,F,I[a[x]],h[0],d[x]),A=j(T,N,C,w,_,I[c[x]],p[0],f[x])):x<32?(S=b(P,z,q,$,F,I[a[x]],h[1],d[x]),A=k(T,N,C,w,_,I[c[x]],p[1],f[x])):x<48?(S=v(P,z,q,$,F,I[a[x]],h[2],d[x]),A=v(T,N,C,w,_,I[c[x]],p[2],f[x])):x<64?(S=k(P,z,q,$,F,I[a[x]],h[3],d[x]),A=b(T,N,C,w,_,I[c[x]],p[3],f[x])):(S=j(P,z,q,$,F,I[a[x]],h[4],d[x]),A=y(T,N,C,w,_,I[c[x]],p[4],f[x])),P=F,F=$,$=m(q,10),q=z,z=S,T=_,_=w,w=m(C,10),C=N,N=A}var B=this._b+q+w|0;this._b=this._c+$+_|0,this._c=this._d+F+T|0,this._d=this._e+P+N|0,this._e=this._a+z+C|0,this._a=B},g.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var I=i.alloc?i.alloc(20):new i(20);return I.writeInt32LE(this._a,0),I.writeInt32LE(this._b,4),I.writeInt32LE(this._c,8),I.writeInt32LE(this._d,12),I.writeInt32LE(this._e,16),I},r.exports=g},{buffer:220,"hash-base":425,inherits:440}],494:[function(t,r,s){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var i=t("buffer"),o=i.Buffer;function u(a,c){for(var d in a)c[d]=a[d]}function l(a,c,d){return o(a,c,d)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?r.exports=i:(u(i,s),s.Buffer=l),l.prototype=Object.create(o.prototype),u(o,l),l.from=function(a,c,d){if(typeof a=="number")throw new TypeError("Argument must not be a number");return o(a,c,d)},l.alloc=function(a,c,d){if(typeof a!="number")throw new TypeError("Argument must be a number");var f=o(a);return c!==void 0?typeof d=="string"?f.fill(c,d):f.fill(c):f.fill(0),f},l.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return o(a)},l.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(a)}},{buffer:220}],495:[function(t,r,s){(function(i){(function(){var o,u=t("buffer"),l=u.Buffer,a={};for(o in u)u.hasOwnProperty(o)&&o!=="SlowBuffer"&&o!=="Buffer"&&(a[o]=u[o]);var c=a.Buffer={};for(o in l)l.hasOwnProperty(o)&&o!=="allocUnsafe"&&o!=="allocUnsafeSlow"&&(c[o]=l[o]);if(a.Buffer.prototype=l.prototype,c.from&&c.from!==Uint8Array.from||(c.from=function(d,f,h){if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof d);if(d&&d.length===void 0)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);return l(d,f,h)}),c.alloc||(c.alloc=function(d,f,h){if(typeof d!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof d);if(d<0||d>=2*(1<<30))throw new RangeError('The value "'+d+'" is invalid for option "size"');var p=l(d);return f&&f.length!==0?typeof h=="string"?p.fill(f,h):p.fill(f):p.fill(0),p}),!a.kStringMaxLength)try{a.kStringMaxLength=i.binding("buffer").kStringMaxLength}catch{}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),r.exports=a}).call(this)}).call(this,t("_process"))},{_process:467,buffer:220}],496:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0});const i=t("xmlchars/xml/1.0/ed5"),o=t("xmlchars/xml/1.1/ed2"),u=t("xmlchars/xmlns/1.0/ed3");var l=i.isS,a=i.isChar,c=i.isNameStartChar,d=i.isNameChar,f=i.S_LIST,h=i.NAME_RE,p=o.isChar,g=u.isNCNameStartChar,m=u.isNCNameChar,y=u.NC_NAME_RE;const b="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/2000/xmlns/",k={__proto__:null,xml:b,xmlns:v},j={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},I=w=>w===34||w===39,U=[34,39],P=[...U,91,62],z=[...U,60,93],q=[61,63,...f],$=[...f,62,38,60];function F(w,_,x){switch(_){case"xml":x!==b&&w.fail(`xml prefix must be bound to ${b}.`);break;case"xmlns":x!==v&&w.fail(`xmlns prefix must be bound to ${v}.`)}switch(x){case v:w.fail(_===""?`the default namespace may not be set to ${x}.`:`may not assign a prefix (even "xmlns") to the URI ${v}.`);break;case b:switch(_){case"xml":break;case"":w.fail(`the default namespace may not be set to ${x}.`);break;default:w.fail("may not assign the xml namespace to another prefix.")}}}const T=w=>y.test(w),N=w=>h.test(w);s.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const C={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};s.SaxesParser=class{constructor(w){this.opt=w??{},this.fragmentOpt=!!this.opt.fragment;const _=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,_){this.nameStartCheck=g,this.nameCheck=m,this.isName=T,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},k);const x=this.opt.additionalNamespaces;x!=null&&(function(S,A){for(const B of Object.keys(A))F(S,B,A[B])}(this,x),Object.assign(this.ns,x))}else this.nameStartCheck=c,this.nameCheck=d,this.isName=N,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var w;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:_}=this;this.state=_?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=_,this.xmlDeclPossible=!_,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:x}=this.opt;if(x===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");x="1.0"}this.setXMLVersion(x),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(j),(w=this.readyHandler)===null||w===void 0||w.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(w,_){this[C[w]]=_}off(w){this[C[w]]=void 0}makeError(w){var _;let x=(_=this.fileName)!==null&&_!==void 0?_:"";return this.trackPosition&&(x.length>0&&(x+=":"),x+=`${this.line}:${this.column}`),x.length>0&&(x+=": "),new Error(x+w)}fail(w){const _=this.makeError(w),x=this.errorHandler;if(x===void 0)throw _;return x(_),this}write(w){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let _=!1;w===null?(_=!0,w=""):typeof w=="object"&&(w=w.toString()),this.carriedFromPrevious!==void 0&&(w=`${this.carriedFromPrevious}${w}`,this.carriedFromPrevious=void 0);let x=w.length;const S=w.charCodeAt(x-1);!_&&(S===13||S>=55296&&S<=56319)&&(this.carriedFromPrevious=w[x-1],x--,w=w.slice(0,x));const{stateTable:A}=this;for(this.chunk=w,this.i=0;this.i<x;)A[this.state].call(this);return this.chunkPosition+=x,_?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:w,i:_}=this;if(this.prevI=_,this.i=_+1,_>=w.length)return-1;const x=w.charCodeAt(_);if(this.column++,x<55296){if(x>=32||x===9)return x;switch(x){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return w.charCodeAt(_+1)===10&&(this.i=_+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),x}}if(x>56319)return x>=57344&&x<=65533||this.fail("disallowed character."),x;const S=65536+1024*(x-55296)+(w.charCodeAt(_+1)-56320);return this.i=_+2,S>1114111&&this.fail("disallowed character."),S}getCode11(){const{chunk:w,i:_}=this;if(this.prevI=_,this.i=_+1,_>=w.length)return-1;const x=w.charCodeAt(_);if(this.column++,x<55296){if(x>31&&x<127||x>159&&x!==8232||x===9)return x;switch(x){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{const A=w.charCodeAt(_+1);A!==10&&A!==133||(this.i=_+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),x}}if(x>56319)return x>=57344&&x<=65533||this.fail("disallowed character."),x;const S=65536+1024*(x-55296)+(w.charCodeAt(_+1)-56320);return this.i=_+2,S>1114111&&this.fail("disallowed character."),S}getCodeNorm(){const w=this.getCode();return w===-2?10:w}unget(){this.i=this.prevI,this.column--}captureTo(w){let{i:_}=this;const{chunk:x}=this;for(;;){const S=this.getCode(),A=S===-2,B=A?10:S;if(B===-1||w.includes(B))return this.text+=x.slice(_,this.prevI),B;A&&(this.text+=x.slice(_,this.prevI)+`
`,_=this.i)}}captureToChar(w){let{i:_}=this;const{chunk:x}=this;for(;;){let S=this.getCode();switch(S){case-2:this.text+=x.slice(_,this.prevI)+`
`,_=this.i,S=10;break;case-1:return this.text+=x.slice(_),!1}if(S===w)return this.text+=x.slice(_,this.prevI),!0}}captureNameChars(){const{chunk:w,i:_}=this;for(;;){const x=this.getCode();if(x===-1)return this.name+=w.slice(_),-1;if(!d(x))return this.name+=w.slice(_,this.prevI),x===-2?10:x}}skipSpaces(){for(;;){const w=this.getCodeNorm();if(w===-1||!l(w))return w}}setXMLVersion(w){this.currentXMLVersion=w,w==="1.0"?(this.isChar=a,this.getCode=this.getCode10):(this.isChar=p,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const w=this.i,_=this.skipSpaces();switch(this.prevI!==w&&(this.xmlDeclPossible=!1),_){case 60:if(this.state=15,this.text.length!==0)throw new Error("no-empty text at start");break;case-1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var w;const _=this.captureTo(P);switch(_){case 62:(w=this.doctypeHandler)===null||w===void 0||w.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case-1:break;default:this.text+=String.fromCodePoint(_),_===91?this.state=4:I(_)&&(this.state=3,this.q=_)}}sDoctypeQuote(){const w=this.q;this.captureToChar(w)&&(this.text+=String.fromCodePoint(w),this.q=null,this.state=2)}sDTD(){const w=this.captureTo(z);w!==-1&&(this.text+=String.fromCodePoint(w),w===93?this.state=2:w===60?this.state=6:I(w)&&(this.state=5,this.q=w))}sDTDQuoted(){const w=this.q;this.captureToChar(w)&&(this.text+=String.fromCodePoint(w),this.state=4,this.q=null)}sDTDOpenWaka(){const w=this.getCodeNorm();switch(this.text+=String.fromCodePoint(w),w){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const w=String.fromCodePoint(this.getCodeNorm()),_=this.openWakaBang+=w;this.text+=w,_!=="-"&&(this.state=_==="--"?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const w=this.getCodeNorm();this.text+=String.fromCodePoint(w),this.state=w===45?10:8}sDTDCommentEnded(){const w=this.getCodeNorm();this.text+=String.fromCodePoint(w),w===62?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const w=this.getCodeNorm();this.text+=String.fromCodePoint(w),w===62&&(this.state=4)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:w}=this;const{chunk:_}=this;t:for(;;)switch(this.getCode()){case-2:this.entity+=_.slice(w,this.prevI)+`
`,w=this.i;break;case 59:{const{entityReturnState:x}=this,S=this.entity+_.slice(w,this.prevI);let A;this.state=x,S===""?(this.fail("empty entity name."),A="&;"):(A=this.parseEntity(S),this.entity=""),x===13&&this.textHandler===void 0||(this.text+=A);break t}case-1:this.entity+=_.slice(w);break t}}sOpenWaka(){const w=this.getCode();if(c(w))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(w){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var w;const _=this.getCodeNorm();_===45?(this.state=19,(w=this.commentHandler)===null||w===void 0||w.call(this,this.text),this.text=""):(this.text+="-"+String.fromCodePoint(_),this.state=17)}sCommentEnded(){const w=this.getCodeNorm();w!==62?(this.fail("malformed comment."),this.text+="--"+String.fromCodePoint(w),this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){const w=this.getCodeNorm();w===93?this.state=22:(this.text+="]"+String.fromCodePoint(w),this.state=20)}sCDataEnding2(){var w;const _=this.getCodeNorm();switch(_){case 62:(w=this.cdataHandler)===null||w===void 0||w.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+="]]"+String.fromCodePoint(_),this.state=20}}sPIFirstChar(){const w=this.getCodeNorm();this.nameStartCheck(w)?(this.piTarget+=String.fromCodePoint(w),this.state=24):w===63||l(w)?(this.fail("processing instruction without a target."),this.state=w===63?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(w),this.state=24)}sPIRest(){const{chunk:w,i:_}=this;for(;;){const x=this.getCodeNorm();if(x===-1)return void(this.piTarget+=w.slice(_));if(!this.nameCheck(x)){this.piTarget+=w.slice(_,this.prevI);const S=x===63;S||l(x)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=S?33:27):this.state=S?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(x));break}}}sPIBody(){if(this.text.length===0){const w=this.getCodeNorm();w===63?this.state=26:l(w)||(this.text=String.fromCodePoint(w))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var w;const _=this.getCodeNorm();if(_===62){const{piTarget:x}=this;x.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(w=this.piHandler)===null||w===void 0||w.call(this,{target:x,body:this.text}),this.piTarget=this.text="",this.state=13}else _===63?this.text+="?":(this.text+="?"+String.fromCodePoint(_),this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const w=this.skipSpaces();w!==63?w!==-1&&(this.state=28,this.name=String.fromCodePoint(w)):this.state=33}sXMLDeclName(){const w=this.captureTo(q);if(w===63)return this.state=33,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(l(w)||w===61){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail("expected one of "+this.xmlDeclExpects.join(", "))}this.state=w===61?30:29}}sXMLDeclEq(){const w=this.getCodeNorm();if(w===63)return this.state=33,void this.fail("XML declaration is incomplete.");l(w)||(w!==61&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const w=this.getCodeNorm();if(w===63)return this.state=33,void this.fail("XML declaration is incomplete.");l(w)||(I(w)?this.q=w:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const w=this.captureTo([this.q,63]);if(w===63)return this.state=33,this.text="",void this.fail("XML declaration is incomplete.");if(w===-1)return;const _=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const x=_;this.xmlDecl.version=x,/^1\.[0-9]+$/.test(x)?this.opt.forceXMLVersion||this.setXMLVersion(x):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(_)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=_;break;case"standalone":_!=="yes"&&_!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=_}this.name="",this.state=32}sXMLDeclSeparator(){const w=this.getCodeNorm();w!==63?(l(w)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=33}sXMLDeclEnding(){var w;this.getCodeNorm()===62?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(w=this.xmldeclHandler)===null||w===void 0||w.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var w;const _=this.captureNameChars();if(_===-1)return;const x=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=x.ns=Object.create(null)),(w=this.openTagStartHandler)===null||w===void 0||w.call(this,x),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),_){case 62:this.openTag();break;case 47:this.state=35;break;default:l(_)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===62?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const w=this.skipSpaces();w!==-1&&(c(w)?(this.unget(),this.state=37):w===62?this.openTag():w===47?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const w=this.captureNameChars();w===61?this.state=39:l(w)?this.state=38:w===62?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):w!==-1&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const w=this.skipSpaces();switch(w){case-1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",w===62?this.openTag():c(w)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const w=this.getCodeNorm();I(w)?(this.q=w,this.state=40):l(w)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:w,chunk:_}=this;let{i:x}=this;for(;;)switch(this.getCode()){case w:return this.pushAttrib(this.name,this.text+_.slice(x,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=_.slice(x,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case-2:case 9:this.text+=_.slice(x,this.prevI)+" ",x=this.i;break;case 60:return this.text+=_.slice(x,this.prevI),void this.fail("disallowed character.");case-1:return void(this.text+=_.slice(x))}}sAttribValueClosed(){const w=this.getCodeNorm();l(w)?this.state=36:w===62?this.openTag():w===47?this.state=35:c(w)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const w=this.captureTo($);switch(w){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case-1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",w===62?this.openTag():this.state=36}}sCloseTag(){const w=this.captureNameChars();w===62?this.closeTag():l(w)?this.state=44:w!==-1&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case-1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:w,forbiddenState:_}=this;const{chunk:x,textHandler:S}=this;t:for(;;)switch(this.getCode()){case 60:if(this.state=15,S!==void 0){const{text:A}=this,B=x.slice(w,this.prevI);A.length!==0?(S(A+B),this.text=""):B.length!==0&&S(B)}_=0;break t;case 38:this.state=14,this.entityReturnState=13,S!==void 0&&(this.text+=x.slice(w,this.prevI)),_=0;break t;case 93:switch(_){case 0:_=1;break;case 1:_=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:_===2&&this.fail('the string "]]>" is disallowed in char data.'),_=0;break;case-2:S!==void 0&&(this.text+=x.slice(w,this.prevI)+`
`),w=this.i,_=0;break;case-1:S!==void 0&&(this.text+=x.slice(w));break t;default:_=0}this.forbiddenState=_}handleTextOutsideRoot(){let{i:w}=this;const{chunk:_,textHandler:x}=this;let S=!1;t:for(;;){const A=this.getCode();switch(A){case 60:if(this.state=15,x!==void 0){const{text:B}=this,E=_.slice(w,this.prevI);B.length!==0?(x(B+E),this.text=""):E.length!==0&&x(E)}break t;case 38:this.state=14,this.entityReturnState=13,x!==void 0&&(this.text+=_.slice(w,this.prevI)),S=!0;break t;case-2:x!==void 0&&(this.text+=_.slice(w,this.prevI)+`
`),w=this.i;break;case-1:x!==void 0&&(this.text+=_.slice(w));break t;default:l(A)||(S=!0)}}S&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(w,_){var x;const{prefix:S,local:A}=this.qname(w),B={name:w,prefix:S,local:A,value:_};if(this.attribList.push(B),(x=this.attributeHandler)===null||x===void 0||x.call(this,B),S==="xmlns"){const E=_.trim();this.currentXMLVersion==="1.0"&&E===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[A]=E,F(this,A,E)}else if(w==="xmlns"){const E=_.trim();this.topNS[""]=E,F(this,"",E)}}pushAttribPlain(w,_){var x;const S={name:w,value:_};this.attribList.push(S),(x=this.attributeHandler)===null||x===void 0||x.call(this,S)}end(){var w,_;this.sawRoot||this.fail("document must contain a root element.");const{tags:x}=this;for(;x.length>0;){const A=x.pop();this.fail("unclosed tag: "+A.name)}this.state!==0&&this.state!==13&&this.fail("unexpected end.");const{text:S}=this;return S.length!==0&&((w=this.textHandler)===null||w===void 0||w.call(this,S),this.text=""),this._closed=!0,(_=this.endHandler)===null||_===void 0||_.call(this),this._init(),this}resolve(w){var _,x;let S=this.topNS[w];if(S!==void 0)return S;const{tags:A}=this;for(let B=A.length-1;B>=0;B--)if(S=A[B].ns[w],S!==void 0)return S;return S=this.ns[w],S!==void 0?S:(x=(_=this.opt).resolvePrefix)===null||x===void 0?void 0:x.call(_,w)}qname(w){const _=w.indexOf(":");if(_===-1)return{prefix:"",local:w};const x=w.slice(_+1),S=w.slice(0,_);return(S===""||x===""||x.includes(":"))&&this.fail(`malformed name: ${w}.`),{prefix:S,local:x}}processAttribsNS(){var w;const{attribList:_}=this,x=this.tag;{const{prefix:B,local:E}=this.qname(x.name);x.prefix=B,x.local=E;const V=x.uri=(w=this.resolve(B))!==null&&w!==void 0?w:"";B!==""&&(B==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),V===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(B)}.`),x.uri=B))}if(_.length===0)return;const{attributes:S}=x,A=new Set;for(const B of _){const{name:E,prefix:V,local:X}=B;let Q,D;V===""?(Q=E==="xmlns"?v:"",D=E):(Q=this.resolve(V),Q===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(V)}.`),Q=V),D=`{${Q}}${X}`),A.has(D)&&this.fail(`duplicate attribute: ${D}.`),A.add(D),B.uri=Q,S[E]=B}this.attribList=[]}processAttribsPlain(){const{attribList:w}=this,_=this.tag.attributes;for(const{name:x,value:S}of w)_[x]!==void 0&&this.fail(`duplicate attribute: ${x}.`),_[x]=S;this.attribList=[]}openTag(){var w;this.processAttribs();const{tags:_}=this,x=this.tag;x.isSelfClosing=!1,(w=this.openTagHandler)===null||w===void 0||w.call(this,x),_.push(x),this.state=13,this.name=""}openSelfClosingTag(){var w,_,x;this.processAttribs();const{tags:S}=this,A=this.tag;A.isSelfClosing=!0,(w=this.openTagHandler)===null||w===void 0||w.call(this,A),(_=this.closeTagHandler)===null||_===void 0||_.call(this,A),(this.tag=(x=S[S.length-1])!==null&&x!==void 0?x:null)===null&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){const{tags:w,name:_}=this;if(this.state=13,this.name="",_==="")return this.fail("weird empty close tag."),void(this.text+="</>");const x=this.closeTagHandler;let S=w.length;for(;S-- >0;){const A=this.tag=w.pop();if(this.topNS=A.ns,x==null||x(A),A.name===_)break;this.fail("unexpected close tag.")}S===0?this.closedRoot=!0:S<0&&(this.fail(`unmatched closing tag: ${_}.`),this.text+=`</${_}>`)}parseEntity(w){if(w[0]!=="#"){const x=this.ENTITIES[w];return x!==void 0?x:(this.fail(this.isName(w)?"undefined entity.":"disallowed character in entity name."),`&${w};`)}let _=NaN;return w[1]==="x"&&/^#x[0-9a-f]+$/i.test(w)?_=parseInt(w.slice(2),16):/^#[0-9]+$/.test(w)&&(_=parseInt(w.slice(1),10)),this.isChar(_)?String.fromCodePoint(_):(this.fail("malformed character entity."),`&${w};`)}}},{"xmlchars/xml/1.0/ed5":543,"xmlchars/xml/1.1/ed2":544,"xmlchars/xmlns/1.0/ed3":545}],497:[function(t,r,s){var i=t("safe-buffer").Buffer;function o(u,l){this._block=i.alloc(u),this._finalSize=l,this._blockSize=u,this._len=0}o.prototype.update=function(u,l){typeof u=="string"&&(l=l||"utf8",u=i.from(u,l));for(var a=this._block,c=this._blockSize,d=u.length,f=this._len,h=0;h<d;){for(var p=f%c,g=Math.min(d-h,c-p),m=0;m<g;m++)a[p+m]=u[h+m];h+=g,(f+=g)%c==0&&this._update(a)}return this._len+=d,this},o.prototype.digest=function(u){var l=this._len%this._blockSize;this._block[l]=128,this._block.fill(0,l+1),l>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=8*this._len;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var c=(4294967295&a)>>>0,d=(a-c)/4294967296;this._block.writeUInt32BE(d,this._blockSize-8),this._block.writeUInt32BE(c,this._blockSize-4)}this._update(this._block);var f=this._hash();return u?f.toString(u):f},o.prototype._update=function(){throw new Error("_update must be implemented by subclass")},r.exports=o},{"safe-buffer":494}],498:[function(t,r,s){var i=r.exports=function(o){o=o.toLowerCase();var u=i[o];if(!u)throw new Error(o+" is not supported (we accept pull requests)");return new u};i.sha=t("./sha"),i.sha1=t("./sha1"),i.sha224=t("./sha224"),i.sha256=t("./sha256"),i.sha384=t("./sha384"),i.sha512=t("./sha512")},{"./sha":499,"./sha1":500,"./sha224":501,"./sha256":502,"./sha384":503,"./sha512":504}],499:[function(t,r,s){var i=t("inherits"),o=t("./hash"),u=t("safe-buffer").Buffer,l=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function c(){this.init(),this._w=a,o.call(this,64,56)}function d(h){return h<<30|h>>>2}function f(h,p,g,m){return h===0?p&g|~p&m:h===2?p&g|p&m|g&m:p^g^m}i(c,o),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(h){for(var p,g=this._w,m=0|this._a,y=0|this._b,b=0|this._c,v=0|this._d,k=0|this._e,j=0;j<16;++j)g[j]=h.readInt32BE(4*j);for(;j<80;++j)g[j]=g[j-3]^g[j-8]^g[j-14]^g[j-16];for(var I=0;I<80;++I){var U=~~(I/20),P=0|((p=m)<<5|p>>>27)+f(U,y,b,v)+k+g[I]+l[U];k=v,v=b,b=d(y),y=m,m=P}this._a=m+this._a|0,this._b=y+this._b|0,this._c=b+this._c|0,this._d=v+this._d|0,this._e=k+this._e|0},c.prototype._hash=function(){var h=u.allocUnsafe(20);return h.writeInt32BE(0|this._a,0),h.writeInt32BE(0|this._b,4),h.writeInt32BE(0|this._c,8),h.writeInt32BE(0|this._d,12),h.writeInt32BE(0|this._e,16),h},r.exports=c},{"./hash":497,inherits:440,"safe-buffer":494}],500:[function(t,r,s){var i=t("inherits"),o=t("./hash"),u=t("safe-buffer").Buffer,l=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function c(){this.init(),this._w=a,o.call(this,64,56)}function d(p){return p<<5|p>>>27}function f(p){return p<<30|p>>>2}function h(p,g,m,y){return p===0?g&m|~g&y:p===2?g&m|g&y|m&y:g^m^y}i(c,o),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(p){for(var g,m=this._w,y=0|this._a,b=0|this._b,v=0|this._c,k=0|this._d,j=0|this._e,I=0;I<16;++I)m[I]=p.readInt32BE(4*I);for(;I<80;++I)m[I]=(g=m[I-3]^m[I-8]^m[I-14]^m[I-16])<<1|g>>>31;for(var U=0;U<80;++U){var P=~~(U/20),z=d(y)+h(P,b,v,k)+j+m[U]+l[P]|0;j=k,k=v,v=f(b),b=y,y=z}this._a=y+this._a|0,this._b=b+this._b|0,this._c=v+this._c|0,this._d=k+this._d|0,this._e=j+this._e|0},c.prototype._hash=function(){var p=u.allocUnsafe(20);return p.writeInt32BE(0|this._a,0),p.writeInt32BE(0|this._b,4),p.writeInt32BE(0|this._c,8),p.writeInt32BE(0|this._d,12),p.writeInt32BE(0|this._e,16),p},r.exports=c},{"./hash":497,inherits:440,"safe-buffer":494}],501:[function(t,r,s){var i=t("inherits"),o=t("./sha256"),u=t("./hash"),l=t("safe-buffer").Buffer,a=new Array(64);function c(){this.init(),this._w=a,u.call(this,64,56)}i(c,o),c.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},c.prototype._hash=function(){var d=l.allocUnsafe(28);return d.writeInt32BE(this._a,0),d.writeInt32BE(this._b,4),d.writeInt32BE(this._c,8),d.writeInt32BE(this._d,12),d.writeInt32BE(this._e,16),d.writeInt32BE(this._f,20),d.writeInt32BE(this._g,24),d},r.exports=c},{"./hash":497,"./sha256":502,inherits:440,"safe-buffer":494}],502:[function(t,r,s){var i=t("inherits"),o=t("./hash"),u=t("safe-buffer").Buffer,l=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function c(){this.init(),this._w=a,o.call(this,64,56)}function d(m,y,b){return b^m&(y^b)}function f(m,y,b){return m&y|b&(m|y)}function h(m){return(m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10)}function p(m){return(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7)}function g(m){return(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3}i(c,o),c.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},c.prototype._update=function(m){for(var y,b=this._w,v=0|this._a,k=0|this._b,j=0|this._c,I=0|this._d,U=0|this._e,P=0|this._f,z=0|this._g,q=0|this._h,$=0;$<16;++$)b[$]=m.readInt32BE(4*$);for(;$<64;++$)b[$]=0|(((y=b[$-2])>>>17|y<<15)^(y>>>19|y<<13)^y>>>10)+b[$-7]+g(b[$-15])+b[$-16];for(var F=0;F<64;++F){var T=q+p(U)+d(U,P,z)+l[F]+b[F]|0,N=h(v)+f(v,k,j)|0;q=z,z=P,P=U,U=I+T|0,I=j,j=k,k=v,v=T+N|0}this._a=v+this._a|0,this._b=k+this._b|0,this._c=j+this._c|0,this._d=I+this._d|0,this._e=U+this._e|0,this._f=P+this._f|0,this._g=z+this._g|0,this._h=q+this._h|0},c.prototype._hash=function(){var m=u.allocUnsafe(32);return m.writeInt32BE(this._a,0),m.writeInt32BE(this._b,4),m.writeInt32BE(this._c,8),m.writeInt32BE(this._d,12),m.writeInt32BE(this._e,16),m.writeInt32BE(this._f,20),m.writeInt32BE(this._g,24),m.writeInt32BE(this._h,28),m},r.exports=c},{"./hash":497,inherits:440,"safe-buffer":494}],503:[function(t,r,s){var i=t("inherits"),o=t("./sha512"),u=t("./hash"),l=t("safe-buffer").Buffer,a=new Array(160);function c(){this.init(),this._w=a,u.call(this,128,112)}i(c,o),c.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},c.prototype._hash=function(){var d=l.allocUnsafe(48);function f(h,p,g){d.writeInt32BE(h,g),d.writeInt32BE(p,g+4)}return f(this._ah,this._al,0),f(this._bh,this._bl,8),f(this._ch,this._cl,16),f(this._dh,this._dl,24),f(this._eh,this._el,32),f(this._fh,this._fl,40),d},r.exports=c},{"./hash":497,"./sha512":504,inherits:440,"safe-buffer":494}],504:[function(t,r,s){var i=t("inherits"),o=t("./hash"),u=t("safe-buffer").Buffer,l=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function c(){this.init(),this._w=a,o.call(this,128,112)}function d(k,j,I){return I^k&(j^I)}function f(k,j,I){return k&j|I&(k|j)}function h(k,j){return(k>>>28|j<<4)^(j>>>2|k<<30)^(j>>>7|k<<25)}function p(k,j){return(k>>>14|j<<18)^(k>>>18|j<<14)^(j>>>9|k<<23)}function g(k,j){return(k>>>1|j<<31)^(k>>>8|j<<24)^k>>>7}function m(k,j){return(k>>>1|j<<31)^(k>>>8|j<<24)^(k>>>7|j<<25)}function y(k,j){return(k>>>19|j<<13)^(j>>>29|k<<3)^k>>>6}function b(k,j){return(k>>>19|j<<13)^(j>>>29|k<<3)^(k>>>6|j<<26)}function v(k,j){return k>>>0<j>>>0?1:0}i(c,o),c.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},c.prototype._update=function(k){for(var j=this._w,I=0|this._ah,U=0|this._bh,P=0|this._ch,z=0|this._dh,q=0|this._eh,$=0|this._fh,F=0|this._gh,T=0|this._hh,N=0|this._al,C=0|this._bl,w=0|this._cl,_=0|this._dl,x=0|this._el,S=0|this._fl,A=0|this._gl,B=0|this._hl,E=0;E<32;E+=2)j[E]=k.readInt32BE(4*E),j[E+1]=k.readInt32BE(4*E+4);for(;E<160;E+=2){var V=j[E-30],X=j[E-30+1],Q=g(V,X),D=m(X,V),Z=y(V=j[E-4],X=j[E-4+1]),L=b(X,V),O=j[E-14],G=j[E-14+1],nt=j[E-32],ct=j[E-32+1],ot=D+G|0,mt=Q+O+v(ot,D)|0;mt=(mt=mt+Z+v(ot=ot+L|0,L)|0)+nt+v(ot=ot+ct|0,ct)|0,j[E]=mt,j[E+1]=ot}for(var pt=0;pt<160;pt+=2){mt=j[pt],ot=j[pt+1];var st=f(I,U,P),at=f(N,C,w),vt=h(I,N),yt=h(N,I),kt=p(q,x),St=p(x,q),Tt=l[pt],Lt=l[pt+1],Xt=d(q,$,F),re=d(x,S,A),ue=B+St|0,ce=T+kt+v(ue,B)|0;ce=(ce=(ce=ce+Xt+v(ue=ue+re|0,re)|0)+Tt+v(ue=ue+Lt|0,Lt)|0)+mt+v(ue=ue+ot|0,ot)|0;var de=yt+at|0,ve=vt+st+v(de,yt)|0;T=F,B=A,F=$,A=S,$=q,S=x,q=z+ce+v(x=_+ue|0,_)|0,z=P,_=w,P=U,w=C,U=I,C=N,I=ce+ve+v(N=ue+de|0,ue)|0}this._al=this._al+N|0,this._bl=this._bl+C|0,this._cl=this._cl+w|0,this._dl=this._dl+_|0,this._el=this._el+x|0,this._fl=this._fl+S|0,this._gl=this._gl+A|0,this._hl=this._hl+B|0,this._ah=this._ah+I+v(this._al,N)|0,this._bh=this._bh+U+v(this._bl,C)|0,this._ch=this._ch+P+v(this._cl,w)|0,this._dh=this._dh+z+v(this._dl,_)|0,this._eh=this._eh+q+v(this._el,x)|0,this._fh=this._fh+$+v(this._fl,S)|0,this._gh=this._gh+F+v(this._gl,A)|0,this._hh=this._hh+T+v(this._hl,B)|0},c.prototype._hash=function(){var k=u.allocUnsafe(64);function j(I,U,P){k.writeInt32BE(I,P),k.writeInt32BE(U,P+4)}return j(this._ah,this._al,0),j(this._bh,this._bl,8),j(this._ch,this._cl,16),j(this._dh,this._dl,24),j(this._eh,this._el,32),j(this._fh,this._fl,40),j(this._gh,this._gl,48),j(this._hh,this._hl,56),k},r.exports=c},{"./hash":497,inherits:440,"safe-buffer":494}],505:[function(t,r,s){r.exports=o;var i=t("events").EventEmitter;function o(){i.call(this)}t("inherits")(o,i),o.Readable=t("readable-stream/readable.js"),o.Writable=t("readable-stream/writable.js"),o.Duplex=t("readable-stream/duplex.js"),o.Transform=t("readable-stream/transform.js"),o.PassThrough=t("readable-stream/passthrough.js"),o.Stream=o,o.prototype.pipe=function(u,l){var a=this;function c(y){u.writable&&u.write(y)===!1&&a.pause&&a.pause()}function d(){a.readable&&a.resume&&a.resume()}a.on("data",c),u.on("drain",d),u._isStdio||l&&l.end===!1||(a.on("end",h),a.on("close",p));var f=!1;function h(){f||(f=!0,u.end())}function p(){f||(f=!0,typeof u.destroy=="function"&&u.destroy())}function g(y){if(m(),i.listenerCount(this,"error")===0)throw y}function m(){a.removeListener("data",c),u.removeListener("drain",d),a.removeListener("end",h),a.removeListener("close",p),a.removeListener("error",g),u.removeListener("error",g),a.removeListener("end",m),a.removeListener("close",m),u.removeListener("close",m)}return a.on("error",g),u.on("error",g),a.on("end",m),a.on("close",m),u.on("close",m),u.emit("pipe",a),u}},{events:422,inherits:440,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],506:[function(t,r,s){var i={}.toString;r.exports=Array.isArray||function(o){return i.call(o)=="[object Array]"}},{}],507:[function(t,r,s){r.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(t,r,s){var i=t("process-nextick-args"),o=Object.keys||function(m){var y=[];for(var b in m)y.push(b);return y};r.exports=h;var u=Object.create(t("core-util-is"));u.inherits=t("inherits");var l=t("./_stream_readable"),a=t("./_stream_writable");u.inherits(h,l);for(var c=o(a.prototype),d=0;d<c.length;d++){var f=c[d];h.prototype[f]||(h.prototype[f]=a.prototype[f])}function h(m){if(!(this instanceof h))return new h(m);l.call(this,m),a.call(this,m),m&&m.readable===!1&&(this.readable=!1),m&&m.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,m&&m.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||i.nextTick(g,this)}function g(m){m.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),h.prototype._destroy=function(m,y){this.push(null),this.end(),i.nextTick(y,m)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":383,inherits:440,"process-nextick-args":466}],509:[function(t,r,s){r.exports=u;var i=t("./_stream_transform"),o=Object.create(t("core-util-is"));function u(l){if(!(this instanceof u))return new u(l);i.call(this,l)}o.inherits=t("inherits"),o.inherits(u,i),u.prototype._transform=function(l,a,c){c(null,l)}},{"./_stream_transform":511,"core-util-is":383,inherits:440}],510:[function(t,r,s){(function(i,o){(function(){var u=t("process-nextick-args");r.exports=I;var l,a=t("isarray");I.ReadableState=j,t("events").EventEmitter;var c=function(B,E){return B.listeners(E).length},d=t("./internal/streams/stream"),f=t("safe-buffer").Buffer,h=(o!==void 0?o:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},p=Object.create(t("core-util-is"));p.inherits=t("inherits");var g=t("util"),m=void 0;m=g&&g.debuglog?g.debuglog("stream"):function(){};var y,b=t("./internal/streams/BufferList"),v=t("./internal/streams/destroy");p.inherits(I,d);var k=["error","close","destroy","pause","resume"];function j(B,E){B=B||{};var V=E instanceof(l=l||t("./_stream_duplex"));this.objectMode=!!B.objectMode,V&&(this.objectMode=this.objectMode||!!B.readableObjectMode);var X=B.highWaterMark,Q=B.readableHighWaterMark,D=this.objectMode?16:16384;this.highWaterMark=X||X===0?X:V&&(Q||Q===0)?Q:D,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=B.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,B.encoding&&(y||(y=t("string_decoder/").StringDecoder),this.decoder=new y(B.encoding),this.encoding=B.encoding)}function I(B){if(l=l||t("./_stream_duplex"),!(this instanceof I))return new I(B);this._readableState=new j(B,this),this.readable=!0,B&&(typeof B.read=="function"&&(this._read=B.read),typeof B.destroy=="function"&&(this._destroy=B.destroy)),d.call(this)}function U(B,E,V,X,Q){var D,Z=B._readableState;return E===null?(Z.reading=!1,function(L,O){if(!O.ended){if(O.decoder){var G=O.decoder.end();G&&G.length&&(O.buffer.push(G),O.length+=O.objectMode?1:G.length)}O.ended=!0,q(L)}}(B,Z)):(Q||(D=function(L,O){var G;nt=O,f.isBuffer(nt)||nt instanceof h||typeof O=="string"||O===void 0||L.objectMode||(G=new TypeError("Invalid non-string/buffer chunk"));var nt;return G}(Z,E)),D?B.emit("error",D):Z.objectMode||E&&E.length>0?(typeof E=="string"||Z.objectMode||Object.getPrototypeOf(E)===f.prototype||(E=function(L){return f.from(L)}(E)),X?Z.endEmitted?B.emit("error",new Error("stream.unshift() after end event")):P(B,Z,E,!0):Z.ended?B.emit("error",new Error("stream.push() after EOF")):(Z.reading=!1,Z.decoder&&!V?(E=Z.decoder.write(E),Z.objectMode||E.length!==0?P(B,Z,E,!1):F(B,Z)):P(B,Z,E,!1))):X||(Z.reading=!1)),function(L){return!L.ended&&(L.needReadable||L.length<L.highWaterMark||L.length===0)}(Z)}function P(B,E,V,X){E.flowing&&E.length===0&&!E.sync?(B.emit("data",V),B.read(0)):(E.length+=E.objectMode?1:V.length,X?E.buffer.unshift(V):E.buffer.push(V),E.needReadable&&q(B)),F(B,E)}Object.defineProperty(I.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(B){this._readableState&&(this._readableState.destroyed=B)}}),I.prototype.destroy=v.destroy,I.prototype._undestroy=v.undestroy,I.prototype._destroy=function(B,E){this.push(null),E(B)},I.prototype.push=function(B,E){var V,X=this._readableState;return X.objectMode?V=!0:typeof B=="string"&&((E=E||X.defaultEncoding)!==X.encoding&&(B=f.from(B,E),E=""),V=!0),U(this,B,E,!1,V)},I.prototype.unshift=function(B){return U(this,B,null,!0,!1)},I.prototype.isPaused=function(){return this._readableState.flowing===!1},I.prototype.setEncoding=function(B){return y||(y=t("string_decoder/").StringDecoder),this._readableState.decoder=new y(B),this._readableState.encoding=B,this};function z(B,E){return B<=0||E.length===0&&E.ended?0:E.objectMode?1:B!=B?E.flowing&&E.length?E.buffer.head.data.length:E.length:(B>E.highWaterMark&&(E.highWaterMark=function(V){return V>=8388608?V=8388608:(V--,V|=V>>>1,V|=V>>>2,V|=V>>>4,V|=V>>>8,V|=V>>>16,V++),V}(B)),B<=E.length?B:E.ended?E.length:(E.needReadable=!0,0))}function q(B){var E=B._readableState;E.needReadable=!1,E.emittedReadable||(m("emitReadable",E.flowing),E.emittedReadable=!0,E.sync?u.nextTick($,B):$(B))}function $(B){m("emit readable"),B.emit("readable"),w(B)}function F(B,E){E.readingMore||(E.readingMore=!0,u.nextTick(T,B,E))}function T(B,E){for(var V=E.length;!E.reading&&!E.flowing&&!E.ended&&E.length<E.highWaterMark&&(m("maybeReadMore read 0"),B.read(0),V!==E.length);)V=E.length;E.readingMore=!1}function N(B){m("readable nexttick read 0"),B.read(0)}function C(B,E){E.reading||(m("resume read 0"),B.read(0)),E.resumeScheduled=!1,E.awaitDrain=0,B.emit("resume"),w(B),E.flowing&&!E.reading&&B.read(0)}function w(B){var E=B._readableState;for(m("flow",E.flowing);E.flowing&&B.read()!==null;);}function _(B,E){return E.length===0?null:(E.objectMode?V=E.buffer.shift():!B||B>=E.length?(V=E.decoder?E.buffer.join(""):E.buffer.length===1?E.buffer.head.data:E.buffer.concat(E.length),E.buffer.clear()):V=function(X,Q,D){var Z;return X<Q.head.data.length?(Z=Q.head.data.slice(0,X),Q.head.data=Q.head.data.slice(X)):Z=X===Q.head.data.length?Q.shift():D?function(L,O){var G=O.head,nt=1,ct=G.data;for(L-=ct.length;G=G.next;){var ot=G.data,mt=L>ot.length?ot.length:L;if(mt===ot.length?ct+=ot:ct+=ot.slice(0,L),(L-=mt)===0){mt===ot.length?(++nt,G.next?O.head=G.next:O.head=O.tail=null):(O.head=G,G.data=ot.slice(mt));break}++nt}return O.length-=nt,ct}(X,Q):function(L,O){var G=f.allocUnsafe(L),nt=O.head,ct=1;for(nt.data.copy(G),L-=nt.data.length;nt=nt.next;){var ot=nt.data,mt=L>ot.length?ot.length:L;if(ot.copy(G,G.length-L,0,mt),(L-=mt)===0){mt===ot.length?(++ct,nt.next?O.head=nt.next:O.head=O.tail=null):(O.head=nt,nt.data=ot.slice(mt));break}++ct}return O.length-=ct,G}(X,Q),Z}(B,E.buffer,E.decoder),V);var V}function x(B){var E=B._readableState;if(E.length>0)throw new Error('"endReadable()" called on non-empty stream');E.endEmitted||(E.ended=!0,u.nextTick(S,E,B))}function S(B,E){B.endEmitted||B.length!==0||(B.endEmitted=!0,E.readable=!1,E.emit("end"))}function A(B,E){for(var V=0,X=B.length;V<X;V++)if(B[V]===E)return V;return-1}I.prototype.read=function(B){m("read",B),B=parseInt(B,10);var E=this._readableState,V=B;if(B!==0&&(E.emittedReadable=!1),B===0&&E.needReadable&&(E.length>=E.highWaterMark||E.ended))return m("read: emitReadable",E.length,E.ended),E.length===0&&E.ended?x(this):q(this),null;if((B=z(B,E))===0&&E.ended)return E.length===0&&x(this),null;var X,Q=E.needReadable;return m("need readable",Q),(E.length===0||E.length-B<E.highWaterMark)&&m("length less than watermark",Q=!0),E.ended||E.reading?m("reading or ended",Q=!1):Q&&(m("do read"),E.reading=!0,E.sync=!0,E.length===0&&(E.needReadable=!0),this._read(E.highWaterMark),E.sync=!1,E.reading||(B=z(V,E))),(X=B>0?_(B,E):null)===null?(E.needReadable=!0,B=0):E.length-=B,E.length===0&&(E.ended||(E.needReadable=!0),V!==B&&E.ended&&x(this)),X!==null&&this.emit("data",X),X},I.prototype._read=function(B){this.emit("error",new Error("_read() is not implemented"))},I.prototype.pipe=function(B,E){var V=this,X=this._readableState;switch(X.pipesCount){case 0:X.pipes=B;break;case 1:X.pipes=[X.pipes,B];break;default:X.pipes.push(B)}X.pipesCount+=1,m("pipe count=%d opts=%j",X.pipesCount,E);var Q=(!E||E.end!==!1)&&B!==i.stdout&&B!==i.stderr?Z:pt;function D(st,at){m("onunpipe"),st===V&&at&&at.hasUnpiped===!1&&(at.hasUnpiped=!0,m("cleanup"),B.removeListener("close",ot),B.removeListener("finish",mt),B.removeListener("drain",L),B.removeListener("error",ct),B.removeListener("unpipe",D),V.removeListener("end",Z),V.removeListener("end",pt),V.removeListener("data",nt),O=!0,!X.awaitDrain||B._writableState&&!B._writableState.needDrain||L())}function Z(){m("onend"),B.end()}X.endEmitted?u.nextTick(Q):V.once("end",Q),B.on("unpipe",D);var L=function(st){return function(){var at=st._readableState;m("pipeOnDrain",at.awaitDrain),at.awaitDrain&&at.awaitDrain--,at.awaitDrain===0&&c(st,"data")&&(at.flowing=!0,w(st))}}(V);B.on("drain",L);var O=!1,G=!1;function nt(st){m("ondata"),G=!1,B.write(st)!==!1||G||((X.pipesCount===1&&X.pipes===B||X.pipesCount>1&&A(X.pipes,B)!==-1)&&!O&&(m("false write response, pause",X.awaitDrain),X.awaitDrain++,G=!0),V.pause())}function ct(st){m("onerror",st),pt(),B.removeListener("error",ct),c(B,"error")===0&&B.emit("error",st)}function ot(){B.removeListener("finish",mt),pt()}function mt(){m("onfinish"),B.removeListener("close",ot),pt()}function pt(){m("unpipe"),V.unpipe(B)}return V.on("data",nt),function(st,at,vt){if(typeof st.prependListener=="function")return st.prependListener(at,vt);st._events&&st._events[at]?a(st._events[at])?st._events[at].unshift(vt):st._events[at]=[vt,st._events[at]]:st.on(at,vt)}(B,"error",ct),B.once("close",ot),B.once("finish",mt),B.emit("pipe",V),X.flowing||(m("pipe resume"),V.resume()),B},I.prototype.unpipe=function(B){var E=this._readableState,V={hasUnpiped:!1};if(E.pipesCount===0)return this;if(E.pipesCount===1)return B&&B!==E.pipes||(B||(B=E.pipes),E.pipes=null,E.pipesCount=0,E.flowing=!1,B&&B.emit("unpipe",this,V)),this;if(!B){var X=E.pipes,Q=E.pipesCount;E.pipes=null,E.pipesCount=0,E.flowing=!1;for(var D=0;D<Q;D++)X[D].emit("unpipe",this,{hasUnpiped:!1});return this}var Z=A(E.pipes,B);return Z===-1||(E.pipes.splice(Z,1),E.pipesCount-=1,E.pipesCount===1&&(E.pipes=E.pipes[0]),B.emit("unpipe",this,V)),this},I.prototype.on=function(B,E){var V=d.prototype.on.call(this,B,E);if(B==="data")this._readableState.flowing!==!1&&this.resume();else if(B==="readable"){var X=this._readableState;X.endEmitted||X.readableListening||(X.readableListening=X.needReadable=!0,X.emittedReadable=!1,X.reading?X.length&&q(this):u.nextTick(N,this))}return V},I.prototype.addListener=I.prototype.on,I.prototype.resume=function(){var B=this._readableState;return B.flowing||(m("resume"),B.flowing=!0,function(E,V){V.resumeScheduled||(V.resumeScheduled=!0,u.nextTick(C,E,V))}(this,B)),this},I.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this},I.prototype.wrap=function(B){var E=this,V=this._readableState,X=!1;for(var Q in B.on("end",function(){if(m("wrapped end"),V.decoder&&!V.ended){var Z=V.decoder.end();Z&&Z.length&&E.push(Z)}E.push(null)}),B.on("data",function(Z){m("wrapped data"),V.decoder&&(Z=V.decoder.write(Z)),V.objectMode&&Z==null||(V.objectMode||Z&&Z.length)&&(E.push(Z)||(X=!0,B.pause()))}),B)this[Q]===void 0&&typeof B[Q]=="function"&&(this[Q]=function(Z){return function(){return B[Z].apply(B,arguments)}}(Q));for(var D=0;D<k.length;D++)B.on(k[D],this.emit.bind(this,k[D]));return this._read=function(Z){m("wrapped _read",Z),X&&(X=!1,B.resume())},this},Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),I._fromList=_}).call(this)}).call(this,t("_process"),typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,events:422,inherits:440,isarray:506,"process-nextick-args":466,"safe-buffer":520,"string_decoder/":521,util:188}],511:[function(t,r,s){r.exports=l;var i=t("./_stream_duplex"),o=Object.create(t("core-util-is"));function u(d,f){var h=this._transformState;h.transforming=!1;var p=h.writecb;if(!p)return this.emit("error",new Error("write callback called multiple times"));h.writechunk=null,h.writecb=null,f!=null&&this.push(f),p(d);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function l(d){if(!(this instanceof l))return new l(d);i.call(this,d),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",a)}function a(){var d=this;typeof this._flush=="function"?this._flush(function(f,h){c(d,f,h)}):c(this,null,null)}function c(d,f,h){if(f)return d.emit("error",f);if(h!=null&&d.push(h),d._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(d._transformState.transforming)throw new Error("Calling transform done when still transforming");return d.push(null)}o.inherits=t("inherits"),o.inherits(l,i),l.prototype.push=function(d,f){return this._transformState.needTransform=!1,i.prototype.push.call(this,d,f)},l.prototype._transform=function(d,f,h){throw new Error("_transform() is not implemented")},l.prototype._write=function(d,f,h){var p=this._transformState;if(p.writecb=h,p.writechunk=d,p.writeencoding=f,!p.transforming){var g=this._readableState;(p.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},l.prototype._read=function(d){var f=this._transformState;f.writechunk!==null&&f.writecb&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},l.prototype._destroy=function(d,f){var h=this;i.prototype._destroy.call(this,d,function(p){f(p),h.emit("close")})}},{"./_stream_duplex":508,"core-util-is":383,inherits:440}],512:[function(t,r,s){(function(i,o,u){(function(){var l=t("process-nextick-args");function a(F){var T=this;this.next=null,this.entry=null,this.finish=function(){(function(N,C,w){var _=N.entry;for(N.entry=null;_;){var x=_.callback;C.pendingcb--,x(w),_=_.next}C.corkedRequestsFree.next=N})(T,F)}}r.exports=j;var c,d=!i.browser&&["v0.10","v0.9."].indexOf(i.version.slice(0,5))>-1?u:l.nextTick;j.WritableState=k;var f=Object.create(t("core-util-is"));f.inherits=t("inherits");var h={deprecate:t("util-deprecate")},p=t("./internal/streams/stream"),g=t("safe-buffer").Buffer,m=(o!==void 0?o:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},y,b=t("./internal/streams/destroy");function v(){}function k(F,T){c=c||t("./_stream_duplex"),F=F||{};var N=T instanceof c;this.objectMode=!!F.objectMode,N&&(this.objectMode=this.objectMode||!!F.writableObjectMode);var C=F.highWaterMark,w=F.writableHighWaterMark,_=this.objectMode?16:16384;this.highWaterMark=C||C===0?C:N&&(w||w===0)?w:_,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var x=F.decodeStrings===!1;this.decodeStrings=!x,this.defaultEncoding=F.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(S){(function(A,B){var E=A._writableState,V=E.sync,X=E.writecb;if(function(D){D.writing=!1,D.writecb=null,D.length-=D.writelen,D.writelen=0}(E),B)(function(D,Z,L,O,G){--Z.pendingcb,L?(l.nextTick(G,O),l.nextTick($,D,Z),D._writableState.errorEmitted=!0,D.emit("error",O)):(G(O),D._writableState.errorEmitted=!0,D.emit("error",O),$(D,Z))})(A,E,V,B,X);else{var Q=z(E);Q||E.corked||E.bufferProcessing||!E.bufferedRequest||P(A,E),V?d(U,A,E,Q,X):U(A,E,Q,X)}})(T,S)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function j(F){if(c=c||t("./_stream_duplex"),!(y.call(j,this)||this instanceof c))return new j(F);this._writableState=new k(F,this),this.writable=!0,F&&(typeof F.write=="function"&&(this._write=F.write),typeof F.writev=="function"&&(this._writev=F.writev),typeof F.destroy=="function"&&(this._destroy=F.destroy),typeof F.final=="function"&&(this._final=F.final)),p.call(this)}function I(F,T,N,C,w,_,x){T.writelen=C,T.writecb=x,T.writing=!0,T.sync=!0,N?F._writev(w,T.onwrite):F._write(w,_,T.onwrite),T.sync=!1}function U(F,T,N,C){N||function(w,_){_.length===0&&_.needDrain&&(_.needDrain=!1,w.emit("drain"))}(F,T),T.pendingcb--,C(),$(F,T)}function P(F,T){T.bufferProcessing=!0;var N=T.bufferedRequest;if(F._writev&&N&&N.next){var C=T.bufferedRequestCount,w=new Array(C),_=T.corkedRequestsFree;_.entry=N;for(var x=0,S=!0;N;)w[x]=N,N.isBuf||(S=!1),N=N.next,x+=1;w.allBuffers=S,I(F,T,!0,T.length,w,"",_.finish),T.pendingcb++,T.lastBufferedRequest=null,_.next?(T.corkedRequestsFree=_.next,_.next=null):T.corkedRequestsFree=new a(T),T.bufferedRequestCount=0}else{for(;N;){var A=N.chunk,B=N.encoding,E=N.callback;if(I(F,T,!1,T.objectMode?1:A.length,A,B,E),N=N.next,T.bufferedRequestCount--,T.writing)break}N===null&&(T.lastBufferedRequest=null)}T.bufferedRequest=N,T.bufferProcessing=!1}function z(F){return F.ending&&F.length===0&&F.bufferedRequest===null&&!F.finished&&!F.writing}function q(F,T){F._final(function(N){T.pendingcb--,N&&F.emit("error",N),T.prefinished=!0,F.emit("prefinish"),$(F,T)})}function $(F,T){var N=z(T);return N&&(function(C,w){w.prefinished||w.finalCalled||(typeof C._final=="function"?(w.pendingcb++,w.finalCalled=!0,l.nextTick(q,C,w)):(w.prefinished=!0,C.emit("prefinish")))}(F,T),T.pendingcb===0&&(T.finished=!0,F.emit("finish"))),N}f.inherits(j,p),k.prototype.getBuffer=function(){for(var F=this.bufferedRequest,T=[];F;)T.push(F),F=F.next;return T},function(){try{Object.defineProperty(k.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(j,Symbol.hasInstance,{value:function(F){return!!y.call(this,F)||this===j&&F&&F._writableState instanceof k}})):y=function(F){return F instanceof this},j.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},j.prototype.write=function(F,T,N){var C,w=this._writableState,_=!1,x=!w.objectMode&&(C=F,g.isBuffer(C)||C instanceof m);return x&&!g.isBuffer(F)&&(F=function(S){return g.from(S)}(F)),typeof T=="function"&&(N=T,T=null),x?T="buffer":T||(T=w.defaultEncoding),typeof N!="function"&&(N=v),w.ended?function(S,A){var B=new Error("write after end");S.emit("error",B),l.nextTick(A,B)}(this,N):(x||function(S,A,B,E){var V=!0,X=!1;return B===null?X=new TypeError("May not write null values to stream"):typeof B=="string"||B===void 0||A.objectMode||(X=new TypeError("Invalid non-string/buffer chunk")),X&&(S.emit("error",X),l.nextTick(E,X),V=!1),V}(this,w,F,N))&&(w.pendingcb++,_=function(S,A,B,E,V,X){if(!B){var Q=function(O,G,nt){return O.objectMode||O.decodeStrings===!1||typeof G!="string"||(G=g.from(G,nt)),G}(A,E,V);E!==Q&&(B=!0,V="buffer",E=Q)}var D=A.objectMode?1:E.length;A.length+=D;var Z=A.length<A.highWaterMark;if(Z||(A.needDrain=!0),A.writing||A.corked){var L=A.lastBufferedRequest;A.lastBufferedRequest={chunk:E,encoding:V,isBuf:B,callback:X,next:null},L?L.next=A.lastBufferedRequest:A.bufferedRequest=A.lastBufferedRequest,A.bufferedRequestCount+=1}else I(S,A,!1,D,E,V,X);return Z}(this,w,x,F,T,N)),_},j.prototype.cork=function(){this._writableState.corked++},j.prototype.uncork=function(){var F=this._writableState;F.corked&&(F.corked--,F.writing||F.corked||F.bufferProcessing||!F.bufferedRequest||P(this,F))},j.prototype.setDefaultEncoding=function(F){if(typeof F=="string"&&(F=F.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((F+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+F);return this._writableState.defaultEncoding=F,this},Object.defineProperty(j.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),j.prototype._write=function(F,T,N){N(new Error("_write() is not implemented"))},j.prototype._writev=null,j.prototype.end=function(F,T,N){var C=this._writableState;typeof F=="function"?(N=F,F=null,T=null):typeof T=="function"&&(N=T,T=null),F!=null&&this.write(F,T),C.corked&&(C.corked=1,this.uncork()),C.ending||function(w,_,x){_.ending=!0,$(w,_),x&&(_.finished?l.nextTick(x):w.once("finish",x)),_.ended=!0,w.writable=!1}(this,C,N)},Object.defineProperty(j.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(F){this._writableState&&(this._writableState.destroyed=F)}}),j.prototype.destroy=b.destroy,j.prototype._undestroy=b.undestroy,j.prototype._destroy=function(F,T){this.end(),T(F)}}).call(this)}).call(this,t("_process"),typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{},t("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,inherits:440,"process-nextick-args":466,"safe-buffer":520,timers:523,"util-deprecate":524}],513:[function(t,r,s){var i=t("safe-buffer").Buffer,o=t("util");r.exports=function(){function u(){(function(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")})(this,u),this.head=null,this.tail=null,this.length=0}return u.prototype.push=function(l){var a={data:l,next:null};this.length>0?this.tail.next=a:this.head=a,this.tail=a,++this.length},u.prototype.unshift=function(l){var a={data:l,next:this.head};this.length===0&&(this.tail=a),this.head=a,++this.length},u.prototype.shift=function(){if(this.length!==0){var l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}},u.prototype.clear=function(){this.head=this.tail=null,this.length=0},u.prototype.join=function(l){if(this.length===0)return"";for(var a=this.head,c=""+a.data;a=a.next;)c+=l+a.data;return c},u.prototype.concat=function(l){if(this.length===0)return i.alloc(0);for(var a,c,d,f=i.allocUnsafe(l>>>0),h=this.head,p=0;h;)a=h.data,c=f,d=p,a.copy(c,d),p+=h.data.length,h=h.next;return f},u}(),o&&o.inspect&&o.inspect.custom&&(r.exports.prototype[o.inspect.custom]=function(){var u=o.inspect({length:this.length});return this.constructor.name+" "+u})},{"safe-buffer":520,util:188}],514:[function(t,r,s){var i=t("process-nextick-args");function o(u,l){u.emit("error",l)}r.exports={destroy:function(u,l){var a=this,c=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return c||d?(l?l(u):u&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(o,this,u)):i.nextTick(o,this,u)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(u||null,function(f){!l&&f?a._writableState?a._writableState.errorEmitted||(a._writableState.errorEmitted=!0,i.nextTick(o,a,f)):i.nextTick(o,a,f):l&&l(f)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":466}],515:[function(t,r,s){arguments[4][490][0].apply(s,arguments)},{dup:490,events:422}],516:[function(t,r,s){r.exports=t("./readable").PassThrough},{"./readable":517}],517:[function(t,r,s){(s=r.exports=t("./lib/_stream_readable.js")).Stream=s,s.Readable=s,s.Writable=t("./lib/_stream_writable.js"),s.Duplex=t("./lib/_stream_duplex.js"),s.Transform=t("./lib/_stream_transform.js"),s.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(t,r,s){r.exports=t("./readable").Transform},{"./readable":517}],519:[function(t,r,s){r.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(t,r,s){arguments[4][217][0].apply(s,arguments)},{buffer:220,dup:217}],521:[function(t,r,s){arguments[4][218][0].apply(s,arguments)},{dup:218,"safe-buffer":520}],522:[function(t,r,s){arguments[4][218][0].apply(s,arguments)},{dup:218,"safe-buffer":494}],523:[function(t,r,s){(function(i,o){(function(){var u=t("process/browser.js").nextTick,l=Function.prototype.apply,a=Array.prototype.slice,c={},d=0;function f(h,p){this._id=h,this._clearFn=p}s.setTimeout=function(){return new f(l.call(setTimeout,window,arguments),clearTimeout)},s.setInterval=function(){return new f(l.call(setInterval,window,arguments),clearInterval)},s.clearTimeout=s.clearInterval=function(h){h.close()},f.prototype.unref=f.prototype.ref=function(){},f.prototype.close=function(){this._clearFn.call(window,this._id)},s.enroll=function(h,p){clearTimeout(h._idleTimeoutId),h._idleTimeout=p},s.unenroll=function(h){clearTimeout(h._idleTimeoutId),h._idleTimeout=-1},s._unrefActive=s.active=function(h){clearTimeout(h._idleTimeoutId);var p=h._idleTimeout;p>=0&&(h._idleTimeoutId=setTimeout(function(){h._onTimeout&&h._onTimeout()},p))},s.setImmediate=typeof i=="function"?i:function(h){var p=d++,g=!(arguments.length<2)&&a.call(arguments,1);return c[p]=!0,u(function(){c[p]&&(g?h.apply(null,g):h.call(null),s.clearImmediate(p))}),p},s.clearImmediate=typeof o=="function"?o:function(h){delete c[h]}}).call(this)}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":467,timers:523}],524:[function(t,r,s){(function(i){(function(){function o(u){try{if(!i.localStorage)return!1}catch{return!1}var l=i.localStorage[u];return l!=null&&String(l).toLowerCase()==="true"}r.exports=function(u,l){if(o("noDeprecation"))return u;var a=!1;return function(){if(!a){if(o("throwDeprecation"))throw new Error(l);o("traceDeprecation")?console.trace(l):console.warn(l),a=!0}return u.apply(this,arguments)}}}).call(this)}).call(this,typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],525:[function(t,r,s){typeof Object.create=="function"?r.exports=function(i,o){i.super_=o,i.prototype=Object.create(o.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}})}:r.exports=function(i,o){i.super_=o;var u=function(){};u.prototype=o.prototype,i.prototype=new u,i.prototype.constructor=i}},{}],526:[function(t,r,s){r.exports=function(i){return i&&typeof i=="object"&&typeof i.copy=="function"&&typeof i.fill=="function"&&typeof i.readUInt8=="function"}},{}],527:[function(t,r,s){(function(i,o){(function(){var u=/%[sdj%]/g;s.format=function(w){if(!k(w)){for(var _=[],x=0;x<arguments.length;x++)_.push(c(arguments[x]));return _.join(" ")}x=1;for(var S=arguments,A=S.length,B=String(w).replace(u,function(V){if(V==="%%")return"%";if(x>=A)return V;switch(V){case"%s":return String(S[x++]);case"%d":return Number(S[x++]);case"%j":try{return JSON.stringify(S[x++])}catch{return"[Circular]"}default:return V}}),E=S[x];x<A;E=S[++x])b(E)||!U(E)?B+=" "+E:B+=" "+c(E);return B},s.deprecate=function(w,_){if(j(o.process))return function(){return s.deprecate(w,_).apply(this,arguments)};if(i.noDeprecation===!0)return w;var x=!1;return function(){if(!x){if(i.throwDeprecation)throw new Error(_);i.traceDeprecation?console.trace(_):console.error(_),x=!0}return w.apply(this,arguments)}};var l,a={};function c(w,_){var x={seen:[],stylize:f};return arguments.length>=3&&(x.depth=arguments[2]),arguments.length>=4&&(x.colors=arguments[3]),y(_)?x.showHidden=_:_&&s._extend(x,_),j(x.showHidden)&&(x.showHidden=!1),j(x.depth)&&(x.depth=2),j(x.colors)&&(x.colors=!1),j(x.customInspect)&&(x.customInspect=!0),x.colors&&(x.stylize=d),h(x,w,x.depth)}function d(w,_){var x=c.styles[_];return x?"\x1B["+c.colors[x][0]+"m"+w+"\x1B["+c.colors[x][1]+"m":w}function f(w,_){return w}function h(w,_,x){if(w.customInspect&&_&&q(_.inspect)&&_.inspect!==s.inspect&&(!_.constructor||_.constructor.prototype!==_)){var S=_.inspect(x,w);return k(S)||(S=h(w,S,x)),S}var A=function(L,O){if(j(O))return L.stylize("undefined","undefined");if(k(O)){var G="'"+JSON.stringify(O).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return L.stylize(G,"string")}if(v(O))return L.stylize(""+O,"number");if(y(O))return L.stylize(""+O,"boolean");if(b(O))return L.stylize("null","null")}(w,_);if(A)return A;var B=Object.keys(_),E=function(L){var O={};return L.forEach(function(G,nt){O[G]=!0}),O}(B);if(w.showHidden&&(B=Object.getOwnPropertyNames(_)),z(_)&&(B.indexOf("message")>=0||B.indexOf("description")>=0))return p(_);if(B.length===0){if(q(_)){var V=_.name?": "+_.name:"";return w.stylize("[Function"+V+"]","special")}if(I(_))return w.stylize(RegExp.prototype.toString.call(_),"regexp");if(P(_))return w.stylize(Date.prototype.toString.call(_),"date");if(z(_))return p(_)}var X,Q="",D=!1,Z=["{","}"];return m(_)&&(D=!0,Z=["[","]"]),q(_)&&(Q=" [Function"+(_.name?": "+_.name:"")+"]"),I(_)&&(Q=" "+RegExp.prototype.toString.call(_)),P(_)&&(Q=" "+Date.prototype.toUTCString.call(_)),z(_)&&(Q=" "+p(_)),B.length!==0||D&&_.length!=0?x<0?I(_)?w.stylize(RegExp.prototype.toString.call(_),"regexp"):w.stylize("[Object]","special"):(w.seen.push(_),X=D?function(L,O,G,nt,ct){for(var ot=[],mt=0,pt=O.length;mt<pt;++mt)C(O,String(mt))?ot.push(g(L,O,G,nt,String(mt),!0)):ot.push("");return ct.forEach(function(st){st.match(/^\d+$/)||ot.push(g(L,O,G,nt,st,!0))}),ot}(w,_,x,E,B):B.map(function(L){return g(w,_,x,E,L,D)}),w.seen.pop(),function(L,O,G){return L.reduce(function(nt,ct){return ct.indexOf(`
`)>=0,nt+ct.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?G[0]+(O===""?"":O+`
 `)+" "+L.join(`,
  `)+" "+G[1]:G[0]+O+" "+L.join(", ")+" "+G[1]}(X,Q,Z)):Z[0]+Q+Z[1]}function p(w){return"["+Error.prototype.toString.call(w)+"]"}function g(w,_,x,S,A,B){var E,V,X;if((X=Object.getOwnPropertyDescriptor(_,A)||{value:_[A]}).get?V=X.set?w.stylize("[Getter/Setter]","special"):w.stylize("[Getter]","special"):X.set&&(V=w.stylize("[Setter]","special")),C(S,A)||(E="["+A+"]"),V||(w.seen.indexOf(X.value)<0?(V=b(x)?h(w,X.value,null):h(w,X.value,x-1)).indexOf(`
`)>-1&&(V=B?V.split(`
`).map(function(Q){return"  "+Q}).join(`
`).substr(2):`
`+V.split(`
`).map(function(Q){return"   "+Q}).join(`
`)):V=w.stylize("[Circular]","special")),j(E)){if(B&&A.match(/^\d+$/))return V;(E=JSON.stringify(""+A)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(E=E.substr(1,E.length-2),E=w.stylize(E,"name")):(E=E.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),E=w.stylize(E,"string"))}return E+": "+V}function m(w){return Array.isArray(w)}function y(w){return typeof w=="boolean"}function b(w){return w===null}function v(w){return typeof w=="number"}function k(w){return typeof w=="string"}function j(w){return w===void 0}function I(w){return U(w)&&$(w)==="[object RegExp]"}function U(w){return typeof w=="object"&&w!==null}function P(w){return U(w)&&$(w)==="[object Date]"}function z(w){return U(w)&&($(w)==="[object Error]"||w instanceof Error)}function q(w){return typeof w=="function"}function $(w){return Object.prototype.toString.call(w)}function F(w){return w<10?"0"+w.toString(10):w.toString(10)}s.debuglog=function(w){if(j(l)&&(l=i.env.NODE_DEBUG||""),w=w.toUpperCase(),!a[w])if(new RegExp("\\b"+w+"\\b","i").test(l)){var _=i.pid;a[w]=function(){var x=s.format.apply(s,arguments);console.error("%s %d: %s",w,_,x)}}else a[w]=function(){};return a[w]},s.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},s.isArray=m,s.isBoolean=y,s.isNull=b,s.isNullOrUndefined=function(w){return w==null},s.isNumber=v,s.isString=k,s.isSymbol=function(w){return typeof w=="symbol"},s.isUndefined=j,s.isRegExp=I,s.isObject=U,s.isDate=P,s.isError=z,s.isFunction=q,s.isPrimitive=function(w){return w===null||typeof w=="boolean"||typeof w=="number"||typeof w=="string"||typeof w=="symbol"||w===void 0},s.isBuffer=t("./support/isBuffer");var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(){var w=new Date,_=[F(w.getHours()),F(w.getMinutes()),F(w.getSeconds())].join(":");return[w.getDate(),T[w.getMonth()],_].join(" ")}function C(w,_){return Object.prototype.hasOwnProperty.call(w,_)}s.log=function(){console.log("%s - %s",N(),s.format.apply(s,arguments))},s.inherits=t("inherits"),s._extend=function(w,_){if(!_||!U(_))return w;for(var x=Object.keys(_),S=x.length;S--;)w[x[S]]=_[x[S]];return w}}).call(this)}).call(this,t("_process"),typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":526,_process:467,inherits:525}],528:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"v1",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(s,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(s,"v4",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(s,"v5",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(s,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(s,"version",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(s,"validate",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(s,"stringify",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(s,"parse",{enumerable:!0,get:function(){return h.default}});var i=p(t("./v1.js")),o=p(t("./v3.js")),u=p(t("./v4.js")),l=p(t("./v5.js")),a=p(t("./nil.js")),c=p(t("./version.js")),d=p(t("./validate.js")),f=p(t("./stringify.js")),h=p(t("./parse.js"));function p(g){return g&&g.__esModule?g:{default:g}}},{"./nil.js":530,"./parse.js":531,"./stringify.js":535,"./v1.js":536,"./v3.js":537,"./v4.js":539,"./v5.js":540,"./validate.js":541,"./version.js":542}],529:[function(t,r,s){function i(h){return 14+(h+64>>>9<<4)+1}function o(h,p){const g=(65535&h)+(65535&p);return(h>>16)+(p>>16)+(g>>16)<<16|65535&g}function u(h,p,g,m,y,b){return o((v=o(o(p,h),o(m,b)))<<(k=y)|v>>>32-k,g);var v,k}function l(h,p,g,m,y,b,v){return u(p&g|~p&m,h,p,y,b,v)}function a(h,p,g,m,y,b,v){return u(p&m|g&~m,h,p,y,b,v)}function c(h,p,g,m,y,b,v){return u(p^g^m,h,p,y,b,v)}function d(h,p,g,m,y,b,v){return u(g^(p|~m),h,p,y,b,v)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var f=function(h){if(typeof h=="string"){const p=unescape(encodeURIComponent(h));h=new Uint8Array(p.length);for(let g=0;g<p.length;++g)h[g]=p.charCodeAt(g)}return function(p){const g=[],m=32*p.length;for(let y=0;y<m;y+=8){const b=p[y>>5]>>>y%32&255,v=parseInt("0123456789abcdef".charAt(b>>>4&15)+"0123456789abcdef".charAt(15&b),16);g.push(v)}return g}(function(p,g){p[g>>5]|=128<<g%32,p[i(g)-1]=g;let m=1732584193,y=-271733879,b=-1732584194,v=271733878;for(let k=0;k<p.length;k+=16){const j=m,I=y,U=b,P=v;m=l(m,y,b,v,p[k],7,-680876936),v=l(v,m,y,b,p[k+1],12,-389564586),b=l(b,v,m,y,p[k+2],17,606105819),y=l(y,b,v,m,p[k+3],22,-1044525330),m=l(m,y,b,v,p[k+4],7,-176418897),v=l(v,m,y,b,p[k+5],12,1200080426),b=l(b,v,m,y,p[k+6],17,-1473231341),y=l(y,b,v,m,p[k+7],22,-45705983),m=l(m,y,b,v,p[k+8],7,1770035416),v=l(v,m,y,b,p[k+9],12,-1958414417),b=l(b,v,m,y,p[k+10],17,-42063),y=l(y,b,v,m,p[k+11],22,-1990404162),m=l(m,y,b,v,p[k+12],7,1804603682),v=l(v,m,y,b,p[k+13],12,-40341101),b=l(b,v,m,y,p[k+14],17,-1502002290),y=l(y,b,v,m,p[k+15],22,1236535329),m=a(m,y,b,v,p[k+1],5,-165796510),v=a(v,m,y,b,p[k+6],9,-1069501632),b=a(b,v,m,y,p[k+11],14,643717713),y=a(y,b,v,m,p[k],20,-373897302),m=a(m,y,b,v,p[k+5],5,-701558691),v=a(v,m,y,b,p[k+10],9,38016083),b=a(b,v,m,y,p[k+15],14,-660478335),y=a(y,b,v,m,p[k+4],20,-405537848),m=a(m,y,b,v,p[k+9],5,568446438),v=a(v,m,y,b,p[k+14],9,-1019803690),b=a(b,v,m,y,p[k+3],14,-187363961),y=a(y,b,v,m,p[k+8],20,1163531501),m=a(m,y,b,v,p[k+13],5,-1444681467),v=a(v,m,y,b,p[k+2],9,-51403784),b=a(b,v,m,y,p[k+7],14,1735328473),y=a(y,b,v,m,p[k+12],20,-1926607734),m=c(m,y,b,v,p[k+5],4,-378558),v=c(v,m,y,b,p[k+8],11,-2022574463),b=c(b,v,m,y,p[k+11],16,1839030562),y=c(y,b,v,m,p[k+14],23,-35309556),m=c(m,y,b,v,p[k+1],4,-1530992060),v=c(v,m,y,b,p[k+4],11,1272893353),b=c(b,v,m,y,p[k+7],16,-155497632),y=c(y,b,v,m,p[k+10],23,-1094730640),m=c(m,y,b,v,p[k+13],4,681279174),v=c(v,m,y,b,p[k],11,-358537222),b=c(b,v,m,y,p[k+3],16,-722521979),y=c(y,b,v,m,p[k+6],23,76029189),m=c(m,y,b,v,p[k+9],4,-640364487),v=c(v,m,y,b,p[k+12],11,-421815835),b=c(b,v,m,y,p[k+15],16,530742520),y=c(y,b,v,m,p[k+2],23,-995338651),m=d(m,y,b,v,p[k],6,-198630844),v=d(v,m,y,b,p[k+7],10,1126891415),b=d(b,v,m,y,p[k+14],15,-1416354905),y=d(y,b,v,m,p[k+5],21,-57434055),m=d(m,y,b,v,p[k+12],6,1700485571),v=d(v,m,y,b,p[k+3],10,-1894986606),b=d(b,v,m,y,p[k+10],15,-1051523),y=d(y,b,v,m,p[k+1],21,-2054922799),m=d(m,y,b,v,p[k+8],6,1873313359),v=d(v,m,y,b,p[k+15],10,-30611744),b=d(b,v,m,y,p[k+6],15,-1560198380),y=d(y,b,v,m,p[k+13],21,1309151649),m=d(m,y,b,v,p[k+4],6,-145523070),v=d(v,m,y,b,p[k+11],10,-1120210379),b=d(b,v,m,y,p[k+2],15,718787259),y=d(y,b,v,m,p[k+9],21,-343485551),m=o(m,j),y=o(y,I),b=o(b,U),v=o(v,P)}return[m,y,b,v]}(function(p){if(p.length===0)return[];const g=8*p.length,m=new Uint32Array(i(g));for(let y=0;y<g;y+=8)m[y>>5]|=(255&p[y/8])<<y%32;return m}(h),8*h.length))};s.default=f},{}],530:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,s.default="00000000-0000-0000-0000-000000000000"},{}],531:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i,o=(i=t("./validate.js"))&&i.__esModule?i:{default:i},u=function(l){if(!(0,o.default)(l))throw TypeError("Invalid UUID");let a;const c=new Uint8Array(16);return c[0]=(a=parseInt(l.slice(0,8),16))>>>24,c[1]=a>>>16&255,c[2]=a>>>8&255,c[3]=255&a,c[4]=(a=parseInt(l.slice(9,13),16))>>>8,c[5]=255&a,c[6]=(a=parseInt(l.slice(14,18),16))>>>8,c[7]=255&a,c[8]=(a=parseInt(l.slice(19,23),16))>>>8,c[9]=255&a,c[10]=(a=parseInt(l.slice(24,36),16))/1099511627776&255,c[11]=a/4294967296&255,c[12]=a>>>24&255,c[13]=a>>>16&255,c[14]=a>>>8&255,c[15]=255&a,c};s.default=u},{"./validate.js":541}],532:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,s.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],533:[function(t,r,s){let i;Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(){if(!i&&(i=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(o)};const o=new Uint8Array(16)},{}],534:[function(t,r,s){function i(l,a,c,d){switch(l){case 0:return a&c^~a&d;case 1:return a^c^d;case 2:return a&c^a&d^c&d;case 3:return a^c^d}}function o(l,a){return l<<a|l>>>32-a}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=function(l){const a=[1518500249,1859775393,2400959708,3395469782],c=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof l=="string"){const p=unescape(encodeURIComponent(l));l=[];for(let g=0;g<p.length;++g)l.push(p.charCodeAt(g))}else Array.isArray(l)||(l=Array.prototype.slice.call(l));l.push(128);const d=l.length/4+2,f=Math.ceil(d/16),h=new Array(f);for(let p=0;p<f;++p){const g=new Uint32Array(16);for(let m=0;m<16;++m)g[m]=l[64*p+4*m]<<24|l[64*p+4*m+1]<<16|l[64*p+4*m+2]<<8|l[64*p+4*m+3];h[p]=g}h[f-1][14]=8*(l.length-1)/Math.pow(2,32),h[f-1][14]=Math.floor(h[f-1][14]),h[f-1][15]=8*(l.length-1)&4294967295;for(let p=0;p<f;++p){const g=new Uint32Array(80);for(let j=0;j<16;++j)g[j]=h[p][j];for(let j=16;j<80;++j)g[j]=o(g[j-3]^g[j-8]^g[j-14]^g[j-16],1);let m=c[0],y=c[1],b=c[2],v=c[3],k=c[4];for(let j=0;j<80;++j){const I=Math.floor(j/20),U=o(m,5)+i(I,y,b,v)+k+a[I]+g[j]>>>0;k=v,v=b,b=o(y,30)>>>0,y=m,m=U}c[0]=c[0]+m>>>0,c[1]=c[1]+y>>>0,c[2]=c[2]+b>>>0,c[3]=c[3]+v>>>0,c[4]=c[4]+k>>>0}return[c[0]>>24&255,c[0]>>16&255,c[0]>>8&255,255&c[0],c[1]>>24&255,c[1]>>16&255,c[1]>>8&255,255&c[1],c[2]>>24&255,c[2]>>16&255,c[2]>>8&255,255&c[2],c[3]>>24&255,c[3]>>16&255,c[3]>>8&255,255&c[3],c[4]>>24&255,c[4]>>16&255,c[4]>>8&255,255&c[4]]};s.default=u},{}],535:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i,o=(i=t("./validate.js"))&&i.__esModule?i:{default:i};const u=[];for(let a=0;a<256;++a)u.push((a+256).toString(16).substr(1));var l=function(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const d=(u[a[c+0]]+u[a[c+1]]+u[a[c+2]]+u[a[c+3]]+"-"+u[a[c+4]]+u[a[c+5]]+"-"+u[a[c+6]]+u[a[c+7]]+"-"+u[a[c+8]]+u[a[c+9]]+"-"+u[a[c+10]]+u[a[c+11]]+u[a[c+12]]+u[a[c+13]]+u[a[c+14]]+u[a[c+15]]).toLowerCase();if(!(0,o.default)(d))throw TypeError("Stringified UUID is invalid");return d};s.default=l},{"./validate.js":541}],536:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=u(t("./rng.js")),o=u(t("./stringify.js"));function u(h){return h&&h.__esModule?h:{default:h}}let l,a,c=0,d=0;var f=function(h,p,g){let m=p&&g||0;const y=p||new Array(16);let b=(h=h||{}).node||l,v=h.clockseq!==void 0?h.clockseq:a;if(b==null||v==null){const z=h.random||(h.rng||i.default)();b==null&&(b=l=[1|z[0],z[1],z[2],z[3],z[4],z[5]]),v==null&&(v=a=16383&(z[6]<<8|z[7]))}let k=h.msecs!==void 0?h.msecs:Date.now(),j=h.nsecs!==void 0?h.nsecs:d+1;const I=k-c+(j-d)/1e4;if(I<0&&h.clockseq===void 0&&(v=v+1&16383),(I<0||k>c)&&h.nsecs===void 0&&(j=0),j>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=k,d=j,a=v,k+=122192928e5;const U=(1e4*(268435455&k)+j)%4294967296;y[m++]=U>>>24&255,y[m++]=U>>>16&255,y[m++]=U>>>8&255,y[m++]=255&U;const P=k/4294967296*1e4&268435455;y[m++]=P>>>8&255,y[m++]=255&P,y[m++]=P>>>24&15|16,y[m++]=P>>>16&255,y[m++]=v>>>8|128,y[m++]=255&v;for(let z=0;z<6;++z)y[m+z]=b[z];return p||(0,o.default)(y)};s.default=f},{"./rng.js":533,"./stringify.js":535}],537:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=u(t("./v35.js")),o=u(t("./md5.js"));function u(a){return a&&a.__esModule?a:{default:a}}var l=(0,i.default)("v3",48,o.default);s.default=l},{"./md5.js":529,"./v35.js":538}],538:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(c,d,f){function h(p,g,m,y){if(typeof p=="string"&&(p=function(v){v=unescape(encodeURIComponent(v));const k=[];for(let j=0;j<v.length;++j)k.push(v.charCodeAt(j));return k}(p)),typeof g=="string"&&(g=(0,o.default)(g)),g.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let b=new Uint8Array(16+p.length);if(b.set(g),b.set(p,g.length),b=f(b),b[6]=15&b[6]|d,b[8]=63&b[8]|128,m){y=y||0;for(let v=0;v<16;++v)m[y+v]=b[v];return m}return(0,i.default)(b)}try{h.name=c}catch{}return h.DNS=l,h.URL=a,h},s.URL=s.DNS=void 0;var i=u(t("./stringify.js")),o=u(t("./parse.js"));function u(c){return c&&c.__esModule?c:{default:c}}const l="6ba7b810-9dad-11d1-80b4-00c04fd430c8";s.DNS=l;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";s.URL=a},{"./parse.js":531,"./stringify.js":535}],539:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=u(t("./rng.js")),o=u(t("./stringify.js"));function u(a){return a&&a.__esModule?a:{default:a}}var l=function(a,c,d){const f=(a=a||{}).random||(a.rng||i.default)();if(f[6]=15&f[6]|64,f[8]=63&f[8]|128,c){d=d||0;for(let h=0;h<16;++h)c[d+h]=f[h];return c}return(0,o.default)(f)};s.default=l},{"./rng.js":533,"./stringify.js":535}],540:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=u(t("./v35.js")),o=u(t("./sha1.js"));function u(a){return a&&a.__esModule?a:{default:a}}var l=(0,i.default)("v5",80,o.default);s.default=l},{"./sha1.js":534,"./v35.js":538}],541:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i,o=(i=t("./regex.js"))&&i.__esModule?i:{default:i},u=function(l){return typeof l=="string"&&o.default.test(l)};s.default=u},{"./regex.js":532}],542:[function(t,r,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i,o=(i=t("./validate.js"))&&i.__esModule?i:{default:i},u=function(l){if(!(0,o.default)(l))throw TypeError("Invalid UUID");return parseInt(l.substr(14,1),16)};s.default=u},{"./validate.js":541}],543:[function(t,r,s){/**
* Character classes and associated utilities for the 5th edition of XML 1.0.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(s,"__esModule",{value:!0}),s.CHAR=`	
\r ---`,s.S=` 	\r
`,s.NAME_START_CHAR=":A-Z_a-z-----------",s.NAME_CHAR="-"+s.NAME_START_CHAR+".0-9--",s.CHAR_RE=new RegExp("^["+s.CHAR+"]$","u"),s.S_RE=new RegExp("^["+s.S+"]+$","u"),s.NAME_START_CHAR_RE=new RegExp("^["+s.NAME_START_CHAR+"]$","u"),s.NAME_CHAR_RE=new RegExp("^["+s.NAME_CHAR+"]$","u"),s.NAME_RE=new RegExp("^["+s.NAME_START_CHAR+"]["+s.NAME_CHAR+"]*$","u"),s.NMTOKEN_RE=new RegExp("^["+s.NAME_CHAR+"]+$","u");function i(o){return o>=65&&o<=90||o>=97&&o<=122||o===58||o===95||o===8204||o===8205||o>=192&&o<=214||o>=216&&o<=246||o>=248&&o<=767||o>=880&&o<=893||o>=895&&o<=8191||o>=8304&&o<=8591||o>=11264&&o<=12271||o>=12289&&o<=55295||o>=63744&&o<=64975||o>=65008&&o<=65533||o>=65536&&o<=983039}s.S_LIST=[32,10,13,9],s.isChar=function(o){return o>=32&&o<=55295||o===10||o===13||o===9||o>=57344&&o<=65533||o>=65536&&o<=1114111},s.isS=function(o){return o===32||o===10||o===13||o===9},s.isNameStartChar=i,s.isNameChar=function(o){return i(o)||o>=48&&o<=57||o===45||o===46||o===183||o>=768&&o<=879||o>=8255&&o<=8256}},{}],544:[function(t,r,s){/**
* Character classes and associated utilities for the 2nd edition of XML 1.1.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(s,"__esModule",{value:!0}),s.CHAR="---",s.RESTRICTED_CHAR="-\b\v\f---",s.S=` 	\r
`,s.NAME_START_CHAR=":A-Z_a-z-----------",s.NAME_CHAR="-"+s.NAME_START_CHAR+".0-9--",s.CHAR_RE=new RegExp("^["+s.CHAR+"]$","u"),s.RESTRICTED_CHAR_RE=new RegExp("^["+s.RESTRICTED_CHAR+"]$","u"),s.S_RE=new RegExp("^["+s.S+"]+$","u"),s.NAME_START_CHAR_RE=new RegExp("^["+s.NAME_START_CHAR+"]$","u"),s.NAME_CHAR_RE=new RegExp("^["+s.NAME_CHAR+"]$","u"),s.NAME_RE=new RegExp("^["+s.NAME_START_CHAR+"]["+s.NAME_CHAR+"]*$","u"),s.NMTOKEN_RE=new RegExp("^["+s.NAME_CHAR+"]+$","u");function i(o){return o>=65&&o<=90||o>=97&&o<=122||o===58||o===95||o===8204||o===8205||o>=192&&o<=214||o>=216&&o<=246||o>=248&&o<=767||o>=880&&o<=893||o>=895&&o<=8191||o>=8304&&o<=8591||o>=11264&&o<=12271||o>=12289&&o<=55295||o>=63744&&o<=64975||o>=65008&&o<=65533||o>=65536&&o<=983039}s.S_LIST=[32,10,13,9],s.isChar=function(o){return o>=1&&o<=55295||o>=57344&&o<=65533||o>=65536&&o<=1114111},s.isRestrictedChar=function(o){return o>=1&&o<=8||o===11||o===12||o>=14&&o<=31||o>=127&&o<=132||o>=134&&o<=159},s.isCharAndNotRestricted=function(o){return o===9||o===10||o===13||o>31&&o<127||o===133||o>159&&o<=55295||o>=57344&&o<=65533||o>=65536&&o<=1114111},s.isS=function(o){return o===32||o===10||o===13||o===9},s.isNameStartChar=i,s.isNameChar=function(o){return i(o)||o>=48&&o<=57||o===45||o===46||o===183||o>=768&&o<=879||o>=8255&&o<=8256}},{}],545:[function(t,r,s){/**
* Character class utilities for XML NS 1.0 edition 3.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/function i(o){return o>=65&&o<=90||o===95||o>=97&&o<=122||o>=192&&o<=214||o>=216&&o<=246||o>=248&&o<=767||o>=880&&o<=893||o>=895&&o<=8191||o>=8204&&o<=8205||o>=8304&&o<=8591||o>=11264&&o<=12271||o>=12289&&o<=55295||o>=63744&&o<=64975||o>=65008&&o<=65533||o>=65536&&o<=983039}Object.defineProperty(s,"__esModule",{value:!0}),s.NC_NAME_START_CHAR="A-Z_a-z------------",s.NC_NAME_CHAR="-"+s.NC_NAME_START_CHAR+".0-9--",s.NC_NAME_START_CHAR_RE=new RegExp("^["+s.NC_NAME_START_CHAR+"]$","u"),s.NC_NAME_CHAR_RE=new RegExp("^["+s.NC_NAME_CHAR+"]$","u"),s.NC_NAME_RE=new RegExp("^["+s.NC_NAME_START_CHAR+"]["+s.NC_NAME_CHAR+"]*$","u"),s.isNCNameStartChar=i,s.isNCNameChar=function(o){return i(o)||o===45||o===46||o>=48&&o<=57||o===183||o>=768&&o<=879||o>=8255&&o<=8256}},{}]},{},[15])(15)})})(f3);var ok=f3.exports;const ak=ug(ok);async function lk(n,e){var b;if(!n.grid)throw new Error("Project has no grid data");const{grid:t,palette:r,settings:s}=n,{includeColorLegend:i,cellSize:o,selection:u}=e,l=u?Math.min(u.startRow,u.endRow):0,a=u?Math.max(u.startRow,u.endRow):s.height-1,c=u?Math.min(u.startCol,u.endCol):0,f=(u?Math.max(u.startCol,u.endCol):s.width-1)-c+1,h=a-l+1,p=new ak.Workbook;p.creator="StitchFizzle",p.created=new Date;const g=p.addWorksheet("Chart",{views:[{showGridLines:!0}]}),m=new Map(r.map(v=>[v.id,v]));for(let v=1;v<=f;v++)g.getColumn(v).width=o;for(let v=0;v<h;v++){const k=g.getRow(v+1);k.height=o*5;for(let j=0;j<f;j++){const I=(b=t.cells[l+v])==null?void 0:b[c+j],U=k.getCell(j+1);if(I!=null&&I.colorId){const P=m.get(I.colorId);P&&(U.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF"+P.color.replace("#","")}},U.value=P.abbreviation,U.alignment={horizontal:"center",vertical:"middle"},U.font={size:8,color:{argb:uk(P.color)}})}U.border={top:{style:"thin",color:{argb:"FFCCCCCC"}},left:{style:"thin",color:{argb:"FFCCCCCC"}},bottom:{style:"thin",color:{argb:"FFCCCCCC"}},right:{style:"thin",color:{argb:"FFCCCCCC"}}}}}if(i&&r.length>0){const v=p.addWorksheet("Color Legend");v.getColumn(1).width=5,v.getColumn(2).width=20,v.getColumn(3).width=10;const k=v.getRow(1);k.getCell(1).value="Color",k.getCell(2).value="Name",k.getCell(3).value="Abbrev",k.font={bold:!0},r.forEach((j,I)=>{const U=v.getRow(I+2),P=U.getCell(1);P.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF"+j.color.replace("#","")}},P.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},U.getCell(2).value=j.name,U.getCell(3).value=j.abbreviation})}const y=await p.xlsx.writeBuffer();return new Blob([y],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})}function uk(n){const e=n.replace("#",""),t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16);return(.299*t+.587*r+.114*s)/255>.5?"FF000000":"FFFFFFFF"}async function ck(n,e){const t=await lk(n,e),r=URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download=`${n.name.replace(/[^a-zA-Z0-9-_]/g,"_")}.xlsx`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)}function hk(){const n=De(z=>z.project),e=De(z=>z.selection),t=yn(z=>z.closeDialog),[r,s]=Xe.useState("png"),[i,o]=Xe.useState("medium"),[u,l]=Xe.useState(1200),[a,c]=Xe.useState(1),[d,f]=Xe.useState(20),[h,p]=Xe.useState(3),[g,m]=Xe.useState(!0),[y,b]=Xe.useState(!0),[v,k]=Xe.useState(!1),[j,I]=Xe.useState(!1);if(!n)return null;const U=!!e,P=async()=>{if(n){I(!0);try{const z=v&&e?{startRow:e.startRow,endRow:e.endRow,startCol:e.startCol,endCol:e.endCol}:void 0;switch(r){case"json":Z7(n);break;case"png":await eS(n,{size:i,customWidth:i==="custom"?u:void 0,includeGridLines:g,includeLegend:y,backgroundColor:"#ffffff",selection:z});break;case"svg":iS(n,{cellSize:d,includeGridLines:g,includeLegend:y,backgroundColor:"#ffffff",selection:z});break;case"pdf":await sk(n,{pages:a,includeGridLines:g,includeLegend:y,backgroundColor:"#ffffff",selection:z});break;case"xlsx":await ck(n,{includeColorLegend:y,cellSize:h,selection:z});break}t()}catch(z){console.error("Export failed:",z),alert("Export failed. Please try again.")}finally{I(!1)}}};return tt.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:tt.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-6 w-[420px] max-h-[90vh] overflow-y-auto",children:[tt.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Export Chart"}),tt.jsxs("div",{className:"mb-6",children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Format"}),tt.jsx("div",{className:"grid grid-cols-5 gap-2",children:["json","png","svg","pdf","xlsx"].map(z=>tt.jsx("button",{onClick:()=>s(z),className:`py-2 px-3 rounded-lg text-sm font-medium transition-colors ${r===z?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:z.toUpperCase()},z))})]}),r==="png"&&tt.jsxs("div",{className:"mb-6 space-y-4",children:[tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Size"}),tt.jsx("div",{className:"grid grid-cols-4 gap-2",children:["small","medium","large","custom"].map(z=>tt.jsx("button",{onClick:()=>o(z),className:`py-2 px-3 rounded-lg text-sm font-medium transition-colors ${i===z?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:z==="small"?"600px":z==="medium"?"1200px":z==="large"?"2000px":"Custom"},z))})]}),i==="custom"&&tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Width (pixels)"}),tt.jsx("input",{type:"number",value:u,onChange:z=>l(Number(z.target.value)),min:100,max:1e4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),r==="svg"&&tt.jsxs("div",{className:"mb-6",children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cell Size (pixels)"}),tt.jsx("input",{type:"number",value:d,onChange:z=>f(Number(z.target.value)),min:5,max:100,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r==="pdf"&&tt.jsxs("div",{className:"mb-6",children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pages"}),tt.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,4,9,16].map(z=>tt.jsxs("button",{onClick:()=>c(z),className:`py-2 px-3 rounded-lg text-sm font-medium transition-colors ${a===z?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[z," ",z===1?"page":"pages"]},z))}),tt.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Multi-page exports split the chart across pages for detailed printing."})]}),r==="xlsx"&&tt.jsxs("div",{className:"mb-6",children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cell Size (Excel units)"}),tt.jsx("input",{type:"number",value:h,onChange:z=>p(Number(z.target.value)),min:1,max:20,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),tt.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Excel export creates a spreadsheet with colored cells. Great for printing or sharing."})]}),r!=="json"&&tt.jsxs("div",{className:"mb-6 space-y-3",children:[tt.jsxs("label",{className:"flex items-center gap-3",children:[tt.jsx("input",{type:"checkbox",checked:g,onChange:z=>m(z.target.checked),className:"w-4 h-4 rounded border-gray-300 text-blue-500 focus:ring-blue-500"}),tt.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Include grid lines"})]}),tt.jsxs("label",{className:"flex items-center gap-3",children:[tt.jsx("input",{type:"checkbox",checked:y,onChange:z=>b(z.target.checked),className:"w-4 h-4 rounded border-gray-300 text-blue-500 focus:ring-blue-500"}),tt.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Include color legend"})]}),U&&tt.jsxs("label",{className:"flex items-center gap-3",children:[tt.jsx("input",{type:"checkbox",checked:v,onChange:z=>k(z.target.checked),className:"w-4 h-4 rounded border-gray-300 text-blue-500 focus:ring-blue-500"}),tt.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Export selection only"})]})]}),r==="json"&&tt.jsx("div",{className:"mb-6 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:tt.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"JSON exports the complete project including all grid data, colors, and settings. Use this format for backups and sharing."})}),tt.jsxs("div",{className:"flex gap-3",children:[tt.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),tt.jsx("button",{onClick:P,disabled:j,className:"flex-1 px-4 py-2 text-white bg-blue-500 rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:j?"Exporting...":"Export"})]})]})})}function fk(){const n=yn(p=>p.closeDialog),e=yn(p=>p.setView),t=Xe.useRef(null),[r,s]=Xe.useState(null),[i,o]=Xe.useState(!1),[u,l]=Xe.useState(!1),a=async p=>{s(null),l(!0);try{const g=await p.text(),m=J7(g);if(!m){s("Invalid file format. Please select a valid StitchFizzle JSON file."),l(!1);return}m.id=Yu(),m.name=`${m.name} (imported)`,m.updatedAt=new Date,await zd(m),await De.getState().loadProject(m.id)?(n(),e("editor")):s("Failed to load the imported project.")}catch(g){console.error("Import failed:",g),s("Failed to import file. Please check the file format.")}finally{l(!1)}},c=p=>{p.preventDefault(),o(!1);const g=p.dataTransfer.files[0];g&&g.name.endsWith(".json")?a(g):s("Please drop a JSON file.")},d=p=>{p.preventDefault(),o(!0)},f=()=>{o(!1)},h=p=>{var m;const g=(m=p.target.files)==null?void 0:m[0];g&&a(g)};return tt.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:tt.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-6 w-[420px]",children:[tt.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Import Project"}),tt.jsxs("div",{onDrop:c,onDragOver:d,onDragLeave:f,onClick:()=>{var p;return(p=t.current)==null?void 0:p.click()},className:`border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-colors ${i?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500"}`,children:[tt.jsx("div",{className:"text-4xl mb-3",children:""}),tt.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-1",children:"Drag & drop a JSON file here"}),tt.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"or click to browse"}),tt.jsx("input",{ref:t,type:"file",accept:".json",onChange:h,className:"hidden"})]}),r&&tt.jsx("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:tt.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r})}),u&&tt.jsx("div",{className:"mt-4 text-center text-gray-600 dark:text-gray-300",children:"Importing..."}),tt.jsx("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:tt.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Supported formats: StitchFizzle JSON (.json)"})}),tt.jsx("div",{className:"flex gap-3 mt-6",children:tt.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})})]})})}function dk(n,e){if(!n.grid)throw new Error("Project has no grid data");const{grid:t,palette:r,settings:s,chartType:i}=n,{direction:o,includeRowNumbers:u,includeStitchCounts:l,format:a,c2cNotation:c}=e,d=new Map(r.map(y=>[y.id,y.abbreviation||y.name.substring(0,3)])),f=new Map(r.map(y=>[y.id,y.name])),h=[...t.cells];o==="bottom-to-top"&&h.reverse();const p=[];let g=0;const m=new Set;if(a==="markdown"){p.push(`# ${n.name}`),p.push(""),p.push(`Chart type: ${kb(i)}`),p.push(`Size: ${s.width} x ${s.height}`),p.push(""),p.push("## Color Legend"),p.push("");for(const y of r)p.push(`- **${y.abbreviation||y.name.substring(0,3)}**: ${y.name}`);p.push(""),p.push("## Instructions"),p.push("")}else{p.push(n.name),p.push("-".repeat(n.name.length)),p.push(""),p.push(`Chart type: ${kb(i)}`),p.push(`Size: ${s.width} x ${s.height}`),p.push(""),p.push("Color Legend:");for(const y of r)p.push(`  ${y.abbreviation||y.name.substring(0,3)} = ${y.name}`);p.push(""),p.push("Instructions:"),p.push("")}return i==="c2c"&&c?(p.push(...mk(h,d,f,m,u,a)),g=h.reduce((y,b)=>y+b.filter(v=>v.colorId).length,0)):h.forEach((y,b)=>{const v=o==="bottom-to-top"?s.height-b:b+1,k=pk(y,d,m),j=y.filter(U=>U.colorId).length;g+=j;let I="";u&&(I+=a==="markdown"?`**Row ${v}:** `:`Row ${v}: `),I+=k,l&&j>0&&(I+=` (${j} stitches)`),p.push(I)}),p.push(""),a==="markdown"?(p.push("## Summary"),p.push(""),p.push(`- Total rows: ${s.height}`),p.push(`- Total stitches: ${g}`),p.push(`- Colors used: ${m.size}`)):(p.push("Summary:"),p.push(`  Total rows: ${s.height}`),p.push(`  Total stitches: ${g}`),p.push(`  Colors used: ${m.size}`)),{text:p.join(`
`),rowCount:s.height,totalStitches:g,colorsUsed:Array.from(m)}}function pk(n,e,t){const r=[];for(const s of n){const i=r[r.length-1];i&&i.color===s.colorId?i.count++:r.push({color:s.colorId,count:1}),s.colorId&&t.add(s.colorId)}return r.filter(s=>s.color!==null).map(s=>{const i=e.get(s.color)||"?";return s.count>1?`${s.count}${i}`:i}).join(", ")}function mk(n,e,t,r,s,i){var c;const o=[],u=n.length,l=((c=n[0])==null?void 0:c.length)||0;let a=1;for(let d=u-1;d>=0;d--){const f=[];let h=d,p=0;for(;h<u&&p<l;){f.push({color:n[h][p].colorId});const b=n[h][p].colorId;b&&r.add(b),h++,p++}const g=Sb(f,e),m=a<=Math.min(u,l)?"Inc":"Dec";let y="";s&&(y+=i==="markdown"?`**Row ${a} (${m}):** `:`Row ${a} (${m}): `),y+=g,o.push(y),a++}for(let d=1;d<l;d++){const f=[];let h=0,p=d;for(;h<u&&p<l;){f.push({color:n[h][p].colorId});const y=n[h][p].colorId;y&&r.add(y),h++,p++}const g=Sb(f,e);let m="";s&&(m+=i==="markdown"?`**Row ${a} (Dec):** `:`Row ${a} (Dec): `),m+=g,o.push(m),a++}return o}function Sb(n,e){const t=[];for(const r of n){const s=t[t.length-1];s&&s.color===r.color?s.count++:t.push({color:r.color,count:1})}return t.filter(r=>r.color!==null).map(r=>{const s=e.get(r.color)||"?";return r.count>1?`${r.count}${s}`:s}).join(", ")}function kb(n){return{c2c:"Corner to Corner (C2C)",colorwork:"Colorwork",filet:"Filet Crochet",mosaic:"Overlay Mosaic",freeform:"Freeform",tunisian:"Tunisian"}[n]}function gk(n){return navigator.clipboard.writeText(n)}function yk(n,e){const t=new Blob([n],{type:"text/plain"}),r=URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)}function bk(){const n=De(l=>l.project),e=yn(l=>l.closeDialog),t=yn(l=>l.addToast),[r,s]=Xe.useState({direction:"bottom-to-top",includeRowNumbers:!0,includeStitchCounts:!0,format:"plain",c2cNotation:(n==null?void 0:n.chartType)==="c2c"}),i=Xe.useMemo(()=>{if(!n)return null;try{return dk(n,r)}catch{return null}},[n,r]);if(!n)return null;const o=async()=>{i&&(await gk(i.text),t("Copied to clipboard","success"))},u=()=>{if(i){const l=r.format==="markdown"?"md":"txt";yk(i.text,`${n.name.replace(/[^a-zA-Z0-9-_]/g,"_")}_instructions.${l}`)}};return tt.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:tt.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-[700px] max-h-[90vh] flex flex-col",children:[tt.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:tt.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Written Instructions"})}),tt.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 space-y-4",children:[tt.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Direction"}),tt.jsxs("select",{value:r.direction,onChange:l=>s({...r,direction:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[tt.jsx("option",{value:"bottom-to-top",children:"Bottom to Top"}),tt.jsx("option",{value:"top-to-bottom",children:"Top to Bottom"})]})]}),tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Format"}),tt.jsxs("select",{value:r.format,onChange:l=>s({...r,format:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[tt.jsx("option",{value:"plain",children:"Plain Text"}),tt.jsx("option",{value:"markdown",children:"Markdown"})]})]})]}),tt.jsxs("div",{className:"flex flex-wrap gap-4",children:[tt.jsxs("label",{className:"flex items-center gap-2",children:[tt.jsx("input",{type:"checkbox",checked:r.includeRowNumbers,onChange:l=>s({...r,includeRowNumbers:l.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-blue-500 focus:ring-blue-500"}),tt.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Row numbers"})]}),tt.jsxs("label",{className:"flex items-center gap-2",children:[tt.jsx("input",{type:"checkbox",checked:r.includeStitchCounts,onChange:l=>s({...r,includeStitchCounts:l.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-blue-500 focus:ring-blue-500"}),tt.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Stitch counts"})]}),n.chartType==="c2c"&&tt.jsxs("label",{className:"flex items-center gap-2",children:[tt.jsx("input",{type:"checkbox",checked:r.c2cNotation,onChange:l=>s({...r,c2cNotation:l.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-blue-500 focus:ring-blue-500"}),tt.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"C2C diagonal notation"})]})]})]}),tt.jsx("div",{className:"flex-1 overflow-hidden p-4",children:i?tt.jsxs("div",{className:"h-full flex flex-col",children:[tt.jsx("div",{className:"flex items-center justify-between mb-2",children:tt.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[i.rowCount," rows, ",i.totalStitches," stitches,"," ",i.colorsUsed.length," colors"]})}),tt.jsx("div",{className:"flex-1 overflow-auto",children:tt.jsx("pre",{className:"text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap font-mono bg-gray-50 dark:bg-gray-900 p-4 rounded-lg h-full overflow-auto",children:i.text})})]}):tt.jsx("div",{className:"text-center text-gray-500 py-8",children:"Unable to generate instructions"})}),tt.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex gap-3",children:[tt.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"}),tt.jsx("div",{className:"flex-1"}),tt.jsxs("button",{onClick:o,disabled:!i,className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 transition-colors flex items-center gap-2",children:[tt.jsx("span",{children:""})," Copy"]}),tt.jsxs("button",{onClick:u,disabled:!i,className:"px-4 py-2 text-white bg-blue-500 rounded-lg hover:bg-blue-600 disabled:opacity-50 transition-colors flex items-center gap-2",children:[tt.jsx("span",{children:""})," Download"]})]})]})})}function lg(n){let e=255,t=0,r=255,s=0,i=255,o=0;for(const[u,l,a]of n)e=Math.min(e,u),t=Math.max(t,u),r=Math.min(r,l),s=Math.max(s,l),i=Math.min(i,a),o=Math.max(o,a);return{colors:n,rMin:e,rMax:t,gMin:r,gMax:s,bMin:i,bMax:o}}function vk(n){const e=n.rMax-n.rMin,t=n.gMax-n.gMin,r=n.bMax-n.bMin;let s;e>=t&&e>=r?s=0:t>=r?s=1:s=2,n.colors.sort((o,u)=>o[s]-u[s]);const i=Math.floor(n.colors.length/2);return[lg(n.colors.slice(0,i)),lg(n.colors.slice(i))]}function wk(n){let e=0,t=0,r=0;for(const[i,o,u]of n.colors)e+=i,t+=o,r+=u;const s=n.colors.length;return[Math.round(e/s),Math.round(t/s),Math.round(r/s)]}function xk(n,e){if(n.length===0)return[];if(n.length<=e){const r=new Set,s=[];for(const[i,o,u]of n){const l=`${i},${o},${u}`;r.has(l)||(r.add(l),s.push([i,o,u]))}return s}let t=[lg(n)];for(;t.length<e;){let r=0,s=0;for(let u=0;u<t.length;u++)t[u].colors.length>s&&(s=t[u].colors.length,r=u);if(s<=1)break;const[i,o]=vk(t[r]);t.splice(r,1,i,o)}return t.map(wk)}function _k(n,e){const t=n[0]-e[0],r=n[1]-e[1],s=n[2]-e[2];return t*t+r*r+s*s}function Sk(n,e){let t=1/0,r=0;for(let s=0;s<e.length;s++){const i=_k(n,e[s]);i<t&&(t=i,r=s)}return r}function kk(n,e,t){return"#"+[n,e,t].map(r=>r.toString(16).padStart(2,"0")).join("")}async function Ck(n,e){const{targetWidth:t,targetHeight:r,maxColors:s,rotation:i}=e,o=await Tk(n),u=document.createElement("canvas"),l=u.getContext("2d");let a=t,c=r;(i===90||i===270)&&(a=r,c=t),u.width=a,u.height=c,l.save(),i===90?(l.translate(a,0),l.rotate(90*Math.PI/180)):i===180?(l.translate(a,c),l.rotate(180*Math.PI/180)):i===270&&(l.translate(0,c),l.rotate(270*Math.PI/180));const d=i===90||i===270?r:t,f=i===90||i===270?t:r;l.drawImage(o,0,0,d,f),l.restore();const p=l.getImageData(0,0,a,c).data,g=[];for(let k=0;k<p.length;k+=4){const j=p[k],I=p[k+1],U=p[k+2];p[k+3]>128&&g.push([j,I,U])}const m=xk(g,s),y=m.map((k,j)=>({id:Yu(),color:kk(k[0],k[1],k[2]),name:`Color ${j+1}`,abbreviation:`C${j+1}`})),b=[];let v=0;for(let k=0;k<c;k++){b[k]=[];for(let j=0;j<a;j++){const I=p[v],U=p[v+1],P=p[v+2],z=p[v+3];if(v+=4,z>128&&m.length>0){const q=Sk([I,U,P],m);b[k][j]={colorId:y[q].id,symbolId:null}}else b[k][j]={colorId:null,symbolId:null}}}return{cells:b,palette:y,width:a,height:c}}function Tk(n){return new Promise((e,t)=>{const r=new Image;r.onload=()=>e(r),r.onerror=t,r.src=URL.createObjectURL(n)})}function Ak(){const n=yn(k=>k.closeDialog),e=yn(k=>k.setView),t=yn(k=>k.addToast),r=Xe.useRef(null),s=Xe.useRef(null),[i,o]=Xe.useState(null),[u,l]=Xe.useState(null),[a,c]=Xe.useState(!1),[d,f]=Xe.useState({targetWidth:50,targetHeight:50,maxColors:10,rotation:0}),[h,p]=Xe.useState("Imported Chart"),[g,m]=Xe.useState("colorwork");Xe.useEffect(()=>()=>{u&&URL.revokeObjectURL(u)},[u]);const y=k=>{var I;const j=(I=k.target.files)==null?void 0:I[0];if(j&&j.type.startsWith("image/")){o(j),u&&URL.revokeObjectURL(u),l(URL.createObjectURL(j));const U=j.name.replace(/\.[^.]+$/,"").replace(/[-_]/g," ");p(U||"Imported Chart")}},b=k=>{k.preventDefault();const j=k.dataTransfer.files[0];if(j&&j.type.startsWith("image/")){o(j),u&&URL.revokeObjectURL(u),l(URL.createObjectURL(j));const I=j.name.replace(/\.[^.]+$/,"").replace(/[-_]/g," ");p(I||"Imported Chart")}},v=async()=>{if(i){c(!0);try{const k=await Ck(i,d),j=Yu(),I=new Date,U={id:j,name:h,chartType:g,createdAt:I,updatedAt:I,settings:{width:k.width,height:k.height,gaugeH:1,gaugeV:1,gridLines:{show:!0,color:"#cccccc",thickness:1,highlight5:!0,highlight10:!0,highlight5Color:"#999999",highlight10Color:"#666666"}},grid:{cells:k.cells},palette:k.palette};await zd(U),await De.getState().loadProject(j)&&(n(),e("editor"),t("Image imported successfully","success"))}catch(k){console.error("Import failed:",k),t("Failed to import image","error")}finally{c(!1)}}};return tt.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:tt.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-[600px] max-h-[90vh] overflow-y-auto",children:tt.jsxs("div",{className:"p-6",children:[tt.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Import Image"}),!i&&tt.jsxs("div",{onDrop:b,onDragOver:k=>k.preventDefault(),onClick:()=>{var k;return(k=r.current)==null?void 0:k.click()},className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-8 text-center cursor-pointer hover:border-blue-400 dark:hover:border-blue-500 transition-colors",children:[tt.jsx("div",{className:"text-4xl mb-3",children:""}),tt.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-1",children:"Drag & drop an image here"}),tt.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"JPG, PNG, GIF supported"}),tt.jsx("input",{ref:r,type:"file",accept:"image/*",onChange:y,className:"hidden"})]}),i&&tt.jsxs("div",{className:"space-y-4",children:[tt.jsxs("div",{className:"flex gap-4",children:[tt.jsxs("div",{className:"flex-1",children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Original Image"}),tt.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-2 flex items-center justify-center h-40",children:u&&tt.jsx("img",{src:u,alt:"Preview",className:"max-h-full max-w-full object-contain",style:{transform:`rotate(${d.rotation}deg)`}})})]}),tt.jsxs("div",{className:"flex-1",children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Output Preview"}),tt.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-2 flex items-center justify-center h-40",children:[tt.jsx("canvas",{ref:s,className:"max-h-full max-w-full",style:{imageRendering:"pixelated"}}),tt.jsxs("div",{className:"text-sm text-gray-500",children:[d.targetWidth," x ",d.targetHeight," cells"]})]})]})]}),tt.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Name"}),tt.jsx("input",{type:"text",value:h,onChange:k=>p(k.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Chart Type"}),tt.jsxs("select",{value:g,onChange:k=>m(k.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[tt.jsx("option",{value:"colorwork",children:"Colorwork"}),tt.jsx("option",{value:"c2c",children:"Corner to Corner (C2C)"}),tt.jsx("option",{value:"filet",children:"Filet Crochet"}),tt.jsx("option",{value:"mosaic",children:"Overlay Mosaic"}),tt.jsx("option",{value:"tunisian",children:"Tunisian"})]})]})]}),tt.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Width (cells)"}),tt.jsx("input",{type:"number",value:d.targetWidth,onChange:k=>f({...d,targetWidth:Math.max(1,Math.min(500,Number(k.target.value)))}),min:1,max:500,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Height (cells)"}),tt.jsx("input",{type:"number",value:d.targetHeight,onChange:k=>f({...d,targetHeight:Math.max(1,Math.min(500,Number(k.target.value)))}),min:1,max:500,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),tt.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[tt.jsxs("div",{children:[tt.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Max Colors: ",d.maxColors]}),tt.jsx("input",{type:"range",value:d.maxColors,onChange:k=>f({...d,maxColors:Number(k.target.value)}),min:2,max:50,className:"w-full"})]}),tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rotation"}),tt.jsx("div",{className:"flex gap-2",children:[0,90,180,270].map(k=>tt.jsxs("button",{onClick:()=>f({...d,rotation:k}),className:`flex-1 py-2 text-sm rounded-lg transition-colors ${d.rotation===k?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[k,""]},k))})]})]}),tt.jsx("button",{onClick:()=>{o(null),u&&(URL.revokeObjectURL(u),l(null))},className:"text-sm text-blue-500 hover:text-blue-600",children:"Choose different image"})]}),tt.jsxs("div",{className:"flex gap-3 mt-6",children:[tt.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),tt.jsx("button",{onClick:v,disabled:!i||a,className:"flex-1 px-4 py-2 text-white bg-blue-500 rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a?"Importing...":"Import"})]})]})})})}function Ek(){const n=De(d=>d.project),e=n==null?void 0:n.progressTracker,t=De(d=>d.initProgressTracker),r=De(d=>d.setProgressRow),s=De(d=>d.nextProgressRow),i=De(d=>d.prevProgressRow),o=De(d=>d.updateProgressSettings),u=De(d=>d.clearProgressTracker);if(!n)return null;if(!e)return tt.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:tt.jsxs("div",{className:"text-center",children:[tt.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Progress Tracker"}),tt.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"Track your progress through the chart row by row"}),tt.jsx("button",{onClick:t,className:"px-4 py-2 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Enable Tracking"})]})});const l=e.currentRow,a=n.settings.height,c=Math.round((l+1)/a*100);return tt.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 space-y-4",children:[tt.jsxs("div",{className:"flex items-center justify-between",children:[tt.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Progress Tracker"}),tt.jsx("button",{onClick:u,className:"text-xs text-gray-500 hover:text-red-500 transition-colors",title:"Disable tracking",children:"Disable"})]}),tt.jsxs("div",{className:"space-y-1",children:[tt.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[tt.jsxs("span",{children:["Row ",l+1," of ",a]}),tt.jsxs("span",{children:[c,"%"]})]}),tt.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:tt.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${c}%`}})})]}),tt.jsxs("div",{className:"flex items-center gap-2",children:[tt.jsx("button",{onClick:i,disabled:l<=0,className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-40 disabled:cursor-not-allowed transition-colors",title:"Previous row",children:tt.jsx("svg",{className:"w-4 h-4 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),tt.jsx("input",{type:"number",value:l+1,onChange:d=>r(Number(d.target.value)-1),min:1,max:a,className:"flex-1 px-3 py-2 text-center text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),tt.jsx("button",{onClick:s,disabled:l>=a-1,className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-40 disabled:cursor-not-allowed transition-colors",title:"Next row",children:tt.jsx("svg",{className:"w-4 h-4 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),tt.jsxs("div",{className:"space-y-3 pt-2 border-t border-gray-200 dark:border-gray-700",children:[tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Direction"}),tt.jsxs("select",{value:e.direction,onChange:d=>o({direction:d.target.value}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[tt.jsx("option",{value:"horizontal",children:"Horizontal (rows)"}),tt.jsx("option",{value:"vertical",children:"Vertical (columns)"}),tt.jsx("option",{value:"diagonal",children:"Diagonal (C2C)"})]})]}),tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Darken Mode"}),tt.jsxs("select",{value:e.darkenMode,onChange:d=>o({darkenMode:d.target.value}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[tt.jsx("option",{value:"done",children:"Darken completed rows"}),tt.jsx("option",{value:"todo",children:"Darken remaining rows"}),tt.jsx("option",{value:"except-current",children:"Darken all except current"}),tt.jsx("option",{value:"none",children:"No darkening"})]})]}),tt.jsxs("div",{children:[tt.jsxs("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:["Brightness: ",e.brightness,"%"]}),tt.jsx("input",{type:"range",value:e.brightness,onChange:d=>o({brightness:Number(d.target.value)}),min:10,max:90,className:"w-full"})]})]})]})}function jk(){const n=yn(r=>r.closeDialog),e=uc(r=>r.settings),t=uc(r=>r.updateSettings);return tt.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:tt.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-[480px] max-h-[90vh] overflow-y-auto",children:tt.jsxs("div",{className:"p-6",children:[tt.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Settings"}),tt.jsxs("div",{className:"space-y-6",children:[tt.jsxs("section",{children:[tt.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3",children:"Appearance"}),tt.jsx("div",{className:"space-y-4",children:tt.jsxs("div",{className:"flex items-center justify-between",children:[tt.jsxs("div",{children:[tt.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Dark Mode"}),tt.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Use dark theme for the interface"})]}),tt.jsx("button",{onClick:()=>t({darkMode:!e.darkMode}),className:`relative w-12 h-6 rounded-full transition-colors ${e.darkMode?"bg-blue-500":"bg-gray-300 dark:bg-gray-600"}`,children:tt.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${e.darkMode?"left-7":"left-1"}`})})]})})]}),tt.jsxs("section",{children:[tt.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3",children:"Preferences"}),tt.jsxs("div",{className:"space-y-4",children:[tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Units"}),tt.jsxs("select",{value:e.units,onChange:r=>t({units:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[tt.jsx("option",{value:"metric",children:"Metric (cm, mm)"}),tt.jsx("option",{value:"imperial",children:"Imperial (in)"})]})]}),tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Handedness"}),tt.jsxs("select",{value:e.handedness,onChange:r=>t({handedness:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[tt.jsx("option",{value:"right",children:"Right-handed"}),tt.jsx("option",{value:"left",children:"Left-handed"})]}),tt.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Affects row numbering direction in instructions"})]})]})]}),tt.jsxs("section",{children:[tt.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3",children:"Default New Chart Settings"}),tt.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Width"}),tt.jsx("input",{type:"number",value:e.defaultGridWidth,onChange:r=>t({defaultGridWidth:Number(r.target.value)}),min:1,max:1e3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Height"}),tt.jsx("input",{type:"number",value:e.defaultGridHeight,onChange:r=>t({defaultGridHeight:Number(r.target.value)}),min:1,max:1e3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Gauge H"}),tt.jsx("input",{type:"number",value:e.defaultGaugeH,onChange:r=>t({defaultGaugeH:Number(r.target.value)}),min:.1,max:10,step:.1,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),tt.jsxs("div",{children:[tt.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Gauge V"}),tt.jsx("input",{type:"number",value:e.defaultGaugeV,onChange:r=>t({defaultGaugeV:Number(r.target.value)}),min:.1,max:10,step:.1,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),tt.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Gauge affects stitch proportions for non-square stitches"})]}),tt.jsxs("section",{children:[tt.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3",children:"About"}),tt.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[tt.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium",children:"StitchFizzle v1.0.0"}),tt.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Free, open-source crochet chart creator. All data stored locally."}),tt.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline mt-2 inline-block",children:"View on GitHub"})]})]})]}),tt.jsx("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:tt.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 text-white bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors",children:"Done"})})]})})})}function Mk(){const n=De(m=>m.project),e=De(m=>m.setActiveTool),t=De(m=>m.undo),r=De(m=>m.redo),s=De(m=>m.saveCurrentProject),i=De(m=>m.setZoom),o=De(m=>m.zoom),u=De(m=>m.clearSelection),l=De(m=>m.copySelection),a=De(m=>m.pasteSelection),c=De(m=>m.fillSelection),d=De(m=>m.selection),f=De(m=>m.nextProgressRow),h=De(m=>m.prevProgressRow),p=n==null?void 0:n.progressTracker,g=yn(m=>m.view);Xe.useEffect(()=>{const m=b=>{if(g!=="editor"||!n||b.target instanceof HTMLInputElement||b.target instanceof HTMLTextAreaElement)return;const v=b.ctrlKey||b.metaKey;if(!v&&!b.altKey&&!b.shiftKey)switch(b.key.toLowerCase()){case"d":b.preventDefault(),e("draw");break;case"e":b.preventDefault(),e("erase");break;case"f":b.preventDefault(),e("fill");break;case"s":b.preventDefault(),e("select");break;case"i":b.preventDefault(),e("eyedropper");break;case" ":b.preventDefault(),e("pan");break;case"escape":b.preventDefault(),u();break;case"delete":case"backspace":d&&(b.preventDefault(),c(null));break;case"arrowdown":p&&(b.preventDefault(),f());break;case"arrowup":p&&(b.preventDefault(),h());break}if(v)switch(b.key.toLowerCase()){case"z":b.preventDefault(),b.shiftKey?r():t();break;case"y":b.preventDefault(),r();break;case"s":b.preventDefault(),s();break;case"=":case"+":b.preventDefault(),i(o+.1);break;case"-":b.preventDefault(),i(o-.1);break;case"0":b.preventDefault(),i(1);break;case"c":d&&(b.preventDefault(),l());break;case"v":d&&(b.preventDefault(),a());break}},y=b=>{b.key===" "&&De.getState().activeTool==="pan"&&e("draw")};return window.addEventListener("keydown",m),window.addEventListener("keyup",y),()=>{window.removeEventListener("keydown",m),window.removeEventListener("keyup",y)}},[n,g,e,t,r,s,i,o,u,l,a,c,d,f,h,p])}const Nk=3e4;function Ok(){const n=De(s=>s.project),e=De(s=>s.isDirty),t=De(s=>s.saveCurrentProject),r=Xe.useRef(null);Xe.useEffect(()=>{if(!(!n||!e))return r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{t(),console.log("Auto-saved project:",n.name)},Nk),()=>{r.current&&clearTimeout(r.current)}},[n,e,t]),Xe.useEffect(()=>{const s=()=>{n&&e&&t()};return window.addEventListener("beforeunload",s),()=>{window.removeEventListener("beforeunload",s)}},[n,e,t])}function Pk(){const n=yn(s=>s.view),e=yn(s=>s.activeDialog),t=uc(s=>s.loadSettings),r=De(s=>s.project);return Xe.useEffect(()=>{t()},[t]),Mk(),Ok(),tt.jsxs(q6,{children:[n==="projects"&&tt.jsx(G6,{}),n==="editor"&&r&&tt.jsx(Lk,{}),e==="newProject"&&tt.jsx(J6,{}),e==="export"&&tt.jsx(hk,{}),e==="import"&&tt.jsx(fk,{}),e==="imageImport"&&tt.jsx(Ak,{}),e==="writtenInstructions"&&tt.jsx(bk,{}),e==="settings"&&tt.jsx(jk,{})]})}function Lk(){const n=De(r=>r.project),[e,t]=Xe.useState(!0);return n?tt.jsxs("div",{className:"flex h-full relative",children:[tt.jsx("button",{onClick:()=>t(!e),className:"md:hidden absolute top-2 left-2 z-50 w-10 h-10 bg-white dark:bg-gray-800 rounded-lg shadow-lg flex items-center justify-center border border-gray-200 dark:border-gray-700",title:e?"Hide palette":"Show palette",children:tt.jsx("span",{className:"text-lg",children:e?"":""})}),tt.jsxs("div",{className:`flex flex-col w-64 border-r border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 transition-all duration-300 ${e?"translate-x-0":"-translate-x-full"} md:translate-x-0 absolute md:relative h-full z-40`,children:[tt.jsx("div",{className:"flex-1 overflow-hidden",children:tt.jsx(Y7,{})}),tt.jsx(Ek,{})]}),e&&tt.jsx("div",{className:"md:hidden fixed inset-0 bg-black/30 z-30",onClick:()=>t(!1)}),tt.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[tt.jsx($7,{}),tt.jsx("div",{className:"flex-1",children:tt.jsx(q7,{})})]})]}):null}I5(document.getElementById("root")).render(tt.jsx(Xe.StrictMode,{children:tt.jsx(Pk,{})}));export{ln as _,qr as c,ug as g};
