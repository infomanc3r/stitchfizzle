(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}})();var Wb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oy(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var yd={exports:{}},Yl={};var _0;function Qb(){if(_0)return Yl;_0=1;var f=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(i,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:f,type:i,key:c,ref:s!==void 0?s:null,props:l}}return Yl.Fragment=t,Yl.jsx=r,Yl.jsxs=r,Yl}var S0;function Zb(){return S0||(S0=1,yd.exports=Qb()),yd.exports}var A=Zb(),vd={exports:{}},Wt={};var C0;function Ib(){if(C0)return Wt;C0=1;var f=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function D(R){return R===null||typeof R!="object"?null:(R=T&&R[T]||R["@@iterator"],typeof R=="function"?R:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,$={};function nt(R,st,mt){this.props=R,this.context=st,this.refs=$,this.updater=mt||M}nt.prototype.isReactComponent={},nt.prototype.setState=function(R,st){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,st,"setState")},nt.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function ht(){}ht.prototype=nt.prototype;function bt(R,st,mt){this.props=R,this.context=st,this.refs=$,this.updater=mt||M}var pt=bt.prototype=new ht;pt.constructor=bt,B(pt,nt.prototype),pt.isPureReactComponent=!0;var at=Array.isArray;function ft(){}var dt={H:null,A:null,T:null,S:null},Ot=Object.prototype.hasOwnProperty;function Rt(R,st,mt){var Et=mt.ref;return{$$typeof:f,type:R,key:st,ref:Et!==void 0?Et:null,props:mt}}function Vt(R,st){return Rt(R.type,st,R.props)}function Qt(R){return typeof R=="object"&&R!==null&&R.$$typeof===f}function Ut(R){var st={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(mt){return st[mt]})}var Pt=/\/+/g;function Kt(R,st){return typeof R=="object"&&R!==null&&R.key!=null?Ut(""+R.key):st.toString(36)}function re(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(ft,ft):(R.status="pending",R.then(function(st){R.status==="pending"&&(R.status="fulfilled",R.value=st)},function(st){R.status==="pending"&&(R.status="rejected",R.reason=st)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function tt(R,st,mt,Et,Ht){var Yt=typeof R;(Yt==="undefined"||Yt==="boolean")&&(R=null);var te=!1;if(R===null)te=!0;else switch(Yt){case"bigint":case"string":case"number":te=!0;break;case"object":switch(R.$$typeof){case f:case t:te=!0;break;case b:return te=R._init,tt(te(R._payload),st,mt,Et,Ht)}}if(te)return Ht=Ht(R),te=Et===""?"."+Kt(R,0):Et,at(Ht)?(mt="",te!=null&&(mt=te.replace(Pt,"$&/")+"/"),tt(Ht,st,mt,"",function(un){return un})):Ht!=null&&(Qt(Ht)&&(Ht=Vt(Ht,mt+(Ht.key==null||R&&R.key===Ht.key?"":(""+Ht.key).replace(Pt,"$&/")+"/")+te)),st.push(Ht)),1;te=0;var tn=Et===""?".":Et+":";if(at(R))for(var Tt=0;Tt<R.length;Tt++)Et=R[Tt],Yt=tn+Kt(Et,Tt),te+=tt(Et,st,mt,Yt,Ht);else if(Tt=D(R),typeof Tt=="function")for(R=Tt.call(R),Tt=0;!(Et=R.next()).done;)Et=Et.value,Yt=tn+Kt(Et,Tt++),te+=tt(Et,st,mt,Yt,Ht);else if(Yt==="object"){if(typeof R.then=="function")return tt(re(R),st,mt,Et,Ht);throw st=String(R),Error("Objects are not valid as a React child (found: "+(st==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":st)+"). If you meant to render a collection of children, use an array instead.")}return te}function gt(R,st,mt){if(R==null)return R;var Et=[],Ht=0;return tt(R,Et,"","",function(Yt){return st.call(mt,Yt,Ht++)}),Et}function _t(R){if(R._status===-1){var st=R._result;st=st(),st.then(function(mt){(R._status===0||R._status===-1)&&(R._status=1,R._result=mt)},function(mt){(R._status===0||R._status===-1)&&(R._status=2,R._result=mt)}),R._status===-1&&(R._status=0,R._result=st)}if(R._status===1)return R._result.default;throw R._result}var zt=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var st=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(st))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},Lt={map:gt,forEach:function(R,st,mt){gt(R,function(){st.apply(this,arguments)},mt)},count:function(R){var st=0;return gt(R,function(){st++}),st},toArray:function(R){return gt(R,function(st){return st})||[]},only:function(R){if(!Qt(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return Wt.Activity=_,Wt.Children=Lt,Wt.Component=nt,Wt.Fragment=r,Wt.Profiler=s,Wt.PureComponent=bt,Wt.StrictMode=i,Wt.Suspense=m,Wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=dt,Wt.__COMPILER_RUNTIME={__proto__:null,c:function(R){return dt.H.useMemoCache(R)}},Wt.cache=function(R){return function(){return R.apply(null,arguments)}},Wt.cacheSignal=function(){return null},Wt.cloneElement=function(R,st,mt){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var Et=B({},R.props),Ht=R.key;if(st!=null)for(Yt in st.key!==void 0&&(Ht=""+st.key),st)!Ot.call(st,Yt)||Yt==="key"||Yt==="__self"||Yt==="__source"||Yt==="ref"&&st.ref===void 0||(Et[Yt]=st[Yt]);var Yt=arguments.length-2;if(Yt===1)Et.children=mt;else if(1<Yt){for(var te=Array(Yt),tn=0;tn<Yt;tn++)te[tn]=arguments[tn+2];Et.children=te}return Rt(R.type,Ht,Et)},Wt.createContext=function(R){return R={$$typeof:c,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:l,_context:R},R},Wt.createElement=function(R,st,mt){var Et,Ht={},Yt=null;if(st!=null)for(Et in st.key!==void 0&&(Yt=""+st.key),st)Ot.call(st,Et)&&Et!=="key"&&Et!=="__self"&&Et!=="__source"&&(Ht[Et]=st[Et]);var te=arguments.length-2;if(te===1)Ht.children=mt;else if(1<te){for(var tn=Array(te),Tt=0;Tt<te;Tt++)tn[Tt]=arguments[Tt+2];Ht.children=tn}if(R&&R.defaultProps)for(Et in te=R.defaultProps,te)Ht[Et]===void 0&&(Ht[Et]=te[Et]);return Rt(R,Yt,Ht)},Wt.createRef=function(){return{current:null}},Wt.forwardRef=function(R){return{$$typeof:d,render:R}},Wt.isValidElement=Qt,Wt.lazy=function(R){return{$$typeof:b,_payload:{_status:-1,_result:R},_init:_t}},Wt.memo=function(R,st){return{$$typeof:y,type:R,compare:st===void 0?null:st}},Wt.startTransition=function(R){var st=dt.T,mt={};dt.T=mt;try{var Et=R(),Ht=dt.S;Ht!==null&&Ht(mt,Et),typeof Et=="object"&&Et!==null&&typeof Et.then=="function"&&Et.then(ft,zt)}catch(Yt){zt(Yt)}finally{st!==null&&mt.types!==null&&(st.types=mt.types),dt.T=st}},Wt.unstable_useCacheRefresh=function(){return dt.H.useCacheRefresh()},Wt.use=function(R){return dt.H.use(R)},Wt.useActionState=function(R,st,mt){return dt.H.useActionState(R,st,mt)},Wt.useCallback=function(R,st){return dt.H.useCallback(R,st)},Wt.useContext=function(R){return dt.H.useContext(R)},Wt.useDebugValue=function(){},Wt.useDeferredValue=function(R,st){return dt.H.useDeferredValue(R,st)},Wt.useEffect=function(R,st){return dt.H.useEffect(R,st)},Wt.useEffectEvent=function(R){return dt.H.useEffectEvent(R)},Wt.useId=function(){return dt.H.useId()},Wt.useImperativeHandle=function(R,st,mt){return dt.H.useImperativeHandle(R,st,mt)},Wt.useInsertionEffect=function(R,st){return dt.H.useInsertionEffect(R,st)},Wt.useLayoutEffect=function(R,st){return dt.H.useLayoutEffect(R,st)},Wt.useMemo=function(R,st){return dt.H.useMemo(R,st)},Wt.useOptimistic=function(R,st){return dt.H.useOptimistic(R,st)},Wt.useReducer=function(R,st,mt){return dt.H.useReducer(R,st,mt)},Wt.useRef=function(R){return dt.H.useRef(R)},Wt.useState=function(R){return dt.H.useState(R)},Wt.useSyncExternalStore=function(R,st,mt){return dt.H.useSyncExternalStore(R,st,mt)},Wt.useTransition=function(){return dt.H.useTransition()},Wt.version="19.2.3",Wt}var w0;function $d(){return w0||(w0=1,vd.exports=Ib()),vd.exports}var me=$d();const Bi=Oy(me);var bd={exports:{}},Xl={},xd={exports:{}},_d={};var T0;function Jb(){return T0||(T0=1,(function(f){function t(tt,gt){var _t=tt.length;tt.push(gt);t:for(;0<_t;){var zt=_t-1>>>1,Lt=tt[zt];if(0<s(Lt,gt))tt[zt]=gt,tt[_t]=Lt,_t=zt;else break t}}function r(tt){return tt.length===0?null:tt[0]}function i(tt){if(tt.length===0)return null;var gt=tt[0],_t=tt.pop();if(_t!==gt){tt[0]=_t;t:for(var zt=0,Lt=tt.length,R=Lt>>>1;zt<R;){var st=2*(zt+1)-1,mt=tt[st],Et=st+1,Ht=tt[Et];if(0>s(mt,_t))Et<Lt&&0>s(Ht,mt)?(tt[zt]=Ht,tt[Et]=_t,zt=Et):(tt[zt]=mt,tt[st]=_t,zt=st);else if(Et<Lt&&0>s(Ht,_t))tt[zt]=Ht,tt[Et]=_t,zt=Et;else break t}}return gt}function s(tt,gt){var _t=tt.sortIndex-gt.sortIndex;return _t!==0?_t:tt.id-gt.id}if(f.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;f.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();f.unstable_now=function(){return c.now()-d}}var m=[],y=[],b=1,_=null,T=3,D=!1,M=!1,B=!1,$=!1,nt=typeof setTimeout=="function"?setTimeout:null,ht=typeof clearTimeout=="function"?clearTimeout:null,bt=typeof setImmediate<"u"?setImmediate:null;function pt(tt){for(var gt=r(y);gt!==null;){if(gt.callback===null)i(y);else if(gt.startTime<=tt)i(y),gt.sortIndex=gt.expirationTime,t(m,gt);else break;gt=r(y)}}function at(tt){if(B=!1,pt(tt),!M)if(r(m)!==null)M=!0,ft||(ft=!0,Ut());else{var gt=r(y);gt!==null&&re(at,gt.startTime-tt)}}var ft=!1,dt=-1,Ot=5,Rt=-1;function Vt(){return $?!0:!(f.unstable_now()-Rt<Ot)}function Qt(){if($=!1,ft){var tt=f.unstable_now();Rt=tt;var gt=!0;try{t:{M=!1,B&&(B=!1,ht(dt),dt=-1),D=!0;var _t=T;try{e:{for(pt(tt),_=r(m);_!==null&&!(_.expirationTime>tt&&Vt());){var zt=_.callback;if(typeof zt=="function"){_.callback=null,T=_.priorityLevel;var Lt=zt(_.expirationTime<=tt);if(tt=f.unstable_now(),typeof Lt=="function"){_.callback=Lt,pt(tt),gt=!0;break e}_===r(m)&&i(m),pt(tt)}else i(m);_=r(m)}if(_!==null)gt=!0;else{var R=r(y);R!==null&&re(at,R.startTime-tt),gt=!1}}break t}finally{_=null,T=_t,D=!1}gt=void 0}}finally{gt?Ut():ft=!1}}}var Ut;if(typeof bt=="function")Ut=function(){bt(Qt)};else if(typeof MessageChannel<"u"){var Pt=new MessageChannel,Kt=Pt.port2;Pt.port1.onmessage=Qt,Ut=function(){Kt.postMessage(null)}}else Ut=function(){nt(Qt,0)};function re(tt,gt){dt=nt(function(){tt(f.unstable_now())},gt)}f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(tt){tt.callback=null},f.unstable_forceFrameRate=function(tt){0>tt||125<tt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ot=0<tt?Math.floor(1e3/tt):5},f.unstable_getCurrentPriorityLevel=function(){return T},f.unstable_next=function(tt){switch(T){case 1:case 2:case 3:var gt=3;break;default:gt=T}var _t=T;T=gt;try{return tt()}finally{T=_t}},f.unstable_requestPaint=function(){$=!0},f.unstable_runWithPriority=function(tt,gt){switch(tt){case 1:case 2:case 3:case 4:case 5:break;default:tt=3}var _t=T;T=tt;try{return gt()}finally{T=_t}},f.unstable_scheduleCallback=function(tt,gt,_t){var zt=f.unstable_now();switch(typeof _t=="object"&&_t!==null?(_t=_t.delay,_t=typeof _t=="number"&&0<_t?zt+_t:zt):_t=zt,tt){case 1:var Lt=-1;break;case 2:Lt=250;break;case 5:Lt=1073741823;break;case 4:Lt=1e4;break;default:Lt=5e3}return Lt=_t+Lt,tt={id:b++,callback:gt,priorityLevel:tt,startTime:_t,expirationTime:Lt,sortIndex:-1},_t>zt?(tt.sortIndex=_t,t(y,tt),r(m)===null&&tt===r(y)&&(B?(ht(dt),dt=-1):B=!0,re(at,_t-zt))):(tt.sortIndex=Lt,t(m,tt),M||D||(M=!0,ft||(ft=!0,Ut()))),tt},f.unstable_shouldYield=Vt,f.unstable_wrapCallback=function(tt){var gt=T;return function(){var _t=T;T=gt;try{return tt.apply(this,arguments)}finally{T=_t}}}})(_d)),_d}var O0;function $b(){return O0||(O0=1,xd.exports=Jb()),xd.exports}var Sd={exports:{}},Tn={};var D0;function t1(){if(D0)return Tn;D0=1;var f=$d();function t(m){var y="https://react.dev/errors/"+m;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(m,y,b){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:_==null?null:""+_,children:m,containerInfo:y,implementation:b}}var c=f.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,y){if(m==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Tn.createPortal=function(m,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return l(m,y,null,b)},Tn.flushSync=function(m){var y=c.T,b=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=y,i.p=b,i.d.f()}},Tn.preconnect=function(m,y){typeof m=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(m,y))},Tn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Tn.preinit=function(m,y){if(typeof m=="string"&&y&&typeof y.as=="string"){var b=y.as,_=d(b,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,D=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?i.d.S(m,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:D}):b==="script"&&i.d.X(m,{crossOrigin:_,integrity:T,fetchPriority:D,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Tn.preinitModule=function(m,y){if(typeof m=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=d(y.as,y.crossOrigin);i.d.M(m,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(m)},Tn.preload=function(m,y){if(typeof m=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,_=d(b,y.crossOrigin);i.d.L(m,b,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Tn.preloadModule=function(m,y){if(typeof m=="string")if(y){var b=d(y.as,y.crossOrigin);i.d.m(m,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(m)},Tn.requestFormReset=function(m){i.d.r(m)},Tn.unstable_batchedUpdates=function(m,y){return m(y)},Tn.useFormState=function(m,y,b){return c.H.useFormState(m,y,b)},Tn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Tn.version="19.2.3",Tn}var E0;function e1(){if(E0)return Sd.exports;E0=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(t){console.error(t)}}return f(),Sd.exports=t1(),Sd.exports}var M0;function n1(){if(M0)return Xl;M0=1;var f=$b(),t=$d(),r=e1();function i(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function c(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function d(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(l(e)!==e)throw Error(i(188))}function y(e){var n=e.alternate;if(!n){if(n=l(e),n===null)throw Error(i(188));return n!==e?null:e}for(var a=e,o=n;;){var h=a.return;if(h===null)break;var p=h.alternate;if(p===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===a)return m(h),e;if(p===o)return m(h),n;p=p.sibling}throw Error(i(188))}if(a.return!==o.return)a=h,o=p;else{for(var S=!1,O=h.child;O;){if(O===a){S=!0,a=h,o=p;break}if(O===o){S=!0,o=h,a=p;break}O=O.sibling}if(!S){for(O=p.child;O;){if(O===a){S=!0,a=p,o=h;break}if(O===o){S=!0,o=p,a=h;break}O=O.sibling}if(!S)throw Error(i(189))}}if(a.alternate!==o)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:n}function b(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=b(e),n!==null)return n;e=e.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),nt=Symbol.for("react.profiler"),ht=Symbol.for("react.consumer"),bt=Symbol.for("react.context"),pt=Symbol.for("react.forward_ref"),at=Symbol.for("react.suspense"),ft=Symbol.for("react.suspense_list"),dt=Symbol.for("react.memo"),Ot=Symbol.for("react.lazy"),Rt=Symbol.for("react.activity"),Vt=Symbol.for("react.memo_cache_sentinel"),Qt=Symbol.iterator;function Ut(e){return e===null||typeof e!="object"?null:(e=Qt&&e[Qt]||e["@@iterator"],typeof e=="function"?e:null)}var Pt=Symbol.for("react.client.reference");function Kt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Pt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case B:return"Fragment";case nt:return"Profiler";case $:return"StrictMode";case at:return"Suspense";case ft:return"SuspenseList";case Rt:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case M:return"Portal";case bt:return e.displayName||"Context";case ht:return(e._context.displayName||"Context")+".Consumer";case pt:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case dt:return n=e.displayName||null,n!==null?n:Kt(e.type)||"Memo";case Ot:n=e._payload,e=e._init;try{return Kt(e(n))}catch{}}return null}var re=Array.isArray,tt=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gt=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_t={pending:!1,data:null,method:null,action:null},zt=[],Lt=-1;function R(e){return{current:e}}function st(e){0>Lt||(e.current=zt[Lt],zt[Lt]=null,Lt--)}function mt(e,n){Lt++,zt[Lt]=e.current,e.current=n}var Et=R(null),Ht=R(null),Yt=R(null),te=R(null);function tn(e,n){switch(mt(Yt,n),mt(Ht,e),mt(Et,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Gm(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Gm(n),e=qm(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}st(Et),mt(Et,e)}function Tt(){st(Et),st(Ht),st(Yt)}function un(e){e.memoizedState!==null&&mt(te,e);var n=Et.current,a=qm(n,e.type);n!==a&&(mt(Ht,e),mt(Et,a))}function ei(e){Ht.current===e&&(st(Et),st(Ht)),te.current===e&&(st(te),Nl._currentValue=_t)}var he,Ki;function ni(e){if(he===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);he=n&&n[1]||"",Ki=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+he+e+Ki}var xr=!1;function Fo(e,n){if(!e||xr)return"";xr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var ut=function(){throw Error()};if(Object.defineProperty(ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ut,[])}catch(rt){var J=rt}Reflect.construct(e,[],ut)}else{try{ut.call()}catch(rt){J=rt}e.call(ut.prototype)}}else{try{throw Error()}catch(rt){J=rt}(ut=e())&&typeof ut.catch=="function"&&ut.catch(function(){})}}catch(rt){if(rt&&J&&typeof rt.stack=="string")return[rt.stack,J.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=o.DetermineComponentFrameRoot(),S=p[0],O=p[1];if(S&&O){var k=S.split(`
`),Z=O.split(`
`);for(h=o=0;o<k.length&&!k[o].includes("DetermineComponentFrameRoot");)o++;for(;h<Z.length&&!Z[h].includes("DetermineComponentFrameRoot");)h++;if(o===k.length||h===Z.length)for(o=k.length-1,h=Z.length-1;1<=o&&0<=h&&k[o]!==Z[h];)h--;for(;1<=o&&0<=h;o--,h--)if(k[o]!==Z[h]){if(o!==1||h!==1)do if(o--,h--,0>h||k[o]!==Z[h]){var ot=`
`+k[o].replace(" at new "," at ");return e.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",e.displayName)),ot}while(1<=o&&0<=h);break}}}finally{xr=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?ni(a):""}function Sh(e,n){switch(e.tag){case 26:case 27:case 5:return ni(e.type);case 16:return ni("Lazy");case 13:return e.child!==n&&n!==null?ni("Suspense Fallback"):ni("Suspense");case 19:return ni("SuspenseList");case 0:case 15:return Fo(e.type,!1);case 11:return Fo(e.type.render,!1);case 1:return Fo(e.type,!0);case 31:return ni("Activity");default:return""}}function ac(e){try{var n="",a=null;do n+=Sh(e,a),a=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Uo=Object.prototype.hasOwnProperty,Ba=f.unstable_scheduleCallback,Rn=f.unstable_cancelCallback,sc=f.unstable_shouldYield,La=f.unstable_requestPaint,_n=f.unstable_now,Na=f.unstable_getCurrentPriorityLevel,Br=f.unstable_ImmediatePriority,Lr=f.unstable_UserBlockingPriority,Wi=f.unstable_NormalPriority,Fa=f.unstable_LowPriority,Ds=f.unstable_IdlePriority,Es=f.log,ri=f.unstable_setDisableYieldValue,Nr=null,hn=null;function fn(e){if(typeof Es=="function"&&ri(e),hn&&typeof hn.setStrictMode=="function")try{hn.setStrictMode(Nr,e)}catch{}}var Mt=Math.clz32?Math.clz32:Ms,Ua=Math.log,ii=Math.LN2;function Ms(e){return e>>>=0,e===0?32:31-(Ua(e)/ii|0)|0}var Dt=256,Qi=262144,Ha=4194304;function _r(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ya(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,p=e.suspendedLanes,S=e.pingedLanes;e=e.warmLanes;var O=o&134217727;return O!==0?(o=O&~p,o!==0?h=_r(o):(S&=O,S!==0?h=_r(S):a||(a=O&~e,a!==0&&(h=_r(a))))):(O=o&~p,O!==0?h=_r(O):S!==0?h=_r(S):a||(a=o&~e,a!==0&&(h=_r(a)))),h===0?0:n!==0&&n!==h&&(n&p)===0&&(p=h&-h,a=n&-n,p>=a||p===32&&(a&4194048)!==0)?n:h}function ai(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Ch(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oc(){var e=Ha;return Ha<<=1,(Ha&62914560)===0&&(Ha=4194304),e}function Fr(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function rr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ho(e,n,a,o,h,p){var S=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var O=e.entanglements,k=e.expirationTimes,Z=e.hiddenUpdates;for(a=S&~a;0<a;){var ot=31-Mt(a),ut=1<<ot;O[ot]=0,k[ot]=-1;var J=Z[ot];if(J!==null)for(Z[ot]=null,ot=0;ot<J.length;ot++){var rt=J[ot];rt!==null&&(rt.lane&=-536870913)}a&=~ut}o!==0&&Xa(e,o,0),p!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=p&~(S&~n))}function Xa(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Mt(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function Te(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-Mt(a),h=1<<o;h&n|e[o]&n&&(e[o]|=n),a&=~h}}function Ue(e,n){var a=n&-n;return a=(a&42)!==0?1:Yo(a),(a&(e.suspendedLanes|n))!==0?0:a}function Yo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Zi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Va(){var e=gt.p;return e!==0?e:(e=window.event,e===void 0?32:g0(e.type))}function Ga(e,n){var a=gt.p;try{return gt.p=e,n()}finally{gt.p=a}}var Ur=Math.random().toString(36).slice(2),De="__reactFiber$"+Ur,He="__reactProps$"+Ur,Dn="__reactContainer$"+Ur,Ii="__reactEvents$"+Ur,wh="__reactListeners$"+Ur,Hr="__reactHandles$"+Ur,Xo="__reactResources$"+Ur,Kn="__reactMarker$"+Ur;function js(e){delete e[De],delete e[He],delete e[Ii],delete e[wh],delete e[Hr]}function Yr(e){var n=e[De];if(n)return n;for(var a=e.parentNode;a;){if(n=a[Dn]||a[De]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=Jm(e);e!==null;){if(a=e[De])return a;e=Jm(e)}return n}e=a,a=e.parentNode}return null}function _e(e){if(e=e[De]||e[Dn]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Wn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(i(33))}function Sn(e){var n=e[Xo];return n||(n=e[Xo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ye(e){e[Kn]=!0}var si=new Set,qa={};function Sr(e,n){Xr(e,n),Xr(e+"Capture",n)}function Xr(e,n){for(qa[e]=n,e=0;e<n.length;e++)si.add(n[e])}var oi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vo={},Pa={};function lc(e){return Uo.call(Pa,e)?!0:Uo.call(Vo,e)?!1:oi.test(e)?Pa[e]=!0:(Vo[e]=!0,!1)}function ee(e,n,a){if(lc(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function Ka(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function ir(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}function dn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ji(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function cc(e,n,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(S){a=""+S,p.call(this,S)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function As(e){if(!e._valueTracker){var n=Ji(e)?"checked":"value";e._valueTracker=cc(e,n,""+e[n])}}function Go(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=Ji(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function ge(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Wa=/[\n"\\]/g;function an(e){return e.replace(Wa,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Vr(e,n,a,o,h,p,S,O){e.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.type=S:e.removeAttribute("type"),n!=null?S==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+dn(n)):e.value!==""+dn(n)&&(e.value=""+dn(n)):S!=="submit"&&S!=="reset"||e.removeAttribute("value"),n!=null?Qa(e,S,dn(n)):a!=null?Qa(e,S,dn(a)):o!=null&&e.removeAttribute("value"),h==null&&p!=null&&(e.defaultChecked=!!p),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?e.name=""+dn(O):e.removeAttribute("name")}function ks(e,n,a,o,h,p,S,O){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.type=p),n!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||n!=null)){As(e);return}a=a!=null?""+dn(a):"",n=n!=null?""+dn(n):a,O||n===e.value||(e.value=n),e.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=O?e.checked:!!o,e.defaultChecked=!!o,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(e.name=S),As(e)}function Qa(e,n,a){n==="number"&&ge(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Cr(e,n,a,o){if(e=e.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=n.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+dn(a),n=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function qo(e,n,a){if(n!=null&&(n=""+dn(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+dn(a):""}function Za(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(i(92));if(re(o)){if(1<o.length)throw Error(i(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=dn(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),As(e)}function li(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var Th=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function le(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||Th.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function Po(e,n,a){if(n!=null&&typeof n!="object")throw Error(i(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&a[h]!==o&&le(e,h,o)}else for(var p in n)n.hasOwnProperty(p)&&le(e,p,n[p])}function Ko(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),En=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wr(e){return En.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Bn(){}var ar=null;function zs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ci=null,Me=null;function Qn(e){var n=_e(e);if(n&&(e=n.stateNode)){var a=e[He]||null;t:switch(e=n.stateNode,n.type){case"input":if(Vr(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+an(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var h=o[He]||null;if(!h)throw Error(i(90));Vr(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&Go(o)}break t;case"textarea":qo(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Cr(e,!!a.multiple,n,!1)}}}var ui=!1;function $i(e,n,a){if(ui)return e(n,a);ui=!0;try{var o=e(n);return o}finally{if(ui=!1,(ci!==null||Me!==null)&&(Jc(),ci&&(n=ci,e=Me,Me=ci=null,Qn(n),e)))for(n=0;n<e.length;n++)Qn(e[n])}}function hi(e,n){var a=e.stateNode;if(a===null)return null;var o=a[He]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,n,typeof a));return a}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wo=!1;if(sn)try{var Cn={};Object.defineProperty(Cn,"passive",{get:function(){Wo=!0}}),window.addEventListener("test",Cn,Cn),window.removeEventListener("test",Cn,Cn)}catch{Wo=!1}var sr=null,Rs=null,ta=null;function ea(){if(ta)return ta;var e,n=Rs,a=n.length,o,h="value"in sr?sr.value:sr.textContent,p=h.length;for(e=0;e<a&&n[e]===h[e];e++);var S=a-e;for(o=1;o<=S&&n[a-o]===h[p-o];o++);return ta=h.slice(e,1<o?1-o:void 0)}function na(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ia(){return!0}function uc(){return!1}function Pe(e){function n(a,o,h,p,S){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=p,this.target=S,this.currentTarget=null;for(var O in e)e.hasOwnProperty(O)&&(a=e[O],this[O]=a?a(p):p[O]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ia:uc,this.isPropagationStopped=uc,this}return _(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ia)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ia)},persist:function(){},isPersistent:Ia}),n}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bs=Pe(fi),Gr=_({},fi,{view:0,detail:0}),Ls=Pe(Gr),Ja,Qo,$a,Ns=_({},Gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:di,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$a&&($a&&e.type==="mousemove"?(Ja=e.screenX-$a.screenX,Qo=e.screenY-$a.screenY):Qo=Ja=0,$a=e),Ja)},movementY:function(e){return"movementY"in e?e.movementY:Qo}}),Fs=Pe(Ns),Zo=_({},Ns,{dataTransfer:0}),hc=Pe(Zo),Us=_({},Gr,{relatedTarget:0}),ra=Pe(Us),Hs=_({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),fc=Pe(Hs),Dh=_({},fi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ia=Pe(Dh),Io=_({},fi,{data:0}),Ys=Pe(Io),Jo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},on={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ts(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=on[e])?!!n[e]:!1}function di(){return ts}var dc=_({},Gr,{key:function(e){if(e.key){var n=Jo[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=na(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$o[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:di,charCode:function(e){return e.type==="keypress"?na(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?na(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Xs=Pe(dc),gc=_({},Ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tl=Pe(gc),Vs=_({},Gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:di}),el=Pe(Vs),gi=_({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),nl=Pe(gi),rl=_({},Ns,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Gs=Pe(rl),il=_({},fi,{newState:0,oldState:0}),pc=Pe(il),Eh=[9,13,27,32],es=sn&&"CompositionEvent"in window,qr=null;sn&&"documentMode"in document&&(qr=document.documentMode);var Mh=sn&&"TextEvent"in window&&!qr,qs=sn&&(!es||qr&&8<qr&&11>=qr),Ps=" ",mc=!1;function al(e,n){switch(e){case"keyup":return Eh.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pi=!1;function vc(e,n){switch(e){case"compositionend":return yc(n);case"keypress":return n.which!==32?null:(mc=!0,Ps);case"textInput":return e=n.data,e===Ps&&mc?null:e;default:return null}}function jh(e,n){if(pi)return e==="compositionend"||!es&&al(e,n)?(e=ea(),ta=Rs=sr=null,pi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return qs&&n.locale!=="ko"?null:n.data;default:return null}}var bc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ks(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!bc[e.type]:n==="textarea"}function sl(e,n,a,o){ci?Me?Me.push(o):Me=[o]:ci=o,n=au(n,"onChange"),0<n.length&&(a=new Bs("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var aa=null,ns=null;function Ah(e){Fm(e,0)}function Ws(e){var n=Wn(e);if(Go(n))return e}function rs(e,n){if(e==="change")return n}var or=!1;if(sn){var je;if(sn){var sa="oninput"in document;if(!sa){var Mn=document.createElement("div");Mn.setAttribute("oninput","return;"),sa=typeof Mn.oninput=="function"}je=sa}else je=!1;or=je&&(!document.documentMode||9<document.documentMode)}function xc(){aa&&(aa.detachEvent("onpropertychange",Qs),ns=aa=null)}function Qs(e){if(e.propertyName==="value"&&Ws(ns)){var n=[];sl(n,ns,e,zs(e)),$i(Ah,n)}}function _c(e,n,a){e==="focusin"?(xc(),aa=n,ns=a,aa.attachEvent("onpropertychange",Qs)):e==="focusout"&&xc()}function mi(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ws(ns)}function ol(e,n){if(e==="click")return Ws(n)}function oa(e,n){if(e==="input"||e==="change")return Ws(n)}function Pr(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var wn=typeof Object.is=="function"?Object.is:Pr;function u(e,n){if(wn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Uo.call(n,h)||!wn(e[h],n[h]))return!1}return!0}function g(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function v(e,n){var a=g(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=g(a)}}function x(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?x(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function C(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ge(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=ge(e.document)}return n}function w(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var E=sn&&"documentMode"in document&&11>=document.documentMode,j=null,L=null,N=null,G=!1;function z(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;G||j==null||j!==ge(o)||(o=j,"selectionStart"in o&&w(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),N&&u(N,o)||(N=o,o=au(L,"onSelect"),0<o.length&&(n=new Bs("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=j)))}function P(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var F={animationend:P("Animation","AnimationEnd"),animationiteration:P("Animation","AnimationIteration"),animationstart:P("Animation","AnimationStart"),transitionrun:P("Transition","TransitionRun"),transitionstart:P("Transition","TransitionStart"),transitioncancel:P("Transition","TransitionCancel"),transitionend:P("Transition","TransitionEnd")},X={},V={};sn&&(V=document.createElement("div").style,"AnimationEvent"in window||(delete F.animationend.animation,delete F.animationiteration.animation,delete F.animationstart.animation),"TransitionEvent"in window||delete F.transitionend.transition);function q(e){if(X[e])return X[e];if(!F[e])return e;var n=F[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in V)return X[e]=n[a];return e}var W=q("animationend"),I=q("animationiteration"),it=q("animationstart"),ct=q("transitionrun"),xt=q("transitionstart"),wt=q("transitioncancel"),yt=q("transitionend"),St=new Map,Ct="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ct.push("scrollEnd");function vt(e,n){St.set(e,n),Sr(n,[e])}var jt=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Nt=[],qt=0,Zt=0;function ln(){for(var e=qt,n=Zt=qt=0;n<e;){var a=Nt[n];Nt[n++]=null;var o=Nt[n];Nt[n++]=null;var h=Nt[n];Nt[n++]=null;var p=Nt[n];if(Nt[n++]=null,o!==null&&h!==null){var S=o.pending;S===null?h.next=h:(h.next=S.next,S.next=h),o.pending=h}p!==0&&is(a,h,p)}}function Gt(e,n,a,o){Nt[qt++]=e,Nt[qt++]=n,Nt[qt++]=a,Nt[qt++]=o,Zt|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Ke(e,n,a,o){return Gt(e,n,a,o),We(e)}function Re(e,n){return Gt(e,null,null,n),We(e)}function is(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,p=e.return;p!==null;)p.childLanes|=a,o=p.alternate,o!==null&&(o.childLanes|=a),p.tag===22&&(e=p.stateNode,e===null||e._visibility&1||(h=!0)),e=p,p=p.return;return e.tag===3?(p=e.stateNode,h&&n!==null&&(h=31-Mt(a),e=p.hiddenUpdates,o=e[h],o===null?e[h]=[n]:o.push(n),n.lane=a|536870912),p):null}function We(e){if(50<jl)throw jl=0,Yf=null,Error(i(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ln={};function ll(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(e,n,a,o){return new ll(e,n,a,o)}function kh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yi(e,n){var a=e.alternate;return a===null?(a=Zn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function xg(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Sc(e,n,a,o,h,p){var S=0;if(o=e,typeof e=="function")kh(e)&&(S=1);else if(typeof e=="string")S=Lb(e,a,Et.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Rt:return e=Zn(31,a,n,h),e.elementType=Rt,e.lanes=p,e;case B:return as(a.children,h,p,n);case $:S=8,h|=24;break;case nt:return e=Zn(12,a,n,h|2),e.elementType=nt,e.lanes=p,e;case at:return e=Zn(13,a,n,h),e.elementType=at,e.lanes=p,e;case ft:return e=Zn(19,a,n,h),e.elementType=ft,e.lanes=p,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bt:S=10;break t;case ht:S=9;break t;case pt:S=11;break t;case dt:S=14;break t;case Ot:S=16,o=null;break t}S=29,a=Error(i(130,e===null?"null":typeof e,"")),o=null}return n=Zn(S,a,n,h),n.elementType=e,n.type=o,n.lanes=p,n}function as(e,n,a,o){return e=Zn(7,e,o,n),e.lanes=a,e}function zh(e,n,a){return e=Zn(6,e,null,n),e.lanes=a,e}function _g(e){var n=Zn(18,null,null,0);return n.stateNode=e,n}function Rh(e,n,a){return n=Zn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Sg=new WeakMap;function lr(e,n){if(typeof e=="object"&&e!==null){var a=Sg.get(e);return a!==void 0?a:(n={value:e,source:n,stack:ac(n)},Sg.set(e,n),n)}return{value:e,source:n,stack:ac(n)}}var Zs=[],Is=0,Cc=null,cl=0,cr=[],ur=0,la=null,Kr=1,Wr="";function vi(e,n){Zs[Is++]=cl,Zs[Is++]=Cc,Cc=e,cl=n}function Cg(e,n,a){cr[ur++]=Kr,cr[ur++]=Wr,cr[ur++]=la,la=e;var o=Kr;e=Wr;var h=32-Mt(o)-1;o&=~(1<<h),a+=1;var p=32-Mt(n)+h;if(30<p){var S=h-h%5;p=(o&(1<<S)-1).toString(32),o>>=S,h-=S,Kr=1<<32-Mt(n)+h|a<<h|o,Wr=p+e}else Kr=1<<p|a<<h|o,Wr=e}function Bh(e){e.return!==null&&(vi(e,1),Cg(e,1,0))}function Lh(e){for(;e===Cc;)Cc=Zs[--Is],Zs[Is]=null,cl=Zs[--Is],Zs[Is]=null;for(;e===la;)la=cr[--ur],cr[ur]=null,Wr=cr[--ur],cr[ur]=null,Kr=cr[--ur],cr[ur]=null}function wg(e,n){cr[ur++]=Kr,cr[ur++]=Wr,cr[ur++]=la,Kr=n.id,Wr=n.overflow,la=e}var gn=null,Ae=null,ce=!1,ca=null,hr=!1,Nh=Error(i(519));function ua(e){var n=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ul(lr(n,e)),Nh}function Tg(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[De]=e,n[He]=o,a){case"dialog":ae("cancel",n),ae("close",n);break;case"iframe":case"object":case"embed":ae("load",n);break;case"video":case"audio":for(a=0;a<kl.length;a++)ae(kl[a],n);break;case"source":ae("error",n);break;case"img":case"image":case"link":ae("error",n),ae("load",n);break;case"details":ae("toggle",n);break;case"input":ae("invalid",n),ks(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":ae("invalid",n);break;case"textarea":ae("invalid",n),Za(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||Xm(n.textContent,a)?(o.popover!=null&&(ae("beforetoggle",n),ae("toggle",n)),o.onScroll!=null&&ae("scroll",n),o.onScrollEnd!=null&&ae("scrollend",n),o.onClick!=null&&(n.onclick=Bn),n=!0):n=!1,n||ua(e,!0)}function Og(e){for(gn=e.return;gn;)switch(gn.tag){case 5:case 31:case 13:hr=!1;return;case 27:case 3:hr=!0;return;default:gn=gn.return}}function Js(e){if(e!==gn)return!1;if(!ce)return Og(e),ce=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||nd(e.type,e.memoizedProps)),a=!a),a&&Ae&&ua(e),Og(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Ae=Im(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Ae=Im(e)}else n===27?(n=Ae,wa(e.type)?(e=od,od=null,Ae=e):Ae=n):Ae=gn?dr(e.stateNode.nextSibling):null;return!0}function ss(){Ae=gn=null,ce=!1}function Fh(){var e=ca;return e!==null&&(Hn===null?Hn=e:Hn.push.apply(Hn,e),ca=null),e}function ul(e){ca===null?ca=[e]:ca.push(e)}var Uh=R(null),os=null,bi=null;function ha(e,n,a){mt(Uh,n._currentValue),n._currentValue=a}function xi(e){e._currentValue=Uh.current,st(Uh)}function Hh(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function Yh(e,n,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var p=h.dependencies;if(p!==null){var S=h.child;p=p.firstContext;t:for(;p!==null;){var O=p;p=h;for(var k=0;k<n.length;k++)if(O.context===n[k]){p.lanes|=a,O=p.alternate,O!==null&&(O.lanes|=a),Hh(p.return,a,e),o||(S=null);break t}p=O.next}}else if(h.tag===18){if(S=h.return,S===null)throw Error(i(341));S.lanes|=a,p=S.alternate,p!==null&&(p.lanes|=a),Hh(S,a,e),S=null}else S=h.child;if(S!==null)S.return=h;else for(S=h;S!==null;){if(S===e){S=null;break}if(h=S.sibling,h!==null){h.return=S.return,S=h;break}S=S.return}h=S}}function $s(e,n,a,o){e=null;for(var h=n,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var S=h.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var O=h.type;wn(h.pendingProps.value,S.value)||(e!==null?e.push(O):e=[O])}}else if(h===te.current){if(S=h.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Nl):e=[Nl])}h=h.return}e!==null&&Yh(n,e,a,o),n.flags|=262144}function wc(e){for(e=e.firstContext;e!==null;){if(!wn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ls(e){os=e,bi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function pn(e){return Dg(os,e)}function Tc(e,n){return os===null&&ls(e),Dg(e,n)}function Dg(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},bi===null){if(e===null)throw Error(i(308));bi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else bi=bi.next=n;return a}var kv=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},zv=f.unstable_scheduleCallback,Rv=f.unstable_NormalPriority,Qe={$$typeof:bt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xh(){return{controller:new kv,data:new Map,refCount:0}}function hl(e){e.refCount--,e.refCount===0&&zv(Rv,function(){e.controller.abort()})}var fl=null,Vh=0,to=0,eo=null;function Bv(e,n){if(fl===null){var a=fl=[];Vh=0,to=Kf(),eo={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Vh++,n.then(Eg,Eg),n}function Eg(){if(--Vh===0&&fl!==null){eo!==null&&(eo.status="fulfilled");var e=fl;fl=null,to=0,eo=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Lv(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Mg=tt.S;tt.S=function(e,n){fm=_n(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Bv(e,n),Mg!==null&&Mg(e,n)};var cs=R(null);function Gh(){var e=cs.current;return e!==null?e:Oe.pooledCache}function Oc(e,n){n===null?mt(cs,cs.current):mt(cs,n.pool)}function jg(){var e=Gh();return e===null?null:{parent:Qe._currentValue,pool:e}}var no=Error(i(460)),qh=Error(i(474)),Dc=Error(i(542)),Ec={then:function(){}};function Ag(e){return e=e.status,e==="fulfilled"||e==="rejected"}function kg(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Bn,Bn),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Rg(e),e;default:if(typeof n.status=="string")n.then(Bn,Bn);else{if(e=Oe,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Rg(e),e}throw hs=n,no}}function us(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(hs=a,no):a}}var hs=null;function zg(){if(hs===null)throw Error(i(459));var e=hs;return hs=null,e}function Rg(e){if(e===no||e===Dc)throw Error(i(483))}var ro=null,dl=0;function Mc(e){var n=dl;return dl+=1,ro===null&&(ro=[]),kg(ro,e,n)}function gl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function jc(e,n){throw n.$$typeof===T?Error(i(525)):(e=Object.prototype.toString.call(n),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Bg(e){function n(K,U){if(e){var Q=K.deletions;Q===null?(K.deletions=[U],K.flags|=16):Q.push(U)}}function a(K,U){if(!e)return null;for(;U!==null;)n(K,U),U=U.sibling;return null}function o(K){for(var U=new Map;K!==null;)K.key!==null?U.set(K.key,K):U.set(K.index,K),K=K.sibling;return U}function h(K,U){return K=yi(K,U),K.index=0,K.sibling=null,K}function p(K,U,Q){return K.index=Q,e?(Q=K.alternate,Q!==null?(Q=Q.index,Q<U?(K.flags|=67108866,U):Q):(K.flags|=67108866,U)):(K.flags|=1048576,U)}function S(K){return e&&K.alternate===null&&(K.flags|=67108866),K}function O(K,U,Q,lt){return U===null||U.tag!==6?(U=zh(Q,K.mode,lt),U.return=K,U):(U=h(U,Q),U.return=K,U)}function k(K,U,Q,lt){var Ft=Q.type;return Ft===B?ot(K,U,Q.props.children,lt,Q.key):U!==null&&(U.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===Ot&&us(Ft)===U.type)?(U=h(U,Q.props),gl(U,Q),U.return=K,U):(U=Sc(Q.type,Q.key,Q.props,null,K.mode,lt),gl(U,Q),U.return=K,U)}function Z(K,U,Q,lt){return U===null||U.tag!==4||U.stateNode.containerInfo!==Q.containerInfo||U.stateNode.implementation!==Q.implementation?(U=Rh(Q,K.mode,lt),U.return=K,U):(U=h(U,Q.children||[]),U.return=K,U)}function ot(K,U,Q,lt,Ft){return U===null||U.tag!==7?(U=as(Q,K.mode,lt,Ft),U.return=K,U):(U=h(U,Q),U.return=K,U)}function ut(K,U,Q){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=zh(""+U,K.mode,Q),U.return=K,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case D:return Q=Sc(U.type,U.key,U.props,null,K.mode,Q),gl(Q,U),Q.return=K,Q;case M:return U=Rh(U,K.mode,Q),U.return=K,U;case Ot:return U=us(U),ut(K,U,Q)}if(re(U)||Ut(U))return U=as(U,K.mode,Q,null),U.return=K,U;if(typeof U.then=="function")return ut(K,Mc(U),Q);if(U.$$typeof===bt)return ut(K,Tc(K,U),Q);jc(K,U)}return null}function J(K,U,Q,lt){var Ft=U!==null?U.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Ft!==null?null:O(K,U,""+Q,lt);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case D:return Q.key===Ft?k(K,U,Q,lt):null;case M:return Q.key===Ft?Z(K,U,Q,lt):null;case Ot:return Q=us(Q),J(K,U,Q,lt)}if(re(Q)||Ut(Q))return Ft!==null?null:ot(K,U,Q,lt,null);if(typeof Q.then=="function")return J(K,U,Mc(Q),lt);if(Q.$$typeof===bt)return J(K,U,Tc(K,Q),lt);jc(K,Q)}return null}function rt(K,U,Q,lt,Ft){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return K=K.get(Q)||null,O(U,K,""+lt,Ft);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case D:return K=K.get(lt.key===null?Q:lt.key)||null,k(U,K,lt,Ft);case M:return K=K.get(lt.key===null?Q:lt.key)||null,Z(U,K,lt,Ft);case Ot:return lt=us(lt),rt(K,U,Q,lt,Ft)}if(re(lt)||Ut(lt))return K=K.get(Q)||null,ot(U,K,lt,Ft,null);if(typeof lt.then=="function")return rt(K,U,Q,Mc(lt),Ft);if(lt.$$typeof===bt)return rt(K,U,Q,Tc(U,lt),Ft);jc(U,lt)}return null}function kt(K,U,Q,lt){for(var Ft=null,fe=null,Bt=U,$t=U=0,oe=null;Bt!==null&&$t<Q.length;$t++){Bt.index>$t?(oe=Bt,Bt=null):oe=Bt.sibling;var de=J(K,Bt,Q[$t],lt);if(de===null){Bt===null&&(Bt=oe);break}e&&Bt&&de.alternate===null&&n(K,Bt),U=p(de,U,$t),fe===null?Ft=de:fe.sibling=de,fe=de,Bt=oe}if($t===Q.length)return a(K,Bt),ce&&vi(K,$t),Ft;if(Bt===null){for(;$t<Q.length;$t++)Bt=ut(K,Q[$t],lt),Bt!==null&&(U=p(Bt,U,$t),fe===null?Ft=Bt:fe.sibling=Bt,fe=Bt);return ce&&vi(K,$t),Ft}for(Bt=o(Bt);$t<Q.length;$t++)oe=rt(Bt,K,$t,Q[$t],lt),oe!==null&&(e&&oe.alternate!==null&&Bt.delete(oe.key===null?$t:oe.key),U=p(oe,U,$t),fe===null?Ft=oe:fe.sibling=oe,fe=oe);return e&&Bt.forEach(function(Ma){return n(K,Ma)}),ce&&vi(K,$t),Ft}function Xt(K,U,Q,lt){if(Q==null)throw Error(i(151));for(var Ft=null,fe=null,Bt=U,$t=U=0,oe=null,de=Q.next();Bt!==null&&!de.done;$t++,de=Q.next()){Bt.index>$t?(oe=Bt,Bt=null):oe=Bt.sibling;var Ma=J(K,Bt,de.value,lt);if(Ma===null){Bt===null&&(Bt=oe);break}e&&Bt&&Ma.alternate===null&&n(K,Bt),U=p(Ma,U,$t),fe===null?Ft=Ma:fe.sibling=Ma,fe=Ma,Bt=oe}if(de.done)return a(K,Bt),ce&&vi(K,$t),Ft;if(Bt===null){for(;!de.done;$t++,de=Q.next())de=ut(K,de.value,lt),de!==null&&(U=p(de,U,$t),fe===null?Ft=de:fe.sibling=de,fe=de);return ce&&vi(K,$t),Ft}for(Bt=o(Bt);!de.done;$t++,de=Q.next())de=rt(Bt,K,$t,de.value,lt),de!==null&&(e&&de.alternate!==null&&Bt.delete(de.key===null?$t:de.key),U=p(de,U,$t),fe===null?Ft=de:fe.sibling=de,fe=de);return e&&Bt.forEach(function(Kb){return n(K,Kb)}),ce&&vi(K,$t),Ft}function we(K,U,Q,lt){if(typeof Q=="object"&&Q!==null&&Q.type===B&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case D:t:{for(var Ft=Q.key;U!==null;){if(U.key===Ft){if(Ft=Q.type,Ft===B){if(U.tag===7){a(K,U.sibling),lt=h(U,Q.props.children),lt.return=K,K=lt;break t}}else if(U.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===Ot&&us(Ft)===U.type){a(K,U.sibling),lt=h(U,Q.props),gl(lt,Q),lt.return=K,K=lt;break t}a(K,U);break}else n(K,U);U=U.sibling}Q.type===B?(lt=as(Q.props.children,K.mode,lt,Q.key),lt.return=K,K=lt):(lt=Sc(Q.type,Q.key,Q.props,null,K.mode,lt),gl(lt,Q),lt.return=K,K=lt)}return S(K);case M:t:{for(Ft=Q.key;U!==null;){if(U.key===Ft)if(U.tag===4&&U.stateNode.containerInfo===Q.containerInfo&&U.stateNode.implementation===Q.implementation){a(K,U.sibling),lt=h(U,Q.children||[]),lt.return=K,K=lt;break t}else{a(K,U);break}else n(K,U);U=U.sibling}lt=Rh(Q,K.mode,lt),lt.return=K,K=lt}return S(K);case Ot:return Q=us(Q),we(K,U,Q,lt)}if(re(Q))return kt(K,U,Q,lt);if(Ut(Q)){if(Ft=Ut(Q),typeof Ft!="function")throw Error(i(150));return Q=Ft.call(Q),Xt(K,U,Q,lt)}if(typeof Q.then=="function")return we(K,U,Mc(Q),lt);if(Q.$$typeof===bt)return we(K,U,Tc(K,Q),lt);jc(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,U!==null&&U.tag===6?(a(K,U.sibling),lt=h(U,Q),lt.return=K,K=lt):(a(K,U),lt=zh(Q,K.mode,lt),lt.return=K,K=lt),S(K)):a(K,U)}return function(K,U,Q,lt){try{dl=0;var Ft=we(K,U,Q,lt);return ro=null,Ft}catch(Bt){if(Bt===no||Bt===Dc)throw Bt;var fe=Zn(29,Bt,null,K.mode);return fe.lanes=lt,fe.return=K,fe}}}var fs=Bg(!0),Lg=Bg(!1),fa=!1;function Ph(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kh(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function da(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ga(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(pe&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=We(e),is(e,null,a),n}return Gt(e,o,n,a),We(e)}function pl(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Te(e,a)}}function Wh(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?h=p=S:p=p.next=S,a=a.next}while(a!==null);p===null?h=p=n:p=p.next=n}else h=p=n;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Qh=!1;function ml(){if(Qh){var e=eo;if(e!==null)throw e}}function yl(e,n,a,o){Qh=!1;var h=e.updateQueue;fa=!1;var p=h.firstBaseUpdate,S=h.lastBaseUpdate,O=h.shared.pending;if(O!==null){h.shared.pending=null;var k=O,Z=k.next;k.next=null,S===null?p=Z:S.next=Z,S=k;var ot=e.alternate;ot!==null&&(ot=ot.updateQueue,O=ot.lastBaseUpdate,O!==S&&(O===null?ot.firstBaseUpdate=Z:O.next=Z,ot.lastBaseUpdate=k))}if(p!==null){var ut=h.baseState;S=0,ot=Z=k=null,O=p;do{var J=O.lane&-536870913,rt=J!==O.lane;if(rt?(se&J)===J:(o&J)===J){J!==0&&J===to&&(Qh=!0),ot!==null&&(ot=ot.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});t:{var kt=e,Xt=O;J=n;var we=a;switch(Xt.tag){case 1:if(kt=Xt.payload,typeof kt=="function"){ut=kt.call(we,ut,J);break t}ut=kt;break t;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=Xt.payload,J=typeof kt=="function"?kt.call(we,ut,J):kt,J==null)break t;ut=_({},ut,J);break t;case 2:fa=!0}}J=O.callback,J!==null&&(e.flags|=64,rt&&(e.flags|=8192),rt=h.callbacks,rt===null?h.callbacks=[J]:rt.push(J))}else rt={lane:J,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ot===null?(Z=ot=rt,k=ut):ot=ot.next=rt,S|=J;if(O=O.next,O===null){if(O=h.shared.pending,O===null)break;rt=O,O=rt.next,rt.next=null,h.lastBaseUpdate=rt,h.shared.pending=null}}while(!0);ot===null&&(k=ut),h.baseState=k,h.firstBaseUpdate=Z,h.lastBaseUpdate=ot,p===null&&(h.shared.lanes=0),ba|=S,e.lanes=S,e.memoizedState=ut}}function Ng(e,n){if(typeof e!="function")throw Error(i(191,e));e.call(n)}function Fg(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Ng(a[e],n)}var io=R(null),Ac=R(0);function Ug(e,n){e=Mi,mt(Ac,e),mt(io,n),Mi=e|n.baseLanes}function Zh(){mt(Ac,Mi),mt(io,io.current)}function Ih(){Mi=Ac.current,st(io),st(Ac)}var In=R(null),fr=null;function pa(e){var n=e.alternate;mt(Xe,Xe.current&1),mt(In,e),fr===null&&(n===null||io.current!==null||n.memoizedState!==null)&&(fr=e)}function Jh(e){mt(Xe,Xe.current),mt(In,e),fr===null&&(fr=e)}function Hg(e){e.tag===22?(mt(Xe,Xe.current),mt(In,e),fr===null&&(fr=e)):ma()}function ma(){mt(Xe,Xe.current),mt(In,In.current)}function Jn(e){st(In),fr===e&&(fr=null),st(Xe)}var Xe=R(0);function kc(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ad(a)||sd(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var _i=0,It=null,Se=null,Ze=null,zc=!1,ao=!1,ds=!1,Rc=0,vl=0,so=null,Nv=0;function Ne(){throw Error(i(321))}function $h(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!wn(e[a],n[a]))return!1;return!0}function tf(e,n,a,o,h,p){return _i=p,It=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,tt.H=e===null||e.memoizedState===null?Cp:mf,ds=!1,p=a(o,h),ds=!1,ao&&(p=Xg(n,a,o,h)),Yg(e),p}function Yg(e){tt.H=_l;var n=Se!==null&&Se.next!==null;if(_i=0,Ze=Se=It=null,zc=!1,vl=0,so=null,n)throw Error(i(300));e===null||Ie||(e=e.dependencies,e!==null&&wc(e)&&(Ie=!0))}function Xg(e,n,a,o){It=e;var h=0;do{if(ao&&(so=null),vl=0,ao=!1,25<=h)throw Error(i(301));if(h+=1,Ze=Se=null,e.updateQueue!=null){var p=e.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}tt.H=wp,p=n(a,o)}while(ao);return p}function Fv(){var e=tt.H,n=e.useState()[0];return n=typeof n.then=="function"?bl(n):n,e=e.useState()[0],(Se!==null?Se.memoizedState:null)!==e&&(It.flags|=1024),n}function ef(){var e=Rc!==0;return Rc=0,e}function nf(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function rf(e){if(zc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}zc=!1}_i=0,Ze=Se=It=null,ao=!1,vl=Rc=0,so=null}function jn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?It.memoizedState=Ze=e:Ze=Ze.next=e,Ze}function Ve(){if(Se===null){var e=It.alternate;e=e!==null?e.memoizedState:null}else e=Se.next;var n=Ze===null?It.memoizedState:Ze.next;if(n!==null)Ze=n,Se=e;else{if(e===null)throw It.alternate===null?Error(i(467)):Error(i(310));Se=e,e={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Ze===null?It.memoizedState=Ze=e:Ze=Ze.next=e}return Ze}function Bc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bl(e){var n=vl;return vl+=1,so===null&&(so=[]),e=kg(so,e,n),n=It,(Ze===null?n.memoizedState:Ze.next)===null&&(n=n.alternate,tt.H=n===null||n.memoizedState===null?Cp:mf),e}function Lc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return bl(e);if(e.$$typeof===bt)return pn(e)}throw Error(i(438,String(e)))}function af(e){var n=null,a=It.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=It.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Bc(),It.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=Vt;return n.index++,a}function Si(e,n){return typeof n=="function"?n(e):n}function Nc(e){var n=Ve();return sf(n,Se,e)}function sf(e,n,a){var o=e.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=a;var h=e.baseQueue,p=o.pending;if(p!==null){if(h!==null){var S=h.next;h.next=p.next,p.next=S}n.baseQueue=h=p,o.pending=null}if(p=e.baseState,h===null)e.memoizedState=p;else{n=h.next;var O=S=null,k=null,Z=n,ot=!1;do{var ut=Z.lane&-536870913;if(ut!==Z.lane?(se&ut)===ut:(_i&ut)===ut){var J=Z.revertLane;if(J===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ut===to&&(ot=!0);else if((_i&J)===J){Z=Z.next,J===to&&(ot=!0);continue}else ut={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},k===null?(O=k=ut,S=p):k=k.next=ut,It.lanes|=J,ba|=J;ut=Z.action,ds&&a(p,ut),p=Z.hasEagerState?Z.eagerState:a(p,ut)}else J={lane:ut,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},k===null?(O=k=J,S=p):k=k.next=J,It.lanes|=ut,ba|=ut;Z=Z.next}while(Z!==null&&Z!==n);if(k===null?S=p:k.next=O,!wn(p,e.memoizedState)&&(Ie=!0,ot&&(a=eo,a!==null)))throw a;e.memoizedState=p,e.baseState=S,e.baseQueue=k,o.lastRenderedState=p}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function of(e){var n=Ve(),a=n.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,p=n.memoizedState;if(h!==null){a.pending=null;var S=h=h.next;do p=e(p,S.action),S=S.next;while(S!==h);wn(p,n.memoizedState)||(Ie=!0),n.memoizedState=p,n.baseQueue===null&&(n.baseState=p),a.lastRenderedState=p}return[p,o]}function Vg(e,n,a){var o=It,h=Ve(),p=ce;if(p){if(a===void 0)throw Error(i(407));a=a()}else a=n();var S=!wn((Se||h).memoizedState,a);if(S&&(h.memoizedState=a,Ie=!0),h=h.queue,uf(Pg.bind(null,o,h,e),[e]),h.getSnapshot!==n||S||Ze!==null&&Ze.memoizedState.tag&1){if(o.flags|=2048,oo(9,{destroy:void 0},qg.bind(null,o,h,a,n),null),Oe===null)throw Error(i(349));p||(_i&127)!==0||Gg(o,n,a)}return a}function Gg(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=It.updateQueue,n===null?(n=Bc(),It.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function qg(e,n,a,o){n.value=a,n.getSnapshot=o,Kg(n)&&Wg(e)}function Pg(e,n,a){return a(function(){Kg(n)&&Wg(e)})}function Kg(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!wn(e,a)}catch{return!0}}function Wg(e){var n=Re(e,2);n!==null&&Yn(n,e,2)}function lf(e){var n=jn();if(typeof e=="function"){var a=e;if(e=a(),ds){fn(!0);try{a()}finally{fn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:e},n}function Qg(e,n,a,o){return e.baseState=a,sf(e,Se,typeof o=="function"?o:Si)}function Uv(e,n,a,o,h){if(Hc(e))throw Error(i(485));if(e=n.action,e!==null){var p={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){p.listeners.push(S)}};tt.T!==null?a(!0):p.isTransition=!1,o(p),a=n.pending,a===null?(p.next=n.pending=p,Zg(n,p)):(p.next=a.next,n.pending=a.next=p)}}function Zg(e,n){var a=n.action,o=n.payload,h=e.state;if(n.isTransition){var p=tt.T,S={};tt.T=S;try{var O=a(h,o),k=tt.S;k!==null&&k(S,O),Ig(e,n,O)}catch(Z){cf(e,n,Z)}finally{p!==null&&S.types!==null&&(p.types=S.types),tt.T=p}}else try{p=a(h,o),Ig(e,n,p)}catch(Z){cf(e,n,Z)}}function Ig(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Jg(e,n,o)},function(o){return cf(e,n,o)}):Jg(e,n,a)}function Jg(e,n,a){n.status="fulfilled",n.value=a,$g(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Zg(e,a)))}function cf(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,$g(n),n=n.next;while(n!==o)}e.action=null}function $g(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function tp(e,n){return n}function ep(e,n){if(ce){var a=Oe.formState;if(a!==null){t:{var o=It;if(ce){if(Ae){e:{for(var h=Ae,p=hr;h.nodeType!==8;){if(!p){h=null;break e}if(h=dr(h.nextSibling),h===null){h=null;break e}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){Ae=dr(h.nextSibling),o=h.data==="F!";break t}}ua(o)}o=!1}o&&(n=a[0])}}return a=jn(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tp,lastRenderedState:n},a.queue=o,a=xp.bind(null,It,o),o.dispatch=a,o=lf(!1),p=pf.bind(null,It,!1,o.queue),o=jn(),h={state:n,dispatch:null,action:e,pending:null},o.queue=h,a=Uv.bind(null,It,h,p,a),h.dispatch=a,o.memoizedState=e,[n,a,!1]}function np(e){var n=Ve();return rp(n,Se,e)}function rp(e,n,a){if(n=sf(e,n,tp)[0],e=Nc(Si)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=bl(n)}catch(S){throw S===no?Dc:S}else o=n;n=Ve();var h=n.queue,p=h.dispatch;return a!==n.memoizedState&&(It.flags|=2048,oo(9,{destroy:void 0},Hv.bind(null,h,a),null)),[o,p,e]}function Hv(e,n){e.action=n}function ip(e){var n=Ve(),a=Se;if(a!==null)return rp(n,a,e);Ve(),n=n.memoizedState,a=Ve();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function oo(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=It.updateQueue,n===null&&(n=Bc(),It.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function ap(){return Ve().memoizedState}function Fc(e,n,a,o){var h=jn();It.flags|=e,h.memoizedState=oo(1|n,{destroy:void 0},a,o===void 0?null:o)}function Uc(e,n,a,o){var h=Ve();o=o===void 0?null:o;var p=h.memoizedState.inst;Se!==null&&o!==null&&$h(o,Se.memoizedState.deps)?h.memoizedState=oo(n,p,a,o):(It.flags|=e,h.memoizedState=oo(1|n,p,a,o))}function sp(e,n){Fc(8390656,8,e,n)}function uf(e,n){Uc(2048,8,e,n)}function Yv(e){It.flags|=4;var n=It.updateQueue;if(n===null)n=Bc(),It.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function op(e){var n=Ve().memoizedState;return Yv({ref:n,nextImpl:e}),function(){if((pe&2)!==0)throw Error(i(440));return n.impl.apply(void 0,arguments)}}function lp(e,n){return Uc(4,2,e,n)}function cp(e,n){return Uc(4,4,e,n)}function up(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function hp(e,n,a){a=a!=null?a.concat([e]):null,Uc(4,4,up.bind(null,n,e),a)}function hf(){}function fp(e,n){var a=Ve();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&$h(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function dp(e,n){var a=Ve();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&$h(n,o[1]))return o[0];if(o=e(),ds){fn(!0);try{e()}finally{fn(!1)}}return a.memoizedState=[o,n],o}function ff(e,n,a){return a===void 0||(_i&1073741824)!==0&&(se&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=gm(),It.lanes|=e,ba|=e,a)}function gp(e,n,a,o){return wn(a,n)?a:io.current!==null?(e=ff(e,a,o),wn(e,n)||(Ie=!0),e):(_i&42)===0||(_i&1073741824)!==0&&(se&261930)===0?(Ie=!0,e.memoizedState=a):(e=gm(),It.lanes|=e,ba|=e,n)}function pp(e,n,a,o,h){var p=gt.p;gt.p=p!==0&&8>p?p:8;var S=tt.T,O={};tt.T=O,pf(e,!1,n,a);try{var k=h(),Z=tt.S;if(Z!==null&&Z(O,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ot=Lv(k,o);xl(e,n,ot,er(e))}else xl(e,n,o,er(e))}catch(ut){xl(e,n,{then:function(){},status:"rejected",reason:ut},er())}finally{gt.p=p,S!==null&&O.types!==null&&(S.types=O.types),tt.T=S}}function Xv(){}function df(e,n,a,o){if(e.tag!==5)throw Error(i(476));var h=mp(e).queue;pp(e,h,n,_t,a===null?Xv:function(){return yp(e),a(o)})}function mp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:_t,baseState:_t,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:_t},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function yp(e){var n=mp(e);n.next===null&&(n=e.alternate.memoizedState),xl(e,n.next.queue,{},er())}function gf(){return pn(Nl)}function vp(){return Ve().memoizedState}function bp(){return Ve().memoizedState}function Vv(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=er();e=da(a);var o=ga(n,e,a);o!==null&&(Yn(o,n,a),pl(o,n,a)),n={cache:Xh()},e.payload=n;return}n=n.return}}function Gv(e,n,a){var o=er();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Hc(e)?_p(n,a):(a=Ke(e,n,a,o),a!==null&&(Yn(a,e,o),Sp(a,n,o)))}function xp(e,n,a){var o=er();xl(e,n,a,o)}function xl(e,n,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Hc(e))_p(n,h);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=n.lastRenderedReducer,p!==null))try{var S=n.lastRenderedState,O=p(S,a);if(h.hasEagerState=!0,h.eagerState=O,wn(O,S))return Gt(e,n,h,0),Oe===null&&ln(),!1}catch{}if(a=Ke(e,n,h,o),a!==null)return Yn(a,e,o),Sp(a,n,o),!0}return!1}function pf(e,n,a,o){if(o={lane:2,revertLane:Kf(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Hc(e)){if(n)throw Error(i(479))}else n=Ke(e,a,o,2),n!==null&&Yn(n,e,2)}function Hc(e){var n=e.alternate;return e===It||n!==null&&n===It}function _p(e,n){ao=zc=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Sp(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Te(e,a)}}var _l={readContext:pn,use:Lc,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useLayoutEffect:Ne,useInsertionEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useSyncExternalStore:Ne,useId:Ne,useHostTransitionStatus:Ne,useFormState:Ne,useActionState:Ne,useOptimistic:Ne,useMemoCache:Ne,useCacheRefresh:Ne};_l.useEffectEvent=Ne;var Cp={readContext:pn,use:Lc,useCallback:function(e,n){return jn().memoizedState=[e,n===void 0?null:n],e},useContext:pn,useEffect:sp,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,Fc(4194308,4,up.bind(null,n,e),a)},useLayoutEffect:function(e,n){return Fc(4194308,4,e,n)},useInsertionEffect:function(e,n){Fc(4,2,e,n)},useMemo:function(e,n){var a=jn();n=n===void 0?null:n;var o=e();if(ds){fn(!0);try{e()}finally{fn(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=jn();if(a!==void 0){var h=a(n);if(ds){fn(!0);try{a(n)}finally{fn(!1)}}}else h=n;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=Gv.bind(null,It,e),[o.memoizedState,e]},useRef:function(e){var n=jn();return e={current:e},n.memoizedState=e},useState:function(e){e=lf(e);var n=e.queue,a=xp.bind(null,It,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:hf,useDeferredValue:function(e,n){var a=jn();return ff(a,e,n)},useTransition:function(){var e=lf(!1);return e=pp.bind(null,It,e.queue,!0,!1),jn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=It,h=jn();if(ce){if(a===void 0)throw Error(i(407));a=a()}else{if(a=n(),Oe===null)throw Error(i(349));(se&127)!==0||Gg(o,n,a)}h.memoizedState=a;var p={value:a,getSnapshot:n};return h.queue=p,sp(Pg.bind(null,o,p,e),[e]),o.flags|=2048,oo(9,{destroy:void 0},qg.bind(null,o,p,a,n),null),a},useId:function(){var e=jn(),n=Oe.identifierPrefix;if(ce){var a=Wr,o=Kr;a=(o&~(1<<32-Mt(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=Rc++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Nv++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:gf,useFormState:ep,useActionState:ep,useOptimistic:function(e){var n=jn();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=pf.bind(null,It,!0,a),a.dispatch=n,[e,n]},useMemoCache:af,useCacheRefresh:function(){return jn().memoizedState=Vv.bind(null,It)},useEffectEvent:function(e){var n=jn(),a={impl:e};return n.memoizedState=a,function(){if((pe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},mf={readContext:pn,use:Lc,useCallback:fp,useContext:pn,useEffect:uf,useImperativeHandle:hp,useInsertionEffect:lp,useLayoutEffect:cp,useMemo:dp,useReducer:Nc,useRef:ap,useState:function(){return Nc(Si)},useDebugValue:hf,useDeferredValue:function(e,n){var a=Ve();return gp(a,Se.memoizedState,e,n)},useTransition:function(){var e=Nc(Si)[0],n=Ve().memoizedState;return[typeof e=="boolean"?e:bl(e),n]},useSyncExternalStore:Vg,useId:vp,useHostTransitionStatus:gf,useFormState:np,useActionState:np,useOptimistic:function(e,n){var a=Ve();return Qg(a,Se,e,n)},useMemoCache:af,useCacheRefresh:bp};mf.useEffectEvent=op;var wp={readContext:pn,use:Lc,useCallback:fp,useContext:pn,useEffect:uf,useImperativeHandle:hp,useInsertionEffect:lp,useLayoutEffect:cp,useMemo:dp,useReducer:of,useRef:ap,useState:function(){return of(Si)},useDebugValue:hf,useDeferredValue:function(e,n){var a=Ve();return Se===null?ff(a,e,n):gp(a,Se.memoizedState,e,n)},useTransition:function(){var e=of(Si)[0],n=Ve().memoizedState;return[typeof e=="boolean"?e:bl(e),n]},useSyncExternalStore:Vg,useId:vp,useHostTransitionStatus:gf,useFormState:ip,useActionState:ip,useOptimistic:function(e,n){var a=Ve();return Se!==null?Qg(a,Se,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:af,useCacheRefresh:bp};wp.useEffectEvent=op;function yf(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:_({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var vf={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=er(),h=da(o);h.payload=n,a!=null&&(h.callback=a),n=ga(e,h,o),n!==null&&(Yn(n,e,o),pl(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=er(),h=da(o);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=ga(e,h,o),n!==null&&(Yn(n,e,o),pl(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=er(),o=da(a);o.tag=2,n!=null&&(o.callback=n),n=ga(e,o,a),n!==null&&(Yn(n,e,a),pl(n,e,a))}};function Tp(e,n,a,o,h,p,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,p,S):n.prototype&&n.prototype.isPureReactComponent?!u(a,o)||!u(h,p):!0}function Op(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&vf.enqueueReplaceState(n,n.state,null)}function gs(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=_({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}function Dp(e){jt(e)}function Ep(e){console.error(e)}function Mp(e){jt(e)}function Yc(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function jp(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function bf(e,n,a){return a=da(a),a.tag=3,a.payload={element:null},a.callback=function(){Yc(e,n)},a}function Ap(e){return e=da(e),e.tag=3,e}function kp(e,n,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var p=o.value;e.payload=function(){return h(p)},e.callback=function(){jp(n,a,o)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(e.callback=function(){jp(n,a,o),typeof h!="function"&&(xa===null?xa=new Set([this]):xa.add(this));var O=o.stack;this.componentDidCatch(o.value,{componentStack:O!==null?O:""})})}function qv(e,n,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&$s(n,a,h,!0),a=In.current,a!==null){switch(a.tag){case 31:case 13:return fr===null?$c():a.alternate===null&&Fe===0&&(Fe=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Ec?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Gf(e,o,h)),!1;case 22:return a.flags|=65536,o===Ec?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Gf(e,o,h)),!1}throw Error(i(435,a.tag))}return Gf(e,o,h),$c(),!1}if(ce)return n=In.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==Nh&&(e=Error(i(422),{cause:o}),ul(lr(e,a)))):(o!==Nh&&(n=Error(i(423),{cause:o}),ul(lr(n,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=lr(o,a),h=bf(e.stateNode,o,h),Wh(e,h),Fe!==4&&(Fe=2)),!1;var p=Error(i(520),{cause:o});if(p=lr(p,a),Ml===null?Ml=[p]:Ml.push(p),Fe!==4&&(Fe=2),n===null)return!0;o=lr(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=bf(a.stateNode,o,e),Wh(a,e),!1;case 1:if(n=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(xa===null||!xa.has(p))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Ap(h),kp(h,e,a,o),Wh(a,h),!1}a=a.return}while(a!==null);return!1}var xf=Error(i(461)),Ie=!1;function mn(e,n,a,o){n.child=e===null?Lg(n,null,a,o):fs(n,e.child,a,o)}function zp(e,n,a,o,h){a=a.render;var p=n.ref;if("ref"in o){var S={};for(var O in o)O!=="ref"&&(S[O]=o[O])}else S=o;return ls(n),o=tf(e,n,a,S,p,h),O=ef(),e!==null&&!Ie?(nf(e,n,h),Ci(e,n,h)):(ce&&O&&Bh(n),n.flags|=1,mn(e,n,o,h),n.child)}function Rp(e,n,a,o,h){if(e===null){var p=a.type;return typeof p=="function"&&!kh(p)&&p.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=p,Bp(e,n,p,o,h)):(e=Sc(a.type,null,o,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(p=e.child,!Ef(e,h)){var S=p.memoizedProps;if(a=a.compare,a=a!==null?a:u,a(S,o)&&e.ref===n.ref)return Ci(e,n,h)}return n.flags|=1,e=yi(p,o),e.ref=n.ref,e.return=n,n.child=e}function Bp(e,n,a,o,h){if(e!==null){var p=e.memoizedProps;if(u(p,o)&&e.ref===n.ref)if(Ie=!1,n.pendingProps=o=p,Ef(e,h))(e.flags&131072)!==0&&(Ie=!0);else return n.lanes=e.lanes,Ci(e,n,h)}return _f(e,n,a,o,h)}function Lp(e,n,a,o){var h=o.children,p=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(p=p!==null?p.baseLanes|a:a,e!==null){for(o=n.child=e.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~p}else o=0,n.child=null;return Np(e,n,p,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Oc(n,p!==null?p.cachePool:null),p!==null?Ug(n,p):Zh(),Hg(n);else return o=n.lanes=536870912,Np(e,n,p!==null?p.baseLanes|a:a,a,o)}else p!==null?(Oc(n,p.cachePool),Ug(n,p),ma(),n.memoizedState=null):(e!==null&&Oc(n,null),Zh(),ma());return mn(e,n,h,a),n.child}function Sl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Np(e,n,a,o,h){var p=Gh();return p=p===null?null:{parent:Qe._currentValue,pool:p},n.memoizedState={baseLanes:a,cachePool:p},e!==null&&Oc(n,null),Zh(),Hg(n),e!==null&&$s(e,n,o,!0),n.childLanes=h,null}function Xc(e,n){return n=Gc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Fp(e,n,a){return fs(n,e.child,null,a),e=Xc(n,n.pendingProps),e.flags|=2,Jn(n),n.memoizedState=null,e}function Pv(e,n,a){var o=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(ce){if(o.mode==="hidden")return e=Xc(n,o),n.lanes=536870912,Sl(null,e);if(Jh(n),(e=Ae)?(e=Zm(e,hr),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:la!==null?{id:Kr,overflow:Wr}:null,retryLane:536870912,hydrationErrors:null},a=_g(e),a.return=n,n.child=a,gn=n,Ae=null)):e=null,e===null)throw ua(n);return n.lanes=536870912,null}return Xc(n,o)}var p=e.memoizedState;if(p!==null){var S=p.dehydrated;if(Jh(n),h)if(n.flags&256)n.flags&=-257,n=Fp(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(i(558));else if(Ie||$s(e,n,a,!1),h=(a&e.childLanes)!==0,Ie||h){if(o=Oe,o!==null&&(S=Ue(o,a),S!==0&&S!==p.retryLane))throw p.retryLane=S,Re(e,S),Yn(o,e,S),xf;$c(),n=Fp(e,n,a)}else e=p.treeContext,Ae=dr(S.nextSibling),gn=n,ce=!0,ca=null,hr=!1,e!==null&&wg(n,e),n=Xc(n,o),n.flags|=4096;return n}return e=yi(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Vc(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function _f(e,n,a,o,h){return ls(n),a=tf(e,n,a,o,void 0,h),o=ef(),e!==null&&!Ie?(nf(e,n,h),Ci(e,n,h)):(ce&&o&&Bh(n),n.flags|=1,mn(e,n,a,h),n.child)}function Up(e,n,a,o,h,p){return ls(n),n.updateQueue=null,a=Xg(n,o,a,h),Yg(e),o=ef(),e!==null&&!Ie?(nf(e,n,p),Ci(e,n,p)):(ce&&o&&Bh(n),n.flags|=1,mn(e,n,a,p),n.child)}function Hp(e,n,a,o,h){if(ls(n),n.stateNode===null){var p=Ln,S=a.contextType;typeof S=="object"&&S!==null&&(p=pn(S)),p=new a(o,p),n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=vf,n.stateNode=p,p._reactInternals=n,p=n.stateNode,p.props=o,p.state=n.memoizedState,p.refs={},Ph(n),S=a.contextType,p.context=typeof S=="object"&&S!==null?pn(S):Ln,p.state=n.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(yf(n,a,S,o),p.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(S=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),S!==p.state&&vf.enqueueReplaceState(p,p.state,null),yl(n,o,p,h),ml(),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){p=n.stateNode;var O=n.memoizedProps,k=gs(a,O);p.props=k;var Z=p.context,ot=a.contextType;S=Ln,typeof ot=="object"&&ot!==null&&(S=pn(ot));var ut=a.getDerivedStateFromProps;ot=typeof ut=="function"||typeof p.getSnapshotBeforeUpdate=="function",O=n.pendingProps!==O,ot||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(O||Z!==S)&&Op(n,p,o,S),fa=!1;var J=n.memoizedState;p.state=J,yl(n,o,p,h),ml(),Z=n.memoizedState,O||J!==Z||fa?(typeof ut=="function"&&(yf(n,a,ut,o),Z=n.memoizedState),(k=fa||Tp(n,a,k,o,J,Z,S))?(ot||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(n.flags|=4194308)):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=Z),p.props=o,p.state=Z,p.context=S,o=k):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{p=n.stateNode,Kh(e,n),S=n.memoizedProps,ot=gs(a,S),p.props=ot,ut=n.pendingProps,J=p.context,Z=a.contextType,k=Ln,typeof Z=="object"&&Z!==null&&(k=pn(Z)),O=a.getDerivedStateFromProps,(Z=typeof O=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S!==ut||J!==k)&&Op(n,p,o,k),fa=!1,J=n.memoizedState,p.state=J,yl(n,o,p,h),ml();var rt=n.memoizedState;S!==ut||J!==rt||fa||e!==null&&e.dependencies!==null&&wc(e.dependencies)?(typeof O=="function"&&(yf(n,a,O,o),rt=n.memoizedState),(ot=fa||Tp(n,a,ot,o,J,rt,k)||e!==null&&e.dependencies!==null&&wc(e.dependencies))?(Z||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(o,rt,k),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(o,rt,k)),typeof p.componentDidUpdate=="function"&&(n.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof p.componentDidUpdate!="function"||S===e.memoizedProps&&J===e.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&J===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=rt),p.props=o,p.state=rt,p.context=k,o=ot):(typeof p.componentDidUpdate!="function"||S===e.memoizedProps&&J===e.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&J===e.memoizedState||(n.flags|=1024),o=!1)}return p=o,Vc(e,n),o=(n.flags&128)!==0,p||o?(p=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:p.render(),n.flags|=1,e!==null&&o?(n.child=fs(n,e.child,null,h),n.child=fs(n,null,a,h)):mn(e,n,a,h),n.memoizedState=p.state,e=n.child):e=Ci(e,n,h),e}function Yp(e,n,a,o){return ss(),n.flags|=256,mn(e,n,a,o),n.child}var Sf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cf(e){return{baseLanes:e,cachePool:jg()}}function wf(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=tr),e}function Xp(e,n,a){var o=n.pendingProps,h=!1,p=(n.flags&128)!==0,S;if((S=p)||(S=e!==null&&e.memoizedState===null?!1:(Xe.current&2)!==0),S&&(h=!0,n.flags&=-129),S=(n.flags&32)!==0,n.flags&=-33,e===null){if(ce){if(h?pa(n):ma(),(e=Ae)?(e=Zm(e,hr),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:la!==null?{id:Kr,overflow:Wr}:null,retryLane:536870912,hydrationErrors:null},a=_g(e),a.return=n,n.child=a,gn=n,Ae=null)):e=null,e===null)throw ua(n);return sd(e)?n.lanes=32:n.lanes=536870912,null}var O=o.children;return o=o.fallback,h?(ma(),h=n.mode,O=Gc({mode:"hidden",children:O},h),o=as(o,h,a,null),O.return=n,o.return=n,O.sibling=o,n.child=O,o=n.child,o.memoizedState=Cf(a),o.childLanes=wf(e,S,a),n.memoizedState=Sf,Sl(null,o)):(pa(n),Tf(n,O))}var k=e.memoizedState;if(k!==null&&(O=k.dehydrated,O!==null)){if(p)n.flags&256?(pa(n),n.flags&=-257,n=Of(e,n,a)):n.memoizedState!==null?(ma(),n.child=e.child,n.flags|=128,n=null):(ma(),O=o.fallback,h=n.mode,o=Gc({mode:"visible",children:o.children},h),O=as(O,h,a,null),O.flags|=2,o.return=n,O.return=n,o.sibling=O,n.child=o,fs(n,e.child,null,a),o=n.child,o.memoizedState=Cf(a),o.childLanes=wf(e,S,a),n.memoizedState=Sf,n=Sl(null,o));else if(pa(n),sd(O)){if(S=O.nextSibling&&O.nextSibling.dataset,S)var Z=S.dgst;S=Z,o=Error(i(419)),o.stack="",o.digest=S,ul({value:o,source:null,stack:null}),n=Of(e,n,a)}else if(Ie||$s(e,n,a,!1),S=(a&e.childLanes)!==0,Ie||S){if(S=Oe,S!==null&&(o=Ue(S,a),o!==0&&o!==k.retryLane))throw k.retryLane=o,Re(e,o),Yn(S,e,o),xf;ad(O)||$c(),n=Of(e,n,a)}else ad(O)?(n.flags|=192,n.child=e.child,n=null):(e=k.treeContext,Ae=dr(O.nextSibling),gn=n,ce=!0,ca=null,hr=!1,e!==null&&wg(n,e),n=Tf(n,o.children),n.flags|=4096);return n}return h?(ma(),O=o.fallback,h=n.mode,k=e.child,Z=k.sibling,o=yi(k,{mode:"hidden",children:o.children}),o.subtreeFlags=k.subtreeFlags&65011712,Z!==null?O=yi(Z,O):(O=as(O,h,a,null),O.flags|=2),O.return=n,o.return=n,o.sibling=O,n.child=o,Sl(null,o),o=n.child,O=e.child.memoizedState,O===null?O=Cf(a):(h=O.cachePool,h!==null?(k=Qe._currentValue,h=h.parent!==k?{parent:k,pool:k}:h):h=jg(),O={baseLanes:O.baseLanes|a,cachePool:h}),o.memoizedState=O,o.childLanes=wf(e,S,a),n.memoizedState=Sf,Sl(e.child,o)):(pa(n),a=e.child,e=a.sibling,a=yi(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(S=n.deletions,S===null?(n.deletions=[e],n.flags|=16):S.push(e)),n.child=a,n.memoizedState=null,a)}function Tf(e,n){return n=Gc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Gc(e,n){return e=Zn(22,e,null,n),e.lanes=0,e}function Of(e,n,a){return fs(n,e.child,null,a),e=Tf(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Vp(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Hh(e.return,n,a)}function Df(e,n,a,o,h,p){var S=e.memoizedState;S===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:p}:(S.isBackwards=n,S.rendering=null,S.renderingStartTime=0,S.last=o,S.tail=a,S.tailMode=h,S.treeForkCount=p)}function Gp(e,n,a){var o=n.pendingProps,h=o.revealOrder,p=o.tail;o=o.children;var S=Xe.current,O=(S&2)!==0;if(O?(S=S&1|2,n.flags|=128):S&=1,mt(Xe,S),mn(e,n,o,a),o=ce?cl:0,!O&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vp(e,a,n);else if(e.tag===19)Vp(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)e=a.alternate,e!==null&&kc(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),Df(n,!1,h,a,p,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&kc(e)===null){n.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Df(n,!0,a,null,p,o);break;case"together":Df(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Ci(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),ba|=n.lanes,(a&n.childLanes)===0)if(e!==null){if($s(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(i(153));if(n.child!==null){for(e=n.child,a=yi(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=yi(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function Ef(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&wc(e)))}function Kv(e,n,a){switch(n.tag){case 3:tn(n,n.stateNode.containerInfo),ha(n,Qe,e.memoizedState.cache),ss();break;case 27:case 5:un(n);break;case 4:tn(n,n.stateNode.containerInfo);break;case 10:ha(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Jh(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(pa(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Xp(e,n,a):(pa(n),e=Ci(e,n,a),e!==null?e.sibling:null);pa(n);break;case 19:var h=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||($s(e,n,a,!1),o=(a&n.childLanes)!==0),h){if(o)return Gp(e,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),mt(Xe,Xe.current),o)break;return null;case 22:return n.lanes=0,Lp(e,n,a,n.pendingProps);case 24:ha(n,Qe,e.memoizedState.cache)}return Ci(e,n,a)}function qp(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)Ie=!0;else{if(!Ef(e,a)&&(n.flags&128)===0)return Ie=!1,Kv(e,n,a);Ie=(e.flags&131072)!==0}else Ie=!1,ce&&(n.flags&1048576)!==0&&Cg(n,cl,n.index);switch(n.lanes=0,n.tag){case 16:t:{var o=n.pendingProps;if(e=us(n.elementType),n.type=e,typeof e=="function")kh(e)?(o=gs(e,o),n.tag=1,n=Hp(null,n,e,o,a)):(n.tag=0,n=_f(null,n,e,o,a));else{if(e!=null){var h=e.$$typeof;if(h===pt){n.tag=11,n=zp(null,n,e,o,a);break t}else if(h===dt){n.tag=14,n=Rp(null,n,e,o,a);break t}}throw n=Kt(e)||e,Error(i(306,n,""))}}return n;case 0:return _f(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,h=gs(o,n.pendingProps),Hp(e,n,o,h,a);case 3:t:{if(tn(n,n.stateNode.containerInfo),e===null)throw Error(i(387));o=n.pendingProps;var p=n.memoizedState;h=p.element,Kh(e,n),yl(n,o,null,a);var S=n.memoizedState;if(o=S.cache,ha(n,Qe,o),o!==p.cache&&Yh(n,[Qe],a,!0),ml(),o=S.element,p.isDehydrated)if(p={element:o,isDehydrated:!1,cache:S.cache},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){n=Yp(e,n,o,a);break t}else if(o!==h){h=lr(Error(i(424)),n),ul(h),n=Yp(e,n,o,a);break t}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ae=dr(e.firstChild),gn=n,ce=!0,ca=null,hr=!0,a=Lg(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ss(),o===h){n=Ci(e,n,a);break t}mn(e,n,o,a)}n=n.child}return n;case 26:return Vc(e,n),e===null?(a=n0(n.type,null,n.pendingProps,null))?n.memoizedState=a:ce||(a=n.type,e=n.pendingProps,o=su(Yt.current).createElement(a),o[De]=n,o[He]=e,yn(o,a,e),Ye(o),n.stateNode=o):n.memoizedState=n0(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return un(n),e===null&&ce&&(o=n.stateNode=$m(n.type,n.pendingProps,Yt.current),gn=n,hr=!0,h=Ae,wa(n.type)?(od=h,Ae=dr(o.firstChild)):Ae=h),mn(e,n,n.pendingProps.children,a),Vc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&ce&&((h=o=Ae)&&(o=Cb(o,n.type,n.pendingProps,hr),o!==null?(n.stateNode=o,gn=n,Ae=dr(o.firstChild),hr=!1,h=!0):h=!1),h||ua(n)),un(n),h=n.type,p=n.pendingProps,S=e!==null?e.memoizedProps:null,o=p.children,nd(h,p)?o=null:S!==null&&nd(h,S)&&(n.flags|=32),n.memoizedState!==null&&(h=tf(e,n,Fv,null,null,a),Nl._currentValue=h),Vc(e,n),mn(e,n,o,a),n.child;case 6:return e===null&&ce&&((e=a=Ae)&&(a=wb(a,n.pendingProps,hr),a!==null?(n.stateNode=a,gn=n,Ae=null,e=!0):e=!1),e||ua(n)),null;case 13:return Xp(e,n,a);case 4:return tn(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=fs(n,null,o,a):mn(e,n,o,a),n.child;case 11:return zp(e,n,n.type,n.pendingProps,a);case 7:return mn(e,n,n.pendingProps,a),n.child;case 8:return mn(e,n,n.pendingProps.children,a),n.child;case 12:return mn(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,ha(n,n.type,o.value),mn(e,n,o.children,a),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,ls(n),h=pn(h),o=o(h),n.flags|=1,mn(e,n,o,a),n.child;case 14:return Rp(e,n,n.type,n.pendingProps,a);case 15:return Bp(e,n,n.type,n.pendingProps,a);case 19:return Gp(e,n,a);case 31:return Pv(e,n,a);case 22:return Lp(e,n,a,n.pendingProps);case 24:return ls(n),o=pn(Qe),e===null?(h=Gh(),h===null&&(h=Oe,p=Xh(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=a),h=p),n.memoizedState={parent:o,cache:h},Ph(n),ha(n,Qe,h)):((e.lanes&a)!==0&&(Kh(e,n),yl(n,null,null,a),ml()),h=e.memoizedState,p=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),ha(n,Qe,o)):(o=p.cache,ha(n,Qe,o),o!==h.cache&&Yh(n,[Qe],a,!0))),mn(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function wi(e){e.flags|=4}function Mf(e,n,a,o,h){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(vm())e.flags|=8192;else throw hs=Ec,qh}else e.flags&=-16777217}function Pp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!o0(n))if(vm())e.flags|=8192;else throw hs=Ec,qh}function qc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?oc():536870912,e.lanes|=n,ho|=n)}function Cl(e,n){if(!ce)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ke(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function Wv(e,n,a){var o=n.pendingProps;switch(Lh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ke(n),null;case 1:return ke(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),xi(Qe),Tt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Js(n)?wi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Fh())),ke(n),null;case 26:var h=n.type,p=n.memoizedState;return e===null?(wi(n),p!==null?(ke(n),Pp(n,p)):(ke(n),Mf(n,h,null,o,a))):p?p!==e.memoizedState?(wi(n),ke(n),Pp(n,p)):(ke(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&wi(n),ke(n),Mf(n,h,e,o,a)),null;case 27:if(ei(n),a=Yt.current,h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&wi(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return ke(n),null}e=Et.current,Js(n)?Tg(n):(e=$m(h,o,a),n.stateNode=e,wi(n))}return ke(n),null;case 5:if(ei(n),h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&wi(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return ke(n),null}if(p=Et.current,Js(n))Tg(n);else{var S=su(Yt.current);switch(p){case 1:p=S.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:p=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":p=S.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":p=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":p=S.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof o.is=="string"?S.createElement("select",{is:o.is}):S.createElement("select"),o.multiple?p.multiple=!0:o.size&&(p.size=o.size);break;default:p=typeof o.is=="string"?S.createElement(h,{is:o.is}):S.createElement(h)}}p[De]=n,p[He]=o;t:for(S=n.child;S!==null;){if(S.tag===5||S.tag===6)p.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===n)break t;for(;S.sibling===null;){if(S.return===null||S.return===n)break t;S=S.return}S.sibling.return=S.return,S=S.sibling}n.stateNode=p;t:switch(yn(p,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&wi(n)}}return ke(n),Mf(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&wi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(i(166));if(e=Yt.current,Js(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,h=gn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[De]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Xm(e.nodeValue,a)),e||ua(n,!0)}else e=su(e).createTextNode(o),e[De]=n,n.stateNode=e}return ke(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(o=Js(n),a!==null){if(e===null){if(!o)throw Error(i(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[De]=n}else ss(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ke(n),e=!1}else a=Fh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Jn(n),n):(Jn(n),null);if((n.flags&128)!==0)throw Error(i(558))}return ke(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Js(n),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(i(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[De]=n}else ss(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ke(n),h=!1}else h=Fh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Jn(n),n):(Jn(n),null)}return Jn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==h&&(o.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),qc(n,n.updateQueue),ke(n),null);case 4:return Tt(),e===null&&If(n.stateNode.containerInfo),ke(n),null;case 10:return xi(n.type),ke(n),null;case 19:if(st(Xe),o=n.memoizedState,o===null)return ke(n),null;if(h=(n.flags&128)!==0,p=o.rendering,p===null)if(h)Cl(o,!1);else{if(Fe!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(p=kc(e),p!==null){for(n.flags|=128,Cl(o,!1),e=p.updateQueue,n.updateQueue=e,qc(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)xg(a,e),a=a.sibling;return mt(Xe,Xe.current&1|2),ce&&vi(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&_n()>Zc&&(n.flags|=128,h=!0,Cl(o,!1),n.lanes=4194304)}else{if(!h)if(e=kc(p),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,qc(n,e),Cl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!p.alternate&&!ce)return ke(n),null}else 2*_n()-o.renderingStartTime>Zc&&a!==536870912&&(n.flags|=128,h=!0,Cl(o,!1),n.lanes=4194304);o.isBackwards?(p.sibling=n.child,n.child=p):(e=o.last,e!==null?e.sibling=p:n.child=p,o.last=p)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=_n(),e.sibling=null,a=Xe.current,mt(Xe,h?a&1|2:a&1),ce&&vi(n,o.treeForkCount),e):(ke(n),null);case 22:case 23:return Jn(n),Ih(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(ke(n),n.subtreeFlags&6&&(n.flags|=8192)):ke(n),a=n.updateQueue,a!==null&&qc(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&st(cs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),xi(Qe),ke(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function Qv(e,n){switch(Lh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return xi(Qe),Tt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return ei(n),null;case 31:if(n.memoizedState!==null){if(Jn(n),n.alternate===null)throw Error(i(340));ss()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Jn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(i(340));ss()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return st(Xe),null;case 4:return Tt(),null;case 10:return xi(n.type),null;case 22:case 23:return Jn(n),Ih(),e!==null&&st(cs),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return xi(Qe),null;case 25:return null;default:return null}}function Kp(e,n){switch(Lh(n),n.tag){case 3:xi(Qe),Tt();break;case 26:case 27:case 5:ei(n);break;case 4:Tt();break;case 31:n.memoizedState!==null&&Jn(n);break;case 13:Jn(n);break;case 19:st(Xe);break;case 10:xi(n.type);break;case 22:case 23:Jn(n),Ih(),e!==null&&st(cs);break;case 24:xi(Qe)}}function wl(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var p=a.create,S=a.inst;o=p(),S.destroy=o}a=a.next}while(a!==h)}}catch(O){be(n,n.return,O)}}function ya(e,n,a){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var p=h.next;o=p;do{if((o.tag&e)===e){var S=o.inst,O=S.destroy;if(O!==void 0){S.destroy=void 0,h=n;var k=a,Z=O;try{Z()}catch(ot){be(h,k,ot)}}}o=o.next}while(o!==p)}}catch(ot){be(n,n.return,ot)}}function Wp(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Fg(n,a)}catch(o){be(e,e.return,o)}}}function Qp(e,n,a){a.props=gs(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){be(e,n,o)}}function Tl(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){be(e,n,h)}}function Qr(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){be(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){be(e,n,h)}else a.current=null}function Zp(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){be(e,e.return,h)}}function jf(e,n,a){try{var o=e.stateNode;yb(o,e.type,a,n),o[He]=n}catch(h){be(e,e.return,h)}}function Ip(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&wa(e.type)||e.tag===4}function Af(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Ip(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&wa(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kf(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Bn));else if(o!==4&&(o===27&&wa(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(kf(e,n,a),e=e.sibling;e!==null;)kf(e,n,a),e=e.sibling}function Pc(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&wa(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Pc(e,n,a),e=e.sibling;e!==null;)Pc(e,n,a),e=e.sibling}function Jp(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);yn(n,o,a),n[De]=e,n[He]=a}catch(p){be(e,e.return,p)}}var Ti=!1,Je=!1,zf=!1,$p=typeof WeakSet=="function"?WeakSet:Set,cn=null;function Zv(e,n){if(e=e.containerInfo,td=du,e=C(e),w(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,p=o.focusNode;o=o.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break t}var S=0,O=-1,k=-1,Z=0,ot=0,ut=e,J=null;e:for(;;){for(var rt;ut!==a||h!==0&&ut.nodeType!==3||(O=S+h),ut!==p||o!==0&&ut.nodeType!==3||(k=S+o),ut.nodeType===3&&(S+=ut.nodeValue.length),(rt=ut.firstChild)!==null;)J=ut,ut=rt;for(;;){if(ut===e)break e;if(J===a&&++Z===h&&(O=S),J===p&&++ot===o&&(k=S),(rt=ut.nextSibling)!==null)break;ut=J,J=ut.parentNode}ut=rt}a=O===-1||k===-1?null:{start:O,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(ed={focusedElem:e,selectionRange:a},du=!1,cn=n;cn!==null;)if(n=cn,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,cn=e;else for(;cn!==null;){switch(n=cn,p=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)h=e[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&p!==null){e=void 0,a=n,h=p.memoizedProps,p=p.memoizedState,o=a.stateNode;try{var kt=gs(a.type,h);e=o.getSnapshotBeforeUpdate(kt,p),o.__reactInternalSnapshotBeforeUpdate=e}catch(Xt){be(a,a.return,Xt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)id(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":id(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=n.sibling,e!==null){e.return=n.return,cn=e;break}cn=n.return}}function tm(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Di(e,a),o&4&&wl(5,a);break;case 1:if(Di(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(S){be(a,a.return,S)}else{var h=gs(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(S){be(a,a.return,S)}}o&64&&Wp(a),o&512&&Tl(a,a.return);break;case 3:if(Di(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Fg(e,n)}catch(S){be(a,a.return,S)}}break;case 27:n===null&&o&4&&Jp(a);case 26:case 5:Di(e,a),n===null&&o&4&&Zp(a),o&512&&Tl(a,a.return);break;case 12:Di(e,a);break;case 31:Di(e,a),o&4&&rm(e,a);break;case 13:Di(e,a),o&4&&im(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=ab.bind(null,a),Tb(e,a))));break;case 22:if(o=a.memoizedState!==null||Ti,!o){n=n!==null&&n.memoizedState!==null||Je,h=Ti;var p=Je;Ti=o,(Je=n)&&!p?Ei(e,a,(a.subtreeFlags&8772)!==0):Di(e,a),Ti=h,Je=p}break;case 30:break;default:Di(e,a)}}function em(e){var n=e.alternate;n!==null&&(e.alternate=null,em(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&js(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Be=null,Nn=!1;function Oi(e,n,a){for(a=a.child;a!==null;)nm(e,n,a),a=a.sibling}function nm(e,n,a){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Nr,a)}catch{}switch(a.tag){case 26:Je||Qr(a,n),Oi(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Je||Qr(a,n);var o=Be,h=Nn;wa(a.type)&&(Be=a.stateNode,Nn=!1),Oi(e,n,a),Rl(a.stateNode),Be=o,Nn=h;break;case 5:Je||Qr(a,n);case 6:if(o=Be,h=Nn,Be=null,Oi(e,n,a),Be=o,Nn=h,Be!==null)if(Nn)try{(Be.nodeType===9?Be.body:Be.nodeName==="HTML"?Be.ownerDocument.body:Be).removeChild(a.stateNode)}catch(p){be(a,n,p)}else try{Be.removeChild(a.stateNode)}catch(p){be(a,n,p)}break;case 18:Be!==null&&(Nn?(e=Be,Wm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),xo(e)):Wm(Be,a.stateNode));break;case 4:o=Be,h=Nn,Be=a.stateNode.containerInfo,Nn=!0,Oi(e,n,a),Be=o,Nn=h;break;case 0:case 11:case 14:case 15:ya(2,a,n),Je||ya(4,a,n),Oi(e,n,a);break;case 1:Je||(Qr(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Qp(a,n,o)),Oi(e,n,a);break;case 21:Oi(e,n,a);break;case 22:Je=(o=Je)||a.memoizedState!==null,Oi(e,n,a),Je=o;break;default:Oi(e,n,a)}}function rm(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{xo(e)}catch(a){be(n,n.return,a)}}}function im(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{xo(e)}catch(a){be(n,n.return,a)}}function Iv(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new $p),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new $p),n;default:throw Error(i(435,e.tag))}}function Kc(e,n){var a=Iv(e);n.forEach(function(o){if(!a.has(o)){a.add(o);var h=sb.bind(null,e,o);o.then(h,h)}})}function Fn(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],p=e,S=n,O=S;t:for(;O!==null;){switch(O.tag){case 27:if(wa(O.type)){Be=O.stateNode,Nn=!1;break t}break;case 5:Be=O.stateNode,Nn=!1;break t;case 3:case 4:Be=O.stateNode.containerInfo,Nn=!0;break t}O=O.return}if(Be===null)throw Error(i(160));nm(p,S,h),Be=null,Nn=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)am(n,e),n=n.sibling}var Tr=null;function am(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Fn(n,e),Un(e),o&4&&(ya(3,e,e.return),wl(3,e),ya(5,e,e.return));break;case 1:Fn(n,e),Un(e),o&512&&(Je||a===null||Qr(a,a.return)),o&64&&Ti&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Tr;if(Fn(n,e),Un(e),o&512&&(Je||a===null||Qr(a,a.return)),o&4){var p=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":p=h.getElementsByTagName("title")[0],(!p||p[Kn]||p[De]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(o),h.head.insertBefore(p,h.querySelector("head > title"))),yn(p,o,a),p[De]=e,Ye(p),o=p;break t;case"link":var S=a0("link","href",h).get(o+(a.href||""));if(S){for(var O=0;O<S.length;O++)if(p=S[O],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(O,1);break e}}p=h.createElement(o),yn(p,o,a),h.head.appendChild(p);break;case"meta":if(S=a0("meta","content",h).get(o+(a.content||""))){for(O=0;O<S.length;O++)if(p=S[O],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(O,1);break e}}p=h.createElement(o),yn(p,o,a),h.head.appendChild(p);break;default:throw Error(i(468,o))}p[De]=e,Ye(p),o=p}e.stateNode=o}else s0(h,e.type,e.stateNode);else e.stateNode=i0(h,o,e.memoizedProps);else p!==o?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,o===null?s0(h,e.type,e.stateNode):i0(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&jf(e,e.memoizedProps,a.memoizedProps)}break;case 27:Fn(n,e),Un(e),o&512&&(Je||a===null||Qr(a,a.return)),a!==null&&o&4&&jf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Fn(n,e),Un(e),o&512&&(Je||a===null||Qr(a,a.return)),e.flags&32){h=e.stateNode;try{li(h,"")}catch(kt){be(e,e.return,kt)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,jf(e,h,a!==null?a.memoizedProps:h)),o&1024&&(zf=!0);break;case 6:if(Fn(n,e),Un(e),o&4){if(e.stateNode===null)throw Error(i(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(kt){be(e,e.return,kt)}}break;case 3:if(cu=null,h=Tr,Tr=ou(n.containerInfo),Fn(n,e),Tr=h,Un(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{xo(n.containerInfo)}catch(kt){be(e,e.return,kt)}zf&&(zf=!1,sm(e));break;case 4:o=Tr,Tr=ou(e.stateNode.containerInfo),Fn(n,e),Un(e),Tr=o;break;case 12:Fn(n,e),Un(e);break;case 31:Fn(n,e),Un(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Kc(e,o)));break;case 13:Fn(n,e),Un(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Qc=_n()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Kc(e,o)));break;case 22:h=e.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,Z=Ti,ot=Je;if(Ti=Z||h,Je=ot||k,Fn(n,e),Je=ot,Ti=Z,Un(e),o&8192)t:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||k||Ti||Je||ps(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){k=a=n;try{if(p=k.stateNode,h)S=p.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{O=k.stateNode;var ut=k.memoizedProps.style,J=ut!=null&&ut.hasOwnProperty("display")?ut.display:null;O.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(kt){be(k,k.return,kt)}}}else if(n.tag===6){if(a===null){k=n;try{k.stateNode.nodeValue=h?"":k.memoizedProps}catch(kt){be(k,k.return,kt)}}}else if(n.tag===18){if(a===null){k=n;try{var rt=k.stateNode;h?Qm(rt,!0):Qm(k.stateNode,!1)}catch(kt){be(k,k.return,kt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Kc(e,a))));break;case 19:Fn(n,e),Un(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Kc(e,o)));break;case 30:break;case 21:break;default:Fn(n,e),Un(e)}}function Un(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(Ip(o)){a=o;break}o=o.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,p=Af(e);Pc(e,p,h);break;case 5:var S=a.stateNode;a.flags&32&&(li(S,""),a.flags&=-33);var O=Af(e);Pc(e,O,S);break;case 3:case 4:var k=a.stateNode.containerInfo,Z=Af(e);kf(e,Z,k);break;default:throw Error(i(161))}}catch(ot){be(e,e.return,ot)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function sm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;sm(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Di(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)tm(e,n.alternate,n),n=n.sibling}function ps(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:ya(4,n,n.return),ps(n);break;case 1:Qr(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Qp(n,n.return,a),ps(n);break;case 27:Rl(n.stateNode);case 26:case 5:Qr(n,n.return),ps(n);break;case 22:n.memoizedState===null&&ps(n);break;case 30:ps(n);break;default:ps(n)}e=e.sibling}}function Ei(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=e,p=n,S=p.flags;switch(p.tag){case 0:case 11:case 15:Ei(h,p,a),wl(4,p);break;case 1:if(Ei(h,p,a),o=p,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(Z){be(o,o.return,Z)}if(o=p,h=o.updateQueue,h!==null){var O=o.stateNode;try{var k=h.shared.hiddenCallbacks;if(k!==null)for(h.shared.hiddenCallbacks=null,h=0;h<k.length;h++)Ng(k[h],O)}catch(Z){be(o,o.return,Z)}}a&&S&64&&Wp(p),Tl(p,p.return);break;case 27:Jp(p);case 26:case 5:Ei(h,p,a),a&&o===null&&S&4&&Zp(p),Tl(p,p.return);break;case 12:Ei(h,p,a);break;case 31:Ei(h,p,a),a&&S&4&&rm(h,p);break;case 13:Ei(h,p,a),a&&S&4&&im(h,p);break;case 22:p.memoizedState===null&&Ei(h,p,a),Tl(p,p.return);break;case 30:break;default:Ei(h,p,a)}n=n.sibling}}function Rf(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&hl(a))}function Bf(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&hl(e))}function Or(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)om(e,n,a,o),n=n.sibling}function om(e,n,a,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:Or(e,n,a,o),h&2048&&wl(9,n);break;case 1:Or(e,n,a,o);break;case 3:Or(e,n,a,o),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&hl(e)));break;case 12:if(h&2048){Or(e,n,a,o),e=n.stateNode;try{var p=n.memoizedProps,S=p.id,O=p.onPostCommit;typeof O=="function"&&O(S,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){be(n,n.return,k)}}else Or(e,n,a,o);break;case 31:Or(e,n,a,o);break;case 13:Or(e,n,a,o);break;case 23:break;case 22:p=n.stateNode,S=n.alternate,n.memoizedState!==null?p._visibility&2?Or(e,n,a,o):Ol(e,n):p._visibility&2?Or(e,n,a,o):(p._visibility|=2,lo(e,n,a,o,(n.subtreeFlags&10256)!==0||!1)),h&2048&&Rf(S,n);break;case 24:Or(e,n,a,o),h&2048&&Bf(n.alternate,n);break;default:Or(e,n,a,o)}}function lo(e,n,a,o,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var p=e,S=n,O=a,k=o,Z=S.flags;switch(S.tag){case 0:case 11:case 15:lo(p,S,O,k,h),wl(8,S);break;case 23:break;case 22:var ot=S.stateNode;S.memoizedState!==null?ot._visibility&2?lo(p,S,O,k,h):Ol(p,S):(ot._visibility|=2,lo(p,S,O,k,h)),h&&Z&2048&&Rf(S.alternate,S);break;case 24:lo(p,S,O,k,h),h&&Z&2048&&Bf(S.alternate,S);break;default:lo(p,S,O,k,h)}n=n.sibling}}function Ol(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,h=o.flags;switch(o.tag){case 22:Ol(a,o),h&2048&&Rf(o.alternate,o);break;case 24:Ol(a,o),h&2048&&Bf(o.alternate,o);break;default:Ol(a,o)}n=n.sibling}}var Dl=8192;function co(e,n,a){if(e.subtreeFlags&Dl)for(e=e.child;e!==null;)lm(e,n,a),e=e.sibling}function lm(e,n,a){switch(e.tag){case 26:co(e,n,a),e.flags&Dl&&e.memoizedState!==null&&Nb(a,Tr,e.memoizedState,e.memoizedProps);break;case 5:co(e,n,a);break;case 3:case 4:var o=Tr;Tr=ou(e.stateNode.containerInfo),co(e,n,a),Tr=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Dl,Dl=16777216,co(e,n,a),Dl=o):co(e,n,a));break;default:co(e,n,a)}}function cm(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function El(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];cn=o,hm(o,e)}cm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)um(e),e=e.sibling}function um(e){switch(e.tag){case 0:case 11:case 15:El(e),e.flags&2048&&ya(9,e,e.return);break;case 3:El(e);break;case 12:El(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Wc(e)):El(e);break;default:El(e)}}function Wc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];cn=o,hm(o,e)}cm(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:ya(8,n,n.return),Wc(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Wc(n));break;default:Wc(n)}e=e.sibling}}function hm(e,n){for(;cn!==null;){var a=cn;switch(a.tag){case 0:case 11:case 15:ya(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:hl(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,cn=o;else t:for(a=e;cn!==null;){o=cn;var h=o.sibling,p=o.return;if(em(o),o===a){cn=null;break t}if(h!==null){h.return=p,cn=h;break t}cn=p}}}var Jv={getCacheForType:function(e){var n=pn(Qe),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return pn(Qe).controller.signal}},$v=typeof WeakMap=="function"?WeakMap:Map,pe=0,Oe=null,ie=null,se=0,ve=0,$n=null,va=!1,uo=!1,Lf=!1,Mi=0,Fe=0,ba=0,ms=0,Nf=0,tr=0,ho=0,Ml=null,Hn=null,Ff=!1,Qc=0,fm=0,Zc=1/0,Ic=null,xa=null,en=0,_a=null,fo=null,ji=0,Uf=0,Hf=null,dm=null,jl=0,Yf=null;function er(){return(pe&2)!==0&&se!==0?se&-se:tt.T!==null?Kf():Va()}function gm(){if(tr===0)if((se&536870912)===0||ce){var e=Qi;Qi<<=1,(Qi&3932160)===0&&(Qi=262144),tr=e}else tr=536870912;return e=In.current,e!==null&&(e.flags|=32),tr}function Yn(e,n,a){(e===Oe&&(ve===2||ve===9)||e.cancelPendingCommit!==null)&&(go(e,0),Sa(e,se,tr,!1)),rr(e,a),((pe&2)===0||e!==Oe)&&(e===Oe&&((pe&2)===0&&(ms|=a),Fe===4&&Sa(e,se,tr,!1)),Zr(e))}function pm(e,n,a){if((pe&6)!==0)throw Error(i(327));var o=!a&&(n&127)===0&&(n&e.expiredLanes)===0||ai(e,n),h=o?nb(e,n):Vf(e,n,!0),p=o;do{if(h===0){uo&&!o&&Sa(e,n,0,!1);break}else{if(a=e.current.alternate,p&&!tb(a)){h=Vf(e,n,!1),p=!1;continue}if(h===2){if(p=n,e.errorRecoveryDisabledLanes&p)var S=0;else S=e.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){n=S;t:{var O=e;h=Ml;var k=O.current.memoizedState.isDehydrated;if(k&&(go(O,S).flags|=256),S=Vf(O,S,!1),S!==2){if(Lf&&!k){O.errorRecoveryDisabledLanes|=p,ms|=p,h=4;break t}p=Hn,Hn=h,p!==null&&(Hn===null?Hn=p:Hn.push.apply(Hn,p))}h=S}if(p=!1,h!==2)continue}}if(h===1){go(e,0),Sa(e,n,0,!0);break}t:{switch(o=e,p=h,p){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:Sa(o,n,tr,!va);break t;case 2:Hn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(h=Qc+300-_n(),10<h)){if(Sa(o,n,tr,!va),Ya(o,0,!0)!==0)break t;ji=n,o.timeoutHandle=Pm(mm.bind(null,o,a,Hn,Ic,Ff,n,tr,ms,ho,va,p,"Throttled",-0,0),h);break t}mm(o,a,Hn,Ic,Ff,n,tr,ms,ho,va,p,null,-0,0)}}break}while(!0);Zr(e)}function mm(e,n,a,o,h,p,S,O,k,Z,ot,ut,J,rt){if(e.timeoutHandle=-1,ut=n.subtreeFlags,ut&8192||(ut&16785408)===16785408){ut={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bn},lm(n,p,ut);var kt=(p&62914560)===p?Qc-_n():(p&4194048)===p?fm-_n():0;if(kt=Fb(ut,kt),kt!==null){ji=p,e.cancelPendingCommit=kt(wm.bind(null,e,n,p,a,o,h,S,O,k,ot,ut,null,J,rt)),Sa(e,p,S,!Z);return}}wm(e,n,p,a,o,h,S,O,k)}function tb(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],p=h.getSnapshot;h=h.value;try{if(!wn(p(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Sa(e,n,a,o){n&=~Nf,n&=~ms,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var h=n;0<h;){var p=31-Mt(h),S=1<<p;o[p]=-1,h&=~S}a!==0&&Xa(e,a,n)}function Jc(){return(pe&6)===0?(Al(0),!1):!0}function Xf(){if(ie!==null){if(ve===0)var e=ie.return;else e=ie,bi=os=null,rf(e),ro=null,dl=0,e=ie;for(;e!==null;)Kp(e.alternate,e),e=e.return;ie=null}}function go(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,xb(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ji=0,Xf(),Oe=e,ie=a=yi(e.current,null),se=n,ve=0,$n=null,va=!1,uo=ai(e,n),Lf=!1,ho=tr=Nf=ms=ba=Fe=0,Hn=Ml=null,Ff=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var h=31-Mt(o),p=1<<h;n|=e[h],o&=~p}return Mi=n,ln(),a}function ym(e,n){It=null,tt.H=_l,n===no||n===Dc?(n=zg(),ve=3):n===qh?(n=zg(),ve=4):ve=n===xf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,$n=n,ie===null&&(Fe=1,Yc(e,lr(n,e.current)))}function vm(){var e=In.current;return e===null?!0:(se&4194048)===se?fr===null:(se&62914560)===se||(se&536870912)!==0?e===fr:!1}function bm(){var e=tt.H;return tt.H=_l,e===null?_l:e}function xm(){var e=tt.A;return tt.A=Jv,e}function $c(){Fe=4,va||(se&4194048)!==se&&In.current!==null||(uo=!0),(ba&134217727)===0&&(ms&134217727)===0||Oe===null||Sa(Oe,se,tr,!1)}function Vf(e,n,a){var o=pe;pe|=2;var h=bm(),p=xm();(Oe!==e||se!==n)&&(Ic=null,go(e,n)),n=!1;var S=Fe;t:do try{if(ve!==0&&ie!==null){var O=ie,k=$n;switch(ve){case 8:Xf(),S=6;break t;case 3:case 2:case 9:case 6:In.current===null&&(n=!0);var Z=ve;if(ve=0,$n=null,po(e,O,k,Z),a&&uo){S=0;break t}break;default:Z=ve,ve=0,$n=null,po(e,O,k,Z)}}eb(),S=Fe;break}catch(ot){ym(e,ot)}while(!0);return n&&e.shellSuspendCounter++,bi=os=null,pe=o,tt.H=h,tt.A=p,ie===null&&(Oe=null,se=0,ln()),S}function eb(){for(;ie!==null;)_m(ie)}function nb(e,n){var a=pe;pe|=2;var o=bm(),h=xm();Oe!==e||se!==n?(Ic=null,Zc=_n()+500,go(e,n)):uo=ai(e,n);t:do try{if(ve!==0&&ie!==null){n=ie;var p=$n;e:switch(ve){case 1:ve=0,$n=null,po(e,n,p,1);break;case 2:case 9:if(Ag(p)){ve=0,$n=null,Sm(n);break}n=function(){ve!==2&&ve!==9||Oe!==e||(ve=7),Zr(e)},p.then(n,n);break t;case 3:ve=7;break t;case 4:ve=5;break t;case 7:Ag(p)?(ve=0,$n=null,Sm(n)):(ve=0,$n=null,po(e,n,p,7));break;case 5:var S=null;switch(ie.tag){case 26:S=ie.memoizedState;case 5:case 27:var O=ie;if(S?o0(S):O.stateNode.complete){ve=0,$n=null;var k=O.sibling;if(k!==null)ie=k;else{var Z=O.return;Z!==null?(ie=Z,tu(Z)):ie=null}break e}}ve=0,$n=null,po(e,n,p,5);break;case 6:ve=0,$n=null,po(e,n,p,6);break;case 8:Xf(),Fe=6;break t;default:throw Error(i(462))}}rb();break}catch(ot){ym(e,ot)}while(!0);return bi=os=null,tt.H=o,tt.A=h,pe=a,ie!==null?0:(Oe=null,se=0,ln(),Fe)}function rb(){for(;ie!==null&&!sc();)_m(ie)}function _m(e){var n=qp(e.alternate,e,Mi);e.memoizedProps=e.pendingProps,n===null?tu(e):ie=n}function Sm(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=Up(a,n,n.pendingProps,n.type,void 0,se);break;case 11:n=Up(a,n,n.pendingProps,n.type.render,n.ref,se);break;case 5:rf(n);default:Kp(a,n),n=ie=xg(n,Mi),n=qp(a,n,Mi)}e.memoizedProps=e.pendingProps,n===null?tu(e):ie=n}function po(e,n,a,o){bi=os=null,rf(n),ro=null,dl=0;var h=n.return;try{if(qv(e,h,n,a,se)){Fe=1,Yc(e,lr(a,e.current)),ie=null;return}}catch(p){if(h!==null)throw ie=h,p;Fe=1,Yc(e,lr(a,e.current)),ie=null;return}n.flags&32768?(ce||o===1?e=!0:uo||(se&536870912)!==0?e=!1:(va=e=!0,(o===2||o===9||o===3||o===6)&&(o=In.current,o!==null&&o.tag===13&&(o.flags|=16384))),Cm(n,e)):tu(n)}function tu(e){var n=e;do{if((n.flags&32768)!==0){Cm(n,va);return}e=n.return;var a=Wv(n.alternate,n,Mi);if(a!==null){ie=a;return}if(n=n.sibling,n!==null){ie=n;return}ie=n=e}while(n!==null);Fe===0&&(Fe=5)}function Cm(e,n){do{var a=Qv(e.alternate,e);if(a!==null){a.flags&=32767,ie=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){ie=e;return}ie=e=a}while(e!==null);Fe=6,ie=null}function wm(e,n,a,o,h,p,S,O,k){e.cancelPendingCommit=null;do eu();while(en!==0);if((pe&6)!==0)throw Error(i(327));if(n!==null){if(n===e.current)throw Error(i(177));if(p=n.lanes|n.childLanes,p|=Zt,Ho(e,a,p,S,O,k),e===Oe&&(ie=Oe=null,se=0),fo=n,_a=e,ji=a,Uf=p,Hf=h,dm=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ob(Wi,function(){return Mm(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=tt.T,tt.T=null,h=gt.p,gt.p=2,S=pe,pe|=4;try{Zv(e,n,a)}finally{pe=S,gt.p=h,tt.T=o}}en=1,Tm(),Om(),Dm()}}function Tm(){if(en===1){en=0;var e=_a,n=fo,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=tt.T,tt.T=null;var o=gt.p;gt.p=2;var h=pe;pe|=4;try{am(n,e);var p=ed,S=C(e.containerInfo),O=p.focusedElem,k=p.selectionRange;if(S!==O&&O&&O.ownerDocument&&x(O.ownerDocument.documentElement,O)){if(k!==null&&w(O)){var Z=k.start,ot=k.end;if(ot===void 0&&(ot=Z),"selectionStart"in O)O.selectionStart=Z,O.selectionEnd=Math.min(ot,O.value.length);else{var ut=O.ownerDocument||document,J=ut&&ut.defaultView||window;if(J.getSelection){var rt=J.getSelection(),kt=O.textContent.length,Xt=Math.min(k.start,kt),we=k.end===void 0?Xt:Math.min(k.end,kt);!rt.extend&&Xt>we&&(S=we,we=Xt,Xt=S);var K=v(O,Xt),U=v(O,we);if(K&&U&&(rt.rangeCount!==1||rt.anchorNode!==K.node||rt.anchorOffset!==K.offset||rt.focusNode!==U.node||rt.focusOffset!==U.offset)){var Q=ut.createRange();Q.setStart(K.node,K.offset),rt.removeAllRanges(),Xt>we?(rt.addRange(Q),rt.extend(U.node,U.offset)):(Q.setEnd(U.node,U.offset),rt.addRange(Q))}}}}for(ut=[],rt=O;rt=rt.parentNode;)rt.nodeType===1&&ut.push({element:rt,left:rt.scrollLeft,top:rt.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<ut.length;O++){var lt=ut[O];lt.element.scrollLeft=lt.left,lt.element.scrollTop=lt.top}}du=!!td,ed=td=null}finally{pe=h,gt.p=o,tt.T=a}}e.current=n,en=2}}function Om(){if(en===2){en=0;var e=_a,n=fo,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=tt.T,tt.T=null;var o=gt.p;gt.p=2;var h=pe;pe|=4;try{tm(e,n.alternate,n)}finally{pe=h,gt.p=o,tt.T=a}}en=3}}function Dm(){if(en===4||en===3){en=0,La();var e=_a,n=fo,a=ji,o=dm;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?en=5:(en=0,fo=_a=null,Em(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(xa=null),Zi(a),n=n.stateNode,hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Nr,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=tt.T,h=gt.p,gt.p=2,tt.T=null;try{for(var p=e.onRecoverableError,S=0;S<o.length;S++){var O=o[S];p(O.value,{componentStack:O.stack})}}finally{tt.T=n,gt.p=h}}(ji&3)!==0&&eu(),Zr(e),h=e.pendingLanes,(a&261930)!==0&&(h&42)!==0?e===Yf?jl++:(jl=0,Yf=e):jl=0,Al(0)}}function Em(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,hl(n)))}function eu(){return Tm(),Om(),Dm(),Mm()}function Mm(){if(en!==5)return!1;var e=_a,n=Uf;Uf=0;var a=Zi(ji),o=tt.T,h=gt.p;try{gt.p=32>a?32:a,tt.T=null,a=Hf,Hf=null;var p=_a,S=ji;if(en=0,fo=_a=null,ji=0,(pe&6)!==0)throw Error(i(331));var O=pe;if(pe|=4,um(p.current),om(p,p.current,S,a),pe=O,Al(0,!1),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Nr,p)}catch{}return!0}finally{gt.p=h,tt.T=o,Em(e,n)}}function jm(e,n,a){n=lr(a,n),n=bf(e.stateNode,n,2),e=ga(e,n,2),e!==null&&(rr(e,2),Zr(e))}function be(e,n,a){if(e.tag===3)jm(e,e,a);else for(;n!==null;){if(n.tag===3){jm(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(xa===null||!xa.has(o))){e=lr(a,e),a=Ap(2),o=ga(n,a,2),o!==null&&(kp(a,o,n,e),rr(o,2),Zr(o));break}}n=n.return}}function Gf(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new $v;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(a)||(Lf=!0,h.add(a),e=ib.bind(null,e,n,a),n.then(e,e))}function ib(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Oe===e&&(se&a)===a&&(Fe===4||Fe===3&&(se&62914560)===se&&300>_n()-Qc?(pe&2)===0&&go(e,0):Nf|=a,ho===se&&(ho=0)),Zr(e)}function Am(e,n){n===0&&(n=oc()),e=Re(e,n),e!==null&&(rr(e,n),Zr(e))}function ab(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Am(e,a)}function sb(e,n){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(n),Am(e,a)}function ob(e,n){return Ba(e,n)}var nu=null,mo=null,qf=!1,ru=!1,Pf=!1,Ca=0;function Zr(e){e!==mo&&e.next===null&&(mo===null?nu=mo=e:mo=mo.next=e),ru=!0,qf||(qf=!0,cb())}function Al(e,n){if(!Pf&&ru){Pf=!0;do for(var a=!1,o=nu;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var p=0;else{var S=o.suspendedLanes,O=o.pingedLanes;p=(1<<31-Mt(42|e)+1)-1,p&=h&~(S&~O),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,Bm(o,p))}else p=se,p=Ya(o,o===Oe?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(p&3)===0||ai(o,p)||(a=!0,Bm(o,p));o=o.next}while(a);Pf=!1}}function lb(){km()}function km(){ru=qf=!1;var e=0;Ca!==0&&bb()&&(e=Ca);for(var n=_n(),a=null,o=nu;o!==null;){var h=o.next,p=zm(o,n);p===0?(o.next=null,a===null?nu=h:a.next=h,h===null&&(mo=a)):(a=o,(e!==0||(p&3)!==0)&&(ru=!0)),o=h}en!==0&&en!==5||Al(e),Ca!==0&&(Ca=0)}function zm(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,p=e.pendingLanes&-62914561;0<p;){var S=31-Mt(p),O=1<<S,k=h[S];k===-1?((O&a)===0||(O&o)!==0)&&(h[S]=Ch(O,n)):k<=n&&(e.expiredLanes|=O),p&=~O}if(n=Oe,a=se,a=Ya(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(ve===2||ve===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Rn(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ai(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&Rn(o),Zi(a)){case 2:case 8:a=Lr;break;case 32:a=Wi;break;case 268435456:a=Ds;break;default:a=Wi}return o=Rm.bind(null,e),a=Ba(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&Rn(o),e.callbackPriority=2,e.callbackNode=null,2}function Rm(e,n){if(en!==0&&en!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(eu()&&e.callbackNode!==a)return null;var o=se;return o=Ya(e,e===Oe?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(pm(e,o,n),zm(e,_n()),e.callbackNode!=null&&e.callbackNode===a?Rm.bind(null,e):null)}function Bm(e,n){if(eu())return null;pm(e,n,!0)}function cb(){_b(function(){(pe&6)!==0?Ba(Br,lb):km()})}function Kf(){if(Ca===0){var e=to;e===0&&(e=Dt,Dt<<=1,(Dt&261888)===0&&(Dt=256)),Ca=e}return Ca}function Lm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:wr(""+e)}function Nm(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function ub(e,n,a,o,h){if(n==="submit"&&a&&a.stateNode===h){var p=Lm((h[He]||null).action),S=o.submitter;S&&(n=(n=S[He]||null)?Lm(n.formAction):S.getAttribute("formAction"),n!==null&&(p=n,S=null));var O=new Bs("action","action",null,o,h);e.push({event:O,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ca!==0){var k=S?Nm(h,S):new FormData(h);df(a,{pending:!0,data:k,method:h.method,action:p},null,k)}}else typeof p=="function"&&(O.preventDefault(),k=S?Nm(h,S):new FormData(h),df(a,{pending:!0,data:k,method:h.method,action:p},p,k))},currentTarget:h}]})}}for(var Wf=0;Wf<Ct.length;Wf++){var Qf=Ct[Wf],hb=Qf.toLowerCase(),fb=Qf[0].toUpperCase()+Qf.slice(1);vt(hb,"on"+fb)}vt(W,"onAnimationEnd"),vt(I,"onAnimationIteration"),vt(it,"onAnimationStart"),vt("dblclick","onDoubleClick"),vt("focusin","onFocus"),vt("focusout","onBlur"),vt(ct,"onTransitionRun"),vt(xt,"onTransitionStart"),vt(wt,"onTransitionCancel"),vt(yt,"onTransitionEnd"),Xr("onMouseEnter",["mouseout","mouseover"]),Xr("onMouseLeave",["mouseout","mouseover"]),Xr("onPointerEnter",["pointerout","pointerover"]),Xr("onPointerLeave",["pointerout","pointerover"]),Sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),db=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kl));function Fm(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var p=void 0;if(n)for(var S=o.length-1;0<=S;S--){var O=o[S],k=O.instance,Z=O.currentTarget;if(O=O.listener,k!==p&&h.isPropagationStopped())break t;p=O,h.currentTarget=Z;try{p(h)}catch(ot){jt(ot)}h.currentTarget=null,p=k}else for(S=0;S<o.length;S++){if(O=o[S],k=O.instance,Z=O.currentTarget,O=O.listener,k!==p&&h.isPropagationStopped())break t;p=O,h.currentTarget=Z;try{p(h)}catch(ot){jt(ot)}h.currentTarget=null,p=k}}}}function ae(e,n){var a=n[Ii];a===void 0&&(a=n[Ii]=new Set);var o=e+"__bubble";a.has(o)||(Um(n,e,2,!1),a.add(o))}function Zf(e,n,a){var o=0;n&&(o|=4),Um(a,e,o,n)}var iu="_reactListening"+Math.random().toString(36).slice(2);function If(e){if(!e[iu]){e[iu]=!0,si.forEach(function(a){a!=="selectionchange"&&(db.has(a)||Zf(a,!1,e),Zf(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[iu]||(n[iu]=!0,Zf("selectionchange",!1,n))}}function Um(e,n,a,o){switch(g0(n)){case 2:var h=Yb;break;case 8:h=Xb;break;default:h=fd}a=h.bind(null,n,a,e),h=void 0,!Wo||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(n,a,{capture:!0,passive:h}):e.addEventListener(n,a,!0):h!==void 0?e.addEventListener(n,a,{passive:h}):e.addEventListener(n,a,!1)}function Jf(e,n,a,o,h){var p=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var S=o.tag;if(S===3||S===4){var O=o.stateNode.containerInfo;if(O===h)break;if(S===4)for(S=o.return;S!==null;){var k=S.tag;if((k===3||k===4)&&S.stateNode.containerInfo===h)return;S=S.return}for(;O!==null;){if(S=Yr(O),S===null)return;if(k=S.tag,k===5||k===6||k===26||k===27){o=p=S;continue t}O=O.parentNode}}o=o.return}$i(function(){var Z=p,ot=zs(a),ut=[];t:{var J=St.get(e);if(J!==void 0){var rt=Bs,kt=e;switch(e){case"keypress":if(na(a)===0)break t;case"keydown":case"keyup":rt=Xs;break;case"focusin":kt="focus",rt=ra;break;case"focusout":kt="blur",rt=ra;break;case"beforeblur":case"afterblur":rt=ra;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=Fs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=hc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=el;break;case W:case I:case it:rt=fc;break;case yt:rt=nl;break;case"scroll":case"scrollend":rt=Ls;break;case"wheel":rt=Gs;break;case"copy":case"cut":case"paste":rt=ia;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=tl;break;case"toggle":case"beforetoggle":rt=pc}var Xt=(n&4)!==0,we=!Xt&&(e==="scroll"||e==="scrollend"),K=Xt?J!==null?J+"Capture":null:J;Xt=[];for(var U=Z,Q;U!==null;){var lt=U;if(Q=lt.stateNode,lt=lt.tag,lt!==5&&lt!==26&&lt!==27||Q===null||K===null||(lt=hi(U,K),lt!=null&&Xt.push(zl(U,lt,Q))),we)break;U=U.return}0<Xt.length&&(J=new rt(J,kt,null,a,ot),ut.push({event:J,listeners:Xt}))}}if((n&7)===0){t:{if(J=e==="mouseover"||e==="pointerover",rt=e==="mouseout"||e==="pointerout",J&&a!==ar&&(kt=a.relatedTarget||a.fromElement)&&(Yr(kt)||kt[Dn]))break t;if((rt||J)&&(J=ot.window===ot?ot:(J=ot.ownerDocument)?J.defaultView||J.parentWindow:window,rt?(kt=a.relatedTarget||a.toElement,rt=Z,kt=kt?Yr(kt):null,kt!==null&&(we=l(kt),Xt=kt.tag,kt!==we||Xt!==5&&Xt!==27&&Xt!==6)&&(kt=null)):(rt=null,kt=Z),rt!==kt)){if(Xt=Fs,lt="onMouseLeave",K="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(Xt=tl,lt="onPointerLeave",K="onPointerEnter",U="pointer"),we=rt==null?J:Wn(rt),Q=kt==null?J:Wn(kt),J=new Xt(lt,U+"leave",rt,a,ot),J.target=we,J.relatedTarget=Q,lt=null,Yr(ot)===Z&&(Xt=new Xt(K,U+"enter",kt,a,ot),Xt.target=Q,Xt.relatedTarget=we,lt=Xt),we=lt,rt&&kt)e:{for(Xt=gb,K=rt,U=kt,Q=0,lt=K;lt;lt=Xt(lt))Q++;lt=0;for(var Ft=U;Ft;Ft=Xt(Ft))lt++;for(;0<Q-lt;)K=Xt(K),Q--;for(;0<lt-Q;)U=Xt(U),lt--;for(;Q--;){if(K===U||U!==null&&K===U.alternate){Xt=K;break e}K=Xt(K),U=Xt(U)}Xt=null}else Xt=null;rt!==null&&Hm(ut,J,rt,Xt,!1),kt!==null&&we!==null&&Hm(ut,we,kt,Xt,!0)}}t:{if(J=Z?Wn(Z):window,rt=J.nodeName&&J.nodeName.toLowerCase(),rt==="select"||rt==="input"&&J.type==="file")var fe=rs;else if(Ks(J))if(or)fe=oa;else{fe=mi;var Bt=_c}else rt=J.nodeName,!rt||rt.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Z&&Ko(Z.elementType)&&(fe=rs):fe=ol;if(fe&&(fe=fe(e,Z))){sl(ut,fe,a,ot);break t}Bt&&Bt(e,J,Z),e==="focusout"&&Z&&J.type==="number"&&Z.memoizedProps.value!=null&&Qa(J,"number",J.value)}switch(Bt=Z?Wn(Z):window,e){case"focusin":(Ks(Bt)||Bt.contentEditable==="true")&&(j=Bt,L=Z,N=null);break;case"focusout":N=L=j=null;break;case"mousedown":G=!0;break;case"contextmenu":case"mouseup":case"dragend":G=!1,z(ut,a,ot);break;case"selectionchange":if(E)break;case"keydown":case"keyup":z(ut,a,ot)}var $t;if(es)t:{switch(e){case"compositionstart":var oe="onCompositionStart";break t;case"compositionend":oe="onCompositionEnd";break t;case"compositionupdate":oe="onCompositionUpdate";break t}oe=void 0}else pi?al(e,a)&&(oe="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(oe="onCompositionStart");oe&&(qs&&a.locale!=="ko"&&(pi||oe!=="onCompositionStart"?oe==="onCompositionEnd"&&pi&&($t=ea()):(sr=ot,Rs="value"in sr?sr.value:sr.textContent,pi=!0)),Bt=au(Z,oe),0<Bt.length&&(oe=new Ys(oe,e,null,a,ot),ut.push({event:oe,listeners:Bt}),$t?oe.data=$t:($t=yc(a),$t!==null&&(oe.data=$t)))),($t=Mh?vc(e,a):jh(e,a))&&(oe=au(Z,"onBeforeInput"),0<oe.length&&(Bt=new Ys("onBeforeInput","beforeinput",null,a,ot),ut.push({event:Bt,listeners:oe}),Bt.data=$t)),ub(ut,e,Z,a,ot)}Fm(ut,n)})}function zl(e,n,a){return{instance:e,listener:n,currentTarget:a}}function au(e,n){for(var a=n+"Capture",o=[];e!==null;){var h=e,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=hi(e,a),h!=null&&o.unshift(zl(e,h,p)),h=hi(e,n),h!=null&&o.push(zl(e,h,p))),e.tag===3)return o;e=e.return}return[]}function gb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Hm(e,n,a,o,h){for(var p=n._reactName,S=[];a!==null&&a!==o;){var O=a,k=O.alternate,Z=O.stateNode;if(O=O.tag,k!==null&&k===o)break;O!==5&&O!==26&&O!==27||Z===null||(k=Z,h?(Z=hi(a,p),Z!=null&&S.unshift(zl(a,Z,k))):h||(Z=hi(a,p),Z!=null&&S.push(zl(a,Z,k)))),a=a.return}S.length!==0&&e.push({event:n,listeners:S})}var pb=/\r\n?/g,mb=/\u0000|\uFFFD/g;function Ym(e){return(typeof e=="string"?e:""+e).replace(pb,`
`).replace(mb,"")}function Xm(e,n){return n=Ym(n),Ym(e)===n}function Ce(e,n,a,o,h,p){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||li(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&li(e,""+o);break;case"className":Ka(e,"class",o);break;case"tabIndex":Ka(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Ka(e,a,o);break;case"style":Po(e,o,p);break;case"data":if(n!=="object"){Ka(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=wr(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(n!=="input"&&Ce(e,n,"name",h.name,h,null),Ce(e,n,"formEncType",h.formEncType,h,null),Ce(e,n,"formMethod",h.formMethod,h,null),Ce(e,n,"formTarget",h.formTarget,h,null)):(Ce(e,n,"encType",h.encType,h,null),Ce(e,n,"method",h.method,h,null),Ce(e,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=wr(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=Bn);break;case"onScroll":o!=null&&ae("scroll",e);break;case"onScrollEnd":o!=null&&ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=wr(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":ae("beforetoggle",e),ae("toggle",e),ee(e,"popover",o);break;case"xlinkActuate":ir(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ir(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ir(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ir(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ir(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ir(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ir(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ir(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ir(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ee(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Oh.get(a)||a,ee(e,a,o))}}function $f(e,n,a,o,h,p){switch(a){case"style":Po(e,o,p);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof o=="string"?li(e,o):(typeof o=="number"||typeof o=="bigint")&&li(e,""+o);break;case"onScroll":o!=null&&ae("scroll",e);break;case"onScrollEnd":o!=null&&ae("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Bn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qa.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),p=e[He]||null,p=p!=null?p[a]:null,typeof p=="function"&&e.removeEventListener(n,p,h),typeof o=="function")){typeof p!="function"&&p!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):ee(e,a,o)}}}function yn(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ae("error",e),ae("load",e);var o=!1,h=!1,p;for(p in a)if(a.hasOwnProperty(p)){var S=a[p];if(S!=null)switch(p){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:Ce(e,n,p,S,a,null)}}h&&Ce(e,n,"srcSet",a.srcSet,a,null),o&&Ce(e,n,"src",a.src,a,null);return;case"input":ae("invalid",e);var O=p=S=h=null,k=null,Z=null;for(o in a)if(a.hasOwnProperty(o)){var ot=a[o];if(ot!=null)switch(o){case"name":h=ot;break;case"type":S=ot;break;case"checked":k=ot;break;case"defaultChecked":Z=ot;break;case"value":p=ot;break;case"defaultValue":O=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(i(137,n));break;default:Ce(e,n,o,ot,a,null)}}ks(e,p,O,k,Z,S,h,!1);return;case"select":ae("invalid",e),o=S=p=null;for(h in a)if(a.hasOwnProperty(h)&&(O=a[h],O!=null))switch(h){case"value":p=O;break;case"defaultValue":S=O;break;case"multiple":o=O;default:Ce(e,n,h,O,a,null)}n=p,a=S,e.multiple=!!o,n!=null?Cr(e,!!o,n,!1):a!=null&&Cr(e,!!o,a,!0);return;case"textarea":ae("invalid",e),p=h=o=null;for(S in a)if(a.hasOwnProperty(S)&&(O=a[S],O!=null))switch(S){case"value":o=O;break;case"defaultValue":h=O;break;case"children":p=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:Ce(e,n,S,O,a,null)}Za(e,o,h,p);return;case"option":for(k in a)a.hasOwnProperty(k)&&(o=a[k],o!=null)&&(k==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":Ce(e,n,k,o,a,null));return;case"dialog":ae("beforetoggle",e),ae("toggle",e),ae("cancel",e),ae("close",e);break;case"iframe":case"object":ae("load",e);break;case"video":case"audio":for(o=0;o<kl.length;o++)ae(kl[o],e);break;case"image":ae("error",e),ae("load",e);break;case"details":ae("toggle",e);break;case"embed":case"source":case"link":ae("error",e),ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in a)if(a.hasOwnProperty(Z)&&(o=a[Z],o!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:Ce(e,n,Z,o,a,null)}return;default:if(Ko(n)){for(ot in a)a.hasOwnProperty(ot)&&(o=a[ot],o!==void 0&&$f(e,n,ot,o,a,void 0));return}}for(O in a)a.hasOwnProperty(O)&&(o=a[O],o!=null&&Ce(e,n,O,o,a,null))}function yb(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,S=null,O=null,k=null,Z=null,ot=null;for(rt in a){var ut=a[rt];if(a.hasOwnProperty(rt)&&ut!=null)switch(rt){case"checked":break;case"value":break;case"defaultValue":k=ut;default:o.hasOwnProperty(rt)||Ce(e,n,rt,null,o,ut)}}for(var J in o){var rt=o[J];if(ut=a[J],o.hasOwnProperty(J)&&(rt!=null||ut!=null))switch(J){case"type":p=rt;break;case"name":h=rt;break;case"checked":Z=rt;break;case"defaultChecked":ot=rt;break;case"value":S=rt;break;case"defaultValue":O=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(i(137,n));break;default:rt!==ut&&Ce(e,n,J,rt,o,ut)}}Vr(e,S,O,k,Z,ot,p,h);return;case"select":rt=S=O=J=null;for(p in a)if(k=a[p],a.hasOwnProperty(p)&&k!=null)switch(p){case"value":break;case"multiple":rt=k;default:o.hasOwnProperty(p)||Ce(e,n,p,null,o,k)}for(h in o)if(p=o[h],k=a[h],o.hasOwnProperty(h)&&(p!=null||k!=null))switch(h){case"value":J=p;break;case"defaultValue":O=p;break;case"multiple":S=p;default:p!==k&&Ce(e,n,h,p,o,k)}n=O,a=S,o=rt,J!=null?Cr(e,!!a,J,!1):!!o!=!!a&&(n!=null?Cr(e,!!a,n,!0):Cr(e,!!a,a?[]:"",!1));return;case"textarea":rt=J=null;for(O in a)if(h=a[O],a.hasOwnProperty(O)&&h!=null&&!o.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:Ce(e,n,O,null,o,h)}for(S in o)if(h=o[S],p=a[S],o.hasOwnProperty(S)&&(h!=null||p!=null))switch(S){case"value":J=h;break;case"defaultValue":rt=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==p&&Ce(e,n,S,h,o,p)}qo(e,J,rt);return;case"option":for(var kt in a)J=a[kt],a.hasOwnProperty(kt)&&J!=null&&!o.hasOwnProperty(kt)&&(kt==="selected"?e.selected=!1:Ce(e,n,kt,null,o,J));for(k in o)J=o[k],rt=a[k],o.hasOwnProperty(k)&&J!==rt&&(J!=null||rt!=null)&&(k==="selected"?e.selected=J&&typeof J!="function"&&typeof J!="symbol":Ce(e,n,k,J,o,rt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xt in a)J=a[Xt],a.hasOwnProperty(Xt)&&J!=null&&!o.hasOwnProperty(Xt)&&Ce(e,n,Xt,null,o,J);for(Z in o)if(J=o[Z],rt=a[Z],o.hasOwnProperty(Z)&&J!==rt&&(J!=null||rt!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,n));break;default:Ce(e,n,Z,J,o,rt)}return;default:if(Ko(n)){for(var we in a)J=a[we],a.hasOwnProperty(we)&&J!==void 0&&!o.hasOwnProperty(we)&&$f(e,n,we,void 0,o,J);for(ot in o)J=o[ot],rt=a[ot],!o.hasOwnProperty(ot)||J===rt||J===void 0&&rt===void 0||$f(e,n,ot,J,o,rt);return}}for(var K in a)J=a[K],a.hasOwnProperty(K)&&J!=null&&!o.hasOwnProperty(K)&&Ce(e,n,K,null,o,J);for(ut in o)J=o[ut],rt=a[ut],!o.hasOwnProperty(ut)||J===rt||J==null&&rt==null||Ce(e,n,ut,J,o,rt)}function Vm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],p=h.transferSize,S=h.initiatorType,O=h.duration;if(p&&O&&Vm(S)){for(S=0,O=h.responseEnd,o+=1;o<a.length;o++){var k=a[o],Z=k.startTime;if(Z>O)break;var ot=k.transferSize,ut=k.initiatorType;ot&&Vm(ut)&&(k=k.responseEnd,S+=ot*(k<O?1:(O-Z)/(k-Z)))}if(--o,n+=8*(p+S)/(h.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var td=null,ed=null;function su(e){return e.nodeType===9?e:e.ownerDocument}function Gm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qm(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function nd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var rd=null;function bb(){var e=window.event;return e&&e.type==="popstate"?e===rd?!1:(rd=e,!0):(rd=null,!1)}var Pm=typeof setTimeout=="function"?setTimeout:void 0,xb=typeof clearTimeout=="function"?clearTimeout:void 0,Km=typeof Promise=="function"?Promise:void 0,_b=typeof queueMicrotask=="function"?queueMicrotask:typeof Km<"u"?function(e){return Km.resolve(null).then(e).catch(Sb)}:Pm;function Sb(e){setTimeout(function(){throw e})}function wa(e){return e==="head"}function Wm(e,n){var a=n,o=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(h),xo(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Rl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Rl(a);for(var p=a.firstChild;p;){var S=p.nextSibling,O=p.nodeName;p[Kn]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=S}}else a==="body"&&Rl(e.ownerDocument.body);a=h}while(a);xo(n)}function Qm(e,n){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function id(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":id(a),js(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Cb(e,n,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Kn])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(p=e.getAttribute("rel"),p==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(p!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(p=e.getAttribute("src"),(p!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===p)return e}else return e;if(e=dr(e.nextSibling),e===null)break}return null}function wb(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=dr(e.nextSibling),e===null))return null;return e}function Zm(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=dr(e.nextSibling),e===null))return null;return e}function ad(e){return e.data==="$?"||e.data==="$~"}function sd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Tb(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function dr(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var od=null;function Im(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return dr(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function Jm(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function $m(e,n,a){switch(n=su(a),e){case"html":if(e=n.documentElement,!e)throw Error(i(452));return e;case"head":if(e=n.head,!e)throw Error(i(453));return e;case"body":if(e=n.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Rl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);js(e)}var gr=new Map,t0=new Set;function ou(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ai=gt.d;gt.d={f:Ob,r:Db,D:Eb,C:Mb,L:jb,m:Ab,X:zb,S:kb,M:Rb};function Ob(){var e=Ai.f(),n=Jc();return e||n}function Db(e){var n=_e(e);n!==null&&n.tag===5&&n.type==="form"?yp(n):Ai.r(e)}var yo=typeof document>"u"?null:document;function e0(e,n,a){var o=yo;if(o&&typeof n=="string"&&n){var h=an(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),t0.has(h)||(t0.add(h),e={rel:e,crossOrigin:a,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),yn(n,"link",e),Ye(n),o.head.appendChild(n)))}}function Eb(e){Ai.D(e),e0("dns-prefetch",e,null)}function Mb(e,n){Ai.C(e,n),e0("preconnect",e,n)}function jb(e,n,a){Ai.L(e,n,a);var o=yo;if(o&&e&&n){var h='link[rel="preload"][as="'+an(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+an(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+an(a.imageSizes)+'"]')):h+='[href="'+an(e)+'"]';var p=h;switch(n){case"style":p=vo(e);break;case"script":p=bo(e)}gr.has(p)||(e=_({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),gr.set(p,e),o.querySelector(h)!==null||n==="style"&&o.querySelector(Bl(p))||n==="script"&&o.querySelector(Ll(p))||(n=o.createElement("link"),yn(n,"link",e),Ye(n),o.head.appendChild(n)))}}function Ab(e,n){Ai.m(e,n);var a=yo;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+an(o)+'"][href="'+an(e)+'"]',p=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=bo(e)}if(!gr.has(p)&&(e=_({rel:"modulepreload",href:e},n),gr.set(p,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ll(p)))return}o=a.createElement("link"),yn(o,"link",e),Ye(o),a.head.appendChild(o)}}}function kb(e,n,a){Ai.S(e,n,a);var o=yo;if(o&&e){var h=Sn(o).hoistableStyles,p=vo(e);n=n||"default";var S=h.get(p);if(!S){var O={loading:0,preload:null};if(S=o.querySelector(Bl(p)))O.loading=5;else{e=_({rel:"stylesheet",href:e,"data-precedence":n},a),(a=gr.get(p))&&ld(e,a);var k=S=o.createElement("link");Ye(k),yn(k,"link",e),k._p=new Promise(function(Z,ot){k.onload=Z,k.onerror=ot}),k.addEventListener("load",function(){O.loading|=1}),k.addEventListener("error",function(){O.loading|=2}),O.loading|=4,lu(S,n,o)}S={type:"stylesheet",instance:S,count:1,state:O},h.set(p,S)}}}function zb(e,n){Ai.X(e,n);var a=yo;if(a&&e){var o=Sn(a).hoistableScripts,h=bo(e),p=o.get(h);p||(p=a.querySelector(Ll(h)),p||(e=_({src:e,async:!0},n),(n=gr.get(h))&&cd(e,n),p=a.createElement("script"),Ye(p),yn(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},o.set(h,p))}}function Rb(e,n){Ai.M(e,n);var a=yo;if(a&&e){var o=Sn(a).hoistableScripts,h=bo(e),p=o.get(h);p||(p=a.querySelector(Ll(h)),p||(e=_({src:e,async:!0,type:"module"},n),(n=gr.get(h))&&cd(e,n),p=a.createElement("script"),Ye(p),yn(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},o.set(h,p))}}function n0(e,n,a,o){var h=(h=Yt.current)?ou(h):null;if(!h)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=vo(a.href),a=Sn(h).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=vo(a.href);var p=Sn(h).hoistableStyles,S=p.get(e);if(S||(h=h.ownerDocument||h,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(e,S),(p=h.querySelector(Bl(e)))&&!p._p&&(S.instance=p,S.state.loading=5),gr.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},gr.set(e,a),p||Bb(h,e,a,S.state))),n&&o===null)throw Error(i(528,""));return S}if(n&&o!==null)throw Error(i(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=bo(a),a=Sn(h).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function vo(e){return'href="'+an(e)+'"'}function Bl(e){return'link[rel="stylesheet"]['+e+"]"}function r0(e){return _({},e,{"data-precedence":e.precedence,precedence:null})}function Bb(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),yn(n,"link",a),Ye(n),e.head.appendChild(n))}function bo(e){return'[src="'+an(e)+'"]'}function Ll(e){return"script[async]"+e}function i0(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+an(a.href)+'"]');if(o)return n.instance=o,Ye(o),o;var h=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Ye(o),yn(o,"style",h),lu(o,a.precedence,e),n.instance=o;case"stylesheet":h=vo(a.href);var p=e.querySelector(Bl(h));if(p)return n.state.loading|=4,n.instance=p,Ye(p),p;o=r0(a),(h=gr.get(h))&&ld(o,h),p=(e.ownerDocument||e).createElement("link"),Ye(p);var S=p;return S._p=new Promise(function(O,k){S.onload=O,S.onerror=k}),yn(p,"link",o),n.state.loading|=4,lu(p,a.precedence,e),n.instance=p;case"script":return p=bo(a.src),(h=e.querySelector(Ll(p)))?(n.instance=h,Ye(h),h):(o=a,(h=gr.get(p))&&(o=_({},a),cd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),Ye(h),yn(h,"link",o),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,lu(o,a.precedence,e));return n.instance}function lu(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,p=h,S=0;S<o.length;S++){var O=o[S];if(O.dataset.precedence===n)p=O;else if(p!==h)break}p?p.parentNode.insertBefore(e,p.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function ld(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function cd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var cu=null;function a0(e,n,a){if(cu===null){var o=new Map,h=cu=new Map;h.set(a,o)}else h=cu,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var p=a[h];if(!(p[Kn]||p[De]||e==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var S=p.getAttribute(n)||"";S=e+S;var O=o.get(S);O?O.push(p):o.set(S,[p])}}return o}function s0(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function Lb(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function o0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Nb(e,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=vo(o.href),p=n.querySelector(Bl(h));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=uu.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=p,Ye(p);return}p=n.ownerDocument||n,o=r0(o),(h=gr.get(h))&&ld(o,h),p=p.createElement("link"),Ye(p);var S=p;S._p=new Promise(function(O,k){S.onload=O,S.onerror=k}),yn(p,"link",o),a.instance=p}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=uu.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var ud=0;function Fb(e,n){return e.stylesheets&&e.count===0&&fu(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&fu(e,e.stylesheets),e.unsuspend){var p=e.unsuspend;e.unsuspend=null,p()}},6e4+n);0<e.imgBytes&&ud===0&&(ud=62500*vb());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&fu(e,e.stylesheets),e.unsuspend)){var p=e.unsuspend;e.unsuspend=null,p()}},(e.imgBytes>ud?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function uu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var hu=null;function fu(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,hu=new Map,n.forEach(Ub,e),hu=null,uu.call(e))}function Ub(e,n){if(!(n.state.loading&4)){var a=hu.get(e);if(a)var o=a.get(null);else{a=new Map,hu.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var S=h[p];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),o=S)}o&&a.set(null,o)}h=n.instance,S=h.getAttribute("data-precedence"),p=a.get(S)||o,p===o&&a.set(null,h),a.set(S,h),this.count++,o=uu.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),p?p.parentNode.insertBefore(h,p.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var Nl={$$typeof:bt,Provider:null,Consumer:null,_currentValue:_t,_currentValue2:_t,_threadCount:0};function Hb(e,n,a,o,h,p,S,O,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fr(0),this.hiddenUpdates=Fr(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function l0(e,n,a,o,h,p,S,O,k,Z,ot,ut){return e=new Hb(e,n,a,S,k,Z,ot,ut,O),n=1,p===!0&&(n|=24),p=Zn(3,null,null,n),e.current=p,p.stateNode=e,n=Xh(),n.refCount++,e.pooledCache=n,n.refCount++,p.memoizedState={element:o,isDehydrated:a,cache:n},Ph(p),e}function c0(e){return e?(e=Ln,e):Ln}function u0(e,n,a,o,h,p){h=c0(h),o.context===null?o.context=h:o.pendingContext=h,o=da(n),o.payload={element:a},p=p===void 0?null:p,p!==null&&(o.callback=p),a=ga(e,o,n),a!==null&&(Yn(a,e,n),pl(a,e,n))}function h0(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function hd(e,n){h0(e,n),(e=e.alternate)&&h0(e,n)}function f0(e){if(e.tag===13||e.tag===31){var n=Re(e,67108864);n!==null&&Yn(n,e,67108864),hd(e,67108864)}}function d0(e){if(e.tag===13||e.tag===31){var n=er();n=Yo(n);var a=Re(e,n);a!==null&&Yn(a,e,n),hd(e,n)}}var du=!0;function Yb(e,n,a,o){var h=tt.T;tt.T=null;var p=gt.p;try{gt.p=2,fd(e,n,a,o)}finally{gt.p=p,tt.T=h}}function Xb(e,n,a,o){var h=tt.T;tt.T=null;var p=gt.p;try{gt.p=8,fd(e,n,a,o)}finally{gt.p=p,tt.T=h}}function fd(e,n,a,o){if(du){var h=dd(o);if(h===null)Jf(e,n,o,gu,a),p0(e,o);else if(Gb(h,e,n,a,o))o.stopPropagation();else if(p0(e,o),n&4&&-1<Vb.indexOf(e)){for(;h!==null;){var p=_e(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var S=_r(p.pendingLanes);if(S!==0){var O=p;for(O.pendingLanes|=2,O.entangledLanes|=2;S;){var k=1<<31-Mt(S);O.entanglements[1]|=k,S&=~k}Zr(p),(pe&6)===0&&(Zc=_n()+500,Al(0))}}break;case 31:case 13:O=Re(p,2),O!==null&&Yn(O,p,2),Jc(),hd(p,2)}if(p=dd(o),p===null&&Jf(e,n,o,gu,a),p===h)break;h=p}h!==null&&o.stopPropagation()}else Jf(e,n,o,null,a)}}function dd(e){return e=zs(e),gd(e)}var gu=null;function gd(e){if(gu=null,e=Yr(e),e!==null){var n=l(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=c(n),e!==null)return e;e=null}else if(a===31){if(e=d(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return gu=e,null}function g0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Na()){case Br:return 2;case Lr:return 8;case Wi:case Fa:return 32;case Ds:return 268435456;default:return 32}default:return 32}}var pd=!1,Ta=null,Oa=null,Da=null,Fl=new Map,Ul=new Map,Ea=[],Vb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function p0(e,n){switch(e){case"focusin":case"focusout":Ta=null;break;case"dragenter":case"dragleave":Oa=null;break;case"mouseover":case"mouseout":Da=null;break;case"pointerover":case"pointerout":Fl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(n.pointerId)}}function Hl(e,n,a,o,h,p){return e===null||e.nativeEvent!==p?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:p,targetContainers:[h]},n!==null&&(n=_e(n),n!==null&&f0(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function Gb(e,n,a,o,h){switch(n){case"focusin":return Ta=Hl(Ta,e,n,a,o,h),!0;case"dragenter":return Oa=Hl(Oa,e,n,a,o,h),!0;case"mouseover":return Da=Hl(Da,e,n,a,o,h),!0;case"pointerover":var p=h.pointerId;return Fl.set(p,Hl(Fl.get(p)||null,e,n,a,o,h)),!0;case"gotpointercapture":return p=h.pointerId,Ul.set(p,Hl(Ul.get(p)||null,e,n,a,o,h)),!0}return!1}function m0(e){var n=Yr(e.target);if(n!==null){var a=l(n);if(a!==null){if(n=a.tag,n===13){if(n=c(a),n!==null){e.blockedOn=n,Ga(e.priority,function(){d0(a)});return}}else if(n===31){if(n=d(a),n!==null){e.blockedOn=n,Ga(e.priority,function(){d0(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pu(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=dd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);ar=o,a.target.dispatchEvent(o),ar=null}else return n=_e(a),n!==null&&f0(n),e.blockedOn=a,!1;n.shift()}return!0}function y0(e,n,a){pu(e)&&a.delete(n)}function qb(){pd=!1,Ta!==null&&pu(Ta)&&(Ta=null),Oa!==null&&pu(Oa)&&(Oa=null),Da!==null&&pu(Da)&&(Da=null),Fl.forEach(y0),Ul.forEach(y0)}function mu(e,n){e.blockedOn===n&&(e.blockedOn=null,pd||(pd=!0,f.unstable_scheduleCallback(f.unstable_NormalPriority,qb)))}var yu=null;function v0(e){yu!==e&&(yu=e,f.unstable_scheduleCallback(f.unstable_NormalPriority,function(){yu===e&&(yu=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],h=e[n+2];if(typeof o!="function"){if(gd(o||a)===null)continue;break}var p=_e(a);p!==null&&(e.splice(n,3),n-=3,df(p,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function xo(e){function n(k){return mu(k,e)}Ta!==null&&mu(Ta,e),Oa!==null&&mu(Oa,e),Da!==null&&mu(Da,e),Fl.forEach(n),Ul.forEach(n);for(var a=0;a<Ea.length;a++){var o=Ea[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Ea.length&&(a=Ea[0],a.blockedOn===null);)m0(a),a.blockedOn===null&&Ea.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],p=a[o+1],S=h[He]||null;if(typeof p=="function")S||v0(a);else if(S){var O=null;if(p&&p.hasAttribute("formAction")){if(h=p,S=p[He]||null)O=S.formAction;else if(gd(h)!==null)continue}else O=S.action;typeof O=="function"?a[o+1]=O:(a.splice(o,3),o-=3),v0(a)}}}function b0(){function e(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(S){return h=S})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function md(e){this._internalRoot=e}vu.prototype.render=md.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(i(409));var a=n.current,o=er();u0(a,o,e,n,null,null)},vu.prototype.unmount=md.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;u0(e.current,2,null,e,null,null),Jc(),n[Dn]=null}};function vu(e){this._internalRoot=e}vu.prototype.unstable_scheduleHydration=function(e){if(e){var n=Va();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Ea.length&&n!==0&&n<Ea[a].priority;a++);Ea.splice(a,0,e),a===0&&m0(e)}};var x0=t.version;if(x0!=="19.2.3")throw Error(i(527,x0,"19.2.3"));gt.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=y(n),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var Pb={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:tt,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bu.isDisabled&&bu.supportsFiber)try{Nr=bu.inject(Pb),hn=bu}catch{}}return Xl.createRoot=function(e,n){if(!s(e))throw Error(i(299));var a=!1,o="",h=Dp,p=Ep,S=Mp;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(p=n.onCaughtError),n.onRecoverableError!==void 0&&(S=n.onRecoverableError)),n=l0(e,1,!1,null,null,a,o,null,h,p,S,b0),e[Dn]=n.current,If(e),new md(n)},Xl.hydrateRoot=function(e,n,a){if(!s(e))throw Error(i(299));var o=!1,h="",p=Dp,S=Ep,O=Mp,k=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(O=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),n=l0(e,1,!0,n,a??null,o,h,k,p,S,O,b0),n.context=c0(null),a=n.current,o=er(),o=Yo(o),h=da(o),h.callback=null,ga(a,h,o),a=o,n.current.lanes=a,rr(n,a),Zr(n),e[Dn]=n.current,If(e),new vu(n)},Xl.version="19.2.3",Xl}var j0;function r1(){if(j0)return bd.exports;j0=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(t){console.error(t)}}return f(),bd.exports=n1(),bd.exports}var i1=r1();const A0=f=>{let t;const r=new Set,i=(y,b)=>{const _=typeof y=="function"?y(t):y;if(!Object.is(_,t)){const T=t;t=b??(typeof _!="object"||_===null)?_:Object.assign({},t,_),r.forEach(D=>D(t,T))}},s=()=>t,d={setState:i,getState:s,getInitialState:()=>m,subscribe:y=>(r.add(y),()=>r.delete(y))},m=t=f(i,s,d);return d},a1=(f=>f?A0(f):A0),s1=f=>f;function o1(f,t=s1){const r=Bi.useSyncExternalStore(f.subscribe,Bi.useCallback(()=>t(f.getState()),[f,t]),Bi.useCallback(()=>t(f.getInitialState()),[f,t]));return Bi.useDebugValue(r),r}const k0=f=>{const t=a1(f),r=i=>o1(t,i);return Object.assign(r,t),r},tg=(f=>f?k0(f):k0),vn=[];for(let f=0;f<256;++f)vn.push((f+256).toString(16).slice(1));function l1(f,t=0){return(vn[f[t+0]]+vn[f[t+1]]+vn[f[t+2]]+vn[f[t+3]]+"-"+vn[f[t+4]]+vn[f[t+5]]+"-"+vn[f[t+6]]+vn[f[t+7]]+"-"+vn[f[t+8]]+vn[f[t+9]]+"-"+vn[f[t+10]]+vn[f[t+11]]+vn[f[t+12]]+vn[f[t+13]]+vn[f[t+14]]+vn[f[t+15]]).toLowerCase()}let Cd;const c1=new Uint8Array(16);function u1(){if(!Cd){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Cd=crypto.getRandomValues.bind(crypto)}return Cd(c1)}const h1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),z0={randomUUID:h1};function wd(f,t,r){if(z0.randomUUID&&!f)return z0.randomUUID();f=f||{};const i=f.random??f.rng?.()??u1();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,l1(i)}const f1={show:!0,color:"#cccccc",thickness:1,highlight5:!0,highlight10:!0,highlight5Color:"#999999",highlight10Color:"#666666"},Dy={width:50,height:50,gaugeH:1,gaugeV:1,gridLines:f1},Td={darkMode:!1,units:"metric",handedness:"right",defaultGridWidth:50,defaultGridHeight:50,defaultGaugeH:1,defaultGaugeV:1};function d1(f,t){const r=[];for(let i=0;i<t;i++){r[i]=[];for(let s=0;s<f;s++)r[i][s]={colorId:null,symbolId:null}}return{cells:r}}function g1(f,t,r,i=Dy){const s=new Date,l={id:f,name:t,chartType:r,createdAt:s,updatedAt:s,settings:i,palette:[]};return r==="freeform"?l.freeform={layers:[{id:"layer-1",name:"Layer 1",visible:!0,locked:!1,symbols:[]}],activeLayerId:"layer-1"}:l.grid=d1(i.width,i.height),l}var qu={exports:{}},p1=qu.exports,R0;function m1(){return R0||(R0=1,(function(f,t){(function(r,i){f.exports=i()})(p1,function(){var r=function(u,g){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,x){v.__proto__=x}||function(v,x){for(var C in x)Object.prototype.hasOwnProperty.call(x,C)&&(v[C]=x[C])})(u,g)},i=function(){return(i=Object.assign||function(u){for(var g,v=1,x=arguments.length;v<x;v++)for(var C in g=arguments[v])Object.prototype.hasOwnProperty.call(g,C)&&(u[C]=g[C]);return u}).apply(this,arguments)};function s(u,g,v){for(var x,C=0,w=g.length;C<w;C++)!x&&C in g||((x=x||Array.prototype.slice.call(g,0,C))[C]=g[C]);return u.concat(x||Array.prototype.slice.call(g))}var l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Wb,c=Object.keys,d=Array.isArray;function m(u,g){return typeof g!="object"||c(g).forEach(function(v){u[v]=g[v]}),u}typeof Promise>"u"||l.Promise||(l.Promise=Promise);var y=Object.getPrototypeOf,b={}.hasOwnProperty;function _(u,g){return b.call(u,g)}function T(u,g){typeof g=="function"&&(g=g(y(u))),(typeof Reflect>"u"?c:Reflect.ownKeys)(g).forEach(function(v){M(u,v,g[v])})}var D=Object.defineProperty;function M(u,g,v,x){D(u,g,m(v&&_(v,"get")&&typeof v.get=="function"?{get:v.get,set:v.set,configurable:!0}:{value:v,configurable:!0,writable:!0},x))}function B(u){return{from:function(g){return u.prototype=Object.create(g.prototype),M(u.prototype,"constructor",u),{extend:T.bind(null,u.prototype)}}}}var $=Object.getOwnPropertyDescriptor,nt=[].slice;function ht(u,g,v){return nt.call(u,g,v)}function bt(u,g){return g(u)}function pt(u){if(!u)throw new Error("Assertion Failed")}function at(u){l.setImmediate?setImmediate(u):setTimeout(u,0)}function ft(u,g){if(typeof g=="string"&&_(u,g))return u[g];if(!g)return u;if(typeof g!="string"){for(var v=[],x=0,C=g.length;x<C;++x){var w=ft(u,g[x]);v.push(w)}return v}var E=g.indexOf(".");if(E!==-1){var j=u[g.substr(0,E)];return j==null?void 0:ft(j,g.substr(E+1))}}function dt(u,g,v){if(u&&g!==void 0&&!("isFrozen"in Object&&Object.isFrozen(u)))if(typeof g!="string"&&"length"in g){pt(typeof v!="string"&&"length"in v);for(var x=0,C=g.length;x<C;++x)dt(u,g[x],v[x])}else{var w,E,j=g.indexOf(".");j!==-1?(w=g.substr(0,j),(E=g.substr(j+1))===""?v===void 0?d(u)&&!isNaN(parseInt(w))?u.splice(w,1):delete u[w]:u[w]=v:dt(j=!(j=u[w])||!_(u,w)?u[w]={}:j,E,v)):v===void 0?d(u)&&!isNaN(parseInt(g))?u.splice(g,1):delete u[g]:u[g]=v}}function Ot(u){var g,v={};for(g in u)_(u,g)&&(v[g]=u[g]);return v}var Rt=[].concat;function Vt(u){return Rt.apply([],u)}var Br="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Vt([8,16,32,64].map(function(u){return["Int","Uint","Float"].map(function(g){return g+u+"Array"})}))).filter(function(u){return l[u]}),Qt=new Set(Br.map(function(u){return l[u]})),Ut=null;function Pt(u){return Ut=new WeakMap,u=(function g(v){if(!v||typeof v!="object")return v;var x=Ut.get(v);if(x)return x;if(d(v)){x=[],Ut.set(v,x);for(var C=0,w=v.length;C<w;++C)x.push(g(v[C]))}else if(Qt.has(v.constructor))x=v;else{var E,j=y(v);for(E in x=j===Object.prototype?{}:Object.create(j),Ut.set(v,x),v)_(v,E)&&(x[E]=g(v[E]))}return x})(u),Ut=null,u}var Kt={}.toString;function re(u){return Kt.call(u).slice(8,-1)}var tt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",gt=typeof tt=="symbol"?function(u){var g;return u!=null&&(g=u[tt])&&g.apply(u)}:function(){return null};function _t(u,g){return g=u.indexOf(g),0<=g&&u.splice(g,1),0<=g}var zt={};function Lt(u){var g,v,x,C;if(arguments.length===1){if(d(u))return u.slice();if(this===zt&&typeof u=="string")return[u];if(C=gt(u)){for(v=[];!(x=C.next()).done;)v.push(x.value);return v}if(u==null)return[u];if(typeof(g=u.length)!="number")return[u];for(v=new Array(g);g--;)v[g]=u[g];return v}for(g=arguments.length,v=new Array(g);g--;)v[g]=arguments[g];return v}var R=typeof Symbol<"u"?function(u){return u[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Na=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Mn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Na),st={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function mt(u,g){this.name=u,this.message=g}function Et(u,g){return u+". Errors: "+Object.keys(g).map(function(v){return g[v].toString()}).filter(function(v,x,C){return C.indexOf(v)===x}).join(`
`)}function Ht(u,g,v,x){this.failures=g,this.failedKeys=x,this.successCount=v,this.message=Et(u,g)}function Yt(u,g){this.name="BulkError",this.failures=Object.keys(g).map(function(v){return g[v]}),this.failuresByPos=g,this.message=Et(u,this.failures)}B(mt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),B(Ht).from(mt),B(Yt).from(mt);var te=Mn.reduce(function(u,g){return u[g]=g+"Error",u},{}),tn=mt,Tt=Mn.reduce(function(u,g){var v=g+"Error";function x(C,w){this.name=v,C?typeof C=="string"?(this.message="".concat(C).concat(w?`
 `+w:""),this.inner=w||null):typeof C=="object"&&(this.message="".concat(C.name," ").concat(C.message),this.inner=C):(this.message=st[g]||v,this.inner=null)}return B(x).from(tn),u[g]=x,u},{});Tt.Syntax=SyntaxError,Tt.Type=TypeError,Tt.Range=RangeError;var un=Na.reduce(function(u,g){return u[g+"Error"]=Tt[g],u},{}),ei=Mn.reduce(function(u,g){return["Syntax","Type","Range"].indexOf(g)===-1&&(u[g+"Error"]=Tt[g]),u},{});function he(){}function Ki(u){return u}function ni(u,g){return u==null||u===Ki?g:function(v){return g(u(v))}}function xr(u,g){return function(){u.apply(this,arguments),g.apply(this,arguments)}}function Fo(u,g){return u===he?g:function(){var v=u.apply(this,arguments);v!==void 0&&(arguments[0]=v);var x=this.onsuccess,C=this.onerror;this.onsuccess=null,this.onerror=null;var w=g.apply(this,arguments);return x&&(this.onsuccess=this.onsuccess?xr(x,this.onsuccess):x),C&&(this.onerror=this.onerror?xr(C,this.onerror):C),w!==void 0?w:v}}function Sh(u,g){return u===he?g:function(){u.apply(this,arguments);var v=this.onsuccess,x=this.onerror;this.onsuccess=this.onerror=null,g.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?xr(v,this.onsuccess):v),x&&(this.onerror=this.onerror?xr(x,this.onerror):x)}}function ac(u,g){return u===he?g:function(v){var x=u.apply(this,arguments);m(v,x);var C=this.onsuccess,w=this.onerror;return this.onsuccess=null,this.onerror=null,v=g.apply(this,arguments),C&&(this.onsuccess=this.onsuccess?xr(C,this.onsuccess):C),w&&(this.onerror=this.onerror?xr(w,this.onerror):w),x===void 0?v===void 0?void 0:v:m(x,v)}}function Uo(u,g){return u===he?g:function(){return g.apply(this,arguments)!==!1&&u.apply(this,arguments)}}function Ba(u,g){return u===he?g:function(){var v=u.apply(this,arguments);if(v&&typeof v.then=="function"){for(var x=this,C=arguments.length,w=new Array(C);C--;)w[C]=arguments[C];return v.then(function(){return g.apply(x,w)})}return g.apply(this,arguments)}}ei.ModifyError=Ht,ei.DexieError=mt,ei.BulkError=Yt;var Rn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function sc(u){Rn=u}var La={},_n=100,Br=typeof Promise>"u"?[]:(function(){var u=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[u,y(u),u];var g=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[g,y(g),u]})(),Na=Br[0],Mn=Br[1],Br=Br[2],Mn=Mn&&Mn.then,Lr=Na&&Na.constructor,Wi=!!Br,Fa=function(u,g){Ua.push([u,g]),Es&&(queueMicrotask(oc),Es=!1)},Ds=!0,Es=!0,ri=[],Nr=[],hn=Ki,fn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:he,pgp:!1,env:{},finalize:he},Mt=fn,Ua=[],ii=0,Ms=[];function Dt(u){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var g=this._PSD=Mt;if(typeof u!="function"){if(u!==La)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&_r(this,this._value))}this._state=null,this._value=null,++g.ref,(function v(x,C){try{C(function(w){if(x._state===null){if(w===x)throw new TypeError("A promise cannot be resolved with itself.");var E=x._lib&&Fr();w&&typeof w.then=="function"?v(x,function(j,L){w instanceof Dt?w._then(j,L):w.then(j,L)}):(x._state=!0,x._value=w,Ya(x)),E&&rr()}},_r.bind(null,x))}catch(w){_r(x,w)}})(this,u)}var Qi={get:function(){var u=Mt,g=Ga;function v(x,C){var w=this,E=!u.global&&(u!==Mt||g!==Ga),j=E&&!Dn(),L=new Dt(function(N,G){ai(w,new Ha(js(x,u,E,j),js(C,u,E,j),N,G,u))});return this._consoleTask&&(L._consoleTask=this._consoleTask),L}return v.prototype=La,v},set:function(u){M(this,"then",u&&u.prototype===La?Qi:{get:function(){return u},set:Qi.set})}};function Ha(u,g,v,x,C){this.onFulfilled=typeof u=="function"?u:null,this.onRejected=typeof g=="function"?g:null,this.resolve=v,this.reject=x,this.psd=C}function _r(u,g){var v,x;Nr.push(g),u._state===null&&(v=u._lib&&Fr(),g=hn(g),u._state=!1,u._value=g,x=u,ri.some(function(C){return C._value===x._value})||ri.push(x),Ya(u),v&&rr())}function Ya(u){var g=u._listeners;u._listeners=[];for(var v=0,x=g.length;v<x;++v)ai(u,g[v]);var C=u._PSD;--C.ref||C.finalize(),ii===0&&(++ii,Fa(function(){--ii==0&&Ho()},[]))}function ai(u,g){if(u._state!==null){var v=u._state?g.onFulfilled:g.onRejected;if(v===null)return(u._state?g.resolve:g.reject)(u._value);++g.psd.ref,++ii,Fa(Ch,[v,u,g])}else u._listeners.push(g)}function Ch(u,g,v){try{var x,C=g._value;!g._state&&Nr.length&&(Nr=[]),x=Rn&&g._consoleTask?g._consoleTask.run(function(){return u(C)}):u(C),g._state||Nr.indexOf(C)!==-1||(function(w){for(var E=ri.length;E;)if(ri[--E]._value===w._value)return ri.splice(E,1)})(g),v.resolve(x)}catch(w){v.reject(w)}finally{--ii==0&&Ho(),--v.psd.ref||v.psd.finalize()}}function oc(){Kn(fn,function(){Fr()&&rr()})}function Fr(){var u=Ds;return Es=Ds=!1,u}function rr(){var u,g,v;do for(;0<Ua.length;)for(u=Ua,Ua=[],v=u.length,g=0;g<v;++g){var x=u[g];x[0].apply(null,x[1])}while(0<Ua.length);Es=Ds=!0}function Ho(){var u=ri;ri=[],u.forEach(function(x){x._PSD.onunhandled.call(null,x._value,x)});for(var g=Ms.slice(0),v=g.length;v;)g[--v]()}function Xa(u){return new Dt(La,!1,u)}function Te(u,g){var v=Mt;return function(){var x=Fr(),C=Mt;try{return Hr(v,!0),u.apply(this,arguments)}catch(w){g&&g(w)}finally{Hr(C,!1),x&&rr()}}}T(Dt.prototype,{then:Qi,_then:function(u,g){ai(this,new Ha(null,null,u,g,Mt))},catch:function(u){if(arguments.length===1)return this.then(null,u);var g=u,v=arguments[1];return typeof g=="function"?this.then(null,function(x){return(x instanceof g?v:Xa)(x)}):this.then(null,function(x){return(x&&x.name===g?v:Xa)(x)})},finally:function(u){return this.then(function(g){return Dt.resolve(u()).then(function(){return g})},function(g){return Dt.resolve(u()).then(function(){return Xa(g)})})},timeout:function(u,g){var v=this;return u<1/0?new Dt(function(x,C){var w=setTimeout(function(){return C(new Tt.Timeout(g))},u);v.then(x,C).finally(clearTimeout.bind(null,w))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&M(Dt.prototype,Symbol.toStringTag,"Dexie.Promise"),fn.env=Xo(),T(Dt,{all:function(){var u=Lt.apply(null,arguments).map(Ii);return new Dt(function(g,v){u.length===0&&g([]);var x=u.length;u.forEach(function(C,w){return Dt.resolve(C).then(function(E){u[w]=E,--x||g(u)},v)})})},resolve:function(u){return u instanceof Dt?u:u&&typeof u.then=="function"?new Dt(function(g,v){u.then(g,v)}):new Dt(La,!0,u)},reject:Xa,race:function(){var u=Lt.apply(null,arguments).map(Ii);return new Dt(function(g,v){u.map(function(x){return Dt.resolve(x).then(g,v)})})},PSD:{get:function(){return Mt},set:function(u){return Mt=u}},totalEchoes:{get:function(){return Ga}},newPSD:De,usePSD:Kn,scheduler:{get:function(){return Fa},set:function(u){Fa=u}},rejectionMapper:{get:function(){return hn},set:function(u){hn=u}},follow:function(u,g){return new Dt(function(v,x){return De(function(C,w){var E=Mt;E.unhandleds=[],E.onunhandled=w,E.finalize=xr(function(){var j,L=this;j=function(){L.unhandleds.length===0?C():w(L.unhandleds[0])},Ms.push(function N(){j(),Ms.splice(Ms.indexOf(N),1)}),++ii,Fa(function(){--ii==0&&Ho()},[])},E.finalize),u()},g,v,x)})}}),Lr&&(Lr.allSettled&&M(Dt,"allSettled",function(){var u=Lt.apply(null,arguments).map(Ii);return new Dt(function(g){u.length===0&&g([]);var v=u.length,x=new Array(v);u.forEach(function(C,w){return Dt.resolve(C).then(function(E){return x[w]={status:"fulfilled",value:E}},function(E){return x[w]={status:"rejected",reason:E}}).then(function(){return--v||g(x)})})})}),Lr.any&&typeof AggregateError<"u"&&M(Dt,"any",function(){var u=Lt.apply(null,arguments).map(Ii);return new Dt(function(g,v){u.length===0&&v(new AggregateError([]));var x=u.length,C=new Array(x);u.forEach(function(w,E){return Dt.resolve(w).then(function(j){return g(j)},function(j){C[E]=j,--x||v(new AggregateError(C))})})})}),Lr.withResolvers&&(Dt.withResolvers=Lr.withResolvers));var Ue={awaits:0,echoes:0,id:0},Yo=0,Zi=[],Va=0,Ga=0,Ur=0;function De(u,g,v,x){var C=Mt,w=Object.create(C);return w.parent=C,w.ref=0,w.global=!1,w.id=++Ur,fn.env,w.env=Wi?{Promise:Dt,PromiseProp:{value:Dt,configurable:!0,writable:!0},all:Dt.all,race:Dt.race,allSettled:Dt.allSettled,any:Dt.any,resolve:Dt.resolve,reject:Dt.reject}:{},g&&m(w,g),++C.ref,w.finalize=function(){--this.parent.ref||this.parent.finalize()},x=Kn(w,u,v,x),w.ref===0&&w.finalize(),x}function He(){return Ue.id||(Ue.id=++Yo),++Ue.awaits,Ue.echoes+=_n,Ue.id}function Dn(){return!!Ue.awaits&&(--Ue.awaits==0&&(Ue.id=0),Ue.echoes=Ue.awaits*_n,!0)}function Ii(u){return Ue.echoes&&u&&u.constructor===Lr?(He(),u.then(function(g){return Dn(),g},function(g){return Dn(),_e(g)})):u}function wh(){var u=Zi[Zi.length-1];Zi.pop(),Hr(u,!1)}function Hr(u,g){var v,x=Mt;(g?!Ue.echoes||Va++&&u===Mt:!Va||--Va&&u===Mt)||queueMicrotask(g?(function(C){++Ga,Ue.echoes&&--Ue.echoes!=0||(Ue.echoes=Ue.awaits=Ue.id=0),Zi.push(Mt),Hr(C,!0)}).bind(null,u):wh),u!==Mt&&(Mt=u,x===fn&&(fn.env=Xo()),Wi&&(v=fn.env.Promise,g=u.env,(x.global||u.global)&&(Object.defineProperty(l,"Promise",g.PromiseProp),v.all=g.all,v.race=g.race,v.resolve=g.resolve,v.reject=g.reject,g.allSettled&&(v.allSettled=g.allSettled),g.any&&(v.any=g.any))))}function Xo(){var u=l.Promise;return Wi?{Promise:u,PromiseProp:Object.getOwnPropertyDescriptor(l,"Promise"),all:u.all,race:u.race,allSettled:u.allSettled,any:u.any,resolve:u.resolve,reject:u.reject}:{}}function Kn(u,g,v,x,C){var w=Mt;try{return Hr(u,!0),g(v,x,C)}finally{Hr(w,!1)}}function js(u,g,v,x){return typeof u!="function"?u:function(){var C=Mt;v&&He(),Hr(g,!0);try{return u.apply(this,arguments)}finally{Hr(C,!1),x&&queueMicrotask(Dn)}}}function Yr(u){Promise===Lr&&Ue.echoes===0?Va===0?u():enqueueNativeMicroTask(u):setTimeout(u,0)}(""+Mn).indexOf("[native code]")===-1&&(He=Dn=he);var _e=Dt.reject,Wn="",Sn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ye="String expected.",si=[],qa="__dbnames",Sr="readonly",Xr="readwrite";function oi(u,g){return u?g?function(){return u.apply(this,arguments)&&g.apply(this,arguments)}:u:g}var Vo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Pa(u){return typeof u!="string"||/\./.test(u)?function(g){return g}:function(g){return g[u]===void 0&&u in g&&delete(g=Pt(g))[u],g}}function lc(){throw Tt.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ee(u,g){try{var v=Ka(u),x=Ka(g);if(v!==x)return v==="Array"?1:x==="Array"?-1:v==="binary"?1:x==="binary"?-1:v==="string"?1:x==="string"?-1:v==="Date"?1:x!=="Date"?NaN:-1;switch(v){case"number":case"Date":case"string":return g<u?1:u<g?-1:0;case"binary":return(function(C,w){for(var E=C.length,j=w.length,L=E<j?E:j,N=0;N<L;++N)if(C[N]!==w[N])return C[N]<w[N]?-1:1;return E===j?0:E<j?-1:1})(ir(u),ir(g));case"Array":return(function(C,w){for(var E=C.length,j=w.length,L=E<j?E:j,N=0;N<L;++N){var G=ee(C[N],w[N]);if(G!==0)return G}return E===j?0:E<j?-1:1})(u,g)}}catch{}return NaN}function Ka(u){var g=typeof u;return g!="object"?g:ArrayBuffer.isView(u)?"binary":(u=re(u),u==="ArrayBuffer"?"binary":u)}function ir(u){return u instanceof Uint8Array?u:ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):new Uint8Array(u)}function dn(u,g,v){var x=u.schema.yProps;return x?(g&&0<v.numFailures&&(g=g.filter(function(C,w){return!v.failures[w]})),Promise.all(x.map(function(C){return C=C.updatesTable,g?u.db.table(C).where("k").anyOf(g).delete():u.db.table(C).clear()})).then(function(){return v})):v}var Ji=(cc.prototype.execute=function(u){var g=this["@@propmod"];if(g.add!==void 0){var v=g.add;if(d(v))return s(s([],d(u)?u:[],!0),v).sort();if(typeof v=="number")return(Number(u)||0)+v;if(typeof v=="bigint")try{return BigInt(u)+v}catch{return BigInt(0)+v}throw new TypeError("Invalid term ".concat(v))}if(g.remove!==void 0){var x=g.remove;if(d(x))return d(u)?u.filter(function(C){return!x.includes(C)}).sort():[];if(typeof x=="number")return Number(u)-x;if(typeof x=="bigint")try{return BigInt(u)-x}catch{return BigInt(0)-x}throw new TypeError("Invalid subtrahend ".concat(x))}return v=(v=g.replacePrefix)===null||v===void 0?void 0:v[0],v&&typeof u=="string"&&u.startsWith(v)?g.replacePrefix[1]+u.substring(v.length):u},cc);function cc(u){this["@@propmod"]=u}function As(u,g){for(var v=c(g),x=v.length,C=!1,w=0;w<x;++w){var E=v[w],j=g[E],L=ft(u,E);j instanceof Ji?(dt(u,E,j.execute(L)),C=!0):L!==j&&(dt(u,E,j),C=!0)}return C}var Go=(ge.prototype._trans=function(u,g,v){var x=this._tx||Mt.trans,C=this.name,w=Rn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(u==="readonly"?"read":"write"," ").concat(this.name));function E(N,G,z){if(!z.schema[C])throw new Tt.NotFound("Table "+C+" not part of transaction");return g(z.idbtrans,z)}var j=Fr();try{var L=x&&x.db._novip===this.db._novip?x===Mt.trans?x._promise(u,E,v):De(function(){return x._promise(u,E,v)},{trans:x,transless:Mt.transless||Mt}):(function N(G,z,P,F){if(G.idbdb&&(G._state.openComplete||Mt.letThrough||G._vip)){var X=G._createTransaction(z,P,G._dbSchema);try{X.create(),G._state.PR1398_maxLoop=3}catch(V){return V.name===te.InvalidState&&G.isOpen()&&0<--G._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),G.close({disableAutoOpen:!1}),G.open().then(function(){return N(G,z,P,F)})):_e(V)}return X._promise(z,function(V,q){return De(function(){return Mt.trans=X,F(V,q,X)})}).then(function(V){if(z==="readwrite")try{X.idbtrans.commit()}catch{}return z==="readonly"?V:X._completion.then(function(){return V})})}if(G._state.openComplete)return _e(new Tt.DatabaseClosed(G._state.dbOpenError));if(!G._state.isBeingOpened){if(!G._state.autoOpen)return _e(new Tt.DatabaseClosed);G.open().catch(he)}return G._state.dbReadyPromise.then(function(){return N(G,z,P,F)})})(this.db,u,[this.name],E);return w&&(L._consoleTask=w,L=L.catch(function(N){return console.trace(N),_e(N)})),L}finally{j&&rr()}},ge.prototype.get=function(u,g){var v=this;return u&&u.constructor===Object?this.where(u).first(g):u==null?_e(new Tt.Type("Invalid argument to Table.get()")):this._trans("readonly",function(x){return v.core.get({trans:x,key:u}).then(function(C){return v.hook.reading.fire(C)})}).then(g)},ge.prototype.where=function(u){if(typeof u=="string")return new this.db.WhereClause(this,u);if(d(u))return new this.db.WhereClause(this,"[".concat(u.join("+"),"]"));var g=c(u);if(g.length===1)return this.where(g[0]).equals(u[g[0]]);var v=this.schema.indexes.concat(this.schema.primKey).filter(function(j){if(j.compound&&g.every(function(N){return 0<=j.keyPath.indexOf(N)})){for(var L=0;L<g.length;++L)if(g.indexOf(j.keyPath[L])===-1)return!1;return!0}return!1}).sort(function(j,L){return j.keyPath.length-L.keyPath.length})[0];if(v&&this.db._maxKey!==Wn){var w=v.keyPath.slice(0,g.length);return this.where(w).equals(w.map(function(L){return u[L]}))}!v&&Rn&&console.warn("The query ".concat(JSON.stringify(u)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(g.join("+"),"]"));var x=this.schema.idxByName;function C(j,L){return ee(j,L)===0}var E=g.reduce(function(z,L){var N=z[0],G=z[1],z=x[L],P=u[L];return[N||z,N||!z?oi(G,z&&z.multi?function(F){return F=ft(F,L),d(F)&&F.some(function(X){return C(P,X)})}:function(F){return C(P,ft(F,L))}):G]},[null,null]),w=E[0],E=E[1];return w?this.where(w.name).equals(u[w.keyPath]).filter(E):v?this.filter(E):this.where(g).equals("")},ge.prototype.filter=function(u){return this.toCollection().and(u)},ge.prototype.count=function(u){return this.toCollection().count(u)},ge.prototype.offset=function(u){return this.toCollection().offset(u)},ge.prototype.limit=function(u){return this.toCollection().limit(u)},ge.prototype.each=function(u){return this.toCollection().each(u)},ge.prototype.toArray=function(u){return this.toCollection().toArray(u)},ge.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ge.prototype.orderBy=function(u){return new this.db.Collection(new this.db.WhereClause(this,d(u)?"[".concat(u.join("+"),"]"):u))},ge.prototype.reverse=function(){return this.toCollection().reverse()},ge.prototype.mapToClass=function(u){var g,v=this.db,x=this.name;function C(){return g!==null&&g.apply(this,arguments)||this}(this.schema.mappedClass=u).prototype instanceof lc&&((function(L,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function G(){this.constructor=L}r(L,N),L.prototype=N===null?Object.create(N):(G.prototype=N.prototype,new G)})(C,g=u),Object.defineProperty(C.prototype,"db",{get:function(){return v},enumerable:!1,configurable:!0}),C.prototype.table=function(){return x},u=C);for(var w=new Set,E=u.prototype;E;E=y(E))Object.getOwnPropertyNames(E).forEach(function(L){return w.add(L)});function j(L){if(!L)return L;var N,G=Object.create(u.prototype);for(N in L)if(!w.has(N))try{G[N]=L[N]}catch{}return G}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=j,this.hook("reading",j),u},ge.prototype.defineClass=function(){return this.mapToClass(function(u){m(this,u)})},ge.prototype.add=function(u,g){var v=this,x=this.schema.primKey,C=x.auto,w=x.keyPath,E=u;return w&&C&&(E=Pa(w)(u)),this._trans("readwrite",function(j){return v.core.mutate({trans:j,type:"add",keys:g!=null?[g]:null,values:[E]})}).then(function(j){return j.numFailures?Dt.reject(j.failures[0]):j.lastResult}).then(function(j){if(w)try{dt(u,w,j)}catch{}return j})},ge.prototype.upsert=function(u,g){var v=this,x=this.schema.primKey.keyPath;return this._trans("readwrite",function(C){return v.core.get({trans:C,key:u}).then(function(w){var E=w??{};return As(E,g),x&&dt(E,x,u),v.core.mutate({trans:C,type:"put",values:[E],keys:[u],upsert:!0,updates:{keys:[u],changeSpecs:[g]}}).then(function(j){return j.numFailures?Dt.reject(j.failures[0]):!!w})})})},ge.prototype.update=function(u,g){return typeof u!="object"||d(u)?this.where(":id").equals(u).modify(g):(u=ft(u,this.schema.primKey.keyPath),u===void 0?_e(new Tt.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(u).modify(g))},ge.prototype.put=function(u,g){var v=this,x=this.schema.primKey,C=x.auto,w=x.keyPath,E=u;return w&&C&&(E=Pa(w)(u)),this._trans("readwrite",function(j){return v.core.mutate({trans:j,type:"put",values:[E],keys:g!=null?[g]:null})}).then(function(j){return j.numFailures?Dt.reject(j.failures[0]):j.lastResult}).then(function(j){if(w)try{dt(u,w,j)}catch{}return j})},ge.prototype.delete=function(u){var g=this;return this._trans("readwrite",function(v){return g.core.mutate({trans:v,type:"delete",keys:[u]}).then(function(x){return dn(g,[u],x)}).then(function(x){return x.numFailures?Dt.reject(x.failures[0]):void 0})})},ge.prototype.clear=function(){var u=this;return this._trans("readwrite",function(g){return u.core.mutate({trans:g,type:"deleteRange",range:Vo}).then(function(v){return dn(u,null,v)})}).then(function(g){return g.numFailures?Dt.reject(g.failures[0]):void 0})},ge.prototype.bulkGet=function(u){var g=this;return this._trans("readonly",function(v){return g.core.getMany({keys:u,trans:v}).then(function(x){return x.map(function(C){return g.hook.reading.fire(C)})})})},ge.prototype.bulkAdd=function(u,g,v){var x=this,C=Array.isArray(g)?g:void 0,w=(v=v||(C?void 0:g))?v.allKeys:void 0;return this._trans("readwrite",function(E){var N=x.schema.primKey,j=N.auto,N=N.keyPath;if(N&&C)throw new Tt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(C&&C.length!==u.length)throw new Tt.InvalidArgument("Arguments objects and keys must have the same length");var L=u.length,N=N&&j?u.map(Pa(N)):u;return x.core.mutate({trans:E,type:"add",keys:C,values:N,wantResults:w}).then(function(X){var z=X.numFailures,P=X.results,F=X.lastResult,X=X.failures;if(z===0)return w?P:F;throw new Yt("".concat(x.name,".bulkAdd(): ").concat(z," of ").concat(L," operations failed"),X)})})},ge.prototype.bulkPut=function(u,g,v){var x=this,C=Array.isArray(g)?g:void 0,w=(v=v||(C?void 0:g))?v.allKeys:void 0;return this._trans("readwrite",function(E){var N=x.schema.primKey,j=N.auto,N=N.keyPath;if(N&&C)throw new Tt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(C&&C.length!==u.length)throw new Tt.InvalidArgument("Arguments objects and keys must have the same length");var L=u.length,N=N&&j?u.map(Pa(N)):u;return x.core.mutate({trans:E,type:"put",keys:C,values:N,wantResults:w}).then(function(X){var z=X.numFailures,P=X.results,F=X.lastResult,X=X.failures;if(z===0)return w?P:F;throw new Yt("".concat(x.name,".bulkPut(): ").concat(z," of ").concat(L," operations failed"),X)})})},ge.prototype.bulkUpdate=function(u){var g=this,v=this.core,x=u.map(function(E){return E.key}),C=u.map(function(E){return E.changes}),w=[];return this._trans("readwrite",function(E){return v.getMany({trans:E,keys:x,cache:"clone"}).then(function(j){var L=[],N=[];u.forEach(function(z,P){var F=z.key,X=z.changes,V=j[P];if(V){for(var q=0,W=Object.keys(X);q<W.length;q++){var I=W[q],it=X[I];if(I===g.schema.primKey.keyPath){if(ee(it,F)!==0)throw new Tt.Constraint("Cannot update primary key in bulkUpdate()")}else dt(V,I,it)}w.push(P),L.push(F),N.push(V)}});var G=L.length;return v.mutate({trans:E,type:"put",keys:L,values:N,updates:{keys:x,changeSpecs:C}}).then(function(z){var P=z.numFailures,F=z.failures;if(P===0)return G;for(var X=0,V=Object.keys(F);X<V.length;X++){var q,W=V[X],I=w[Number(W)];I!=null&&(q=F[W],delete F[W],F[I]=q)}throw new Yt("".concat(g.name,".bulkUpdate(): ").concat(P," of ").concat(G," operations failed"),F)})})})},ge.prototype.bulkDelete=function(u){var g=this,v=u.length;return this._trans("readwrite",function(x){return g.core.mutate({trans:x,type:"delete",keys:u}).then(function(C){return dn(g,u,C)})}).then(function(E){var C=E.numFailures,w=E.lastResult,E=E.failures;if(C===0)return w;throw new Yt("".concat(g.name,".bulkDelete(): ").concat(C," of ").concat(v," operations failed"),E)})},ge);function ge(){}function Wa(u){function g(E,j){if(j){for(var L=arguments.length,N=new Array(L-1);--L;)N[L-1]=arguments[L];return v[E].subscribe.apply(null,N),u}if(typeof E=="string")return v[E]}var v={};g.addEventType=w;for(var x=1,C=arguments.length;x<C;++x)w(arguments[x]);return g;function w(E,j,L){if(typeof E!="object"){var N;j=j||Uo;var G={subscribers:[],fire:L=L||he,subscribe:function(z){G.subscribers.indexOf(z)===-1&&(G.subscribers.push(z),G.fire=j(G.fire,z))},unsubscribe:function(z){G.subscribers=G.subscribers.filter(function(P){return P!==z}),G.fire=G.subscribers.reduce(j,L)}};return v[E]=g[E]=G}c(N=E).forEach(function(z){var P=N[z];if(d(P))w(z,N[z][0],N[z][1]);else{if(P!=="asap")throw new Tt.InvalidArgument("Invalid event config");var F=w(z,Ki,function(){for(var X=arguments.length,V=new Array(X);X--;)V[X]=arguments[X];F.subscribers.forEach(function(q){at(function(){q.apply(null,V)})})})}})}}function an(u,g){return B(g).from({prototype:u}),g}function Vr(u,g){return!(u.filter||u.algorithm||u.or)&&(g?u.justLimit:!u.replayFilter)}function ks(u,g){u.filter=oi(u.filter,g)}function Qa(u,g,v){var x=u.replayFilter;u.replayFilter=x?function(){return oi(x(),g())}:g,u.justLimit=v&&!x}function Cr(u,g){if(u.isPrimKey)return g.primaryKey;var v=g.getIndexByKeyPath(u.index);if(!v)throw new Tt.Schema("KeyPath "+u.index+" on object store "+g.name+" is not indexed");return v}function qo(u,g,v){var x=Cr(u,g.schema);return g.openCursor({trans:v,values:!u.keysOnly,reverse:u.dir==="prev",unique:!!u.unique,query:{index:x,range:u.range}})}function Za(u,g,v,x){var C=u.replayFilter?oi(u.filter,u.replayFilter()):u.filter;if(u.or){var w={},E=function(j,L,N){var G,z;C&&!C(L,N,function(P){return L.stop(P)},function(P){return L.fail(P)})||((z=""+(G=L.primaryKey))=="[object ArrayBuffer]"&&(z=""+new Uint8Array(G)),_(w,z)||(w[z]=!0,g(j,L,N)))};return Promise.all([u.or._iterate(E,v),li(qo(u,x,v),u.algorithm,E,!u.keysOnly&&u.valueMapper)])}return li(qo(u,x,v),oi(u.algorithm,C),g,!u.keysOnly&&u.valueMapper)}function li(u,g,v,x){var C=Te(x?function(w,E,j){return v(x(w),E,j)}:v);return u.then(function(w){if(w)return w.start(function(){var E=function(){return w.continue()};g&&!g(w,function(j){return E=j},function(j){w.stop(j),E=he},function(j){w.fail(j),E=he})||C(w.value,w,function(j){return E=j}),E()})})}var Th=(le.prototype._read=function(u,g){var v=this._ctx;return v.error?v.table._trans(null,_e.bind(null,v.error)):v.table._trans("readonly",u).then(g)},le.prototype._write=function(u){var g=this._ctx;return g.error?g.table._trans(null,_e.bind(null,g.error)):g.table._trans("readwrite",u,"locked")},le.prototype._addAlgorithm=function(u){var g=this._ctx;g.algorithm=oi(g.algorithm,u)},le.prototype._iterate=function(u,g){return Za(this._ctx,u,g,this._ctx.table.core)},le.prototype.clone=function(u){var g=Object.create(this.constructor.prototype),v=Object.create(this._ctx);return u&&m(v,u),g._ctx=v,g},le.prototype.raw=function(){return this._ctx.valueMapper=null,this},le.prototype.each=function(u){var g=this._ctx;return this._read(function(v){return Za(g,u,v,g.table.core)})},le.prototype.count=function(u){var g=this;return this._read(function(v){var x=g._ctx,C=x.table.core;if(Vr(x,!0))return C.count({trans:v,query:{index:Cr(x,C.schema),range:x.range}}).then(function(E){return Math.min(E,x.limit)});var w=0;return Za(x,function(){return++w,!1},v,C).then(function(){return w})}).then(u)},le.prototype.sortBy=function(u,g){var v=u.split(".").reverse(),x=v[0],C=v.length-1;function w(L,N){return N?w(L[v[N]],N-1):L[x]}var E=this._ctx.dir==="next"?1:-1;function j(L,N){return ee(w(L,C),w(N,C))*E}return this.toArray(function(L){return L.sort(j)}).then(g)},le.prototype.toArray=function(u){var g=this;return this._read(function(v){var x=g._ctx;if(x.dir==="next"&&Vr(x,!0)&&0<x.limit){var C=x.valueMapper,w=Cr(x,x.table.core.schema);return x.table.core.query({trans:v,limit:x.limit,values:!0,query:{index:w,range:x.range}}).then(function(j){return j=j.result,C?j.map(C):j})}var E=[];return Za(x,function(j){return E.push(j)},v,x.table.core).then(function(){return E})},u)},le.prototype.offset=function(u){var g=this._ctx;return u<=0||(g.offset+=u,Vr(g)?Qa(g,function(){var v=u;return function(x,C){return v===0||(v===1?--v:C(function(){x.advance(v),v=0}),!1)}}):Qa(g,function(){var v=u;return function(){return--v<0}})),this},le.prototype.limit=function(u){return this._ctx.limit=Math.min(this._ctx.limit,u),Qa(this._ctx,function(){var g=u;return function(v,x,C){return--g<=0&&x(C),0<=g}},!0),this},le.prototype.until=function(u,g){return ks(this._ctx,function(v,x,C){return!u(v.value)||(x(C),g)}),this},le.prototype.first=function(u){return this.limit(1).toArray(function(g){return g[0]}).then(u)},le.prototype.last=function(u){return this.reverse().first(u)},le.prototype.filter=function(u){var g;return ks(this._ctx,function(v){return u(v.value)}),(g=this._ctx).isMatch=oi(g.isMatch,u),this},le.prototype.and=function(u){return this.filter(u)},le.prototype.or=function(u){return new this.db.WhereClause(this._ctx.table,u,this)},le.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},le.prototype.desc=function(){return this.reverse()},le.prototype.eachKey=function(u){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(v,x){u(x.key,x)})},le.prototype.eachUniqueKey=function(u){return this._ctx.unique="unique",this.eachKey(u)},le.prototype.eachPrimaryKey=function(u){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(v,x){u(x.primaryKey,x)})},le.prototype.keys=function(u){var g=this._ctx;g.keysOnly=!g.isMatch;var v=[];return this.each(function(x,C){v.push(C.key)}).then(function(){return v}).then(u)},le.prototype.primaryKeys=function(u){var g=this._ctx;if(g.dir==="next"&&Vr(g,!0)&&0<g.limit)return this._read(function(x){var C=Cr(g,g.table.core.schema);return g.table.core.query({trans:x,values:!1,limit:g.limit,query:{index:C,range:g.range}})}).then(function(x){return x.result}).then(u);g.keysOnly=!g.isMatch;var v=[];return this.each(function(x,C){v.push(C.primaryKey)}).then(function(){return v}).then(u)},le.prototype.uniqueKeys=function(u){return this._ctx.unique="unique",this.keys(u)},le.prototype.firstKey=function(u){return this.limit(1).keys(function(g){return g[0]}).then(u)},le.prototype.lastKey=function(u){return this.reverse().firstKey(u)},le.prototype.distinct=function(){var u=this._ctx,u=u.index&&u.table.schema.idxByName[u.index];if(!u||!u.multi)return this;var g={};return ks(this._ctx,function(C){var x=C.primaryKey.toString(),C=_(g,x);return g[x]=!0,!C}),this},le.prototype.modify=function(u){var g=this,v=this._ctx;return this._write(function(x){var C=typeof u=="function"?u:function(V){return As(V,u)},w=v.table.core,N=w.schema.primaryKey,E=N.outbound,j=N.extractKey,L=200,N=g.db._options.modifyChunkSize;N&&(L=typeof N=="object"?N[w.name]||N["*"]||200:N);function G(V,I){var W=I.failures,I=I.numFailures;P+=V-I;for(var it=0,ct=c(W);it<ct.length;it++){var xt=ct[it];z.push(W[xt])}}var z=[],P=0,F=[],X=u===Po;return g.clone().primaryKeys().then(function(V){function q(I){var it=Math.min(L,V.length-I),ct=V.slice(I,I+it);return(X?Promise.resolve([]):w.getMany({trans:x,keys:ct,cache:"immutable"})).then(function(xt){var wt=[],yt=[],St=E?[]:null,Ct=X?ct:[];if(!X)for(var vt=0;vt<it;++vt){var jt=xt[vt],Nt={value:Pt(jt),primKey:V[I+vt]};C.call(Nt,Nt.value,Nt)!==!1&&(Nt.value==null?Ct.push(V[I+vt]):E||ee(j(jt),j(Nt.value))===0?(yt.push(Nt.value),E&&St.push(V[I+vt])):(Ct.push(V[I+vt]),wt.push(Nt.value)))}return Promise.resolve(0<wt.length&&w.mutate({trans:x,type:"add",values:wt}).then(function(qt){for(var Zt in qt.failures)Ct.splice(parseInt(Zt),1);G(wt.length,qt)})).then(function(){return(0<yt.length||W&&typeof u=="object")&&w.mutate({trans:x,type:"put",keys:St,values:yt,criteria:W,changeSpec:typeof u!="function"&&u,isAdditionalChunk:0<I}).then(function(qt){return G(yt.length,qt)})}).then(function(){return(0<Ct.length||W&&X)&&w.mutate({trans:x,type:"delete",keys:Ct,criteria:W,isAdditionalChunk:0<I}).then(function(qt){return dn(v.table,Ct,qt)}).then(function(qt){return G(Ct.length,qt)})}).then(function(){return V.length>I+it&&q(I+L)})})}var W=Vr(v)&&v.limit===1/0&&(typeof u!="function"||X)&&{index:v.index,range:v.range};return q(0).then(function(){if(0<z.length)throw new Ht("Error modifying one or more objects",z,P,F);return V.length})})})},le.prototype.delete=function(){var u=this._ctx,g=u.range;return!Vr(u)||u.table.schema.yProps||!u.isPrimKey&&g.type!==3?this.modify(Po):this._write(function(v){var x=u.table.core.schema.primaryKey,C=g;return u.table.core.count({trans:v,query:{index:x,range:C}}).then(function(w){return u.table.core.mutate({trans:v,type:"deleteRange",range:C}).then(function(L){var j=L.failures,L=L.numFailures;if(L)throw new Ht("Could not delete some values",Object.keys(j).map(function(N){return j[N]}),w-L);return w-L})})})},le);function le(){}var Po=function(u,g){return g.value=null};function Ko(u,g){return u<g?-1:u===g?0:1}function Oh(u,g){return g<u?-1:u===g?0:1}function En(u,g,v){return u=u instanceof ci?new u.Collection(u):u,u._ctx.error=new(v||TypeError)(g),u}function wr(u){return new u.Collection(u,function(){return zs("")}).limit(0)}function Bn(u,g,v,x){var C,w,E,j,L,N,G,z=v.length;if(!v.every(function(X){return typeof X=="string"}))return En(u,Ye);function P(X){C=X==="next"?function(q){return q.toUpperCase()}:function(q){return q.toLowerCase()},w=X==="next"?function(q){return q.toLowerCase()}:function(q){return q.toUpperCase()},E=X==="next"?Ko:Oh;var V=v.map(function(q){return{lower:w(q),upper:C(q)}}).sort(function(q,W){return E(q.lower,W.lower)});j=V.map(function(q){return q.upper}),L=V.map(function(q){return q.lower}),G=(N=X)==="next"?"":x}P("next"),u=new u.Collection(u,function(){return ar(j[0],L[z-1]+x)}),u._ondirectionchange=function(X){P(X)};var F=0;return u._addAlgorithm(function(X,V,q){var W=X.key;if(typeof W!="string")return!1;var I=w(W);if(g(I,L,F))return!0;for(var it=null,ct=F;ct<z;++ct){var xt=(function(wt,yt,St,Ct,vt,jt){for(var Nt=Math.min(wt.length,Ct.length),qt=-1,Zt=0;Zt<Nt;++Zt){var ln=yt[Zt];if(ln!==Ct[Zt])return vt(wt[Zt],St[Zt])<0?wt.substr(0,Zt)+St[Zt]+St.substr(Zt+1):vt(wt[Zt],Ct[Zt])<0?wt.substr(0,Zt)+Ct[Zt]+St.substr(Zt+1):0<=qt?wt.substr(0,qt)+yt[qt]+St.substr(qt+1):null;vt(wt[Zt],ln)<0&&(qt=Zt)}return Nt<Ct.length&&jt==="next"?wt+St.substr(wt.length):Nt<wt.length&&jt==="prev"?wt.substr(0,St.length):qt<0?null:wt.substr(0,qt)+Ct[qt]+St.substr(qt+1)})(W,I,j[ct],L[ct],E,N);xt===null&&it===null?F=ct+1:(it===null||0<E(it,xt))&&(it=xt)}return V(it!==null?function(){X.continue(it+G)}:q),!1}),u}function ar(u,g,v,x){return{type:2,lower:u,upper:g,lowerOpen:v,upperOpen:x}}function zs(u){return{type:1,lower:u,upper:u}}var ci=(Object.defineProperty(Me.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Me.prototype.between=function(u,g,v,x){v=v!==!1,x=x===!0;try{return 0<this._cmp(u,g)||this._cmp(u,g)===0&&(v||x)&&(!v||!x)?wr(this):new this.Collection(this,function(){return ar(u,g,!v,!x)})}catch{return En(this,Sn)}},Me.prototype.equals=function(u){return u==null?En(this,Sn):new this.Collection(this,function(){return zs(u)})},Me.prototype.above=function(u){return u==null?En(this,Sn):new this.Collection(this,function(){return ar(u,void 0,!0)})},Me.prototype.aboveOrEqual=function(u){return u==null?En(this,Sn):new this.Collection(this,function(){return ar(u,void 0,!1)})},Me.prototype.below=function(u){return u==null?En(this,Sn):new this.Collection(this,function(){return ar(void 0,u,!1,!0)})},Me.prototype.belowOrEqual=function(u){return u==null?En(this,Sn):new this.Collection(this,function(){return ar(void 0,u)})},Me.prototype.startsWith=function(u){return typeof u!="string"?En(this,Ye):this.between(u,u+Wn,!0,!0)},Me.prototype.startsWithIgnoreCase=function(u){return u===""?this.startsWith(u):Bn(this,function(g,v){return g.indexOf(v[0])===0},[u],Wn)},Me.prototype.equalsIgnoreCase=function(u){return Bn(this,function(g,v){return g===v[0]},[u],"")},Me.prototype.anyOfIgnoreCase=function(){var u=Lt.apply(zt,arguments);return u.length===0?wr(this):Bn(this,function(g,v){return v.indexOf(g)!==-1},u,"")},Me.prototype.startsWithAnyOfIgnoreCase=function(){var u=Lt.apply(zt,arguments);return u.length===0?wr(this):Bn(this,function(g,v){return v.some(function(x){return g.indexOf(x)===0})},u,Wn)},Me.prototype.anyOf=function(){var u=this,g=Lt.apply(zt,arguments),v=this._cmp;try{g.sort(v)}catch{return En(this,Sn)}if(g.length===0)return wr(this);var x=new this.Collection(this,function(){return ar(g[0],g[g.length-1])});x._ondirectionchange=function(w){v=w==="next"?u._ascending:u._descending,g.sort(v)};var C=0;return x._addAlgorithm(function(w,E,j){for(var L=w.key;0<v(L,g[C]);)if(++C===g.length)return E(j),!1;return v(L,g[C])===0||(E(function(){w.continue(g[C])}),!1)}),x},Me.prototype.notEqual=function(u){return this.inAnyRange([[-1/0,u],[u,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Me.prototype.noneOf=function(){var u=Lt.apply(zt,arguments);if(u.length===0)return new this.Collection(this);try{u.sort(this._ascending)}catch{return En(this,Sn)}var g=u.reduce(function(v,x){return v?v.concat([[v[v.length-1][1],x]]):[[-1/0,x]]},null);return g.push([u[u.length-1],this.db._maxKey]),this.inAnyRange(g,{includeLowers:!1,includeUppers:!1})},Me.prototype.inAnyRange=function(W,g){var v=this,x=this._cmp,C=this._ascending,w=this._descending,E=this._min,j=this._max;if(W.length===0)return wr(this);if(!W.every(function(I){return I[0]!==void 0&&I[1]!==void 0&&C(I[0],I[1])<=0}))return En(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Tt.InvalidArgument);var L=!g||g.includeLowers!==!1,N=g&&g.includeUppers===!0,G,z=C;function P(I,it){return z(I[0],it[0])}try{(G=W.reduce(function(I,it){for(var ct=0,xt=I.length;ct<xt;++ct){var wt=I[ct];if(x(it[0],wt[1])<0&&0<x(it[1],wt[0])){wt[0]=E(wt[0],it[0]),wt[1]=j(wt[1],it[1]);break}}return ct===xt&&I.push(it),I},[])).sort(P)}catch{return En(this,Sn)}var F=0,X=N?function(I){return 0<C(I,G[F][1])}:function(I){return 0<=C(I,G[F][1])},V=L?function(I){return 0<w(I,G[F][0])}:function(I){return 0<=w(I,G[F][0])},q=X,W=new this.Collection(this,function(){return ar(G[0][0],G[G.length-1][1],!L,!N)});return W._ondirectionchange=function(I){z=I==="next"?(q=X,C):(q=V,w),G.sort(P)},W._addAlgorithm(function(I,it,ct){for(var xt,wt=I.key;q(wt);)if(++F===G.length)return it(ct),!1;return!X(xt=wt)&&!V(xt)||(v._cmp(wt,G[F][1])===0||v._cmp(wt,G[F][0])===0||it(function(){z===C?I.continue(G[F][0]):I.continue(G[F][1])}),!1)}),W},Me.prototype.startsWithAnyOf=function(){var u=Lt.apply(zt,arguments);return u.every(function(g){return typeof g=="string"})?u.length===0?wr(this):this.inAnyRange(u.map(function(g){return[g,g+Wn]})):En(this,"startsWithAnyOf() only works with strings")},Me);function Me(){}function Qn(u){return Te(function(g){return ui(g),u(g.target.error),!1})}function ui(u){u.stopPropagation&&u.stopPropagation(),u.preventDefault&&u.preventDefault()}var $i="storagemutated",hi="x-storagemutated-1",sn=Wa(null,$i),Wo=(Cn.prototype._lock=function(){return pt(!Mt.global),++this._reculock,this._reculock!==1||Mt.global||(Mt.lockOwnerFor=this),this},Cn.prototype._unlock=function(){if(pt(!Mt.global),--this._reculock==0)for(Mt.global||(Mt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var u=this._blockedFuncs.shift();try{Kn(u[1],u[0])}catch{}}return this},Cn.prototype._locked=function(){return this._reculock&&Mt.lockOwnerFor!==this},Cn.prototype.create=function(u){var g=this;if(!this.mode)return this;var v=this.db.idbdb,x=this.db._state.dbOpenError;if(pt(!this.idbtrans),!u&&!v)switch(x&&x.name){case"DatabaseClosedError":throw new Tt.DatabaseClosed(x);case"MissingAPIError":throw new Tt.MissingAPI(x.message,x);default:throw new Tt.OpenFailed(x)}if(!this.active)throw new Tt.TransactionInactive;return pt(this._completion._state===null),(u=this.idbtrans=u||(this.db.core||v).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Te(function(C){ui(C),g._reject(u.error)}),u.onabort=Te(function(C){ui(C),g.active&&g._reject(new Tt.Abort(u.error)),g.active=!1,g.on("abort").fire(C)}),u.oncomplete=Te(function(){g.active=!1,g._resolve(),"mutatedParts"in u&&sn.storagemutated.fire(u.mutatedParts)}),this},Cn.prototype._promise=function(u,g,v){var x=this;if(u==="readwrite"&&this.mode!=="readwrite")return _e(new Tt.ReadOnly("Transaction is readonly"));if(!this.active)return _e(new Tt.TransactionInactive);if(this._locked())return new Dt(function(w,E){x._blockedFuncs.push([function(){x._promise(u,g,v).then(w,E)},Mt])});if(v)return De(function(){var w=new Dt(function(E,j){x._lock();var L=g(E,j,x);L&&L.then&&L.then(E,j)});return w.finally(function(){return x._unlock()}),w._lib=!0,w});var C=new Dt(function(w,E){var j=g(w,E,x);j&&j.then&&j.then(w,E)});return C._lib=!0,C},Cn.prototype._root=function(){return this.parent?this.parent._root():this},Cn.prototype.waitFor=function(u){var g,v=this._root(),x=Dt.resolve(u);v._waitingFor?v._waitingFor=v._waitingFor.then(function(){return x}):(v._waitingFor=x,v._waitingQueue=[],g=v.idbtrans.objectStore(v.storeNames[0]),(function w(){for(++v._spinCount;v._waitingQueue.length;)v._waitingQueue.shift()();v._waitingFor&&(g.get(-1/0).onsuccess=w)})());var C=v._waitingFor;return new Dt(function(w,E){x.then(function(j){return v._waitingQueue.push(Te(w.bind(null,j)))},function(j){return v._waitingQueue.push(Te(E.bind(null,j)))}).finally(function(){v._waitingFor===C&&(v._waitingFor=null)})})},Cn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Tt.Abort))},Cn.prototype.table=function(u){var g=this._memoizedTables||(this._memoizedTables={});if(_(g,u))return g[u];var v=this.schema[u];if(!v)throw new Tt.NotFound("Table "+u+" not part of transaction");return v=new this.db.Table(u,v,this),v.core=this.db.core.table(u),g[u]=v},Cn);function Cn(){}function sr(u,g,v,x,C,w,E,j){return{name:u,keyPath:g,unique:v,multi:x,auto:C,compound:w,src:(v&&!E?"&":"")+(x?"*":"")+(C?"++":"")+Rs(g),type:j}}function Rs(u){return typeof u=="string"?u:u?"["+[].join.call(u,"+")+"]":""}function ta(u,g,v){return{name:u,primKey:g,indexes:v,mappedClass:null,idxByName:(x=function(C){return[C.name,C]},v.reduce(function(C,w,E){return E=x(w,E),E&&(C[E[0]]=E[1]),C},{}))};var x}var ea=function(u){try{return u.only([[]]),ea=function(){return[[]]},[[]]}catch{return ea=function(){return Wn},Wn}};function na(u){return u==null?function(){}:typeof u=="string"?(g=u).split(".").length===1?function(v){return v[g]}:function(v){return ft(v,g)}:function(v){return ft(v,u)};var g}function Ia(u){return[].slice.call(u)}var uc=0;function Pe(u){return u==null?":id":typeof u=="string"?u:"[".concat(u.join("+"),"]")}function fi(u,g,L){function x(q){if(q.type===3)return null;if(q.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var F=q.lower,X=q.upper,V=q.lowerOpen,q=q.upperOpen;return F===void 0?X===void 0?null:g.upperBound(X,!!q):X===void 0?g.lowerBound(F,!!V):g.bound(F,X,!!V,!!q)}function C(P){var F,X=P.name;return{name:X,schema:P,mutate:function(V){var q=V.trans,W=V.type,I=V.keys,it=V.values,ct=V.range;return new Promise(function(xt,wt){xt=Te(xt);var yt=q.objectStore(X),St=yt.keyPath==null,Ct=W==="put"||W==="add";if(!Ct&&W!=="delete"&&W!=="deleteRange")throw new Error("Invalid operation type: "+W);var vt,jt=(I||it||{length:1}).length;if(I&&it&&I.length!==it.length)throw new Error("Given keys array must have same length as given values array.");if(jt===0)return xt({numFailures:0,failures:{},results:[],lastResult:void 0});function Nt(We){++ln,ui(We)}var qt=[],Zt=[],ln=0;if(W==="deleteRange"){if(ct.type===4)return xt({numFailures:ln,failures:Zt,results:[],lastResult:void 0});ct.type===3?qt.push(vt=yt.clear()):qt.push(vt=yt.delete(x(ct)))}else{var St=Ct?St?[it,I]:[it,null]:[I,null],Gt=St[0],Ke=St[1];if(Ct)for(var Re=0;Re<jt;++Re)qt.push(vt=Ke&&Ke[Re]!==void 0?yt[W](Gt[Re],Ke[Re]):yt[W](Gt[Re])),vt.onerror=Nt;else for(Re=0;Re<jt;++Re)qt.push(vt=yt[W](Gt[Re])),vt.onerror=Nt}function is(We){We=We.target.result,qt.forEach(function(Ln,ll){return Ln.error!=null&&(Zt[ll]=Ln.error)}),xt({numFailures:ln,failures:Zt,results:W==="delete"?I:qt.map(function(Ln){return Ln.result}),lastResult:We})}vt.onerror=function(We){Nt(We),is(We)},vt.onsuccess=is})},getMany:function(V){var q=V.trans,W=V.keys;return new Promise(function(I,it){I=Te(I);for(var ct,xt=q.objectStore(X),wt=W.length,yt=new Array(wt),St=0,Ct=0,vt=function(qt){qt=qt.target,yt[qt._pos]=qt.result,++Ct===St&&I(yt)},jt=Qn(it),Nt=0;Nt<wt;++Nt)W[Nt]!=null&&((ct=xt.get(W[Nt]))._pos=Nt,ct.onsuccess=vt,ct.onerror=jt,++St);St===0&&I(yt)})},get:function(V){var q=V.trans,W=V.key;return new Promise(function(I,it){I=Te(I);var ct=q.objectStore(X).get(W);ct.onsuccess=function(xt){return I(xt.target.result)},ct.onerror=Qn(it)})},query:(F=N,function(V){return new Promise(function(q,W){q=Te(q);var I,it,ct,St=V.trans,xt=V.values,wt=V.limit,vt=V.query,yt=wt===1/0?void 0:wt,Ct=vt.index,vt=vt.range,St=St.objectStore(X),Ct=Ct.isPrimaryKey?St:St.index(Ct.name),vt=x(vt);if(wt===0)return q({result:[]});F?((yt=xt?Ct.getAll(vt,yt):Ct.getAllKeys(vt,yt)).onsuccess=function(jt){return q({result:jt.target.result})},yt.onerror=Qn(W)):(I=0,it=!xt&&"openKeyCursor"in Ct?Ct.openKeyCursor(vt):Ct.openCursor(vt),ct=[],it.onsuccess=function(jt){var Nt=it.result;return Nt?(ct.push(xt?Nt.value:Nt.primaryKey),++I===wt?q({result:ct}):void Nt.continue()):q({result:ct})},it.onerror=Qn(W))})}),openCursor:function(V){var q=V.trans,W=V.values,I=V.query,it=V.reverse,ct=V.unique;return new Promise(function(xt,wt){xt=Te(xt);var Ct=I.index,yt=I.range,St=q.objectStore(X),St=Ct.isPrimaryKey?St:St.index(Ct.name),Ct=it?ct?"prevunique":"prev":ct?"nextunique":"next",vt=!W&&"openKeyCursor"in St?St.openKeyCursor(x(yt),Ct):St.openCursor(x(yt),Ct);vt.onerror=Qn(wt),vt.onsuccess=Te(function(jt){var Nt,qt,Zt,ln,Gt=vt.result;Gt?(Gt.___id=++uc,Gt.done=!1,Nt=Gt.continue.bind(Gt),qt=(qt=Gt.continuePrimaryKey)&&qt.bind(Gt),Zt=Gt.advance.bind(Gt),ln=function(){throw new Error("Cursor not stopped")},Gt.trans=q,Gt.stop=Gt.continue=Gt.continuePrimaryKey=Gt.advance=function(){throw new Error("Cursor not started")},Gt.fail=Te(wt),Gt.next=function(){var Ke=this,Re=1;return this.start(function(){return Re--?Ke.continue():Ke.stop()}).then(function(){return Ke})},Gt.start=function(Ke){function Re(){if(vt.result)try{Ke()}catch(We){Gt.fail(We)}else Gt.done=!0,Gt.start=function(){throw new Error("Cursor behind last entry")},Gt.stop()}var is=new Promise(function(We,Ln){We=Te(We),vt.onerror=Qn(Ln),Gt.fail=Ln,Gt.stop=function(ll){Gt.stop=Gt.continue=Gt.continuePrimaryKey=Gt.advance=ln,We(ll)}});return vt.onsuccess=Te(function(We){vt.onsuccess=Re,Re()}),Gt.continue=Nt,Gt.continuePrimaryKey=qt,Gt.advance=Zt,Re(),is},xt(Gt)):xt(null)},wt)})},count:function(V){var q=V.query,W=V.trans,I=q.index,it=q.range;return new Promise(function(ct,xt){var wt=W.objectStore(X),yt=I.isPrimaryKey?wt:wt.index(I.name),wt=x(it),yt=wt?yt.count(wt):yt.count();yt.onsuccess=Te(function(St){return ct(St.target.result)}),yt.onerror=Qn(xt)})}}}var w,E,j,G=(E=L,j=Ia((w=u).objectStoreNames),{schema:{name:w.name,tables:j.map(function(P){return E.objectStore(P)}).map(function(P){var F=P.keyPath,q=P.autoIncrement,X=d(F),V={},q={name:P.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:F==null,compound:X,keyPath:F,autoIncrement:q,unique:!0,extractKey:na(F)},indexes:Ia(P.indexNames).map(function(W){return P.index(W)}).map(function(ct){var I=ct.name,it=ct.unique,xt=ct.multiEntry,ct=ct.keyPath,xt={name:I,compound:d(ct),keyPath:ct,unique:it,multiEntry:xt,extractKey:na(ct)};return V[Pe(ct)]=xt}),getIndexByKeyPath:function(W){return V[Pe(W)]}};return V[":id"]=q.primaryKey,F!=null&&(V[Pe(F)]=q.primaryKey),q})},hasGetAll:0<j.length&&"getAll"in E.objectStore(j[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),L=G.schema,N=G.hasGetAll,G=L.tables.map(C),z={};return G.forEach(function(P){return z[P.name]=P}),{stack:"dbcore",transaction:u.transaction.bind(u),table:function(P){if(!z[P])throw new Error("Table '".concat(P,"' not found"));return z[P]},MIN_KEY:-1/0,MAX_KEY:ea(g),schema:L}}function Bs(u,g,v,x){var C=v.IDBKeyRange;return v.indexedDB,{dbcore:(x=fi(g,C,x),u.dbcore.reduce(function(w,E){return E=E.create,i(i({},w),E(w))},x))}}function Gr(u,x){var v=x.db,x=Bs(u._middlewares,v,u._deps,x);u.core=x.dbcore,u.tables.forEach(function(C){var w=C.name;u.core.schema.tables.some(function(E){return E.name===w})&&(C.core=u.core.table(w),u[w]instanceof u.Table&&(u[w].core=C.core))})}function Ls(u,g,v,x){v.forEach(function(C){var w=x[C];g.forEach(function(E){var j=(function L(N,G){return $(N,G)||(N=y(N))&&L(N,G)})(E,C);(!j||"value"in j&&j.value===void 0)&&(E===u.Transaction.prototype||E instanceof u.Transaction?M(E,C,{get:function(){return this.table(C)},set:function(L){D(this,C,{value:L,writable:!0,configurable:!0,enumerable:!0})}}):E[C]=new u.Table(C,w))})})}function Ja(u,g){g.forEach(function(v){for(var x in v)v[x]instanceof u.Table&&delete v[x]})}function Qo(u,g){return u._cfg.version-g._cfg.version}function $a(u,g,v,x){var C=u._dbSchema;v.objectStoreNames.contains("$meta")&&!C.$meta&&(C.$meta=ta("$meta",fc("")[0],[]),u._storeNames.push("$meta"));var w=u._createTransaction("readwrite",u._storeNames,C);w.create(v),w._completion.catch(x);var E=w._reject.bind(w),j=Mt.transless||Mt;De(function(){return Mt.trans=w,Mt.transless=j,g!==0?(Gr(u,v),N=g,((L=w).storeNames.includes("$meta")?L.table("$meta").get("version").then(function(G){return G??N}):Dt.resolve(N)).then(function(G){return P=G,F=w,X=v,V=[],G=(z=u)._versions,q=z._dbSchema=ra(0,z.idbdb,X),(G=G.filter(function(W){return W._cfg.version>=P})).length!==0?(G.forEach(function(W){V.push(function(){var I=q,it=W._cfg.dbschema;Hs(z,I,X),Hs(z,it,X),q=z._dbSchema=it;var ct=Fs(I,it);ct.add.forEach(function(Ct){Zo(X,Ct[0],Ct[1].primKey,Ct[1].indexes)}),ct.change.forEach(function(Ct){if(Ct.recreate)throw new Tt.Upgrade("Not yet support for changing primary key");var vt=X.objectStore(Ct.name);Ct.add.forEach(function(jt){return Us(vt,jt)}),Ct.change.forEach(function(jt){vt.deleteIndex(jt.name),Us(vt,jt)}),Ct.del.forEach(function(jt){return vt.deleteIndex(jt)})});var xt=W._cfg.contentUpgrade;if(xt&&W._cfg.version>P){Gr(z,X),F._memoizedTables={};var wt=Ot(it);ct.del.forEach(function(Ct){wt[Ct]=I[Ct]}),Ja(z,[z.Transaction.prototype]),Ls(z,[z.Transaction.prototype],c(wt),wt),F.schema=wt;var yt,St=R(xt);return St&&He(),ct=Dt.follow(function(){var Ct;(yt=xt(F))&&St&&(Ct=Dn.bind(null,null),yt.then(Ct,Ct))}),yt&&typeof yt.then=="function"?Dt.resolve(yt):ct.then(function(){return yt})}}),V.push(function(I){var it,ct,xt=W._cfg.dbschema;it=xt,ct=I,[].slice.call(ct.db.objectStoreNames).forEach(function(wt){return it[wt]==null&&ct.db.deleteObjectStore(wt)}),Ja(z,[z.Transaction.prototype]),Ls(z,[z.Transaction.prototype],z._storeNames,z._dbSchema),F.schema=z._dbSchema}),V.push(function(I){z.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(z.idbdb.version/10)===W._cfg.version?(z.idbdb.deleteObjectStore("$meta"),delete z._dbSchema.$meta,z._storeNames=z._storeNames.filter(function(it){return it!=="$meta"})):I.objectStore("$meta").put(W._cfg.version,"version"))})}),(function W(){return V.length?Dt.resolve(V.shift()(F.idbtrans)).then(W):Dt.resolve()})().then(function(){hc(q,X)})):Dt.resolve();var z,P,F,X,V,q}).catch(E)):(c(C).forEach(function(G){Zo(v,G,C[G].primKey,C[G].indexes)}),Gr(u,v),void Dt.follow(function(){return u.on.populate.fire(w)}).catch(E));var L,N})}function Ns(u,g){hc(u._dbSchema,g),g.db.version%10!=0||g.objectStoreNames.contains("$meta")||g.db.createObjectStore("$meta").add(Math.ceil(g.db.version/10-1),"version");var v=ra(0,u.idbdb,g);Hs(u,u._dbSchema,g);for(var x=0,C=Fs(v,u._dbSchema).change;x<C.length;x++){var w=(function(E){if(E.change.length||E.recreate)return console.warn("Unable to patch indexes of table ".concat(E.name," because it has changes on the type of index or primary key.")),{value:void 0};var j=g.objectStore(E.name);E.add.forEach(function(L){Rn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(E.name,".").concat(L.src)),Us(j,L)})})(C[x]);if(typeof w=="object")return w.value}}function Fs(u,g){var v,x={del:[],add:[],change:[]};for(v in u)g[v]||x.del.push(v);for(v in g){var C=u[v],w=g[v];if(C){var E={name:v,def:w,recreate:!1,del:[],add:[],change:[]};if(""+(C.primKey.keyPath||"")!=""+(w.primKey.keyPath||"")||C.primKey.auto!==w.primKey.auto)E.recreate=!0,x.change.push(E);else{var j=C.idxByName,L=w.idxByName,N=void 0;for(N in j)L[N]||E.del.push(N);for(N in L){var G=j[N],z=L[N];G?G.src!==z.src&&E.change.push(z):E.add.push(z)}(0<E.del.length||0<E.add.length||0<E.change.length)&&x.change.push(E)}}else x.add.push([v,w])}return x}function Zo(u,g,v,x){var C=u.db.createObjectStore(g,v.keyPath?{keyPath:v.keyPath,autoIncrement:v.auto}:{autoIncrement:v.auto});return x.forEach(function(w){return Us(C,w)}),C}function hc(u,g){c(u).forEach(function(v){g.db.objectStoreNames.contains(v)||(Rn&&console.debug("Dexie: Creating missing table",v),Zo(g,v,u[v].primKey,u[v].indexes))})}function Us(u,g){u.createIndex(g.name,g.keyPath,{unique:g.unique,multiEntry:g.multi})}function ra(u,g,v){var x={};return ht(g.objectStoreNames,0).forEach(function(C){for(var w=v.objectStore(C),E=sr(Rs(N=w.keyPath),N||"",!0,!1,!!w.autoIncrement,N&&typeof N!="string",!0),j=[],L=0;L<w.indexNames.length;++L){var G=w.index(w.indexNames[L]),N=G.keyPath,G=sr(G.name,N,!!G.unique,!!G.multiEntry,!1,N&&typeof N!="string",!1);j.push(G)}x[C]=ta(C,E,j)}),x}function Hs(u,g,v){for(var x=v.db.objectStoreNames,C=0;C<x.length;++C){var w=x[C],E=v.objectStore(w);u._hasGetAll="getAll"in E;for(var j=0;j<E.indexNames.length;++j){var L=E.indexNames[j],N=E.index(L).keyPath,G=typeof N=="string"?N:"["+ht(N).join("+")+"]";!g[w]||(N=g[w].idxByName[G])&&(N.name=L,delete g[w].idxByName[G],g[w].idxByName[L]=N)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&l.WorkerGlobalScope&&l instanceof l.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(u._hasGetAll=!1)}function fc(u){return u.split(",").map(function(g,v){var w=g.split(":"),x=(C=w[1])===null||C===void 0?void 0:C.trim(),C=(g=w[0].trim()).replace(/([&*]|\+\+)/g,""),w=/^\[/.test(C)?C.match(/^\[(.*)\]$/)[1].split("+"):C;return sr(C,w||null,/\&/.test(g),/\*/.test(g),/\+\+/.test(g),d(w),v===0,x)})}var Dh=(ia.prototype._createTableSchema=ta,ia.prototype._parseIndexSyntax=fc,ia.prototype._parseStoresSpec=function(u,g){var v=this;c(u).forEach(function(x){if(u[x]!==null){var C=v._parseIndexSyntax(u[x]),w=C.shift();if(!w)throw new Tt.Schema("Invalid schema for table "+x+": "+u[x]);if(w.unique=!0,w.multi)throw new Tt.Schema("Primary key cannot be multiEntry*");C.forEach(function(E){if(E.auto)throw new Tt.Schema("Only primary key can be marked as autoIncrement (++)");if(!E.keyPath)throw new Tt.Schema("Index must have a name and cannot be an empty string")}),C=v._createTableSchema(x,w,C),g[x]=C}})},ia.prototype.stores=function(v){var g=this.db;this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,v):v;var v=g._versions,x={},C={};return v.forEach(function(w){m(x,w._cfg.storesSource),C=w._cfg.dbschema={},w._parseStoresSpec(x,C)}),g._dbSchema=C,Ja(g,[g._allTables,g,g.Transaction.prototype]),Ls(g,[g._allTables,g,g.Transaction.prototype,this._cfg.tables],c(C),C),g._storeNames=c(C),this},ia.prototype.upgrade=function(u){return this._cfg.contentUpgrade=Ba(this._cfg.contentUpgrade||he,u),this},ia);function ia(){}function Io(u,g){var v=u._dbNamesDB;return v||(v=u._dbNamesDB=new or(qa,{addons:[],indexedDB:u,IDBKeyRange:g})).version(1).stores({dbnames:"name"}),v.table("dbnames")}function Ys(u){return u&&typeof u.databases=="function"}function Jo(u){return De(function(){return Mt.letThrough=!0,u()})}function $o(u){return!("from"in u)}var on=function(u,g){if(!this){var v=new on;return u&&"d"in u&&m(v,u),v}m(this,arguments.length?{d:1,from:u,to:1<arguments.length?g:u}:{d:0})};function ts(u,g,v){var x=ee(g,v);if(!isNaN(x)){if(0<x)throw RangeError();if($o(u))return m(u,{from:g,to:v,d:1});var C=u.l,x=u.r;if(ee(v,u.from)<0)return C?ts(C,g,v):u.l={from:g,to:v,d:1,l:null,r:null},gc(u);if(0<ee(g,u.to))return x?ts(x,g,v):u.r={from:g,to:v,d:1,l:null,r:null},gc(u);ee(g,u.from)<0&&(u.from=g,u.l=null,u.d=x?x.d+1:1),0<ee(v,u.to)&&(u.to=v,u.r=null,u.d=u.l?u.l.d+1:1),v=!u.r,C&&!u.l&&di(u,C),x&&v&&di(u,x)}}function di(u,g){$o(g)||(function v(x,L){var w=L.from,E=L.to,j=L.l,L=L.r;ts(x,w,E),j&&v(x,j),L&&v(x,L)})(u,g)}function dc(u,g){var v=Xs(g),x=v.next();if(x.done)return!1;for(var C=x.value,w=Xs(u),E=w.next(C.from),j=E.value;!x.done&&!E.done;){if(ee(j.from,C.to)<=0&&0<=ee(j.to,C.from))return!0;ee(C.from,j.from)<0?C=(x=v.next(j.from)).value:j=(E=w.next(C.from)).value}return!1}function Xs(u){var g=$o(u)?null:{s:0,n:u};return{next:function(v){for(var x=0<arguments.length;g;)switch(g.s){case 0:if(g.s=1,x)for(;g.n.l&&ee(v,g.n.from)<0;)g={up:g,n:g.n.l,s:1};else for(;g.n.l;)g={up:g,n:g.n.l,s:1};case 1:if(g.s=2,!x||ee(v,g.n.to)<=0)return{value:g.n,done:!1};case 2:if(g.n.r){g.s=3,g={up:g,n:g.n.r,s:0};continue}case 3:g=g.up}return{done:!0}}}}function gc(u){var g,v,x=(((g=u.r)===null||g===void 0?void 0:g.d)||0)-(((v=u.l)===null||v===void 0?void 0:v.d)||0),C=1<x?"r":x<-1?"l":"";C&&(g=C=="r"?"l":"r",v=i({},u),x=u[C],u.from=x.from,u.to=x.to,u[C]=x[C],v[C]=x[g],(u[g]=v).d=tl(v)),u.d=tl(u)}function tl(v){var g=v.r,v=v.l;return(g?v?Math.max(g.d,v.d):g.d:v?v.d:0)+1}function Vs(u,g){return c(g).forEach(function(v){u[v]?di(u[v],g[v]):u[v]=(function x(C){var w,E,j={};for(w in C)_(C,w)&&(E=C[w],j[w]=!E||typeof E!="object"||Qt.has(E.constructor)?E:x(E));return j})(g[v])}),u}function el(u,g){return u.all||g.all||Object.keys(u).some(function(v){return g[v]&&dc(g[v],u[v])})}T(on.prototype,((Mn={add:function(u){return di(this,u),this},addKey:function(u){return ts(this,u,u),this},addKeys:function(u){var g=this;return u.forEach(function(v){return ts(g,v,v)}),this},hasKey:function(u){var g=Xs(this).next(u).value;return g&&ee(g.from,u)<=0&&0<=ee(g.to,u)}})[tt]=function(){return Xs(this)},Mn));var gi={},nl={},rl=!1;function Gs(u){Vs(nl,u),rl||(rl=!0,setTimeout(function(){rl=!1,il(nl,!(nl={}))},0))}function il(u,g){g===void 0&&(g=!1);var v=new Set;if(u.all)for(var x=0,C=Object.values(gi);x<C.length;x++)pc(E=C[x],u,v,g);else for(var w in u){var E,j=/^idb\:\/\/(.*)\/(.*)\//.exec(w);j&&(w=j[1],j=j[2],(E=gi["idb://".concat(w,"/").concat(j)])&&pc(E,u,v,g))}v.forEach(function(L){return L()})}function pc(u,g,v,x){for(var C=[],w=0,E=Object.entries(u.queries.query);w<E.length;w++){for(var j=E[w],L=j[0],N=[],G=0,z=j[1];G<z.length;G++){var P=z[G];el(g,P.obsSet)?P.subscribers.forEach(function(q){return v.add(q)}):x&&N.push(P)}x&&C.push([L,N])}if(x)for(var F=0,X=C;F<X.length;F++){var V=X[F],L=V[0],N=V[1];u.queries.query[L]=N}}function Eh(u){var g=u._state,v=u._deps.indexedDB;if(g.isBeingOpened||u.idbdb)return g.dbReadyPromise.then(function(){return g.dbOpenError?_e(g.dbOpenError):u});g.isBeingOpened=!0,g.dbOpenError=null,g.openComplete=!1;var x=g.openCanceller,C=Math.round(10*u.verno),w=!1;function E(){if(g.openCanceller!==x)throw new Tt.DatabaseClosed("db.open() was cancelled")}function j(){return new Dt(function(P,F){if(E(),!v)throw new Tt.MissingAPI;var X=u.name,V=g.autoSchema||!C?v.open(X):v.open(X,C);if(!V)throw new Tt.MissingAPI;V.onerror=Qn(F),V.onblocked=Te(u._fireOnBlocked),V.onupgradeneeded=Te(function(q){var W;G=V.transaction,g.autoSchema&&!u._options.allowEmptyDB?(V.onerror=ui,G.abort(),V.result.close(),(W=v.deleteDatabase(X)).onsuccess=W.onerror=Te(function(){F(new Tt.NoSuchDatabase("Database ".concat(X," doesnt exist")))})):(G.onerror=Qn(F),q=q.oldVersion>Math.pow(2,62)?0:q.oldVersion,z=q<1,u.idbdb=V.result,w&&Ns(u,G),$a(u,q/10,G,F))},F),V.onsuccess=Te(function(){G=null;var q,W,I,it,ct,xt=u.idbdb=V.result,wt=ht(xt.objectStoreNames);if(0<wt.length)try{var yt=xt.transaction((it=wt).length===1?it[0]:it,"readonly");if(g.autoSchema)W=xt,I=yt,(q=u).verno=W.version/10,I=q._dbSchema=ra(0,W,I),q._storeNames=ht(W.objectStoreNames,0),Ls(q,[q._allTables],c(I),I);else if(Hs(u,u._dbSchema,yt),((ct=Fs(ra(0,(ct=u).idbdb,yt),ct._dbSchema)).add.length||ct.change.some(function(St){return St.add.length||St.change.length}))&&!w)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),xt.close(),C=xt.version+1,w=!0,P(j());Gr(u,yt)}catch{}si.push(u),xt.onversionchange=Te(function(St){g.vcFired=!0,u.on("versionchange").fire(St)}),xt.onclose=Te(function(){u.close({disableAutoOpen:!1})}),z&&(ct=u._deps,yt=X,xt=ct.indexedDB,ct=ct.IDBKeyRange,Ys(xt)||yt===qa||Io(xt,ct).put({name:yt}).catch(he)),P()},F)}).catch(function(P){switch(P?.name){case"UnknownError":if(0<g.PR1398_maxLoop)return g.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),j();break;case"VersionError":if(0<C)return C=0,j()}return Dt.reject(P)})}var L,N=g.dbReadyResolve,G=null,z=!1;return Dt.race([x,(typeof navigator>"u"?Dt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(P){function F(){return indexedDB.databases().finally(P)}L=setInterval(F,100),F()}).finally(function(){return clearInterval(L)}):Promise.resolve()).then(j)]).then(function(){return E(),g.onReadyBeingFired=[],Dt.resolve(Jo(function(){return u.on.ready.fire(u.vip)})).then(function P(){if(0<g.onReadyBeingFired.length){var F=g.onReadyBeingFired.reduce(Ba,he);return g.onReadyBeingFired=[],Dt.resolve(Jo(function(){return F(u.vip)})).then(P)}})}).finally(function(){g.openCanceller===x&&(g.onReadyBeingFired=null,g.isBeingOpened=!1)}).catch(function(P){g.dbOpenError=P;try{G&&G.abort()}catch{}return x===g.openCanceller&&u._close(),_e(P)}).finally(function(){g.openComplete=!0,N()}).then(function(){var P;return z&&(P={},u.tables.forEach(function(F){F.schema.indexes.forEach(function(X){X.name&&(P["idb://".concat(u.name,"/").concat(F.name,"/").concat(X.name)]=new on(-1/0,[[[]]]))}),P["idb://".concat(u.name,"/").concat(F.name,"/")]=P["idb://".concat(u.name,"/").concat(F.name,"/:dels")]=new on(-1/0,[[[]]])}),sn($i).fire(P),il(P,!0)),u})}function es(u){function g(w){return u.next(w)}var v=C(g),x=C(function(w){return u.throw(w)});function C(w){return function(L){var j=w(L),L=j.value;return j.done?L:L&&typeof L.then=="function"?L.then(v,x):d(L)?Promise.all(L).then(v,x):v(L)}}return C(g)()}function qr(u,g,v){for(var x=d(u)?u.slice():[u],C=0;C<v;++C)x.push(g);return x}var Mh={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(u){return i(i({},u),{table:function(g){var v=u.table(g),x=v.schema,C={},w=[];function E(z,P,F){var X=Pe(z),V=C[X]=C[X]||[],q=z==null?0:typeof z=="string"?1:z.length,W=0<P,W=i(i({},F),{name:W?"".concat(X,"(virtual-from:").concat(F.name,")"):F.name,lowLevelIndex:F,isVirtual:W,keyTail:P,keyLength:q,extractKey:na(z),unique:!W&&F.unique});return V.push(W),W.isPrimaryKey||w.push(W),1<q&&E(q===2?z[0]:z.slice(0,q-1),P+1,F),V.sort(function(I,it){return I.keyTail-it.keyTail}),W}g=E(x.primaryKey.keyPath,0,x.primaryKey),C[":id"]=[g];for(var j=0,L=x.indexes;j<L.length;j++){var N=L[j];E(N.keyPath,0,N)}function G(z){var P,F=z.query.index;return F.isVirtual?i(i({},z),{query:{index:F.lowLevelIndex,range:(P=z.query.range,F=F.keyTail,{type:P.type===1?2:P.type,lower:qr(P.lower,P.lowerOpen?u.MAX_KEY:u.MIN_KEY,F),lowerOpen:!0,upper:qr(P.upper,P.upperOpen?u.MIN_KEY:u.MAX_KEY,F),upperOpen:!0})}}):z}return i(i({},v),{schema:i(i({},x),{primaryKey:g,indexes:w,getIndexByKeyPath:function(z){return(z=C[Pe(z)])&&z[0]}}),count:function(z){return v.count(G(z))},query:function(z){return v.query(G(z))},openCursor:function(z){var P=z.query.index,F=P.keyTail,X=P.isVirtual,V=P.keyLength;return X?v.openCursor(G(z)).then(function(W){return W&&q(W)}):v.openCursor(z);function q(W){return Object.create(W,{continue:{value:function(I){I!=null?W.continue(qr(I,z.reverse?u.MAX_KEY:u.MIN_KEY,F)):z.unique?W.continue(W.key.slice(0,V).concat(z.reverse?u.MIN_KEY:u.MAX_KEY,F)):W.continue()}},continuePrimaryKey:{value:function(I,it){W.continuePrimaryKey(qr(I,u.MAX_KEY,F),it)}},primaryKey:{get:function(){return W.primaryKey}},key:{get:function(){var I=W.key;return V===1?I[0]:I.slice(0,V)}},value:{get:function(){return W.value}}})}}})}})}};function qs(u,g,v,x){return v=v||{},x=x||"",c(u).forEach(function(C){var w,E,j;_(g,C)?(w=u[C],E=g[C],typeof w=="object"&&typeof E=="object"&&w&&E?(j=re(w))!==re(E)?v[x+C]=g[C]:j==="Object"?qs(w,E,v,x+C+"."):w!==E&&(v[x+C]=g[C]):w!==E&&(v[x+C]=g[C])):v[x+C]=void 0}),c(g).forEach(function(C){_(u,C)||(v[x+C]=g[C])}),v}function Ps(u,g){return g.type==="delete"?g.keys:g.keys||g.values.map(u.extractKey)}var mc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(u){return i(i({},u),{table:function(g){var v=u.table(g),x=v.schema.primaryKey;return i(i({},v),{mutate:function(C){var w=Mt.trans,E=w.table(g).hook,j=E.deleting,L=E.creating,N=E.updating;switch(C.type){case"add":if(L.fire===he)break;return w._promise("readwrite",function(){return G(C)},!0);case"put":if(L.fire===he&&N.fire===he)break;return w._promise("readwrite",function(){return G(C)},!0);case"delete":if(j.fire===he)break;return w._promise("readwrite",function(){return G(C)},!0);case"deleteRange":if(j.fire===he)break;return w._promise("readwrite",function(){return(function z(P,F,X){return v.query({trans:P,values:!1,query:{index:x,range:F},limit:X}).then(function(V){var q=V.result;return G({type:"delete",keys:q,trans:P}).then(function(W){return 0<W.numFailures?Promise.reject(W.failures[0]):q.length<X?{failures:[],numFailures:0,lastResult:void 0}:z(P,i(i({},F),{lower:q[q.length-1],lowerOpen:!0}),X)})})})(C.trans,C.range,1e4)},!0)}return v.mutate(C);function G(z){var P,F,X,V=Mt.trans,q=z.keys||Ps(x,z);if(!q)throw new Error("Keys missing");return(z=z.type==="add"||z.type==="put"?i(i({},z),{keys:q}):i({},z)).type!=="delete"&&(z.values=s([],z.values)),z.keys&&(z.keys=s([],z.keys)),P=v,X=q,((F=z).type==="add"?Promise.resolve([]):P.getMany({trans:F.trans,keys:X,cache:"immutable"})).then(function(W){var I=q.map(function(it,ct){var xt,wt,yt,St=W[ct],Ct={onerror:null,onsuccess:null};return z.type==="delete"?j.fire.call(Ct,it,St,V):z.type==="add"||St===void 0?(xt=L.fire.call(Ct,it,z.values[ct],V),it==null&&xt!=null&&(z.keys[ct]=it=xt,x.outbound||dt(z.values[ct],x.keyPath,it))):(xt=qs(St,z.values[ct]),(wt=N.fire.call(Ct,xt,it,St,V))&&(yt=z.values[ct],Object.keys(wt).forEach(function(vt){_(yt,vt)?yt[vt]=wt[vt]:dt(yt,vt,wt[vt])}))),Ct});return v.mutate(z).then(function(it){for(var ct=it.failures,xt=it.results,wt=it.numFailures,it=it.lastResult,yt=0;yt<q.length;++yt){var St=(xt||q)[yt],Ct=I[yt];St==null?Ct.onerror&&Ct.onerror(ct[yt]):Ct.onsuccess&&Ct.onsuccess(z.type==="put"&&W[yt]?z.values[yt]:St)}return{failures:ct,results:xt,numFailures:wt,lastResult:it}}).catch(function(it){return I.forEach(function(ct){return ct.onerror&&ct.onerror(it)}),Promise.reject(it)})})}}})}})}};function al(u,g,v){try{if(!g||g.keys.length<u.length)return null;for(var x=[],C=0,w=0;C<g.keys.length&&w<u.length;++C)ee(g.keys[C],u[w])===0&&(x.push(v?Pt(g.values[C]):g.values[C]),++w);return x.length===u.length?x:null}catch{return null}}var yc={stack:"dbcore",level:-1,create:function(u){return{table:function(g){var v=u.table(g);return i(i({},v),{getMany:function(x){if(!x.cache)return v.getMany(x);var C=al(x.keys,x.trans._cache,x.cache==="clone");return C?Dt.resolve(C):v.getMany(x).then(function(w){return x.trans._cache={keys:x.keys,values:x.cache==="clone"?Pt(w):w},w})},mutate:function(x){return x.type!=="add"&&(x.trans._cache=null),v.mutate(x)}})}}}};function pi(u,g){return u.trans.mode==="readonly"&&!!u.subscr&&!u.trans.explicit&&u.trans.db._options.cache!=="disabled"&&!g.schema.primaryKey.outbound}function vc(u,g){switch(u){case"query":return g.values&&!g.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var jh={stack:"dbcore",level:0,name:"Observability",create:function(u){var g=u.schema.name,v=new on(u.MIN_KEY,u.MAX_KEY);return i(i({},u),{transaction:function(x,C,w){if(Mt.subscr&&C!=="readonly")throw new Tt.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Mt.querier));return u.transaction(x,C,w)},table:function(x){var C=u.table(x),w=C.schema,E=w.primaryKey,z=w.indexes,j=E.extractKey,L=E.outbound,N=E.autoIncrement&&z.filter(function(F){return F.compound&&F.keyPath.includes(E.keyPath)}),G=i(i({},C),{mutate:function(F){function X(vt){return vt="idb://".concat(g,"/").concat(x,"/").concat(vt),it[vt]||(it[vt]=new on)}var V,q,W,I=F.trans,it=F.mutatedParts||(F.mutatedParts={}),ct=X(""),xt=X(":dels"),wt=F.type,Ct=F.type==="deleteRange"?[F.range]:F.type==="delete"?[F.keys]:F.values.length<50?[Ps(E,F).filter(function(vt){return vt}),F.values]:[],yt=Ct[0],St=Ct[1],Ct=F.trans._cache;return d(yt)?(ct.addKeys(yt),(Ct=wt==="delete"||yt.length===St.length?al(yt,Ct):null)||xt.addKeys(yt),(Ct||St)&&(V=X,q=Ct,W=St,w.indexes.forEach(function(vt){var jt=V(vt.name||"");function Nt(Zt){return Zt!=null?vt.extractKey(Zt):null}function qt(Zt){return vt.multiEntry&&d(Zt)?Zt.forEach(function(ln){return jt.addKey(ln)}):jt.addKey(Zt)}(q||W).forEach(function(Zt,Ke){var Gt=q&&Nt(q[Ke]),Ke=W&&Nt(W[Ke]);ee(Gt,Ke)!==0&&(Gt!=null&&qt(Gt),Ke!=null&&qt(Ke))})}))):yt?(St={from:(St=yt.lower)!==null&&St!==void 0?St:u.MIN_KEY,to:(St=yt.upper)!==null&&St!==void 0?St:u.MAX_KEY},xt.add(St),ct.add(St)):(ct.add(v),xt.add(v),w.indexes.forEach(function(vt){return X(vt.name).add(v)})),C.mutate(F).then(function(vt){return!yt||F.type!=="add"&&F.type!=="put"||(ct.addKeys(vt.results),N&&N.forEach(function(jt){for(var Nt=F.values.map(function(Gt){return jt.extractKey(Gt)}),qt=jt.keyPath.findIndex(function(Gt){return Gt===E.keyPath}),Zt=0,ln=vt.results.length;Zt<ln;++Zt)Nt[Zt][qt]=vt.results[Zt];X(jt.name).addKeys(Nt)})),I.mutatedParts=Vs(I.mutatedParts||{},it),vt})}}),z=function(X){var V=X.query,X=V.index,V=V.range;return[X,new on((X=V.lower)!==null&&X!==void 0?X:u.MIN_KEY,(V=V.upper)!==null&&V!==void 0?V:u.MAX_KEY)]},P={get:function(F){return[E,new on(F.key)]},getMany:function(F){return[E,new on().addKeys(F.keys)]},count:z,query:z,openCursor:z};return c(P).forEach(function(F){G[F]=function(X){var V=Mt.subscr,q=!!V,W=pi(Mt,C)&&vc(F,X)?X.obsSet={}:V;if(q){var I=function(St){return St="idb://".concat(g,"/").concat(x,"/").concat(St),W[St]||(W[St]=new on)},it=I(""),ct=I(":dels"),V=P[F](X),q=V[0],V=V[1];if((F==="query"&&q.isPrimaryKey&&!X.values?ct:I(q.name||"")).add(V),!q.isPrimaryKey){if(F!=="count"){var xt=F==="query"&&L&&X.values&&C.query(i(i({},X),{values:!1}));return C[F].apply(this,arguments).then(function(St){if(F==="query"){if(L&&X.values)return xt.then(function(Nt){return Nt=Nt.result,it.addKeys(Nt),St});var Ct=X.values?St.result.map(j):St.result;(X.values?it:ct).addKeys(Ct)}else if(F==="openCursor"){var vt=St,jt=X.values;return vt&&Object.create(vt,{key:{get:function(){return ct.addKey(vt.primaryKey),vt.key}},primaryKey:{get:function(){var Nt=vt.primaryKey;return ct.addKey(Nt),Nt}},value:{get:function(){return jt&&it.addKey(vt.primaryKey),vt.value}}})}return St})}ct.add(v)}}return C[F].apply(this,arguments)}}),G}})}};function bc(u,g,v){if(v.numFailures===0)return g;if(g.type==="deleteRange")return null;var x=g.keys?g.keys.length:"values"in g&&g.values?g.values.length:1;return v.numFailures===x?null:(g=i({},g),d(g.keys)&&(g.keys=g.keys.filter(function(C,w){return!(w in v.failures)})),"values"in g&&d(g.values)&&(g.values=g.values.filter(function(C,w){return!(w in v.failures)})),g)}function Ks(u,g){return v=u,((x=g).lower===void 0||(x.lowerOpen?0<ee(v,x.lower):0<=ee(v,x.lower)))&&(u=u,(g=g).upper===void 0||(g.upperOpen?ee(u,g.upper)<0:ee(u,g.upper)<=0));var v,x}function sl(u,g,P,x,C,w){if(!P||P.length===0)return u;var E=g.query.index,j=E.multiEntry,L=g.query.range,N=x.schema.primaryKey.extractKey,G=E.extractKey,z=(E.lowLevelIndex||E).extractKey,P=P.reduce(function(F,X){var V=F,q=[];if(X.type==="add"||X.type==="put")for(var W=new on,I=X.values.length-1;0<=I;--I){var it,ct=X.values[I],xt=N(ct);W.hasKey(xt)||(it=G(ct),(j&&d(it)?it.some(function(vt){return Ks(vt,L)}):Ks(it,L))&&(W.addKey(xt),q.push(ct)))}switch(X.type){case"add":var wt=new on().addKeys(g.values?F.map(function(jt){return N(jt)}):F),V=F.concat(g.values?q.filter(function(jt){return jt=N(jt),!wt.hasKey(jt)&&(wt.addKey(jt),!0)}):q.map(function(jt){return N(jt)}).filter(function(jt){return!wt.hasKey(jt)&&(wt.addKey(jt),!0)}));break;case"put":var yt=new on().addKeys(X.values.map(function(jt){return N(jt)}));V=F.filter(function(jt){return!yt.hasKey(g.values?N(jt):jt)}).concat(g.values?q:q.map(function(jt){return N(jt)}));break;case"delete":var St=new on().addKeys(X.keys);V=F.filter(function(jt){return!St.hasKey(g.values?N(jt):jt)});break;case"deleteRange":var Ct=X.range;V=F.filter(function(jt){return!Ks(N(jt),Ct)})}return V},u);return P===u?u:(P.sort(function(F,X){return ee(z(F),z(X))||ee(N(F),N(X))}),g.limit&&g.limit<1/0&&(P.length>g.limit?P.length=g.limit:u.length===g.limit&&P.length<g.limit&&(C.dirty=!0)),w?Object.freeze(P):P)}function aa(u,g){return ee(u.lower,g.lower)===0&&ee(u.upper,g.upper)===0&&!!u.lowerOpen==!!g.lowerOpen&&!!u.upperOpen==!!g.upperOpen}function ns(u,g){return(function(v,x,C,w){if(v===void 0)return x!==void 0?-1:0;if(x===void 0)return 1;if((x=ee(v,x))===0){if(C&&w)return 0;if(C)return 1;if(w)return-1}return x})(u.lower,g.lower,u.lowerOpen,g.lowerOpen)<=0&&0<=(function(v,x,C,w){if(v===void 0)return x!==void 0?1:0;if(x===void 0)return-1;if((x=ee(v,x))===0){if(C&&w)return 0;if(C)return-1;if(w)return 1}return x})(u.upper,g.upper,u.upperOpen,g.upperOpen)}function Ah(u,g,v,x){u.subscribers.add(v),x.addEventListener("abort",function(){var C,w;u.subscribers.delete(v),u.subscribers.size===0&&(C=u,w=g,setTimeout(function(){C.subscribers.size===0&&_t(w,C)},3e3))})}var Ws={stack:"dbcore",level:0,name:"Cache",create:function(u){var g=u.schema.name;return i(i({},u),{transaction:function(v,x,C){var w,E,j=u.transaction(v,x,C);return x==="readwrite"&&(E=(w=new AbortController).signal,C=function(L){return function(){if(w.abort(),x==="readwrite"){for(var N=new Set,G=0,z=v;G<z.length;G++){var P=z[G],F=gi["idb://".concat(g,"/").concat(P)];if(F){var X=u.table(P),V=F.optimisticOps.filter(function(jt){return jt.trans===j});if(j._explicit&&L&&j.mutatedParts)for(var q=0,W=Object.values(F.queries.query);q<W.length;q++)for(var I=0,it=(wt=W[q]).slice();I<it.length;I++)el((yt=it[I]).obsSet,j.mutatedParts)&&(_t(wt,yt),yt.subscribers.forEach(function(jt){return N.add(jt)}));else if(0<V.length){F.optimisticOps=F.optimisticOps.filter(function(jt){return jt.trans!==j});for(var ct=0,xt=Object.values(F.queries.query);ct<xt.length;ct++)for(var wt,yt,St,Ct=0,vt=(wt=xt[ct]).slice();Ct<vt.length;Ct++)(yt=vt[Ct]).res!=null&&j.mutatedParts&&(L&&!yt.dirty?(St=Object.isFrozen(yt.res),St=sl(yt.res,yt.req,V,X,yt,St),yt.dirty?(_t(wt,yt),yt.subscribers.forEach(function(jt){return N.add(jt)})):St!==yt.res&&(yt.res=St,yt.promise=Dt.resolve({result:St}))):(yt.dirty&&_t(wt,yt),yt.subscribers.forEach(function(jt){return N.add(jt)})))}}}N.forEach(function(jt){return jt()})}}},j.addEventListener("abort",C(!1),{signal:E}),j.addEventListener("error",C(!1),{signal:E}),j.addEventListener("complete",C(!0),{signal:E})),j},table:function(v){var x=u.table(v),C=x.schema.primaryKey;return i(i({},x),{mutate:function(w){var E=Mt.trans;if(C.outbound||E.db._options.cache==="disabled"||E.explicit||E.idbtrans.mode!=="readwrite")return x.mutate(w);var j=gi["idb://".concat(g,"/").concat(v)];return j?(E=x.mutate(w),w.type!=="add"&&w.type!=="put"||!(50<=w.values.length||Ps(C,w).some(function(L){return L==null}))?(j.optimisticOps.push(w),w.mutatedParts&&Gs(w.mutatedParts),E.then(function(L){0<L.numFailures&&(_t(j.optimisticOps,w),(L=bc(0,w,L))&&j.optimisticOps.push(L),w.mutatedParts&&Gs(w.mutatedParts))}),E.catch(function(){_t(j.optimisticOps,w),w.mutatedParts&&Gs(w.mutatedParts)})):E.then(function(L){var N=bc(0,i(i({},w),{values:w.values.map(function(G,z){var P;return L.failures[z]?G:(G=(P=C.keyPath)!==null&&P!==void 0&&P.includes(".")?Pt(G):i({},G),dt(G,C.keyPath,L.results[z]),G)})}),L);j.optimisticOps.push(N),queueMicrotask(function(){return w.mutatedParts&&Gs(w.mutatedParts)})}),E):x.mutate(w)},query:function(w){if(!pi(Mt,x)||!vc("query",w))return x.query(w);var E=((N=Mt.trans)===null||N===void 0?void 0:N.db._options.cache)==="immutable",z=Mt,j=z.requery,L=z.signal,N=(function(X,V,q,W){var I=gi["idb://".concat(X,"/").concat(V)];if(!I)return[];if(!(V=I.queries[q]))return[null,!1,I,null];var it=V[(W.query?W.query.index.name:null)||""];if(!it)return[null,!1,I,null];switch(q){case"query":var ct=it.find(function(xt){return xt.req.limit===W.limit&&xt.req.values===W.values&&aa(xt.req.query.range,W.query.range)});return ct?[ct,!0,I,it]:[it.find(function(xt){return("limit"in xt.req?xt.req.limit:1/0)>=W.limit&&(!W.values||xt.req.values)&&ns(xt.req.query.range,W.query.range)}),!1,I,it];case"count":return ct=it.find(function(xt){return aa(xt.req.query.range,W.query.range)}),[ct,!!ct,I,it]}})(g,v,"query",w),G=N[0],z=N[1],P=N[2],F=N[3];return G&&z?G.obsSet=w.obsSet:(z=x.query(w).then(function(X){var V=X.result;if(G&&(G.res=V),E){for(var q=0,W=V.length;q<W;++q)Object.freeze(V[q]);Object.freeze(V)}else X.result=Pt(V);return X}).catch(function(X){return F&&G&&_t(F,G),Promise.reject(X)}),G={obsSet:w.obsSet,promise:z,subscribers:new Set,type:"query",req:w,dirty:!1},F?F.push(G):(F=[G],(P=P||(gi["idb://".concat(g,"/").concat(v)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[w.query.index.name||""]=F)),Ah(G,F,j,L),G.promise.then(function(X){return{result:sl(X.result,w,P?.optimisticOps,x,G,E)}})}})}})}};function rs(u,g){return new Proxy(u,{get:function(v,x,C){return x==="db"?g:Reflect.get(v,x,C)}})}var or=(je.prototype.version=function(u){if(isNaN(u)||u<.1)throw new Tt.Type("Given version is not a positive number");if(u=Math.round(10*u)/10,this.idbdb||this._state.isBeingOpened)throw new Tt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,u);var g=this._versions,v=g.filter(function(x){return x._cfg.version===u})[0];return v||(v=new this.Version(u),g.push(v),g.sort(Qo),v.stores({}),this._state.autoSchema=!1,v)},je.prototype._whenReady=function(u){var g=this;return this.idbdb&&(this._state.openComplete||Mt.letThrough||this._vip)?u():new Dt(function(v,x){if(g._state.openComplete)return x(new Tt.DatabaseClosed(g._state.dbOpenError));if(!g._state.isBeingOpened){if(!g._state.autoOpen)return void x(new Tt.DatabaseClosed);g.open().catch(he)}g._state.dbReadyPromise.then(v,x)}).then(u)},je.prototype.use=function(u){var g=u.stack,v=u.create,x=u.level,C=u.name;return C&&this.unuse({stack:g,name:C}),u=this._middlewares[g]||(this._middlewares[g]=[]),u.push({stack:g,create:v,level:x??10,name:C}),u.sort(function(w,E){return w.level-E.level}),this},je.prototype.unuse=function(u){var g=u.stack,v=u.name,x=u.create;return g&&this._middlewares[g]&&(this._middlewares[g]=this._middlewares[g].filter(function(C){return x?C.create!==x:!!v&&C.name!==v})),this},je.prototype.open=function(){var u=this;return Kn(fn,function(){return Eh(u)})},je.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var u=this._state,g=si.indexOf(this);if(0<=g&&si.splice(g,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}u.isBeingOpened||(u.dbReadyPromise=new Dt(function(v){u.dbReadyResolve=v}),u.openCanceller=new Dt(function(v,x){u.cancelOpen=x}))},je.prototype.close=function(v){var g=(v===void 0?{disableAutoOpen:!0}:v).disableAutoOpen,v=this._state;g?(v.isBeingOpened&&v.cancelOpen(new Tt.DatabaseClosed),this._close(),v.autoOpen=!1,v.dbOpenError=new Tt.DatabaseClosed):(this._close(),v.autoOpen=this._options.autoOpen||v.isBeingOpened,v.openComplete=!1,v.dbOpenError=null)},je.prototype.delete=function(u){var g=this;u===void 0&&(u={disableAutoOpen:!0});var v=0<arguments.length&&typeof arguments[0]!="object",x=this._state;return new Dt(function(C,w){function E(){g.close(u);var j=g._deps.indexedDB.deleteDatabase(g.name);j.onsuccess=Te(function(){var L,N,G;L=g._deps,N=g.name,G=L.indexedDB,L=L.IDBKeyRange,Ys(G)||N===qa||Io(G,L).delete(N).catch(he),C()}),j.onerror=Qn(w),j.onblocked=g._fireOnBlocked}if(v)throw new Tt.InvalidArgument("Invalid closeOptions argument to db.delete()");x.isBeingOpened?x.dbReadyPromise.then(E):E()})},je.prototype.backendDB=function(){return this.idbdb},je.prototype.isOpen=function(){return this.idbdb!==null},je.prototype.hasBeenClosed=function(){var u=this._state.dbOpenError;return u&&u.name==="DatabaseClosed"},je.prototype.hasFailed=function(){return this._state.dbOpenError!==null},je.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(je.prototype,"tables",{get:function(){var u=this;return c(this._allTables).map(function(g){return u._allTables[g]})},enumerable:!1,configurable:!0}),je.prototype.transaction=function(){var u=(function(g,v,x){var C=arguments.length;if(C<2)throw new Tt.InvalidArgument("Too few arguments");for(var w=new Array(C-1);--C;)w[C-1]=arguments[C];return x=w.pop(),[g,Vt(w),x]}).apply(this,arguments);return this._transaction.apply(this,u)},je.prototype._transaction=function(u,g,v){var x=this,C=Mt.trans;C&&C.db===this&&u.indexOf("!")===-1||(C=null);var w,E,j=u.indexOf("?")!==-1;u=u.replace("!","").replace("?","");try{if(E=g.map(function(N){if(N=N instanceof x.Table?N.name:N,typeof N!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return N}),u=="r"||u===Sr)w=Sr;else{if(u!="rw"&&u!=Xr)throw new Tt.InvalidArgument("Invalid transaction mode: "+u);w=Xr}if(C){if(C.mode===Sr&&w===Xr){if(!j)throw new Tt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");C=null}C&&E.forEach(function(N){if(C&&C.storeNames.indexOf(N)===-1){if(!j)throw new Tt.SubTransaction("Table "+N+" not included in parent transaction.");C=null}}),j&&C&&!C.active&&(C=null)}}catch(N){return C?C._promise(null,function(G,z){z(N)}):_e(N)}var L=(function N(G,z,P,F,X){return Dt.resolve().then(function(){var V=Mt.transless||Mt,q=G._createTransaction(z,P,G._dbSchema,F);if(q.explicit=!0,V={trans:q,transless:V},F)q.idbtrans=F.idbtrans;else try{q.create(),q.idbtrans._explicit=!0,G._state.PR1398_maxLoop=3}catch(it){return it.name===te.InvalidState&&G.isOpen()&&0<--G._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),G.close({disableAutoOpen:!1}),G.open().then(function(){return N(G,z,P,null,X)})):_e(it)}var W,I=R(X);return I&&He(),V=Dt.follow(function(){var it;(W=X.call(q,q))&&(I?(it=Dn.bind(null,null),W.then(it,it)):typeof W.next=="function"&&typeof W.throw=="function"&&(W=es(W)))},V),(W&&typeof W.then=="function"?Dt.resolve(W).then(function(it){return q.active?it:_e(new Tt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):V.then(function(){return W})).then(function(it){return F&&q._resolve(),q._completion.then(function(){return it})}).catch(function(it){return q._reject(it),_e(it)})})}).bind(null,this,w,E,C,v);return C?C._promise(w,L,"lock"):Mt.trans?Kn(Mt.transless,function(){return x._whenReady(L)}):this._whenReady(L)},je.prototype.table=function(u){if(!_(this._allTables,u))throw new Tt.InvalidTable("Table ".concat(u," does not exist"));return this._allTables[u]},je);function je(u,g){var v=this;this._middlewares={},this.verno=0;var x=je.dependencies;this._options=g=i({addons:je.addons,autoOpen:!0,indexedDB:x.indexedDB,IDBKeyRange:x.IDBKeyRange,cache:"cloned"},g),this._deps={indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange},x=g.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var C,w,E,j,L,N={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:he,dbReadyPromise:null,cancelOpen:he,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:g.autoOpen};N.dbReadyPromise=new Dt(function(z){N.dbReadyResolve=z}),N.openCanceller=new Dt(function(z,P){N.cancelOpen=P}),this._state=N,this.name=u,this.on=Wa(this,"populate","blocked","versionchange","close",{ready:[Ba,he]}),this.once=function(z,P){var F=function(){for(var X=[],V=0;V<arguments.length;V++)X[V]=arguments[V];v.on(z).unsubscribe(F),P.apply(v,X)};return v.on(z,F)},this.on.ready.subscribe=bt(this.on.ready.subscribe,function(z){return function(P,F){je.vip(function(){var X,V=v._state;V.openComplete?(V.dbOpenError||Dt.resolve().then(P),F&&z(P)):V.onReadyBeingFired?(V.onReadyBeingFired.push(P),F&&z(P)):(z(P),X=v,F||z(function q(){X.on.ready.unsubscribe(P),X.on.ready.unsubscribe(q)}))})}}),this.Collection=(C=this,an(Th.prototype,function(W,q){this.db=C;var F=Vo,X=null;if(q)try{F=q()}catch(I){X=I}var V=W._ctx,q=V.table,W=q.hook.reading.fire;this._ctx={table:q,index:V.index,isPrimKey:!V.index||q.schema.primKey.keyPath&&V.index===q.schema.primKey.name,range:F,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:X,or:V.or,valueMapper:W!==Ki?W:null}})),this.Table=(w=this,an(Go.prototype,function(z,P,F){this.db=w,this._tx=F,this.name=z,this.schema=P,this.hook=w._allTables[z]?w._allTables[z].hook:Wa(null,{creating:[Fo,he],reading:[ni,Ki],updating:[ac,he],deleting:[Sh,he]})})),this.Transaction=(E=this,an(Wo.prototype,function(z,P,F,X,V){var q=this;z!=="readonly"&&P.forEach(function(W){W=(W=F[W])===null||W===void 0?void 0:W.yProps,W&&(P=P.concat(W.map(function(I){return I.updatesTable})))}),this.db=E,this.mode=z,this.storeNames=P,this.schema=F,this.chromeTransactionDurability=X,this.idbtrans=null,this.on=Wa(this,"complete","error","abort"),this.parent=V||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Dt(function(W,I){q._resolve=W,q._reject=I}),this._completion.then(function(){q.active=!1,q.on.complete.fire()},function(W){var I=q.active;return q.active=!1,q.on.error.fire(W),q.parent?q.parent._reject(W):I&&q.idbtrans&&q.idbtrans.abort(),_e(W)})})),this.Version=(j=this,an(Dh.prototype,function(z){this.db=j,this._cfg={version:z,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(L=this,an(ci.prototype,function(z,P,F){if(this.db=L,this._ctx={table:z,index:P===":id"?null:P,or:F},this._cmp=this._ascending=ee,this._descending=function(X,V){return ee(V,X)},this._max=function(X,V){return 0<ee(X,V)?X:V},this._min=function(X,V){return ee(X,V)<0?X:V},this._IDBKeyRange=L._deps.IDBKeyRange,!this._IDBKeyRange)throw new Tt.MissingAPI})),this.on("versionchange",function(z){0<z.newVersion?console.warn("Another connection wants to upgrade database '".concat(v.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(v.name,"'. Closing db now to resume the delete request.")),v.close({disableAutoOpen:!1})}),this.on("blocked",function(z){!z.newVersion||z.newVersion<z.oldVersion?console.warn("Dexie.delete('".concat(v.name,"') was blocked")):console.warn("Upgrade '".concat(v.name,"' blocked by other connection holding version ").concat(z.oldVersion/10))}),this._maxKey=ea(g.IDBKeyRange),this._createTransaction=function(z,P,F,X){return new v.Transaction(z,P,F,v._options.chromeTransactionDurability,X)},this._fireOnBlocked=function(z){v.on("blocked").fire(z),si.filter(function(P){return P.name===v.name&&P!==v&&!P._state.vcFired}).map(function(P){return P.on("versionchange").fire(z)})},this.use(yc),this.use(Ws),this.use(jh),this.use(Mh),this.use(mc);var G=new Proxy(this,{get:function(z,P,F){if(P==="_vip")return!0;if(P==="table")return function(V){return rs(v.table(V),G)};var X=Reflect.get(z,P,F);return X instanceof Go?rs(X,G):P==="tables"?X.map(function(V){return rs(V,G)}):P==="_createTransaction"?function(){return rs(X.apply(this,arguments),G)}:X}});this.vip=G,x.forEach(function(z){return z(v)})}var sa,Mn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",xc=(Qs.prototype.subscribe=function(u,g,v){return this._subscribe(u&&typeof u!="function"?u:{next:u,error:g,complete:v})},Qs.prototype[Mn]=function(){return this},Qs);function Qs(u){this._subscribe=u}try{sa={indexedDB:l.indexedDB||l.mozIndexedDB||l.webkitIndexedDB||l.msIndexedDB,IDBKeyRange:l.IDBKeyRange||l.webkitIDBKeyRange}}catch{sa={indexedDB:null,IDBKeyRange:null}}function _c(u){var g,v=!1,x=new xc(function(C){var w=R(u),E,j=!1,L={},N={},G={get closed(){return j},unsubscribe:function(){j||(j=!0,E&&E.abort(),z&&sn.storagemutated.unsubscribe(F))}};C.start&&C.start(G);var z=!1,P=function(){return Yr(X)},F=function(V){Vs(L,V),el(N,L)&&P()},X=function(){var V,q,W;!j&&sa.indexedDB&&(L={},V={},E&&E.abort(),E=new AbortController,W=(function(I){var it=Fr();try{w&&He();var ct=De(u,I);return ct=w?ct.finally(Dn):ct}finally{it&&rr()}})(q={subscr:V,signal:E.signal,requery:P,querier:u,trans:null}),Promise.resolve(W).then(function(I){v=!0,g=I,j||q.signal.aborted||(L={},(function(it){for(var ct in it)if(_(it,ct))return;return 1})(N=V)||z||(sn($i,F),z=!0),Yr(function(){return!j&&C.next&&C.next(I)}))},function(I){v=!1,["DatabaseClosedError","AbortError"].includes(I?.name)||j||Yr(function(){j||C.error&&C.error(I)})}))};return setTimeout(P,0),G});return x.hasValue=function(){return v},x.getValue=function(){return g},x}var mi=or;function ol(u){var g=Pr;try{Pr=!0,sn.storagemutated.fire(u),il(u,!0)}finally{Pr=g}}T(mi,i(i({},ei),{delete:function(u){return new mi(u,{addons:[]}).delete()},exists:function(u){return new mi(u,{addons:[]}).open().then(function(g){return g.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(u){try{return g=mi.dependencies,v=g.indexedDB,g=g.IDBKeyRange,(Ys(v)?Promise.resolve(v.databases()).then(function(x){return x.map(function(C){return C.name}).filter(function(C){return C!==qa})}):Io(v,g).toCollection().primaryKeys()).then(u)}catch{return _e(new Tt.MissingAPI)}var g,v},defineClass:function(){return function(u){m(this,u)}},ignoreTransaction:function(u){return Mt.trans?Kn(Mt.transless,u):u()},vip:Jo,async:function(u){return function(){try{var g=es(u.apply(this,arguments));return g&&typeof g.then=="function"?g:Dt.resolve(g)}catch(v){return _e(v)}}},spawn:function(u,g,v){try{var x=es(u.apply(v,g||[]));return x&&typeof x.then=="function"?x:Dt.resolve(x)}catch(C){return _e(C)}},currentTransaction:{get:function(){return Mt.trans||null}},waitFor:function(u,g){return g=Dt.resolve(typeof u=="function"?mi.ignoreTransaction(u):u).timeout(g||6e4),Mt.trans?Mt.trans.waitFor(g):g},Promise:Dt,debug:{get:function(){return Rn},set:function(u){sc(u)}},derive:B,extend:m,props:T,override:bt,Events:Wa,on:sn,liveQuery:_c,extendObservabilitySet:Vs,getByKeyPath:ft,setByKeyPath:dt,delByKeyPath:function(u,g){typeof g=="string"?dt(u,g,void 0):"length"in g&&[].map.call(g,function(v){dt(u,v,void 0)})},shallowClone:Ot,deepClone:Pt,getObjectDiff:qs,cmp:ee,asap:at,minKey:-1/0,addons:[],connections:si,errnames:te,dependencies:sa,cache:gi,semVer:"4.2.1",version:"4.2.1".split(".").map(function(u){return parseInt(u)}).reduce(function(u,g,v){return u+g/Math.pow(10,2*v)})})),mi.maxKey=ea(mi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(sn($i,function(u){Pr||(u=new CustomEvent(hi,{detail:u}),Pr=!0,dispatchEvent(u),Pr=!1)}),addEventListener(hi,function(u){u=u.detail,Pr||ol(u)}));var oa,Pr=!1,wn=function(){};return typeof BroadcastChannel<"u"&&((wn=function(){(oa=new BroadcastChannel(hi)).onmessage=function(u){return u.data&&ol(u.data)}})(),typeof oa.unref=="function"&&oa.unref(),sn($i,function(u){Pr||oa.postMessage(u)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(u){if(!or.disableBfCache&&u.persisted){Rn&&console.debug("Dexie: handling persisted pagehide"),oa?.close();for(var g=0,v=si;g<v.length;g++)v[g].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(u){!or.disableBfCache&&u.persisted&&(Rn&&console.debug("Dexie: handling persisted pageshow"),wn(),ol({all:new on(-1/0,[[]])}))})),Dt.rejectionMapper=function(u,g){return!u||u instanceof mt||u instanceof TypeError||u instanceof SyntaxError||!u.name||!un[u.name]?u:(g=new un[u.name](g||u.message,u),"stack"in u&&M(g,"stack",{get:function(){return this.inner.stack}}),g)},sc(Rn),i(or,Object.freeze({__proto__:null,Dexie:or,liveQuery:_c,Entity:lc,cmp:ee,PropModification:Ji,replacePrefix:function(u,g){return new Ji({replacePrefix:[u,g]})},add:function(u){return new Ji({add:u})},remove:function(u){return new Ji({remove:u})},default:or,RangeSet:on,mergeRanges:di,rangesOverlap:dc}),{default:or}),or})})(qu)),qu.exports}var y1=m1();const Ud=Oy(y1),B0=Symbol.for("Dexie"),Iu=globalThis[B0]||(globalThis[B0]=Ud);if(Ud.semVer!==Iu.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ud.semVer} and ${Iu.semVer}`);const{liveQuery:v1,mergeRanges:MS,rangesOverlap:jS,RangeSet:AS,cmp:kS,Entity:zS,PropModification:RS,replacePrefix:BS,add:LS,remove:NS,DexieYProvider:FS}=Iu;class b1 extends Iu{projects;folders;settings;constructor(){super("stitchfizzle"),this.version(1).stores({projects:"id, name, chartType, folderId, createdAt, updatedAt",folders:"id, name, parentId, createdAt",settings:"id"})}}const ws=new b1;async function x1(f){return ws.projects.get(f)}async function L0(f){return f.updatedAt=new Date,ws.projects.put(f)}async function _1(f){return ws.projects.delete(f)}const Ey="app-settings";async function S1(){const f=await ws.settings.get(Ey);if(f){const{id:t,...r}=f;return r}}async function N0(f){await ws.settings.put({...f,id:Ey})}const Jt=tg((f,t)=>({project:null,isDirty:!1,activeTool:"draw",activeColorId:null,selection:null,zoom:1,panOffset:{x:0,y:0},undoStack:[],redoStack:[],createProject:(r,i,s=Dy)=>{const l=wd(),c=g1(l,r,i,s),d={id:wd(),color:"#4A90D9",name:"Color 1",abbreviation:"C1"};return c.palette=[d],f({project:c,isDirty:!0,activeColorId:d.id,selection:null,zoom:1,panOffset:{x:0,y:0},undoStack:[],redoStack:[]}),L0(c),c},loadProject:async r=>{const i=await x1(r);return i?(f({project:i,isDirty:!1,activeColorId:i.palette[0]?.id||null,selection:null,zoom:1,panOffset:{x:0,y:0},undoStack:[],redoStack:[]}),!0):!1},saveCurrentProject:async()=>{const{project:r}=t();r&&(await L0(r),f({isDirty:!1}))},closeProject:()=>{f({project:null,isDirty:!1,activeColorId:null,selection:null,undoStack:[],redoStack:[]})},setCell:(r,i,s,l=null)=>{const{project:c}=t();if(!c?.grid)return;t().pushUndoState();const d=c.grid.cells.map((m,y)=>y===r?m.map((b,_)=>_===i?{colorId:s,symbolId:l??b.symbolId}:b):m);f({project:{...c,grid:{cells:d},updatedAt:new Date},isDirty:!0})},setCells:r=>{const{project:i}=t();if(!i?.grid)return;t().pushUndoState();const s=i.grid.cells.map(l=>[...l]);for(const{row:l,col:c,colorId:d,symbolId:m}of r)s[l]?.[c]&&(s[l][c]={colorId:d,symbolId:m??s[l][c].symbolId});f({project:{...i,grid:{cells:s},updatedAt:new Date},isDirty:!0})},fillSelection:r=>{const{project:i,selection:s}=t();if(!i?.grid||!s)return;const l=[],c=Math.min(s.startRow,s.endRow),d=Math.max(s.startRow,s.endRow),m=Math.min(s.startCol,s.endCol),y=Math.max(s.startCol,s.endCol);for(let b=c;b<=d;b++)for(let _=m;_<=y;_++)l.push({row:b,col:_,colorId:r});t().setCells(l)},setSelection:r=>f({selection:r}),clearSelection:()=>f({selection:null}),addColor:(r,i)=>{const{project:s}=t();if(!s)throw new Error("No project loaded");const l={id:wd(),color:r,name:i||`Color ${s.palette.length+1}`,abbreviation:`C${s.palette.length+1}`};return f({project:{...s,palette:[...s.palette,l],updatedAt:new Date},isDirty:!0}),l},updateColor:(r,i)=>{const{project:s}=t();s&&f({project:{...s,palette:s.palette.map(l=>l.id===r?{...l,...i}:l),updatedAt:new Date},isDirty:!0})},removeColor:r=>{const{project:i,activeColorId:s}=t();if(!i)return;let l=i.grid;l&&(l={cells:l.cells.map(d=>d.map(m=>m.colorId===r?{...m,colorId:null}:m))});const c=i.palette.filter(d=>d.id!==r);f({project:{...i,palette:c,grid:l,updatedAt:new Date},isDirty:!0,activeColorId:s===r?c[0]?.id||null:s})},setActiveColor:r=>f({activeColorId:r}),setActiveTool:r=>f({activeTool:r}),setZoom:r=>f({zoom:Math.max(.1,Math.min(10,r))}),setPanOffset:r=>f({panOffset:r}),pushUndoState:()=>{const{project:r,undoStack:i}=t();if(!r)return;const s=JSON.parse(JSON.stringify(r));f({undoStack:[...i.slice(-49),s],redoStack:[]})},undo:()=>{const{undoStack:r,project:i,redoStack:s}=t();if(r.length===0||!i)return;const l=r[r.length-1];f({project:l,undoStack:r.slice(0,-1),redoStack:[...s,JSON.parse(JSON.stringify(i))],isDirty:!0})},redo:()=>{const{redoStack:r,project:i,undoStack:s}=t();if(r.length===0||!i)return;const l=r[r.length-1];f({project:l,redoStack:r.slice(0,-1),undoStack:[...s,JSON.parse(JSON.stringify(i))],isDirty:!0})},insertRow:r=>{const{project:i}=t();if(!i?.grid)return;t().pushUndoState();const s=Array(i.settings.width).fill(null).map(()=>({colorId:null,symbolId:null})),l=[...i.grid.cells];l.splice(r,0,s),f({project:{...i,settings:{...i.settings,height:i.settings.height+1},grid:{cells:l},updatedAt:new Date},isDirty:!0})},deleteRow:r=>{const{project:i}=t();if(!i?.grid||i.settings.height<=1)return;t().pushUndoState();const s=i.grid.cells.filter((l,c)=>c!==r);f({project:{...i,settings:{...i.settings,height:i.settings.height-1},grid:{cells:s},updatedAt:new Date},isDirty:!0})},insertColumn:r=>{const{project:i}=t();if(!i?.grid)return;t().pushUndoState();const s=i.grid.cells.map(l=>{const c=[...l];return c.splice(r,0,{colorId:null,symbolId:null}),c});f({project:{...i,settings:{...i.settings,width:i.settings.width+1},grid:{cells:s},updatedAt:new Date},isDirty:!0})},deleteColumn:r=>{const{project:i}=t();if(!i?.grid||i.settings.width<=1)return;t().pushUndoState();const s=i.grid.cells.map(l=>l.filter((c,d)=>d!==r));f({project:{...i,settings:{...i.settings,width:i.settings.width-1},grid:{cells:s},updatedAt:new Date},isDirty:!0})},resizeGrid:(r,i)=>{const{project:s}=t();if(!s?.grid)return;t().pushUndoState();const l=s.grid.cells,c=[];for(let d=0;d<i;d++){c[d]=[];for(let m=0;m<r;m++)l[d]?.[m]?c[d][m]=l[d][m]:c[d][m]={colorId:null,symbolId:null}}f({project:{...s,settings:{...s.settings,width:r,height:i},grid:{cells:c},updatedAt:new Date},isDirty:!0})}})),bn=tg((f,t)=>({activeDialog:null,visiblePanels:new Set(["palette"]),sidebarOpen:!0,view:"projects",toasts:[],openDialog:r=>f({activeDialog:r}),closeDialog:()=>f({activeDialog:null}),togglePanel:r=>{const{visiblePanels:i}=t(),s=new Set(i);s.has(r)?s.delete(r):s.add(r),f({visiblePanels:s})},showPanel:r=>{const{visiblePanels:i}=t(),s=new Set(i);s.add(r),f({visiblePanels:s})},hidePanel:r=>{const{visiblePanels:i}=t(),s=new Set(i);s.delete(r),f({visiblePanels:s})},toggleSidebar:()=>f(r=>({sidebarOpen:!r.sidebarOpen})),setSidebarOpen:r=>f({sidebarOpen:r}),setView:r=>f({view:r}),addToast:(r,i="info")=>{const s=Date.now().toString();f(l=>({toasts:[...l.toasts,{id:s,message:r,type:i}]})),setTimeout(()=>{t().removeToast(s)},5e3)},removeToast:r=>{f(i=>({toasts:i.toasts.filter(s=>s.id!==r)}))}})),Ju=tg((f,t)=>({settings:Td,loaded:!1,loadSettings:async()=>{const r=await S1();r?(f({settings:r,loaded:!0}),r.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")):f({loaded:!0})},updateSettings:async r=>{const{settings:i}=t(),s={...i,...r};f({settings:s}),await N0(s),"darkMode"in r&&(r.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))},resetSettings:async()=>{f({settings:Td}),await N0(Td),document.documentElement.classList.remove("dark")},isDarkMode:()=>t().settings.darkMode,toggleDarkMode:async()=>{const{settings:r,updateSettings:i}=t();await i({darkMode:!r.darkMode})}}));function C1(){const f=Jt(T=>T.project),t=Jt(T=>T.isDirty),r=Jt(T=>T.saveCurrentProject),i=Jt(T=>T.closeProject),s=bn(T=>T.view),l=bn(T=>T.setView),c=bn(T=>T.openDialog),d=bn(T=>T.toggleSidebar),m=Ju(T=>T.toggleDarkMode),y=Ju(T=>T.isDarkMode),b=async()=>{await r()},_=()=>{i(),l("projects")};return A.jsxs("header",{className:"h-14 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between px-4 shrink-0",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"Toggle sidebar",children:A.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),A.jsx("h1",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:s==="editor"&&f?A.jsxs("span",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:_,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:"Back to projects",children:A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),f.name,t&&A.jsx("span",{className:"text-sm text-gray-400",children:"*"})]}):"StitchFizzle"})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[s==="editor"&&f&&A.jsxs(A.Fragment,{children:[A.jsx("button",{onClick:b,disabled:!t,className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"}),A.jsx("button",{onClick:()=>c("export"),className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"Export"})]}),A.jsx("button",{onClick:()=>m(),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"Toggle dark mode",children:y()?A.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:A.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):A.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:A.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})}),A.jsx("button",{onClick:()=>c("settings"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"Settings",children:A.jsxs("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]})}function w1(){const f=bn(y=>y.sidebarOpen),t=bn(y=>y.view),r=Jt(y=>y.project),i=Jt(y=>y.activeTool),s=Jt(y=>y.setActiveTool),l=Jt(y=>y.undo),c=Jt(y=>y.redo),d=Jt(y=>y.undoStack),m=Jt(y=>y.redoStack);return f?t==="editor"&&r?A.jsxs("aside",{className:"w-16 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col items-center py-4 gap-2 shrink-0",children:[A.jsx(ys,{icon:A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),active:i==="draw",onClick:()=>s("draw"),title:"Draw (D)"}),A.jsx(ys,{icon:A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),active:i==="erase",onClick:()=>s("erase"),title:"Erase (E)"}),A.jsx(ys,{icon:A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),active:i==="select",onClick:()=>s("select"),title:"Select (S)"}),A.jsx(ys,{icon:A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),active:i==="pan",onClick:()=>s("pan"),title:"Pan (Space)"}),A.jsx(ys,{icon:A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),active:i==="eyedropper",onClick:()=>s("eyedropper"),title:"Eyedropper (I)"}),A.jsx("div",{className:"h-px w-8 bg-gray-200 dark:bg-gray-700 my-2"}),A.jsx(ys,{icon:A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),onClick:l,disabled:d.length===0,title:"Undo (Ctrl+Z)"}),A.jsx(ys,{icon:A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6"})}),onClick:c,disabled:m.length===0,title:"Redo (Ctrl+Y)"})]}):A.jsxs("aside",{className:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col shrink-0",children:[A.jsxs("nav",{className:"flex-1 p-4",children:[A.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-4",children:"Navigation"}),A.jsxs("ul",{className:"space-y-1",children:[A.jsx("li",{children:A.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2 text-left text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),"My Charts"]})}),A.jsx("li",{children:A.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2 text-left text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg",children:[A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Recent"]})})]})]}),A.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"StitchFizzle v0.1.0"})})]}):null}function ys({icon:f,active:t,disabled:r,onClick:i,title:s}){return A.jsx("button",{onClick:i,disabled:r,title:s,className:`
        w-10 h-10 flex items-center justify-center rounded-lg transition-colors
        ${t?"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}
        ${r?"opacity-40 cursor-not-allowed":""}
      `,children:f})}function T1({children:f}){const t=bn(i=>i.toasts),r=bn(i=>i.removeToast);return A.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-gray-900",children:[A.jsx(C1,{}),A.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[A.jsx(w1,{}),A.jsx("main",{className:"flex-1 overflow-auto",children:f})]}),A.jsx("div",{className:"fixed bottom-4 right-4 flex flex-col gap-2 z-50",children:t.map(i=>A.jsxs("div",{className:`
              px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 min-w-64
              ${i.type==="success"?"bg-green-500 text-white":i.type==="error"?"bg-red-500 text-white":"bg-gray-800 text-white"}
            `,children:[A.jsx("span",{className:"flex-1",children:i.message}),A.jsx("button",{onClick:()=>r(i.id),className:"p-1 hover:bg-white/20 rounded",children:A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},i.id))})]})}function O1(f,t,r){var i,s;typeof f=="function"?(i=t||[],s=r):(i=[],s=t);var l=Bi.useRef({hasResult:!1,result:s,error:null}),c=Bi.useReducer(function(y){return y+1},0);c[0];var d=c[1],m=Bi.useMemo(function(){var y=typeof f=="function"?f():f;if(!y||typeof y.subscribe!="function")throw f===y?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!l.current.hasResult&&typeof window<"u"&&(typeof y.hasValue!="function"||y.hasValue()))if(typeof y.getValue=="function")l.current.result=y.getValue(),l.current.hasResult=!0;else{var b=y.subscribe(function(_){l.current.result=_,l.current.hasResult=!0});typeof b=="function"?b():b.unsubscribe()}return y},i);if(Bi.useDebugValue(l.current.result),Bi.useEffect(function(){var y=m.subscribe(function(b){var _=l.current;(_.error!==null||_.result!==b)&&(_.error=null,_.result=b,_.hasResult=!0,d())},function(b){var _=l.current;_.error!==b&&(_.error=b,d())});return typeof y=="function"?y:y.unsubscribe.bind(y)},i),l.current.error)throw l.current.error;return l.current.result}function D1(f,t,r){return O1(function(){return v1(f)},t||[],r)}const E1={c2c:"Corner to Corner (C2C)",colorwork:"Colorwork",filet:"Filet Crochet",mosaic:"Overlay Mosaic",freeform:"Freeform",tunisian:"Tunisian"},M1={c2c:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300",colorwork:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",filet:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",mosaic:"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300",freeform:"bg-pink-100 text-pink-700 dark:bg-pink-900 dark:text-pink-300",tunisian:"bg-teal-100 text-teal-700 dark:bg-teal-900 dark:text-teal-300"};function j1(){const[f,t]=me.useState(""),r=Jt(b=>b.loadProject),i=bn(b=>b.setView),s=bn(b=>b.openDialog),l=bn(b=>b.addToast),c=D1(async()=>{if(f){const b=f.toLowerCase();return ws.projects.filter(_=>_.name.toLowerCase().includes(b)).reverse().sortBy("updatedAt")}return ws.projects.reverse().sortBy("updatedAt")},[f]),d=async b=>{await r(b.id)?i("editor"):l("Failed to open project","error")},m=async(b,_)=>{_.stopPropagation(),confirm(`Are you sure you want to delete "${b.name}"?`)&&(await _1(b.id),l("Project deleted","success"))},y=b=>new Date(b).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});return A.jsxs("div",{className:"p-6",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Charts"}),A.jsxs("button",{onClick:()=>s("newProject"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Chart"]})]}),A.jsx("div",{className:"mb-6",children:A.jsxs("div",{className:"relative",children:[A.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),A.jsx("input",{type:"text",placeholder:"Search charts...",value:f,onChange:b=>t(b.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),c===void 0?A.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading..."}):c.length===0?A.jsxs("div",{className:"text-center py-12",children:[A.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),A.jsx("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"No charts yet"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Create your first crochet chart to get started"}),A.jsx("button",{onClick:()=>s("newProject"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Chart"})]}):A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:c.map(b=>A.jsxs("div",{onClick:()=>d(b),className:"group bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 cursor-pointer hover:border-blue-500 hover:shadow-md transition-all",children:[A.jsx("div",{className:"aspect-video bg-gray-100 dark:bg-gray-700 rounded-lg mb-3 flex items-center justify-center",children:A.jsx("svg",{className:"w-12 h-12 text-gray-300 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})})}),A.jsxs("div",{className:"flex items-start justify-between gap-2",children:[A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("h3",{className:"font-medium text-gray-800 dark:text-white truncate",children:b.name}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[b.settings.width," x ",b.settings.height]})]}),A.jsx("button",{onClick:_=>m(b,_),className:"p-1 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete",children:A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),A.jsxs("div",{className:"flex items-center justify-between mt-3",children:[A.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${M1[b.chartType]}`,children:E1[b.chartType]}),A.jsx("span",{className:"text-xs text-gray-400",children:y(b.updatedAt)})]})]},b.id))})]})}const A1=[{type:"colorwork",name:"Colorwork",description:"Graphgans, pixel designs, tapestry crochet",icon:A.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 32 32",fill:"currentColor",children:[A.jsx("rect",{x:"4",y:"4",width:"8",height:"8"}),A.jsx("rect",{x:"12",y:"4",width:"8",height:"8",opacity:"0.5"}),A.jsx("rect",{x:"20",y:"4",width:"8",height:"8"}),A.jsx("rect",{x:"4",y:"12",width:"8",height:"8",opacity:"0.5"}),A.jsx("rect",{x:"12",y:"12",width:"8",height:"8"}),A.jsx("rect",{x:"20",y:"12",width:"8",height:"8",opacity:"0.5"}),A.jsx("rect",{x:"4",y:"20",width:"8",height:"8"}),A.jsx("rect",{x:"12",y:"20",width:"8",height:"8",opacity:"0.5"}),A.jsx("rect",{x:"20",y:"20",width:"8",height:"8"})]})},{type:"c2c",name:"Corner to Corner (C2C)",description:"Diagonal colorwork, worked corner to corner",icon:A.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 32 32",fill:"currentColor",children:[A.jsx("rect",{x:"4",y:"4",width:"8",height:"8",transform:"rotate(45 8 8)"}),A.jsx("rect",{x:"12",y:"12",width:"8",height:"8",transform:"rotate(45 16 16)",opacity:"0.5"}),A.jsx("rect",{x:"20",y:"20",width:"8",height:"8",transform:"rotate(45 24 24)"})]})},{type:"filet",name:"Filet Crochet",description:"Open and filled squares pattern",icon:A.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 32 32",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("rect",{x:"4",y:"4",width:"8",height:"8"}),A.jsx("rect",{x:"12",y:"4",width:"8",height:"8",fill:"currentColor"}),A.jsx("rect",{x:"20",y:"4",width:"8",height:"8"}),A.jsx("rect",{x:"4",y:"12",width:"8",height:"8",fill:"currentColor"}),A.jsx("rect",{x:"12",y:"12",width:"8",height:"8"}),A.jsx("rect",{x:"20",y:"12",width:"8",height:"8",fill:"currentColor"}),A.jsx("rect",{x:"4",y:"20",width:"8",height:"8"}),A.jsx("rect",{x:"12",y:"20",width:"8",height:"8",fill:"currentColor"}),A.jsx("rect",{x:"20",y:"20",width:"8",height:"8"})]})},{type:"mosaic",name:"Overlay Mosaic",description:"Two-color rows with overlay stitches",icon:A.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 32 32",fill:"currentColor",children:[A.jsx("rect",{x:"4",y:"4",width:"24",height:"4"}),A.jsx("rect",{x:"4",y:"12",width:"24",height:"4",opacity:"0.5"}),A.jsx("rect",{x:"4",y:"20",width:"24",height:"4"}),A.jsx("text",{x:"16",y:"18",textAnchor:"middle",fontSize:"10",fill:"currentColor",children:"X"})]})},{type:"tunisian",name:"Tunisian",description:"Forward and return pass visualization",icon:A.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 32 32",fill:"currentColor",children:[A.jsx("rect",{x:"4",y:"6",width:"24",height:"3"}),A.jsx("rect",{x:"4",y:"11",width:"24",height:"3",opacity:"0.3"}),A.jsx("rect",{x:"4",y:"16",width:"24",height:"3"}),A.jsx("rect",{x:"4",y:"21",width:"24",height:"3",opacity:"0.3"})]})},{type:"freeform",name:"Freeform",description:"Place symbols freely, create custom patterns",icon:A.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 32 32",fill:"currentColor",children:[A.jsx("circle",{cx:"10",cy:"10",r:"4"}),A.jsx("circle",{cx:"22",cy:"8",r:"3",opacity:"0.5"}),A.jsx("circle",{cx:"16",cy:"18",r:"5"}),A.jsx("circle",{cx:"8",cy:"24",r:"3",opacity:"0.5"}),A.jsx("circle",{cx:"24",cy:"22",r:"4"})]})}];function k1(){const f=Ju(M=>M.settings),t=Jt(M=>M.createProject),r=bn(M=>M.closeDialog),i=bn(M=>M.setView),s=bn(M=>M.addToast),[l,c]=me.useState("Untitled Chart"),[d,m]=me.useState("colorwork"),[y,b]=me.useState(f.defaultGridWidth),[_,T]=me.useState(f.defaultGridHeight),D=()=>{if(!l.trim()){s("Please enter a chart name","error");return}t(l.trim(),d,{width:y,height:_,gaugeH:f.defaultGaugeH,gaugeV:f.defaultGaugeV,gridLines:{show:!0,color:"#cccccc",thickness:1,highlight5:!0,highlight10:!0,highlight5Color:"#999999",highlight10Color:"#666666"}}),r(),i("editor"),s("Chart created","success")};return A.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-auto",children:[A.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[A.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Create New Chart"}),A.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:A.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Chart Name"}),A.jsx("input",{type:"text",value:l,onChange:M=>c(M.target.value),className:"w-full px-4 py-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter chart name"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Chart Type"}),A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:A1.map(M=>A.jsxs("button",{onClick:()=>m(M.type),className:`
                    p-4 rounded-lg border-2 text-left transition-all
                    ${d===M.type?"border-blue-500 bg-blue-50 dark:bg-blue-900/30":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}
                  `,children:[A.jsx("div",{className:`mb-2 ${d===M.type?"text-blue-600 dark:text-blue-400":"text-gray-400 dark:text-gray-500"}`,children:M.icon}),A.jsx("h3",{className:`font-medium text-sm ${d===M.type?"text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300"}`,children:M.name}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:M.description})]},M.type))})]}),d!=="freeform"&&A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Chart Size"}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Width (columns)"}),A.jsx("input",{type:"number",min:1,max:1e3,value:y,onChange:M=>b(Math.max(1,parseInt(M.target.value)||1)),className:"w-full px-4 py-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),A.jsx("span",{className:"text-gray-400 mt-5",children:"x"}),A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Height (rows)"}),A.jsx("input",{type:"number",min:1,max:1e3,value:_,onChange:M=>T(Math.max(1,parseInt(M.target.value)||1)),className:"w-full px-4 py-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),A.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[A.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),A.jsx("button",{onClick:D,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Chart"})]})]})})}function H(f,t,r){return(t=(function(i){var s=(function(l,c){if(typeof l!="object"||!l)return l;var d=l[Symbol.toPrimitive];if(d!==void 0){var m=d.call(l,c);if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(l)})(i,"string");return typeof s=="symbol"?s:s+""})(t))in f?Object.defineProperty(f,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):f[t]=r,f}function F0(f,t){var r=Object.keys(f);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(f);t&&(i=i.filter((function(s){return Object.getOwnPropertyDescriptor(f,s).enumerable}))),r.push.apply(r,i)}return r}function Y(f){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F0(Object(r),!0).forEach((function(i){H(f,i,r[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(r)):F0(Object(r)).forEach((function(i){Object.defineProperty(f,i,Object.getOwnPropertyDescriptor(r,i))}))}return f}function ze(f,t){if(f==null)return{};var r,i,s=(function(c,d){if(c==null)return{};var m={};for(var y in c)if({}.hasOwnProperty.call(c,y)){if(d.indexOf(y)>=0)continue;m[y]=c[y]}return m})(f,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(f);for(i=0;i<l.length;i++)r=l[i],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(f,r)&&(s[r]=f[r])}return s}function ti(f,t){return t||(t=f.slice(0)),Object.freeze(Object.defineProperties(f,{raw:{value:Object.freeze(t)}}))}class U0{constructor(){H(this,"browserShadowBlurConstant",1),H(this,"DPI",96),H(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),H(this,"perfLimitSizeTotal",2097152),H(this,"maxCacheSideLimit",4096),H(this,"minCacheSideLimit",256),H(this,"disableStyleCopyPaste",!1),H(this,"enableGLFiltering",!0),H(this,"textureSize",4096),H(this,"forceGLPutImageData",!1),H(this,"cachesBoundsOfCurve",!1),H(this,"fontPaths",{}),H(this,"NUM_FRACTION_DIGITS",4)}}const ue=new class extends U0{constructor(f){super(),this.configure(f)}configure(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,f)}addFonts(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=Y(Y({},this.fontPaths),f)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach((f=>{delete this.fontPaths[f]}))}clearFonts(){this.fontPaths={}}restoreDefaults(f){const t=new U0,r=f?.reduce(((i,s)=>(i[s]=t[s],i)),{})||t;this.configure(r)}},ka=function(f){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return console[f]("fabric",...r)};class Jr extends Error{constructor(t,r){super("fabric: ".concat(t),r)}}class z1 extends Jr{constructor(t){super("".concat(t," 'options.signal' is in 'aborted' state"))}}class R1{}class B1 extends R1{testPrecision(t,r){const i="precision ".concat(r,` float;
void main(){}`),s=t.createShader(t.FRAGMENT_SHADER);return!!s&&(t.shaderSource(s,i),t.compileShader(s),!!t.getShaderParameter(s,t.COMPILE_STATUS))}queryWebGL(t){const r=t.getContext("webgl");r&&(this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find((i=>this.testPrecision(r,i))),r.getExtension("WEBGL_lose_context").loseContext(),ka("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(t){return!!this.maxTextureSize&&this.maxTextureSize>=t}}const L1={};let H0;const $r=()=>H0||(H0={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new B1,dispose(){},copyPasteData:L1}),Ao=()=>$r().document,hh=()=>$r().window,My=()=>{var f;return Math.max((f=ue.devicePixelRatio)!==null&&f!==void 0?f:hh().devicePixelRatio,1)},Pl=new class{constructor(){H(this,"boundsOfCurveCache",{}),this.charWidthsCache=new Map}getFontCache(f){let{fontFamily:t,fontStyle:r,fontWeight:i}=f;t=t.toLowerCase();const s=this.charWidthsCache;s.has(t)||s.set(t,new Map);const l=s.get(t),c="".concat(r.toLowerCase(),"_").concat((i+"").toLowerCase());return l.has(c)||l.set(c,new Map),l.get(c)}clearFontCache(f){f?this.charWidthsCache.delete((f||"").toLowerCase()):this.charWidthsCache=new Map}limitDimsByArea(f){const{perfLimitSizeTotal:t}=ue,r=Math.sqrt(t*f);return[Math.floor(r),Math.floor(t/r)]}},Hd="6.9.1";function Pu(){}const nc=Math.PI/2,$u=2*Math.PI,eg=Math.PI/180,zn=Object.freeze([1,0,0,1,0,0]),ng=16,ja=.4477152502,ne="center",ye="left",Vn="top",Yd="bottom",Ge="right",Gn="none",rg=/\r?\n/,jy="moving",fh="scaling",Ay="rotating",ig="rotate",ky="skewing",Zl="resizing",N1="modifyPoly",F1="modifyPath",th="changed",dh="scale",Pn="scaleX",vr="scaleY",ko="skewX",zo="skewY",nn="fill",qn="stroke",eh="modified",_o="json",Od="svg",At=new class{constructor(){this[_o]=new Map,this[Od]=new Map}has(f){return this[_o].has(f)}getClass(f){const t=this[_o].get(f);if(!t)throw new Jr("No class registered for ".concat(f));return t}setClass(f,t){t?this[_o].set(t,f):(this[_o].set(f.type,f),this[_o].set(f.type.toLowerCase(),f))}getSVGClass(f){return this[Od].get(f)}setSVGClass(f,t){this[Od].set(t??f.type.toLowerCase(),f)}},nh=new class extends Array{remove(f){const t=this.indexOf(f);t>-1&&this.splice(t,1)}cancelAll(){const f=this.splice(0);return f.forEach((t=>t.abort())),f}cancelByCanvas(f){if(!f)return[];const t=this.filter((r=>{var i;return r.target===f||typeof r.target=="object"&&((i=r.target)===null||i===void 0?void 0:i.canvas)===f}));return t.forEach((r=>r.abort())),t}cancelByTarget(f){if(!f)return[];const t=this.filter((r=>r.target===f));return t.forEach((r=>r.abort())),t}};class U1{constructor(){H(this,"__eventListeners",{})}on(t,r){if(this.__eventListeners||(this.__eventListeners={}),typeof t=="object")return Object.entries(t).forEach((i=>{let[s,l]=i;this.on(s,l)})),()=>this.off(t);if(r){const i=t;return this.__eventListeners[i]||(this.__eventListeners[i]=[]),this.__eventListeners[i].push(r),()=>this.off(i,r)}return()=>!1}once(t,r){if(typeof t=="object"){const i=[];return Object.entries(t).forEach((s=>{let[l,c]=s;i.push(this.once(l,c))})),()=>i.forEach((s=>s()))}if(r){const i=this.on(t,(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];r.call(this,...l),i()}));return i}return()=>!1}_removeEventListener(t,r){if(this.__eventListeners[t])if(r){const i=this.__eventListeners[t],s=i.indexOf(r);s>-1&&i.splice(s,1)}else this.__eventListeners[t]=[]}off(t,r){if(this.__eventListeners)if(t===void 0)for(const i in this.__eventListeners)this._removeEventListener(i);else typeof t=="object"?Object.entries(t).forEach((i=>{let[s,l]=i;this._removeEventListener(s,l)})):this._removeEventListener(t,r)}fire(t,r){var i;if(!this.__eventListeners)return;const s=(i=this.__eventListeners[t])===null||i===void 0?void 0:i.concat();if(s)for(let l=0;l<s.length;l++)s[l].call(this,r||{})}}const Co=(f,t)=>{const r=f.indexOf(t);return r!==-1&&f.splice(r,1),f},Yi=f=>{if(f===0)return 1;switch(Math.abs(f)/nc){case 1:case 3:return 0;case 2:return-1}return Math.cos(f)},Xi=f=>{if(f===0)return 0;const t=f/nc,r=Math.sign(f);switch(t){case 1:return r;case 2:return 0;case 3:return-r}return Math.sin(f)};class et{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof t=="object"?(this.x=t.x,this.y=t.y):(this.x=t,this.y=r)}add(t){return new et(this.x+t.x,this.y+t.y)}addEquals(t){return this.x+=t.x,this.y+=t.y,this}scalarAdd(t){return new et(this.x+t,this.y+t)}scalarAddEquals(t){return this.x+=t,this.y+=t,this}subtract(t){return new et(this.x-t.x,this.y-t.y)}subtractEquals(t){return this.x-=t.x,this.y-=t.y,this}scalarSubtract(t){return new et(this.x-t,this.y-t)}scalarSubtractEquals(t){return this.x-=t,this.y-=t,this}multiply(t){return new et(this.x*t.x,this.y*t.y)}scalarMultiply(t){return new et(this.x*t,this.y*t)}scalarMultiplyEquals(t){return this.x*=t,this.y*=t,this}divide(t){return new et(this.x/t.x,this.y/t.y)}scalarDivide(t){return new et(this.x/t,this.y/t)}scalarDivideEquals(t){return this.x/=t,this.y/=t,this}eq(t){return this.x===t.x&&this.y===t.y}lt(t){return this.x<t.x&&this.y<t.y}lte(t){return this.x<=t.x&&this.y<=t.y}gt(t){return this.x>t.x&&this.y>t.y}gte(t){return this.x>=t.x&&this.y>=t.y}lerp(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return r=Math.max(Math.min(1,r),0),new et(this.x+(t.x-this.x)*r,this.y+(t.y-this.y)*r)}distanceFrom(t){const r=this.x-t.x,i=this.y-t.y;return Math.sqrt(r*r+i*i)}midPointFrom(t){return this.lerp(t)}min(t){return new et(Math.min(this.x,t.x),Math.min(this.y,t.y))}max(t){return new et(Math.max(this.x,t.x),Math.max(this.y,t.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(t,r){return this.x=t,this.y=r,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setFromPoint(t){return this.x=t.x,this.y=t.y,this}swap(t){const r=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=r,t.y=i}clone(){return new et(this.x,this.y)}rotate(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ag;const i=Xi(t),s=Yi(t),l=this.subtract(r);return new et(l.x*s-l.y*i,l.x*i+l.y*s).add(r)}transform(t){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new et(t[0]*this.x+t[2]*this.y+(r?0:t[4]),t[1]*this.x+t[3]*this.y+(r?0:t[5]))}}const ag=new et(0,0),Ku=f=>!!f&&Array.isArray(f._objects);function zy(f){class t extends f{constructor(){super(...arguments),H(this,"_objects",[])}_onObjectAdded(i){}_onObjectRemoved(i){}_onStackOrderChanged(i){}add(){for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];const c=this._objects.push(...s);return s.forEach((d=>this._onObjectAdded(d))),c}insertAt(i){for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];return this._objects.splice(i,0,...l),l.forEach((d=>this._onObjectAdded(d))),this._objects.length}remove(){const i=this._objects,s=[];for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];return c.forEach((m=>{const y=i.indexOf(m);y!==-1&&(i.splice(y,1),s.push(m),this._onObjectRemoved(m))})),s}forEachObject(i){this.getObjects().forEach(((s,l,c)=>i(s,l,c)))}getObjects(){for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return s.length===0?[...this._objects]:this._objects.filter((c=>c.isType(...s)))}item(i){return this._objects[i]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(i,s){return!!this._objects.includes(i)||!!s&&this._objects.some((l=>l instanceof t&&l.contains(i,!0)))}complexity(){return this._objects.reduce(((i,s)=>i+=s.complexity?s.complexity():0),0)}sendObjectToBack(i){return!(!i||i===this._objects[0])&&(Co(this._objects,i),this._objects.unshift(i),this._onStackOrderChanged(i),!0)}bringObjectToFront(i){return!(!i||i===this._objects[this._objects.length-1])&&(Co(this._objects,i),this._objects.push(i),this._onStackOrderChanged(i),!0)}sendObjectBackwards(i,s){if(!i)return!1;const l=this._objects.indexOf(i);if(l!==0){const c=this.findNewLowerIndex(i,l,s);return Co(this._objects,i),this._objects.splice(c,0,i),this._onStackOrderChanged(i),!0}return!1}bringObjectForward(i,s){if(!i)return!1;const l=this._objects.indexOf(i);if(l!==this._objects.length-1){const c=this.findNewUpperIndex(i,l,s);return Co(this._objects,i),this._objects.splice(c,0,i),this._onStackOrderChanged(i),!0}return!1}moveObjectTo(i,s){return i!==this._objects[s]&&(Co(this._objects,i),this._objects.splice(s,0,i),this._onStackOrderChanged(i),!0)}findNewLowerIndex(i,s,l){let c;if(l){c=s;for(let d=s-1;d>=0;--d)if(i.isOverlapping(this._objects[d])){c=d;break}}else c=s-1;return c}findNewUpperIndex(i,s,l){let c;if(l){c=s;for(let d=s+1;d<this._objects.length;++d)if(i.isOverlapping(this._objects[d])){c=d;break}}else c=s+1;return c}collectObjects(i){let{left:s,top:l,width:c,height:d}=i,{includeIntersecting:m=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const y=[],b=new et(s,l),_=b.add(new et(c,d));for(let T=this._objects.length-1;T>=0;T--){const D=this._objects[T];D.selectable&&D.visible&&(m&&D.intersectsWithRect(b,_)||D.isContainedWithinRect(b,_)||m&&D.containsPoint(b)||m&&D.containsPoint(_))&&y.push(D)}return y}}return t}class Ry extends U1{_setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const r in t)this.set(r,t[r])}_setObject(t){for(const r in t)this._set(r,t[r])}set(t,r){return typeof t=="object"?this._setObject(t):this._set(t,r),this}_set(t,r){this[t]=r}toggle(t){const r=this.get(t);return typeof r=="boolean"&&this.set(t,!r),this}get(t){return this[t]}}function Wu(f){return hh().requestAnimationFrame(f)}function H1(f){return hh().cancelAnimationFrame(f)}let Y1=0;const za=()=>Y1++,Vi=()=>{const f=Ao().createElement("canvas");if(!f||f.getContext===void 0)throw new Jr("Failed to create `canvas` element");return f},X1=()=>Ao().createElement("img"),br=f=>{const t=Vi();return t.width=f.width,t.height=f.height,t},By=(f,t,r)=>f.toDataURL("image/".concat(t),r),Ly=(f,t,r)=>new Promise(((i,s)=>{f.toBlob(i,"image/".concat(t),r)})),qe=f=>f*eg,Gi=f=>f/eg,V1=f=>f.every(((t,r)=>t===zn[r])),Xn=(f,t,r)=>new et(f).transform(t,r),kr=f=>{const t=1/(f[0]*f[3]-f[1]*f[2]),r=[t*f[3],-t*f[1],-t*f[2],t*f[0],0,0],{x:i,y:s}=new et(f[4],f[5]).transform(r,!0);return r[4]=-i,r[5]=-s,r},xn=(f,t,r)=>[f[0]*t[0]+f[2]*t[1],f[1]*t[0]+f[3]*t[1],f[0]*t[2]+f[2]*t[3],f[1]*t[2]+f[3]*t[3],r?0:f[0]*t[4]+f[2]*t[5]+f[4],r?0:f[1]*t[4]+f[3]*t[5]+f[5]],sg=(f,t)=>f.reduceRight(((r,i)=>i&&r?xn(i,r,t):i||r),void 0)||zn.concat(),Ny=f=>{let[t,r]=f;return Math.atan2(r,t)},rh=f=>{const t=Ny(f),r=Math.pow(f[0],2)+Math.pow(f[1],2),i=Math.sqrt(r),s=(f[0]*f[3]-f[2]*f[1])/i,l=Math.atan2(f[0]*f[2]+f[1]*f[3],r);return{angle:Gi(t),scaleX:i,scaleY:s,skewX:Gi(l),skewY:0,translateX:f[4]||0,translateY:f[5]||0}},rc=function(f){return[1,0,0,1,f,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Ro(){let{angle:f=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:t=0,y:r=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=qe(f),s=Yi(i),l=Xi(i);return[s,l,-l,s,t?t-(s*t-l*r):0,r?r-(l*t+s*r):0]}const og=function(f){return[f,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:f,0,0]},Fy=f=>Math.tan(qe(f)),Uy=f=>[1,0,Fy(f),1,0,0],Hy=f=>[1,Fy(f),0,1,0,0],gh=f=>{let{scaleX:t=1,scaleY:r=1,flipX:i=!1,flipY:s=!1,skewX:l=0,skewY:c=0}=f,d=og(i?-t:t,s?-r:r);return l&&(d=xn(d,Uy(l),!0)),c&&(d=xn(d,Hy(c),!0)),d},G1=f=>{const{translateX:t=0,translateY:r=0,angle:i=0}=f;let s=rc(t,r);i&&(s=xn(s,Ro({angle:i})));const l=gh(f);return V1(l)||(s=xn(s,l)),s},Qu=function(f){let{signal:t,crossOrigin:r=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((function(i,s){if(t&&t.aborted)return s(new z1("loadImage"));const l=X1();let c;t&&(c=function(m){l.src="",s(m)},t.addEventListener("abort",c,{once:!0}));const d=function(){l.onload=l.onerror=null,c&&t?.removeEventListener("abort",c),i(l)};f?(l.onload=d,l.onerror=function(){c&&t?.removeEventListener("abort",c),s(new Jr("Error loading ".concat(l.src)))},r&&(l.crossOrigin=r),l.src=f):d()}))},Il=function(f){let{signal:t,reviver:r=Pu}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(((i,s)=>{const l=[];t&&t.addEventListener("abort",s,{once:!0}),Promise.all(f.map((c=>At.getClass(c.type).fromObject(c,{signal:t}).then((d=>(r(c,d),l.push(d),d)))))).then(i).catch((c=>{l.forEach((d=>{d.dispose&&d.dispose()})),s(c)})).finally((()=>{t&&t.removeEventListener("abort",s)}))}))},ph=function(f){let{signal:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(((r,i)=>{const s=[];t&&t.addEventListener("abort",i,{once:!0});const l=Object.values(f).map((d=>d&&d.type&&At.has(d.type)?Il([d],{signal:t}).then((m=>{let[y]=m;return s.push(y),y})):d)),c=Object.keys(f);Promise.all(l).then((d=>d.reduce(((m,y,b)=>(m[c[b]]=y,m)),{}))).then(r).catch((d=>{s.forEach((m=>{m.dispose&&m.dispose()})),i(d)})).finally((()=>{t&&t.removeEventListener("abort",i)}))}))},Bo=function(f){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce(((t,r)=>(r in f&&(t[r]=f[r]),t)),{})},lg=(f,t)=>Object.keys(f).reduce(((r,i)=>(t(f[i],i,f)&&(r[i]=f[i]),r)),{}),Ee=(f,t)=>parseFloat(Number(f).toFixed(t)),Jl=f=>"matrix("+f.map((t=>Ee(t,ue.NUM_FRACTION_DIGITS))).join(" ")+")",yr=f=>!!f&&f.toLive!==void 0,Y0=f=>!!f&&typeof f.toObject=="function",X0=f=>!!f&&f.offsetX!==void 0&&"source"in f,vs=f=>!!f&&"multiSelectionStacking"in f;function Yy(f){const t=f&&Ar(f);let r=0,i=0;if(!f||!t)return{left:r,top:i};let s=f;const l=t.documentElement,c=t.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===t?(r=c.scrollLeft||l.scrollLeft||0,i=c.scrollTop||l.scrollTop||0):(r+=s.scrollLeft||0,i+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:r,top:i}}const Ar=f=>f.ownerDocument||null,Xy=f=>{var t;return((t=f.ownerDocument)===null||t===void 0?void 0:t.defaultView)||null},Vy=function(f,t,r){let{width:i,height:s}=r,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;f.width=i,f.height=s,l>1&&(f.setAttribute("width",(i*l).toString()),f.setAttribute("height",(s*l).toString()),t.scale(l,l))},Xd=(f,t)=>{let{width:r,height:i}=t;r&&(f.style.width=typeof r=="number"?"".concat(r,"px"):r),i&&(f.style.height=typeof i=="number"?"".concat(i,"px"):i)};function V0(f){return f.onselectstart!==void 0&&(f.onselectstart=()=>!1),f.style.userSelect=Gn,f}class Gy{constructor(t){H(this,"_originalCanvasStyle",void 0),H(this,"lower",void 0);const r=this.createLowerCanvas(t);this.lower={el:r,ctx:r.getContext("2d")}}createLowerCanvas(t){const r=(i=t)&&i.getContext!==void 0?t:t&&Ao().getElementById(t)||Vi();var i;if(r.hasAttribute("data-fabric"))throw new Jr("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=r.style.cssText,r.setAttribute("data-fabric","main"),r.classList.add("lower-canvas"),r}cleanupDOM(t){let{width:r,height:i}=t;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width","".concat(r)),s.setAttribute("height","".concat(i)),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(t,r){const{el:i,ctx:s}=this.lower;Vy(i,s,t,r)}setCSSDimensions(t){Xd(this.lower.el,t)}calcOffset(){return(function(t){var r;const i=t&&Ar(t),s={left:0,top:0};if(!i)return s;const l=((r=Xy(t))===null||r===void 0?void 0:r.getComputedStyle(t,null))||{};s.left+=parseInt(l.borderLeftWidth,10)||0,s.top+=parseInt(l.borderTopWidth,10)||0,s.left+=parseInt(l.paddingLeft,10)||0,s.top+=parseInt(l.paddingTop,10)||0;let c={left:0,top:0};const d=i.documentElement;t.getBoundingClientRect!==void 0&&(c=t.getBoundingClientRect());const m=Yy(t);return{left:c.left+m.left-(d.clientLeft||0)+s.left,top:c.top+m.top-(d.clientTop||0)+s.top}})(this.lower.el)}dispose(){$r().dispose(this.lower.el),delete this.lower}}const q1={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...zn]},P1=["objects"];class ic extends zy(Ry){get lowerCanvasEl(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.el}get contextContainer(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.ctx}static getDefaults(){return ic.ownDefaults}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(r),this.initElements(t),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(t){this.elements=new Gy(t)}add(){const t=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}insertAt(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];const l=super.insertAt(t,...i);return i.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),l}remove(){const t=super.remove(...arguments);return t.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}_onObjectAdded(t){t.canvas&&t.canvas!==this&&(ka("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t){t._set("canvas",void 0),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?My():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(t,r){return this.setDimensions({width:t},r)}setHeight(t,r){return this.setDimensions({height:t},r)}_setDimensionsImpl(t){let{cssOnly:r=!1,backstoreOnly:i=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!r){const s=Y({width:this.width,height:this.height},t);this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}i||this.elements.setCSSDimensions(t),this.calcOffset()}setDimensions(t,r){this._setDimensionsImpl(t,r),r&&r.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(t){this.viewportTransform=t,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(t,r){const i=t,s=[...this.viewportTransform],l=Xn(t,kr(s));s[0]=r,s[3]=r;const c=Xn(l,s);s[4]+=i.x-c.x,s[5]+=i.y-c.y,this.setViewportTransform(s)}setZoom(t){this.zoomToPoint(new et(0,0),t)}absolutePan(t){const r=[...this.viewportTransform];return r[4]=-t.x,r[5]=-t.y,this.setViewportTransform(r)}relativePan(t){return this.absolutePan(new et(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(t){t.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Wu((()=>this.renderAndReset())))}calcViewportBoundaries(){const t=this.width,r=this.height,i=kr(this.viewportTransform),s=Xn({x:0,y:0},i),l=Xn({x:t,y:r},i),c=s.min(l),d=s.max(l);return this.vptCoords={tl:c,tr:new et(d.x,c.y),bl:new et(c.x,d.y),br:d}}cancelRequestedRender(){this.nextRenderHandle&&(H1(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(t){}renderCanvas(t,r){if(this.destroyed)return;const i=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(t),t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.patternQuality="best",this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._renderObjects(t,r),t.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(t),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t,s)),this._renderOverlay(t),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(t),this.fire("after:render",{ctx:t}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(t,r){const i=this.viewportTransform;t.save(),t.transform(...i),t.globalCompositeOperation="destination-in",r.transform(t),t.scale(1/r.zoomX,1/r.zoomY),t.drawImage(r._cacheCanvas,-r.cacheTranslationX,-r.cacheTranslationY),t.restore()}_renderObjects(t,r){for(let i=0,s=r.length;i<s;++i)r[i]&&r[i].render(t)}_renderBackgroundOrOverlay(t,r){const i=this["".concat(r,"Color")],s=this["".concat(r,"Image")],l=this.viewportTransform,c=this["".concat(r,"Vpt")];if(!i&&!s)return;const d=yr(i);if(i){if(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=d?i.toLive(t):i,c&&t.transform(...l),d){t.transform(1,0,0,1,i.offsetX||0,i.offsetY||0);const m=i.gradientTransform||i.patternTransform;m&&t.transform(...m)}t.fill(),t.restore()}if(s){t.save();const{skipOffscreen:m}=this;this.skipOffscreen=c,c&&t.transform(...l),s.render(t),this.skipOffscreen=m,t.restore()}}_renderBackground(t){this._renderBackgroundOrOverlay(t,"background")}_renderOverlay(t){this._renderBackgroundOrOverlay(t,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new et(this.width/2,this.height/2)}centerObjectH(t){return this._centerObject(t,new et(this.getCenterPoint().x,t.getCenterPoint().y))}centerObjectV(t){return this._centerObject(t,new et(t.getCenterPoint().x,this.getCenterPoint().y))}centerObject(t){return this._centerObject(t,this.getCenterPoint())}viewportCenterObject(t){return this._centerObject(t,this.getVpCenter())}viewportCenterObjectH(t){return this._centerObject(t,new et(this.getVpCenter().x,t.getCenterPoint().y))}viewportCenterObjectV(t){return this._centerObject(t,new et(t.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Xn(this.getCenterPoint(),kr(this.viewportTransform))}_centerObject(t,r){t.setXY(r,ne,ne),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(t){return this.toDatalessObject(t)}toObject(t){return this._toObjectMethod("toObject",t)}toJSON(){return this.toObject()}toDatalessObject(t){return this._toObjectMethod("toDatalessObject",t)}_toObjectMethod(t,r){const i=this.clipPath,s=i&&!i.excludeFromExport?this._toObject(i,t,r):null;return Y(Y(Y({version:Hd},Bo(this,r)),{},{objects:this._objects.filter((l=>!l.excludeFromExport)).map((l=>this._toObject(l,t,r)))},this.__serializeBgOverlay(t,r)),s?{clipPath:s}:null)}_toObject(t,r,i){let s;this.includeDefaultValues||(s=t.includeDefaultValues,t.includeDefaultValues=!1);const l=t[r](i);return this.includeDefaultValues||(t.includeDefaultValues=!!s),l}__serializeBgOverlay(t,r){const i={},s=this.backgroundImage,l=this.overlayImage,c=this.backgroundColor,d=this.overlayColor;return yr(c)?c.excludeFromExport||(i.background=c.toObject(r)):c&&(i.background=c),yr(d)?d.excludeFromExport||(i.overlay=d.toObject(r)):d&&(i.overlay=d),s&&!s.excludeFromExport&&(i.backgroundImage=this._toObject(s,t,r)),l&&!l.excludeFromExport&&(i.overlayImage=this._toObject(l,t,r)),i}toSVG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;t.reviver=r;const i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this.clipPath&&i.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(i,"background"),this._setSVGBgOverlayImage(i,"backgroundImage",r),this._setSVGObjects(i,r),this.clipPath&&i.push(`</g>
`),this._setSVGBgOverlayColor(i,"overlay"),this._setSVGBgOverlayImage(i,"overlayImage",r),i.push("</svg>"),i.join("")}_setSVGPreamble(t,r){r.suppressPreamble||t.push('<?xml version="1.0" encoding="',r.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(t,r){const i=r.width||"".concat(this.width),s=r.height||"".concat(this.height),l=ue.NUM_FRACTION_DIGITS,c=r.viewBox;let d;if(c)d='viewBox="'.concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height,'" ');else if(this.svgViewportTransformation){const m=this.viewportTransform;d='viewBox="'.concat(Ee(-m[4]/m[0],l)," ").concat(Ee(-m[5]/m[3],l)," ").concat(Ee(this.width/m[0],l)," ").concat(Ee(this.height/m[3],l),'" ')}else d='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',i,'" ','height="',s,'" ',d,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",Hd,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(r),`</defs>
`)}createSVGClipPathMarkup(t){const r=this.clipPath;return r?(r.clipPathId="CLIPPATH_".concat(za()),'<clipPath id="'.concat(r.clipPathId,`" >
`).concat(r.toClipPathSVG(t.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map((t=>{const r=this["".concat(t,"Color")];if(yr(r)){const i=this["".concat(t,"Vpt")],s=this.viewportTransform,l={isType:()=>!1,width:this.width/(i?s[0]:1),height:this.height/(i?s[3]:1)};return r.toSVG(l,{additionalTransform:i?Jl(s):""})}})).join("")}createSVGFontFacesMarkup(){const t=[],r={},i=ue.fontPaths;this._objects.forEach((function l(c){t.push(c),Ku(c)&&c._objects.forEach(l)})),t.forEach((l=>{if(!(c=l)||typeof c._renderText!="function")return;var c;const{styles:d,fontFamily:m}=l;!r[m]&&i[m]&&(r[m]=!0,d&&Object.values(d).forEach((y=>{Object.values(y).forEach((b=>{let{fontFamily:_=""}=b;!r[_]&&i[_]&&(r[_]=!0)}))})))}));const s=Object.keys(r).map((l=>`		@font-face {
			font-family: '`.concat(l,`';
			src: url('`).concat(i[l],`');
		}
`))).join("");return s?`	<style type="text/css"><![CDATA[
`.concat(s,`]]></style>
`):""}_setSVGObjects(t,r){this.forEachObject((i=>{i.excludeFromExport||this._setSVGObject(t,i,r)}))}_setSVGObject(t,r,i){t.push(r.toSVG(i))}_setSVGBgOverlayImage(t,r,i){const s=this[r];s&&!s.excludeFromExport&&s.toSVG&&t.push(s.toSVG(i))}_setSVGBgOverlayColor(t,r){const i=this["".concat(r,"Color")];if(i)if(yr(i)){const s=i.repeat||"",l=this.width,c=this.height,d=this["".concat(r,"Vpt")]?Jl(kr(this.viewportTransform)):"";t.push('<rect transform="'.concat(d," translate(").concat(l/2,",").concat(c/2,')" x="').concat(i.offsetX-l/2,'" y="').concat(i.offsetY-c/2,'" width="').concat(s!=="repeat-y"&&s!=="no-repeat"||!X0(i)?l:i.source.width,'" height="').concat(s!=="repeat-x"&&s!=="no-repeat"||!X0(i)?c:i.source.height,'" fill="url(#SVGID_').concat(i.id,`)"></rect>
`))}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',i,'"',`></rect>
`)}loadFromJSON(t,r){let{signal:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return Promise.reject(new Jr("`json` is undefined"));const s=typeof t=="string"?JSON.parse(t):t,{objects:l=[]}=s,c=ze(s,P1),{backgroundImage:d,background:m,overlayImage:y,overlay:b,clipPath:_}=c,T=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Il(l,{reviver:r,signal:i}),ph({backgroundImage:d,backgroundColor:m,overlayImage:y,overlayColor:b,clipPath:_},{signal:i})]).then((D=>{let[M,B]=D;return this.clear(),this.add(...M),this.set(c),this.set(B),this.renderOnAddRemove=T,this}))}clone(t){const r=this.toObject(t);return this.cloneWithoutData().loadFromJSON(r)}cloneWithoutData(){const t=br(this);return new this.constructor(t)}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:r="png",quality:i=1,multiplier:s=1,enableRetinaScaling:l=!1}=t,c=s*(l?this.getRetinaScaling():1);return By(this.toCanvasElement(c,t),r,i)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:r="png",quality:i=1,multiplier:s=1,enableRetinaScaling:l=!1}=t,c=s*(l?this.getRetinaScaling():1);return Ly(this.toCanvasElement(c,t),r,i)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:r,height:i,left:s,top:l,filter:c}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const d=(r||this.width)*t,m=(i||this.height)*t,y=this.getZoom(),b=this.width,_=this.height,T=this.skipControlsDrawing,D=y*t,M=this.viewportTransform,B=[D,0,0,D,(M[4]-(s||0))*t,(M[5]-(l||0))*t],$=this.enableRetinaScaling,nt=br({width:d,height:m}),ht=c?this._objects.filter((bt=>c(bt))):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=B,this.width=d,this.height=m,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(nt.getContext("2d"),ht),this.viewportTransform=M,this.width=b,this.height=_,this.calcViewportBoundaries(),this.enableRetinaScaling=$,this.skipControlsDrawing=T,nt}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),nh.cancelByCanvas(this),this.disposed=!0,new Promise(((t,r)=>{const i=()=>{this.destroy(),t(!0)};i.kill=r,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?t(!1):this.nextRenderHandle?this.__cleanupTask=i:i()}))}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject((t=>t.dispose())),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}H(ic,"ownDefaults",q1);const K1=["touchstart","touchmove","touchend"],W1=f=>{const t=Yy(f.target),r=(function(i){const s=i.changedTouches;return s&&s[0]?s[0]:i})(f);return new et(r.clientX+t.left,r.clientY+t.top)},Vd=f=>K1.includes(f.type)||f.pointerType==="touch",G0=f=>{f.preventDefault(),f.stopPropagation()},Ui=f=>{let t=0,r=0,i=0,s=0;for(let l=0,c=f.length;l<c;l++){const{x:d,y:m}=f[l];(d>i||!l)&&(i=d),(d<t||!l)&&(t=d),(m>s||!l)&&(s=m),(m<r||!l)&&(r=m)}return{left:t,top:r,width:i-t,height:s-r}},Q1=["translateX","translateY","scaleX","scaleY"],Z1=(f,t)=>ih(f,xn(t,f.calcOwnMatrix())),ih=(f,t)=>{const r=rh(t),{translateX:i,translateY:s,scaleX:l,scaleY:c}=r,d=ze(r,Q1),m=new et(i,s);f.flipX=!1,f.flipY=!1,Object.assign(f,d),f.set({scaleX:l,scaleY:c}),f.setPositionByOrigin(m,ne,ne)},I1=f=>{f.scaleX=1,f.scaleY=1,f.skewX=0,f.skewY=0,f.flipX=!1,f.flipY=!1,f.rotate(0)},qy=f=>({scaleX:f.scaleX,scaleY:f.scaleY,skewX:f.skewX,skewY:f.skewY,angle:f.angle,left:f.left,flipX:f.flipX,flipY:f.flipY,top:f.top}),cg=(f,t,r)=>{const i=f/2,s=t/2,l=[new et(-i,-s),new et(i,-s),new et(-i,s),new et(i,s)].map((d=>d.transform(r))),c=Ui(l);return new et(c.width,c.height)},mh=function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zn;return xn(kr(arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn),f)},Do=function(f){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zn;return f.transform(mh(t,r))},J1=function(f){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zn;return f.transform(mh(t,r),!0)},$1=(f,t,r)=>{const i=mh(t,r);return ih(f,xn(i,f.calcOwnMatrix())),i},Py=(f,t)=>{var r;const{transform:{target:i}}=t;(r=i.canvas)===null||r===void 0||r.fire("object:".concat(f),Y(Y({},t),{},{target:i})),i.fire(f,t)},tx={left:-.5,top:-.5,center:0,bottom:.5,right:.5},$e=f=>typeof f=="string"?tx[f]:f-.5,ah="not-allowed";function Ky(f){return $e(f.originX)===$e(ne)&&$e(f.originY)===$e(ne)}function q0(f){return .5-$e(f)}const Rr=(f,t)=>f[t],Wy=(f,t,r,i)=>({e:f,transform:t,pointer:new et(r,i)});function Qy(f,t){const r=f.getTotalAngle()+Gi(Math.atan2(t.y,t.x))+360;return Math.round(r%360/45)}function ug(f,t,r,i,s){var l;let{target:c,corner:d}=f;const m=c.controls[d],y=((l=c.canvas)===null||l===void 0?void 0:l.getZoom())||1,b=c.padding/y,_=(function(T,D,M,B){const $=T.getRelativeCenterPoint(),nt=M!==void 0&&B!==void 0?T.translateToGivenOrigin($,ne,ne,M,B):new et(T.left,T.top);return(T.angle?D.rotate(-qe(T.angle),$):D).subtract(nt)})(c,new et(i,s),t,r);return _.x>=b&&(_.x-=b),_.x<=-b&&(_.x+=b),_.y>=b&&(_.y-=b),_.y<=b&&(_.y+=b),_.x-=m.offsetX,_.y-=m.offsetY,_}const ex=(f,t,r,i)=>{const{target:s,offsetX:l,offsetY:c}=t,d=r-l,m=i-c,y=!Rr(s,"lockMovementX")&&s.left!==d,b=!Rr(s,"lockMovementY")&&s.top!==m;return y&&s.set(ye,d),b&&s.set(Vn,m),(y||b)&&Py(jy,Wy(f,t,r,i)),y||b},sh=f=>f.replace(/\s+/g," "),P0={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Dd=(f,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?f+6*(t-f)*r:r<.5?t:r<2/3?f+(t-f)*(2/3-r)*6:f),K0=(f,t,r,i)=>{f/=255,t/=255,r/=255;const s=Math.max(f,t,r),l=Math.min(f,t,r);let c,d;const m=(s+l)/2;if(s===l)c=d=0;else{const y=s-l;switch(d=m>.5?y/(2-s-l):y/(s+l),s){case f:c=(t-r)/y+(t<r?6:0);break;case t:c=(r-f)/y+2;break;case r:c=(f-t)/y+4}c/=6}return[Math.round(360*c),Math.round(100*d),Math.round(100*m),i]},W0=function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(f)/(f.endsWith("%")?100:1)},xu=f=>Math.min(Math.round(f),255).toString(16).toUpperCase().padStart(2,"0"),Q0=f=>{let[t,r,i,s=1]=f;const l=Math.round(.3*t+.59*r+.11*i);return[l,l,l,s]};class xe{constructor(t){if(H(this,"isUnrecognised",!1),t)if(t instanceof xe)this.setSource([...t._source]);else if(Array.isArray(t)){const[r,i,s,l=1]=t;this.setSource([r,i,s,l])}else this.setSource(this._tryParsingColor(t));else this.setSource([0,0,0,1])}_tryParsingColor(t){return(t=t.toLowerCase())in P0&&(t=P0[t]),t==="transparent"?[255,255,255,0]:xe.sourceFromHex(t)||xe.sourceFromRgb(t)||xe.sourceFromHsl(t)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(t){this._source=t}toRgb(){const[t,r,i]=this.getSource();return"rgb(".concat(t,",").concat(r,",").concat(i,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[t,r,i]=K0(...this.getSource());return"hsl(".concat(t,",").concat(r,"%,").concat(i,"%)")}toHsla(){const[t,r,i,s]=K0(...this.getSource());return"hsla(".concat(t,",").concat(r,"%,").concat(i,"%,").concat(s,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[t,r,i,s]=this.getSource();return"".concat(xu(t)).concat(xu(r)).concat(xu(i)).concat(xu(Math.round(255*s)))}getAlpha(){return this.getSource()[3]}setAlpha(t){return this._source[3]=t,this}toGrayscale(){return this.setSource(Q0(this.getSource())),this}toBlackWhite(t){const[r,,,i]=Q0(this.getSource()),s=r<(t||127)?0:255;return this.setSource([s,s,s,i]),this}overlayWith(t){t instanceof xe||(t=new xe(t));const r=this.getSource(),i=t.getSource(),[s,l,c]=r.map(((d,m)=>Math.round(.5*d+.5*i[m])));return this.setSource([s,l,c,r[3]]),this}static fromRgb(t){return xe.fromRgba(t)}static fromRgba(t){return new xe(xe.sourceFromRgb(t))}static sourceFromRgb(t){const r=sh(t).match(/^rgba?\(\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d{0,3}(?:\.\d+)?%?)\s?)?\)$/i);if(r){const[i,s,l]=r.slice(1,4).map((c=>{const d=parseFloat(c);return c.endsWith("%")?Math.round(2.55*d):d}));return[i,s,l,W0(r[4])]}}static fromHsl(t){return xe.fromHsla(t)}static fromHsla(t){return new xe(xe.sourceFromHsl(t))}static sourceFromHsl(t){const r=sh(t).match(/^hsla?\(\s?([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d*(?:\.\d+)?%?)\s?)?\)$/i);if(!r)return;const i=(xe.parseAngletoDegrees(r[1])%360+360)%360/360,s=parseFloat(r[2])/100,l=parseFloat(r[3])/100;let c,d,m;if(s===0)c=d=m=l;else{const y=l<=.5?l*(s+1):l+s-l*s,b=2*l-y;c=Dd(b,y,i+1/3),d=Dd(b,y,i),m=Dd(b,y,i-1/3)}return[Math.round(255*c),Math.round(255*d),Math.round(255*m),W0(r[4])]}static fromHex(t){return new xe(xe.sourceFromHex(t))}static sourceFromHex(t){if(t.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const r=t.slice(t.indexOf("#")+1);let i;i=r.length<=4?r.split("").map((m=>m+m)):r.match(/.{2}/g);const[s,l,c,d=255]=i.map((m=>parseInt(m,16)));return[s,l,c,d/255]}}static parseAngletoDegrees(t){const r=t.toLowerCase(),i=parseFloat(r);return r.includes("rad")?Gi(i):r.includes("turn")?360*i:i}}const Eo=function(f){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ng;const r=/\D{0,2}$/.exec(f),i=parseFloat(f),s=ue.DPI;switch(r?.[0]){case"mm":return i*s/25.4;case"cm":return i*s/2.54;case"in":return i*s;case"pt":return i*s/72;case"pc":return i*s/72*12;case"em":return i*t;default:return i}},nx=f=>{const[t,r]=f.trim().split(" "),[i,s]=(l=t)&&l!==Gn?[l.slice(1,4),l.slice(5,8)]:l===Gn?[l,l]:["Mid","Mid"];var l;return{meetOrSlice:r||"meet",alignX:i,alignY:s}},$l=function(f,t){let r,i,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(t)if(t.toLive)r="url(#SVGID_".concat(t.id,")");else{const l=new xe(t),c=l.getAlpha();r=l.toRgb(),c!==1&&(i=c.toString())}else r="none";return s?"".concat(f,": ").concat(r,"; ").concat(i?"".concat(f,"-opacity: ").concat(i,"; "):""):"".concat(f,'="').concat(r,'" ').concat(i?"".concat(f,'-opacity="').concat(i,'" '):"")};class Zy{getSvgStyles(t){const r=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):Gn,l=this.strokeDashOffset?this.strokeDashOffset:"0",c=this.strokeLineCap?this.strokeLineCap:"butt",d=this.strokeLineJoin?this.strokeLineJoin:"miter",m=this.strokeMiterLimit?this.strokeMiterLimit:"4",y=this.opacity!==void 0?this.opacity:"1",b=this.visible?"":" visibility: hidden;",_=t?"":this.getSvgFilter(),T=$l(nn,this.fill);return[$l(qn,this.stroke),"stroke-width: ",i,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",c,"; ","stroke-dashoffset: ",l,"; ","stroke-linejoin: ",d,"; ","stroke-miterlimit: ",m,"; ",T,"fill-rule: ",r,"; ","opacity: ",y,";",_,b].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=t?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'.concat(Jl(i));return"".concat(s).concat(r,'" ')}_toSVG(t){return[""]}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})}toClipPathSVG(t){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})}_createBaseClipPathSVGMarkup(t){let{reviver:r,additionalTransform:i=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,i),this.getSvgCommons()].join(""),l=t.indexOf("COMMON_PARTS");return t[l]=s,r?r(t.join("")):t.join("")}_createBaseSVGMarkup(t){let{noStyle:r,reviver:i,withShadow:s,additionalTransform:l}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=r?"":'style="'.concat(this.getSvgStyles(),'" '),d=s?'style="'.concat(this.getSvgFilter(),'" '):"",m=this.clipPath,y=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",b=m&&m.absolutePositioned,_=this.stroke,T=this.fill,D=this.shadow,M=[],B=t.indexOf("COMMON_PARTS");let $;m&&(m.clipPathId="CLIPPATH_".concat(za()),$='<clipPath id="'.concat(m.clipPathId,`" >
`).concat(m.toClipPathSVG(i),`</clipPath>
`)),b&&M.push("<g ",d,this.getSvgCommons(),` >
`),M.push("<g ",this.getSvgTransform(!1),b?"":d+this.getSvgCommons(),` >
`);const nt=[c,y,r?"":this.addPaintOrder()," ",l?'transform="'.concat(l,'" '):""].join("");return t[B]=nt,yr(T)&&M.push(T.toSVG(this)),yr(_)&&M.push(_.toSVG(this)),D&&M.push(D.toSVG(this)),m&&M.push($),M.push(t.join("")),M.push(`</g>
`),b&&M.push(`</g>
`),i?i(M.join("")):M.join("")}addPaintOrder(){return this.paintFirst!==nn?' paint-order="'.concat(this.paintFirst,'" '):""}}function yh(f){return new RegExp("^("+f.join("|")+")\\b","i")}const Ts="textDecorationThickness",Iy=["fontSize","fontWeight","fontFamily","fontStyle"],Jy=["underline","overline","linethrough"],$y=[...Iy,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],tv=[...$y,...Jy,"textBackgroundColor","direction",Ts],rx=[...Iy,...Jy,qn,"strokeWidth",nn,"deltaY","textBackgroundColor",Ts],ix={_reNewline:rg,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:ye,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:ye,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[Ts]:66.667},Ir="justify",oh="justify-left",Kl="justify-right",Wl="justify-center";var Z0,I0,J0;const zr=String.raw(Z0||(Z0=ti(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),Ed=String.raw(I0||(I0=ti(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),ax=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+zr+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+zr+"))?\\s+(.*)"),sx={cx:ye,x:ye,r:"radius",cy:Vn,y:Vn,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":Ts},Md="font-size",jd="clip-path";yh(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);yh(["symbol","image","marker","pattern","view","svg"]);const $0=yh(["symbol","g","a","svg","clipPath","defs"]);new RegExp(String.raw(J0||(J0=ti(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),zr,Ed,zr,Ed,zr,Ed,zr));const ox=new et(1,0),ev=new et,nv=(f,t)=>f.rotate(t),Gd=(f,t)=>new et(t).subtract(f),qd=f=>f.distanceFrom(ev),Pd=(f,t)=>Math.atan2(Ql(f,t),cx(f,t)),lx=f=>Pd(ox,f),hg=f=>f.eq(ev)?f:f.scalarDivide(qd(f)),rv=function(f){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return hg(new et(-f.y,f.x).scalarMultiply(t?1:-1))},Ql=(f,t)=>f.x*t.y-f.y*t.x,cx=(f,t)=>f.x*t.x+f.y*t.y,ty=(f,t,r)=>{if(f.eq(t)||f.eq(r))return!0;const i=Ql(t,r),s=Ql(t,f),l=Ql(r,f);return i>=0?s>=0&&l<=0:!(s<=0&&l>=0)},ey="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",ny=new RegExp("(?:\\s|^)"+ey+ey+"("+zr+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Hi{constructor(t){const r=typeof t=="string"?Hi.parseShadow(t):t;Object.assign(this,Hi.ownDefaults,r),this.id=za()}static parseShadow(t){const r=t.trim(),[,i=0,s=0,l=0]=(ny.exec(r)||[]).map((c=>parseFloat(c)||0));return{color:(r.replace(ny,"")||"rgb(0,0,0)").trim(),offsetX:i,offsetY:s,blur:l}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(t){const r=nv(new et(this.offsetX,this.offsetY),qe(-t.angle)),i=new xe(this.color);let s=40,l=40;return t.width&&t.height&&(s=100*Ee((Math.abs(r.x)+this.blur)/t.width,ue.NUM_FRACTION_DIGITS)+20,l=100*Ee((Math.abs(r.y)+this.blur)/t.height,ue.NUM_FRACTION_DIGITS)+20),t.flipX&&(r.x*=-1),t.flipY&&(r.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(l,'%" height="').concat(100+2*l,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Ee(this.blur?this.blur/2:0,ue.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Ee(r.x,ue.NUM_FRACTION_DIGITS),'" dy="').concat(Ee(r.y,ue.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(i.toRgb(),'" flood-opacity="').concat(i.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const t={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},r=Hi.ownDefaults;return this.includeDefaultValues?t:lg(t,((i,s)=>i!==r[s]))}static async fromObject(t){return new this(t)}}H(Hi,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),H(Hi,"type","shadow"),At.setClass(Hi,"shadow");const jo=(f,t,r)=>Math.max(f,Math.min(t,r)),ux=[Vn,ye,Pn,vr,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",ko,zo],qi=[nn,qn,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],hx={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:ye,originY:Vn,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:nn,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},fx=(f,t,r,i)=>-r*Math.cos(f/i*nc)+r+t,dx=()=>!1;class fg{constructor(t){let{startValue:r,byValue:i,duration:s=500,delay:l=0,easing:c=fx,onStart:d=Pu,onChange:m=Pu,onComplete:y=Pu,abort:b=dx,target:_}=t;H(this,"_state","pending"),H(this,"durationProgress",0),H(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=l,this.easing=c,this._onStart=d,this._onChange=m,this._onComplete=y,this._abort=b,this.target=_,this.startValue=r,this.byValue=i,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const t=r=>{this._state==="pending"&&(this.startTime=r||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout((()=>Wu(t)),this.delay):Wu(t)}tick(t){const r=(t||+new Date)-this.startTime,i=Math.min(r,this.duration);this.durationProgress=i/this.duration;const{value:s,valueProgress:l}=this.calculate(i);this.value=Object.freeze(s),this.valueProgress=l,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):r>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Wu(this.tick)))}register(){nh.push(this)}unregister(){nh.remove(this)}abort(){this._state="aborted",this.unregister()}}const gx=["startValue","endValue"];class px extends fg{constructor(t){let{startValue:r=0,endValue:i=100}=t;super(Y(Y({},ze(t,gx)),{},{startValue:r,byValue:i-r}))}calculate(t){const r=this.easing(t,this.startValue,this.byValue,this.duration);return{value:r,valueProgress:Math.abs((r-this.startValue)/this.byValue)}}}const mx=["startValue","endValue"];class yx extends fg{constructor(t){let{startValue:r=[0],endValue:i=[100]}=t;super(Y(Y({},ze(t,mx)),{},{startValue:r,byValue:i.map(((s,l)=>s-r[l]))}))}calculate(t){const r=this.startValue.map(((i,s)=>this.easing(t,i,this.byValue[s],this.duration,s)));return{value:r,valueProgress:Math.abs((r[0]-this.startValue[0])/this.byValue[0])}}}const vx=["startValue","endValue","easing","onChange","onComplete","abort"],bx=(f,t,r,i)=>t+r*(1-Math.cos(f/i*nc)),Ad=f=>f&&((t,r,i)=>f(new xe(t).toRgba(),r,i));class xx extends fg{constructor(t){let{startValue:r,endValue:i,easing:s=bx,onChange:l,onComplete:c,abort:d}=t,m=ze(t,vx);const y=new xe(r).getSource(),b=new xe(i).getSource();super(Y(Y({},m),{},{startValue:y,byValue:b.map(((_,T)=>_-y[T])),easing:s,onChange:Ad(l),onComplete:Ad(c),abort:Ad(d)}))}calculate(t){const[r,i,s,l]=this.startValue.map(((d,m)=>this.easing(t,d,this.byValue[m],this.duration,m))),c=[...[r,i,s].map(Math.round),jo(0,l,1)];return{value:c,valueProgress:c.map(((d,m)=>this.byValue[m]!==0?Math.abs((d-this.startValue[m])/this.byValue[m]):0)).find((d=>d!==0))||0}}}function iv(f){const t=(r=>Array.isArray(r.startValue)||Array.isArray(r.endValue))(f)?new yx(f):new px(f);return t.start(),t}function _x(f){const t=new xx(f);return t.start(),t}class Le{constructor(t){this.status=t,this.points=[]}includes(t){return this.points.some((r=>r.eq(t)))}append(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.points=this.points.concat(r.filter((s=>!this.includes(s)))),this}static isPointContained(t,r,i){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(r.eq(i))return t.eq(r);if(r.x===i.x)return t.x===r.x&&(s||t.y>=Math.min(r.y,i.y)&&t.y<=Math.max(r.y,i.y));if(r.y===i.y)return t.y===r.y&&(s||t.x>=Math.min(r.x,i.x)&&t.x<=Math.max(r.x,i.x));{const l=Gd(r,i),c=Gd(r,t).divide(l);return s?Math.abs(c.x)===Math.abs(c.y):c.x===c.y&&c.x>=0&&c.x<=1}}static isPointInPolygon(t,r){const i=new et(t).setX(Math.min(t.x-1,...r.map((l=>l.x))));let s=0;for(let l=0;l<r.length;l++){const c=this.intersectSegmentSegment(r[l],r[(l+1)%r.length],t,i);if(c.includes(t))return!0;s+=+(c.status==="Intersection")}return s%2==1}static intersectLineLine(t,r,i,s){let l=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],c=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const d=r.x-t.x,m=r.y-t.y,y=s.x-i.x,b=s.y-i.y,_=t.x-i.x,T=t.y-i.y,D=y*T-b*_,M=d*T-m*_,B=b*d-y*m;if(B!==0){const $=D/B,nt=M/B;return(l||0<=$&&$<=1)&&(c||0<=nt&&nt<=1)?new Le("Intersection").append(new et(t.x+$*d,t.y+$*m)):new Le}if(D===0||M===0){const $=l||c||Le.isPointContained(t,i,s)||Le.isPointContained(r,i,s)||Le.isPointContained(i,t,r)||Le.isPointContained(s,t,r);return new Le($?"Coincident":void 0)}return new Le("Parallel")}static intersectSegmentLine(t,r,i,s){return Le.intersectLineLine(t,r,i,s,!1,!0)}static intersectSegmentSegment(t,r,i,s){return Le.intersectLineLine(t,r,i,s,!1,!1)}static intersectLinePolygon(t,r,i){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const l=new Le,c=i.length;for(let d,m,y,b=0;b<c;b++){if(d=i[b],m=i[(b+1)%c],y=Le.intersectLineLine(t,r,d,m,s,!1),y.status==="Coincident")return y;l.append(...y.points)}return l.points.length>0&&(l.status="Intersection"),l}static intersectSegmentPolygon(t,r,i){return Le.intersectLinePolygon(t,r,i,!1)}static intersectPolygonPolygon(t,r){const i=new Le,s=t.length,l=[];for(let c=0;c<s;c++){const d=t[c],m=t[(c+1)%s],y=Le.intersectSegmentPolygon(d,m,r);y.status==="Coincident"?(l.push(y),i.append(d,m)):i.append(...y.points)}return l.length>0&&l.length===t.length?new Le("Coincident"):(i.points.length>0&&(i.status="Intersection"),i)}static intersectPolygonRectangle(t,r,i){const s=r.min(i),l=r.max(i),c=new et(l.x,s.y),d=new et(s.x,l.y);return Le.intersectPolygonPolygon(t,[s,c,l,d])}}class Sx extends Ry{getX(){return this.getXY().x}setX(t){this.setXY(this.getXY().setX(t))}getY(){return this.getXY().y}setY(t){this.setXY(this.getXY().setY(t))}getRelativeX(){return this.left}setRelativeX(t){this.left=t}getRelativeY(){return this.top}setRelativeY(t){this.top=t}getXY(){const t=this.getRelativeXY();return this.group?Xn(t,this.group.calcTransformMatrix()):t}setXY(t,r,i){this.group&&(t=Xn(t,kr(this.group.calcTransformMatrix()))),this.setRelativeXY(t,r,i)}getRelativeXY(){return new et(this.left,this.top)}setRelativeXY(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(t,r,i)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:t,tr:r,br:i,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),l=[t,r,i,s];if(this.group){const c=this.group.calcTransformMatrix();return l.map((d=>Xn(d,c)))}return l}intersectsWithRect(t,r){return Le.intersectPolygonRectangle(this.getCoords(),t,r).status==="Intersection"}intersectsWithObject(t){const r=Le.intersectPolygonPolygon(this.getCoords(),t.getCoords());return r.status==="Intersection"||r.status==="Coincident"||t.isContainedWithinObject(this)||this.isContainedWithinObject(t)}isContainedWithinObject(t){return this.getCoords().every((r=>t.containsPoint(r)))}isContainedWithinRect(t,r){const{left:i,top:s,width:l,height:c}=this.getBoundingRect();return i>=t.x&&i+l<=r.x&&s>=t.y&&s+c<=r.y}isOverlapping(t){return this.intersectsWithObject(t)||this.isContainedWithinObject(t)||t.isContainedWithinObject(this)}containsPoint(t){return Le.isPointInPolygon(t,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:t,br:r}=this.canvas.vptCoords;return!!this.getCoords().some((i=>i.x<=r.x&&i.x>=t.x&&i.y<=r.y&&i.y>=t.y))||!!this.intersectsWithRect(t,r)||this.containsPoint(t.midPointFrom(r))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:t,br:r}=this.canvas.vptCoords;return this.intersectsWithRect(t,r)?!0:this.getCoords().every((i=>(i.x>=r.x||i.x<=t.x)&&(i.y>=r.y||i.y<=t.y)))&&this.containsPoint(t.midPointFrom(r))}getBoundingRect(){return Ui(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(t){this._set(Pn,t),this._set(vr,t),this.setCoords()}scaleToWidth(t){const r=this.getBoundingRect().width/this.getScaledWidth();return this.scale(t/this.width/r)}scaleToHeight(t){const r=this.getBoundingRect().height/this.getScaledHeight();return this.scale(t/this.height/r)}getCanvasRetinaScaling(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.getRetinaScaling())||1}getTotalAngle(){return this.group?Gi(Ny(this.calcTransformMatrix())):this.angle}getViewportTransform(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.viewportTransform)||zn.concat()}calcACoords(){const t=Ro({angle:this.angle}),{x:r,y:i}=this.getRelativeCenterPoint(),s=rc(r,i),l=xn(s,t),c=this._getTransformedDimensions(),d=c.x/2,m=c.y/2;return{tl:Xn({x:-d,y:-m},l),tr:Xn({x:d,y:-m},l),bl:Xn({x:-d,y:m},l),br:Xn({x:d,y:m},l)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],r=[];return!t&&this.group&&(r=this.group.transformMatrixKey(t)),r.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,$e(this.originX),$e(this.originY)),r}calcTransformMatrix(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],r=this.calcOwnMatrix();if(t||!this.group)return r;const i=this.transformMatrixKey(t),s=this.matrixCache;return s&&s.key.every(((l,c)=>l===i[c]))?s.value:(this.group&&(r=xn(this.group.calcTransformMatrix(!1),r)),this.matrixCache={key:i,value:r},r)}calcOwnMatrix(){const t=this.transformMatrixKey(!0),r=this.ownMatrixCache;if(r&&r.key===t)return r.value;const i=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:i.x,translateY:i.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},l=G1(s);return this.ownMatrixCache={key:t,value:l},l}_getNonTransformedDimensions(){return new et(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(t){return this._getTransformedDimensions(t).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=Y({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},t),i=r.strokeWidth;let s=i,l=0;this.strokeUniform&&(s=0,l=i);const c=r.width+s,d=r.height+s;let m;return m=r.skewX===0&&r.skewY===0?new et(c*r.scaleX,d*r.scaleY):cg(c,d,gh(r)),m.scalarAdd(l)}translateToGivenOrigin(t,r,i,s,l){let c=t.x,d=t.y;const m=$e(s)-$e(r),y=$e(l)-$e(i);if(m||y){const b=this._getTransformedDimensions();c+=m*b.x,d+=y*b.y}return new et(c,d)}translateToCenterPoint(t,r,i){if(r===ne&&i===ne)return t;const s=this.translateToGivenOrigin(t,r,i,ne,ne);return this.angle?s.rotate(qe(this.angle),t):s}translateToOriginPoint(t,r,i){const s=this.translateToGivenOrigin(t,ne,ne,r,i);return this.angle?s.rotate(qe(this.angle),t):s}getCenterPoint(){const t=this.getRelativeCenterPoint();return this.group?Xn(t,this.group.calcTransformMatrix()):t}getRelativeCenterPoint(){return this.translateToCenterPoint(new et(this.left,this.top),this.originX,this.originY)}getPointByOrigin(t,r){return this.translateToOriginPoint(this.getRelativeCenterPoint(),t,r)}setPositionByOrigin(t,r,i){const s=this.translateToCenterPoint(t,r,i),l=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:l.x,top:l.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),ye,Vn)}}const Cx=["type"],wx=["extraParam"];let ki=class Zu extends Sx{static getDefaults(){return Zu.ownDefaults}get type(){const t=this.constructor.type;return t==="FabricObject"?"object":t.toLowerCase()}set type(t){ka("warn","Setting type has no effect",t)}constructor(t){super(),H(this,"_cacheContext",null),Object.assign(this,Zu.ownDefaults),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=Vi(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(t){const r=t.width,i=t.height,s=ue.maxCacheSideLimit,l=ue.minCacheSideLimit;if(r<=s&&i<=s&&r*i<=ue.perfLimitSizeTotal)return r<l&&(t.width=l),i<l&&(t.height=l),t;const c=r/i,[d,m]=Pl.limitDimsByArea(c),y=jo(l,d,s),b=jo(l,m,s);return r>y&&(t.zoomX/=r/y,t.width=y,t.capped=!0),i>b&&(t.zoomY/=i/b,t.height=b,t.capped=!0),t}_getCacheCanvasDimensions(){const t=this.getTotalObjectScaling(),r=this._getTransformedDimensions({skewX:0,skewY:0}),i=r.x*t.x/this.scaleX,s=r.y*t.y/this.scaleY;return{width:Math.ceil(i+2),height:Math.ceil(s+2),zoomX:t.x,zoomY:t.y,x:i,y:s}}_updateCacheCanvas(){const t=this._cacheCanvas,r=this._cacheContext,{width:i,height:s,zoomX:l,zoomY:c,x:d,y:m}=this._limitCacheSize(this._getCacheCanvasDimensions()),y=i!==t.width||s!==t.height,b=this.zoomX!==l||this.zoomY!==c;if(!t||!r)return!1;if(y||b){i!==t.width||s!==t.height?(t.width=i,t.height=s):(r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height));const _=d/2,T=m/2;return this.cacheTranslationX=Math.round(t.width/2-_)+_,this.cacheTranslationY=Math.round(t.height/2-T)+T,r.translate(this.cacheTranslationX,this.cacheTranslationY),r.scale(l,c),this.zoomX=l,this.zoomY=c,!0}return!1}setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(t)}transform(t){const r=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,i=this.calcTransformMatrix(!r);t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}getObjectScaling(){if(!this.group)return new et(Math.abs(this.scaleX),Math.abs(this.scaleY));const t=rh(this.calcTransformMatrix());return new et(Math.abs(t.scaleX),Math.abs(t.scaleY))}getTotalObjectScaling(){const t=this.getObjectScaling();if(this.canvas){const r=this.canvas.getZoom(),i=this.getCanvasRetinaScaling();return t.scalarMultiply(r*i)}return t}getObjectOpacity(){let t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t}_constrainScale(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t===0?1e-4:t}_set(t,r){t!==Pn&&t!==vr||(r=this._constrainScale(r)),t===Pn&&r<0?(this.flipX=!this.flipX,r*=-1):t==="scaleY"&&r<0?(this.flipY=!this.flipY,r*=-1):t!=="shadow"||!r||r instanceof Hi||(r=new Hi(r));const i=this[t]!==r;return this[t]=r,i&&this.constructor.cacheProperties.includes(t)&&(this.dirty=!0),this.parent&&(this.dirty||i&&this.constructor.stateProperties.includes(t))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.drawObject(t,!1,{}),this.dirty=!1),t.restore())}drawSelectionBackground(t){}renderCache(t){if(t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:r,zoomY:i,cacheTranslationX:s,cacheTranslationY:l}=this,{width:c,height:d}=this._cacheCanvas;this.drawObject(this._cacheContext,t.forClipping,{zoomX:r,zoomY:i,cacheTranslationX:s,cacheTranslationY:l,width:c,height:d,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===qn&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(t,r,i){t.save(),r.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",t.setTransform(1,0,0,1,0,0),t.drawImage(i,0,0),t.restore()}drawObject(t,r,i){const s=this.fill,l=this.stroke;r?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath,i),this.fill=s,this.stroke=l}createClipPathLayer(t,r){const i=br(r),s=i.getContext("2d");if(s.translate(r.cacheTranslationX,r.cacheTranslationY),s.scale(r.zoomX,r.zoomY),t._cacheCanvas=i,r.parentClipPaths.forEach((l=>{l.transform(s)})),r.parentClipPaths.push(t),t.absolutePositioned){const l=kr(this.calcTransformMatrix());s.transform(l[0],l[1],l[2],l[3],l[4],l[5])}return t.transform(s),t.drawObject(s,!0,r),i}_drawClipPath(t,r,i){if(!r)return;r._transformDone=!0;const s=this.createClipPathLayer(r,i);this.drawClipPathOnCache(t,r,s)}drawCacheOnCanvas(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const r=this._cacheCanvas,i=this._cacheContext;return!(!r||!i||t||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(r&&i&&!t&&(i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,r.width,r.height),i.restore()),!0)}_renderBackground(t){if(!this.backgroundColor)return;const r=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-r.x/2,-r.y/2,r.x,r.y),this._removeShadow(t)}_setOpacity(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity}_setStrokeStyles(t,r){const i=r.stroke;i&&(t.lineWidth=r.strokeWidth,t.lineCap=r.strokeLineCap,t.lineDashOffset=r.strokeDashOffset,t.lineJoin=r.strokeLineJoin,t.miterLimit=r.strokeMiterLimit,yr(i)?i.gradientUnits==="percentage"||i.gradientTransform||i.patternTransform?this._applyPatternForTransformedGradient(t,i):(t.strokeStyle=i.toLive(t),this._applyPatternGradientTransform(t,i)):t.strokeStyle=r.stroke)}_setFillStyles(t,r){let{fill:i}=r;i&&(yr(i)?(t.fillStyle=i.toLive(t),this._applyPatternGradientTransform(t,i)):t.fillStyle=i)}_setClippingProperties(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"}_setLineDash(t,r){r&&r.length!==0&&t.setLineDash(r)}_setShadow(t){if(!this.shadow)return;const r=this.shadow,i=this.canvas,s=this.getCanvasRetinaScaling(),[l,,,c]=i?.viewportTransform||zn,d=l*s,m=c*s,y=r.nonScaling?new et(1,1):this.getObjectScaling();t.shadowColor=r.color,t.shadowBlur=r.blur*ue.browserShadowBlurConstant*(d+m)*(y.x+y.y)/4,t.shadowOffsetX=r.offsetX*d*y.x,t.shadowOffsetY=r.offsetY*m*y.y}_removeShadow(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)}_applyPatternGradientTransform(t,r){if(!yr(r))return{offsetX:0,offsetY:0};const i=r.gradientTransform||r.patternTransform,s=-this.width/2+r.offsetX||0,l=-this.height/2+r.offsetY||0;return r.gradientUnits==="percentage"?t.transform(this.width,0,0,this.height,s,l):t.transform(1,0,0,1,s,l),i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:s,offsetY:l}}_renderPaintInOrder(t){this.paintFirst===qn?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))}_render(t){}_renderFill(t){this.fill&&(t.save(),this._setFillStyles(t,this),this.fillRule==="evenodd"?t.fill("evenodd"):t.fill(),t.restore())}_renderStroke(t){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform){const r=this.getObjectScaling();t.scale(1/r.x,1/r.y)}this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}}_applyPatternForTransformedGradient(t,r){var i;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),l=this.getCanvasRetinaScaling(),c=s.x/this.scaleX/l,d=s.y/this.scaleY/l,m=br({width:Math.ceil(c),height:Math.ceil(d)}),y=m.getContext("2d");y&&(y.beginPath(),y.moveTo(0,0),y.lineTo(c,0),y.lineTo(c,d),y.lineTo(0,d),y.closePath(),y.translate(c/2,d/2),y.scale(s.zoomX/this.scaleX/l,s.zoomY/this.scaleY/l),this._applyPatternGradientTransform(y,r),y.fillStyle=r.toLive(t),y.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(l*this.scaleX/s.zoomX,l*this.scaleY/s.zoomY),t.strokeStyle=(i=y.createPattern(m,"no-repeat"))!==null&&i!==void 0?i:"")}_findCenterFromElement(){return new et(this.left+this.width/2,this.top+this.height/2)}clone(t){const r=this.toObject(t);return this.constructor.fromObject(r)}cloneAsImage(t){const r=this.toCanvasElement(t);return new(At.getClass("image"))(r)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=qy(this),i=this.group,s=this.shadow,l=Math.abs,c=t.enableRetinaScaling?My():1,d=(t.multiplier||1)*c,m=t.canvasProvider||(ht=>new ic(ht,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,t.withoutTransform&&I1(this),t.withoutShadow&&(this.shadow=null),t.viewportTransform&&$1(this,this.getViewportTransform()),this.setCoords();const y=Vi(),b=this.getBoundingRect(),_=this.shadow,T=new et;if(_){const ht=_.blur,bt=_.nonScaling?new et(1,1):this.getObjectScaling();T.x=2*Math.round(l(_.offsetX)+ht)*l(bt.x),T.y=2*Math.round(l(_.offsetY)+ht)*l(bt.y)}const D=b.width+T.x,M=b.height+T.y;y.width=Math.ceil(D),y.height=Math.ceil(M);const B=m(y);t.format==="jpeg"&&(B.backgroundColor="#fff"),this.setPositionByOrigin(new et(B.width/2,B.height/2),ne,ne);const $=this.canvas;B._objects=[this],this.set("canvas",B),this.setCoords();const nt=B.toCanvasElement(d||1,t);return this.set("canvas",$),this.shadow=s,i&&(this.group=i),this.set(r),this.setCoords(),B._objects=[],B.destroy(),nt}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return By(this.toCanvasElement(t),t.format||"png",t.quality||1)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ly(this.toCanvasElement(t),t.format||"png",t.quality||1)}isType(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return r.includes(this.constructor.type)||r.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(t){const{centeredRotation:r,originX:i,originY:s}=this;if(r){const{x:l,y:c}=this.getRelativeCenterPoint();this.originX=ne,this.originY=ne,this.left=l,this.top=c}if(this.set("angle",t),r){const{x:l,y:c}=this.translateToOriginPoint(this.getRelativeCenterPoint(),i,s);this.left=l,this.top=c,this.originX=i,this.originY=s}}setOnGroup(){}_setupCompositeOperation(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}dispose(){nh.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&$r().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(t,r){return Object.entries(t).reduce(((i,s)=>{let[l,c]=s;return i[l]=this._animate(l,c,r),i}),{})}_animate(t,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=t.split("."),l=this.constructor.colorProperties.includes(s[s.length-1]),{abort:c,startValue:d,onChange:m,onComplete:y}=i,b=Y(Y({},i),{},{target:this,startValue:d??s.reduce(((_,T)=>_[T]),this),endValue:r,abort:c?.bind(this),onChange:(_,T,D)=>{s.reduce(((M,B,$)=>($===s.length-1&&(M[B]=_),M[B])),this),m&&m(_,T,D)},onComplete:(_,T,D)=>{this.setCoords(),y&&y(_,T,D)}});return l?_x(b):iv(b)}isDescendantOf(t){const{parent:r,group:i}=this;return r===t||i===t||!!r&&r.isDescendantOf(t)||!!i&&i!==r&&i.isDescendantOf(t)}getAncestors(){const t=[];let r=this;do r=r.parent,r&&t.push(r);while(r);return t}findCommonAncestors(t){if(this===t)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const r=this.getAncestors(),i=t.getAncestors();if(r.length===0&&i.length>0&&this===i[i.length-1])return{fork:[],otherFork:[t,...i.slice(0,i.length-1)],common:[this]};for(let s,l=0;l<r.length;l++){if(s=r[l],s===t)return{fork:[this,...r.slice(0,l)],otherFork:[],common:r.slice(l)};for(let c=0;c<i.length;c++){if(this===i[c])return{fork:[],otherFork:[t,...i.slice(0,c)],common:[this,...r]};if(s===i[c])return{fork:[this,...r.slice(0,l)],otherFork:[t,...i.slice(0,c)],common:r.slice(l)}}}return{fork:[this,...r],otherFork:[t,...i],common:[]}}hasCommonAncestors(t){const r=this.findCommonAncestors(t);return r&&!!r.common.length}isInFrontOf(t){if(this===t)return;const r=this.findCommonAncestors(t);if(r.fork.includes(t))return!0;if(r.otherFork.includes(this))return!1;const i=r.common[0]||this.canvas;if(!i)return;const s=r.fork.pop(),l=r.otherFork.pop(),c=i._objects.indexOf(s),d=i._objects.indexOf(l);return c>-1&&c>d}toObject(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Zu.customProperties,this.constructor.customProperties||[]);let r;const i=ue.NUM_FRACTION_DIGITS,{clipPath:s,fill:l,stroke:c,shadow:d,strokeDashArray:m,left:y,top:b,originX:_,originY:T,width:D,height:M,strokeWidth:B,strokeLineCap:$,strokeDashOffset:nt,strokeLineJoin:ht,strokeUniform:bt,strokeMiterLimit:pt,scaleX:at,scaleY:ft,angle:dt,flipX:Ot,flipY:Rt,opacity:Vt,visible:Qt,backgroundColor:Ut,fillRule:Pt,paintFirst:Kt,globalCompositeOperation:re,skewX:tt,skewY:gt}=this;s&&!s.excludeFromExport&&(r=s.toObject(t.concat("inverted","absolutePositioned")));const _t=Lt=>Ee(Lt,i),zt=Y(Y({},Bo(this,t)),{},{type:this.constructor.type,version:Hd,originX:_,originY:T,left:_t(y),top:_t(b),width:_t(D),height:_t(M),fill:Y0(l)?l.toObject():l,stroke:Y0(c)?c.toObject():c,strokeWidth:_t(B),strokeDashArray:m&&m.concat(),strokeLineCap:$,strokeDashOffset:nt,strokeLineJoin:ht,strokeUniform:bt,strokeMiterLimit:_t(pt),scaleX:_t(at),scaleY:_t(ft),angle:_t(dt),flipX:Ot,flipY:Rt,opacity:_t(Vt),shadow:d&&d.toObject(),visible:Qt,backgroundColor:Ut,fillRule:Pt,paintFirst:Kt,globalCompositeOperation:re,skewX:_t(tt),skewY:_t(gt)},r?{clipPath:r}:null);return this.includeDefaultValues?zt:this._removeDefaultValues(zt)}toDatalessObject(t){return this.toObject(t)}_removeDefaultValues(t){const r=this.constructor.getDefaults(),i=Object.keys(r).length>0?r:Object.getPrototypeOf(this);return lg(t,((s,l)=>{if(l===ye||l===Vn||l==="type")return!0;const c=i[l];return s!==c&&!(Array.isArray(s)&&Array.isArray(c)&&s.length===0&&c.length===0)}))}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(t){let r=ze(t,Cx),i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:s}=i,l=ze(i,wx);return ph(r,l).then((c=>s?(delete c[s],new this(r[s],c)):new this(c)))}static fromObject(t,r){return this._fromObject(t,r)}};H(ki,"stateProperties",ux),H(ki,"cacheProperties",qi),H(ki,"ownDefaults",hx),H(ki,"type","FabricObject"),H(ki,"colorProperties",[nn,qn,"backgroundColor"]),H(ki,"customProperties",[]),At.setClass(ki),At.setClass(ki,"object");const Lo=(f,t,r)=>(i,s,l,c)=>{const d=t(i,s,l,c);return d&&Py(f,Y(Y({},Wy(i,s,l,c)),r)),d};function No(f){return(t,r,i,s)=>{const{target:l,originX:c,originY:d}=r,m=l.getRelativeCenterPoint(),y=l.translateToOriginPoint(m,c,d),b=f(t,r,i,s);return l.setPositionByOrigin(y,r.originX,r.originY),b}}const ry=Lo(Zl,No(((f,t,r,i)=>{const s=ug(t,t.originX,t.originY,r,i);if($e(t.originX)===$e(ne)||$e(t.originX)===$e(Ge)&&s.x<0||$e(t.originX)===$e(ye)&&s.x>0){const{target:l}=t,c=l.strokeWidth/(l.strokeUniform?l.scaleX:1),d=Ky(t)?2:1,m=l.width,y=Math.abs(s.x*d/l.scaleX)-c;return l.set("width",Math.max(y,1)),m!==l.width}return!1})));function Tx(f,t,r,i,s){i=i||{};const l=this.sizeX||i.cornerSize||s.cornerSize,c=this.sizeY||i.cornerSize||s.cornerSize,d=i.transparentCorners!==void 0?i.transparentCorners:s.transparentCorners,m=d?qn:nn,y=!d&&(i.cornerStrokeColor||s.cornerStrokeColor);let b,_=t,T=r;f.save(),f.fillStyle=i.cornerColor||s.cornerColor||"",f.strokeStyle=i.cornerStrokeColor||s.cornerStrokeColor||"",l>c?(b=l,f.scale(1,c/l),T=r*l/c):c>l?(b=c,f.scale(l/c,1),_=t*c/l):b=l,f.beginPath(),f.arc(_,T,b/2,0,$u,!1),f[m](),y&&f.stroke(),f.restore()}function Ox(f,t,r,i,s){i=i||{};const l=this.sizeX||i.cornerSize||s.cornerSize,c=this.sizeY||i.cornerSize||s.cornerSize,d=i.transparentCorners!==void 0?i.transparentCorners:s.transparentCorners,m=d?qn:nn,y=!d&&(i.cornerStrokeColor||s.cornerStrokeColor),b=l/2,_=c/2;f.save(),f.fillStyle=i.cornerColor||s.cornerColor||"",f.strokeStyle=i.cornerStrokeColor||s.cornerStrokeColor||"",f.translate(t,r);const T=s.getTotalAngle();f.rotate(qe(T)),f["".concat(m,"Rect")](-b,-_,l,c),y&&f.strokeRect(-b,-_,l,c),f.restore()}class Er{constructor(t){H(this,"visible",!0),H(this,"actionName",dh),H(this,"angle",0),H(this,"x",0),H(this,"y",0),H(this,"offsetX",0),H(this,"offsetY",0),H(this,"sizeX",0),H(this,"sizeY",0),H(this,"touchSizeX",0),H(this,"touchSizeY",0),H(this,"cursorStyle","crosshair"),H(this,"withConnection",!1),Object.assign(this,t)}shouldActivate(t,r,i,s){var l;let{tl:c,tr:d,br:m,bl:y}=s;return((l=r.canvas)===null||l===void 0?void 0:l.getActiveObject())===r&&r.isControlVisible(t)&&Le.isPointInPolygon(i,[c,d,m,y])}getActionHandler(t,r,i){return this.actionHandler}getMouseDownHandler(t,r,i){return this.mouseDownHandler}getMouseUpHandler(t,r,i){return this.mouseUpHandler}cursorStyleHandler(t,r,i){return r.cursorStyle}getActionName(t,r,i){return r.actionName}getVisibility(t,r){var i,s;return(i=(s=t._controlsVisibility)===null||s===void 0?void 0:s[r])!==null&&i!==void 0?i:this.visible}setVisibility(t,r,i){this.visible=t}positionHandler(t,r,i,s){return new et(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(r)}calcCornerCoords(t,r,i,s,l,c){const d=sg([rc(i,s),Ro({angle:t}),og((l?this.touchSizeX:this.sizeX)||r,(l?this.touchSizeY:this.sizeY)||r)]);return{tl:new et(-.5,-.5).transform(d),tr:new et(.5,-.5).transform(d),br:new et(.5,.5).transform(d),bl:new et(-.5,.5).transform(d)}}render(t,r,i,s,l){((s=s||{}).cornerStyle||l.cornerStyle)==="circle"?Tx.call(this,t,r,i,s,l):Ox.call(this,t,r,i,s,l)}}const Dx=(f,t,r)=>r.lockRotation?ah:t.cursorStyle,Ex=Lo(Ay,No(((f,t,r,i)=>{let{target:s,ex:l,ey:c,theta:d,originX:m,originY:y}=t;const b=s.translateToOriginPoint(s.getRelativeCenterPoint(),m,y);if(Rr(s,"lockRotation"))return!1;const _=Math.atan2(c-b.y,l-b.x),T=Math.atan2(i-b.y,r-b.x);let D=Gi(T-_+d);if(s.snapAngle&&s.snapAngle>0){const B=s.snapAngle,$=s.snapThreshold||B,nt=Math.ceil(D/B)*B,ht=Math.floor(D/B)*B;Math.abs(D-ht)<$?D=ht:Math.abs(D-nt)<$&&(D=nt)}D<0&&(D=360+D),D%=360;const M=s.angle!==D;return s.angle=D,M})));function av(f,t){const r=t.canvas,i=f[r.uniScaleKey];return r.uniformScaling&&!i||!r.uniformScaling&&i}function sv(f,t,r){const i=Rr(f,"lockScalingX"),s=Rr(f,"lockScalingY");if(i&&s||!t&&(i||s)&&r||i&&t==="x"||s&&t==="y")return!0;const{width:l,height:c,strokeWidth:d}=f;return l===0&&d===0&&t!=="y"||c===0&&d===0&&t!=="x"}const Mx=["e","se","s","sw","w","nw","n","ne","e"],ql=(f,t,r)=>{const i=av(f,r);if(sv(r,t.x!==0&&t.y===0?"x":t.x===0&&t.y!==0?"y":"",i))return ah;const s=Qy(r,t);return"".concat(Mx[s],"-resize")};function dg(f,t,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const l=t.target,c=s.by,d=av(f,l);let m,y,b,_,T,D;if(sv(l,c,d))return!1;if(t.gestureScale)y=t.scaleX*t.gestureScale,b=t.scaleY*t.gestureScale;else{if(m=ug(t,t.originX,t.originY,r,i),T=c!=="y"?Math.sign(m.x||t.signX||1):1,D=c!=="x"?Math.sign(m.y||t.signY||1):1,t.signX||(t.signX=T),t.signY||(t.signY=D),Rr(l,"lockScalingFlip")&&(t.signX!==T||t.signY!==D))return!1;if(_=l._getTransformedDimensions(),d&&!c){const $=Math.abs(m.x)+Math.abs(m.y),{original:nt}=t,ht=$/(Math.abs(_.x*nt.scaleX/l.scaleX)+Math.abs(_.y*nt.scaleY/l.scaleY));y=nt.scaleX*ht,b=nt.scaleY*ht}else y=Math.abs(m.x*l.scaleX/_.x),b=Math.abs(m.y*l.scaleY/_.y);Ky(t)&&(y*=2,b*=2),t.signX!==T&&c!=="y"&&(t.originX=q0(t.originX),y*=-1,t.signX=T),t.signY!==D&&c!=="x"&&(t.originY=q0(t.originY),b*=-1,t.signY=D)}const M=l.scaleX,B=l.scaleY;return c?(c==="x"&&l.set(Pn,y),c==="y"&&l.set(vr,b)):(!Rr(l,"lockScalingX")&&l.set(Pn,y),!Rr(l,"lockScalingY")&&l.set(vr,b)),M!==l.scaleX||B!==l.scaleY}const _u=Lo(fh,No(((f,t,r,i)=>dg(f,t,r,i)))),jx=Lo(fh,No(((f,t,r,i)=>dg(f,t,r,i,{by:"x"})))),Ax=Lo(fh,No(((f,t,r,i)=>dg(f,t,r,i,{by:"y"})))),kx=["target","ex","ey","skewingSide"],kd={x:{counterAxis:"y",scale:Pn,skew:ko,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:vr,skew:zo,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},zx=["ns","nesw","ew","nwse"],Rx=(f,t,r)=>{if(t.x!==0&&Rr(r,"lockSkewingY")||t.y!==0&&Rr(r,"lockSkewingX"))return ah;const i=Qy(r,t)%4;return"".concat(zx[i],"-resize")};function ov(f,t,r,i,s){const{target:l}=r,{counterAxis:c,origin:d,lockSkewing:m,skew:y,flip:b}=kd[f];if(Rr(l,m))return!1;const{origin:_,flip:T}=kd[c],D=$e(r[_])*(l[T]?-1:1),M=-Math.sign(D)*(l[b]?-1:1),B=.5*-((l[y]===0&&ug(r,ne,ne,i,s)[f]>0||l[y]>0?1:-1)*M)+.5;return Lo(ky,No(((nt,ht,bt,pt)=>(function(at,ft,dt){let{target:Ot,ex:Rt,ey:Vt,skewingSide:Qt}=ft,Ut=ze(ft,kx);const{skew:Pt}=kd[at],Kt=dt.subtract(new et(Rt,Vt)).divide(new et(Ot.scaleX,Ot.scaleY))[at],re=Ot[Pt],tt=Ut[Pt],gt=Math.tan(qe(tt)),_t=at==="y"?Ot._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:Ot._getTransformedDimensions({scaleX:1,scaleY:1}).y,zt=2*Kt*Qt/Math.max(_t,1)+gt,Lt=Gi(Math.atan(zt));Ot.set(Pt,Lt);const R=re!==Ot[Pt];if(R&&at==="y"){const{skewX:st,scaleX:mt}=Ot,Et=Ot._getTransformedDimensions({skewY:re}),Ht=Ot._getTransformedDimensions(),Yt=st!==0?Et.x/Ht.x:1;Yt!==1&&Ot.set(Pn,Yt*mt)}return R})(f,ht,new et(bt,pt)))))(t,Y(Y({},r),{},{[d]:B,skewingSide:M}),i,s)}const Bx=(f,t,r,i)=>ov("x",f,t,r,i),Lx=(f,t,r,i)=>ov("y",f,t,r,i);function vh(f,t){return f[t.canvas.altActionKey]}const Su=(f,t,r)=>{const i=vh(f,r);return t.x===0?i?ko:vr:t.y===0?i?zo:Pn:""},wo=(f,t,r)=>vh(f,r)?Rx(0,t,r):ql(f,t,r),iy=(f,t,r,i)=>vh(f,t.target)?Lx(f,t,r,i):jx(f,t,r,i),ay=(f,t,r,i)=>vh(f,t.target)?Bx(f,t,r,i):Ax(f,t,r,i),lv=()=>({ml:new Er({x:-.5,y:0,cursorStyleHandler:wo,actionHandler:iy,getActionName:Su}),mr:new Er({x:.5,y:0,cursorStyleHandler:wo,actionHandler:iy,getActionName:Su}),mb:new Er({x:0,y:.5,cursorStyleHandler:wo,actionHandler:ay,getActionName:Su}),mt:new Er({x:0,y:-.5,cursorStyleHandler:wo,actionHandler:ay,getActionName:Su}),tl:new Er({x:-.5,y:-.5,cursorStyleHandler:ql,actionHandler:_u}),tr:new Er({x:.5,y:-.5,cursorStyleHandler:ql,actionHandler:_u}),bl:new Er({x:-.5,y:.5,cursorStyleHandler:ql,actionHandler:_u}),br:new Er({x:.5,y:.5,cursorStyleHandler:ql,actionHandler:_u}),mtr:new Er({x:0,y:-.5,actionHandler:Ex,cursorStyleHandler:Dx,offsetY:-40,withConnection:!0,actionName:ig})}),Nx=()=>({mr:new Er({x:.5,y:0,actionHandler:ry,cursorStyleHandler:wo,actionName:Zl}),ml:new Er({x:-.5,y:0,actionHandler:ry,cursorStyleHandler:wo,actionName:Zl})}),Fx=()=>Y(Y({},lv()),Nx());class tc extends ki{static getDefaults(){return Y(Y({},super.getDefaults()),tc.ownDefaults)}constructor(t){super(),Object.assign(this,this.constructor.createControls(),tc.ownDefaults),this.setOptions(t)}static createControls(){return{controls:lv()}}_updateCacheCanvas(){const t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){const r=t._currentTransform,i=r.target,s=r.action;if(this===i&&s&&s.startsWith(dh))return!1}return super._updateCacheCanvas()}getActiveControl(){const t=this.__corner;return t?{key:t,control:this.controls[t],coord:this.oCoords[t]}:void 0}findControl(t){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const i=Object.entries(this.oCoords);for(let s=i.length-1;s>=0;s--){const[l,c]=i[s],d=this.controls[l];if(d.shouldActivate(l,this,t,r?c.touchCorner:c.corner))return this.__corner=l,{key:l,control:d,coord:this.oCoords[l]}}}calcOCoords(){const t=this.getViewportTransform(),r=this.getCenterPoint(),i=rc(r.x,r.y),s=Ro({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),l=xn(i,s),c=xn(t,l),d=xn(c,[1/t[0],0,0,1/t[3],0,0]),m=this.group?rh(this.calcTransformMatrix()):void 0;m&&(m.scaleX=Math.abs(m.scaleX),m.scaleY=Math.abs(m.scaleY));const y=this._calculateCurrentDimensions(m),b={};return this.forEachControl(((_,T)=>{const D=_.positionHandler(y,d,this,_);b[T]=Object.assign(D,this._calcCornerCoords(_,D))})),b}_calcCornerCoords(t,r){const i=this.getTotalAngle();return{corner:t.calcCornerCoords(i,this.cornerSize,r.x,r.y,!1,this),touchCorner:t.calcCornerCoords(i,this.touchCornerSize,r.x,r.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(t){for(const r in this.controls)t(this.controls[r],r,this)}drawSelectionBackground(t){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;t.save();const r=this.getRelativeCenterPoint(),i=this._calculateCurrentDimensions(),s=this.getViewportTransform();t.translate(r.x,r.y),t.scale(1/s[0],1/s[3]),t.rotate(qe(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-i.x/2,-i.y/2,i.x,i.y),t.restore()}strokeBorders(t,r){t.strokeRect(-r.x/2,-r.y/2,r.x,r.y)}_drawBorders(t,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=Y({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},i);t.save(),t.strokeStyle=s.borderColor,this._setLineDash(t,s.borderDashArray),this.strokeBorders(t,r),s.hasControls&&this.drawControlsConnectingLines(t,r),t.restore()}_renderControls(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:i,hasControls:s}=this,l=Y({hasBorders:i,hasControls:s},r),c=this.getViewportTransform(),d=l.hasBorders,m=l.hasControls,y=xn(c,this.calcTransformMatrix()),b=rh(y);t.save(),t.translate(b.translateX,b.translateY),t.lineWidth=this.borderScaleFactor,this.group===this.parent&&(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(b.angle-=180),t.rotate(qe(this.group?b.angle:this.angle)),d&&this.drawBorders(t,b,r),m&&this.drawControls(t,r),t.restore()}drawBorders(t,r,i){let s;if(i&&i.forActiveSelection||this.group){const l=cg(this.width,this.height,gh(r)),c=this.isStrokeAccountedForInDimensions()?ag:(this.strokeUniform?new et().scalarAdd(this.canvas?this.canvas.getZoom():1):new et(r.scaleX,r.scaleY)).scalarMultiply(this.strokeWidth);s=l.add(c).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(t,s,i)}drawControlsConnectingLines(t,r){let i=!1;t.beginPath(),this.forEachControl(((s,l)=>{s.withConnection&&s.getVisibility(this,l)&&(i=!0,t.moveTo(s.x*r.x,s.y*r.y),t.lineTo(s.x*r.x+s.offsetX,s.y*r.y+s.offsetY))})),i&&t.stroke()}drawControls(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.save();const i=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:l,cornerColor:c}=this,d=Y({cornerStrokeColor:s,cornerDashArray:l,cornerColor:c},r);t.setTransform(i,0,0,i,0,0),t.strokeStyle=t.fillStyle=d.cornerColor,this.transparentCorners||(t.strokeStyle=d.cornerStrokeColor),this._setLineDash(t,d.cornerDashArray),this.forEachControl(((m,y)=>{if(m.getVisibility(this,y)){const b=this.oCoords[y];m.render(t,b.x,b.y,d,this)}})),t.restore()}isControlVisible(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)}setControlVisible(t,r){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=r}setControlsVisibility(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(t).forEach((r=>{let[i,s]=r;return this.setControlVisible(i,s)}))}clearContextTop(t){if(!this.canvas)return;const r=this.canvas.contextTop;if(!r)return;const i=this.canvas.viewportTransform;r.save(),r.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(r);const s=this.width+4,l=this.height+4;return r.clearRect(-s/2,-l/2,s,l),t||r.restore(),r}onDeselect(t){return!1}onSelect(t){return!1}shouldStartDragging(t){return!1}onDragStart(t){return!1}canDrop(t){return!1}renderDragSourceEffect(t){}renderDropTargetEffect(t){}}function cv(f,t){return t.forEach((r=>{Object.getOwnPropertyNames(r.prototype).forEach((i=>{i!=="constructor"&&Object.defineProperty(f.prototype,i,Object.getOwnPropertyDescriptor(r.prototype,i)||Object.create(null))}))})),f}H(tc,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class On extends tc{}cv(On,[Zy]),At.setClass(On),At.setClass(On,"object");const Ux=(f,t,r,i)=>{const s=2*(i=Math.round(i))+1,{data:l}=f.getImageData(t-i,r-i,s,s);for(let c=3;c<l.length;c+=4)if(l[c]>0)return!1;return!0};class uv{constructor(t){this.options=t,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new et(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new et(1/this.options.scaleX,1/this.options.scaleY):new et(1,1)}createSideVector(t,r){const i=Gd(t,r);return this.options.strokeUniform?i.multiply(this.scale):i}projectOrthogonally(t,r,i){return this.applySkew(t.add(this.calcOrthogonalProjection(t,r,i)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(t){const r=new et(t);return r.y+=r.x*Math.tan(qe(this.options.skewY)),r.x+=r.y*Math.tan(qe(this.options.skewX)),r}scaleUnitVector(t,r){return t.multiply(this.strokeUniformScalar).scalarMultiply(r)}}const Hx=new et;class Mo extends uv{static getOrthogonalRotationFactor(t,r){const i=r?Pd(t,r):lx(t);return Math.abs(i)<nc?-1:1}constructor(t,r,i,s){super(s),H(this,"AB",void 0),H(this,"AC",void 0),H(this,"alpha",void 0),H(this,"bisector",void 0),this.A=new et(t),this.B=new et(r),this.C=new et(i),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Pd(this.AB,this.AC),this.bisector=hg(nv(this.AB.eq(Hx)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(t,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(t,r),l=rv(s),c=Mo.getOrthogonalRotationFactor(l,this.bisector);return this.scaleUnitVector(l,i*c)}projectBevel(){const t=[];return(this.alpha%$u==0?[this.B]:[this.B,this.C]).forEach((r=>{t.push(this.projectOrthogonally(this.A,r)),t.push(this.projectOrthogonally(this.A,r,-this.strokeProjectionMagnitude))})),t}projectMiter(){const t=[],r=Math.abs(this.alpha),i=1/Math.sin(r/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*i),l=this.options.strokeUniform?qd(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return qd(s)/this.strokeProjectionMagnitude<=l&&t.push(this.applySkew(this.A.add(s))),t.push(...this.projectBevel()),t}projectRoundNoSkew(t,r){const i=[],s=new et(Mo.getOrthogonalRotationFactor(this.bisector),Mo.getOrthogonalRotationFactor(new et(this.bisector.y,this.bisector.x)));return[new et(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new et(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach((l=>{ty(l,t,r)&&i.push(this.A.add(l))})),i}projectRoundWithSkew(t,r){const i=[],{skewX:s,skewY:l,scaleX:c,scaleY:d,strokeUniform:m}=this.options,y=new et(Math.tan(qe(s)),Math.tan(qe(l))),b=this.strokeProjectionMagnitude,_=m?b/d/Math.sqrt(1/d**2+1/c**2*y.y**2):b/Math.sqrt(1+y.y**2),T=new et(Math.sqrt(Math.max(b**2-_**2,0)),_),D=m?b/Math.sqrt(1+y.x**2*(1/d)**2/(1/c+1/c*y.x*y.y)**2):b/Math.sqrt(1+y.x**2/(1+y.x*y.y)**2),M=new et(D,Math.sqrt(Math.max(b**2-D**2,0)));return[M,M.scalarMultiply(-1),T,T.scalarMultiply(-1)].map((B=>this.applySkew(m?B.multiply(this.strokeUniformScalar):B))).forEach((B=>{ty(B,t,r)&&i.push(this.applySkew(this.A).add(B))})),i}projectRound(){const t=[];t.push(...this.projectBevel());const r=this.alpha%$u==0,i=this.applySkew(this.A),s=t[r?0:2].subtract(i),l=t[r?1:0].subtract(i),c=r?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),d=Ql(s,c)>0,m=d?s:l,y=d?l:s;return this.isSkewed()?t.push(...this.projectRoundWithSkew(m,y)):t.push(...this.projectRoundNoSkew(m,y)),t}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map((t=>({originPoint:this.A,projectedPoint:t,angle:this.alpha,bisector:this.bisector})))}}class sy extends uv{constructor(t,r,i){super(i),this.A=new et(t),this.T=new et(r)}calcOrthogonalProjection(t,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(t,r);return this.scaleUnitVector(rv(s),i)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const t=[];if(!this.isSkewed()&&this.A.eq(this.T)){const r=new et(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.applySkew(this.A.add(r)),this.applySkew(this.A.subtract(r)))}else t.push(...new Mo(this.A,this.T,this.T,this.options).projectRound());return t}projectSquare(){const t=[];if(this.A.eq(this.T)){const r=new et(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.A.add(r),this.A.subtract(r))}else{const r=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),i=this.scaleUnitVector(hg(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(i);t.push(s.add(r),s.subtract(r))}return t.map((r=>this.applySkew(r)))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map((t=>({originPoint:this.A,projectedPoint:t})))}}const Yx=function(f,t){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const i=[];if(f.length===0)return i;const s=f.reduce(((l,c)=>(l[l.length-1].eq(c)||l.push(new et(c)),l)),[new et(f[0])]);if(s.length===1)r=!0;else if(!r){const l=s[0],c=((d,m)=>{for(let y=d.length-1;y>=0;y--)if(m(d[y],y,d))return y;return-1})(s,(d=>!d.eq(l)));s.splice(c+1)}return s.forEach(((l,c,d)=>{let m,y;c===0?(y=d[1],m=r?l:d[d.length-1]):c===d.length-1?(m=d[c-1],y=r?l:d[0]):(m=d[c-1],y=d[c+1]),r&&d.length===1?i.push(...new sy(l,l,t).project()):!r||c!==0&&c!==d.length-1?i.push(...new Mo(l,m,y,t).project()):i.push(...new sy(l,c===0?y:m,t).project())})),i},gg=f=>{const t={};return Object.keys(f).forEach((r=>{t[r]={},Object.keys(f[r]).forEach((i=>{t[r][i]=Y({},f[r][i])}))})),t},Xx=f=>f.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let Vl;const pg=f=>{if(Vl||Vl||(Vl="Intl"in hh()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),Vl){const t=Vl.segment(f);return Array.from(t).map((r=>{let{segment:i}=r;return i}))}return Vx(f)},Vx=f=>{const t=[];for(let r,i=0;i<f.length;i++)(r=Gx(f,i))!==!1&&t.push(r);return t},Gx=(f,t)=>{const r=f.charCodeAt(t);if(isNaN(r))return"";if(r<55296||r>57343)return f.charAt(t);if(55296<=r&&r<=56319){if(f.length<=t+1)throw"High surrogate without following low surrogate";const s=f.charCodeAt(t+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return f.charAt(t)+f.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";const i=f.charCodeAt(t-1);if(55296>i||i>56319)throw"Low surrogate without preceding high surrogate";return!1},mg=function(f,t){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return f.fill!==t.fill||f.stroke!==t.stroke||f.strokeWidth!==t.strokeWidth||f.fontSize!==t.fontSize||f.fontFamily!==t.fontFamily||f.fontWeight!==t.fontWeight||f.fontStyle!==t.fontStyle||f.textDecorationThickness!==t.textDecorationThickness||f.textBackgroundColor!==t.textBackgroundColor||f.deltaY!==t.deltaY||r&&(f.overline!==t.overline||f.underline!==t.underline||f.linethrough!==t.linethrough)},qx=(f,t)=>{const r=t.split(`
`),i=[];let s=-1,l={};f=gg(f);for(let c=0;c<r.length;c++){const d=pg(r[c]);if(f[c])for(let m=0;m<d.length;m++){s++;const y=f[c][m];y&&Object.keys(y).length>0&&(mg(l,y,!0)?i.push({start:s,end:s+1,style:y}):i[i.length-1].end++),l=y||{}}else s+=d.length,l={}}return i},Px=(f,t)=>{if(!Array.isArray(f))return gg(f);const r=t.split(rg),i={};let s=-1,l=0;for(let c=0;c<r.length;c++){const d=pg(r[c]);for(let m=0;m<d.length;m++)s++,f[l]&&f[l].start<=s&&s<f[l].end&&(i[c]=i[c]||{},i[c][m]=Y({},f[l].style),s===f[l].end-1&&l++)}return i},Ra=["display","transform",nn,"fill-opacity","fill-rule","opacity",qn,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function oy(f,t){const r=f.nodeName,i=f.getAttribute("class"),s=f.getAttribute("id"),l="(?![a-zA-Z\\-]+)";let c;if(c=new RegExp("^"+r,"i"),t=t.replace(c,""),s&&t.length&&(c=new RegExp("#"+s+l,"i"),t=t.replace(c,"")),i&&t.length){const d=i.split(" ");for(let m=d.length;m--;)c=new RegExp("\\."+d[m]+l,"i"),t=t.replace(c,"")}return t.length===0}function Kx(f,t){let r=!0;const i=oy(f,t.pop());return i&&t.length&&(r=(function(s,l){let c,d=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&l.length;)d&&(c=l.pop()),d=oy(s=s.parentElement,c);return l.length===0})(f,t)),i&&r&&t.length===0}const Wx=f=>{var t;return(t=sx[f])!==null&&t!==void 0?t:f},Qx=new RegExp("(".concat(zr,")"),"gi"),Zx=f=>sh(f.replace(Qx," $1 ").replace(/,/gi," "));var ly,cy,uy,hy,fy,dy,gy;const kn="(".concat(zr,")"),Ix=String.raw(ly||(ly=ti(["(skewX)(",")"],["(skewX)\\(","\\)"])),kn),Jx=String.raw(cy||(cy=ti(["(skewY)(",")"],["(skewY)\\(","\\)"])),kn),$x=String.raw(uy||(uy=ti(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),kn,kn,kn),t_=String.raw(hy||(hy=ti(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),kn,kn),e_=String.raw(fy||(fy=ti(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),kn,kn),n_=String.raw(dy||(dy=ti(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),kn,kn,kn,kn,kn,kn),yg="(?:".concat(n_,"|").concat(e_,"|").concat($x,"|").concat(t_,"|").concat(Ix,"|").concat(Jx,")"),r_="(?:".concat(yg,"*)"),i_=String.raw(gy||(gy=ti(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),r_),a_=new RegExp(i_),s_=new RegExp(yg),o_=new RegExp(yg,"g");function Kd(f){const t=[];if(!(f=Zx(f).replace(/\s*([()])\s*/gi,"$1"))||f&&!a_.test(f))return[...zn];for(const r of f.matchAll(o_)){const i=s_.exec(r[0]);if(!i)continue;let s=zn;const l=i.filter((M=>!!M)),[,c,...d]=l,[m,y,b,_,T,D]=d.map((M=>parseFloat(M)));switch(c){case"translate":s=rc(m,y);break;case ig:s=Ro({angle:m},{x:y,y:b});break;case dh:s=og(m,y);break;case ko:s=Uy(m);break;case zo:s=Hy(m);break;case"matrix":s=[m,y,b,_,T,D]}t.push(s)}return sg(t)}function l_(f,t,r,i){const s=Array.isArray(t);let l,c=t;if(f!==nn&&f!==qn||t!==Gn){if(f==="strokeUniform")return t==="non-scaling-stroke";if(f==="strokeDashArray")c=t===Gn?null:t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(f==="transformMatrix")c=r&&r.transformMatrix?xn(r.transformMatrix,Kd(t)):Kd(t);else if(f==="visible")c=t!==Gn&&t!=="hidden",r&&r.visible===!1&&(c=!1);else if(f==="opacity")c=parseFloat(t),r&&r.opacity!==void 0&&(c*=r.opacity);else if(f==="textAnchor")c=t==="start"?ye:t==="end"?Ge:ne;else if(f==="charSpacing"||f===Ts)l=Eo(t,i)/i*1e3;else if(f==="paintFirst"){const d=t.indexOf(nn),m=t.indexOf(qn);c=nn,(d>-1&&m>-1&&m<d||d===-1&&m>-1)&&(c=qn)}else{if(f==="href"||f==="xlink:href"||f==="font"||f==="id")return t;if(f==="imageSmoothing")return t==="optimizeQuality";l=s?t.map(Eo):Eo(t,i)}}else c="";return!s&&isNaN(l)?c:l}function c_(f,t){const r=f.match(ax);if(!r)return;const i=r[1],s=r[3],l=r[4],c=r[5],d=r[6];i&&(t.fontStyle=i),s&&(t.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),l&&(t.fontSize=Eo(l)),d&&(t.fontFamily=d),c&&(t.lineHeight=c==="normal"?1:c)}function u_(f,t){f.replace(/;\s*$/,"").split(";").forEach((r=>{if(!r)return;const[i,s]=r.split(":");t[i.trim().toLowerCase()]=s.trim()}))}function h_(f){const t={},r=f.getAttribute("style");return r&&(typeof r=="string"?u_(r,t):(function(i,s){Object.entries(i).forEach((l=>{let[c,d]=l;d!==void 0&&(s[c.toLowerCase()]=d)}))})(r,t)),t}const f_={stroke:"strokeOpacity",fill:"fillOpacity"};function Pi(f,t,r){if(!f)return{};let i,s={},l=ng;f.parentNode&&$0.test(f.parentNode.nodeName)&&(s=Pi(f.parentElement,t,r),s.fontSize&&(i=l=Eo(s.fontSize)));const c=Y(Y(Y({},t.reduce(((y,b)=>{const _=f.getAttribute(b);return _&&(y[b]=_),y}),{})),(function(y){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_={};for(const T in b)Kx(y,T.split(" "))&&(_=Y(Y({},_),b[T]));return _})(f,r)),h_(f));c[jd]&&f.setAttribute(jd,c[jd]),c[Md]&&(i=Eo(c[Md],l),c[Md]="".concat(i));const d={};for(const y in c){const b=Wx(y),_=l_(b,c[y],s,i);d[b]=_}d&&d.font&&c_(d.font,d);const m=Y(Y({},s),d);return $0.test(f.nodeName)?m:(function(y){const b=On.getDefaults();return Object.entries(f_).forEach((_=>{let[T,D]=_;if(y[D]===void 0||y[T]==="")return;if(y[T]===void 0){if(!b[T])return;y[T]=b[T]}if(y[T].indexOf("url(")===0)return;const M=new xe(y[T]);y[T]=M.setAlpha(Ee(M.getAlpha()*y[D],2)).toRgba()})),y})(m)}const d_=["left","top","width","height","visible"],hv=["rx","ry"];class jr extends On{static getDefaults(){return Y(Y({},super.getDefaults()),jr.ownDefaults)}constructor(t){super(),Object.assign(this,jr.ownDefaults),this.setOptions(t),this._initRxRy()}_initRxRy(){const{rx:t,ry:r}=this;t&&!r?this.ry=t:r&&!t&&(this.rx=r)}_render(t){const{width:r,height:i}=this,s=-r/2,l=-i/2,c=this.rx?Math.min(this.rx,r/2):0,d=this.ry?Math.min(this.ry,i/2):0,m=c!==0||d!==0;t.beginPath(),t.moveTo(s+c,l),t.lineTo(s+r-c,l),m&&t.bezierCurveTo(s+r-ja*c,l,s+r,l+ja*d,s+r,l+d),t.lineTo(s+r,l+i-d),m&&t.bezierCurveTo(s+r,l+i-ja*d,s+r-ja*c,l+i,s+r-c,l+i),t.lineTo(s+c,l+i),m&&t.bezierCurveTo(s+ja*c,l+i,s,l+i-ja*d,s,l+i-d),t.lineTo(s,l+d),m&&t.bezierCurveTo(s,l+ja*d,s+ja*c,l,s+c,l),t.closePath(),this._renderPaintInOrder(t)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...hv,...t])}_toSVG(){const{width:t,height:r,rx:i,ry:s}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-t/2,'" y="').concat(-r/2,'" rx="').concat(i,'" ry="').concat(s,'" width="').concat(t,'" height="').concat(r,`" />
`)]}static async fromElement(t,r,i){const s=Pi(t,this.ATTRIBUTE_NAMES,i),{left:l=0,top:c=0,width:d=0,height:m=0,visible:y=!0}=s,b=ze(s,d_);return new this(Y(Y(Y({},r),b),{},{left:l,top:c,width:d,height:m,visible:!!(y&&d&&m)}))}}H(jr,"type","Rect"),H(jr,"cacheProperties",[...qi,...hv]),H(jr,"ownDefaults",{rx:0,ry:0}),H(jr,"ATTRIBUTE_NAMES",[...Ra,"x","y","rx","ry","width","height"]),At.setClass(jr),At.setSVGClass(jr);const Ni="initialization",lh="added",vg="removed",ch="imperative",fv=(f,t)=>{const{strokeUniform:r,strokeWidth:i,width:s,height:l,group:c}=t,d=c&&c!==f?mh(c.calcTransformMatrix(),f.calcTransformMatrix()):null,m=d?t.getRelativeCenterPoint().transform(d):t.getRelativeCenterPoint(),y=!t.isStrokeAccountedForInDimensions(),b=r&&y?J1(new et(i,i),void 0,f.calcTransformMatrix()):ag,_=!r&&y?i:0,T=cg(s+_,l+_,sg([d,t.calcOwnMatrix()],!0)).add(b).scalarDivide(2);return[m.subtract(T),m.add(T)]};class bh{calcLayoutResult(t,r){if(this.shouldPerformLayout(t))return this.calcBoundingBox(r,t)}shouldPerformLayout(t){let{type:r,prevStrategy:i,strategy:s}=t;return r===Ni||r===ch||!!i&&s!==i}shouldLayoutClipPath(t){let{type:r,target:{clipPath:i}}=t;return r!==Ni&&i&&!i.absolutePositioned}getInitialSize(t,r){return r.size}calcBoundingBox(t,r){const{type:i,target:s}=r;if(i===ch&&r.overrides)return r.overrides;if(t.length===0)return;const{left:l,top:c,width:d,height:m}=Ui(t.map((_=>fv(s,_))).reduce(((_,T)=>_.concat(T)),[])),y=new et(d,m),b=new et(l,c).add(y.scalarDivide(2));if(i===Ni){const _=this.getInitialSize(r,{size:y,center:b});return{center:b,relativeCorrection:new et(0,0),size:_}}return{center:b.transform(s.calcOwnMatrix()),size:y}}}H(bh,"type","strategy");class Wd extends bh{shouldPerformLayout(t){return!0}}H(Wd,"type","fit-content"),At.setClass(Wd);const g_=["strategy"],p_=["target","strategy","bubbles","prevStrategy"],dv="layoutManager";class ec{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Wd;H(this,"strategy",void 0),this.strategy=t,this._subscriptions=new Map}performLayout(t){const r=Y(Y({bubbles:!0,strategy:this.strategy},t),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(r);const i=this.getLayoutResult(r);i&&this.commitLayout(r,i),this.onAfterLayout(r,i),this._prevLayoutStrategy=r.strategy}attachHandlers(t,r){const{target:i}=r;return[eh,jy,Zl,Ay,fh,ky,th,N1,F1].map((s=>t.on(s,(l=>this.performLayout(s===eh?{type:"object_modified",trigger:s,e:l,target:i}:{type:"object_modifying",trigger:s,e:l,target:i})))))}subscribe(t,r){this.unsubscribe(t,r);const i=this.attachHandlers(t,r);this._subscriptions.set(t,i)}unsubscribe(t,r){(this._subscriptions.get(t)||[]).forEach((i=>i())),this._subscriptions.delete(t)}unsubscribeTargets(t){t.targets.forEach((r=>this.unsubscribe(r,t)))}subscribeTargets(t){t.targets.forEach((r=>this.subscribe(r,t)))}onBeforeLayout(t){const{target:r,type:i}=t,{canvas:s}=r;if(i===Ni||i===lh?this.subscribeTargets(t):i===vg&&this.unsubscribeTargets(t),r.fire("layout:before",{context:t}),s&&s.fire("object:layout:before",{target:r,context:t}),i===ch&&t.deep){const l=ze(t,g_);r.forEachObject((c=>c.layoutManager&&c.layoutManager.performLayout(Y(Y({},l),{},{bubbles:!1,target:c}))))}}getLayoutResult(t){const{target:r,strategy:i,type:s}=t,l=i.calcLayoutResult(t,r.getObjects());if(!l)return;const c=s===Ni?new et:r.getRelativeCenterPoint(),{center:d,correction:m=new et,relativeCorrection:y=new et}=l,b=c.subtract(d).add(m).transform(s===Ni?zn:kr(r.calcOwnMatrix()),!0).add(y);return{result:l,prevCenter:c,nextCenter:d,offset:b}}commitLayout(t,r){const{target:i}=t,{result:{size:s},nextCenter:l}=r;var c,d;i.set({width:s.x,height:s.y}),this.layoutObjects(t,r),t.type===Ni?i.set({left:(c=t.x)!==null&&c!==void 0?c:l.x+s.x*$e(i.originX),top:(d=t.y)!==null&&d!==void 0?d:l.y+s.y*$e(i.originY)}):(i.setPositionByOrigin(l,ne,ne),i.setCoords(),i.set("dirty",!0))}layoutObjects(t,r){const{target:i}=t;i.forEachObject((s=>{s.group===i&&this.layoutObject(t,r,s)})),t.strategy.shouldLayoutClipPath(t)&&this.layoutObject(t,r,i.clipPath)}layoutObject(t,r,i){let{offset:s}=r;i.set({left:i.left+s.x,top:i.top+s.y})}onAfterLayout(t,r){const{target:i,strategy:s,bubbles:l,prevStrategy:c}=t,d=ze(t,p_),{canvas:m}=i;i.fire("layout:after",{context:t,result:r}),m&&m.fire("object:layout:after",{context:t,result:r,target:i});const y=i.parent;l&&y!=null&&y.layoutManager&&((d.path||(d.path=[])).push(i),y.layoutManager.performLayout(Y(Y({},d),{},{target:y}))),i.set("dirty",!0)}dispose(){const{_subscriptions:t}=this;t.forEach((r=>r.forEach((i=>i())))),t.clear()}toObject(){return{type:dv,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}At.setClass(ec,dv);const m_=["type","objects","layoutManager"];class y_ extends ec{performLayout(){}}class Cs extends zy(On){static getDefaults(){return Y(Y({},super.getDefaults()),Cs.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),H(this,"_activeObjects",[]),H(this,"__objectSelectionTracker",void 0),H(this,"__objectSelectionDisposer",void 0),Object.assign(this,Cs.ownDefaults),this.setOptions(r),this.groupInit(t,r)}groupInit(t,r){var i;this._objects=[...t],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject((s=>{this.enterGroup(s,!1)})),this.layoutManager=(i=r.layoutManager)!==null&&i!==void 0?i:new ec,this.layoutManager.performLayout({type:Ni,target:this,targets:[...t],x:r.left,y:r.top})}canEnterGroup(t){return t===this||this.isDescendantOf(t)?(ka("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(t)===-1||(ka("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(t){return t.filter(((r,i,s)=>this.canEnterGroup(r)&&s.indexOf(r)===i))}add(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];const s=this._filterObjectsBeforeEnteringGroup(r),l=super.add(...s);return this._onAfterObjectsChange(lh,s),l}insertAt(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];const l=this._filterObjectsBeforeEnteringGroup(i),c=super.insertAt(t,...l);return this._onAfterObjectsChange(lh,l),c}remove(){const t=super.remove(...arguments);return this._onAfterObjectsChange(vg,t),t}_onObjectAdded(t){this.enterGroup(t,!0),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t,r){this.exitGroup(t,r),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onAfterObjectsChange(t,r){this.layoutManager.performLayout({type:t,targets:r,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(t,r){const i=this[t];return super._set(t,r),t==="canvas"&&i!==r&&(this._objects||[]).forEach((s=>{s._set(t,r)})),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(t,r){let{target:i}=r;const s=this._activeObjects;if(t)s.push(i),this._set("dirty",!0);else if(s.length>0){const l=s.indexOf(i);l>-1&&(s.splice(l,1),this._set("dirty",!0))}}_watchObject(t,r){t&&this._watchObject(!1,r),t?(r.on("selected",this.__objectSelectionTracker),r.on("deselected",this.__objectSelectionDisposer)):(r.off("selected",this.__objectSelectionTracker),r.off("deselected",this.__objectSelectionDisposer))}enterGroup(t,r){t.group&&t.group.remove(t),t._set("parent",this),this._enterGroup(t,r)}_enterGroup(t,r){r&&ih(t,xn(kr(this.calcTransformMatrix()),t.calcTransformMatrix())),this._shouldSetNestedCoords()&&t.setCoords(),t._set("group",this),t._set("canvas",this.canvas),this._watchObject(!0,t);const i=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();i&&(i===t||t.isDescendantOf(i))&&this._activeObjects.push(t)}exitGroup(t,r){this._exitGroup(t,r),t._set("parent",void 0),t._set("canvas",void 0)}_exitGroup(t,r){t._set("group",void 0),r||(ih(t,xn(this.calcTransformMatrix(),t.calcTransformMatrix())),t.setCoords()),this._watchObject(!1,t);const i=this._activeObjects.length>0?this._activeObjects.indexOf(t):-1;i>-1&&this._activeObjects.splice(i,1)}shouldCache(){const t=On.prototype.shouldCache.call(this);if(t){for(let r=0;r<this._objects.length;r++)if(this._objects[r].willDrawShadow())return this.ownCaching=!1,!1}return t}willDrawShadow(){if(super.willDrawShadow())return!0;for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(t,r,i){this._renderBackground(t);for(let l=0;l<this._objects.length;l++){var s;const c=this._objects[l];(s=this.canvas)!==null&&s!==void 0&&s.preserveObjectStacking&&c.group!==this?(t.save(),t.transform(...kr(this.calcTransformMatrix())),c.render(t),t.restore()):c.group===this&&c.render(t)}this._drawClipPath(t,this.clipPath,i)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject((t=>t.setCoords()))}triggerLayout(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(Y({target:this,type:ch},t))}render(t){this._transformDone=!0,super.render(t),this._transformDone=!1}__serializeObjects(t,r){const i=this.includeDefaultValues;return this._objects.filter((function(s){return!s.excludeFromExport})).map((function(s){const l=s.includeDefaultValues;s.includeDefaultValues=i;const c=s[t||"toObject"](r);return s.includeDefaultValues=l,c}))}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=this.layoutManager.toObject();return Y(Y(Y({},super.toObject(["subTargetCheck","interactive",...t])),r.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:r}:{}),{},{objects:this.__serializeObjects("toObject",t)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject((t=>{this._watchObject(!1,t),t.dispose()})),super.dispose()}_createSVGBgRect(t){if(!this.backgroundColor)return"";const r=jr.prototype._toSVG.call(this),i=r.indexOf("COMMON_PARTS");r[i]='for="group" ';const s=r.join("");return t?t(s):s}_toSVG(t){const r=["<g ","COMMON_PARTS",` >
`],i=this._createSVGBgRect(t);i&&r.push("		",i);for(let s=0;s<this._objects.length;s++)r.push("		",this._objects[s].toSVG(t));return r.push(`</g>
`),r}getSvgStyles(){const t=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",r=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),r].join("")}toClipPathSVG(t){const r=[],i=this._createSVGBgRect(t);i&&r.push("	",i);for(let s=0;s<this._objects.length;s++)r.push("	",this._objects[s].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(r,{reviver:t})}static fromObject(t,r){let{type:i,objects:s=[],layoutManager:l}=t,c=ze(t,m_);return Promise.all([Il(s,r),ph(c,r)]).then((d=>{let[m,y]=d;const b=new this(m,Y(Y(Y({},c),y),{},{layoutManager:new y_}));if(l){const _=At.getClass(l.type),T=At.getClass(l.strategy);b.layoutManager=new _(new T)}else b.layoutManager=new ec;return b.layoutManager.subscribeTargets({type:Ni,target:b,targets:b.getObjects()}),b.setCoords(),b}))}}H(Cs,"type","Group"),H(Cs,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),At.setClass(Cs);const v_=(f,t)=>Math.min(t.width/f.width,t.height/f.height),b_=(f,t)=>Math.max(t.width/f.width,t.height/f.height),Qd="\\s*,?\\s*",Gl="".concat(Qd,"(").concat(zr,")"),x_="".concat(Gl).concat(Gl).concat(Gl).concat(Qd,"([01])").concat(Qd,"([01])").concat(Gl).concat(Gl),__={m:"l",M:"L"},S_=(f,t,r,i,s,l,c,d,m,y,b)=>{const _=Yi(f),T=Xi(f),D=Yi(t),M=Xi(t),B=r*s*D-i*l*M+c,$=i*s*D+r*l*M+d;return["C",y+m*(-r*s*T-i*l*_),b+m*(-i*s*T+r*l*_),B+m*(r*s*M+i*l*D),$+m*(i*s*M-r*l*D),B,$]},py=(f,t,r,i)=>{const s=Math.atan2(t,f),l=Math.atan2(i,r);return l>=s?l-s:2*Math.PI-(s-l)};function my(f,t,r,i,s,l,c,d){let m;if(ue.cachesBoundsOfCurve&&(m=[...arguments].join(),Pl.boundsOfCurveCache[m]))return Pl.boundsOfCurveCache[m];const y=Math.sqrt,b=Math.abs,_=[],T=[[0,0],[0,0]];let D=6*f-12*r+6*s,M=-3*f+9*r-9*s+3*c,B=3*r-3*f;for(let pt=0;pt<2;++pt){if(pt>0&&(D=6*t-12*i+6*l,M=-3*t+9*i-9*l+3*d,B=3*i-3*t),b(M)<1e-12){if(b(D)<1e-12)continue;const Rt=-B/D;0<Rt&&Rt<1&&_.push(Rt);continue}const at=D*D-4*B*M;if(at<0)continue;const ft=y(at),dt=(-D+ft)/(2*M);0<dt&&dt<1&&_.push(dt);const Ot=(-D-ft)/(2*M);0<Ot&&Ot<1&&_.push(Ot)}let $=_.length;const nt=$,ht=gv(f,t,r,i,s,l,c,d);for(;$--;){const{x:pt,y:at}=ht(_[$]);T[0][$]=pt,T[1][$]=at}T[0][nt]=f,T[1][nt]=t,T[0][nt+1]=c,T[1][nt+1]=d;const bt=[new et(Math.min(...T[0]),Math.min(...T[1])),new et(Math.max(...T[0]),Math.max(...T[1]))];return ue.cachesBoundsOfCurve&&(Pl.boundsOfCurveCache[m]=bt),bt}const C_=(f,t,r)=>{let[i,s,l,c,d,m,y,b]=r;const _=((T,D,M,B,$,nt,ht)=>{if(M===0||B===0)return[];let bt=0,pt=0,at=0;const ft=Math.PI,dt=ht*eg,Ot=Xi(dt),Rt=Yi(dt),Vt=.5*(-Rt*T-Ot*D),Qt=.5*(-Rt*D+Ot*T),Ut=M**2,Pt=B**2,Kt=Qt**2,re=Vt**2,tt=Ut*Pt-Ut*Kt-Pt*re;let gt=Math.abs(M),_t=Math.abs(B);if(tt<0){const un=Math.sqrt(1-tt/(Ut*Pt));gt*=un,_t*=un}else at=($===nt?-1:1)*Math.sqrt(tt/(Ut*Kt+Pt*re));const zt=at*gt*Qt/_t,Lt=-at*_t*Vt/gt,R=Rt*zt-Ot*Lt+.5*T,st=Ot*zt+Rt*Lt+.5*D;let mt=py(1,0,(Vt-zt)/gt,(Qt-Lt)/_t),Et=py((Vt-zt)/gt,(Qt-Lt)/_t,(-Vt-zt)/gt,(-Qt-Lt)/_t);nt===0&&Et>0?Et-=2*ft:nt===1&&Et<0&&(Et+=2*ft);const Ht=Math.ceil(Math.abs(Et/ft*2)),Yt=[],te=Et/Ht,tn=8/3*Math.sin(te/4)*Math.sin(te/4)/Math.sin(te/2);let Tt=mt+te;for(let un=0;un<Ht;un++)Yt[un]=S_(mt,Tt,Rt,Ot,gt,_t,R,st,tn,bt,pt),bt=Yt[un][5],pt=Yt[un][6],mt=Tt,Tt+=te;return Yt})(y-f,b-t,s,l,d,m,c);for(let T=0,D=_.length;T<D;T++)_[T][1]+=f,_[T][2]+=t,_[T][3]+=f,_[T][4]+=t,_[T][5]+=f,_[T][6]+=t;return _},w_=f=>{let t=0,r=0,i=0,s=0;const l=[];let c,d=0,m=0;for(const y of f){const b=[...y];let _;switch(b[0]){case"l":b[1]+=t,b[2]+=r;case"L":t=b[1],r=b[2],_=["L",t,r];break;case"h":b[1]+=t;case"H":t=b[1],_=["L",t,r];break;case"v":b[1]+=r;case"V":r=b[1],_=["L",t,r];break;case"m":b[1]+=t,b[2]+=r;case"M":t=b[1],r=b[2],i=b[1],s=b[2],_=["M",t,r];break;case"c":b[1]+=t,b[2]+=r,b[3]+=t,b[4]+=r,b[5]+=t,b[6]+=r;case"C":d=b[3],m=b[4],t=b[5],r=b[6],_=["C",b[1],b[2],d,m,t,r];break;case"s":b[1]+=t,b[2]+=r,b[3]+=t,b[4]+=r;case"S":c==="C"?(d=2*t-d,m=2*r-m):(d=t,m=r),t=b[3],r=b[4],_=["C",d,m,b[1],b[2],t,r],d=_[3],m=_[4];break;case"q":b[1]+=t,b[2]+=r,b[3]+=t,b[4]+=r;case"Q":d=b[1],m=b[2],t=b[3],r=b[4],_=["Q",d,m,t,r];break;case"t":b[1]+=t,b[2]+=r;case"T":c==="Q"?(d=2*t-d,m=2*r-m):(d=t,m=r),t=b[1],r=b[2],_=["Q",d,m,t,r];break;case"a":b[6]+=t,b[7]+=r;case"A":C_(t,r,b).forEach((T=>l.push(T))),t=b[6],r=b[7];break;case"z":case"Z":t=i,r=s,_=["Z"]}_?(l.push(_),c=_[0]):c=""}return l},uh=(f,t,r,i)=>Math.sqrt((r-f)**2+(i-t)**2),gv=(f,t,r,i,s,l,c,d)=>m=>{const y=m**3,b=(D=>3*D**2*(1-D))(m),_=(D=>3*D*(1-D)**2)(m),T=(D=>(1-D)**3)(m);return new et(c*y+s*b+r*_+f*T,d*y+l*b+i*_+t*T)},pv=f=>f**2,mv=f=>2*f*(1-f),yv=f=>(1-f)**2,T_=(f,t,r,i,s,l,c,d)=>m=>{const y=pv(m),b=mv(m),_=yv(m),T=3*(_*(r-f)+b*(s-r)+y*(c-s)),D=3*(_*(i-t)+b*(l-i)+y*(d-l));return Math.atan2(D,T)},O_=(f,t,r,i,s,l)=>c=>{const d=pv(c),m=mv(c),y=yv(c);return new et(s*d+r*m+f*y,l*d+i*m+t*y)},D_=(f,t,r,i,s,l)=>c=>{const d=1-c,m=2*(d*(r-f)+c*(s-r)),y=2*(d*(i-t)+c*(l-i));return Math.atan2(y,m)},yy=(f,t,r)=>{let i=new et(t,r),s=0;for(let l=1;l<=100;l+=1){const c=f(l/100);s+=uh(i.x,i.y,c.x,c.y),i=c}return s},E_=(f,t)=>{let r,i=0,s=0,l={x:f.x,y:f.y},c=Y({},l),d=.01,m=0;const y=f.iterator,b=f.angleFinder;for(;s<t&&d>1e-4;)c=y(i),m=i,r=uh(l.x,l.y,c.x,c.y),r+s>t?(i-=d,d/=2):(l=c,i+=d,s+=r);return Y(Y({},c),{},{angle:b(m)})},vv=f=>{let t,r,i=0,s=0,l=0,c=0,d=0;const m=[];for(const y of f){const b={x:s,y:l,command:y[0],length:0};switch(y[0]){case"M":r=b,r.x=c=s=y[1],r.y=d=l=y[2];break;case"L":r=b,r.length=uh(s,l,y[1],y[2]),s=y[1],l=y[2];break;case"C":t=gv(s,l,y[1],y[2],y[3],y[4],y[5],y[6]),r=b,r.iterator=t,r.angleFinder=T_(s,l,y[1],y[2],y[3],y[4],y[5],y[6]),r.length=yy(t,s,l),s=y[5],l=y[6];break;case"Q":t=O_(s,l,y[1],y[2],y[3],y[4]),r=b,r.iterator=t,r.angleFinder=D_(s,l,y[1],y[2],y[3],y[4]),r.length=yy(t,s,l),s=y[3],l=y[4];break;case"Z":r=b,r.destX=c,r.destY=d,r.length=uh(s,l,c,d),s=c,l=d}i+=r.length,m.push(r)}return m.push({length:i,x:s,y:l}),m},M_=function(f,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vv(f),i=0;for(;t-r[i].length>0&&i<r.length-2;)t-=r[i].length,i++;const s=r[i],l=t/s.length,c=f[i];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return Y(Y({},new et(s.x,s.y).lerp(new et(s.destX,s.destY),l)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return Y(Y({},new et(s.x,s.y).lerp(new et(c[1],c[2]),l)),{},{angle:Math.atan2(c[2]-s.y,c[1]-s.x)});case"C":case"Q":return E_(s,t)}},j_=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),vy=new RegExp(x_,"g"),A_=new RegExp(zr,"gi"),k_={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},z_=f=>{var t;const r=[],i=(t=f.match(j_))!==null&&t!==void 0?t:[];for(const s of i){const l=s[0];if(l==="z"||l==="Z"){r.push([l]);continue}const c=k_[l.toLowerCase()];let d=[];if(l==="a"||l==="A"){vy.lastIndex=0;for(let m=null;m=vy.exec(s);)d.push(...m.slice(1))}else d=s.match(A_)||[];for(let m=0;m<d.length;m+=c){const y=new Array(c),b=__[l];y[0]=m>0&&b?b:l;for(let _=0;_<c;_++)y[_+1]=parseFloat(d[m+_]);r.push(y)}}return r},R_=(f,t)=>f.map((r=>r.map(((i,s)=>s===0||t===void 0?i:Ee(i,t))).join(" "))).join(" ");function Zd(f,t){const r=f.style;r&&t&&(typeof t=="string"?r.cssText+=";"+t:Object.entries(t).forEach((i=>{let[s,l]=i;return r.setProperty(s,l)})))}class B_ extends Gy{constructor(t){let{allowTouchScrolling:r=!1,containerClass:i=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t),H(this,"upper",void 0),H(this,"container",void 0);const{el:s}=this.lower,l=this.createUpperCanvas();this.upper={el:l,ctx:l.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:r}),this.applyCanvasStyle(l,{allowTouchScrolling:r,styles:{position:"absolute",left:"0",top:"0"}});const c=this.createContainerElement();c.classList.add(i),s.parentNode&&s.parentNode.replaceChild(c,s),c.append(s,l),this.container=c}createUpperCanvas(){const{el:t}=this.lower,r=Vi();return r.className=t.className,r.classList.remove("lower-canvas"),r.classList.add("upper-canvas"),r.setAttribute("data-fabric","top"),r.style.cssText=t.style.cssText,r.setAttribute("draggable","true"),r}createContainerElement(){const t=Ao().createElement("div");return t.setAttribute("data-fabric","wrapper"),Zd(t,{position:"relative"}),V0(t),t}applyCanvasStyle(t,r){const{styles:i,allowTouchScrolling:s}=r;Zd(t,Y(Y({},i),{},{"touch-action":s?"manipulation":Gn})),V0(t)}setDimensions(t,r){super.setDimensions(t,r);const{el:i,ctx:s}=this.upper;Vy(i,s,t,r)}setCSSDimensions(t){super.setCSSDimensions(t),Xd(this.upper.el,t),Xd(this.container,t)}cleanupDOM(t){const r=this.container,{el:i}=this.lower,{el:s}=this.upper;super.cleanupDOM(t),r.removeChild(s),r.removeChild(i),r.parentNode&&r.parentNode.replaceChild(i,r)}dispose(){super.dispose(),$r().dispose(this.upper.el),delete this.upper,delete this.container}}class xh extends ic{constructor(){super(...arguments),H(this,"targets",[]),H(this,"_hoveredTargets",[]),H(this,"_currentTransform",null),H(this,"_groupSelector",null),H(this,"contextTopDirty",!1)}static getDefaults(){return Y(Y({},super.getDefaults()),xh.ownDefaults)}get upperCanvasEl(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.el}get contextTop(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.ctx}get wrapperEl(){return this.elements.container}initElements(t){this.elements=new B_(t,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(t){this._objectsToRender=void 0,super._onObjectAdded(t)}_onObjectRemoved(t){this._objectsToRender=void 0,t===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[t]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[t]}),t.fire("deselected",{target:t})),t===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(t)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const t=this._activeObject;return!this.preserveObjectStacking&&t?this._objects.filter((r=>!r.group&&r!==t)).concat(t):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()}renderTop(){const t=this.contextTop;this.clearContext(t),this.renderTopLayer(t),this.fire("after:render",{ctx:t})}setTargetFindTolerance(t){t=Math.round(t),this.targetFindTolerance=t;const r=this.getRetinaScaling(),i=Math.ceil((2*t+1)*r);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=i,this.pixelFindContext.scale(r,r)}isTargetTransparent(t,r,i){const s=this.targetFindTolerance,l=this.pixelFindContext;this.clearContext(l),l.save(),l.translate(-r+s,-i+s),l.transform(...this.viewportTransform);const c=t.selectionBackgroundColor;t.selectionBackgroundColor="",t.render(l),t.selectionBackgroundColor=c,l.restore();const d=Math.round(s*this.getRetinaScaling());return Ux(l,d,d,d)}_isSelectionKeyPressed(t){const r=this.selectionKey;return!!r&&(Array.isArray(r)?!!r.find((i=>!!i&&t[i]===!0)):t[r])}_shouldClearSelection(t,r){const i=this.getActiveObjects(),s=this._activeObject;return!!(!r||r&&s&&i.length>1&&i.indexOf(r)===-1&&s!==r&&!this._isSelectionKeyPressed(t)||r&&!r.evented||r&&!r.selectable&&s&&s!==r)}_shouldCenterTransform(t,r,i){if(!t)return;let s;return r===dh||r===Pn||r===vr||r===Zl?s=this.centeredScaling||t.centeredScaling:r===ig&&(s=this.centeredRotation||t.centeredRotation),s?!i:i}_getOriginFromCorner(t,r){const i={x:t.originX,y:t.originY};return r&&(["ml","tl","bl"].includes(r)?i.x=Ge:["mr","tr","br"].includes(r)&&(i.x=ye),["tl","mt","tr"].includes(r)?i.y=Yd:["bl","mb","br"].includes(r)&&(i.y=Vn)),i}_setupCurrentTransform(t,r,i){var s;const l=r.group?Do(this.getScenePoint(t),void 0,r.group.calcTransformMatrix()):this.getScenePoint(t),{key:c="",control:d}=r.getActiveControl()||{},m=i&&d?(s=d.getActionHandler(t,r,d))===null||s===void 0?void 0:s.bind(d):ex,y=((D,M,B,$)=>{if(!M||!D)return"drag";const nt=$.controls[M];return nt.getActionName(B,nt,$)})(i,c,t,r),b=t[this.centeredKey],_=this._shouldCenterTransform(r,y,b)?{x:ne,y:ne}:this._getOriginFromCorner(r,c),T={target:r,action:y,actionHandler:m,actionPerformed:!1,corner:c,scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,offsetX:l.x-r.left,offsetY:l.y-r.top,originX:_.x,originY:_.y,ex:l.x,ey:l.y,lastX:l.x,lastY:l.y,theta:qe(r.angle),width:r.width,height:r.height,shiftKey:t.shiftKey,altKey:b,original:Y(Y({},qy(r)),{},{originX:_.x,originY:_.y})};this._currentTransform=T,this.fire("before:transform",{e:t,transform:T})}setCursor(t){this.upperCanvasEl.style.cursor=t}_drawSelection(t){const{x:r,y:i,deltaX:s,deltaY:l}=this._groupSelector,c=new et(r,i).transform(this.viewportTransform),d=new et(r+s,i+l).transform(this.viewportTransform),m=this.selectionLineWidth/2;let y=Math.min(c.x,d.x),b=Math.min(c.y,d.y),_=Math.max(c.x,d.x),T=Math.max(c.y,d.y);this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(y,b,_-y,T-b)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,y+=m,b+=m,_-=m,T-=m,On.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(y,b,_-y,T-b))}findTarget(t){if(this.skipTargetFind)return;const r=this.getViewportPoint(t),i=this._activeObject,s=this.getActiveObjects();if(this.targets=[],i&&s.length>=1){if(i.findControl(r,Vd(t))||s.length>1&&this.searchPossibleTargets([i],r))return i;if(i===this.searchPossibleTargets([i],r)){if(this.preserveObjectStacking){const l=this.targets;this.targets=[];const c=this.searchPossibleTargets(this._objects,r);return t[this.altSelectionKey]&&c&&c!==i?(this.targets=l,i):c}return i}}return this.searchPossibleTargets(this._objects,r)}_pointIsInObjectSelectionArea(t,r){let i=t.getCoords();const s=this.getZoom(),l=t.padding/s;if(l){const[c,d,m,y]=i,b=Math.atan2(d.y-c.y,d.x-c.x),_=Yi(b)*l,T=Xi(b)*l,D=_+T,M=_-T;i=[new et(c.x-M,c.y-D),new et(d.x+D,d.y-M),new et(m.x+M,m.y+D),new et(y.x-D,y.y+M)]}return Le.isPointInPolygon(r,i)}_checkTarget(t,r){return!!(t&&t.visible&&t.evented&&this._pointIsInObjectSelectionArea(t,Do(r,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing||!this.isTargetTransparent(t,r.x,r.y)))}_searchPossibleTargets(t,r){let i=t.length;for(;i--;){const s=t[i];if(this._checkTarget(s,r)){if(Ku(s)&&s.subTargetCheck){const l=this._searchPossibleTargets(s._objects,r);l&&this.targets.push(l)}return s}}}searchPossibleTargets(t,r){const i=this._searchPossibleTargets(t,r);if(i&&Ku(i)&&i.interactive&&this.targets[0]){const s=this.targets;for(let l=s.length-1;l>0;l--){const c=s[l];if(!Ku(c)||!c.interactive)return c}return s[0]}return i}getViewportPoint(t){return this._pointer?this._pointer:this.getPointer(t,!0)}getScenePoint(t){return this._absolutePointer?this._absolutePointer:this.getPointer(t)}getPointer(t){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=this.upperCanvasEl,s=i.getBoundingClientRect();let l=W1(t),c=s.width||0,d=s.height||0;c&&d||(Vn in s&&Yd in s&&(d=Math.abs(s.top-s.bottom)),Ge in s&&ye in s&&(c=Math.abs(s.right-s.left))),this.calcOffset(),l.x=l.x-this._offset.left,l.y=l.y-this._offset.top,r||(l=Do(l,void 0,this.viewportTransform));const m=this.getRetinaScaling();m!==1&&(l.x/=m,l.y/=m);const y=c===0||d===0?new et(1,1):new et(i.width/c,i.height/d);return l.multiply(y)}_setDimensionsImpl(t,r){this._resetTransformEventData(),super._setDimensionsImpl(t,r),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Vi(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const t=this._activeObject;return vs(t)?t.getObjects():t?[t]:[]}_fireSelectionEvents(t,r){let i=!1,s=!1;const l=this.getActiveObjects(),c=[],d=[];t.forEach((m=>{l.includes(m)||(i=!0,m.fire("deselected",{e:r,target:m}),d.push(m))})),l.forEach((m=>{t.includes(m)||(i=!0,m.fire("selected",{e:r,target:m}),c.push(m))})),t.length>0&&l.length>0?(s=!0,i&&this.fire("selection:updated",{e:r,selected:c,deselected:d})):l.length>0?(s=!0,this.fire("selection:created",{e:r,selected:c})):t.length>0&&(s=!0,this.fire("selection:cleared",{e:r,deselected:d})),s&&(this._objectsToRender=void 0)}setActiveObject(t,r){const i=this.getActiveObjects(),s=this._setActiveObject(t,r);return this._fireSelectionEvents(i,r),s}_setActiveObject(t,r){const i=this._activeObject;return i!==t&&!(!this._discardActiveObject(r,t)&&this._activeObject)&&!t.onSelect({e:r})&&(this._activeObject=t,vs(t)&&i!==t&&t.set("canvas",this),t.setCoords(),!0)}_discardActiveObject(t,r){const i=this._activeObject;return!!i&&!i.onDeselect({e:t,object:r})&&(this._currentTransform&&this._currentTransform.target===i&&this.endCurrentTransform(t),vs(i)&&i===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(t){const r=this.getActiveObjects(),i=this.getActiveObject();r.length&&this.fire("before:selection:cleared",{e:t,deselected:[i]});const s=this._discardActiveObject(t);return this._fireSelectionEvents(r,t),s}endCurrentTransform(t){const r=this._currentTransform;this._finalizeCurrentTransform(t),r&&r.target&&(r.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(t){const r=this._currentTransform,i=r.target,s={e:t,target:i,transform:r,action:r.action};i._scaling&&(i._scaling=!1),i.setCoords(),r.actionPerformed&&(this.fire("object:modified",s),i.fire(eh,s))}setViewportTransform(t){super.setViewportTransform(t);const r=this._activeObject;r&&r.setCoords()}destroy(){const t=this._activeObject;vs(t)&&(t.removeAll(),t.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(t){const r=this._activeObject;r&&r._renderControls(t)}_toObject(t,r,i){const s=this._realizeGroupTransformOnObject(t),l=super._toObject(t,r,i);return t.set(s),l}_realizeGroupTransformOnObject(t){const{group:r}=t;if(r&&vs(r)&&this._activeObject===r){const i=Bo(t,["angle","flipX","flipY",ye,Pn,vr,ko,zo,Vn]);return Z1(t,r.calcOwnMatrix()),i}return{}}_setSVGObject(t,r,i){const s=this._realizeGroupTransformOnObject(r);super._setSVGObject(t,r,i),r.set(s)}}H(xh,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class L_{constructor(t){H(this,"targets",[]),H(this,"__disposer",void 0);const r=()=>{const{hiddenTextarea:s}=t.getActiveObject()||{};s&&s.focus()},i=t.upperCanvasEl;i.addEventListener("click",r),this.__disposer=()=>i.removeEventListener("click",r)}exitTextEditing(){this.target=void 0,this.targets.forEach((t=>{t.isEditing&&t.exitEditing()}))}add(t){this.targets.push(t)}remove(t){this.unregister(t),Co(this.targets,t)}register(t){this.target=t}unregister(t){t===this.target&&(this.target=void 0)}onMouseMove(t){var r;!((r=this.target)===null||r===void 0)&&r.isEditing&&this.target.updateSelectionOnMouseMove(t)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const N_=["target","oldTarget","fireCanvas","e"],nr={passive:!1},So=(f,t)=>{const r=f.getViewportPoint(t),i=f.getScenePoint(t);return{viewportPoint:r,scenePoint:i,pointer:r,absolutePointer:i}},Aa=function(f){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return f.addEventListener(...r)},pr=function(f){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return f.removeEventListener(...r)},F_={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class Id extends xh{constructor(t){super(t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),H(this,"_isClick",void 0),H(this,"textEditingManager",new L_(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach((r=>{this[r]=this[r].bind(this)})),this.addOrRemove(Aa,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(t,r){const i=this.upperCanvasEl,s=this._getEventPrefix();t(Xy(i),"resize",this._onResize),t(i,s+"down",this._onMouseDown),t(i,"".concat(s,"move"),this._onMouseMove,nr),t(i,"".concat(s,"out"),this._onMouseOut),t(i,"".concat(s,"enter"),this._onMouseEnter),t(i,"wheel",this._onMouseWheel,{passive:!1}),t(i,"contextmenu",this._onContextMenu),t(i,"click",this._onClick),t(i,"dblclick",this._onClick),t(i,"dragstart",this._onDragStart),t(i,"dragend",this._onDragEnd),t(i,"dragover",this._onDragOver),t(i,"dragenter",this._onDragEnter),t(i,"dragleave",this._onDragLeave),t(i,"drop",this._onDrop),this.enablePointerEvents||t(i,"touchstart",this._onTouchStart,nr)}removeListeners(){this.addOrRemove(pr,"remove");const t=this._getEventPrefix(),r=Ar(this.upperCanvasEl);pr(r,"".concat(t,"up"),this._onMouseUp),pr(r,"touchend",this._onTouchEnd,nr),pr(r,"".concat(t,"move"),this._onMouseMove,nr),pr(r,"touchmove",this._onMouseMove,nr),clearTimeout(this._willAddMouseDown)}_onMouseWheel(t){this.__onMouseWheel(t)}_onMouseOut(t){const r=this._hoveredTarget,i=Y({e:t},So(this,t));this.fire("mouse:out",Y(Y({},i),{},{target:r})),this._hoveredTarget=void 0,r&&r.fire("mouseout",Y({},i)),this._hoveredTargets.forEach((s=>{this.fire("mouse:out",Y(Y({},i),{},{target:s})),s&&s.fire("mouseout",Y({},i))})),this._hoveredTargets=[]}_onMouseEnter(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",Y({e:t},So(this,t))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(t){this._isClick=!1;const r=this.getActiveObject();if(r&&r.onDragStart(t)){this._dragSource=r;const i={e:t,target:r};return this.fire("dragstart",i),r.fire("dragstart",i),void Aa(this.upperCanvasEl,"drag",this._onDragProgress)}G0(t)}_renderDragEffects(t,r,i){let s=!1;const l=this._dropTarget;l&&l!==r&&l!==i&&(l.clearContextTop(),s=!0),r?.clearContextTop(),i!==r&&i?.clearContextTop();const c=this.contextTop;c.save(),c.transform(...this.viewportTransform),r&&(c.save(),r.transform(c),r.renderDragSourceEffect(t),c.restore(),s=!0),i&&(c.save(),i.transform(c),i.renderDropTargetEffect(t),c.restore(),s=!0),c.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(t){const r=!!t.dataTransfer&&t.dataTransfer.dropEffect!==Gn,i=r?this._activeObject:void 0,s={e:t,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:r,dropTarget:i};pr(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(t)}_onDragProgress(t){const r={e:t,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",r),this._dragSource&&this._dragSource.fire("drag",r)}findDragTargets(t){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(t)),targets:[...this.targets]}}_onDragOver(t){const r="dragover",{target:i,targets:s}=this.findDragTargets(t),l=this._dragSource,c={e:t,target:i,subTargets:s,dragSource:l,canDrop:!1,dropTarget:void 0};let d;this.fire(r,c),this._fireEnterLeaveEvents(i,c),i&&(i.canDrop(t)&&(d=i),i.fire(r,c));for(let m=0;m<s.length;m++){const y=s[m];y.canDrop(t)&&(d=y),y.fire(r,c)}this._renderDragEffects(t,l,d),this._dropTarget=d}_onDragEnter(t){const{target:r,targets:i}=this.findDragTargets(t),s={e:t,target:r,subTargets:i,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(r,s)}_onDragLeave(t){const r={e:t,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",r),this._fireEnterLeaveEvents(void 0,r),this._renderDragEffects(t,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(t){const{target:r,targets:i}=this.findDragTargets(t),s=this._basicEventHandler("drop:before",Y({e:t,target:r,subTargets:i,dragSource:this._dragSource},So(this,t)));s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(t){const r=this.findTarget(t),i=this.targets||[],s=this._basicEventHandler("contextmenu:before",{e:t,target:r,subTargets:i});return this.stopContextMenu&&G0(t),this._basicEventHandler("contextmenu",s),!1}_onClick(t){const r=t.detail;r>3||r<2||(this._cacheTransformEventData(t),r==2&&t.type==="dblclick"&&this._handleEvent(t,"dblclick"),r==3&&this._handleEvent(t,"tripleclick"),this._resetTransformEventData())}getPointerId(t){const r=t.changedTouches;return r?r[0]&&r[0].identifier:this.enablePointerEvents?t.pointerId:-1}_isMainEvent(t){return t.isPrimary===!0||t.isPrimary!==!1&&(t.type==="touchend"&&t.touches.length===0||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(t){let r=!this.allowTouchScrolling;const i=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),(this.isDrawingMode||i&&this._target===i)&&(r=!0),r&&t.preventDefault(),this._resetTransformEventData();const s=this.upperCanvasEl,l=this._getEventPrefix(),c=Ar(s);Aa(c,"touchend",this._onTouchEnd,nr),r&&Aa(c,"touchmove",this._onMouseMove,nr),pr(s,"".concat(l,"down"),this._onMouseDown)}_onMouseDown(t){this.__onMouseDown(t),this._resetTransformEventData();const r=this.upperCanvasEl,i=this._getEventPrefix();pr(r,"".concat(i,"move"),this._onMouseMove,nr);const s=Ar(r);Aa(s,"".concat(i,"up"),this._onMouseUp),Aa(s,"".concat(i,"move"),this._onMouseMove,nr)}_onTouchEnd(t){if(t.touches.length>0)return;this.__onMouseUp(t),this._resetTransformEventData(),delete this.mainTouchId;const r=this._getEventPrefix(),i=Ar(this.upperCanvasEl);pr(i,"touchend",this._onTouchEnd,nr),pr(i,"touchmove",this._onMouseMove,nr),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((()=>{Aa(this.upperCanvasEl,"".concat(r,"down"),this._onMouseDown),this._willAddMouseDown=0}),400)}_onMouseUp(t){this.__onMouseUp(t),this._resetTransformEventData();const r=this.upperCanvasEl,i=this._getEventPrefix();if(this._isMainEvent(t)){const s=Ar(this.upperCanvasEl);pr(s,"".concat(i,"up"),this._onMouseUp),pr(s,"".concat(i,"move"),this._onMouseMove,nr),Aa(r,"".concat(i,"move"),this._onMouseMove,nr)}}_onMouseMove(t){const r=this.getActiveObject();!this.allowTouchScrolling&&(!r||!r.shouldStartDragging(t))&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(t){const r=this.getActiveObject();return!!r!=!!t||r&&t&&r!==t}__onMouseUp(t){var r;this._cacheTransformEventData(t),this._handleEvent(t,"up:before");const i=this._currentTransform,s=this._isClick,l=this._target,{button:c}=t;if(c)return(this.fireMiddleClick&&c===1||this.fireRightClick&&c===2)&&this._handleEvent(t,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);if(!this._isMainEvent(t))return;let d,m,y=!1;if(i&&(this._finalizeCurrentTransform(t),y=i.actionPerformed),!s){const b=l===this._activeObject;this.handleSelection(t),y||(y=this._shouldRender(l)||!b&&l===this._activeObject)}if(l){const b=l.findControl(this.getViewportPoint(t),Vd(t)),{key:_,control:T}=b||{};if(m=_,l.selectable&&l!==this._activeObject&&l.activeOn==="up")this.setActiveObject(l,t),y=!0;else if(T){const D=T.getMouseUpHandler(t,l,T);D&&(d=this.getScenePoint(t),D.call(T,t,i,d.x,d.y))}l.isMoving=!1}if(i&&(i.target!==l||i.corner!==m)){const b=i.target&&i.target.controls[i.corner],_=b&&b.getMouseUpHandler(t,i.target,b);d=d||this.getScenePoint(t),_&&_.call(b,t,i,d.x,d.y)}this._setCursorFromEvent(t,l),this._handleEvent(t,"up"),this._groupSelector=null,this._currentTransform=null,l&&(l.__corner=void 0),y?this.requestRenderAll():s||(r=this._activeObject)!==null&&r!==void 0&&r.isEditing||this.renderTop()}_basicEventHandler(t,r){const{target:i,subTargets:s=[]}=r;this.fire(t,r),i&&i.fire(t,r);for(let l=0;l<s.length;l++)s[l]!==i&&s[l].fire(t,r);return r}_handleEvent(t,r,i){const s=this._target,l=this.targets||[],c=Y(Y(Y({e:t,target:s,subTargets:l},So(this,t)),{},{transform:this._currentTransform},r==="up:before"||r==="up"?{isClick:this._isClick,currentTarget:this.findTarget(t),currentSubTargets:this.targets}:{}),r==="down:before"||r==="down"?i:{});this.fire("mouse:".concat(r),c),s&&s.fire("mouse".concat(r),c);for(let d=0;d<l.length;d++)l[d]!==s&&l[d].fire("mouse".concat(r),c)}_onMouseDownInDrawingMode(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(t),this.requestRenderAll());const r=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(r,{e:t,pointer:r}),this._handleEvent(t,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(t){if(this._isCurrentlyDrawing){const r=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(r,{e:t,pointer:r})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")}_onMouseUpInDrawingMode(t){const r=this.getScenePoint(t);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:t,pointer:r}):this._isCurrentlyDrawing=!1,this._handleEvent(t,"up")}__onMouseDown(t){this._isClick=!0,this._cacheTransformEventData(t),this._handleEvent(t,"down:before");let r=this._target,i=!!r&&r===this._activeObject;const{button:s}=t;if(s)return(this.fireMiddleClick&&s===1||this.fireRightClick&&s===2)&&this._handleEvent(t,"down",{alreadySelected:i}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._isMainEvent(t)||this._currentTransform)return;let l=this._shouldRender(r),c=!1;if(this.handleMultiSelection(t,r)?(r=this._activeObject,c=!0,l=!0):this._shouldClearSelection(t,r)&&this.discardActiveObject(t),this.selection&&(!r||!r.selectable&&!r.isEditing&&r!==this._activeObject)){const d=this.getScenePoint(t);this._groupSelector={x:d.x,y:d.y,deltaY:0,deltaX:0}}if(i=!!r&&r===this._activeObject,r){r.selectable&&r.activeOn==="down"&&this.setActiveObject(r,t);const d=r.findControl(this.getViewportPoint(t),Vd(t));if(r===this._activeObject&&(d||!c)){this._setupCurrentTransform(t,r,i);const m=d?d.control:void 0,y=this.getScenePoint(t),b=m&&m.getMouseDownHandler(t,r,m);b&&b.call(m,t,this._currentTransform,y.x,y.y)}}l&&(this._objectsToRender=void 0),this._handleEvent(t,"down",{alreadySelected:i}),l&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(t){this._resetTransformEventData(),this._pointer=this.getViewportPoint(t),this._absolutePointer=Do(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)}__onMouseMove(t){if(this._isClick=!1,this._cacheTransformEventData(t),this._handleEvent(t,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!this._isMainEvent(t))return;const r=this._groupSelector;if(r){const i=this.getScenePoint(t);r.deltaX=i.x-r.x,r.deltaY=i.y-r.y,this.renderTop()}else if(this._currentTransform)this._transformObject(t);else{const i=this.findTarget(t);this._setCursorFromEvent(t,i),this._fireOverOutEvents(t,i)}this.textEditingManager.onMouseMove(t),this._handleEvent(t,"move"),this._resetTransformEventData()}_fireOverOutEvents(t,r){const i=this._hoveredTarget,s=this._hoveredTargets,l=this.targets,c=Math.max(s.length,l.length);this.fireSyntheticInOutEvents("mouse",{e:t,target:r,oldTarget:i,fireCanvas:!0});for(let d=0;d<c;d++)l[d]===r||s[d]&&s[d]===i||this.fireSyntheticInOutEvents("mouse",{e:t,target:l[d],oldTarget:s[d]});this._hoveredTarget=r,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(t,r){const i=this._draggedoverTarget,s=this._hoveredTargets,l=this.targets,c=Math.max(s.length,l.length);this.fireSyntheticInOutEvents("drag",Y(Y({},r),{},{target:t,oldTarget:i,fireCanvas:!0}));for(let d=0;d<c;d++)this.fireSyntheticInOutEvents("drag",Y(Y({},r),{},{target:l[d],oldTarget:s[d]}));this._draggedoverTarget=t}fireSyntheticInOutEvents(t,r){let{target:i,oldTarget:s,fireCanvas:l,e:c}=r,d=ze(r,N_);const{targetIn:m,targetOut:y,canvasIn:b,canvasOut:_}=F_[t],T=s!==i;if(s&&T){const D=Y(Y({},d),{},{e:c,target:s,nextTarget:i},So(this,c));l&&this.fire(_,D),s.fire(y,D)}if(i&&T){const D=Y(Y({},d),{},{e:c,target:i,previousTarget:s},So(this,c));l&&this.fire(b,D),i.fire(m,D)}}__onMouseWheel(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()}_transformObject(t){const r=this.getScenePoint(t),i=this._currentTransform,s=i.target,l=s.group?Do(r,void 0,s.group.calcTransformMatrix()):r;i.shiftKey=t.shiftKey,i.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,i,l),i.actionPerformed&&this.requestRenderAll()}_performTransformAction(t,r,i){const{action:s,actionHandler:l,target:c}=r,d=!!l&&l(t,r,i.x,i.y);d&&c.setCoords(),s==="drag"&&d&&(r.target.isMoving=!0,this.setCursor(r.target.moveCursor||this.moveCursor)),r.actionPerformed=r.actionPerformed||d}_setCursorFromEvent(t,r){if(!r)return void this.setCursor(this.defaultCursor);let i=r.hoverCursor||this.hoverCursor;const s=vs(this._activeObject)?this._activeObject:null,l=(!s||r.group!==s)&&r.findControl(this.getViewportPoint(t));if(l){const c=l.control;this.setCursor(c.cursorStyleHandler(t,c,r))}else r.subTargetCheck&&this.targets.concat().reverse().map((c=>{i=c.hoverCursor||i})),this.setCursor(i)}handleMultiSelection(t,r){const i=this._activeObject,s=vs(i);if(i&&this._isSelectionKeyPressed(t)&&this.selection&&r&&r.selectable&&(i!==r||s)&&(s||!r.isDescendantOf(i)&&!i.isDescendantOf(r))&&!r.onSelect({e:t})&&!i.getActiveControl()){if(s){const l=i.getObjects();if(r===i){const c=this.getViewportPoint(t);if(!(r=this.searchPossibleTargets(l,c)||this.searchPossibleTargets(this._objects,c))||!r.selectable)return!1}r.group===i?(i.remove(r),this._hoveredTarget=r,this._hoveredTargets=[...this.targets],i.size()===1&&this._setActiveObject(i.item(0),t)):(i.multiSelectAdd(r),this._hoveredTarget=i,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(l,t)}else{i.isEditing&&i.exitEditing();const l=new(At.getClass("ActiveSelection"))([],{canvas:this});l.multiSelectAdd(i,r),this._hoveredTarget=l,this._setActiveObject(l,t),this._fireSelectionEvents([i],t)}return!0}return!1}handleSelection(t){if(!this.selection||!this._groupSelector)return!1;const{x:r,y:i,deltaX:s,deltaY:l}=this._groupSelector,c=new et(r,i),d=c.add(new et(s,l)),m=c.min(d),y=c.max(d).subtract(m),b=this.collectObjects({left:m.x,top:m.y,width:y.x,height:y.y},{includeIntersecting:!this.selectionFullyContained}),_=c.eq(d)?b[0]?[b[0]]:[]:b.length>1?b.filter((T=>!T.onSelect({e:t}))).reverse():b;if(_.length===1)this.setActiveObject(_[0],t);else if(_.length>1){const T=At.getClass("ActiveSelection");this.setActiveObject(new T(_,{canvas:this}),t)}return this._groupSelector=null,!0}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=arguments.length>1?arguments[1]:void 0;const{upper:i}=this.elements;i.ctx=void 0;const s=super.toCanvasElement(t,r);return i.ctx=i.el.getContext("2d"),s}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const bv={x1:0,y1:0,x2:0,y2:0},U_=Y(Y({},bv),{},{r1:0,r2:0}),To=(f,t)=>isNaN(f)&&typeof t=="number"?t:f;function xv(f){return f&&/%$/.test(f)&&Number.isFinite(parseFloat(f))}function _v(f,t){const r=typeof f=="number"?f:typeof f=="string"?parseFloat(f)/(xv(f)?100:1):NaN;return jo(0,To(r,t),1)}const H_=/\s*;\s*/,Y_=/\s*:\s*/;function X_(f,t){let r,i;const s=f.getAttribute("style");if(s){const c=s.split(H_);c[c.length-1]===""&&c.pop();for(let d=c.length;d--;){const[m,y]=c[d].split(Y_).map((b=>b.trim()));m==="stop-color"?r=y:m==="stop-opacity"&&(i=y)}}const l=new xe(r||f.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:_v(f.getAttribute("offset"),0),color:l.toRgb(),opacity:To(parseFloat(i||f.getAttribute("stop-opacity")||""),1)*l.getAlpha()*t}}function V_(f,t){const r=[],i=f.getElementsByTagName("stop"),s=_v(t,1);for(let l=i.length;l--;)r.push(X_(i[l],s));return r}function Sv(f){return f.nodeName==="linearGradient"||f.nodeName==="LINEARGRADIENT"?"linear":"radial"}function Cv(f){return f.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Dr(f,t){return f.getAttribute(t)}function G_(f,t){return(function(r,i){let s,{width:l,height:c,gradientUnits:d}=i;return Object.entries(r).reduce(((m,y)=>{let[b,_]=y;if(_==="Infinity")s=1;else if(_==="-Infinity")s=0;else{const T=typeof _=="string";s=T?parseFloat(_):_,T&&xv(_)&&(s*=.01,d==="pixels"&&(b!=="x1"&&b!=="x2"&&b!=="r2"||(s*=l),b!=="y1"&&b!=="y2"||(s*=c)))}return m[b]=s,m}),{})})(Sv(f)==="linear"?(function(r){return{x1:Dr(r,"x1")||0,y1:Dr(r,"y1")||0,x2:Dr(r,"x2")||"100%",y2:Dr(r,"y2")||0}})(f):(function(r){return{x1:Dr(r,"fx")||Dr(r,"cx")||"50%",y1:Dr(r,"fy")||Dr(r,"cy")||"50%",r1:0,x2:Dr(r,"cx")||"50%",y2:Dr(r,"cy")||"50%",r2:Dr(r,"r")||"50%"}})(f),Y(Y({},t),{},{gradientUnits:Cv(f)}))}class Cu{constructor(t){const{type:r="linear",gradientUnits:i="pixels",coords:s={},colorStops:l=[],offsetX:c=0,offsetY:d=0,gradientTransform:m,id:y}=t||{};Object.assign(this,{type:r,gradientUnits:i,coords:Y(Y({},r==="radial"?U_:bv),s),colorStops:l,offsetX:c,offsetY:d,gradientTransform:m,id:y?"".concat(y,"_").concat(za()):za()})}addColorStop(t){for(const r in t){const i=new xe(t[r]);this.colorStops.push({offset:parseFloat(r),color:i.toRgb(),opacity:i.getAlpha()})}return this}toObject(t){return Y(Y({},Bo(this,t)),{},{type:this.type,coords:Y({},this.coords),colorStops:this.colorStops.map((r=>Y({},r))),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(t){let{additionalTransform:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[],s=this.gradientTransform?this.gradientTransform.concat():zn.concat(),l=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",c=this.colorStops.map((_=>Y({},_))).sort(((_,T)=>_.offset-T.offset));let d=-this.offsetX,m=-this.offsetY;var y;l==="objectBoundingBox"?(d/=t.width,m/=t.height):(d+=t.width/2,m+=t.height/2),(y=t)&&typeof y._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(d-=t.pathOffset.x,m-=t.pathOffset.y),s[4]-=d,s[5]-=m;const b=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(l,'"'),'gradientTransform="'.concat(r?r+" ":"").concat(Jl(s),'"'),""].join(" ");if(this.type==="linear"){const{x1:_,y1:T,x2:D,y2:M}=this.coords;i.push("<linearGradient ",b,' x1="',_,'" y1="',T,'" x2="',D,'" y2="',M,`">
`)}else if(this.type==="radial"){const{x1:_,y1:T,x2:D,y2:M,r1:B,r2:$}=this.coords,nt=B>$;i.push("<radialGradient ",b,' cx="',nt?_:D,'" cy="',nt?T:M,'" r="',nt?B:$,'" fx="',nt?D:_,'" fy="',nt?M:T,`">
`),nt&&(c.reverse(),c.forEach((bt=>{bt.offset=1-bt.offset})));const ht=Math.min(B,$);if(ht>0){const bt=ht/Math.max(B,$);c.forEach((pt=>{pt.offset+=bt*(1-pt.offset)}))}}return c.forEach((_=>{let{color:T,offset:D,opacity:M}=_;i.push("<stop ",'offset="',100*D+"%",'" style="stop-color:',T,M!==void 0?";stop-opacity: "+M:";",`"/>
`)})),i.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),i.join("")}toLive(t){const{x1:r,y1:i,x2:s,y2:l,r1:c,r2:d}=this.coords,m=this.type==="linear"?t.createLinearGradient(r,i,s,l):t.createRadialGradient(r,i,c,s,l,d);return this.colorStops.forEach((y=>{let{color:b,opacity:_,offset:T}=y;m.addColorStop(T,_!==void 0?new xe(b).setAlpha(_).toRgba():b)})),m}static async fromObject(t){const{colorStops:r,gradientTransform:i}=t;return new this(Y(Y({},t),{},{colorStops:r?r.map((s=>Y({},s))):void 0,gradientTransform:i?[...i]:void 0}))}static fromElement(t,r,i){const s=Cv(t),l=r._findCenterFromElement();return new this(Y({id:t.getAttribute("id")||void 0,type:Sv(t),coords:G_(t,{width:i.viewBoxWidth||i.width,height:i.viewBoxHeight||i.height}),colorStops:V_(t,i.opacity),gradientUnits:s,gradientTransform:Kd(t.getAttribute("gradientTransform")||"")},s==="pixels"?{offsetX:r.width/2-l.x,offsetY:r.height/2-l.y}:{offsetX:0,offsetY:0}))}}H(Cu,"type","Gradient"),At.setClass(Cu,"gradient"),At.setClass(Cu,"linear"),At.setClass(Cu,"radial");const q_=["type","source","patternTransform"];class zd{get type(){return"pattern"}set type(t){ka("warn","Setting type has no effect",t)}constructor(t){H(this,"repeat","repeat"),H(this,"offsetX",0),H(this,"offsetY",0),H(this,"crossOrigin",""),this.id=za(),Object.assign(this,t)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(t){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?t.createPattern(this.source,this.repeat):null}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:r,crossOrigin:i}=this;return Y(Y({},Bo(this,t)),{},{type:"pattern",source:this.sourceToString(),repeat:r,crossOrigin:i,offsetX:Ee(this.offsetX,ue.NUM_FRACTION_DIGITS),offsetY:Ee(this.offsetY,ue.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(t){let{width:r,height:i}=t;const{source:s,repeat:l,id:c}=this,d=To(this.offsetX/r,0),m=To(this.offsetY/i,0),y=l==="repeat-y"||l==="no-repeat"?1+Math.abs(d||0):To(s.width/r,0),b=l==="repeat-x"||l==="no-repeat"?1+Math.abs(m||0):To(s.height/i,0);return['<pattern id="SVGID_'.concat(c,'" x="').concat(d,'" y="').concat(m,'" width="').concat(y,'" height="').concat(b,'">'),'<image x="0" y="0" width="'.concat(s.width,'" height="').concat(s.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(t,r){let{type:i,source:s,patternTransform:l}=t,c=ze(t,q_);const d=await Qu(s,Y(Y({},r),{},{crossOrigin:c.crossOrigin}));return new this(Y(Y({},c),{},{patternTransform:l&&l.slice(0),source:d}))}}H(zd,"type","Pattern"),At.setClass(zd),At.setClass(zd,"pattern");const P_=["path","left","top"],K_=["d"];class bs extends On{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:i,left:s,top:l}=r,c=ze(r,P_);super(),Object.assign(this,bs.ownDefaults),this.setOptions(c),this._setPath(t||[],!0),typeof s=="number"&&this.set(ye,s),typeof l=="number"&&this.set(Vn,l)}_setPath(t,r){this.path=w_(Array.isArray(t)?t:z_(t)),this.setBoundingBox(r)}_findCenterFromElement(){const t=this._calcBoundsFromPath();return new et(t.left+t.width/2,t.top+t.height/2)}_renderPathCommands(t){const r=-this.pathOffset.x,i=-this.pathOffset.y;t.beginPath();for(const s of this.path)switch(s[0]){case"L":t.lineTo(s[1]+r,s[2]+i);break;case"M":t.moveTo(s[1]+r,s[2]+i);break;case"C":t.bezierCurveTo(s[1]+r,s[2]+i,s[3]+r,s[4]+i,s[5]+r,s[6]+i);break;case"Q":t.quadraticCurveTo(s[1]+r,s[2]+i,s[3]+r,s[4]+i);break;case"Z":t.closePath()}}_render(t){this._renderPathCommands(t),this._renderPaintInOrder(t)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y(Y({},super.toObject(t)),{},{path:this.path.map((r=>r.slice()))})}toDatalessObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=this.toObject(t);return this.sourcePath&&(delete r.path,r.sourcePath=this.sourcePath),r}_toSVG(){const t=R_(this.path,ue.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(t,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const t=ue.NUM_FRACTION_DIGITS;return" translate(".concat(Ee(-this.pathOffset.x,t),", ").concat(Ee(-this.pathOffset.y,t),")")}toClipPathSVG(t){const r=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:r})}toSVG(t){const r=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:r})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{width:r,height:i,pathOffset:s}=this._calcDimensions();this.set({width:r,height:i,pathOffset:s}),t&&this.setPositionByOrigin(s,ne,ne)}_calcBoundsFromPath(){const t=[];let r=0,i=0,s=0,l=0;for(const c of this.path)switch(c[0]){case"L":s=c[1],l=c[2],t.push({x:r,y:i},{x:s,y:l});break;case"M":s=c[1],l=c[2],r=s,i=l;break;case"C":t.push(...my(s,l,c[1],c[2],c[3],c[4],c[5],c[6])),s=c[5],l=c[6];break;case"Q":t.push(...my(s,l,c[1],c[2],c[1],c[2],c[3],c[4])),s=c[3],l=c[4];break;case"Z":s=r,l=i}return Ui(t)}_calcDimensions(){const t=this._calcBoundsFromPath();return Y(Y({},t),{},{pathOffset:new et(t.left+t.width/2,t.top+t.height/2)})}static fromObject(t){return this._fromObject(t,{extraParam:"path"})}static async fromElement(t,r,i){const s=Pi(t,this.ATTRIBUTE_NAMES,i),{d:l}=s;return new this(l,Y(Y(Y({},ze(s,K_)),r),{},{left:void 0,top:void 0}))}}H(bs,"type","Path"),H(bs,"cacheProperties",[...qi,"path","fillRule"]),H(bs,"ATTRIBUTE_NAMES",[...Ra,"d"]),At.setClass(bs),At.setSVGClass(bs);const W_=["left","top","radius"],wv=["radius","startAngle","endAngle","counterClockwise"];class zi extends On{static getDefaults(){return Y(Y({},super.getDefaults()),zi.ownDefaults)}constructor(t){super(),Object.assign(this,zi.ownDefaults),this.setOptions(t)}_set(t,r){return super._set(t,r),t==="radius"&&this.setRadius(r),this}_render(t){t.beginPath(),t.arc(0,0,this.radius,qe(this.startAngle),qe(this.endAngle),this.counterClockwise),this._renderPaintInOrder(t)}getRadiusX(){return this.get("radius")*this.get(Pn)}getRadiusY(){return this.get("radius")*this.get(vr)}setRadius(t){this.radius=t,this.set({width:2*t,height:2*t})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...wv,...t])}_toSVG(){const t=(this.endAngle-this.startAngle)%360;if(t===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:r}=this,i=qe(this.startAngle),s=qe(this.endAngle),l=Yi(i)*r,c=Xi(i)*r,d=Yi(s)*r,m=Xi(s)*r,y=t>180?1:0,b=this.counterClockwise?0:1;return['<path d="M '.concat(l," ").concat(c," A ").concat(r," ").concat(r," 0 ").concat(y," ").concat(b," ").concat(d," ").concat(m,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(t,r,i){const s=Pi(t,this.ATTRIBUTE_NAMES,i),{left:l=0,top:c=0,radius:d=0}=s;return new this(Y(Y({},ze(s,W_)),{},{radius:d,left:l-d,top:c-d}))}static fromObject(t){return super._fromObject(t)}}H(zi,"type","Circle"),H(zi,"cacheProperties",[...qi,...wv]),H(zi,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),H(zi,"ATTRIBUTE_NAMES",["cx","cy","r",...Ra]),At.setClass(zi),At.setSVGClass(zi);const Q_=["x1","y1","x2","y2"],Z_=["x1","y1","x2","y2"],Jd=["x1","x2","y1","y2"];class Li extends On{constructor(){let[t,r,i,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Li.ownDefaults),this.setOptions(l),this.x1=t,this.x2=i,this.y1=r,this.y2=s,this._setWidthHeight();const{left:c,top:d}=l;typeof c=="number"&&this.set(ye,c),typeof d=="number"&&this.set(Vn,d)}_setWidthHeight(){const{x1:t,y1:r,x2:i,y2:s}=this;this.width=Math.abs(i-t),this.height=Math.abs(s-r);const{left:l,top:c,width:d,height:m}=Ui([{x:t,y:r},{x:i,y:s}]),y=new et(l+d/2,c+m/2);this.setPositionByOrigin(y,ne,ne)}_set(t,r){return super._set(t,r),Jd.includes(t)&&this._setWidthHeight(),this}_render(t){t.beginPath();const r=this.calcLinePoints();t.moveTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineWidth=this.strokeWidth;const i=t.strokeStyle;var s;yr(this.stroke)?t.strokeStyle=this.stroke.toLive(t):t.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=i}_findCenterFromElement(){return new et((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y(Y({},super.toObject(t)),this.calcLinePoints())}_getNonTransformedDimensions(){const t=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(t.y-=this.strokeWidth),this.height===0&&(t.x-=this.strokeWidth)),t}calcLinePoints(){const{x1:t,x2:r,y1:i,y2:s,width:l,height:c}=this,d=t<=r?-1:1,m=i<=s?-1:1;return{x1:d*l/2,x2:d*-l/2,y1:m*c/2,y2:m*-c/2}}_toSVG(){const{x1:t,x2:r,y1:i,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(t,'" y1="').concat(i,'" x2="').concat(r,'" y2="').concat(s,`" />
`)]}static async fromElement(t,r,i){const s=Pi(t,this.ATTRIBUTE_NAMES,i),{x1:l=0,y1:c=0,x2:d=0,y2:m=0}=s;return new this([l,c,d,m],ze(s,Q_))}static fromObject(t){let{x1:r,y1:i,x2:s,y2:l}=t,c=ze(t,Z_);return this._fromObject(Y(Y({},c),{},{points:[r,i,s,l]}),{extraParam:"points"})}}H(Li,"type","Line"),H(Li,"cacheProperties",[...qi,...Jd]),H(Li,"ATTRIBUTE_NAMES",Ra.concat(Jd)),At.setClass(Li),At.setSVGClass(Li);class xs extends On{static getDefaults(){return Y(Y({},super.getDefaults()),xs.ownDefaults)}constructor(t){super(),Object.assign(this,xs.ownDefaults),this.setOptions(t)}_render(t){const r=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-r,i),t.lineTo(0,-i),t.lineTo(r,i),t.closePath(),this._renderPaintInOrder(t)}_toSVG(){const t=this.width/2,r=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-t," ").concat(r,",0 ").concat(-r,",").concat(t," ").concat(r),'" />']}}H(xs,"type","Triangle"),H(xs,"ownDefaults",{width:100,height:100}),At.setClass(xs),At.setSVGClass(xs);const Tv=["rx","ry"];class Ri extends On{static getDefaults(){return Y(Y({},super.getDefaults()),Ri.ownDefaults)}constructor(t){super(),Object.assign(this,Ri.ownDefaults),this.setOptions(t)}_set(t,r){switch(super._set(t,r),t){case"rx":this.rx=r,this.set("width",2*r);break;case"ry":this.ry=r,this.set("height",2*r)}return this}getRx(){return this.get("rx")*this.get(Pn)}getRy(){return this.get("ry")*this.get(vr)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Tv,...t])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,$u,!1),t.restore(),this._renderPaintInOrder(t)}static async fromElement(t,r,i){const s=Pi(t,this.ATTRIBUTE_NAMES,i);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}function I_(f){if(!f)return[];const t=f.replace(/,/g," ").trim().split(/\s+/),r=[];for(let i=0;i<t.length;i+=2)r.push({x:parseFloat(t[i]),y:parseFloat(t[i+1])});return r}H(Ri,"type","Ellipse"),H(Ri,"cacheProperties",[...qi,...Tv]),H(Ri,"ownDefaults",{rx:0,ry:0}),H(Ri,"ATTRIBUTE_NAMES",[...Ra,"cx","cy","rx","ry"]),At.setClass(Ri),At.setSVGClass(Ri);const J_=["left","top"],Ov={exactBoundingBox:!1};class Mr extends On{static getDefaults(){return Y(Y({},super.getDefaults()),Mr.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),H(this,"strokeDiff",void 0),Object.assign(this,Mr.ownDefaults),this.setOptions(r),this.points=t;const{left:i,top:s}=r;this.initialized=!0,this.setBoundingBox(!0),typeof i=="number"&&this.set(ye,i),typeof s=="number"&&this.set(Vn,s)}isOpen(){return!0}_projectStrokeOnPoints(t){return Yx(this.points,t,this.isOpen())}_calcDimensions(t){t=Y({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},t||{});const r=this.exactBoundingBox?this._projectStrokeOnPoints(t).map((y=>y.projectedPoint)):this.points;if(r.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new et,strokeOffset:new et,strokeDiff:new et};const i=Ui(r),s=gh(Y(Y({},t),{},{scaleX:1,scaleY:1})),l=Ui(this.points.map((y=>Xn(y,s,!0)))),c=new et(this.scaleX,this.scaleY);let d=i.left+i.width/2,m=i.top+i.height/2;return this.exactBoundingBox&&(d-=m*Math.tan(qe(this.skewX)),m-=d*Math.tan(qe(this.skewY))),Y(Y({},i),{},{pathOffset:new et(d,m),strokeOffset:new et(l.left,l.top).subtract(new et(i.left,i.top)).multiply(c),strokeDiff:new et(i.width,i.height).subtract(new et(l.width,l.height)).multiply(c)})}_findCenterFromElement(){const t=Ui(this.points);return new et(t.left+t.width/2,t.top+t.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{left:r,top:i,width:s,height:l,pathOffset:c,strokeOffset:d,strokeDiff:m}=this._calcDimensions();this.set({width:s,height:l,pathOffset:c,strokeOffset:d,strokeDiff:m}),t&&this.setPositionByOrigin(new et(r+s/2,i+l/2),ne,ne)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new et(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let c;if(Object.keys(t).some((d=>this.strokeUniform||this.constructor.layoutProperties.includes(d)))){var r,i;const{width:d,height:m}=this._calcDimensions(t);c=new et((r=t.width)!==null&&r!==void 0?r:d,(i=t.height)!==null&&i!==void 0?i:m)}else{var s,l;c=new et((s=t.width)!==null&&s!==void 0?s:this.width,(l=t.height)!==null&&l!==void 0?l:this.height)}return c.multiply(new et(t.scaleX||this.scaleX,t.scaleY||this.scaleY))}return super._getTransformedDimensions(t)}_set(t,r){const i=this.initialized&&this[t]!==r,s=super._set(t,r);return this.exactBoundingBox&&i&&((t===Pn||t===vr)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(t))&&this.setDimensions(),s}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y(Y({},super.toObject(t)),{},{points:this.points.map((r=>{let{x:i,y:s}=r;return{x:i,y:s}}))})}_toSVG(){const t=[],r=this.pathOffset.x,i=this.pathOffset.y,s=ue.NUM_FRACTION_DIGITS;for(let l=0,c=this.points.length;l<c;l++)t.push(Ee(this.points[l].x-r,s),",",Ee(this.points[l].y-i,s)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(t.join(""),`" />
`)]}_render(t){const r=this.points.length,i=this.pathOffset.x,s=this.pathOffset.y;if(r&&!isNaN(this.points[r-1].y)){t.beginPath(),t.moveTo(this.points[0].x-i,this.points[0].y-s);for(let l=0;l<r;l++){const c=this.points[l];t.lineTo(c.x-i,c.y-s)}!this.isOpen()&&t.closePath(),this._renderPaintInOrder(t)}}complexity(){return this.points.length}static async fromElement(t,r,i){return new this(I_(t.getAttribute("points")),Y(Y({},ze(Pi(t,this.ATTRIBUTE_NAMES,i),J_)),r))}static fromObject(t){return this._fromObject(t,{extraParam:"points"})}}H(Mr,"ownDefaults",Ov),H(Mr,"type","Polyline"),H(Mr,"layoutProperties",[ko,zo,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),H(Mr,"cacheProperties",[...qi,"points"]),H(Mr,"ATTRIBUTE_NAMES",[...Ra]),At.setClass(Mr),At.setSVGClass(Mr);class wu extends Mr{isOpen(){return!1}}H(wu,"ownDefaults",Ov),H(wu,"type","Polygon"),At.setClass(wu),At.setSVGClass(wu);class Dv extends On{isEmptyStyles(t){if(!this.styles||t!==void 0&&!this.styles[t])return!0;const r=t===void 0?this.styles:{line:this.styles[t]};for(const i in r)for(const s in r[i])for(const l in r[i][s])return!1;return!0}styleHas(t,r){if(!this.styles||r!==void 0&&!this.styles[r])return!1;const i=r===void 0?this.styles:{0:this.styles[r]};for(const s in i)for(const l in i[s])if(i[s][l][t]!==void 0)return!0;return!1}cleanStyle(t){if(!this.styles)return!1;const r=this.styles;let i,s,l=0,c=!0,d=0;for(const m in r){i=0;for(const y in r[m]){const b=r[m][y]||{};l++,b[t]!==void 0?(s?b[t]!==s&&(c=!1):s=b[t],b[t]===this[t]&&delete b[t]):c=!1,Object.keys(b).length!==0?i++:delete r[m][y]}i===0&&delete r[m]}for(let m=0;m<this._textLines.length;m++)d+=this._textLines[m].length;c&&l===d&&(this[t]=s,this.removeStyle(t))}removeStyle(t){if(!this.styles)return;const r=this.styles;let i,s,l;for(s in r){for(l in i=r[s],i)delete i[l][t],Object.keys(i[l]).length===0&&delete i[l];Object.keys(i).length===0&&delete r[s]}}_extendStyles(t,r){const{lineIndex:i,charIndex:s}=this.get2DCursorLocation(t);this._getLineStyle(i)||this._setLineStyle(i);const l=lg(Y(Y({},this._getStyleDeclaration(i,s)),r),(c=>c!==void 0));this._setStyleDeclaration(i,s,l)}getSelectionStyles(t,r,i){const s=[];for(let l=t;l<(r||t);l++)s.push(this.getStyleAtPosition(l,i));return s}getStyleAtPosition(t,r){const{lineIndex:i,charIndex:s}=this.get2DCursorLocation(t);return r?this.getCompleteStyleDeclaration(i,s):this._getStyleDeclaration(i,s)}setSelectionStyles(t,r,i){for(let s=r;s<(i||r);s++)this._extendStyles(s,t);this._forceClearCache=!0}_getStyleDeclaration(t,r){var i;const s=this.styles&&this.styles[t];return s&&(i=s[r])!==null&&i!==void 0?i:{}}getCompleteStyleDeclaration(t,r){return Y(Y({},Bo(this,this.constructor._styleProperties)),this._getStyleDeclaration(t,r))}_setStyleDeclaration(t,r,i){this.styles[t][r]=i}_deleteStyleDeclaration(t,r){delete this.styles[t][r]}_getLineStyle(t){return!!this.styles[t]}_setLineStyle(t){this.styles[t]={}}_deleteLineStyle(t){delete this.styles[t]}}H(Dv,"_styleProperties",rx);const $_=/  +/g,tS=/"/g;function Rd(f,t,r,i,s){return"		".concat((function(l,c){let{left:d,top:m,width:y,height:b}=c,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ue.NUM_FRACTION_DIGITS;const T=$l(nn,l,!1),[D,M,B,$]=[d,m,y,b].map((nt=>Ee(nt,_)));return"<rect ".concat(T,' x="').concat(D,'" y="').concat(M,'" width="').concat(B,'" height="').concat($,'"></rect>')})(f,{left:t,top:r,width:i,height:s}),`
`)}const eS=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Bd;class An extends Dv{static getDefaults(){return Y(Y({},super.getDefaults()),An.ownDefaults)}constructor(t,r){super(),H(this,"__charBounds",[]),Object.assign(this,An.ownDefaults),this.setOptions(r),this.styles||(this.styles={}),this.text=t,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const t=this.path;t&&(t.segmentsInfo=vv(t.path))}_splitText(){const t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Ir)&&this.enlargeSpaces()}enlargeSpaces(){let t,r,i,s,l,c,d;for(let m=0,y=this._textLines.length;m<y;m++)if((this.textAlign===Ir||m!==y-1&&!this.isEndOfWrapping(m))&&(s=0,l=this._textLines[m],r=this.getLineWidth(m),r<this.width&&(d=this.textLines[m].match(this._reSpacesAndTabs)))){i=d.length,t=(this.width-r)/i;for(let b=0;b<=l.length;b++)c=this.__charBounds[m][b],this._reSpaceAndTab.test(l[b])?(c.width+=t,c.kernedWidth+=t,c.left+=s,s+=t):c.left+=s}}isEndOfWrapping(t){return t===this._textLines.length-1}missingNewlineOffset(t){return 1}get2DCursorLocation(t,r){const i=r?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<i.length;s++){if(t<=i[s].length)return{lineIndex:s,charIndex:t};t-=i[s].length+this.missingNewlineOffset(s,r)}return{lineIndex:s-1,charIndex:i[s-1].length<t?i[s-1].length:t}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const t=super._getCacheCanvasDimensions(),r=this.fontSize;return t.width+=r*t.zoomX,t.height+=r*t.zoomY,t}_render(t){const r=this.path;r&&!r.isNotVisible()&&r._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")}_renderText(t){this.paintFirst===qn?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))}_setTextStyles(t,r,i){if(t.textBaseline="alphabetic",this.path)switch(this.pathAlign){case ne:t.textBaseline="middle";break;case"ascender":t.textBaseline=Vn;break;case"descender":t.textBaseline=Yd}t.font=this._getFontDeclaration(r,i)}calcTextWidth(){let t=this.getLineWidth(0);for(let r=1,i=this._textLines.length;r<i;r++){const s=this.getLineWidth(r);s>t&&(t=s)}return t}_renderTextLine(t,r,i,s,l,c){this._renderChars(t,r,i,s,l,c)}_renderTextLinesBackground(t){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const r=t.fillStyle,i=this._getLeftOffset();let s=this._getTopOffset();for(let l=0,c=this._textLines.length;l<c;l++){const d=this.getHeightOfLine(l);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",l)){s+=d;continue}const m=this._textLines[l].length,y=this._getLineLeftOffset(l);let b,_,T=0,D=0,M=this.getValueOfPropertyAt(l,0,"textBackgroundColor");const B=this.getHeightOfLineImpl(l);for(let $=0;$<m;$++){const nt=this.__charBounds[l][$];_=this.getValueOfPropertyAt(l,$,"textBackgroundColor"),this.path?(t.save(),t.translate(nt.renderLeft,nt.renderTop),t.rotate(nt.angle),t.fillStyle=_,_&&t.fillRect(-nt.width/2,-B*(1-this._fontSizeFraction),nt.width,B),t.restore()):_!==M?(b=i+y+D,this.direction==="rtl"&&(b=this.width-b-T),t.fillStyle=M,M&&t.fillRect(b,s,T,B),D=nt.left,T=nt.width,M=_):T+=nt.kernedWidth}_&&!this.path&&(b=i+y+D,this.direction==="rtl"&&(b=this.width-b-T),t.fillStyle=_,t.fillRect(b,s,T,B)),s+=d}t.fillStyle=r,this._removeShadow(t)}_measureChar(t,r,i,s){const l=Pl.getFontCache(r),c=this._getFontDeclaration(r),d=i?i+t:t,m=i&&c===this._getFontDeclaration(s),y=r.fontSize/this.CACHE_FONT_SIZE;let b,_,T,D;if(i&&l.has(i)&&(T=l.get(i)),l.has(t)&&(D=b=l.get(t)),m&&l.has(d)&&(_=l.get(d),D=_-T),b===void 0||T===void 0||_===void 0){const M=(function(){return Bd||(Bd=br({width:0,height:0}).getContext("2d")),Bd})();this._setTextStyles(M,r,!0),b===void 0&&(D=b=M.measureText(t).width,l.set(t,b)),T===void 0&&m&&i&&(T=M.measureText(i).width,l.set(i,T)),m&&_===void 0&&(_=M.measureText(d).width,l.set(d,_),D=_-T)}return{width:b*y,kernedWidth:D*y}}getHeightOfChar(t,r){return this.getValueOfPropertyAt(t,r,"fontSize")}measureLine(t){const r=this._measureLine(t);return this.charSpacing!==0&&(r.width-=this._getWidthOfCharSpacing()),r.width<0&&(r.width=0),r}_measureLine(t){let r,i,s=0;const l=this.pathSide===Ge,c=this.path,d=this._textLines[t],m=d.length,y=new Array(m);this.__charBounds[t]=y;for(let b=0;b<m;b++){const _=d[b];i=this._getGraphemeBox(_,t,b,r),y[b]=i,s+=i.kernedWidth,r=_}if(y[m]={left:i?i.left+i.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},c&&c.segmentsInfo){let b=0;const _=c.segmentsInfo[c.segmentsInfo.length-1].length;switch(this.textAlign){case ye:b=l?_-s:0;break;case ne:b=(_-s)/2;break;case Ge:b=l?0:_-s}b+=this.pathStartOffset*(l?-1:1);for(let T=l?m-1:0;l?T>=0:T<m;l?T--:T++)i=y[T],b>_?b%=_:b<0&&(b+=_),this._setGraphemeOnPath(b,i),b+=i.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(t,r){const i=t+r.kernedWidth/2,s=this.path,l=M_(s.path,i,s.segmentsInfo);r.renderLeft=l.x-s.pathOffset.x,r.renderTop=l.y-s.pathOffset.y,r.angle=l.angle+(this.pathSide===Ge?Math.PI:0)}_getGraphemeBox(t,r,i,s,l){const c=this.getCompleteStyleDeclaration(r,i),d=s?this.getCompleteStyleDeclaration(r,i-1):{},m=this._measureChar(t,c,s,d);let y,b=m.kernedWidth,_=m.width;this.charSpacing!==0&&(y=this._getWidthOfCharSpacing(),_+=y,b+=y);const T={width:_,left:0,height:c.fontSize,kernedWidth:b,deltaY:c.deltaY};if(i>0&&!l){const D=this.__charBounds[r][i-1];T.left=D.left+D.width+m.kernedWidth-m.width}return T}getHeightOfLineImpl(t){const r=this.__lineHeights;if(r[t])return r[t];let i=this.getHeightOfChar(t,0);for(let s=1,l=this._textLines[t].length;s<l;s++)i=Math.max(this.getHeightOfChar(t,s),i);return r[t]=i*this._fontSizeMult}getHeightOfLine(t){return this.getHeightOfLineImpl(t)*this.lineHeight}calcTextHeight(){let t=0;for(let r=0,i=this._textLines.length;r<i;r++)t+=r===i-1?this.getHeightOfLineImpl(r):this.getHeightOfLine(r);return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(t,r){t.save();let i=0;const s=this._getLeftOffset(),l=this._getTopOffset();for(let c=0,d=this._textLines.length;c<d;c++)this._renderTextLine(r,t,this._textLines[c],s+this._getLineLeftOffset(c),l+i+this.getHeightOfLineImpl(c),c),i+=this.getHeightOfLine(c);t.restore()}_renderTextFill(t){(this.fill||this.styleHas(nn))&&this._renderTextCommon(t,"fillText")}_renderTextStroke(t){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())}_renderChars(t,r,i,s,l,c){const d=this.textAlign.includes(Ir),m=this.path,y=!d&&this.charSpacing===0&&this.isEmptyStyles(c)&&!m,b=this.direction==="ltr",_=this.direction==="ltr"?1:-1,T=r.direction;let D,M,B,$,nt,ht="",bt=0;if(r.save(),T!==this.direction&&(r.canvas.setAttribute("dir",b?"ltr":"rtl"),r.direction=b?"ltr":"rtl",r.textAlign=b?ye:Ge),l-=this.getHeightOfLineImpl(c)*this._fontSizeFraction,y)return this._renderChar(t,r,c,0,i.join(""),s,l),void r.restore();for(let pt=0,at=i.length-1;pt<=at;pt++)$=pt===at||this.charSpacing||m,ht+=i[pt],B=this.__charBounds[c][pt],bt===0?(s+=_*(B.kernedWidth-B.width),bt+=B.width):bt+=B.kernedWidth,d&&!$&&this._reSpaceAndTab.test(i[pt])&&($=!0),$||(D=D||this.getCompleteStyleDeclaration(c,pt),M=this.getCompleteStyleDeclaration(c,pt+1),$=mg(D,M,!1)),$&&(m?(r.save(),r.translate(B.renderLeft,B.renderTop),r.rotate(B.angle),this._renderChar(t,r,c,pt,ht,-bt/2,0),r.restore()):(nt=s,this._renderChar(t,r,c,pt,ht,nt,l)),ht="",D=M,s+=_*bt,bt=0);r.restore()}_applyPatternGradientTransformText(t){const r=this.width+this.strokeWidth,i=this.height+this.strokeWidth,s=br({width:r,height:i}),l=s.getContext("2d");return s.width=r,s.height=i,l.beginPath(),l.moveTo(0,0),l.lineTo(r,0),l.lineTo(r,i),l.lineTo(0,i),l.closePath(),l.translate(r/2,i/2),l.fillStyle=t.toLive(l),this._applyPatternGradientTransform(l,t),l.fill(),l.createPattern(s,"no-repeat")}handleFiller(t,r,i){let s,l;return yr(i)?i.gradientUnits==="percentage"||i.gradientTransform||i.patternTransform?(s=-this.width/2,l=-this.height/2,t.translate(s,l),t[r]=this._applyPatternGradientTransformText(i),{offsetX:s,offsetY:l}):(t[r]=i.toLive(t),this._applyPatternGradientTransform(t,i)):(t[r]=i,{offsetX:0,offsetY:0})}_setStrokeStyles(t,r){let{stroke:i,strokeWidth:s}=r;return t.lineWidth=s,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",i)}_setFillStyles(t,r){let{fill:i}=r;return this.handleFiller(t,"fillStyle",i)}_renderChar(t,r,i,s,l,c,d){const m=this._getStyleDeclaration(i,s),y=this.getCompleteStyleDeclaration(i,s),b=t==="fillText"&&y.fill,_=t==="strokeText"&&y.stroke&&y.strokeWidth;if(_||b){if(r.save(),r.font=this._getFontDeclaration(y),m.textBackgroundColor&&this._removeShadow(r),m.deltaY&&(d+=m.deltaY),b){const T=this._setFillStyles(r,y);r.fillText(l,c-T.offsetX,d-T.offsetY)}if(_){const T=this._setStrokeStyles(r,y);r.strokeText(l,c-T.offsetX,d-T.offsetY)}r.restore()}}setSuperscript(t,r){this._setScript(t,r,this.superscript)}setSubscript(t,r){this._setScript(t,r,this.subscript)}_setScript(t,r,i){const s=this.get2DCursorLocation(t,!0),l=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),c=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),d={fontSize:l*i.size,deltaY:c+l*i.baseline};this.setSelectionStyles(d,t,r)}_getLineLeftOffset(t){const r=this.getLineWidth(t),i=this.width-r,s=this.textAlign,l=this.direction,c=this.isEndOfWrapping(t);let d=0;return s===Ir||s===Wl&&!c||s===Kl&&!c||s===oh&&!c?0:(s===ne&&(d=i/2),s===Ge&&(d=i),s===Wl&&(d=i/2),s===Kl&&(d=i),l==="rtl"&&(s===Ge||s===Ir||s===Kl?d=0:s===ye||s===oh?d=-i:s!==ne&&s!==Wl||(d=-i/2)),d)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(t){if(this.__lineWidths[t]!==void 0)return this.__lineWidths[t];const{width:r}=this.measureLine(t);return this.__lineWidths[t]=r,r}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(t,r,i){var s;return(s=this._getStyleDeclaration(t,r)[i])!==null&&s!==void 0?s:this[i]}_renderTextDecoration(t,r){if(!this[r]&&!this.styleHas(r))return;let i=this._getTopOffset();const s=this._getLeftOffset(),l=this.path,c=this._getWidthOfCharSpacing(),d=r==="linethrough"?.5:r==="overline"?1:0,m=this.offsets[r];for(let y=0,b=this._textLines.length;y<b;y++){const _=this.getHeightOfLine(y);if(!this[r]&&!this.styleHas(r,y)){i+=_;continue}const T=this._textLines[y],D=_/this.lineHeight,M=this._getLineLeftOffset(y);let B=0,$=0,nt=this.getValueOfPropertyAt(y,0,r),ht=this.getValueOfPropertyAt(y,0,nn),bt=this.getValueOfPropertyAt(y,0,Ts),pt=nt,at=ht,ft=bt;const dt=i+D*(1-this._fontSizeFraction);let Ot=this.getHeightOfChar(y,0),Rt=this.getValueOfPropertyAt(y,0,"deltaY");for(let Ut=0,Pt=T.length;Ut<Pt;Ut++){const Kt=this.__charBounds[y][Ut];pt=this.getValueOfPropertyAt(y,Ut,r),at=this.getValueOfPropertyAt(y,Ut,nn),ft=this.getValueOfPropertyAt(y,Ut,Ts);const re=this.getHeightOfChar(y,Ut),tt=this.getValueOfPropertyAt(y,Ut,"deltaY");if(l&&pt&&at){const gt=this.fontSize*ft/1e3;t.save(),t.fillStyle=ht,t.translate(Kt.renderLeft,Kt.renderTop),t.rotate(Kt.angle),t.fillRect(-Kt.kernedWidth/2,m*re+tt-d*gt,Kt.kernedWidth,gt),t.restore()}else if((pt!==nt||at!==ht||re!==Ot||ft!==bt||tt!==Rt)&&$>0){const gt=this.fontSize*bt/1e3;let _t=s+M+B;this.direction==="rtl"&&(_t=this.width-_t-$),nt&&ht&&bt&&(t.fillStyle=ht,t.fillRect(_t,dt+m*Ot+Rt-d*gt,$,gt)),B=Kt.left,$=Kt.width,nt=pt,bt=ft,ht=at,Ot=re,Rt=tt}else $+=Kt.kernedWidth}let Vt=s+M+B;this.direction==="rtl"&&(Vt=this.width-Vt-$),t.fillStyle=at;const Qt=this.fontSize*ft/1e3;pt&&at&&ft&&t.fillRect(Vt,dt+m*Ot+Rt-d*Qt,$-c,Qt),i+=_}this._removeShadow(t)}_getFontDeclaration(){let{fontFamily:t=this.fontFamily,fontStyle:r=this.fontStyle,fontWeight:i=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=arguments.length>1?arguments[1]:void 0;const c=t.includes("'")||t.includes('"')||t.includes(",")||An.genericFonts.includes(t.toLowerCase())?t:'"'.concat(t,'"');return[r,i,"".concat(l?this.CACHE_FONT_SIZE:s,"px"),c].join(" ")}render(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(t)))}graphemeSplit(t){return pg(t)}_splitTextIntoLines(t){const r=t.split(this._reNewline),i=new Array(r.length),s=[`
`];let l=[];for(let c=0;c<r.length;c++)i[c]=this.graphemeSplit(r[c]),l=l.concat(i[c],s);return l.pop(),{_unwrappedLines:i,lines:r,graphemeText:l,graphemeLines:i}}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y(Y({},super.toObject([...tv,...t])),{},{styles:qx(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(t,r){const{textLayoutProperties:i}=this.constructor;super.set(t,r);let s=!1,l=!1;if(typeof t=="object")for(const c in t)c==="path"&&this.setPathInfo(),s=s||i.includes(c),l=l||c==="path";else s=i.includes(t),l=t==="path";return l&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(t,r,i){const s=Pi(t,An.ATTRIBUTE_NAMES,i),l=Y(Y({},r),s),{textAnchor:c=ye,textDecoration:d="",dx:m=0,dy:y=0,top:b=0,left:_=0,fontSize:T=ng,strokeWidth:D=1}=l,M=ze(l,eS),B=new this(sh(t.textContent||"").trim(),Y({left:_+m,top:b+y,underline:d.includes("underline"),overline:d.includes("overline"),linethrough:d.includes("line-through"),strokeWidth:0,fontSize:T},M)),$=B.getScaledHeight()/B.height,nt=((B.height+B.strokeWidth)*B.lineHeight-B.height)*$,ht=B.getScaledHeight()+nt;let bt=0;return c===ne&&(bt=B.getScaledWidth()/2),c===Ge&&(bt=B.getScaledWidth()),B.set({left:B.left-bt,top:B.top-(ht-B.fontSize*(.07+B._fontSizeFraction))/B.lineHeight,strokeWidth:D}),B}static fromObject(t){return this._fromObject(Y(Y({},t),{},{styles:Px(t.styles||{},t.text)}),{extraParam:"text"})}}H(An,"textLayoutProperties",$y),H(An,"cacheProperties",[...qi,...tv]),H(An,"ownDefaults",ix),H(An,"type","Text"),H(An,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),H(An,"ATTRIBUTE_NAMES",Ra.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),cv(An,[class extends Zy{_toSVG(){const f=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(f.textTop,f.textLeft);return this._wrapSVGTextAndBg(t)}toSVG(f){const t=this._createBaseSVGMarkup(this._toSVG(),{reviver:f,noStyle:!0,withShadow:!0}),r=this.path;return r?t+r._createBaseSVGMarkup(r._toSVG(),{reviver:f,withShadow:!0,additionalTransform:Jl(this.calcOwnMatrix())}):t}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(f){let{textBgRects:t,textSpans:r}=f;const i=this.getSvgTextDecoration(this);return[t.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(tS,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",i?'text-decoration="'.concat(i,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",r.join(""),`</text>
`]}_getSVGTextAndBg(f,t){const r=[],i=[];let s,l=f;this.backgroundColor&&i.push(...Rd(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let c=0,d=this._textLines.length;c<d;c++)s=this._getLineLeftOffset(c),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",c))&&this._setSVGTextLineBg(i,c,t+s,l),this._setSVGTextLineText(r,c,t+s,l),l+=this.getHeightOfLine(c);return{textSpans:r,textBgRects:i}}_createTextCharSpan(f,t,r,i,s){const l=ue.NUM_FRACTION_DIGITS,c=this.getSvgSpanStyles(t,f!==f.trim()||!!f.match($_)),d=c?'style="'.concat(c,'"'):"",m=t.deltaY,y=m?' dy="'.concat(Ee(m,l),'" '):"",{angle:b,renderLeft:_,renderTop:T,width:D}=s;let M="";if(_!==void 0){const B=D/2;b&&(M=' rotate="'.concat(Ee(Gi(b),l),'"'));const $=Ro({angle:Gi(b)});$[4]=_,$[5]=T;const nt=new et(-B,0).transform($);r=nt.x,i=nt.y}return'<tspan x="'.concat(Ee(r,l),'" y="').concat(Ee(i,l),'" ').concat(y).concat(M).concat(d,">").concat(Xx(f),"</tspan>")}_setSVGTextLineText(f,t,r,i){const s=this.getHeightOfLine(t),l=this.textAlign.includes(Ir),c=this._textLines[t];let d,m,y,b,_,T="",D=0;i+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let M=0,B=c.length-1;M<=B;M++)_=M===B||this.charSpacing||this.path,T+=c[M],y=this.__charBounds[t][M],D===0?(r+=y.kernedWidth-y.width,D+=y.width):D+=y.kernedWidth,l&&!_&&this._reSpaceAndTab.test(c[M])&&(_=!0),_||(d=d||this.getCompleteStyleDeclaration(t,M),m=this.getCompleteStyleDeclaration(t,M+1),_=mg(d,m,!0)),_&&(b=this._getStyleDeclaration(t,M),f.push(this._createTextCharSpan(T,b,r,i,y)),T="",d=m,this.direction==="rtl"?r-=D:r+=D,D=0)}_setSVGTextLineBg(f,t,r,i){const s=this._textLines[t],l=this.getHeightOfLine(t)/this.lineHeight;let c,d=0,m=0,y=this.getValueOfPropertyAt(t,0,"textBackgroundColor");for(let b=0;b<s.length;b++){const{left:_,width:T,kernedWidth:D}=this.__charBounds[t][b];c=this.getValueOfPropertyAt(t,b,"textBackgroundColor"),c!==y?(y&&f.push(...Rd(y,r+m,i,d,l)),m=_,d=T,y=c):d+=D}c&&f.push(...Rd(y,r+m,i,d,l))}_getSVGLineTopOffset(f){let t,r=0;for(t=0;t<f;t++)r+=this.getHeightOfLine(t);const i=this.getHeightOfLine(t);return{lineTop:r,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(f){return"".concat(super.getSvgStyles(f)," text-decoration-thickness: ").concat(Ee(this.textDecorationThickness*this.getObjectScaling().y/10,ue.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(f,t){const{fontFamily:r,strokeWidth:i,stroke:s,fill:l,fontSize:c,fontStyle:d,fontWeight:m,deltaY:y,textDecorationThickness:b,linethrough:_,overline:T,underline:D}=f,M=this.getSvgTextDecoration({underline:D??this.underline,overline:T??this.overline,linethrough:_??this.linethrough}),B=b||this.textDecorationThickness;return[s?$l(qn,s):"",i?"stroke-width: ".concat(i,"; "):"",r?"font-family: ".concat(r.includes("'")||r.includes('"')?r:"'".concat(r,"'"),"; "):"",c?"font-size: ".concat(c,"px; "):"",d?"font-style: ".concat(d,"; "):"",m?"font-weight: ".concat(m,"; "):"",M?"text-decoration: ".concat(M,"; text-decoration-thickness: ").concat(Ee(B*this.getObjectScaling().y/10,ue.NUM_FRACTION_DIGITS),"%; "):"",l?$l(nn,l):"",y?"baseline-shift: ".concat(-y,"; "):"",t?"white-space: pre; ":""].join("")}getSvgTextDecoration(f){return["overline","underline","line-through"].filter((t=>f[t.replace("-","")])).join(" ")}}]),At.setClass(An),At.setSVGClass(An);class nS{constructor(t){H(this,"target",void 0),H(this,"__mouseDownInPlace",!1),H(this,"__dragStartFired",!1),H(this,"__isDraggingOver",!1),H(this,"__dragStartSelection",void 0),H(this,"__dragImageDisposer",void 0),H(this,"_dispose",void 0),this.target=t;const r=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{r.forEach((i=>i())),this._dispose=void 0}}isPointerOverSelection(t){const r=this.target,i=r.getSelectionStartFromPointer(t);return r.isEditing&&i>=r.selectionStart&&i<=r.selectionEnd&&r.selectionStart<r.selectionEnd}start(t){return this.__mouseDownInPlace=this.isPointerOverSelection(t)}isActive(){return this.__mouseDownInPlace}end(t){const r=this.isActive();return r&&!this.__dragStartFired&&(this.target.setCursorByClick(t),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,r}getDragStartSelection(){return this.__dragStartSelection}setDragImage(t,r){var i;let{selectionStart:s,selectionEnd:l}=r;const c=this.target,d=c.canvas,m=new et(c.flipX?-1:1,c.flipY?-1:1),y=c._getCursorBoundaries(s),b=new et(y.left+y.leftOffset,y.top+y.topOffset).multiply(m).transform(c.calcTransformMatrix()),_=d.getScenePoint(t).subtract(b),T=c.getCanvasRetinaScaling(),D=c.getBoundingRect(),M=b.subtract(new et(D.left,D.top)),B=d.viewportTransform,$=M.add(_).transform(B,!0),nt=c.backgroundColor,ht=gg(c.styles);c.backgroundColor="";const bt={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};c.setSelectionStyles(bt,0,s),c.setSelectionStyles(bt,l,c.text.length),c.dirty=!0;const pt=c.toCanvasElement({enableRetinaScaling:d.enableRetinaScaling,viewportTransform:!0});c.backgroundColor=nt,c.styles=ht,c.dirty=!0,Zd(pt,{position:"fixed",left:"".concat(-pt.width,"px"),border:Gn,width:"".concat(pt.width/T,"px"),height:"".concat(pt.height/T,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{pt.remove()},Ar(t.target||this.target.hiddenTextarea).body.appendChild(pt),(i=t.dataTransfer)===null||i===void 0||i.setDragImage(pt,$.x,$.y)}onDragStart(t){this.__dragStartFired=!0;const r=this.target,i=this.isActive();if(i&&t.dataTransfer){const s=this.__dragStartSelection={selectionStart:r.selectionStart,selectionEnd:r.selectionEnd},l=r._text.slice(s.selectionStart,s.selectionEnd).join(""),c=Y({text:r.text,value:l},s);t.dataTransfer.setData("text/plain",l),t.dataTransfer.setData("application/fabric",JSON.stringify({value:l,styles:r.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),t.dataTransfer.effectAllowed="copyMove",this.setDragImage(t,c)}return r.abortCursorAnimation(),i}canDrop(t){if(this.target.editable&&!this.target.getActiveControl()&&!t.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const r=this.target.getSelectionStartFromPointer(t),i=this.__dragStartSelection;return r<i.selectionStart||r>i.selectionEnd}return!0}return!1}targetCanDrop(t){return this.target.canDrop(t)}dragEnterHandler(t){let{e:r}=t;const i=this.targetCanDrop(r);!this.__isDraggingOver&&i&&(this.__isDraggingOver=!0)}dragOverHandler(t){const{e:r}=t,i=this.targetCanDrop(r);!this.__isDraggingOver&&i?this.__isDraggingOver=!0:this.__isDraggingOver&&!i&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(r.preventDefault(),t.canDrop=!0,t.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(t){var r;const{e:i}=t,s=i.defaultPrevented;this.__isDraggingOver=!1,i.preventDefault();let l=(r=i.dataTransfer)===null||r===void 0?void 0:r.getData("text/plain");if(l&&!s){const c=this.target,d=c.canvas;let m=c.getSelectionStartFromPointer(i);const{styles:y}=i.dataTransfer.types.includes("application/fabric")?JSON.parse(i.dataTransfer.getData("application/fabric")):{},b=l[Math.max(0,l.length-1)],_=0;if(this.__dragStartSelection){const T=this.__dragStartSelection.selectionStart,D=this.__dragStartSelection.selectionEnd;m>T&&m<=D?m=T:m>D&&(m-=D-T),c.removeChars(T,D),delete this.__dragStartSelection}c._reNewline.test(b)&&(c._reNewline.test(c._text[m])||m===c._text.length)&&(l=l.trimEnd()),t.didDrop=!0,t.dropTarget=c,c.insertChars(l,y,m),d.setActiveObject(c),c.enterEditing(i),c.selectionStart=Math.min(m+_,c._text.length),c.selectionEnd=Math.min(c.selectionStart+l.length,c._text.length),c.hiddenTextarea.value=c.text,c._updateTextarea(),c.hiddenTextarea.focus(),c.fire(th,{index:m+_,action:"drop"}),d.fire("text:changed",{target:c}),d.contextTopDirty=!0,d.requestRenderAll()}}dragEndHandler(t){let{e:r}=t;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var i;const s=this.target,l=this.target.canvas,{selectionStart:c,selectionEnd:d}=this.__dragStartSelection,m=((i=r.dataTransfer)===null||i===void 0?void 0:i.dropEffect)||Gn;m===Gn?(s.selectionStart=c,s.selectionEnd=d,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),m==="move"&&(s.removeChars(c,d),s.selectionStart=s.selectionEnd=c,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(th,{index:c,action:"dragend"}),l.fire("text:changed",{target:s}),l.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const by=/[ \n\.,;!\?\-]/;class rS extends An{constructor(){super(...arguments),H(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(t){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(t)}_animateCursor(t){let{toValue:r,duration:i,delay:s,onComplete:l}=t;return iv({startValue:this._currentCursorOpacity,endValue:r,duration:i,delay:s,onComplete:l,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:c=>{this._currentCursorOpacity=c,this.renderCursorOrSelection()}})}_tick(t){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(t||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var t;(t=this._currentTickCompleteState)===null||t===void 0||t.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(t){this.abortCursorAnimation(),this._tick(t?0:this.cursorDelay)}abortCursorAnimation(){let t=!1;[this._currentTickState,this._currentTickCompleteState].forEach((r=>{r&&!r.isDone()&&(t=!0,r.abort())})),this._currentCursorOpacity=1,t&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some((t=>!t||t.isDone()))&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(t){let r=0,i=t-1;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)r++,i--;for(;/\S/.test(this._text[i])&&i>-1;)r++,i--;return t-r}findWordBoundaryRight(t){let r=0,i=t;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)r++,i++;for(;/\S/.test(this._text[i])&&i<this._text.length;)r++,i++;return t+r}findLineBoundaryLeft(t){let r=0,i=t-1;for(;!/\n/.test(this._text[i])&&i>-1;)r++,i--;return t-r}findLineBoundaryRight(t){let r=0,i=t;for(;!/\n/.test(this._text[i])&&i<this._text.length;)r++,i++;return t+r}searchWordBoundary(t,r){const i=this._text;let s=t>0&&this._reSpace.test(i[t])&&(r===-1||!rg.test(i[t-1]))?t-1:t,l=i[s];for(;s>0&&s<i.length&&!by.test(l);)s+=r,l=i[s];return r===-1&&by.test(l)&&s++,s}selectWord(t){var r;t=(r=t)!==null&&r!==void 0?r:this.selectionStart;const i=this.searchWordBoundary(t,-1),s=Math.max(i,this.searchWordBoundary(t,1));this.selectionStart=i,this.selectionEnd=s,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(t){var r;t=(r=t)!==null&&r!==void 0?r:this.selectionStart;const i=this.findLineBoundaryLeft(t),s=this.findLineBoundaryRight(t);this.selectionStart=i,this.selectionEnd=s,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(t){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",t?{e:t}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(t){if(this.getActiveControl())return;const r=this.hiddenTextarea;Ar(r).activeElement!==r&&r.focus();const i=this.getSelectionStartFromPointer(t),s=this.selectionStart,l=this.selectionEnd;(i===this.__selectionStartOnMouseDown&&s!==l||s!==i&&l!==i)&&(i>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=i):(this.selectionStart=i,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===l||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(t,r,i){const s=i.slice(0,t),l=this.graphemeSplit(s).length;if(t===r)return{selectionStart:l,selectionEnd:l};const c=i.slice(t,r);return{selectionStart:l,selectionEnd:l+this.graphemeSplit(c).length}}fromGraphemeToStringSelection(t,r,i){const s=i.slice(0,t).join("").length;return t===r?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+i.slice(t,r).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const t=this.hiddenTextarea;this.text=t.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const r=this.fromStringToGraphemeSelection(t.selectionStart,t.selectionEnd,t.value);this.selectionEnd=this.selectionStart=r.selectionEnd,this.inCompositionMode||(this.selectionStart=r.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const t=this.inCompositionMode?this.compositionStart:this.selectionStart,r=this._getCursorBoundaries(t),i=this.get2DCursorLocation(t),s=i.lineIndex,l=i.charIndex,c=this.getValueOfPropertyAt(s,l,"fontSize")*this.lineHeight,d=r.leftOffset,m=this.getCanvasRetinaScaling(),y=this.canvas.upperCanvasEl,b=y.width/m,_=y.height/m,T=b-c,D=_-c,M=new et(r.left+d,r.top+r.topOffset+c).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new et(y.clientWidth/b,y.clientHeight/_));return M.x<0&&(M.x=0),M.x>T&&(M.x=T),M.y<0&&(M.y=0),M.y>D&&(M.y=D),M.x+=this.canvas._offset.left,M.y+=this.canvas._offset.top,{left:"".concat(M.x,"px"),top:"".concat(M.y,"px"),fontSize:"".concat(c,"px"),charHeight:c}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const t=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const t=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),t&&this.fire(eh),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const t in this.styles)this._textLines[t]||delete this.styles[t]}removeStyleFromTo(t,r){const{lineIndex:i,charIndex:s}=this.get2DCursorLocation(t,!0),{lineIndex:l,charIndex:c}=this.get2DCursorLocation(r,!0);if(i!==l){if(this.styles[i])for(let d=s;d<this._unwrappedTextLines[i].length;d++)delete this.styles[i][d];if(this.styles[l])for(let d=c;d<this._unwrappedTextLines[l].length;d++){const m=this.styles[l][d];m&&(this.styles[i]||(this.styles[i]={}),this.styles[i][s+d-c]=m)}for(let d=i+1;d<=l;d++)delete this.styles[d];this.shiftLineStyles(l,i-l)}else if(this.styles[i]){const d=this.styles[i],m=c-s;for(let y=s;y<c;y++)delete d[y];for(const y in this.styles[i]){const b=parseInt(y,10);b>=c&&(d[b-m]=d[y],delete d[y])}}}shiftLineStyles(t,r){const i=Object.assign({},this.styles);for(const s in this.styles){const l=parseInt(s,10);l>t&&(this.styles[l+r]=i[l],i[l-r]||delete this.styles[l])}}insertNewlineStyleObject(t,r,i,s){const l={},c=this._unwrappedTextLines[t].length,d=c===r;let m=!1;i||(i=1),this.shiftLineStyles(t,i);const y=this.styles[t]?this.styles[t][r===0?r:r-1]:void 0;for(const _ in this.styles[t]){const T=parseInt(_,10);T>=r&&(m=!0,l[T-r]=this.styles[t][_],d&&r===0||delete this.styles[t][_])}let b=!1;for(m&&!d&&(this.styles[t+i]=l,b=!0),(b||c>r)&&i--;i>0;)s&&s[i-1]?this.styles[t+i]={0:Y({},s[i-1])}:y?this.styles[t+i]={0:Y({},y)}:delete this.styles[t+i],i--;this._forceClearCache=!0}insertCharStyleObject(t,r,i,s){this.styles||(this.styles={});const l=this.styles[t],c=l?Y({},l):{};i||(i=1);for(const m in c){const y=parseInt(m,10);y>=r&&(l[y+i]=c[y],c[y-i]||delete l[y])}if(this._forceClearCache=!0,s){for(;i--;)Object.keys(s[i]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][r+i]=Y({},s[i]));return}if(!l)return;const d=l[r?r-1:1];for(;d&&i--;)this.styles[t][r+i]=Y({},d)}insertNewStyleBlock(t,r,i){const s=this.get2DCursorLocation(r,!0),l=[0];let c,d=0;for(let m=0;m<t.length;m++)t[m]===`
`?(d++,l[d]=0):l[d]++;for(l[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,l[0],i),i=i&&i.slice(l[0]+1)),d&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+l[0],d),c=1;c<d;c++)l[c]>0?this.insertCharStyleObject(s.lineIndex+c,0,l[c],i):i&&this.styles[s.lineIndex+c]&&i[0]&&(this.styles[s.lineIndex+c][0]=i[0]),i=i&&i.slice(l[c]+1);l[c]>0&&this.insertCharStyleObject(s.lineIndex+c,0,l[c],i)}removeChars(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t+1;this.removeStyleFromTo(t,r),this._text.splice(t,r-t),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(t,r,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:i;s>i&&this.removeStyleFromTo(i,s);const l=this.graphemeSplit(t);this.insertNewStyleBlock(l,i,r),this._text=[...this._text.slice(0,i),...l,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(t,r,i){i<=t?(r===t?this._selectionDirection=ye:this._selectionDirection===Ge&&(this._selectionDirection=ye,this.selectionEnd=t),this.selectionStart=i):i>t&&i<r?this._selectionDirection===Ge?this.selectionEnd=i:this.selectionStart=i:(r===t?this._selectionDirection=Ge:this._selectionDirection===ye&&(this._selectionDirection=Ge,this.selectionStart=r),this.selectionEnd=i)}}class iS extends rS{initHiddenTextarea(){const t=this.canvas&&Ar(this.canvas.getElement())||Ao(),r=t.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off",name:"fabricTextarea"}).map((c=>{let[d,m]=c;return r.setAttribute(d,m)}));const{top:i,left:s,fontSize:l}=this._calcTextareaPosition();r.style.cssText="position: absolute; top: ".concat(i,"; left: ").concat(s,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(l,";"),(this.hiddenTextareaContainer||t.body).appendChild(r),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map((c=>{let[d,m]=c;return r.addEventListener(d,this[m].bind(this))})),this.hiddenTextarea=r}blur(){this.abortCursorAnimation()}onKeyDown(t){if(!this.isEditing)return;const r=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(t.keyCode in r)this[r[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(t){const r=this.fromPaste,{value:i,selectionStart:s,selectionEnd:l}=this.hiddenTextarea;if(this.fromPaste=!1,t&&t.stopPropagation(),!this.isEditing)return;const c=()=>{this.updateFromTextArea(),this.fire(th),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void c();const d=this._splitTextIntoLines(i).graphemeText,m=this._text.length,y=d.length,b=this.selectionStart,_=this.selectionEnd,T=b!==_;let D,M,B,$,nt=y-m;const ht=this.fromStringToGraphemeSelection(s,l,i),bt=b>ht.selectionStart;T?(M=this._text.slice(b,_),nt+=_-b):y<m&&(M=bt?this._text.slice(_+nt,_):this._text.slice(b,b-nt));const pt=d.slice(ht.selectionEnd-nt,ht.selectionEnd);if(M&&M.length&&(pt.length&&(D=this.getSelectionStyles(b,b+1,!1),D=pt.map((()=>D[0]))),T?(B=b,$=_):bt?(B=_-M.length,$=_):(B=_,$=_+M.length),this.removeStyleFromTo(B,$)),pt.length){const{copyPasteData:at}=$r();r&&pt.join("")===at.copiedText&&!ue.disableStyleCopyPaste&&(D=at.copiedTextStyle),this.insertNewStyleBlock(pt,b,D)}c()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(t){let{target:r}=t;const{selectionStart:i,selectionEnd:s}=r;this.compositionStart=i,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:t}=$r();t.copiedText=this.getSelectedText(),ue.disableStyleCopyPaste?t.copiedTextStyle=void 0:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(t,r){let i,s=this._getLineLeftOffset(t);return r>0&&(i=this.__charBounds[t][r-1],s+=i.left+i.width),s}getDownCursorOffset(t,r){const i=this._getSelectionForOffset(t,r),s=this.get2DCursorLocation(i),l=s.lineIndex;if(l===this._textLines.length-1||t.metaKey||t.keyCode===34)return this._text.length-i;const c=s.charIndex,d=this._getWidthBeforeCursor(l,c),m=this._getIndexOnLine(l+1,d);return this._textLines[l].slice(c).length+m+1+this.missingNewlineOffset(l)}_getSelectionForOffset(t,r){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&r?this.selectionEnd:this.selectionStart}getUpCursorOffset(t,r){const i=this._getSelectionForOffset(t,r),s=this.get2DCursorLocation(i),l=s.lineIndex;if(l===0||t.metaKey||t.keyCode===33)return-i;const c=s.charIndex,d=this._getWidthBeforeCursor(l,c),m=this._getIndexOnLine(l-1,d),y=this._textLines[l].slice(0,c),b=this.missingNewlineOffset(l-1);return-this._textLines[l-1].length+m-y.length+(1-b)}_getIndexOnLine(t,r){const i=this._textLines[t];let s,l,c=this._getLineLeftOffset(t),d=0;for(let m=0,y=i.length;m<y;m++)if(s=this.__charBounds[t][m].width,c+=s,c>r){l=!0;const b=c-s,_=c,T=Math.abs(b-r);d=Math.abs(_-r)<T?m:m-1;break}return l||(d=i.length-1),d}moveCursorDown(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)}moveCursorUp(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",t)}_moveCursorUpOrDown(t,r){const i=this["get".concat(t,"CursorOffset")](r,this._selectionDirection===Ge);if(r.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),i!==0){const s=this.text.length;this.selectionStart=jo(0,this.selectionStart,s),this.selectionEnd=jo(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(t){const r=this._selectionDirection===ye?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,r),t!==0}moveCursorWithoutShift(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),t!==0}moveCursorLeft(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",t)}_move(t,r,i){let s;if(t.altKey)s=this["findWordBoundary".concat(i)](this[r]);else{if(!t.metaKey&&t.keyCode!==35&&t.keyCode!==36)return this[r]+=i==="Left"?-1:1,!0;s=this["findLineBoundary".concat(i)](this[r])}return s!==void 0&&this[r]!==s&&(this[r]=s,!0)}_moveLeft(t,r){return this._move(t,r,"Left")}_moveRight(t,r){return this._move(t,r,"Right")}moveCursorLeftWithoutShift(t){let r=!0;return this._selectionDirection=ye,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(r=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,r}moveCursorLeftWithShift(t){return this._selectionDirection===Ge&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=ye,this._moveLeft(t,"selectionStart")):void 0}moveCursorRight(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)}_moveCursorLeftOrRight(t,r){const i="moveCursor".concat(t).concat(r.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[i](r)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(t){return this._selectionDirection===ye&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Ge,this._moveRight(t,"selectionEnd")):void 0}moveCursorRightWithoutShift(t){let r=!0;return this._selectionDirection=Ge,this.selectionStart===this.selectionEnd?(r=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,r}}const xy=f=>!!f.button;class aS extends iS{constructor(){super(...arguments),H(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new nS(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(t){return this.draggableTextDelegate.onDragStart(t)}canDrop(t){return this.draggableTextDelegate.canDrop(t)}doubleClickHandler(t){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}tripleClickHandler(t){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}_mouseDownHandler(t){let{e:r,alreadySelected:i}=t;this.canvas&&this.editable&&!xy(r)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(r)||(this.canvas.textEditingManager.register(this),i&&(this.inCompositionMode=!1,this.setCursorByClick(r)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=i||this.isEditing)))}mouseUpHandler(t){let{e:r,transform:i}=t;const s=this.draggableTextDelegate.end(r);if(this.canvas){this.canvas.textEditingManager.unregister(this);const l=this.canvas._activeObject;if(l&&l!==this)return}!this.editable||this.group&&!this.group.interactive||i&&i.actionPerformed||xy(r)||s||this.selected&&!this.getActiveControl()&&(this.enterEditing(r),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(t){const r=this.getSelectionStartFromPointer(t),i=this.selectionStart,s=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(i,s,r):(this.selectionStart=r,this.selectionEnd=r),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(t){const r=this.canvas.getScenePoint(t).transform(kr(this.calcTransformMatrix())).add(new et(-this._getLeftOffset(),-this._getTopOffset()));let i=0,s=0,l=0;for(let y=0;y<this._textLines.length&&i<=r.y;y++)i+=this.getHeightOfLine(y),l=y,y>0&&(s+=this._textLines[y-1].length+this.missingNewlineOffset(y-1));let c=Math.abs(this._getLineLeftOffset(l));const d=this._textLines[l].length,m=this.__charBounds[l];for(let y=0;y<d;y++){const b=c+m[y].kernedWidth;if(r.x<=b){Math.abs(r.x-b)<=Math.abs(r.x-c)&&s++;break}c=b,s++}return Math.min(this.flipX?d-s:s,this._text.length)}}const Tu="moveCursorUp",Ou="moveCursorDown",Du="moveCursorLeft",Eu="moveCursorRight",Mu="exitEditing",_y=(f,t)=>{const r=t.getRetinaScaling();f.setTransform(r,0,0,r,0,0);const i=t.viewportTransform;f.transform(i[0],i[1],i[2],i[3],i[4],i[5])},sS=Y({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Mu,27:Mu,33:Tu,34:Ou,35:Eu,36:Du,37:Du,38:Tu,39:Eu,40:Ou},keysMapRtl:{9:Mu,27:Mu,33:Tu,34:Ou,35:Du,36:Eu,37:Eu,38:Tu,39:Du,40:Ou},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Fi extends aS{static getDefaults(){return Y(Y({},super.getDefaults()),Fi.ownDefaults)}get type(){const t=super.type;return t==="itext"?"i-text":t}constructor(t,r){super(t,Y(Y({},Fi.ownDefaults),r)),this.initBehavior()}_set(t,r){return this.isEditing&&this._savedProps&&t in this._savedProps?(this._savedProps[t]=r,this):(t==="canvas"&&(this.canvas instanceof Id&&this.canvas.textEditingManager.remove(this),r instanceof Id&&r.textEditingManager.add(this)),super._set(t,r))}setSelectionStart(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)}setSelectionEnd(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)}_updateAndFire(t,r){this[t]!==r&&(this._fireSelectionChanged(),this[t]=r),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,i=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(t,r,i)}setSelectionStyles(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(t,r,i)}get2DCursorLocation(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,r=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(t,r)}render(t){super.render(t),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(t){const r=this.isEditing;this.isEditing=!1;const i=super.toCanvasElement(t);return this.isEditing=r,i}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const t=this.clearContextTop(!0);if(!t)return;const r=this._getCursorBoundaries(),i=this.findAncestorsWithClipPath(),s=i.length>0;let l,c=t;if(s){l=br(t.canvas),c=l.getContext("2d"),_y(c,this.canvas);const d=this.calcTransformMatrix();c.transform(d[0],d[1],d[2],d[3],d[4],d[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(c,r):this.renderCursor(c,r),s)for(const d of i){const m=d.clipPath,y=br(t.canvas),b=y.getContext("2d");if(_y(b,this.canvas),!m.absolutePositioned){const _=d.calcTransformMatrix();b.transform(_[0],_[1],_[2],_[3],_[4],_[5])}m.transform(b),m.drawObject(b,!0,{}),this.drawClipPathOnCache(c,m,y)}s&&(t.setTransform(1,0,0,1,0,0),t.drawImage(l,0,0)),this.canvas.contextTopDirty=!0,t.restore()}findAncestorsWithClipPath(){const t=[];let r=this;for(;r;)r.clipPath&&t.push(r),r=r.parent;return t}_getCursorBoundaries(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,r=arguments.length>1?arguments[1]:void 0;const i=this._getLeftOffset(),s=this._getTopOffset(),l=this._getCursorBoundariesOffsets(t,r);return{left:i,top:s,leftOffset:l.left,topOffset:l.top}}_getCursorBoundariesOffsets(t,r){return r?this.__getCursorBoundariesOffsets(t):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(t)}__getCursorBoundariesOffsets(t){let r=0,i=0;const{charIndex:s,lineIndex:l}=this.get2DCursorLocation(t);for(let y=0;y<l;y++)r+=this.getHeightOfLine(y);const c=this._getLineLeftOffset(l),d=this.__charBounds[l][s];d&&(i=d.left),this.charSpacing!==0&&s===this._textLines[l].length&&(i-=this._getWidthOfCharSpacing());const m={top:r,left:c+(i>0?i:0)};return this.direction==="rtl"&&(this.textAlign===Ge||this.textAlign===Ir||this.textAlign===Kl?m.left*=-1:this.textAlign===ye||this.textAlign===oh?m.left=c-(i>0?i:0):this.textAlign!==ne&&this.textAlign!==Wl||(m.left=c-(i>0?i:0))),m}renderCursorAt(t){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(t,!0),t)}renderCursor(t,r){this._renderCursor(t,r,this.selectionStart)}getCursorRenderingData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(t);const i=this.get2DCursorLocation(t),s=i.lineIndex,l=i.charIndex>0?i.charIndex-1:0,c=this.getValueOfPropertyAt(s,l,"fontSize"),d=this.getObjectScaling().x*this.canvas.getZoom(),m=this.cursorWidth/d,y=this.getValueOfPropertyAt(s,l,"deltaY"),b=r.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-c*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(s,l,"fill"),opacity:this._currentCursorOpacity,left:r.left+r.leftOffset-m/2,top:b+r.top+y,width:m,height:c}}_renderCursor(t,r,i){const{color:s,opacity:l,left:c,top:d,width:m,height:y}=this.getCursorRenderingData(i,r);t.fillStyle=s,t.globalAlpha=l,t.fillRect(c,d,m,y)}renderSelection(t,r){const i={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(t,i,r)}renderDragSourceEffect(){const t=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,t,this._getCursorBoundaries(t.selectionStart,!0))}renderDropTargetEffect(t){const r=this.getSelectionStartFromPointer(t);this.renderCursorAt(r)}_renderSelection(t,r,i){const s=r.selectionStart,l=r.selectionEnd,c=this.textAlign.includes(Ir),d=this.get2DCursorLocation(s),m=this.get2DCursorLocation(l),y=d.lineIndex,b=m.lineIndex,_=d.charIndex<0?0:d.charIndex,T=m.charIndex<0?0:m.charIndex;for(let D=y;D<=b;D++){const M=this._getLineLeftOffset(D)||0;let B=this.getHeightOfLine(D),$=0,nt=0,ht=0;if(D===y&&(nt=this.__charBounds[y][_].left),D>=y&&D<b)ht=c&&!this.isEndOfWrapping(D)?this.width:this.getLineWidth(D)||5;else if(D===b)if(T===0)ht=this.__charBounds[b][T].left;else{const dt=this._getWidthOfCharSpacing();ht=this.__charBounds[b][T-1].left+this.__charBounds[b][T-1].width-dt}$=B,(this.lineHeight<1||D===b&&this.lineHeight>1)&&(B/=this.lineHeight);let bt=i.left+M+nt,pt=B,at=0;const ft=ht-nt;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",pt=1,at=B):t.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Ge||this.textAlign===Ir||this.textAlign===Kl?bt=this.width-bt-ft:this.textAlign===ye||this.textAlign===oh?bt=i.left+M-ht:this.textAlign!==ne&&this.textAlign!==Wl||(bt=i.left+M-ht)),t.fillRect(bt,i.top+i.topOffset+at,ft,pt),i.topOffset+=$}}getCurrentCharFontSize(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")}getCurrentCharColor(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,nn)}_getCurrentCharIndex(){const t=this.get2DCursorLocation(this.selectionStart,!0),r=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:r}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}H(Fi,"ownDefaults",sS),H(Fi,"type","IText"),At.setClass(Fi),At.setClass(Fi,"i-text");class _s extends Fi{static getDefaults(){return Y(Y({},super.getDefaults()),_s.ownDefaults)}constructor(t,r){super(t,Y(Y({},_s.ownDefaults),r))}static createControls(){return{controls:Fx()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Ir)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(t){let r=0,i=0,s=0;const l={};for(let c=0;c<t.graphemeLines.length;c++)t.graphemeText[s]===`
`&&c>0?(i=0,s++,r++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[s])&&c>0&&(i++,s++),l[c]={line:r,offset:i},s+=t.graphemeLines[c].length,i+=t.graphemeLines[c].length;return l}styleHas(t,r){if(this._styleMap&&!this.isWrapping){const i=this._styleMap[r];i&&(r=i.line)}return super.styleHas(t,r)}isEmptyStyles(t){if(!this.styles)return!0;let r,i=0,s=t+1,l=!1;const c=this._styleMap[t],d=this._styleMap[t+1];c&&(t=c.line,i=c.offset),d&&(s=d.line,l=s===t,r=d.offset);const m=t===void 0?this.styles:{line:this.styles[t]};for(const y in m)for(const b in m[y]){const _=parseInt(b,10);if(_>=i&&(!l||_<r))for(const T in m[y][b])return!1}return!0}_getStyleDeclaration(t,r){if(this._styleMap&&!this.isWrapping){const i=this._styleMap[t];if(!i)return{};t=i.line,r=i.offset+r}return super._getStyleDeclaration(t,r)}_setStyleDeclaration(t,r,i){const s=this._styleMap[t];super._setStyleDeclaration(s.line,s.offset+r,i)}_deleteStyleDeclaration(t,r){const i=this._styleMap[t];super._deleteStyleDeclaration(i.line,i.offset+r)}_getLineStyle(t){const r=this._styleMap[t];return!!this.styles[r.line]}_setLineStyle(t){const r=this._styleMap[t];super._setLineStyle(r.line)}_wrapText(t,r){this.isWrapping=!0;const i=this.getGraphemeDataForRender(t),s=[];for(let l=0;l<i.wordsData.length;l++)s.push(...this._wrapLine(l,r,i));return this.isWrapping=!1,s}getGraphemeDataForRender(t){const r=this.splitByGrapheme,i=r?"":" ";let s=0;return{wordsData:t.map(((l,c)=>{let d=0;const m=r?this.graphemeSplit(l):this.wordSplit(l);return m.length===0?[{word:[],width:0}]:m.map((y=>{const b=r?[y]:this.graphemeSplit(y),_=this._measureWord(b,c,d);return s=Math.max(_,s),d+=b.length+i.length,{word:b,width:_}}))})),largestWordWidth:s}}_measureWord(t,r){let i,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=0;for(let c=0,d=t.length;c<d;c++)l+=this._getGraphemeBox(t[c],r,c+s,i,!0).kernedWidth,i=t[c];return l}wordSplit(t){return t.split(this._wordJoiners)}_wrapLine(t,r,i){let{largestWordWidth:s,wordsData:l}=i,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const d=this._getWidthOfCharSpacing(),m=this.splitByGrapheme,y=[],b=m?"":" ";let _=0,T=[],D=0,M=0,B=!0;r-=c;const $=Math.max(r,s,this.dynamicMinWidth),nt=l[t];let ht;for(D=0,ht=0;ht<nt.length;ht++){const{word:bt,width:pt}=nt[ht];D+=bt.length,_+=M+pt-d,_>$&&!B?(y.push(T),T=[],_=pt,B=!0):_+=d,B||m||T.push(b),T=T.concat(bt),M=m?0:this._measureWord([b],t,D),D++,B=!1}return ht&&y.push(T),s+c>this.dynamicMinWidth&&(this.dynamicMinWidth=s-d+c),y}isEndOfWrapping(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line}missingNewlineOffset(t,r){return this.splitByGrapheme&&!r?this.isEndOfWrapping(t)?1:0:1}_splitTextIntoLines(t){const r=super._splitTextIntoLines(t),i=this._wrapText(r.lines,this.width),s=new Array(i.length);for(let l=0;l<i.length;l++)s[l]=i[l].join("");return r.lines=s,r.graphemeLines=i,r}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const t=new Map;for(const r in this._styleMap){const i=parseInt(r,10);if(this._textLines[i]){const s=this._styleMap[r].line;t.set("".concat(s),!0)}}for(const r in this.styles)t.has(r)||delete this.styles[r]}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...t])}}H(_s,"type","Textbox"),H(_s,"textLayoutProperties",[...Fi.textLayoutProperties,"width"]),H(_s,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),At.setClass(_s);class Sy extends bh{shouldPerformLayout(t){return!!t.target.clipPath&&super.shouldPerformLayout(t)}shouldLayoutClipPath(){return!1}calcLayoutResult(t,r){const{target:i}=t,{clipPath:s,group:l}=i;if(!s||!this.shouldPerformLayout(t))return;const{width:c,height:d}=Ui(fv(i,s)),m=new et(c,d);if(s.absolutePositioned)return{center:Do(s.getRelativeCenterPoint(),void 0,l?l.calcTransformMatrix():void 0),size:m};{const y=s.getRelativeCenterPoint().transform(i.calcOwnMatrix(),!0);if(this.shouldPerformLayout(t)){const{center:b=new et,correction:_=new et}=this.calcBoundingBox(r,t)||{};return{center:b.add(y),correction:_.subtract(y),size:m}}return{center:i.getRelativeCenterPoint().add(y),size:m}}}}H(Sy,"type","clip-path"),At.setClass(Sy);class Cy extends bh{getInitialSize(t,r){let{target:i}=t,{size:s}=r;return new et(i.width||s.x,i.height||s.y)}}H(Cy,"type","fixed"),At.setClass(Cy);class oS extends ec{subscribeTargets(t){const r=t.target;t.targets.reduce(((i,s)=>(s.parent&&i.add(s.parent),i)),new Set).forEach((i=>{i.layoutManager.subscribeTargets({target:i,targets:[r]})}))}unsubscribeTargets(t){const r=t.target,i=r.getObjects();t.targets.reduce(((s,l)=>(l.parent&&s.add(l.parent),s)),new Set).forEach((s=>{!i.some((l=>l.parent===s))&&s.layoutManager.unsubscribeTargets({target:s,targets:[r]})}))}}class Ss extends Cs{static getDefaults(){return Y(Y({},super.getDefaults()),Ss.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Ss.ownDefaults),this.setOptions(r);const{left:i,top:s,layoutManager:l}=r;this.groupInit(t,{left:i,top:s,layoutManager:l??new oS})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];this.multiSelectionStacking==="selection-order"?this.add(...r):r.forEach((s=>{const l=this._objects.findIndex((d=>d.isInFrontOf(s))),c=l===-1?this.size():l;this.insertAt(c,s)}))}canEnterGroup(t){return this.getObjects().some((r=>r.isDescendantOf(t)||t.isDescendantOf(r)))?(ka("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(t)}enterGroup(t,r){t.parent&&t.parent===t.group?t.parent._exitGroup(t):t.group&&t.parent!==t.group&&t.group.remove(t),this._enterGroup(t,r)}exitGroup(t,r){this._exitGroup(t,r),t.parent&&t.parent._enterGroup(t,!0)}_onAfterObjectsChange(t,r){super._onAfterObjectsChange(t,r);const i=new Set;r.forEach((s=>{const{parent:l}=s;l&&i.add(l)})),t===vg?i.forEach((s=>{s._onAfterObjectsChange(lh,r)})):i.forEach((s=>{s._set("dirty",!0)}))}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(t,r,i){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s=Y(Y({hasControls:!1},i),{},{forActiveSelection:!0});for(let l=0;l<this._objects.length;l++)this._objects[l]._renderControls(t,s);super._renderControls(t,r),t.restore()}}H(Ss,"type","ActiveSelection"),H(Ss,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),At.setClass(Ss),At.setClass(Ss,"activeSelection");class lS{constructor(){H(this,"resources",{})}applyFilters(t,r,i,s,l){const c=l.getContext("2d");if(!c)return;c.drawImage(r,0,0,i,s);const d={sourceWidth:i,sourceHeight:s,imageData:c.getImageData(0,0,i,s),originalEl:r,originalImageData:c.getImageData(0,0,i,s),canvasEl:l,ctx:c,filterBackend:this};t.forEach((y=>{y.applyTo(d)}));const{imageData:m}=d;return m.width===i&&m.height===s||(l.width=m.width,l.height=m.height),c.putImageData(m,0,0),d}}class Ev{constructor(){let{tileSize:t=ue.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};H(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),H(this,"resources",{}),this.tileSize=t,this.setupGLContext(t,t),this.captureGPUInfo()}setupGLContext(t,r){this.dispose(),this.createWebGLCanvas(t,r)}createWebGLCanvas(t,r){const i=br({width:t,height:r}),s=i.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=i,this.gl=s)}applyFilters(t,r,i,s,l,c){const d=this.gl,m=l.getContext("2d");if(!d||!m)return;let y;c&&(y=this.getCachedTexture(c,r));const b={originalWidth:r.width||r.naturalWidth||0,originalHeight:r.height||r.naturalHeight||0,sourceWidth:i,sourceHeight:s,destinationWidth:i,destinationHeight:s,context:d,sourceTexture:this.createTexture(d,i,s,y?void 0:r),targetTexture:this.createTexture(d,i,s),originalTexture:y||this.createTexture(d,i,s,y?void 0:r),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:l},_=d.createFramebuffer();return d.bindFramebuffer(d.FRAMEBUFFER,_),t.forEach((T=>{T&&T.applyTo(b)})),(function(T){const D=T.targetCanvas,M=D.width,B=D.height,$=T.destinationWidth,nt=T.destinationHeight;M===$&&B===nt||(D.width=$,D.height=nt)})(b),this.copyGLTo2D(d,b),d.bindTexture(d.TEXTURE_2D,null),d.deleteTexture(b.sourceTexture),d.deleteTexture(b.targetTexture),d.deleteFramebuffer(_),m.setTransform(1,0,0,1,0,0),b}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(t,r,i,s,l){const{NEAREST:c,TEXTURE_2D:d,RGBA:m,UNSIGNED_BYTE:y,CLAMP_TO_EDGE:b,TEXTURE_MAG_FILTER:_,TEXTURE_MIN_FILTER:T,TEXTURE_WRAP_S:D,TEXTURE_WRAP_T:M}=t,B=t.createTexture();return t.bindTexture(d,B),t.texParameteri(d,_,l||c),t.texParameteri(d,T,l||c),t.texParameteri(d,D,b),t.texParameteri(d,M,b),s?t.texImage2D(d,0,m,m,y,s):t.texImage2D(d,0,m,r,i,0,m,y,null),B}getCachedTexture(t,r,i){const{textureCache:s}=this;if(s[t])return s[t];{const l=this.createTexture(this.gl,r.width,r.height,r,i);return l&&(s[t]=l),l}}evictCachesForKey(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])}copyGLTo2D(t,r){const i=t.canvas,s=r.targetCanvas,l=s.getContext("2d");if(!l)return;l.translate(0,s.height),l.scale(1,-1);const c=i.height-s.height;l.drawImage(i,0,c,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(t,r){const i=r.targetCanvas.getContext("2d"),s=r.destinationWidth,l=r.destinationHeight,c=s*l*4;if(!i)return;const d=new Uint8Array(this.imageBuffer,0,c),m=new Uint8ClampedArray(this.imageBuffer,0,c);t.readPixels(0,0,s,l,t.RGBA,t.UNSIGNED_BYTE,d);const y=new ImageData(m,s,l);i.putImageData(y,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const t=this.gl,r={renderer:"",vendor:""};if(!t)return r;const i=t.getExtension("WEBGL_debug_renderer_info");if(i){const s=t.getParameter(i.UNMASKED_RENDERER_WEBGL),l=t.getParameter(i.UNMASKED_VENDOR_WEBGL);s&&(r.renderer=s.toLowerCase()),l&&(r.vendor=l.toLowerCase())}return this.gpuInfo=r,r}}let Ld;function cS(){const{WebGLProbe:f}=$r();return f.queryWebGL(Vi()),ue.enableGLFiltering&&f.isSupported(ue.textureSize)?new Ev({tileSize:ue.textureSize}):new lS}function Nd(){return!Ld&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Ld=cS()),Ld}const uS=["filters","resizeFilter","src","crossOrigin","type"],Mv=["cropX","cropY"];class mr extends On{static getDefaults(){return Y(Y({},super.getDefaults()),mr.ownDefaults)}constructor(t,r){super(),H(this,"_lastScaleX",1),H(this,"_lastScaleY",1),H(this,"_filterScalingX",1),H(this,"_filterScalingY",1),this.filters=[],Object.assign(this,mr.ownDefaults),this.setOptions(r),this.cacheKey="texture".concat(za()),this.setElement(typeof t=="string"?(this.canvas&&Ar(this.canvas.getElement())||Ao()).getElementById(t):t,r)}getElement(){return this._element}setElement(t){var r;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=t,this._originalElement=t,this._setWidthHeight(i),(r=t.classList)===null||r===void 0||r.add(mr.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(t){const r=Nd(!1);r instanceof Ev&&r.evictCachesForKey(t)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((t=>{const r=this[t];r&&$r().dispose(r),this[t]=void 0}))}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const t=this.getElement();return t?{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}:{width:0,height:0}}_stroke(t){if(!this.stroke||this.strokeWidth===0)return;const r=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-r,-i),t.lineTo(r,-i),t.lineTo(r,i),t.lineTo(-r,i),t.lineTo(-r,-i),t.closePath()}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=[];return this.filters.forEach((i=>{i&&r.push(i.toObject())})),Y(Y({},super.toObject([...Mv,...t])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:r},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const t=[],r=this._element,i=-this.width/2,s=-this.height/2;let l=[],c=[],d="",m="";if(!r)return[];if(this.hasCrop()){const y=za();l.push('<clipPath id="imageCrop_'+y+`">
`,'	<rect x="'+i+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),d=' clip-path="url(#imageCrop_'+y+')" '}if(this.imageSmoothing||(m=' image-rendering="optimizeSpeed"'),t.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(i-this.cropX,'" y="').concat(s-this.cropY,'" width="').concat(r.width||r.naturalWidth,'" height="').concat(r.height||r.naturalHeight,'"').concat(m).concat(d,`></image>
`)),this.stroke||this.strokeDashArray){const y=this.fill;this.fill=null,c=['	<rect x="'.concat(i,'" y="').concat(s,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=y}return l=this.paintFirst!==nn?l.concat(c,t):l.concat(t,c),l}getSrc(t){const r=t?this._element:this._originalElement;return r?r.toDataURL?r.toDataURL():this.srcFromAttribute?r.getAttribute("src")||"":r.src:this.src||""}getSvgSrc(t){return this.getSrc(t)}setSrc(t){let{crossOrigin:r,signal:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Qu(t,{crossOrigin:r,signal:i}).then((s=>{r!==void 0&&this.set({crossOrigin:r}),this.setElement(s)}))}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const t=this.resizeFilter,r=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),s=i.x,l=i.y,c=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||s>r&&l>r)return this._element=c,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=l);const d=br(c),{width:m,height:y}=c;this._element=d,this._lastScaleX=t.scaleX=s,this._lastScaleY=t.scaleY=l,Nd().applyFilters([t],c,m,y,this._element),this._filterScalingX=d.width/this._originalElement.width,this._filterScalingY=d.height/this._originalElement.height}applyFilters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(t=t.filter((l=>l&&!l.isNeutralState())),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),t.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const r=this._originalElement,i=r.naturalWidth||r.width,s=r.naturalHeight||r.height;if(this._element===this._originalElement){const l=br({width:i,height:s});this._element=l,this._filteredEl=l}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,s),this._lastScaleX=1,this._lastScaleY=1);Nd().applyFilters(t,this._originalElement,i,s,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(t){t.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)}drawCacheOnCanvas(t){t.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(t)}shouldCache(){return this.needsItsOwnCache()}_renderFill(t){const r=this._element;if(!r)return;const i=this._filterScalingX,s=this._filterScalingY,l=this.width,c=this.height,d=Math.max(this.cropX,0),m=Math.max(this.cropY,0),y=r.naturalWidth||r.width,b=r.naturalHeight||r.height,_=d*i,T=m*s,D=Math.min(l*i,y-_),M=Math.min(c*s,b-T),B=-l/2,$=-c/2,nt=Math.min(l,y/i-d),ht=Math.min(c,b/s-m);r&&t.drawImage(r,_,T,D,M,B,$,nt,ht)}_needsResize(){const t=this.getTotalObjectScaling();return t.x!==this._lastScaleX||t.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:t,height:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i=this.getOriginalSize();this.width=t||i.width,this.height=r||i.height}parsePreserveAspectRatioAttribute(){const t=nx(this.preserveAspectRatio||""),r=this.width,i=this.height,s={width:r,height:i};let l,c=this._element.width,d=this._element.height,m=1,y=1,b=0,_=0,T=0,D=0;return!t||t.alignX===Gn&&t.alignY===Gn?(m=r/c,y=i/d):(t.meetOrSlice==="meet"&&(m=y=v_(this._element,s),l=(r-c*m)/2,t.alignX==="Min"&&(b=-l),t.alignX==="Max"&&(b=l),l=(i-d*y)/2,t.alignY==="Min"&&(_=-l),t.alignY==="Max"&&(_=l)),t.meetOrSlice==="slice"&&(m=y=b_(this._element,s),l=c-r/m,t.alignX==="Mid"&&(T=l/2),t.alignX==="Max"&&(T=l),l=d-i/y,t.alignY==="Mid"&&(D=l/2),t.alignY==="Max"&&(D=l),c=r/m,d=i/y)),{width:c,height:d,scaleX:m,scaleY:y,offsetLeft:b,offsetTop:_,cropX:T,cropY:D}}static fromObject(t,r){let{filters:i,resizeFilter:s,src:l,crossOrigin:c,type:d}=t,m=ze(t,uS);return Promise.all([Qu(l,Y(Y({},r),{},{crossOrigin:c})),i&&Il(i,r),s&&Il([s],r),ph(m,r)]).then((y=>{let[b,_=[],[T]=[],D={}]=y;return new this(b,Y(Y({},m),{},{src:l,filters:_,resizeFilter:T},D))}))}static fromURL(t){let{crossOrigin:r=null,signal:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return Qu(t,{crossOrigin:r,signal:i}).then((l=>new this(l,s)))}static async fromElement(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const s=Pi(t,this.ATTRIBUTE_NAMES,i);return this.fromURL(s["xlink:href"]||s.href,r,s).catch((l=>(ka("log","Unable to parse Image",l),null)))}}H(mr,"type","Image"),H(mr,"cacheProperties",[...qi,...Mv]),H(mr,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),H(mr,"CSS_CANVAS","canvas-img"),H(mr,"ATTRIBUTE_NAMES",[...Ra,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),At.setClass(mr),At.setSVGClass(mr);yh(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const _h=f=>f.webgl!==void 0,bg="precision highp float",hS=`
    `.concat(bg,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),fS=["type"],dS=["type"],gS=new RegExp(bg,"g");class rn{get type(){return this.constructor.type}constructor(){let t=ze(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fS);Object.assign(this,this.constructor.defaults,t)}getFragmentSource(){return hS}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=$r();s!=="highp"&&(r=r.replace(gS,bg.replace("highp",s)));const l=t.createShader(t.VERTEX_SHADER),c=t.createShader(t.FRAGMENT_SHADER),d=t.createProgram();if(!l||!c||!d)throw new Jr("Vertex, fragment shader or program creation error");if(t.shaderSource(l,i),t.compileShader(l),!t.getShaderParameter(l,t.COMPILE_STATUS))throw new Jr("Vertex shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(l)));if(t.shaderSource(c,r),t.compileShader(c),!t.getShaderParameter(c,t.COMPILE_STATUS))throw new Jr("Fragment shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(c)));if(t.attachShader(d,l),t.attachShader(d,c),t.linkProgram(d),!t.getProgramParameter(d,t.LINK_STATUS))throw new Jr('Shader link error for "'.concat(this.type,'" ').concat(t.getProgramInfoLog(d)));const m=this.getUniformLocations(t,d)||{};return m.uStepW=t.getUniformLocation(d,"uStepW"),m.uStepH=t.getUniformLocation(d,"uStepH"),{program:d,attributeLocations:this.getAttributeLocations(t,d),uniformLocations:m}}getAttributeLocations(t,r){return{aPosition:t.getAttribLocation(r,"aPosition")}}getUniformLocations(t,r){const i=this.constructor.uniformLocations,s={};for(let l=0;l<i.length;l++)s[i[l]]=t.getUniformLocation(r,i[l]);return s}sendAttributeData(t,r,i){const s=r.aPosition,l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l),t.enableVertexAttribArray(s),t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW)}_setupFrameBuffer(t){const r=t.context;if(t.passes>1){const i=t.destinationWidth,s=t.destinationHeight;t.sourceWidth===i&&t.sourceHeight===s||(r.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(r,i,s)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t.targetTexture,0)}else r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish()}_swapTextures(t){t.passes--,t.pass++;const r=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=r}isNeutralState(t){return!1}applyTo(t){_h(t)?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){}getCacheKey(){return this.type}retrieveShader(t){const r=this.getCacheKey();return t.programCache[r]||(t.programCache[r]=this.createProgram(t.context)),t.programCache[r]}applyToWebGL(t){const r=t.context,i=this.retrieveShader(t);t.pass===0&&t.originalTexture?r.bindTexture(r.TEXTURE_2D,t.originalTexture):r.bindTexture(r.TEXTURE_2D,t.sourceTexture),r.useProgram(i.program),this.sendAttributeData(r,i.attributeLocations,t.aPosition),r.uniform1f(i.uniformLocations.uStepW,1/t.sourceWidth),r.uniform1f(i.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(r,i.uniformLocations),r.viewport(0,0,t.destinationWidth,t.destinationHeight),r.drawArrays(r.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(t,r,i){t.activeTexture(i),t.bindTexture(t.TEXTURE_2D,r),t.activeTexture(t.TEXTURE0)}unbindAdditionalTexture(t,r){t.activeTexture(r),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)}sendUniformData(t,r){}createHelpLayer(t){if(!t.helpLayer){const{sourceWidth:r,sourceHeight:i}=t,s=br({width:r,height:i});t.helpLayer=s}}toObject(){const t=Object.keys(this.constructor.defaults||{});return Y({type:this.type},t.reduce(((r,i)=>(r[i]=this[i],r)),{}))}toJSON(){return this.toObject()}static async fromObject(t,r){return new this(ze(t,dS))}}H(rn,"type","BaseFilter"),H(rn,"uniformLocations",[]);const pS={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class ju extends rn{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(pS[this.mode],`
        }
      }
      `)}applyTo2d(t){let{imageData:{data:r}}=t;const i=new xe(this.color).getSource(),s=this.alpha,l=i[0]*s,c=i[1]*s,d=i[2]*s,m=1-s;for(let y=0;y<r.length;y+=4){const b=r[y],_=r[y+1],T=r[y+2];let D,M,B;switch(this.mode){case"multiply":D=b*l/255,M=_*c/255,B=T*d/255;break;case"screen":D=255-(255-b)*(255-l)/255,M=255-(255-_)*(255-c)/255,B=255-(255-T)*(255-d)/255;break;case"add":D=b+l,M=_+c,B=T+d;break;case"difference":D=Math.abs(b-l),M=Math.abs(_-c),B=Math.abs(T-d);break;case"subtract":D=b-l,M=_-c,B=T-d;break;case"darken":D=Math.min(b,l),M=Math.min(_,c),B=Math.min(T,d);break;case"lighten":D=Math.max(b,l),M=Math.max(_,c),B=Math.max(T,d);break;case"overlay":D=l<128?2*b*l/255:255-2*(255-b)*(255-l)/255,M=c<128?2*_*c/255:255-2*(255-_)*(255-c)/255,B=d<128?2*T*d/255:255-2*(255-T)*(255-d)/255;break;case"exclusion":D=l+b-2*l*b/255,M=c+_-2*c*_/255,B=d+T-2*d*T/255;break;case"tint":D=l+b*m,M=c+_*m,B=d+T*m}r[y]=D,r[y+1]=M,r[y+2]=B}}sendUniformData(t,r){const i=new xe(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(r.uColor,i)}}H(ju,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),H(ju,"type","BlendColor"),H(ju,"uniformLocations",["uColor"]),At.setClass(ju);const mS={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},yS=["type","image"];class Au extends rn{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return mS[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(t){const r=t.context,i=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(r,i,r.TEXTURE1),super.applyToWebGL(t),this.unbindAdditionalTexture(r,r.TEXTURE1)}createTexture(t,r){return t.getCachedTexture(r.cacheKey,r.getElement())}calculateMatrix(){const t=this.image,{width:r,height:i}=t.getElement();return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/r,-t.top/i,1]}applyTo2d(t){let{imageData:{data:r,width:i,height:s},filterBackend:{resources:l}}=t;const c=this.image;l.blendImage||(l.blendImage=Vi());const d=l.blendImage,m=d.getContext("2d");d.width!==i||d.height!==s?(d.width=i,d.height=s):m.clearRect(0,0,i,s),m.setTransform(c.scaleX,0,0,c.scaleY,c.left,c.top),m.drawImage(c.getElement(),0,0,i,s);const y=m.getImageData(0,0,i,s).data;for(let b=0;b<r.length;b+=4){const _=r[b],T=r[b+1],D=r[b+2],M=r[b+3],B=y[b],$=y[b+1],nt=y[b+2],ht=y[b+3];switch(this.mode){case"multiply":r[b]=_*B/255,r[b+1]=T*$/255,r[b+2]=D*nt/255,r[b+3]=M*ht/255;break;case"mask":r[b+3]=ht}}}sendUniformData(t,r){const i=this.calculateMatrix();t.uniform1i(r.uImage,1),t.uniformMatrix3fv(r.uTransformMatrix,!1,i)}toObject(){return Y(Y({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(t,r){let{type:i,image:s}=t,l=ze(t,yS);return mr.fromObject(s,r).then((c=>new this(Y(Y({},l),{},{image:c}))))}}H(Au,"type","BlendImage"),H(Au,"defaults",{mode:"multiply",alpha:1}),H(Au,"uniformLocations",["uTransformMatrix","uImage"]),At.setClass(Au);class ku extends rn{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(t){_h(t)?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){let{imageData:{data:r,width:i,height:s}}=t;this.aspectRatio=i/s,this.horizontal=!0;let l=this.getBlurValue()*i;const c=new Uint8ClampedArray(r),d=15,m=4*i;for(let y=0;y<r.length;y+=4){let b=0,_=0,T=0,D=0,M=0;const B=y-y%m,$=B+m;for(let nt=-14;nt<d;nt++){const ht=nt/d,bt=4*Math.floor(l*ht),pt=1-Math.abs(ht);let at=y+bt;at<B?at=B:at>$&&(at=$);const ft=r[at+3]*pt;b+=r[at]*ft,_+=r[at+1]*ft,T+=r[at+2]*ft,D+=ft,M+=pt}c[y]=b/D,c[y+1]=_/D,c[y+2]=T/D,c[y+3]=D/M}this.horizontal=!1,l=this.getBlurValue()*s;for(let y=0;y<c.length;y+=4){let b=0,_=0,T=0,D=0,M=0;const B=y%m,$=c.length-m+B;for(let nt=-14;nt<d;nt++){const ht=nt/d,bt=Math.floor(l*ht)*m,pt=1-Math.abs(ht);let at=y+bt;at<B?at=B:at>$&&(at=$);const ft=c[at+3]*pt;b+=c[at]*ft,_+=c[at+1]*ft,T+=c[at+2]*ft,D+=ft,M+=pt}r[y]=b/D,r[y+1]=_/D,r[y+2]=T/D,r[y+3]=D/M}}sendUniformData(t,r){const i=this.chooseRightDelta();t.uniform2fv(r.uDelta,i)}isNeutralState(){return this.blur===0}getBlurValue(){let t=1;const{horizontal:r,aspectRatio:i}=this;return r?i>1&&(t=1/i):i<1&&(t=i),t*this.blur*.12}chooseRightDelta(){const t=this.getBlurValue();return this.horizontal?[t,0]:[0,t]}}H(ku,"type","Blur"),H(ku,"defaults",{blur:0}),H(ku,"uniformLocations",["uDelta"]),At.setClass(ku);class zu extends rn{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:r}}=t;const i=Math.round(255*this.brightness);for(let s=0;s<r.length;s+=4)r[s]+=i,r[s+1]+=i,r[s+2]+=i}isNeutralState(){return this.brightness===0}sendUniformData(t,r){t.uniform1f(r.uBrightness,this.brightness)}}H(zu,"type","Brightness"),H(zu,"defaults",{brightness:0}),H(zu,"uniformLocations",["uBrightness"]),At.setClass(zu);const jv={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Oo extends rn{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(t){const r=t.imageData.data,i=this.matrix,s=this.colorsOnly;for(let l=0;l<r.length;l+=4){const c=r[l],d=r[l+1],m=r[l+2];if(r[l]=c*i[0]+d*i[1]+m*i[2]+255*i[4],r[l+1]=c*i[5]+d*i[6]+m*i[7]+255*i[9],r[l+2]=c*i[10]+d*i[11]+m*i[12]+255*i[14],!s){const y=r[l+3];r[l]+=y*i[3],r[l+1]+=y*i[8],r[l+2]+=y*i[13],r[l+3]=c*i[15]+d*i[16]+m*i[17]+y*i[18]+255*i[19]}}}sendUniformData(t,r){const i=this.matrix,s=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],l=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(r.uColorMatrix,!1,s),t.uniform4fv(r.uConstants,l)}toObject(){return Y(Y({},super.toObject()),{},{matrix:[...this.matrix]})}}function Os(f,t){var r;const i=(H(r=class extends Oo{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",f),H(r,"defaults",{colorsOnly:!1,matrix:t}),r);return At.setClass(i,f),i}H(Oo,"type","ColorMatrix"),H(Oo,"defaults",jv),H(Oo,"uniformLocations",["uColorMatrix","uConstants"]),At.setClass(Oo);Os("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Os("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Os("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Os("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Os("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Os("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Os("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class wy extends rn{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.subFilters=t.subFilters||[]}applyTo(t){_h(t)&&(t.passes+=this.subFilters.length-1),this.subFilters.forEach((r=>{r.applyTo(t)}))}toObject(){return{type:this.type,subFilters:this.subFilters.map((t=>t.toObject()))}}isNeutralState(){return!this.subFilters.some((t=>!t.isNeutralState()))}static fromObject(t,r){return Promise.all((t.subFilters||[]).map((i=>At.getClass(i.type).fromObject(i,r)))).then((i=>new this({subFilters:i})))}}H(wy,"type","Composed"),At.setClass(wy);class Ru extends rn{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(t){let{imageData:{data:r}}=t;const i=Math.floor(255*this.contrast),s=259*(i+255)/(255*(259-i));for(let l=0;l<r.length;l+=4)r[l]=s*(r[l]-128)+128,r[l+1]=s*(r[l+1]-128)+128,r[l+2]=s*(r[l+2]-128)+128}sendUniformData(t,r){t.uniform1f(r.uContrast,this.contrast)}}H(Ru,"type","Contrast"),H(Ru,"defaults",{contrast:0}),H(Ru,"uniformLocations",["uContrast"]),At.setClass(Ru);const vS={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Bu extends rn{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return vS[this.getCacheKey()]}applyTo2d(t){const r=t.imageData,i=r.data,s=this.matrix,l=Math.round(Math.sqrt(s.length)),c=Math.floor(l/2),d=r.width,m=r.height,y=t.ctx.createImageData(d,m),b=y.data,_=this.opaque?1:0;let T,D,M,B,$,nt,ht,bt,pt,at,ft,dt,Ot;for(ft=0;ft<m;ft++)for(at=0;at<d;at++){for($=4*(ft*d+at),T=0,D=0,M=0,B=0,Ot=0;Ot<l;Ot++)for(dt=0;dt<l;dt++)ht=ft+Ot-c,nt=at+dt-c,ht<0||ht>=m||nt<0||nt>=d||(bt=4*(ht*d+nt),pt=s[Ot*l+dt],T+=i[bt]*pt,D+=i[bt+1]*pt,M+=i[bt+2]*pt,_||(B+=i[bt+3]*pt));b[$]=T,b[$+1]=D,b[$+2]=M,b[$+3]=_?i[$+3]:B}t.imageData=y}sendUniformData(t,r){t.uniform1fv(r.uMatrix,this.matrix)}toObject(){return Y(Y({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}H(Bu,"type","Convolute"),H(Bu,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),H(Bu,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),At.setClass(Bu);const Av="Gamma";class Lu extends rn{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.gamma=t.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(t){let{imageData:{data:r}}=t;const i=this.gamma,s=1/i[0],l=1/i[1],c=1/i[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const d=this.rgbValues;for(let m=0;m<256;m++)d.r[m]=255*Math.pow(m/255,s),d.g[m]=255*Math.pow(m/255,l),d.b[m]=255*Math.pow(m/255,c);for(let m=0;m<r.length;m+=4)r[m]=d.r[r[m]],r[m+1]=d.g[r[m+1]],r[m+2]=d.b[r[m+2]]}sendUniformData(t,r){t.uniform3fv(r.uGamma,this.gamma)}isNeutralState(){const{gamma:t}=this;return t[0]===1&&t[1]===1&&t[2]===1}toObject(){return{type:Av,gamma:this.gamma.concat()}}}H(Lu,"type",Av),H(Lu,"defaults",{gamma:[1,1,1]}),H(Lu,"uniformLocations",["uGamma"]),At.setClass(Lu);const bS={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Nu extends rn{applyTo2d(t){let{imageData:{data:r}}=t;for(let i,s=0;s<r.length;s+=4){const l=r[s],c=r[s+1],d=r[s+2];switch(this.mode){case"average":i=(l+c+d)/3;break;case"lightness":i=(Math.min(l,c,d)+Math.max(l,c,d))/2;break;case"luminosity":i=.21*l+.72*c+.07*d}r[s+2]=r[s+1]=r[s]=i}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return bS[this.mode]}sendUniformData(t,r){t.uniform1i(r.uMode,1)}isNeutralState(){return!1}}H(Nu,"type","Grayscale"),H(Nu,"defaults",{mode:"average"}),H(Nu,"uniformLocations",["uMode"]),At.setClass(Nu);const xS=Y(Y({},jv),{},{rotation:0});class Fd extends Oo{calculateMatrix(){const t=this.rotation*Math.PI,r=Yi(t),i=Xi(t),s=1/3,l=Math.sqrt(s)*i,c=1-r;this.matrix=[r+c/3,s*c-l,s*c+l,0,0,s*c+l,r+s*c,s*c-l,0,0,s*c-l,s*c+l,r+s*c,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(t){this.calculateMatrix(),super.applyTo(t)}toObject(){return{type:this.type,rotation:this.rotation}}}H(Fd,"type","HueRotation"),H(Fd,"defaults",xS),At.setClass(Fd);class Fu extends rn{applyTo2d(t){let{imageData:{data:r}}=t;for(let i=0;i<r.length;i+=4)r[i]=255-r[i],r[i+1]=255-r[i+1],r[i+2]=255-r[i+2],this.alpha&&(r[i+3]=255-r[i+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(t,r){t.uniform1i(r.uInvert,Number(this.invert)),t.uniform1i(r.uAlpha,Number(this.alpha))}}H(Fu,"type","Invert"),H(Fu,"defaults",{alpha:!1,invert:!0}),H(Fu,"uniformLocations",["uInvert","uAlpha"]),At.setClass(Fu);class Uu extends rn{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:r}}=t;const i=this.noise;for(let s=0;s<r.length;s+=4){const l=(.5-Math.random())*i;r[s]+=l,r[s+1]+=l,r[s+2]+=l}}sendUniformData(t,r){t.uniform1f(r.uNoise,this.noise/255),t.uniform1f(r.uSeed,Math.random())}isNeutralState(){return this.noise===0}}H(Uu,"type","Noise"),H(Uu,"defaults",{noise:0}),H(Uu,"uniformLocations",["uNoise","uSeed"]),At.setClass(Uu);class Hu extends rn{applyTo2d(t){let{imageData:{data:r,width:i,height:s}}=t;for(let l=0;l<s;l+=this.blocksize)for(let c=0;c<i;c+=this.blocksize){const d=4*l*i+4*c,m=r[d],y=r[d+1],b=r[d+2],_=r[d+3];for(let T=l;T<Math.min(l+this.blocksize,s);T++)for(let D=c;D<Math.min(c+this.blocksize,i);D++){const M=4*T*i+4*D;r[M]=m,r[M+1]=y,r[M+2]=b,r[M+3]=_}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(t,r){t.uniform1f(r.uBlocksize,this.blocksize)}}H(Hu,"type","Pixelate"),H(Hu,"defaults",{blocksize:4}),H(Hu,"uniformLocations",["uBlocksize"]),At.setClass(Hu);class Yu extends rn{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(t){let{imageData:{data:r}}=t;const i=255*this.distance,s=new xe(this.color).getSource(),l=[s[0]-i,s[1]-i,s[2]-i],c=[s[0]+i,s[1]+i,s[2]+i];for(let d=0;d<r.length;d+=4){const m=r[d],y=r[d+1],b=r[d+2];m>l[0]&&y>l[1]&&b>l[2]&&m<c[0]&&y<c[1]&&b<c[2]&&(r[d+3]=0)}}sendUniformData(t,r){const i=new xe(this.color).getSource(),s=this.distance,l=[0+i[0]/255-s,0+i[1]/255-s,0+i[2]/255-s,1],c=[i[0]/255+s,i[1]/255+s,i[2]/255+s,1];t.uniform4fv(r.uLow,l),t.uniform4fv(r.uHigh,c)}}H(Yu,"type","RemoveColor"),H(Yu,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),H(Yu,"uniformLocations",["uLow","uHigh"]),At.setClass(Yu);class Xu extends rn{sendUniformData(t,r){t.uniform2fv(r.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(r.uTaps,this.taps)}getFilterWindow(){const t=this.tempScale;return Math.ceil(this.lanczosLobes/t)}getCacheKey(){const t=this.getFilterWindow();return"".concat(this.type,"_").concat(t)}getFragmentSource(){const t=this.getFilterWindow();return this.generateShader(t)}getTaps(){const t=this.lanczosCreate(this.lanczosLobes),r=this.tempScale,i=this.getFilterWindow(),s=new Array(i);for(let l=1;l<=i;l++)s[l-1]=t(l*r);return s}generateShader(t){const r=new Array(t);for(let i=1;i<=t;i++)r[i-1]="".concat(i,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(t,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(r.map(((i,s)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(i,") * uTaps[").concat(s,"] + texture2D(uTexture, vTexCoord - ").concat(i,") * uTaps[").concat(s,`];
              sum += 2.0 * uTaps[`).concat(s,`];
            `))).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(t){t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,super.applyTo(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,super.applyTo(t),t.sourceHeight=t.destinationHeight}applyTo(t){_h(t)?this.applyToForWebgl(t):this.applyTo2d(t)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(t){return r=>{if(r>=t||r<=-t)return 0;if(r<11920929e-14&&r>-11920929e-14)return 1;const i=(r*=Math.PI)/t;return Math.sin(r)/r*Math.sin(i)/i}}applyTo2d(t){const r=t.imageData,i=this.scaleX,s=this.scaleY;this.rcpScaleX=1/i,this.rcpScaleY=1/s;const l=r.width,c=r.height,d=Math.round(l*i),m=Math.round(c*s);let y;y=this.resizeType==="sliceHack"?this.sliceByTwo(t,l,c,d,m):this.resizeType==="hermite"?this.hermiteFastResize(t,l,c,d,m):this.resizeType==="bilinear"?this.bilinearFiltering(t,l,c,d,m):this.resizeType==="lanczos"?this.lanczosResize(t,l,c,d,m):new ImageData(d,m),t.imageData=y}sliceByTwo(t,r,i,s,l){const c=t.imageData,d=.5;let m=!1,y=!1,b=r*d,_=i*d;const T=t.filterBackend.resources;let D=0,M=0;const B=r;let $=0;T.sliceByTwo||(T.sliceByTwo=Vi());const nt=T.sliceByTwo;(nt.width<1.5*r||nt.height<i)&&(nt.width=1.5*r,nt.height=i);const ht=nt.getContext("2d");for(ht.clearRect(0,0,1.5*r,i),ht.putImageData(c,0,0),s=Math.floor(s),l=Math.floor(l);!m||!y;)r=b,i=_,s<Math.floor(b*d)?b=Math.floor(b*d):(b=s,m=!0),l<Math.floor(_*d)?_=Math.floor(_*d):(_=l,y=!0),ht.drawImage(nt,D,M,r,i,B,$,b,_),D=B,M=$,$+=_;return ht.getImageData(D,M,s,l)}lanczosResize(t,r,i,s,l){const c=t.imageData.data,d=t.ctx.createImageData(s,l),m=d.data,y=this.lanczosCreate(this.lanczosLobes),b=this.rcpScaleX,_=this.rcpScaleY,T=2/this.rcpScaleX,D=2/this.rcpScaleY,M=Math.ceil(b*this.lanczosLobes/2),B=Math.ceil(_*this.lanczosLobes/2),$={},nt={x:0,y:0},ht={x:0,y:0};return(function bt(pt){let at,ft,dt,Ot,Rt,Vt,Qt,Ut,Pt,Kt,re;for(nt.x=(pt+.5)*b,ht.x=Math.floor(nt.x),at=0;at<l;at++){for(nt.y=(at+.5)*_,ht.y=Math.floor(nt.y),Rt=0,Vt=0,Qt=0,Ut=0,Pt=0,ft=ht.x-M;ft<=ht.x+M;ft++)if(!(ft<0||ft>=r)){Kt=Math.floor(1e3*Math.abs(ft-nt.x)),$[Kt]||($[Kt]={});for(let tt=ht.y-B;tt<=ht.y+B;tt++)tt<0||tt>=i||(re=Math.floor(1e3*Math.abs(tt-nt.y)),$[Kt][re]||($[Kt][re]=y(Math.sqrt(Math.pow(Kt*T,2)+Math.pow(re*D,2))/1e3)),dt=$[Kt][re],dt>0&&(Ot=4*(tt*r+ft),Rt+=dt,Vt+=dt*c[Ot],Qt+=dt*c[Ot+1],Ut+=dt*c[Ot+2],Pt+=dt*c[Ot+3]))}Ot=4*(at*s+pt),m[Ot]=Vt/Rt,m[Ot+1]=Qt/Rt,m[Ot+2]=Ut/Rt,m[Ot+3]=Pt/Rt}return++pt<s?bt(pt):d})(0)}bilinearFiltering(t,r,i,s,l){let c,d,m,y,b,_,T,D,M,B,$,nt,ht,bt=0;const pt=this.rcpScaleX,at=this.rcpScaleY,ft=4*(r-1),dt=t.imageData.data,Ot=t.ctx.createImageData(s,l),Rt=Ot.data;for(T=0;T<l;T++)for(D=0;D<s;D++)for(b=Math.floor(pt*D),_=Math.floor(at*T),M=pt*D-b,B=at*T-_,ht=4*(_*r+b),$=0;$<4;$++)c=dt[ht+$],d=dt[ht+4+$],m=dt[ht+ft+$],y=dt[ht+ft+4+$],nt=c*(1-M)*(1-B)+d*M*(1-B)+m*B*(1-M)+y*M*B,Rt[bt++]=nt;return Ot}hermiteFastResize(t,r,i,s,l){const c=this.rcpScaleX,d=this.rcpScaleY,m=Math.ceil(c/2),y=Math.ceil(d/2),b=t.imageData.data,_=t.ctx.createImageData(s,l),T=_.data;for(let D=0;D<l;D++)for(let M=0;M<s;M++){const B=4*(M+D*s);let $=0,nt=0,ht=0,bt=0,pt=0,at=0,ft=0;const dt=(D+.5)*d;for(let Ot=Math.floor(D*d);Ot<(D+1)*d;Ot++){const Rt=Math.abs(dt-(Ot+.5))/y,Vt=(M+.5)*c,Qt=Rt*Rt;for(let Ut=Math.floor(M*c);Ut<(M+1)*c;Ut++){let Pt=Math.abs(Vt-(Ut+.5))/m;const Kt=Math.sqrt(Qt+Pt*Pt);Kt>1&&Kt<-1||($=2*Kt*Kt*Kt-3*Kt*Kt+1,$>0&&(Pt=4*(Ut+Ot*r),ft+=$*b[Pt+3],ht+=$,b[Pt+3]<255&&($=$*b[Pt+3]/250),bt+=$*b[Pt],pt+=$*b[Pt+1],at+=$*b[Pt+2],nt+=$))}}T[B]=bt/nt,T[B+1]=pt/nt,T[B+2]=at/nt,T[B+3]=ft/ht}return _}}H(Xu,"type","Resize"),H(Xu,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),H(Xu,"uniformLocations",["uDelta","uTaps"]),At.setClass(Xu);class Vu extends rn{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:r}}=t;const i=-this.saturation;for(let s=0;s<r.length;s+=4){const l=r[s],c=r[s+1],d=r[s+2],m=Math.max(l,c,d);r[s]+=m!==l?(m-l)*i:0,r[s+1]+=m!==c?(m-c)*i:0,r[s+2]+=m!==d?(m-d)*i:0}}sendUniformData(t,r){t.uniform1f(r.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}H(Vu,"type","Saturation"),H(Vu,"defaults",{saturation:0}),H(Vu,"uniformLocations",["uSaturation"]),At.setClass(Vu);class Gu extends rn{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:r}}=t;const i=-this.vibrance;for(let s=0;s<r.length;s+=4){const l=r[s],c=r[s+1],d=r[s+2],m=Math.max(l,c,d),y=(l+c+d)/3,b=2*Math.abs(m-y)/255*i;r[s]+=m!==l?(m-l)*b:0,r[s+1]+=m!==c?(m-c)*b:0,r[s+2]+=m!==d?(m-d)*b:0}}sendUniformData(t,r){t.uniform1f(r.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}H(Gu,"type","Vibrance"),H(Gu,"defaults",{vibrance:0}),H(Gu,"uniformLocations",["uVibrance"]),At.setClass(Gu);const Ty=20;function _S(){const f=me.useRef(null),t=me.useRef(null),r=me.useRef(null),i=Jt(at=>at.project),s=Jt(at=>at.zoom),l=Jt(at=>at.panOffset),c=Jt(at=>at.setPanOffset),d=Jt(at=>at.activeTool),m=Jt(at=>at.activeColorId),y=Jt(at=>at.setCell),b=me.useRef(!1),_=me.useRef(null),T=me.useRef(new Set);me.useEffect(()=>{if(!f.current||!r.current)return;const at=new Id(f.current,{selection:!1,renderOnAddRemove:!1,skipOffscreen:!0});t.current=at;const ft=new ResizeObserver(()=>{if(r.current&&t.current){const{width:dt,height:Ot}=r.current.getBoundingClientRect();t.current.setDimensions({width:dt,height:Ot}),D()}});return ft.observe(r.current),()=>{ft.disconnect(),at.dispose(),t.current=null}},[]);const D=me.useCallback(()=>{const at=t.current;if(!at||!i?.grid||!i.settings)return;const{width:ft,height:dt}=i.settings,{cells:Ot}=i.grid,Rt=i.settings.gridLines;at.clear();const Vt=Ty*s,Qt=l.x,Ut=l.y,Pt=at.width||800,Kt=at.height||600,re=Math.max(0,Math.floor(-Qt/Vt)),tt=Math.min(ft,Math.ceil((Pt-Qt)/Vt)),gt=Math.max(0,Math.floor(-Ut/Vt)),_t=Math.min(dt,Math.ceil((Kt-Ut)/Vt));for(let zt=gt;zt<_t;zt++)for(let Lt=re;Lt<tt;Lt++){const R=Ot[zt]?.[Lt];if(R?.colorId){const st=i.palette.find(mt=>mt.id===R.colorId)?.color;if(st){const mt=new jr({left:Qt+Lt*Vt,top:Ut+zt*Vt,width:Vt,height:Vt,fill:st,selectable:!1,evented:!1});at.add(mt)}}}if(Rt.show){for(let zt=re;zt<=tt;zt++){const Lt=Qt+zt*Vt,R=Rt.highlight10&&zt%10===0,st=Rt.highlight5&&zt%5===0&&!R,mt=new Li([Lt,Ut+gt*Vt,Lt,Ut+_t*Vt],{stroke:R?Rt.highlight10Color:st?Rt.highlight5Color:Rt.color,strokeWidth:R?2:st?1.5:Rt.thickness,selectable:!1,evented:!1});at.add(mt)}for(let zt=gt;zt<=_t;zt++){const Lt=Ut+zt*Vt,R=Rt.highlight10&&zt%10===0,st=Rt.highlight5&&zt%5===0&&!R,mt=new Li([Qt+re*Vt,Lt,Qt+tt*Vt,Lt],{stroke:R?Rt.highlight10Color:st?Rt.highlight5Color:Rt.color,strokeWidth:R?2:st?1.5:Rt.thickness,selectable:!1,evented:!1});at.add(mt)}}at.renderAll()},[i,s,l]);me.useEffect(()=>{D()},[D]);const M=me.useCallback(at=>{if(!r.current||!i?.settings)return null;const ft=r.current.getBoundingClientRect(),dt=at.clientX-ft.left-l.x,Ot=at.clientY-ft.top-l.y,Rt=Ty*s,Vt=Math.floor(dt/Rt),Qt=Math.floor(Ot/Rt);return Vt>=0&&Vt<i.settings.width&&Qt>=0&&Qt<i.settings.height?{row:Qt,col:Vt}:null},[s,l,i?.settings]),B=me.useCallback(at=>{if(d==="pan"){b.current=!0,_.current={row:at.clientY,col:at.clientX};return}if(d!=="draw"&&d!=="erase")return;const ft=M(at);if(!ft)return;b.current=!0,T.current.clear(),_.current=ft;const dt=d==="draw"?m:null;y(ft.row,ft.col,dt),T.current.add(`${ft.row},${ft.col}`)},[d,m,M,y]),$=me.useCallback(at=>{if(!b.current)return;if(d==="pan"&&_.current){const Rt=at.clientX-_.current.col,Vt=at.clientY-_.current.row;c({x:l.x+Rt,y:l.y+Vt}),_.current={row:at.clientY,col:at.clientX};return}if(d!=="draw"&&d!=="erase")return;const ft=M(at);if(!ft)return;const dt=`${ft.row},${ft.col}`;if(T.current.has(dt))return;const Ot=d==="draw"?m:null;y(ft.row,ft.col,Ot),T.current.add(dt),_.current=ft},[d,m,M,y,l,c]),nt=me.useCallback(()=>{b.current=!1,_.current=null,T.current.clear()},[]),ht=me.useCallback(at=>{if(at.altKey||at.ctrlKey){at.preventDefault();const ft=at.deltaY>0?-.1:.1,dt=Math.max(.1,Math.min(10,s+ft));Jt.getState().setZoom(dt)}},[s]),bt=me.useCallback(at=>{if(d!=="eyedropper")return;const ft=M(at);if(!ft||!i?.grid)return;const dt=i.grid.cells[ft.row]?.[ft.col];dt?.colorId&&(Jt.getState().setActiveColor(dt.colorId),Jt.getState().setActiveTool("draw"))},[d,M,i?.grid]),pt=()=>{switch(d){case"draw":return"crosshair";case"erase":return"crosshair";case"select":return"cell";case"pan":return"grab";case"eyedropper":return"crosshair";default:return"default"}};return A.jsx("div",{ref:r,className:"w-full h-full overflow-hidden bg-gray-100 dark:bg-gray-900",style:{cursor:pt()},onMouseDown:B,onMouseMove:$,onMouseUp:nt,onMouseLeave:nt,onWheel:ht,onClick:bt,children:A.jsx("canvas",{ref:f})})}const SS=["#FF0000","#FF4444","#FF6666","#FF8888","#FFAAAA","#FFCCCC","#FF6600","#FF8833","#FFAA66","#FFCC99","#FFDDBB","#FFEEDD","#FFFF00","#FFFF44","#FFFF88","#FFFFAA","#FFFFCC","#FFFFEE","#00FF00","#44FF44","#66FF66","#88FF88","#AAFFAA","#CCFFCC","#00FFFF","#44FFFF","#66FFFF","#88FFFF","#AAFFFF","#CCFFFF","#0000FF","#4444FF","#6666FF","#8888FF","#AAAAFF","#CCCCFF","#8800FF","#9944FF","#AA66FF","#BB88FF","#CCAAFF","#DDCCFF","#FF00FF","#FF44FF","#FF66FF","#FF88FF","#FFAAFF","#FFCCFF","#8B4513","#A0522D","#CD853F","#DEB887","#F5DEB3","#FAEBD7","#000000","#333333","#666666","#999999","#CCCCCC","#FFFFFF"];function CS({color:f,onChange:t,onClose:r}){const[i,s]=me.useState(f),[l,c]=me.useState(f),d=me.useRef(null);me.useEffect(()=>{const _=T=>{d.current&&!d.current.contains(T.target)&&r()};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[r]);const m=_=>{s(_),c(_),t(_)},y=_=>{c(_),/^#[0-9A-Fa-f]{6}$/.test(_)&&(s(_),t(_))},b=_=>{const T=_.target.value;s(T),c(T),t(T)};return A.jsxs("div",{ref:d,className:"absolute top-full left-0 mt-2 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-4 z-50 w-72",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[A.jsx("div",{className:"w-12 h-12 rounded-lg border-2 border-gray-200 dark:border-gray-600",style:{backgroundColor:i}}),A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Hex Color"}),A.jsx("input",{type:"text",value:l,onChange:_=>y(_.target.value.toUpperCase()),className:"w-full px-2 py-1 text-sm bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded font-mono",placeholder:"#000000"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Pick"}),A.jsx("input",{type:"color",value:i,onChange:b,className:"w-8 h-8 rounded cursor-pointer"})]})]}),A.jsx("div",{className:"grid grid-cols-6 gap-1",children:SS.map(_=>A.jsx("button",{onClick:()=>m(_),className:`w-8 h-8 rounded border-2 transition-transform hover:scale-110 ${i.toUpperCase()===_?"border-blue-500 ring-2 ring-blue-300":"border-gray-200 dark:border-gray-600"}`,style:{backgroundColor:_},title:_},_))}),A.jsx("div",{className:"mt-4 flex justify-end",children:A.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded hover:bg-gray-200 dark:hover:bg-gray-600",children:"Done"})})]})}function wS(){const f=Jt(M=>M.project),t=Jt(M=>M.activeColorId),r=Jt(M=>M.addColor),i=Jt(M=>M.updateColor),s=Jt(M=>M.removeColor),l=Jt(M=>M.setActiveColor),[c,d]=me.useState(null),[m,y]=me.useState(null);if(!f)return null;const b=()=>{const M=`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`,B=r(M);l(B.id),d(B.id)},_=(M,B)=>{i(M,{color:B})},T=(M,B)=>{i(M,{name:B})},D=(M,B)=>{B.stopPropagation(),!(f.palette.length<=1)&&s(M)};return A.jsxs("div",{className:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 p-4 flex flex-col h-full",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsx("h3",{className:"font-medium text-gray-800 dark:text-white",children:"Colors"}),A.jsx("button",{onClick:b,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Add color",children:A.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),A.jsx("div",{className:"flex-1 overflow-auto space-y-1",children:f.palette.map(M=>A.jsx(TS,{entry:M,isActive:t===M.id,isEditing:c===M.id,isEditingName:m===M.id,canDelete:f.palette.length>1,onClick:()=>l(M.id),onDoubleClick:()=>d(M.id),onNameDoubleClick:()=>y(M.id),onColorChange:B=>_(M.id,B),onNameChange:B=>T(M.id,B),onNameBlur:()=>y(null),onColorPickerClose:()=>d(null),onDelete:B=>D(M.id,B)},M.id))}),A.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:A.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[f.palette.length," color",f.palette.length!==1?"s":""]})})]})}function TS({entry:f,isActive:t,isEditing:r,isEditingName:i,canDelete:s,onClick:l,onDoubleClick:c,onNameDoubleClick:d,onColorChange:m,onNameChange:y,onNameBlur:b,onColorPickerClose:_,onDelete:T}){return A.jsxs("div",{className:"relative",children:[A.jsxs("button",{onClick:l,className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors group ${t?"bg-blue-50 dark:bg-blue-900/30 ring-2 ring-blue-500":"hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[A.jsx("div",{className:"w-8 h-8 rounded border border-gray-200 dark:border-gray-600 shrink-0 cursor-pointer",style:{backgroundColor:f.color},onDoubleClick:D=>{D.stopPropagation(),c()},title:"Double-click to edit color"}),A.jsxs("div",{className:"flex-1 text-left min-w-0",children:[i?A.jsx("input",{type:"text",value:f.name,onChange:D=>y(D.target.value),onBlur:b,onKeyDown:D=>{D.key==="Enter"&&b()},className:"w-full px-1 py-0.5 text-sm font-medium bg-white dark:bg-gray-700 border border-blue-500 rounded focus:outline-none",autoFocus:!0,onClick:D=>D.stopPropagation()}):A.jsx("div",{className:"text-sm font-medium text-gray-800 dark:text-white truncate cursor-text",onDoubleClick:D=>{D.stopPropagation(),d()},title:"Double-click to edit name",children:f.name}),A.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:f.color.toUpperCase()})]}),s&&A.jsx("button",{onClick:T,className:"p-1 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete color",children:A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r&&A.jsx(CS,{color:f.color,onChange:m,onClose:_})]})}function OS(){const f=Jt(y=>y.project),t=Jt(y=>y.setActiveTool),r=Jt(y=>y.undo),i=Jt(y=>y.redo),s=Jt(y=>y.saveCurrentProject),l=Jt(y=>y.setZoom),c=Jt(y=>y.zoom),d=Jt(y=>y.clearSelection),m=bn(y=>y.view);me.useEffect(()=>{const y=_=>{if(m!=="editor"||!f||_.target instanceof HTMLInputElement||_.target instanceof HTMLTextAreaElement)return;const T=_.ctrlKey||_.metaKey;if(!T&&!_.altKey&&!_.shiftKey)switch(_.key.toLowerCase()){case"d":_.preventDefault(),t("draw");break;case"e":_.preventDefault(),t("erase");break;case"s":_.preventDefault(),t("select");break;case"i":_.preventDefault(),t("eyedropper");break;case" ":_.preventDefault(),t("pan");break;case"escape":_.preventDefault(),d();break}if(T)switch(_.key.toLowerCase()){case"z":_.preventDefault(),_.shiftKey?i():r();break;case"y":_.preventDefault(),i();break;case"s":_.preventDefault(),s();break;case"=":case"+":_.preventDefault(),l(c+.1);break;case"-":_.preventDefault(),l(c-.1);break;case"0":_.preventDefault(),l(1);break}},b=_=>{_.key===" "&&Jt.getState().activeTool==="pan"&&t("draw")};return window.addEventListener("keydown",y),window.addEventListener("keyup",b),()=>{window.removeEventListener("keydown",y),window.removeEventListener("keyup",b)}},[f,m,t,r,i,s,l,c,d])}function DS(){const f=bn(s=>s.view),t=bn(s=>s.activeDialog),r=Ju(s=>s.loadSettings),i=Jt(s=>s.project);return me.useEffect(()=>{r()},[r]),OS(),A.jsxs(T1,{children:[f==="projects"&&A.jsx(j1,{}),f==="editor"&&i&&A.jsx(ES,{}),t==="newProject"&&A.jsx(k1,{})]})}function ES(){const f=Jt(i=>i.project),t=Jt(i=>i.zoom),r=Jt(i=>i.setZoom);return f?A.jsxs("div",{className:"flex h-full",children:[A.jsx(wS,{}),A.jsxs("div",{className:"flex-1 flex flex-col",children:[A.jsxs("div",{className:"h-12 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex items-center px-4 gap-4",children:[A.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[f.settings.width," x ",f.settings.height]}),A.jsx("div",{className:"flex-1"}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:()=>r(t-.1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",disabled:t<=.1,children:A.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),A.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400 w-16 text-center",children:[Math.round(t*100),"%"]}),A.jsx("button",{onClick:()=>r(t+.1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",disabled:t>=10,children:A.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]}),A.jsx("div",{className:"flex-1",children:A.jsx(_S,{})})]})]}):null}i1.createRoot(document.getElementById("root")).render(A.jsx(me.StrictMode,{children:A.jsx(DS,{})}));
